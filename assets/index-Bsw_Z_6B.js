(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function bN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function SN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var s=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(a){var o=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:function(){return n[a]}})}),s}var am={exports:{}},bc={};var jE;function NN(){if(jE)return bc;jE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:n,type:a,key:h,ref:o!==void 0?o:null,props:u}}return bc.Fragment=e,bc.jsx=s,bc.jsxs=s,bc}var DE;function wN(){return DE||(DE=1,am.exports=NN()),am.exports}var c=wN(),rm={exports:{}},nt={};var OE;function xN(){if(OE)return nt;OE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),x=Symbol.iterator;function B(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function z(H,de,ae){this.props=H,this.context=de,this.refs=U,this.updater=ae||X}z.prototype.isReactComponent={},z.prototype.setState=function(H,de){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,de,"setState")},z.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function G(){}G.prototype=z.prototype;function K(H,de,ae){this.props=H,this.context=de,this.refs=U,this.updater=ae||X}var oe=K.prototype=new G;oe.constructor=K,V(oe,z.prototype),oe.isPureReactComponent=!0;var ye=Array.isArray;function ge(){}var O={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function M(H,de,ae){var Ee=ae.ref;return{$$typeof:n,type:H,key:de,ref:Ee!==void 0?Ee:null,props:ae}}function q(H,de){return M(H.type,de,H.props)}function R(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function D(H){var de={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ae){return de[ae]})}var k=/\/+/g;function we(H,de){return typeof H=="object"&&H!==null&&H.key!=null?D(""+H.key):de.toString(36)}function Je(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ge,ge):(H.status="pending",H.then(function(de){H.status==="pending"&&(H.status="fulfilled",H.value=de)},function(de){H.status==="pending"&&(H.status="rejected",H.reason=de)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function se(H,de,ae,Ee,ie){var xe=typeof H;(xe==="undefined"||xe==="boolean")&&(H=null);var Pe=!1;if(H===null)Pe=!0;else switch(xe){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(H.$$typeof){case n:case e:Pe=!0;break;case S:return Pe=H._init,se(Pe(H._payload),de,ae,Ee,ie)}}if(Pe)return ie=ie(H),Pe=Ee===""?"."+we(H,0):Ee,ye(ie)?(ae="",Pe!=null&&(ae=Pe.replace(k,"$&/")+"/"),se(ie,de,ae,"",function(on){return on})):ie!=null&&(R(ie)&&(ie=q(ie,ae+(ie.key==null||H&&H.key===ie.key?"":(""+ie.key).replace(k,"$&/")+"/")+Pe)),de.push(ie)),1;Pe=0;var wt=Ee===""?".":Ee+":";if(ye(H))for(var yt=0;yt<H.length;yt++)Ee=H[yt],xe=wt+we(Ee,yt),Pe+=se(Ee,de,ae,xe,ie);else if(yt=B(H),typeof yt=="function")for(H=yt.call(H),yt=0;!(Ee=H.next()).done;)Ee=Ee.value,xe=wt+we(Ee,yt++),Pe+=se(Ee,de,ae,xe,ie);else if(xe==="object"){if(typeof H.then=="function")return se(Je(H),de,ae,Ee,ie);throw de=String(H),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function Te(H,de,ae){if(H==null)return H;var Ee=[],ie=0;return se(H,Ee,"","",function(xe){return de.call(ae,xe,ie++)}),Ee}function Re(H){if(H._status===-1){var de=H._result;de=de(),de.then(function(ae){(H._status===0||H._status===-1)&&(H._status=1,H._result=ae)},function(ae){(H._status===0||H._status===-1)&&(H._status=2,H._result=ae)}),H._status===-1&&(H._status=0,H._result=de)}if(H._status===1)return H._result.default;throw H._result}var rt=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},at={map:Te,forEach:function(H,de,ae){Te(H,function(){de.apply(this,arguments)},ae)},count:function(H){var de=0;return Te(H,function(){de++}),de},toArray:function(H){return Te(H,function(de){return de})||[]},only:function(H){if(!R(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return nt.Activity=w,nt.Children=at,nt.Component=z,nt.Fragment=s,nt.Profiler=o,nt.PureComponent=K,nt.StrictMode=a,nt.Suspense=E,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,nt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return O.H.useMemoCache(H)}},nt.cache=function(H){return function(){return H.apply(null,arguments)}},nt.cacheSignal=function(){return null},nt.cloneElement=function(H,de,ae){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Ee=V({},H.props),ie=H.key;if(de!=null)for(xe in de.key!==void 0&&(ie=""+de.key),de)!j.call(de,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&de.ref===void 0||(Ee[xe]=de[xe]);var xe=arguments.length-2;if(xe===1)Ee.children=ae;else if(1<xe){for(var Pe=Array(xe),wt=0;wt<xe;wt++)Pe[wt]=arguments[wt+2];Ee.children=Pe}return M(H.type,ie,Ee)},nt.createContext=function(H){return H={$$typeof:h,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},nt.createElement=function(H,de,ae){var Ee,ie={},xe=null;if(de!=null)for(Ee in de.key!==void 0&&(xe=""+de.key),de)j.call(de,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(ie[Ee]=de[Ee]);var Pe=arguments.length-2;if(Pe===1)ie.children=ae;else if(1<Pe){for(var wt=Array(Pe),yt=0;yt<Pe;yt++)wt[yt]=arguments[yt+2];ie.children=wt}if(H&&H.defaultProps)for(Ee in Pe=H.defaultProps,Pe)ie[Ee]===void 0&&(ie[Ee]=Pe[Ee]);return M(H,xe,ie)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(H){return{$$typeof:g,render:H}},nt.isValidElement=R,nt.lazy=function(H){return{$$typeof:S,_payload:{_status:-1,_result:H},_init:Re}},nt.memo=function(H,de){return{$$typeof:_,type:H,compare:de===void 0?null:de}},nt.startTransition=function(H){var de=O.T,ae={};O.T=ae;try{var Ee=H(),ie=O.S;ie!==null&&ie(ae,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(ge,rt)}catch(xe){rt(xe)}finally{de!==null&&ae.types!==null&&(de.types=ae.types),O.T=de}},nt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},nt.use=function(H){return O.H.use(H)},nt.useActionState=function(H,de,ae){return O.H.useActionState(H,de,ae)},nt.useCallback=function(H,de){return O.H.useCallback(H,de)},nt.useContext=function(H){return O.H.useContext(H)},nt.useDebugValue=function(){},nt.useDeferredValue=function(H,de){return O.H.useDeferredValue(H,de)},nt.useEffect=function(H,de){return O.H.useEffect(H,de)},nt.useEffectEvent=function(H){return O.H.useEffectEvent(H)},nt.useId=function(){return O.H.useId()},nt.useImperativeHandle=function(H,de,ae){return O.H.useImperativeHandle(H,de,ae)},nt.useInsertionEffect=function(H,de){return O.H.useInsertionEffect(H,de)},nt.useLayoutEffect=function(H,de){return O.H.useLayoutEffect(H,de)},nt.useMemo=function(H,de){return O.H.useMemo(H,de)},nt.useOptimistic=function(H,de){return O.H.useOptimistic(H,de)},nt.useReducer=function(H,de,ae){return O.H.useReducer(H,de,ae)},nt.useRef=function(H){return O.H.useRef(H)},nt.useState=function(H){return O.H.useState(H)},nt.useSyncExternalStore=function(H,de,ae){return O.H.useSyncExternalStore(H,de,ae)},nt.useTransition=function(){return O.H.useTransition()},nt.version="19.2.4",nt}var ME;function mp(){return ME||(ME=1,rm.exports=xN()),rm.exports}var L=mp(),om={exports:{}},Sc={},lm={exports:{}},cm={};var UE;function AN(){return UE||(UE=1,(function(n){function e(se,Te){var Re=se.length;se.push(Te);e:for(;0<Re;){var rt=Re-1>>>1,at=se[rt];if(0<o(at,Te))se[rt]=Te,se[Re]=at,Re=rt;else break e}}function s(se){return se.length===0?null:se[0]}function a(se){if(se.length===0)return null;var Te=se[0],Re=se.pop();if(Re!==Te){se[0]=Re;e:for(var rt=0,at=se.length,H=at>>>1;rt<H;){var de=2*(rt+1)-1,ae=se[de],Ee=de+1,ie=se[Ee];if(0>o(ae,Re))Ee<at&&0>o(ie,ae)?(se[rt]=ie,se[Ee]=Re,rt=Ee):(se[rt]=ae,se[de]=Re,rt=de);else if(Ee<at&&0>o(ie,Re))se[rt]=ie,se[Ee]=Re,rt=Ee;else break e}}return Te}function o(se,Te){var Re=se.sortIndex-Te.sortIndex;return Re!==0?Re:se.id-Te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();n.unstable_now=function(){return h.now()-g}}var E=[],_=[],S=1,w=null,x=3,B=!1,X=!1,V=!1,U=!1,z=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function oe(se){for(var Te=s(_);Te!==null;){if(Te.callback===null)a(_);else if(Te.startTime<=se)a(_),Te.sortIndex=Te.expirationTime,e(E,Te);else break;Te=s(_)}}function ye(se){if(V=!1,oe(se),!X)if(s(E)!==null)X=!0,ge||(ge=!0,D());else{var Te=s(_);Te!==null&&Je(ye,Te.startTime-se)}}var ge=!1,O=-1,j=5,M=-1;function q(){return U?!0:!(n.unstable_now()-M<j)}function R(){if(U=!1,ge){var se=n.unstable_now();M=se;var Te=!0;try{e:{X=!1,V&&(V=!1,G(O),O=-1),B=!0;var Re=x;try{t:{for(oe(se),w=s(E);w!==null&&!(w.expirationTime>se&&q());){var rt=w.callback;if(typeof rt=="function"){w.callback=null,x=w.priorityLevel;var at=rt(w.expirationTime<=se);if(se=n.unstable_now(),typeof at=="function"){w.callback=at,oe(se),Te=!0;break t}w===s(E)&&a(E),oe(se)}else a(E);w=s(E)}if(w!==null)Te=!0;else{var H=s(_);H!==null&&Je(ye,H.startTime-se),Te=!1}}break e}finally{w=null,x=Re,B=!1}Te=void 0}}finally{Te?D():ge=!1}}}var D;if(typeof K=="function")D=function(){K(R)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,we=k.port2;k.port1.onmessage=R,D=function(){we.postMessage(null)}}else D=function(){z(R,0)};function Je(se,Te){O=z(function(){se(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(se){switch(x){case 1:case 2:case 3:var Te=3;break;default:Te=x}var Re=x;x=Te;try{return se()}finally{x=Re}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(se,Te){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Re=x;x=se;try{return Te()}finally{x=Re}},n.unstable_scheduleCallback=function(se,Te,Re){var rt=n.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?rt+Re:rt):Re=rt,se){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Re+at,se={id:S++,callback:Te,priorityLevel:se,startTime:Re,expirationTime:at,sortIndex:-1},Re>rt?(se.sortIndex=Re,e(_,se),s(E)===null&&se===s(_)&&(V?(G(O),O=-1):V=!0,Je(ye,Re-rt))):(se.sortIndex=at,e(E,se),X||B||(X=!0,ge||(ge=!0,D()))),se},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(se){var Te=x;return function(){var Re=x;x=Te;try{return se.apply(this,arguments)}finally{x=Re}}}})(cm)),cm}var VE;function RN(){return VE||(VE=1,lm.exports=AN()),lm.exports}var um={exports:{}},Zn={};var qE;function CN(){if(qE)return Zn;qE=1;var n=mp();function e(E){var _="https://react.dev/errors/"+E;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+E+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(E,_,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:E,containerInfo:_,implementation:S}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(E,_){if(E==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Zn.createPortal=function(E,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(E,_,null,S)},Zn.flushSync=function(E){var _=h.T,S=a.p;try{if(h.T=null,a.p=2,E)return E()}finally{h.T=_,a.p=S,a.d.f()}},Zn.preconnect=function(E,_){typeof E=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(E,_))},Zn.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},Zn.preinit=function(E,_){if(typeof E=="string"&&_&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin),x=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?a.d.S(E,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:B}):S==="script"&&a.d.X(E,{crossOrigin:w,integrity:x,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Zn.preinitModule=function(E,_){if(typeof E=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);a.d.M(E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(E)},Zn.preload=function(E,_){if(typeof E=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin);a.d.L(E,S,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Zn.preloadModule=function(E,_){if(typeof E=="string")if(_){var S=g(_.as,_.crossOrigin);a.d.m(E,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(E)},Zn.requestFormReset=function(E){a.d.r(E)},Zn.unstable_batchedUpdates=function(E,_){return E(_)},Zn.useFormState=function(E,_,S){return h.H.useFormState(E,_,S)},Zn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Zn.version="19.2.4",Zn}var BE;function IN(){if(BE)return um.exports;BE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),um.exports=CN(),um.exports}var PE;function kN(){if(PE)return Sc;PE=1;var n=RN(),e=mp(),s=IN();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function E(t){if(u(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,l=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return E(f),t;if(p===l)return E(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==l.return)r=f,l=p;else{for(var T=!1,A=f.child;A;){if(A===r){T=!0,r=f,l=p;break}if(A===l){T=!0,l=f,r=p;break}A=A.sibling}if(!T){for(A=p.child;A;){if(A===r){T=!0,r=p,l=f;break}if(A===l){T=!0,l=p,r=f;break}A=A.sibling}if(!T)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),K=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function we(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case z:return"Profiler";case U:return"StrictMode";case ye:return"Suspense";case ge:return"SuspenseList";case M:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case K:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case oe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:we(t.type)||"Memo";case j:i=t._payload,t=t._init;try{return we(t(i))}catch{}}return null}var Je=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},rt=[],at=-1;function H(t){return{current:t}}function de(t){0>at||(t.current=rt[at],rt[at]=null,at--)}function ae(t,i){at++,rt[at]=t.current,t.current=i}var Ee=H(null),ie=H(null),xe=H(null),Pe=H(null);function wt(t,i){switch(ae(xe,i),ae(ie,t),ae(Ee,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?nE(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=nE(i),t=sE(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}de(Ee),ae(Ee,t)}function yt(){de(Ee),de(ie),de(xe)}function on(t){t.memoizedState!==null&&ae(Pe,t);var i=Ee.current,r=sE(i,t.type);i!==r&&(ae(ie,t),ae(Ee,r))}function ps(t){ie.current===t&&(de(Ee),de(ie)),Pe.current===t&&(de(Pe),yc._currentValue=Re)}var hn,wi;function Yn(t){if(hn===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);hn=i&&i[1]||"",wi=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hn+t+wi}var La=!1;function It(t,i){if(!t||La)return"";La=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var ne=le}Reflect.construct(t,[],me)}else{try{me.call()}catch(le){ne=le}t.call(me.prototype)}}else{try{throw Error()}catch(le){ne=le}(me=t())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],A=p[1];if(T&&A){var P=T.split(`
`),ee=A.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===ee.length)for(l=P.length-1,f=ee.length-1;1<=l&&0<=f&&P[l]!==ee[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==ee[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==ee[f]){var ue=`
`+P[l].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=l&&0<=f);break}}}finally{La=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Yn(r):""}function Qi(t,i){switch(t.tag){case 26:case 27:case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return t.child!==i&&i!==null?Yn("Suspense Fallback"):Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return It(t.type,!1);case 11:return It(t.type.render,!1);case 1:return It(t.type,!0);case 31:return Yn("Activity");default:return""}}function ja(t){try{var i="",r=null;do i+=Qi(t,r),r=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Kt=Object.prototype.hasOwnProperty,sn=n.unstable_scheduleCallback,Cs=n.unstable_cancelCallback,Vl=n.unstable_shouldYield,Nr=n.unstable_requestPaint,On=n.unstable_now,fi=n.unstable_getCurrentPriorityLevel,hi=n.unstable_ImmediatePriority,is=n.unstable_UserBlockingPriority,mi=n.unstable_NormalPriority,go=n.unstable_LowPriority,wr=n.unstable_IdlePriority,yo=n.log,Eo=n.unstable_setDisableYieldValue,Is=null,Be=null;function as(t){if(typeof yo=="function"&&Eo(t),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Is,t)}catch{}}var Xt=Math.clz32?Math.clz32:vo,xr=Math.log,ks=Math.LN2;function vo(t){return t>>>=0,t===0?32:31-(xr(t)/ks|0)|0}var Sn=256,xi=262144,Zt=4194304;function Ls(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function be(t,i,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?f=Ls(l):(T&=A,T!==0?f=Ls(T):r||(r=A&~t,r!==0&&(f=Ls(r))))):(A=l&~p,A!==0?f=Ls(A):T!==0?f=Ls(T):r||(r=l&~t,r!==0&&(f=Ls(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function js(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ql(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mn(){var t=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),t}function _s(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function pi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ar(t,i,r,l,f,p){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,P=t.expirationTimes,ee=t.hiddenUpdates;for(r=T&~r;0<r;){var ue=31-Xt(r),me=1<<ue;A[ue]=0,P[ue]=-1;var ne=ee[ue];if(ne!==null)for(ee[ue]=null,ue=0;ue<ne.length;ue++){var le=ne[ue];le!==null&&(le.lane&=-536870913)}r&=~me}l!==0&&rs(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~i))}function rs(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Xt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function Da(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var l=31-Xt(r),f=1<<l;f&i|t[l]&i&&(t[l]|=i),r&=~f}}function mn(t,i){var r=i&-i;return r=(r&42)!==0?1:Ai(r),(r&(t.suspendedLanes|i))!==0?0:r}function Ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Rr(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:xE(t.type))}function gs(t,i){var r=Te.p;try{return Te.p=t,i()}finally{Te.p=r}}var Kn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Kn,ln="__reactProps$"+Kn,$s="__reactContainer$"+Kn,Ri="__reactEvents$"+Kn,Bl="__reactListeners$"+Kn,Oa="__reactHandles$"+Kn,Cr="__reactResources$"+Kn,os="__reactMarker$"+Kn;function Ma(t){delete t[ft],delete t[ln],delete t[Ri],delete t[Bl],delete t[Oa]}function cn(t){var i=t[ft];if(i)return i;for(var r=t.parentNode;r;){if(i=r[$s]||r[ft]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=uE(t);t!==null;){if(r=t[ft])return r;t=uE(t)}return i}t=r,r=t.parentNode}return null}function Un(t){if(t=t[ft]||t[$s]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Vn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Ds(t){var i=t[Cr];return i||(i=t[Cr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function en(t){t[os]=!0}var _i=new Set,Ua={};function ls(t,i){Os(t,i),Os(t+"Capture",i)}function Os(t,i){for(Ua[t]=i,t=0;t<i.length;t++)_i.add(i[t])}var Ys=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ki={},Va={};function Ir(t){return Kt.call(Va,t)?!0:Kt.call(Ki,t)?!1:Ys.test(t)?Va[t]=!0:(Ki[t]=!0,!1)}function Wi(t,i,r){if(Ir(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function cs(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function Lt(t,i,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+l)}}function tt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wn(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ci(t,i,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){r=""+T,p.call(this,T)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function vt(t){if(!t._valueTracker){var i=Wn(t)?"checked":"value";t._valueTracker=Ci(t,i,""+t[i])}}function Qs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),l="";return t&&(l=Wn(t)?t.checked?"true":"false":t.value),t=l,t!==r?(i.setValue(t),!0):!1}function ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ji=/[\n"\\]/g;function Jn(t){return t.replace(Ji,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ks(t,i,r,l,f,p,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+tt(i)):t.value!==""+tt(i)&&(t.value=""+tt(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?Lr(t,T,tt(i)):r!=null?Lr(t,T,tt(r)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+tt(A):t.removeAttribute("name")}function kr(t,i,r,l,f,p,T,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){vt(t);return}r=r!=null?""+tt(r):"",i=i!=null?""+tt(i):r,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),vt(t)}function Lr(t,i,r){i==="number"&&ys(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ws(t,i,r,l){if(t=t.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=i.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+tt(r),i=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function jr(t,i,r){if(i!=null&&(i=""+tt(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+tt(r):""}function Js(t,i,r,l){if(i==null){if(l!=null){if(r!=null)throw Error(a(92));if(Je(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),i=r}r=tt(i),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),vt(t)}function An(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var To=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ii(t,i,r){var l=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,r):typeof r!="number"||r===0||To.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function ki(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&r[f]!==l&&Ii(t,f,l)}else for(var p in i)i.hasOwnProperty(p)&&Ii(t,p,i[p])}function Es(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function us(t){return Rn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qn(){}var Dr=null;function Ce(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zs=null,ds=null;function Li(t){var i=Un(t);if(i&&(t=i.stateNode)){var r=t[ln]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ks(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Jn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var l=r[i];if(l!==t&&l.form===t.form){var f=l[ln]||null;if(!f)throw Error(a(90));Ks(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)l=r[i],l.form===t.form&&Qs(l)}break e;case"textarea":jr(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Ws(t,!!r.multiple,i,!1)}}}var Zi=!1;function vs(t,i,r){if(Zi)return t(i,r);Zi=!0;try{var l=t(i);return l}finally{if(Zi=!1,(Zs!==null||ds!==null)&&(Du(),Zs&&(i=Zs,t=ds,ds=Zs=null,Li(i),t)))for(i=0;i<t.length;i++)Li(t[i])}}function pn(t,i){var r=t.stateNode;if(r===null)return null;var l=r[ln]||null;if(l===null)return null;r=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gi=!1;if(Cn)try{var m={};Object.defineProperty(m,"passive",{get:function(){gi=!0}}),window.addEventListener("test",m,m),window.removeEventListener("test",m,m)}catch{gi=!1}var y=null,N=null,C=null;function F(){if(C)return C;var t,i=N,r=i.length,l,f="value"in y?y.value:y.textContent,p=f.length;for(t=0;t<r&&i[t]===f[t];t++);var T=r-t;for(l=1;l<=T&&i[r-l]===f[p-l];l++);return C=f.slice(t,1<l?1-l:void 0)}function W(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ce(){return!0}function je(){return!1}function Fe(t){function i(r,l,f,p,T){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ce:je,this.isPropagationStopped=je,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ce)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ce)},persist:function(){},isPersistent:ce}),i}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nt=Fe(Ye),tn=w({},Ye,{view:0,detail:0}),Ba=Fe(tn),ji,ea,ei,ta=w({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Di,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(ji=t.screenX-ei.screenX,ea=t.screenY-ei.screenY):ea=ji=0,ei=t),ji)},movementY:function(t){return"movementY"in t?t.movementY:ea}}),Or=Fe(ta),na=w({},ta,{dataTransfer:0}),bo=Fe(na),So=w({},tn,{relatedTarget:0}),sa=Fe(So),Mr=w({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),No=Fe(Mr),Pa=w({},Ye,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ur=Fe(Pa),wo=w({},Ye,{data:0}),ti=Fe(wo),xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ao={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ro={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ro[t])?!!i[t]:!1}function Di(){return Co}var In=w({},tn,{key:function(t){if(t.key){var i=xo[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=W(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ao[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Di,charCode:function(t){return t.type==="keypress"?W(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Io=Fe(In),ko=w({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yi=Fe(ko),d=w({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Di}),v=Fe(d),b=w({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Fe(b),J=w({},ta,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Fe(J),Ne=w({},Ye,{newState:0,oldState:0}),We=Fe(Ne),Wt=[9,13,27,32],Tt=Cn&&"CompositionEvent"in window,Bt=null;Cn&&"documentMode"in document&&(Bt=document.documentMode);var Q=Cn&&"TextEvent"in window&&!Bt,he=Cn&&(!Tt||Bt&&8<Bt&&11>=Bt),Ae=" ",Me=!1;function Xe(t,i){switch(t){case"keyup":return Wt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kn=!1;function Ts(t,i){switch(t){case"compositionend":return ht(i);case"keypress":return i.which!==32?null:(Me=!0,Ae);case"textInput":return t=i.data,t===Ae&&Me?null:t;default:return null}}function fs(t,i){if(kn)return t==="compositionend"||!Tt&&Xe(t,i)?(t=F(),C=N=y=null,kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return he&&i.locale!=="ko"?null:i.data;default:return null}}var Ms={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lo(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ms[t.type]:i==="textarea"}function Oi(t,i,r,l){Zs?ds?ds.push(l):ds=[l]:Zs=l,i=Pu(i,"onChange"),0<i.length&&(r=new Nt("onChange","change",null,r,l),t.push({event:r,listeners:i}))}var Vr=null,Pl=null;function Q1(t){Ky(t,0)}function Zc(t){var i=Vn(t);if(Qs(i))return t}function p_(t,i){if(t==="change")return i}var __=!1;if(Cn){var ff;if(Cn){var hf="oninput"in document;if(!hf){var g_=document.createElement("div");g_.setAttribute("oninput","return;"),hf=typeof g_.oninput=="function"}ff=hf}else ff=!1;__=ff&&(!document.documentMode||9<document.documentMode)}function y_(){Vr&&(Vr.detachEvent("onpropertychange",E_),Pl=Vr=null)}function E_(t){if(t.propertyName==="value"&&Zc(Pl)){var i=[];Oi(i,Pl,t,Ce(t)),vs(Q1,i)}}function K1(t,i,r){t==="focusin"?(y_(),Vr=i,Pl=r,Vr.attachEvent("onpropertychange",E_)):t==="focusout"&&y_()}function W1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(Pl)}function J1(t,i){if(t==="click")return Zc(i)}function Z1(t,i){if(t==="input"||t==="change")return Zc(i)}function eS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Us=typeof Object.is=="function"?Object.is:eS;function Fl(t,i){if(Us(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),l=Object.keys(i);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!Kt.call(i,f)||!Us(t[f],i[f]))return!1}return!0}function v_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T_(t,i){var r=v_(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=i&&l>=i)return{node:r,offset:i-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=v_(r)}}function b_(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?b_(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function S_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ys(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=ys(t.document)}return i}function mf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var tS=Cn&&"documentMode"in document&&11>=document.documentMode,jo=null,pf=null,zl=null,_f=!1;function N_(t,i,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_f||jo==null||jo!==ys(l)||(l=jo,"selectionStart"in l&&mf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Fl(zl,l)||(zl=l,l=Pu(pf,"onSelect"),0<l.length&&(i=new Nt("onSelect","select",null,i,r),t.push({event:i,listeners:l}),i.target=jo)))}function qr(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var Do={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},gf={},w_={};Cn&&(w_=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Br(t){if(gf[t])return gf[t];if(!Do[t])return t;var i=Do[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in w_)return gf[t]=i[r];return t}var x_=Br("animationend"),A_=Br("animationiteration"),R_=Br("animationstart"),nS=Br("transitionrun"),sS=Br("transitionstart"),iS=Br("transitioncancel"),C_=Br("transitionend"),I_=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function Ei(t,i){I_.set(t,i),ls(i,[t])}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ni=[],Oo=0,Ef=0;function tu(){for(var t=Oo,i=Ef=Oo=0;i<t;){var r=ni[i];ni[i++]=null;var l=ni[i];ni[i++]=null;var f=ni[i];ni[i++]=null;var p=ni[i];if(ni[i++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&k_(r,f,p)}}function nu(t,i,r,l){ni[Oo++]=t,ni[Oo++]=i,ni[Oo++]=r,ni[Oo++]=l,Ef|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function vf(t,i,r,l){return nu(t,i,r,l),su(t)}function Pr(t,i){return nu(t,null,null,i),su(t)}function k_(t,i,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&i!==null&&(f=31-Xt(r),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=r|536870912),p):null}function su(t){if(50<dc)throw dc=0,Ch=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Mo={};function aS(t,i,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(t,i,r,l){return new aS(t,i,r,l)}function Tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ia(t,i){var r=t.alternate;return r===null?(r=Vs(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function L_(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function iu(t,i,r,l,f,p){var T=0;if(l=t,typeof t=="function")Tf(t)&&(T=1);else if(typeof t=="string")T=uN(t,r,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case M:return t=Vs(31,r,i,f),t.elementType=M,t.lanes=p,t;case V:return Fr(r.children,f,p,i);case U:T=8,f|=24;break;case z:return t=Vs(12,r,i,f|2),t.elementType=z,t.lanes=p,t;case ye:return t=Vs(13,r,i,f),t.elementType=ye,t.lanes=p,t;case ge:return t=Vs(19,r,i,f),t.elementType=ge,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:T=10;break e;case G:T=9;break e;case oe:T=11;break e;case O:T=14;break e;case j:T=16,l=null;break e}T=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=Vs(T,r,i,f),i.elementType=t,i.type=l,i.lanes=p,i}function Fr(t,i,r,l){return t=Vs(7,t,l,i),t.lanes=r,t}function bf(t,i,r){return t=Vs(6,t,null,i),t.lanes=r,t}function j_(t){var i=Vs(18,null,null,0);return i.stateNode=t,i}function Sf(t,i,r){return i=Vs(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var D_=new WeakMap;function si(t,i){if(typeof t=="object"&&t!==null){var r=D_.get(t);return r!==void 0?r:(i={value:t,source:i,stack:ja(i)},D_.set(t,i),i)}return{value:t,source:i,stack:ja(i)}}var Uo=[],Vo=0,au=null,Hl=0,ii=[],ai=0,Fa=null,Mi=1,Ui="";function aa(t,i){Uo[Vo++]=Hl,Uo[Vo++]=au,au=t,Hl=i}function O_(t,i,r){ii[ai++]=Mi,ii[ai++]=Ui,ii[ai++]=Fa,Fa=t;var l=Mi;t=Ui;var f=32-Xt(l)-1;l&=~(1<<f),r+=1;var p=32-Xt(i)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,Mi=1<<32-Xt(i)+f|r<<f|l,Ui=p+t}else Mi=1<<p|r<<f|l,Ui=t}function Nf(t){t.return!==null&&(aa(t,1),O_(t,1,0))}function wf(t){for(;t===au;)au=Uo[--Vo],Uo[Vo]=null,Hl=Uo[--Vo],Uo[Vo]=null;for(;t===Fa;)Fa=ii[--ai],ii[ai]=null,Ui=ii[--ai],ii[ai]=null,Mi=ii[--ai],ii[ai]=null}function M_(t,i){ii[ai++]=Mi,ii[ai++]=Ui,ii[ai++]=Fa,Mi=i.id,Ui=i.overflow,Fa=t}var Bn=null,$t=null,Et=!1,za=null,ri=!1,xf=Error(a(519));function Ha(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(si(i,t)),xf}function U_(t){var i=t.stateNode,r=t.type,l=t.memoizedProps;switch(i[ft]=t,i[ln]=l,r){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(r=0;r<hc.length;r++)ut(hc[r],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":ut("invalid",i),kr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ut("invalid",i);break;case"textarea":ut("invalid",i),Js(i,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||l.suppressHydrationWarning===!0||eE(i.textContent,r)?(l.popover!=null&&(ut("beforetoggle",i),ut("toggle",i)),l.onScroll!=null&&ut("scroll",i),l.onScrollEnd!=null&&ut("scrollend",i),l.onClick!=null&&(i.onclick=qn),i=!0):i=!1,i||Ha(t,!0)}function V_(t){for(Bn=t.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:Bn=Bn.return}}function qo(t){if(t!==Bn)return!1;if(!Et)return V_(t),Et=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Hh(t.type,t.memoizedProps)),r=!r),r&&$t&&Ha(t),V_(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));$t=cE(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));$t=cE(t)}else i===27?(i=$t,ir(t.type)?(t=Qh,Qh=null,$t=t):$t=i):$t=Bn?li(t.stateNode.nextSibling):null;return!0}function zr(){$t=Bn=null,Et=!1}function Af(){var t=za;return t!==null&&(ws===null?ws=t:ws.push.apply(ws,t),za=null),t}function Gl(t){za===null?za=[t]:za.push(t)}var Rf=H(null),Hr=null,ra=null;function Ga(t,i,r){ae(Rf,i._currentValue),i._currentValue=r}function oa(t){t._currentValue=Rf.current,de(Rf)}function Cf(t,i,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===r)break;t=t.return}}function If(t,i,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var P=0;P<i.length;P++)if(A.context===i[P]){p.lanes|=r,A=p.alternate,A!==null&&(A.lanes|=r),Cf(p.return,r,t),l||(T=null);break e}p=A.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(a(341));T.lanes|=r,p=T.alternate,p!==null&&(p.lanes|=r),Cf(T,r,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Bo(t,i,r,l){t=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var A=f.type;Us(f.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(f===Pe.current){if(T=f.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(yc):t=[yc])}f=f.return}t!==null&&If(i,t,r,l),i.flags|=262144}function ru(t){for(t=t.firstContext;t!==null;){if(!Us(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gr(t){Hr=t,ra=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pn(t){return q_(Hr,t)}function ou(t,i){return Hr===null&&Gr(t),q_(t,i)}function q_(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},ra===null){if(t===null)throw Error(a(308));ra=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ra=ra.next=i;return r}var rS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},oS=n.unstable_scheduleCallback,lS=n.unstable_NormalPriority,_n={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kf(){return{controller:new rS,data:new Map,refCount:0}}function Xl(t){t.refCount--,t.refCount===0&&oS(lS,function(){t.controller.abort()})}var $l=null,Lf=0,Po=0,Fo=null;function cS(t,i){if($l===null){var r=$l=[];Lf=0,Po=Oh(),Fo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Lf++,i.then(B_,B_),i}function B_(){if(--Lf===0&&$l!==null){Fo!==null&&(Fo.status="fulfilled");var t=$l;$l=null,Po=0,Fo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function uS(t,i){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var P_=se.S;se.S=function(t,i){Ny=On(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&cS(t,i),P_!==null&&P_(t,i)};var Xr=H(null);function jf(){var t=Xr.current;return t!==null?t:Pt.pooledCache}function lu(t,i){i===null?ae(Xr,Xr.current):ae(Xr,i.pool)}function F_(){var t=jf();return t===null?null:{parent:_n._currentValue,pool:t}}var zo=Error(a(460)),Df=Error(a(474)),cu=Error(a(542)),uu={then:function(){}};function z_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function H_(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(qn,qn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,X_(t),t;default:if(typeof i.status=="string")i.then(qn,qn);else{if(t=Pt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,X_(t),t}throw Yr=i,zo}}function $r(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Yr=r,zo):r}}var Yr=null;function G_(){if(Yr===null)throw Error(a(459));var t=Yr;return Yr=null,t}function X_(t){if(t===zo||t===cu)throw Error(a(483))}var Ho=null,Yl=0;function du(t){var i=Yl;return Yl+=1,Ho===null&&(Ho=[]),H_(Ho,t,i)}function Ql(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function fu(t,i){throw i.$$typeof===x?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function $_(t){function i(Y,$){if(t){var Z=Y.deletions;Z===null?(Y.deletions=[$],Y.flags|=16):Z.push($)}}function r(Y,$){if(!t)return null;for(;$!==null;)i(Y,$),$=$.sibling;return null}function l(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function f(Y,$){return Y=ia(Y,$),Y.index=0,Y.sibling=null,Y}function p(Y,$,Z){return Y.index=Z,t?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<$?(Y.flags|=67108866,$):Z):(Y.flags|=67108866,$)):(Y.flags|=1048576,$)}function T(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function A(Y,$,Z,fe){return $===null||$.tag!==6?($=bf(Z,Y.mode,fe),$.return=Y,$):($=f($,Z),$.return=Y,$)}function P(Y,$,Z,fe){var ze=Z.type;return ze===V?ue(Y,$,Z.props.children,fe,Z.key):$!==null&&($.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===j&&$r(ze)===$.type)?($=f($,Z.props),Ql($,Z),$.return=Y,$):($=iu(Z.type,Z.key,Z.props,null,Y.mode,fe),Ql($,Z),$.return=Y,$)}function ee(Y,$,Z,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=Sf(Z,Y.mode,fe),$.return=Y,$):($=f($,Z.children||[]),$.return=Y,$)}function ue(Y,$,Z,fe,ze){return $===null||$.tag!==7?($=Fr(Z,Y.mode,fe,ze),$.return=Y,$):($=f($,Z),$.return=Y,$)}function me(Y,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=bf(""+$,Y.mode,Z),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case B:return Z=iu($.type,$.key,$.props,null,Y.mode,Z),Ql(Z,$),Z.return=Y,Z;case X:return $=Sf($,Y.mode,Z),$.return=Y,$;case j:return $=$r($),me(Y,$,Z)}if(Je($)||D($))return $=Fr($,Y.mode,Z,null),$.return=Y,$;if(typeof $.then=="function")return me(Y,du($),Z);if($.$$typeof===K)return me(Y,ou(Y,$),Z);fu(Y,$)}return null}function ne(Y,$,Z,fe){var ze=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ze!==null?null:A(Y,$,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:return Z.key===ze?P(Y,$,Z,fe):null;case X:return Z.key===ze?ee(Y,$,Z,fe):null;case j:return Z=$r(Z),ne(Y,$,Z,fe)}if(Je(Z)||D(Z))return ze!==null?null:ue(Y,$,Z,fe,null);if(typeof Z.then=="function")return ne(Y,$,du(Z),fe);if(Z.$$typeof===K)return ne(Y,$,ou(Y,Z),fe);fu(Y,Z)}return null}function le(Y,$,Z,fe,ze){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(Z)||null,A($,Y,""+fe,ze);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return Y=Y.get(fe.key===null?Z:fe.key)||null,P($,Y,fe,ze);case X:return Y=Y.get(fe.key===null?Z:fe.key)||null,ee($,Y,fe,ze);case j:return fe=$r(fe),le(Y,$,Z,fe,ze)}if(Je(fe)||D(fe))return Y=Y.get(Z)||null,ue($,Y,fe,ze,null);if(typeof fe.then=="function")return le(Y,$,Z,du(fe),ze);if(fe.$$typeof===K)return le(Y,$,Z,ou($,fe),ze);fu($,fe)}return null}function De(Y,$,Z,fe){for(var ze=null,xt=null,Ue=$,lt=$=0,pt=null;Ue!==null&&lt<Z.length;lt++){Ue.index>lt?(pt=Ue,Ue=null):pt=Ue.sibling;var At=ne(Y,Ue,Z[lt],fe);if(At===null){Ue===null&&(Ue=pt);break}t&&Ue&&At.alternate===null&&i(Y,Ue),$=p(At,$,lt),xt===null?ze=At:xt.sibling=At,xt=At,Ue=pt}if(lt===Z.length)return r(Y,Ue),Et&&aa(Y,lt),ze;if(Ue===null){for(;lt<Z.length;lt++)Ue=me(Y,Z[lt],fe),Ue!==null&&($=p(Ue,$,lt),xt===null?ze=Ue:xt.sibling=Ue,xt=Ue);return Et&&aa(Y,lt),ze}for(Ue=l(Ue);lt<Z.length;lt++)pt=le(Ue,Y,lt,Z[lt],fe),pt!==null&&(t&&pt.alternate!==null&&Ue.delete(pt.key===null?lt:pt.key),$=p(pt,$,lt),xt===null?ze=pt:xt.sibling=pt,xt=pt);return t&&Ue.forEach(function(cr){return i(Y,cr)}),Et&&aa(Y,lt),ze}function $e(Y,$,Z,fe){if(Z==null)throw Error(a(151));for(var ze=null,xt=null,Ue=$,lt=$=0,pt=null,At=Z.next();Ue!==null&&!At.done;lt++,At=Z.next()){Ue.index>lt?(pt=Ue,Ue=null):pt=Ue.sibling;var cr=ne(Y,Ue,At.value,fe);if(cr===null){Ue===null&&(Ue=pt);break}t&&Ue&&cr.alternate===null&&i(Y,Ue),$=p(cr,$,lt),xt===null?ze=cr:xt.sibling=cr,xt=cr,Ue=pt}if(At.done)return r(Y,Ue),Et&&aa(Y,lt),ze;if(Ue===null){for(;!At.done;lt++,At=Z.next())At=me(Y,At.value,fe),At!==null&&($=p(At,$,lt),xt===null?ze=At:xt.sibling=At,xt=At);return Et&&aa(Y,lt),ze}for(Ue=l(Ue);!At.done;lt++,At=Z.next())At=le(Ue,Y,lt,At.value,fe),At!==null&&(t&&At.alternate!==null&&Ue.delete(At.key===null?lt:At.key),$=p(At,$,lt),xt===null?ze=At:xt.sibling=At,xt=At);return t&&Ue.forEach(function(TN){return i(Y,TN)}),Et&&aa(Y,lt),ze}function Vt(Y,$,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===V&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:e:{for(var ze=Z.key;$!==null;){if($.key===ze){if(ze=Z.type,ze===V){if($.tag===7){r(Y,$.sibling),fe=f($,Z.props.children),fe.return=Y,Y=fe;break e}}else if($.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===j&&$r(ze)===$.type){r(Y,$.sibling),fe=f($,Z.props),Ql(fe,Z),fe.return=Y,Y=fe;break e}r(Y,$);break}else i(Y,$);$=$.sibling}Z.type===V?(fe=Fr(Z.props.children,Y.mode,fe,Z.key),fe.return=Y,Y=fe):(fe=iu(Z.type,Z.key,Z.props,null,Y.mode,fe),Ql(fe,Z),fe.return=Y,Y=fe)}return T(Y);case X:e:{for(ze=Z.key;$!==null;){if($.key===ze)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){r(Y,$.sibling),fe=f($,Z.children||[]),fe.return=Y,Y=fe;break e}else{r(Y,$);break}else i(Y,$);$=$.sibling}fe=Sf(Z,Y.mode,fe),fe.return=Y,Y=fe}return T(Y);case j:return Z=$r(Z),Vt(Y,$,Z,fe)}if(Je(Z))return De(Y,$,Z,fe);if(D(Z)){if(ze=D(Z),typeof ze!="function")throw Error(a(150));return Z=ze.call(Z),$e(Y,$,Z,fe)}if(typeof Z.then=="function")return Vt(Y,$,du(Z),fe);if(Z.$$typeof===K)return Vt(Y,$,ou(Y,Z),fe);fu(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(r(Y,$.sibling),fe=f($,Z),fe.return=Y,Y=fe):(r(Y,$),fe=bf(Z,Y.mode,fe),fe.return=Y,Y=fe),T(Y)):r(Y,$)}return function(Y,$,Z,fe){try{Yl=0;var ze=Vt(Y,$,Z,fe);return Ho=null,ze}catch(Ue){if(Ue===zo||Ue===cu)throw Ue;var xt=Vs(29,Ue,null,Y.mode);return xt.lanes=fe,xt.return=Y,xt}}}var Qr=$_(!0),Y_=$_(!1),Xa=!1;function Of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $a(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ya(t,i,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Rt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=su(t),k_(t,null,r),i}return nu(t,l,i,r),su(t)}function Kl(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,Da(t,r)}}function Uf(t,i){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Vf=!1;function Wl(){if(Vf){var t=Fo;if(t!==null)throw t}}function Jl(t,i,r,l){Vf=!1;var f=t.updateQueue;Xa=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var P=A,ee=P.next;P.next=null,T===null?p=ee:T.next=ee,T=P;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,A=ue.lastBaseUpdate,A!==T&&(A===null?ue.firstBaseUpdate=ee:A.next=ee,ue.lastBaseUpdate=P))}if(p!==null){var me=f.baseState;T=0,ue=ee=P=null,A=p;do{var ne=A.lane&-536870913,le=ne!==A.lane;if(le?(mt&ne)===ne:(l&ne)===ne){ne!==0&&ne===Po&&(Vf=!0),ue!==null&&(ue=ue.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var De=t,$e=A;ne=i;var Vt=r;switch($e.tag){case 1:if(De=$e.payload,typeof De=="function"){me=De.call(Vt,me,ne);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=$e.payload,ne=typeof De=="function"?De.call(Vt,me,ne):De,ne==null)break e;me=w({},me,ne);break e;case 2:Xa=!0}}ne=A.callback,ne!==null&&(t.flags|=64,le&&(t.flags|=8192),le=f.callbacks,le===null?f.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ue===null?(ee=ue=le,P=me):ue=ue.next=le,T|=ne;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;le=A,A=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);ue===null&&(P=me),f.baseState=P,f.firstBaseUpdate=ee,f.lastBaseUpdate=ue,p===null&&(f.shared.lanes=0),Za|=T,t.lanes=T,t.memoizedState=me}}function Q_(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function K_(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Q_(r[t],i)}var Go=H(null),hu=H(0);function W_(t,i){t=_a,ae(hu,t),ae(Go,i),_a=t|i.baseLanes}function qf(){ae(hu,_a),ae(Go,Go.current)}function Bf(){_a=hu.current,de(Go),de(hu)}var qs=H(null),oi=null;function Qa(t){var i=t.alternate;ae(un,un.current&1),ae(qs,t),oi===null&&(i===null||Go.current!==null||i.memoizedState!==null)&&(oi=t)}function Pf(t){ae(un,un.current),ae(qs,t),oi===null&&(oi=t)}function J_(t){t.tag===22?(ae(un,un.current),ae(qs,t),oi===null&&(oi=t)):Ka()}function Ka(){ae(un,un.current),ae(qs,qs.current)}function Bs(t){de(qs),oi===t&&(oi=null),de(un)}var un=H(0);function mu(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||$h(r)||Yh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var la=0,ot=null,Mt=null,gn=null,pu=!1,Xo=!1,Kr=!1,_u=0,Zl=0,$o=null,dS=0;function an(){throw Error(a(321))}function Ff(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Us(t[r],i[r]))return!1;return!0}function zf(t,i,r,l,f,p){return la=p,ot=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,se.H=t===null||t.memoizedState===null?Og:ih,Kr=!1,p=r(l,f),Kr=!1,Xo&&(p=eg(i,r,l,f)),Z_(t),p}function Z_(t){se.H=nc;var i=Mt!==null&&Mt.next!==null;if(la=0,gn=Mt=ot=null,pu=!1,Zl=0,$o=null,i)throw Error(a(300));t===null||yn||(t=t.dependencies,t!==null&&ru(t)&&(yn=!0))}function eg(t,i,r,l){ot=t;var f=0;do{if(Xo&&($o=null),Zl=0,Xo=!1,25<=f)throw Error(a(301));if(f+=1,gn=Mt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}se.H=Mg,p=i(r,l)}while(Xo);return p}function fS(){var t=se.H,i=t.useState()[0];return i=typeof i.then=="function"?ec(i):i,t=t.useState()[0],(Mt!==null?Mt.memoizedState:null)!==t&&(ot.flags|=1024),i}function Hf(){var t=_u!==0;return _u=0,t}function Gf(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function Xf(t){if(pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}pu=!1}la=0,gn=Mt=ot=null,Xo=!1,Zl=_u=0,$o=null}function hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ot.memoizedState=gn=t:gn=gn.next=t,gn}function dn(){if(Mt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var i=gn===null?ot.memoizedState:gn.next;if(i!==null)gn=i,Mt=t;else{if(t===null)throw ot.alternate===null?Error(a(467)):Error(a(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},gn===null?ot.memoizedState=gn=t:gn=gn.next=t}return gn}function gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(t){var i=Zl;return Zl+=1,$o===null&&($o=[]),t=H_($o,t,i),i=ot,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,se.H=i===null||i.memoizedState===null?Og:ih),t}function yu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ec(t);if(t.$$typeof===K)return Pn(t)}throw Error(a(438,String(t)))}function $f(t){var i=null,r=ot.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var l=ot.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=gu(),ot.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),l=0;l<t;l++)r[l]=q;return i.index++,r}function ca(t,i){return typeof i=="function"?i(t):i}function Eu(t){var i=dn();return Yf(i,Mt,t)}function Yf(t,i,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{i=f.next;var A=T=null,P=null,ee=i,ue=!1;do{var me=ee.lane&-536870913;if(me!==ee.lane?(mt&me)===me:(la&me)===me){var ne=ee.revertLane;if(ne===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),me===Po&&(ue=!0);else if((la&ne)===ne){ee=ee.next,ne===Po&&(ue=!0);continue}else me={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},P===null?(A=P=me,T=p):P=P.next=me,ot.lanes|=ne,Za|=ne;me=ee.action,Kr&&r(p,me),p=ee.hasEagerState?ee.eagerState:r(p,me)}else ne={lane:me,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},P===null?(A=P=ne,T=p):P=P.next=ne,ot.lanes|=me,Za|=me;ee=ee.next}while(ee!==null&&ee!==i);if(P===null?T=p:P.next=A,!Us(p,t.memoizedState)&&(yn=!0,ue&&(r=Fo,r!==null)))throw r;t.memoizedState=p,t.baseState=T,t.baseQueue=P,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Qf(t){var i=dn(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var T=f=f.next;do p=t(p,T.action),T=T.next;while(T!==f);Us(p,i.memoizedState)||(yn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,l]}function tg(t,i,r){var l=ot,f=dn(),p=Et;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var T=!Us((Mt||f).memoizedState,r);if(T&&(f.memoizedState=r,yn=!0),f=f.queue,Jf(ig.bind(null,l,f,t),[t]),f.getSnapshot!==i||T||gn!==null&&gn.memoizedState.tag&1){if(l.flags|=2048,Yo(9,{destroy:void 0},sg.bind(null,l,f,r,i),null),Pt===null)throw Error(a(349));p||(la&127)!==0||ng(l,i,r)}return r}function ng(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=ot.updateQueue,i===null?(i=gu(),ot.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function sg(t,i,r,l){i.value=r,i.getSnapshot=l,ag(i)&&rg(t)}function ig(t,i,r){return r(function(){ag(i)&&rg(t)})}function ag(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Us(t,r)}catch{return!0}}function rg(t){var i=Pr(t,2);i!==null&&xs(i,t,2)}function Kf(t){var i=hs();if(typeof t=="function"){var r=t;if(t=r(),Kr){as(!0);try{r()}finally{as(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},i}function og(t,i,r,l){return t.baseState=r,Yf(t,Mt,typeof l=="function"?l:ca)}function hS(t,i,r,l,f){if(bu(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};se.T!==null?r(!0):p.isTransition=!1,l(p),r=i.pending,r===null?(p.next=i.pending=p,lg(i,p)):(p.next=r.next,i.pending=r.next=p)}}function lg(t,i){var r=i.action,l=i.payload,f=t.state;if(i.isTransition){var p=se.T,T={};se.T=T;try{var A=r(f,l),P=se.S;P!==null&&P(T,A),cg(t,i,A)}catch(ee){Wf(t,i,ee)}finally{p!==null&&T.types!==null&&(p.types=T.types),se.T=p}}else try{p=r(f,l),cg(t,i,p)}catch(ee){Wf(t,i,ee)}}function cg(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){ug(t,i,l)},function(l){return Wf(t,i,l)}):ug(t,i,r)}function ug(t,i,r){i.status="fulfilled",i.value=r,dg(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,lg(t,r)))}function Wf(t,i,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=r,dg(i),i=i.next;while(i!==l)}t.action=null}function dg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function fg(t,i){return i}function hg(t,i){if(Et){var r=Pt.formState;if(r!==null){e:{var l=ot;if(Et){if($t){t:{for(var f=$t,p=ri;f.nodeType!==8;){if(!p){f=null;break t}if(f=li(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){$t=li(f.nextSibling),l=f.data==="F!";break e}}Ha(l)}l=!1}l&&(i=r[0])}}return r=hs(),r.memoizedState=r.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:i},r.queue=l,r=Lg.bind(null,ot,l),l.dispatch=r,l=Kf(!1),p=sh.bind(null,ot,!1,l.queue),l=hs(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,r=hS.bind(null,ot,f,p,r),f.dispatch=r,l.memoizedState=t,[i,r,!1]}function mg(t){var i=dn();return pg(i,Mt,t)}function pg(t,i,r){if(i=Yf(t,i,fg)[0],t=Eu(ca)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ec(i)}catch(T){throw T===zo?cu:T}else l=i;i=dn();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&(ot.flags|=2048,Yo(9,{destroy:void 0},mS.bind(null,f,r),null)),[l,p,t]}function mS(t,i){t.action=i}function _g(t){var i=dn(),r=Mt;if(r!==null)return pg(i,r,t);dn(),i=i.memoizedState,r=dn();var l=r.queue.dispatch;return r.memoizedState=t,[i,l,!1]}function Yo(t,i,r,l){return t={tag:t,create:r,deps:l,inst:i,next:null},i=ot.updateQueue,i===null&&(i=gu(),ot.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,i.lastEffect=t),t}function gg(){return dn().memoizedState}function vu(t,i,r,l){var f=hs();ot.flags|=t,f.memoizedState=Yo(1|i,{destroy:void 0},r,l===void 0?null:l)}function Tu(t,i,r,l){var f=dn();l=l===void 0?null:l;var p=f.memoizedState.inst;Mt!==null&&l!==null&&Ff(l,Mt.memoizedState.deps)?f.memoizedState=Yo(i,p,r,l):(ot.flags|=t,f.memoizedState=Yo(1|i,p,r,l))}function yg(t,i){vu(8390656,8,t,i)}function Jf(t,i){Tu(2048,8,t,i)}function pS(t){ot.flags|=4;var i=ot.updateQueue;if(i===null)i=gu(),ot.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function Eg(t){var i=dn().memoizedState;return pS({ref:i,nextImpl:t}),function(){if((Rt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function vg(t,i){return Tu(4,2,t,i)}function Tg(t,i){return Tu(4,4,t,i)}function bg(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Sg(t,i,r){r=r!=null?r.concat([t]):null,Tu(4,4,bg.bind(null,i,t),r)}function Zf(){}function Ng(t,i){var r=dn();i=i===void 0?null:i;var l=r.memoizedState;return i!==null&&Ff(i,l[1])?l[0]:(r.memoizedState=[t,i],t)}function wg(t,i){var r=dn();i=i===void 0?null:i;var l=r.memoizedState;if(i!==null&&Ff(i,l[1]))return l[0];if(l=t(),Kr){as(!0);try{t()}finally{as(!1)}}return r.memoizedState=[l,i],l}function eh(t,i,r){return r===void 0||(la&1073741824)!==0&&(mt&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=xy(),ot.lanes|=t,Za|=t,r)}function xg(t,i,r,l){return Us(r,i)?r:Go.current!==null?(t=eh(t,r,l),Us(t,i)||(yn=!0),t):(la&42)===0||(la&1073741824)!==0&&(mt&261930)===0?(yn=!0,t.memoizedState=r):(t=xy(),ot.lanes|=t,Za|=t,i)}function Ag(t,i,r,l,f){var p=Te.p;Te.p=p!==0&&8>p?p:8;var T=se.T,A={};se.T=A,sh(t,!1,i,r);try{var P=f(),ee=se.S;if(ee!==null&&ee(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ue=uS(P,l);tc(t,i,ue,zs(t))}else tc(t,i,l,zs(t))}catch(me){tc(t,i,{then:function(){},status:"rejected",reason:me},zs())}finally{Te.p=p,T!==null&&A.types!==null&&(T.types=A.types),se.T=T}}function _S(){}function th(t,i,r,l){if(t.tag!==5)throw Error(a(476));var f=Rg(t).queue;Ag(t,f,i,Re,r===null?_S:function(){return Cg(t),r(l)})}function Rg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:Re},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Cg(t){var i=Rg(t);i.next===null&&(i=t.alternate.memoizedState),tc(t,i.next.queue,{},zs())}function nh(){return Pn(yc)}function Ig(){return dn().memoizedState}function kg(){return dn().memoizedState}function gS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=zs();t=$a(r);var l=Ya(i,t,r);l!==null&&(xs(l,i,r),Kl(l,i,r)),i={cache:kf()},t.payload=i;return}i=i.return}}function yS(t,i,r){var l=zs();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},bu(t)?jg(i,r):(r=vf(t,i,r,l),r!==null&&(xs(r,t,l),Dg(r,i,l)))}function Lg(t,i,r){var l=zs();tc(t,i,r,l)}function tc(t,i,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(bu(t))jg(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,A=p(T,r);if(f.hasEagerState=!0,f.eagerState=A,Us(A,T))return nu(t,i,f,0),Pt===null&&tu(),!1}catch{}if(r=vf(t,i,f,l),r!==null)return xs(r,t,l),Dg(r,i,l),!0}return!1}function sh(t,i,r,l){if(l={lane:2,revertLane:Oh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(i)throw Error(a(479))}else i=vf(t,r,l,2),i!==null&&xs(i,t,2)}function bu(t){var i=t.alternate;return t===ot||i!==null&&i===ot}function jg(t,i){Xo=pu=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function Dg(t,i,r){if((r&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,Da(t,r)}}var nc={readContext:Pn,use:yu,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};nc.useEffectEvent=an;var Og={readContext:Pn,use:yu,useCallback:function(t,i){return hs().memoizedState=[t,i===void 0?null:i],t},useContext:Pn,useEffect:yg,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,vu(4194308,4,bg.bind(null,i,t),r)},useLayoutEffect:function(t,i){return vu(4194308,4,t,i)},useInsertionEffect:function(t,i){vu(4,2,t,i)},useMemo:function(t,i){var r=hs();i=i===void 0?null:i;var l=t();if(Kr){as(!0);try{t()}finally{as(!1)}}return r.memoizedState=[l,i],l},useReducer:function(t,i,r){var l=hs();if(r!==void 0){var f=r(i);if(Kr){as(!0);try{r(i)}finally{as(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=yS.bind(null,ot,t),[l.memoizedState,t]},useRef:function(t){var i=hs();return t={current:t},i.memoizedState=t},useState:function(t){t=Kf(t);var i=t.queue,r=Lg.bind(null,ot,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:Zf,useDeferredValue:function(t,i){var r=hs();return eh(r,t,i)},useTransition:function(){var t=Kf(!1);return t=Ag.bind(null,ot,t.queue,!0,!1),hs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var l=ot,f=hs();if(Et){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),Pt===null)throw Error(a(349));(mt&127)!==0||ng(l,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,yg(ig.bind(null,l,p,t),[t]),l.flags|=2048,Yo(9,{destroy:void 0},sg.bind(null,l,p,r,i),null),r},useId:function(){var t=hs(),i=Pt.identifierPrefix;if(Et){var r=Ui,l=Mi;r=(l&~(1<<32-Xt(l)-1)).toString(32)+r,i="_"+i+"R_"+r,r=_u++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=dS++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:nh,useFormState:hg,useActionState:hg,useOptimistic:function(t){var i=hs();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=sh.bind(null,ot,!0,r),r.dispatch=i,[t,i]},useMemoCache:$f,useCacheRefresh:function(){return hs().memoizedState=gS.bind(null,ot)},useEffectEvent:function(t){var i=hs(),r={impl:t};return i.memoizedState=r,function(){if((Rt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},ih={readContext:Pn,use:yu,useCallback:Ng,useContext:Pn,useEffect:Jf,useImperativeHandle:Sg,useInsertionEffect:vg,useLayoutEffect:Tg,useMemo:wg,useReducer:Eu,useRef:gg,useState:function(){return Eu(ca)},useDebugValue:Zf,useDeferredValue:function(t,i){var r=dn();return xg(r,Mt.memoizedState,t,i)},useTransition:function(){var t=Eu(ca)[0],i=dn().memoizedState;return[typeof t=="boolean"?t:ec(t),i]},useSyncExternalStore:tg,useId:Ig,useHostTransitionStatus:nh,useFormState:mg,useActionState:mg,useOptimistic:function(t,i){var r=dn();return og(r,Mt,t,i)},useMemoCache:$f,useCacheRefresh:kg};ih.useEffectEvent=Eg;var Mg={readContext:Pn,use:yu,useCallback:Ng,useContext:Pn,useEffect:Jf,useImperativeHandle:Sg,useInsertionEffect:vg,useLayoutEffect:Tg,useMemo:wg,useReducer:Qf,useRef:gg,useState:function(){return Qf(ca)},useDebugValue:Zf,useDeferredValue:function(t,i){var r=dn();return Mt===null?eh(r,t,i):xg(r,Mt.memoizedState,t,i)},useTransition:function(){var t=Qf(ca)[0],i=dn().memoizedState;return[typeof t=="boolean"?t:ec(t),i]},useSyncExternalStore:tg,useId:Ig,useHostTransitionStatus:nh,useFormState:_g,useActionState:_g,useOptimistic:function(t,i){var r=dn();return Mt!==null?og(r,Mt,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:$f,useCacheRefresh:kg};Mg.useEffectEvent=Eg;function ah(t,i,r,l){i=t.memoizedState,r=r(l,i),r=r==null?i:w({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var rh={enqueueSetState:function(t,i,r){t=t._reactInternals;var l=zs(),f=$a(l);f.payload=i,r!=null&&(f.callback=r),i=Ya(t,f,l),i!==null&&(xs(i,t,l),Kl(i,t,l))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var l=zs(),f=$a(l);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=Ya(t,f,l),i!==null&&(xs(i,t,l),Kl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=zs(),l=$a(r);l.tag=2,i!=null&&(l.callback=i),i=Ya(t,l,r),i!==null&&(xs(i,t,r),Kl(i,t,r))}};function Ug(t,i,r,l,f,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,T):i.prototype&&i.prototype.isPureReactComponent?!Fl(r,l)||!Fl(f,p):!0}function Vg(t,i,r,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,l),i.state!==t&&rh.enqueueReplaceState(i,i.state,null)}function Wr(t,i){var r=i;if("ref"in i){r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}if(t=t.defaultProps){r===i&&(r=w({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function qg(t){eu(t)}function Bg(t){console.error(t)}function Pg(t){eu(t)}function Su(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Fg(t,i,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function oh(t,i,r){return r=$a(r),r.tag=3,r.payload={element:null},r.callback=function(){Su(t,i)},r}function zg(t){return t=$a(t),t.tag=3,t}function Hg(t,i,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Fg(i,r,l)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Fg(i,r,l),typeof f!="function"&&(er===null?er=new Set([this]):er.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function ES(t,i,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=r.alternate,i!==null&&Bo(i,r,f,!0),r=qs.current,r!==null){switch(r.tag){case 31:case 13:return oi===null?Ou():r.alternate===null&&rn===0&&(rn=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===uu?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([l]):i.add(l),Lh(t,l,f)),!1;case 22:return r.flags|=65536,l===uu?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([l]):r.add(l)),Lh(t,l,f)),!1}throw Error(a(435,r.tag))}return Lh(t,l,f),Ou(),!1}if(Et)return i=qs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==xf&&(t=Error(a(422),{cause:l}),Gl(si(t,r)))):(l!==xf&&(i=Error(a(423),{cause:l}),Gl(si(i,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=si(l,r),f=oh(t.stateNode,l,f),Uf(t,f),rn!==4&&(rn=2)),!1;var p=Error(a(520),{cause:l});if(p=si(p,r),uc===null?uc=[p]:uc.push(p),rn!==4&&(rn=2),i===null)return!0;l=si(l,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=oh(r.stateNode,l,t),Uf(r,t),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(er===null||!er.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=zg(f),Hg(f,t,r,l),Uf(r,f),!1}r=r.return}while(r!==null);return!1}var lh=Error(a(461)),yn=!1;function Fn(t,i,r,l){i.child=t===null?Y_(i,null,r,l):Qr(i,t.child,r,l)}function Gg(t,i,r,l,f){r=r.render;var p=i.ref;if("ref"in l){var T={};for(var A in l)A!=="ref"&&(T[A]=l[A])}else T=l;return Gr(i),l=zf(t,i,r,T,p,f),A=Hf(),t!==null&&!yn?(Gf(t,i,f),ua(t,i,f)):(Et&&A&&Nf(i),i.flags|=1,Fn(t,i,l,f),i.child)}function Xg(t,i,r,l,f){if(t===null){var p=r.type;return typeof p=="function"&&!Tf(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,$g(t,i,p,l,f)):(t=iu(r.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!_h(t,f)){var T=p.memoizedProps;if(r=r.compare,r=r!==null?r:Fl,r(T,l)&&t.ref===i.ref)return ua(t,i,f)}return i.flags|=1,t=ia(p,l),t.ref=i.ref,t.return=i,i.child=t}function $g(t,i,r,l,f){if(t!==null){var p=t.memoizedProps;if(Fl(p,l)&&t.ref===i.ref)if(yn=!1,i.pendingProps=l=p,_h(t,f))(t.flags&131072)!==0&&(yn=!0);else return i.lanes=t.lanes,ua(t,i,f)}return ch(t,i,r,l,f)}function Yg(t,i,r,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,i.child=null;return Qg(t,i,p,r,l)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lu(i,p!==null?p.cachePool:null),p!==null?W_(i,p):qf(),J_(i);else return l=i.lanes=536870912,Qg(t,i,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(lu(i,p.cachePool),W_(i,p),Ka(),i.memoizedState=null):(t!==null&&lu(i,null),qf(),Ka());return Fn(t,i,f,r),i.child}function sc(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Qg(t,i,r,l,f){var p=jf();return p=p===null?null:{parent:_n._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},t!==null&&lu(i,null),qf(),J_(i),t!==null&&Bo(t,i,l,!0),i.childLanes=f,null}function Nu(t,i){return i=xu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Kg(t,i,r){return Qr(i,t.child,null,r),t=Nu(i,i.pendingProps),t.flags|=2,Bs(i),i.memoizedState=null,t}function vS(t,i,r){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Et){if(l.mode==="hidden")return t=Nu(i,l),i.lanes=536870912,sc(null,t);if(Pf(i),(t=$t)?(t=lE(t,ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:Mi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},r=j_(t),r.return=i,i.child=r,Bn=i,$t=null)):t=null,t===null)throw Ha(i);return i.lanes=536870912,null}return Nu(i,l)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(Pf(i),f)if(i.flags&256)i.flags&=-257,i=Kg(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(yn||Bo(t,i,r,!1),f=(r&t.childLanes)!==0,yn||f){if(l=Pt,l!==null&&(T=mn(l,r),T!==0&&T!==p.retryLane))throw p.retryLane=T,Pr(t,T),xs(l,t,T),lh;Ou(),i=Kg(t,i,r)}else t=p.treeContext,$t=li(T.nextSibling),Bn=i,Et=!0,za=null,ri=!1,t!==null&&M_(i,t),i=Nu(i,l),i.flags|=4096;return i}return t=ia(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function wu(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function ch(t,i,r,l,f){return Gr(i),r=zf(t,i,r,l,void 0,f),l=Hf(),t!==null&&!yn?(Gf(t,i,f),ua(t,i,f)):(Et&&l&&Nf(i),i.flags|=1,Fn(t,i,r,f),i.child)}function Wg(t,i,r,l,f,p){return Gr(i),i.updateQueue=null,r=eg(i,l,r,f),Z_(t),l=Hf(),t!==null&&!yn?(Gf(t,i,p),ua(t,i,p)):(Et&&l&&Nf(i),i.flags|=1,Fn(t,i,r,p),i.child)}function Jg(t,i,r,l,f){if(Gr(i),i.stateNode===null){var p=Mo,T=r.contextType;typeof T=="object"&&T!==null&&(p=Pn(T)),p=new r(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=rh,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Of(i),T=r.contextType,p.context=typeof T=="object"&&T!==null?Pn(T):Mo,p.state=i.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(ah(i,r,T,l),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&rh.enqueueReplaceState(p,p.state,null),Jl(i,l,p,f),Wl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){p=i.stateNode;var A=i.memoizedProps,P=Wr(r,A);p.props=P;var ee=p.context,ue=r.contextType;T=Mo,typeof ue=="object"&&ue!==null&&(T=Pn(ue));var me=r.getDerivedStateFromProps;ue=typeof me=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ue||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||ee!==T)&&Vg(i,p,l,T),Xa=!1;var ne=i.memoizedState;p.state=ne,Jl(i,l,p,f),Wl(),ee=i.memoizedState,A||ne!==ee||Xa?(typeof me=="function"&&(ah(i,r,me,l),ee=i.memoizedState),(P=Xa||Ug(i,r,P,l,ne,ee,T))?(ue||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=ee),p.props=l,p.state=ee,p.context=T,l=P):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Mf(t,i),T=i.memoizedProps,ue=Wr(r,T),p.props=ue,me=i.pendingProps,ne=p.context,ee=r.contextType,P=Mo,typeof ee=="object"&&ee!==null&&(P=Pn(ee)),A=r.getDerivedStateFromProps,(ee=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==me||ne!==P)&&Vg(i,p,l,P),Xa=!1,ne=i.memoizedState,p.state=ne,Jl(i,l,p,f),Wl();var le=i.memoizedState;T!==me||ne!==le||Xa||t!==null&&t.dependencies!==null&&ru(t.dependencies)?(typeof A=="function"&&(ah(i,r,A,l),le=i.memoizedState),(ue=Xa||Ug(i,r,ue,l,ne,le,P)||t!==null&&t.dependencies!==null&&ru(t.dependencies))?(ee||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,le,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,le,P)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=le),p.props=l,p.state=le,p.context=P,l=ue):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=1024),l=!1)}return p=l,wu(t,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&l?(i.child=Qr(i,t.child,null,f),i.child=Qr(i,null,r,f)):Fn(t,i,r,f),i.memoizedState=p.state,t=i.child):t=ua(t,i,f),t}function Zg(t,i,r,l){return zr(),i.flags|=256,Fn(t,i,r,l),i.child}var uh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dh(t){return{baseLanes:t,cachePool:F_()}}function fh(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=Fs),t}function ey(t,i,r){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(un.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(Et){if(f?Qa(i):Ka(),(t=$t)?(t=lE(t,ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:Mi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},r=j_(t),r.return=i,i.child=r,Bn=i,$t=null)):t=null,t===null)throw Ha(i);return Yh(t)?i.lanes=32:i.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Ka(),f=i.mode,A=xu({mode:"hidden",children:A},f),l=Fr(l,f,r,null),A.return=i,l.return=i,A.sibling=l,i.child=A,l=i.child,l.memoizedState=dh(r),l.childLanes=fh(t,T,r),i.memoizedState=uh,sc(null,l)):(Qa(i),hh(i,A))}var P=t.memoizedState;if(P!==null&&(A=P.dehydrated,A!==null)){if(p)i.flags&256?(Qa(i),i.flags&=-257,i=mh(t,i,r)):i.memoizedState!==null?(Ka(),i.child=t.child,i.flags|=128,i=null):(Ka(),A=l.fallback,f=i.mode,l=xu({mode:"visible",children:l.children},f),A=Fr(A,f,r,null),A.flags|=2,l.return=i,A.return=i,l.sibling=A,i.child=l,Qr(i,t.child,null,r),l=i.child,l.memoizedState=dh(r),l.childLanes=fh(t,T,r),i.memoizedState=uh,i=sc(null,l));else if(Qa(i),Yh(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var ee=T.dgst;T=ee,l=Error(a(419)),l.stack="",l.digest=T,Gl({value:l,source:null,stack:null}),i=mh(t,i,r)}else if(yn||Bo(t,i,r,!1),T=(r&t.childLanes)!==0,yn||T){if(T=Pt,T!==null&&(l=mn(T,r),l!==0&&l!==P.retryLane))throw P.retryLane=l,Pr(t,l),xs(T,t,l),lh;$h(A)||Ou(),i=mh(t,i,r)}else $h(A)?(i.flags|=192,i.child=t.child,i=null):(t=P.treeContext,$t=li(A.nextSibling),Bn=i,Et=!0,za=null,ri=!1,t!==null&&M_(i,t),i=hh(i,l.children),i.flags|=4096);return i}return f?(Ka(),A=l.fallback,f=i.mode,P=t.child,ee=P.sibling,l=ia(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,ee!==null?A=ia(ee,A):(A=Fr(A,f,r,null),A.flags|=2),A.return=i,l.return=i,l.sibling=A,i.child=l,sc(null,l),l=i.child,A=t.child.memoizedState,A===null?A=dh(r):(f=A.cachePool,f!==null?(P=_n._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=F_(),A={baseLanes:A.baseLanes|r,cachePool:f}),l.memoizedState=A,l.childLanes=fh(t,T,r),i.memoizedState=uh,sc(t.child,l)):(Qa(i),r=t.child,t=r.sibling,r=ia(r,{mode:"visible",children:l.children}),r.return=i,r.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=r,i.memoizedState=null,r)}function hh(t,i){return i=xu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function xu(t,i){return t=Vs(22,t,null,i),t.lanes=0,t}function mh(t,i,r){return Qr(i,t.child,null,r),t=hh(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ty(t,i,r){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Cf(t.return,i,r)}function ph(t,i,r,l,f,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:p}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=r,T.tailMode=f,T.treeForkCount=p)}function ny(t,i,r){var l=i.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var T=un.current,A=(T&2)!==0;if(A?(T=T&1|2,i.flags|=128):T&=1,ae(un,T),Fn(t,i,l,r),l=Et?Hl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ty(t,r,i);else if(t.tag===19)ty(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)t=r.alternate,t!==null&&mu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),ph(i,!1,f,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&mu(t)===null){i.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}ph(i,!0,r,null,p,l);break;case"together":ph(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ua(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),Za|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(Bo(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=ia(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=ia(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function _h(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ru(t)))}function TS(t,i,r){switch(i.tag){case 3:wt(i,i.stateNode.containerInfo),Ga(i,_n,t.memoizedState.cache),zr();break;case 27:case 5:on(i);break;case 4:wt(i,i.stateNode.containerInfo);break;case 10:Ga(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Pf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Qa(i),i.flags|=128,null):(r&i.child.childLanes)!==0?ey(t,i,r):(Qa(i),t=ua(t,i,r),t!==null?t.sibling:null);Qa(i);break;case 19:var f=(t.flags&128)!==0;if(l=(r&i.childLanes)!==0,l||(Bo(t,i,r,!1),l=(r&i.childLanes)!==0),f){if(l)return ny(t,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(un,un.current),l)break;return null;case 22:return i.lanes=0,Yg(t,i,r,i.pendingProps);case 24:Ga(i,_n,t.memoizedState.cache)}return ua(t,i,r)}function sy(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)yn=!0;else{if(!_h(t,r)&&(i.flags&128)===0)return yn=!1,TS(t,i,r);yn=(t.flags&131072)!==0}else yn=!1,Et&&(i.flags&1048576)!==0&&O_(i,Hl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=$r(i.elementType),i.type=t,typeof t=="function")Tf(t)?(l=Wr(t,l),i.tag=1,i=Jg(null,i,t,l,r)):(i.tag=0,i=ch(null,i,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===oe){i.tag=11,i=Gg(null,i,t,l,r);break e}else if(f===O){i.tag=14,i=Xg(null,i,t,l,r);break e}}throw i=we(t)||t,Error(a(306,i,""))}}return i;case 0:return ch(t,i,i.type,i.pendingProps,r);case 1:return l=i.type,f=Wr(l,i.pendingProps),Jg(t,i,l,f,r);case 3:e:{if(wt(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,Mf(t,i),Jl(i,l,null,r);var T=i.memoizedState;if(l=T.cache,Ga(i,_n,l),l!==p.cache&&If(i,[_n],r,!0),Wl(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Zg(t,i,l,r);break e}else if(l!==f){f=si(Error(a(424)),i),Gl(f),i=Zg(t,i,l,r);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,$t=li(t.firstChild),Bn=i,Et=!0,za=null,ri=!0,r=Y_(i,null,l,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zr(),l===f){i=ua(t,i,r);break e}Fn(t,i,l,r)}i=i.child}return i;case 26:return wu(t,i),t===null?(r=mE(i.type,null,i.pendingProps,null))?i.memoizedState=r:Et||(r=i.type,t=i.pendingProps,l=Fu(xe.current).createElement(r),l[ft]=i,l[ln]=t,zn(l,r,t),en(l),i.stateNode=l):i.memoizedState=mE(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return on(i),t===null&&Et&&(l=i.stateNode=dE(i.type,i.pendingProps,xe.current),Bn=i,ri=!0,f=$t,ir(i.type)?(Qh=f,$t=li(l.firstChild)):$t=f),Fn(t,i,i.pendingProps.children,r),wu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Et&&((f=l=$t)&&(l=WS(l,i.type,i.pendingProps,ri),l!==null?(i.stateNode=l,Bn=i,$t=li(l.firstChild),ri=!1,f=!0):f=!1),f||Ha(i)),on(i),f=i.type,p=i.pendingProps,T=t!==null?t.memoizedProps:null,l=p.children,Hh(f,p)?l=null:T!==null&&Hh(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=zf(t,i,fS,null,null,r),yc._currentValue=f),wu(t,i),Fn(t,i,l,r),i.child;case 6:return t===null&&Et&&((t=r=$t)&&(r=JS(r,i.pendingProps,ri),r!==null?(i.stateNode=r,Bn=i,$t=null,t=!0):t=!1),t||Ha(i)),null;case 13:return ey(t,i,r);case 4:return wt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Qr(i,null,l,r):Fn(t,i,l,r),i.child;case 11:return Gg(t,i,i.type,i.pendingProps,r);case 7:return Fn(t,i,i.pendingProps,r),i.child;case 8:return Fn(t,i,i.pendingProps.children,r),i.child;case 12:return Fn(t,i,i.pendingProps.children,r),i.child;case 10:return l=i.pendingProps,Ga(i,i.type,l.value),Fn(t,i,l.children,r),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Gr(i),f=Pn(f),l=l(f),i.flags|=1,Fn(t,i,l,r),i.child;case 14:return Xg(t,i,i.type,i.pendingProps,r);case 15:return $g(t,i,i.type,i.pendingProps,r);case 19:return ny(t,i,r);case 31:return vS(t,i,r);case 22:return Yg(t,i,r,i.pendingProps);case 24:return Gr(i),l=Pn(_n),t===null?(f=jf(),f===null&&(f=Pt,p=kf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:l,cache:f},Of(i),Ga(i,_n,f)):((t.lanes&r)!==0&&(Mf(t,i),Jl(i,null,null,r),Wl()),f=t.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ga(i,_n,l)):(l=p.cache,Ga(i,_n,l),l!==f.cache&&If(i,[_n],r,!0))),Fn(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function da(t){t.flags|=4}function gh(t,i,r,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Iy())t.flags|=8192;else throw Yr=uu,Df}else t.flags&=-16777217}function iy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!EE(i))if(Iy())t.flags|=8192;else throw Yr=uu,Df}function Au(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Mn():536870912,t.lanes|=i,Jo|=i)}function ic(t,i){if(!Et)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Yt(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(i)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,i}function bS(t,i,r){var l=i.pendingProps;switch(wf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return Yt(i),null;case 3:return r=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),oa(_n),yt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qo(i)?da(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Af())),Yt(i),null;case 26:var f=i.type,p=i.memoizedState;return t===null?(da(i),p!==null?(Yt(i),iy(i,p)):(Yt(i),gh(i,f,null,l,r))):p?p!==t.memoizedState?(da(i),Yt(i),iy(i,p)):(Yt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&da(i),Yt(i),gh(i,f,t,l,r)),null;case 27:if(ps(i),r=xe.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&da(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}t=Ee.current,qo(i)?U_(i):(t=dE(f,l,r),i.stateNode=t,da(i))}return Yt(i),null;case 5:if(ps(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&da(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}if(p=Ee.current,qo(i))U_(i);else{var T=Fu(xe.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}p[ft]=i,p[ln]=l;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=p;e:switch(zn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&da(i)}}return Yt(i),gh(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&da(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=xe.current,qo(i)){if(t=i.stateNode,r=i.memoizedProps,l=null,f=Bn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[ft]=i,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||eE(t.nodeValue,r)),t||Ha(i,!0)}else t=Fu(t).createTextNode(l),t[ft]=i,i.stateNode=t}return Yt(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(l=qo(i),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[ft]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),t=!1}else r=Af(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(Bs(i),i):(Bs(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Yt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=qo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[ft]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),f=!1}else f=Af(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Bs(i),i):(Bs(i),null)}return Bs(i),(i.flags&128)!==0?(i.lanes=r,i):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),Au(i,i.updateQueue),Yt(i),null);case 4:return yt(),t===null&&qh(i.stateNode.containerInfo),Yt(i),null;case 10:return oa(i.type),Yt(i),null;case 19:if(de(un),l=i.memoizedState,l===null)return Yt(i),null;if(f=(i.flags&128)!==0,p=l.rendering,p===null)if(f)ic(l,!1);else{if(rn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=mu(t),p!==null){for(i.flags|=128,ic(l,!1),t=p.updateQueue,i.updateQueue=t,Au(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)L_(r,t),r=r.sibling;return ae(un,un.current&1|2),Et&&aa(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&On()>Lu&&(i.flags|=128,f=!0,ic(l,!1),i.lanes=4194304)}else{if(!f)if(t=mu(p),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Au(i,t),ic(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Et)return Yt(i),null}else 2*On()-l.renderingStartTime>Lu&&r!==536870912&&(i.flags|=128,f=!0,ic(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(t=l.last,t!==null?t.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=On(),t.sibling=null,r=un.current,ae(un,f?r&1|2:r&1),Et&&aa(i,l.treeForkCount),t):(Yt(i),null);case 22:case 23:return Bs(i),Bf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(r&536870912)!==0&&(i.flags&128)===0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),r=i.updateQueue,r!==null&&Au(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048),t!==null&&de(Xr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),oa(_n),Yt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function SS(t,i){switch(wf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return oa(_n),yt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ps(i),null;case 31:if(i.memoizedState!==null){if(Bs(i),i.alternate===null)throw Error(a(340));zr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Bs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));zr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return de(un),null;case 4:return yt(),null;case 10:return oa(i.type),null;case 22:case 23:return Bs(i),Bf(),t!==null&&de(Xr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return oa(_n),null;case 25:return null;default:return null}}function ay(t,i){switch(wf(i),i.tag){case 3:oa(_n),yt();break;case 26:case 27:case 5:ps(i);break;case 4:yt();break;case 31:i.memoizedState!==null&&Bs(i);break;case 13:Bs(i);break;case 19:de(un);break;case 10:oa(i.type);break;case 22:case 23:Bs(i),Bf(),t!==null&&de(Xr);break;case 24:oa(_n)}}function ac(t,i){try{var r=i.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var p=r.create,T=r.inst;l=p(),T.destroy=l}r=r.next}while(r!==f)}}catch(A){Dt(i,i.return,A)}}function Wa(t,i,r){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var T=l.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,f=i;var P=r,ee=A;try{ee()}catch(ue){Dt(f,P,ue)}}}l=l.next}while(l!==p)}}catch(ue){Dt(i,i.return,ue)}}function ry(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{K_(i,r)}catch(l){Dt(t,t.return,l)}}}function oy(t,i,r){r.props=Wr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Dt(t,i,l)}}function rc(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){Dt(t,i,f)}}function Vi(t,i){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){Dt(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Dt(t,i,f)}else r.current=null}function ly(t){var i=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){Dt(t,t.return,f)}}function yh(t,i,r){try{var l=t.stateNode;GS(l,t.type,r,i),l[ln]=i}catch(f){Dt(t,t.return,f)}}function cy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ir(t.type)||t.tag===4}function Eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vh(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=qn));else if(l!==4&&(l===27&&ir(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(vh(t,i,r),t=t.sibling;t!==null;)vh(t,i,r),t=t.sibling}function Ru(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(l!==4&&(l===27&&ir(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Ru(t,i,r),t=t.sibling;t!==null;)Ru(t,i,r),t=t.sibling}function uy(t){var i=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);zn(i,l,r),i[ft]=t,i[ln]=r}catch(p){Dt(t,t.return,p)}}var fa=!1,En=!1,Th=!1,dy=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function NS(t,i){if(t=t.containerInfo,Fh=Qu,t=S_(t),mf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var T=0,A=-1,P=-1,ee=0,ue=0,me=t,ne=null;t:for(;;){for(var le;me!==r||f!==0&&me.nodeType!==3||(A=T+f),me!==p||l!==0&&me.nodeType!==3||(P=T+l),me.nodeType===3&&(T+=me.nodeValue.length),(le=me.firstChild)!==null;)ne=me,me=le;for(;;){if(me===t)break t;if(ne===r&&++ee===f&&(A=T),ne===p&&++ue===l&&(P=T),(le=me.nextSibling)!==null)break;me=ne,ne=me.parentNode}me=le}r=A===-1||P===-1?null:{start:A,end:P}}else r=null}r=r||{start:0,end:0}}else r=null;for(zh={focusedElem:t,selectionRange:r},Qu=!1,Ln=i;Ln!==null;)if(i=Ln,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ln=t;else for(;Ln!==null;){switch(i=Ln,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var De=Wr(r.type,f);t=l.getSnapshotBeforeUpdate(De,p),l.__reactInternalSnapshotBeforeUpdate=t}catch($e){Dt(r,r.return,$e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)Xh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,Ln=t;break}Ln=i.return}}function fy(t,i,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ma(t,r),l&4&&ac(5,r);break;case 1:if(ma(t,r),l&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(T){Dt(r,r.return,T)}else{var f=Wr(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Dt(r,r.return,T)}}l&64&&ry(r),l&512&&rc(r,r.return);break;case 3:if(ma(t,r),l&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{K_(t,i)}catch(T){Dt(r,r.return,T)}}break;case 27:i===null&&l&4&&uy(r);case 26:case 5:ma(t,r),i===null&&l&4&&ly(r),l&512&&rc(r,r.return);break;case 12:ma(t,r);break;case 31:ma(t,r),l&4&&py(t,r);break;case 13:ma(t,r),l&4&&_y(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=jS.bind(null,r),ZS(t,r))));break;case 22:if(l=r.memoizedState!==null||fa,!l){i=i!==null&&i.memoizedState!==null||En,f=fa;var p=En;fa=l,(En=i)&&!p?pa(t,r,(r.subtreeFlags&8772)!==0):ma(t,r),fa=f,En=p}break;case 30:break;default:ma(t,r)}}function hy(t){var i=t.alternate;i!==null&&(t.alternate=null,hy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ma(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Jt=null,bs=!1;function ha(t,i,r){for(r=r.child;r!==null;)my(t,i,r),r=r.sibling}function my(t,i,r){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Is,r)}catch{}switch(r.tag){case 26:En||Vi(r,i),ha(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:En||Vi(r,i);var l=Jt,f=bs;ir(r.type)&&(Jt=r.stateNode,bs=!1),ha(t,i,r),pc(r.stateNode),Jt=l,bs=f;break;case 5:En||Vi(r,i);case 6:if(l=Jt,f=bs,Jt=null,ha(t,i,r),Jt=l,bs=f,Jt!==null)if(bs)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(r.stateNode)}catch(p){Dt(r,i,p)}else try{Jt.removeChild(r.stateNode)}catch(p){Dt(r,i,p)}break;case 18:Jt!==null&&(bs?(t=Jt,rE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),rl(t)):rE(Jt,r.stateNode));break;case 4:l=Jt,f=bs,Jt=r.stateNode.containerInfo,bs=!0,ha(t,i,r),Jt=l,bs=f;break;case 0:case 11:case 14:case 15:Wa(2,r,i),En||Wa(4,r,i),ha(t,i,r);break;case 1:En||(Vi(r,i),l=r.stateNode,typeof l.componentWillUnmount=="function"&&oy(r,i,l)),ha(t,i,r);break;case 21:ha(t,i,r);break;case 22:En=(l=En)||r.memoizedState!==null,ha(t,i,r),En=l;break;default:ha(t,i,r)}}function py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{rl(t)}catch(r){Dt(i,i.return,r)}}}function _y(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{rl(t)}catch(r){Dt(i,i.return,r)}}function wS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new dy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new dy),i;default:throw Error(a(435,t.tag))}}function Cu(t,i){var r=wS(t);i.forEach(function(l){if(!r.has(l)){r.add(l);var f=DS.bind(null,t,l);l.then(f,f)}})}function Ss(t,i){var r=i.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],p=t,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(ir(A.type)){Jt=A.stateNode,bs=!1;break e}break;case 5:Jt=A.stateNode,bs=!1;break e;case 3:case 4:Jt=A.stateNode.containerInfo,bs=!0;break e}A=A.return}if(Jt===null)throw Error(a(160));my(p,T,f),Jt=null,bs=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)gy(i,t),i=i.sibling}var vi=null;function gy(t,i){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ss(i,t),Ns(t),l&4&&(Wa(3,t,t.return),ac(3,t),Wa(5,t,t.return));break;case 1:Ss(i,t),Ns(t),l&512&&(En||r===null||Vi(r,r.return)),l&64&&fa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=vi;if(Ss(i,t),Ns(t),l&512&&(En||r===null||Vi(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[os]||p[ft]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),zn(p,l,r),p[ft]=t,en(p),l=p;break e;case"link":var T=gE("link","href",f).get(l+(r.href||""));if(T){for(var A=0;A<T.length;A++)if(p=T[A],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(A,1);break t}}p=f.createElement(l),zn(p,l,r),f.head.appendChild(p);break;case"meta":if(T=gE("meta","content",f).get(l+(r.content||""))){for(A=0;A<T.length;A++)if(p=T[A],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(A,1);break t}}p=f.createElement(l),zn(p,l,r),f.head.appendChild(p);break;default:throw Error(a(468,l))}p[ft]=t,en(p),l=p}t.stateNode=l}else yE(f,t.type,t.stateNode);else t.stateNode=_E(f,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?yE(f,t.type,t.stateNode):_E(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&yh(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ss(i,t),Ns(t),l&512&&(En||r===null||Vi(r,r.return)),r!==null&&l&4&&yh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ss(i,t),Ns(t),l&512&&(En||r===null||Vi(r,r.return)),t.flags&32){f=t.stateNode;try{An(f,"")}catch(De){Dt(t,t.return,De)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,yh(t,f,r!==null?r.memoizedProps:f)),l&1024&&(Th=!0);break;case 6:if(Ss(i,t),Ns(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(De){Dt(t,t.return,De)}}break;case 3:if(Gu=null,f=vi,vi=zu(i.containerInfo),Ss(i,t),vi=f,Ns(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{rl(i.containerInfo)}catch(De){Dt(t,t.return,De)}Th&&(Th=!1,yy(t));break;case 4:l=vi,vi=zu(t.stateNode.containerInfo),Ss(i,t),Ns(t),vi=l;break;case 12:Ss(i,t),Ns(t);break;case 31:Ss(i,t),Ns(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cu(t,l)));break;case 13:Ss(i,t),Ns(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ku=On()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cu(t,l)));break;case 22:f=t.memoizedState!==null;var P=r!==null&&r.memoizedState!==null,ee=fa,ue=En;if(fa=ee||f,En=ue||P,Ss(i,t),En=ue,fa=ee,Ns(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||P||fa||En||Jr(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){P=r=i;try{if(p=P.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=P.stateNode;var me=P.memoizedProps.style,ne=me!=null&&me.hasOwnProperty("display")?me.display:null;A.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(De){Dt(P,P.return,De)}}}else if(i.tag===6){if(r===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(De){Dt(P,P.return,De)}}}else if(i.tag===18){if(r===null){P=i;try{var le=P.stateNode;f?oE(le,!0):oE(P.stateNode,!1)}catch(De){Dt(P,P.return,De)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Cu(t,r))));break;case 19:Ss(i,t),Ns(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cu(t,l)));break;case 30:break;case 21:break;default:Ss(i,t),Ns(t)}}function Ns(t){var i=t.flags;if(i&2){try{for(var r,l=t.return;l!==null;){if(cy(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=Eh(t);Ru(t,p,f);break;case 5:var T=r.stateNode;r.flags&32&&(An(T,""),r.flags&=-33);var A=Eh(t);Ru(t,A,T);break;case 3:case 4:var P=r.stateNode.containerInfo,ee=Eh(t);vh(t,ee,P);break;default:throw Error(a(161))}}catch(ue){Dt(t,t.return,ue)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function yy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;yy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ma(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)fy(t,i.alternate,i),i=i.sibling}function Jr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Wa(4,i,i.return),Jr(i);break;case 1:Vi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&oy(i,i.return,r),Jr(i);break;case 27:pc(i.stateNode);case 26:case 5:Vi(i,i.return),Jr(i);break;case 22:i.memoizedState===null&&Jr(i);break;case 30:Jr(i);break;default:Jr(i)}t=t.sibling}}function pa(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:pa(f,p,r),ac(4,p);break;case 1:if(pa(f,p,r),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Dt(l,l.return,ee)}if(l=p,f=l.updateQueue,f!==null){var A=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)Q_(P[f],A)}catch(ee){Dt(l,l.return,ee)}}r&&T&64&&ry(p),rc(p,p.return);break;case 27:uy(p);case 26:case 5:pa(f,p,r),r&&l===null&&T&4&&ly(p),rc(p,p.return);break;case 12:pa(f,p,r);break;case 31:pa(f,p,r),r&&T&4&&py(f,p);break;case 13:pa(f,p,r),r&&T&4&&_y(f,p);break;case 22:p.memoizedState===null&&pa(f,p,r),rc(p,p.return);break;case 30:break;default:pa(f,p,r)}i=i.sibling}}function bh(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Xl(r))}function Sh(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xl(t))}function Ti(t,i,r,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ey(t,i,r,l),i=i.sibling}function Ey(t,i,r,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ti(t,i,r,l),f&2048&&ac(9,i);break;case 1:Ti(t,i,r,l);break;case 3:Ti(t,i,r,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xl(t)));break;case 12:if(f&2048){Ti(t,i,r,l),t=i.stateNode;try{var p=i.memoizedProps,T=p.id,A=p.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Dt(i,i.return,P)}}else Ti(t,i,r,l);break;case 31:Ti(t,i,r,l);break;case 13:Ti(t,i,r,l);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?Ti(t,i,r,l):oc(t,i):p._visibility&2?Ti(t,i,r,l):(p._visibility|=2,Qo(t,i,r,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&bh(T,i);break;case 24:Ti(t,i,r,l),f&2048&&Sh(i.alternate,i);break;default:Ti(t,i,r,l)}}function Qo(t,i,r,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,T=i,A=r,P=l,ee=T.flags;switch(T.tag){case 0:case 11:case 15:Qo(p,T,A,P,f),ac(8,T);break;case 23:break;case 22:var ue=T.stateNode;T.memoizedState!==null?ue._visibility&2?Qo(p,T,A,P,f):oc(p,T):(ue._visibility|=2,Qo(p,T,A,P,f)),f&&ee&2048&&bh(T.alternate,T);break;case 24:Qo(p,T,A,P,f),f&&ee&2048&&Sh(T.alternate,T);break;default:Qo(p,T,A,P,f)}i=i.sibling}}function oc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,l=i,f=l.flags;switch(l.tag){case 22:oc(r,l),f&2048&&bh(l.alternate,l);break;case 24:oc(r,l),f&2048&&Sh(l.alternate,l);break;default:oc(r,l)}i=i.sibling}}var lc=8192;function Ko(t,i,r){if(t.subtreeFlags&lc)for(t=t.child;t!==null;)vy(t,i,r),t=t.sibling}function vy(t,i,r){switch(t.tag){case 26:Ko(t,i,r),t.flags&lc&&t.memoizedState!==null&&dN(r,vi,t.memoizedState,t.memoizedProps);break;case 5:Ko(t,i,r);break;case 3:case 4:var l=vi;vi=zu(t.stateNode.containerInfo),Ko(t,i,r),vi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=lc,lc=16777216,Ko(t,i,r),lc=l):Ko(t,i,r));break;default:Ko(t,i,r)}}function Ty(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function cc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];Ln=l,Sy(l,t)}Ty(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)by(t),t=t.sibling}function by(t){switch(t.tag){case 0:case 11:case 15:cc(t),t.flags&2048&&Wa(9,t,t.return);break;case 3:cc(t);break;case 12:cc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Iu(t)):cc(t);break;default:cc(t)}}function Iu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];Ln=l,Sy(l,t)}Ty(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Wa(8,i,i.return),Iu(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Iu(i));break;default:Iu(i)}t=t.sibling}}function Sy(t,i){for(;Ln!==null;){var r=Ln;switch(r.tag){case 0:case 11:case 15:Wa(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Ln=l;else e:for(r=t;Ln!==null;){l=Ln;var f=l.sibling,p=l.return;if(hy(l),l===r){Ln=null;break e}if(f!==null){f.return=p,Ln=f;break e}Ln=p}}}var xS={getCacheForType:function(t){var i=Pn(_n),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return Pn(_n).controller.signal}},AS=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Pt=null,ct=null,mt=0,jt=0,Ps=null,Ja=!1,Wo=!1,Nh=!1,_a=0,rn=0,Za=0,Zr=0,wh=0,Fs=0,Jo=0,uc=null,ws=null,xh=!1,ku=0,Ny=0,Lu=1/0,ju=null,er=null,Nn=0,tr=null,Zo=null,ga=0,Ah=0,Rh=null,wy=null,dc=0,Ch=null;function zs(){return(Rt&2)!==0&&mt!==0?mt&-mt:se.T!==null?Oh():Rr()}function xy(){if(Fs===0)if((mt&536870912)===0||Et){var t=xi;xi<<=1,(xi&3932160)===0&&(xi=262144),Fs=t}else Fs=536870912;return t=qs.current,t!==null&&(t.flags|=32),Fs}function xs(t,i,r){(t===Pt&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(el(t,0),nr(t,mt,Fs,!1)),pi(t,r),((Rt&2)===0||t!==Pt)&&(t===Pt&&((Rt&2)===0&&(Zr|=r),rn===4&&nr(t,mt,Fs,!1)),qi(t))}function Ay(t,i,r){if((Rt&6)!==0)throw Error(a(327));var l=!r&&(i&127)===0&&(i&t.expiredLanes)===0||js(t,i),f=l?IS(t,i):kh(t,i,!0),p=l;do{if(f===0){Wo&&!l&&nr(t,i,0,!1);break}else{if(r=t.current.alternate,p&&!RS(r)){f=kh(t,i,!1),p=!1;continue}if(f===2){if(p=i,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=t;f=uc;var P=A.current.memoizedState.isDehydrated;if(P&&(el(A,T).flags|=256),T=kh(A,T,!1),T!==2){if(Nh&&!P){A.errorRecoveryDisabledLanes|=p,Zr|=p,f=4;break e}p=ws,ws=f,p!==null&&(ws===null?ws=p:ws.push.apply(ws,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){el(t,0),nr(t,i,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:nr(l,i,Fs,!Ja);break e;case 2:ws=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=ku+300-On(),10<f)){if(nr(l,i,Fs,!Ja),be(l,0,!0)!==0)break e;ga=i,l.timeoutHandle=iE(Ry.bind(null,l,r,ws,ju,xh,i,Fs,Zr,Jo,Ja,p,"Throttled",-0,0),f);break e}Ry(l,r,ws,ju,xh,i,Fs,Zr,Jo,Ja,p,null,-0,0)}}break}while(!0);qi(t)}function Ry(t,i,r,l,f,p,T,A,P,ee,ue,me,ne,le){if(t.timeoutHandle=-1,me=i.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},vy(i,p,me);var De=(p&62914560)===p?ku-On():(p&4194048)===p?Ny-On():0;if(De=fN(me,De),De!==null){ga=p,t.cancelPendingCommit=De(My.bind(null,t,i,p,r,l,f,T,A,P,ue,me,null,ne,le)),nr(t,p,T,!ee);return}}My(t,i,p,r,l,f,T,A,P)}function RS(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],p=f.getSnapshot;f=f.value;try{if(!Us(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function nr(t,i,r,l){i&=~wh,i&=~Zr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var p=31-Xt(f),T=1<<p;l[p]=-1,f&=~T}r!==0&&rs(t,r,i)}function Du(){return(Rt&6)===0?(fc(0),!1):!0}function Ih(){if(ct!==null){if(jt===0)var t=ct.return;else t=ct,ra=Hr=null,Xf(t),Ho=null,Yl=0,t=ct;for(;t!==null;)ay(t.alternate,t),t=t.return;ct=null}}function el(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,YS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ga=0,Ih(),Pt=t,ct=r=ia(t.current,null),mt=i,jt=0,Ps=null,Ja=!1,Wo=js(t,i),Nh=!1,Jo=Fs=wh=Zr=Za=rn=0,ws=uc=null,xh=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Xt(l),p=1<<f;i|=t[f],l&=~p}return _a=i,tu(),r}function Cy(t,i){ot=null,se.H=nc,i===zo||i===cu?(i=G_(),jt=3):i===Df?(i=G_(),jt=4):jt=i===lh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ps=i,ct===null&&(rn=1,Su(t,si(i,t.current)))}function Iy(){var t=qs.current;return t===null?!0:(mt&4194048)===mt?oi===null:(mt&62914560)===mt||(mt&536870912)!==0?t===oi:!1}function ky(){var t=se.H;return se.H=nc,t===null?nc:t}function Ly(){var t=se.A;return se.A=xS,t}function Ou(){rn=4,Ja||(mt&4194048)!==mt&&qs.current!==null||(Wo=!0),(Za&134217727)===0&&(Zr&134217727)===0||Pt===null||nr(Pt,mt,Fs,!1)}function kh(t,i,r){var l=Rt;Rt|=2;var f=ky(),p=Ly();(Pt!==t||mt!==i)&&(ju=null,el(t,i)),i=!1;var T=rn;e:do try{if(jt!==0&&ct!==null){var A=ct,P=Ps;switch(jt){case 8:Ih(),T=6;break e;case 3:case 2:case 9:case 6:qs.current===null&&(i=!0);var ee=jt;if(jt=0,Ps=null,tl(t,A,P,ee),r&&Wo){T=0;break e}break;default:ee=jt,jt=0,Ps=null,tl(t,A,P,ee)}}CS(),T=rn;break}catch(ue){Cy(t,ue)}while(!0);return i&&t.shellSuspendCounter++,ra=Hr=null,Rt=l,se.H=f,se.A=p,ct===null&&(Pt=null,mt=0,tu()),T}function CS(){for(;ct!==null;)jy(ct)}function IS(t,i){var r=Rt;Rt|=2;var l=ky(),f=Ly();Pt!==t||mt!==i?(ju=null,Lu=On()+500,el(t,i)):Wo=js(t,i);e:do try{if(jt!==0&&ct!==null){i=ct;var p=Ps;t:switch(jt){case 1:jt=0,Ps=null,tl(t,i,p,1);break;case 2:case 9:if(z_(p)){jt=0,Ps=null,Dy(i);break}i=function(){jt!==2&&jt!==9||Pt!==t||(jt=7),qi(t)},p.then(i,i);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:z_(p)?(jt=0,Ps=null,Dy(i)):(jt=0,Ps=null,tl(t,i,p,7));break;case 5:var T=null;switch(ct.tag){case 26:T=ct.memoizedState;case 5:case 27:var A=ct;if(T?EE(T):A.stateNode.complete){jt=0,Ps=null;var P=A.sibling;if(P!==null)ct=P;else{var ee=A.return;ee!==null?(ct=ee,Mu(ee)):ct=null}break t}}jt=0,Ps=null,tl(t,i,p,5);break;case 6:jt=0,Ps=null,tl(t,i,p,6);break;case 8:Ih(),rn=6;break e;default:throw Error(a(462))}}kS();break}catch(ue){Cy(t,ue)}while(!0);return ra=Hr=null,se.H=l,se.A=f,Rt=r,ct!==null?0:(Pt=null,mt=0,tu(),rn)}function kS(){for(;ct!==null&&!Vl();)jy(ct)}function jy(t){var i=sy(t.alternate,t,_a);t.memoizedProps=t.pendingProps,i===null?Mu(t):ct=i}function Dy(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=Wg(r,i,i.pendingProps,i.type,void 0,mt);break;case 11:i=Wg(r,i,i.pendingProps,i.type.render,i.ref,mt);break;case 5:Xf(i);default:ay(r,i),i=ct=L_(i,_a),i=sy(r,i,_a)}t.memoizedProps=t.pendingProps,i===null?Mu(t):ct=i}function tl(t,i,r,l){ra=Hr=null,Xf(i),Ho=null,Yl=0;var f=i.return;try{if(ES(t,f,i,r,mt)){rn=1,Su(t,si(r,t.current)),ct=null;return}}catch(p){if(f!==null)throw ct=f,p;rn=1,Su(t,si(r,t.current)),ct=null;return}i.flags&32768?(Et||l===1?t=!0:Wo||(mt&536870912)!==0?t=!1:(Ja=t=!0,(l===2||l===9||l===3||l===6)&&(l=qs.current,l!==null&&l.tag===13&&(l.flags|=16384))),Oy(i,t)):Mu(i)}function Mu(t){var i=t;do{if((i.flags&32768)!==0){Oy(i,Ja);return}t=i.return;var r=bS(i.alternate,i,_a);if(r!==null){ct=r;return}if(i=i.sibling,i!==null){ct=i;return}ct=i=t}while(i!==null);rn===0&&(rn=5)}function Oy(t,i){do{var r=SS(t.alternate,t);if(r!==null){r.flags&=32767,ct=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){ct=t;return}ct=t=r}while(t!==null);rn=6,ct=null}function My(t,i,r,l,f,p,T,A,P){t.cancelPendingCommit=null;do Uu();while(Nn!==0);if((Rt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=Ef,Ar(t,r,p,T,A,P),t===Pt&&(ct=Pt=null,mt=0),Zo=i,tr=t,ga=r,Ah=p,Rh=f,wy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,OS(mi,function(){return Py(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=se.T,se.T=null,f=Te.p,Te.p=2,T=Rt,Rt|=4;try{NS(t,i,r)}finally{Rt=T,Te.p=f,se.T=l}}Nn=1,Uy(),Vy(),qy()}}function Uy(){if(Nn===1){Nn=0;var t=tr,i=Zo,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=se.T,se.T=null;var l=Te.p;Te.p=2;var f=Rt;Rt|=4;try{gy(i,t);var p=zh,T=S_(t.containerInfo),A=p.focusedElem,P=p.selectionRange;if(T!==A&&A&&A.ownerDocument&&b_(A.ownerDocument.documentElement,A)){if(P!==null&&mf(A)){var ee=P.start,ue=P.end;if(ue===void 0&&(ue=ee),"selectionStart"in A)A.selectionStart=ee,A.selectionEnd=Math.min(ue,A.value.length);else{var me=A.ownerDocument||document,ne=me&&me.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),De=A.textContent.length,$e=Math.min(P.start,De),Vt=P.end===void 0?$e:Math.min(P.end,De);!le.extend&&$e>Vt&&(T=Vt,Vt=$e,$e=T);var Y=T_(A,$e),$=T_(A,Vt);if(Y&&$&&(le.rangeCount!==1||le.anchorNode!==Y.node||le.anchorOffset!==Y.offset||le.focusNode!==$.node||le.focusOffset!==$.offset)){var Z=me.createRange();Z.setStart(Y.node,Y.offset),le.removeAllRanges(),$e>Vt?(le.addRange(Z),le.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),le.addRange(Z))}}}}for(me=[],le=A;le=le.parentNode;)le.nodeType===1&&me.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<me.length;A++){var fe=me[A];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Qu=!!Fh,zh=Fh=null}finally{Rt=f,Te.p=l,se.T=r}}t.current=i,Nn=2}}function Vy(){if(Nn===2){Nn=0;var t=tr,i=Zo,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=se.T,se.T=null;var l=Te.p;Te.p=2;var f=Rt;Rt|=4;try{fy(t,i.alternate,i)}finally{Rt=f,Te.p=l,se.T=r}}Nn=3}}function qy(){if(Nn===4||Nn===3){Nn=0,Nr();var t=tr,i=Zo,r=ga,l=wy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,Zo=tr=null,By(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(er=null),Qn(r),i=i.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Is,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=se.T,f=Te.p,Te.p=2,se.T=null;try{for(var p=t.onRecoverableError,T=0;T<l.length;T++){var A=l[T];p(A.value,{componentStack:A.stack})}}finally{se.T=i,Te.p=f}}(ga&3)!==0&&Uu(),qi(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Ch?dc++:(dc=0,Ch=t):dc=0,fc(0)}}function By(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Xl(i)))}function Uu(){return Uy(),Vy(),qy(),Py()}function Py(){if(Nn!==5)return!1;var t=tr,i=Ah;Ah=0;var r=Qn(ga),l=se.T,f=Te.p;try{Te.p=32>r?32:r,se.T=null,r=Rh,Rh=null;var p=tr,T=ga;if(Nn=0,Zo=tr=null,ga=0,(Rt&6)!==0)throw Error(a(331));var A=Rt;if(Rt|=4,by(p.current),Ey(p,p.current,T,r),Rt=A,fc(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Is,p)}catch{}return!0}finally{Te.p=f,se.T=l,By(t,i)}}function Fy(t,i,r){i=si(r,i),i=oh(t.stateNode,i,2),t=Ya(t,i,2),t!==null&&(pi(t,2),qi(t))}function Dt(t,i,r){if(t.tag===3)Fy(t,t,r);else for(;i!==null;){if(i.tag===3){Fy(i,t,r);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(er===null||!er.has(l))){t=si(r,t),r=zg(2),l=Ya(i,r,2),l!==null&&(Hg(r,l,i,t),pi(l,2),qi(l));break}}i=i.return}}function Lh(t,i,r){var l=t.pingCache;if(l===null){l=t.pingCache=new AS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(r)||(Nh=!0,f.add(r),t=LS.bind(null,t,i,r),i.then(t,t))}function LS(t,i,r){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Pt===t&&(mt&r)===r&&(rn===4||rn===3&&(mt&62914560)===mt&&300>On()-ku?(Rt&2)===0&&el(t,0):wh|=r,Jo===mt&&(Jo=0)),qi(t)}function zy(t,i){i===0&&(i=Mn()),t=Pr(t,i),t!==null&&(pi(t,i),qi(t))}function jS(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),zy(t,r)}function DS(t,i){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),zy(t,r)}function OS(t,i){return sn(t,i)}var Vu=null,nl=null,jh=!1,qu=!1,Dh=!1,sr=0;function qi(t){t!==nl&&t.next===null&&(nl===null?Vu=nl=t:nl=nl.next=t),qu=!0,jh||(jh=!0,US())}function fc(t,i){if(!Dh&&qu){Dh=!0;do for(var r=!1,l=Vu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-Xt(42|t)+1)-1,p&=f&~(T&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,$y(l,p))}else p=mt,p=be(l,l===Pt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||js(l,p)||(r=!0,$y(l,p));l=l.next}while(r);Dh=!1}}function MS(){Hy()}function Hy(){qu=jh=!1;var t=0;sr!==0&&$S()&&(t=sr);for(var i=On(),r=null,l=Vu;l!==null;){var f=l.next,p=Gy(l,i);p===0?(l.next=null,r===null?Vu=f:r.next=f,f===null&&(nl=r)):(r=l,(t!==0||(p&3)!==0)&&(qu=!0)),l=f}Nn!==0&&Nn!==5||fc(t),sr!==0&&(sr=0)}function Gy(t,i){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-Xt(p),A=1<<T,P=f[T];P===-1?((A&r)===0||(A&l)!==0)&&(f[T]=ql(A,i)):P<=i&&(t.expiredLanes|=A),p&=~A}if(i=Pt,r=mt,r=be(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===i&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Cs(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||js(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(l!==null&&Cs(l),Qn(r)){case 2:case 8:r=is;break;case 32:r=mi;break;case 268435456:r=wr;break;default:r=mi}return l=Xy.bind(null,t),r=sn(r,l),t.callbackPriority=i,t.callbackNode=r,i}return l!==null&&l!==null&&Cs(l),t.callbackPriority=2,t.callbackNode=null,2}function Xy(t,i){if(Nn!==0&&Nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Uu()&&t.callbackNode!==r)return null;var l=mt;return l=be(t,t===Pt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ay(t,l,i),Gy(t,On()),t.callbackNode!=null&&t.callbackNode===r?Xy.bind(null,t):null)}function $y(t,i){if(Uu())return null;Ay(t,i,!0)}function US(){QS(function(){(Rt&6)!==0?sn(hi,MS):Hy()})}function Oh(){if(sr===0){var t=Po;t===0&&(t=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),sr=t}return sr}function Yy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:us(""+t)}function Qy(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function VS(t,i,r,l,f){if(i==="submit"&&r&&r.stateNode===f){var p=Yy((f[ln]||null).action),T=l.submitter;T&&(i=(i=T[ln]||null)?Yy(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var A=new Nt("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sr!==0){var P=T?Qy(f,T):new FormData(f);th(r,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(A.preventDefault(),P=T?Qy(f,T):new FormData(f),th(r,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Mh=0;Mh<yf.length;Mh++){var Uh=yf[Mh],qS=Uh.toLowerCase(),BS=Uh[0].toUpperCase()+Uh.slice(1);Ei(qS,"on"+BS)}Ei(x_,"onAnimationEnd"),Ei(A_,"onAnimationIteration"),Ei(R_,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(nS,"onTransitionRun"),Ei(sS,"onTransitionStart"),Ei(iS,"onTransitionCancel"),Ei(C_,"onTransitionEnd"),Os("onMouseEnter",["mouseout","mouseover"]),Os("onMouseLeave",["mouseout","mouseover"]),Os("onPointerEnter",["pointerout","pointerover"]),Os("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hc));function Ky(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var T=l.length-1;0<=T;T--){var A=l[T],P=A.instance,ee=A.currentTarget;if(A=A.listener,P!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=ee;try{p(f)}catch(ue){eu(ue)}f.currentTarget=null,p=P}else for(T=0;T<l.length;T++){if(A=l[T],P=A.instance,ee=A.currentTarget,A=A.listener,P!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=ee;try{p(f)}catch(ue){eu(ue)}f.currentTarget=null,p=P}}}}function ut(t,i){var r=i[Ri];r===void 0&&(r=i[Ri]=new Set);var l=t+"__bubble";r.has(l)||(Wy(i,t,2,!1),r.add(l))}function Vh(t,i,r){var l=0;i&&(l|=4),Wy(r,t,l,i)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function qh(t){if(!t[Bu]){t[Bu]=!0,_i.forEach(function(r){r!=="selectionchange"&&(PS.has(r)||Vh(r,!1,t),Vh(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bu]||(i[Bu]=!0,Vh("selectionchange",!1,i))}}function Wy(t,i,r,l){switch(xE(i)){case 2:var f=pN;break;case 8:f=_N;break;default:f=em}r=f.bind(null,i,r,t),f=void 0,!gi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,r,{capture:!0,passive:f}):t.addEventListener(i,r,!0):f!==void 0?t.addEventListener(i,r,{passive:f}):t.addEventListener(i,r,!1)}function Bh(t,i,r,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var A=l.stateNode.containerInfo;if(A===f)break;if(T===4)for(T=l.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;A!==null;){if(T=cn(A),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){l=p=T;continue e}A=A.parentNode}}l=l.return}vs(function(){var ee=p,ue=Ce(r),me=[];e:{var ne=I_.get(t);if(ne!==void 0){var le=Nt,De=t;switch(t){case"keypress":if(W(r)===0)break e;case"keydown":case"keyup":le=Io;break;case"focusin":De="focus",le=sa;break;case"focusout":De="blur",le=sa;break;case"beforeblur":case"afterblur":le=sa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=bo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=v;break;case x_:case A_:case R_:le=No;break;case C_:le=I;break;case"scroll":case"scrollend":le=Ba;break;case"wheel":le=re;break;case"copy":case"cut":case"paste":le=Ur;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=yi;break;case"toggle":case"beforetoggle":le=We}var $e=(i&4)!==0,Vt=!$e&&(t==="scroll"||t==="scrollend"),Y=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var $=ee,Z;$!==null;){var fe=$;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||Y===null||(fe=pn($,Y),fe!=null&&$e.push(mc($,fe,Z))),Vt)break;$=$.return}0<$e.length&&(ne=new le(ne,De,null,r,ue),me.push({event:ne,listeners:$e}))}}if((i&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",ne&&r!==Dr&&(De=r.relatedTarget||r.fromElement)&&(cn(De)||De[$s]))break e;if((le||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(De=r.relatedTarget||r.toElement,le=ee,De=De?cn(De):null,De!==null&&(Vt=u(De),$e=De.tag,De!==Vt||$e!==5&&$e!==27&&$e!==6)&&(De=null)):(le=null,De=ee),le!==De)){if($e=Or,fe="onMouseLeave",Y="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&($e=yi,fe="onPointerLeave",Y="onPointerEnter",$="pointer"),Vt=le==null?ne:Vn(le),Z=De==null?ne:Vn(De),ne=new $e(fe,$+"leave",le,r,ue),ne.target=Vt,ne.relatedTarget=Z,fe=null,cn(ue)===ee&&($e=new $e(Y,$+"enter",De,r,ue),$e.target=Z,$e.relatedTarget=Vt,fe=$e),Vt=fe,le&&De)t:{for($e=FS,Y=le,$=De,Z=0,fe=Y;fe;fe=$e(fe))Z++;fe=0;for(var ze=$;ze;ze=$e(ze))fe++;for(;0<Z-fe;)Y=$e(Y),Z--;for(;0<fe-Z;)$=$e($),fe--;for(;Z--;){if(Y===$||$!==null&&Y===$.alternate){$e=Y;break t}Y=$e(Y),$=$e($)}$e=null}else $e=null;le!==null&&Jy(me,ne,le,$e,!1),De!==null&&Vt!==null&&Jy(me,Vt,De,$e,!0)}}e:{if(ne=ee?Vn(ee):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var xt=p_;else if(Lo(ne))if(__)xt=Z1;else{xt=W1;var Ue=K1}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Es(ee.elementType)&&(xt=p_):xt=J1;if(xt&&(xt=xt(t,ee))){Oi(me,xt,r,ue);break e}Ue&&Ue(t,ne,ee),t==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Lr(ne,"number",ne.value)}switch(Ue=ee?Vn(ee):window,t){case"focusin":(Lo(Ue)||Ue.contentEditable==="true")&&(jo=Ue,pf=ee,zl=null);break;case"focusout":zl=pf=jo=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,N_(me,r,ue);break;case"selectionchange":if(tS)break;case"keydown":case"keyup":N_(me,r,ue)}var lt;if(Tt)e:{switch(t){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else kn?Xe(t,r)&&(pt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(he&&r.locale!=="ko"&&(kn||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&kn&&(lt=F()):(y=ue,N="value"in y?y.value:y.textContent,kn=!0)),Ue=Pu(ee,pt),0<Ue.length&&(pt=new ti(pt,t,null,r,ue),me.push({event:pt,listeners:Ue}),lt?pt.data=lt:(lt=ht(r),lt!==null&&(pt.data=lt)))),(lt=Q?Ts(t,r):fs(t,r))&&(pt=Pu(ee,"onBeforeInput"),0<pt.length&&(Ue=new ti("onBeforeInput","beforeinput",null,r,ue),me.push({event:Ue,listeners:pt}),Ue.data=lt)),VS(me,t,ee,r,ue)}Ky(me,i)})}function mc(t,i,r){return{instance:t,listener:i,currentTarget:r}}function Pu(t,i){for(var r=i+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=pn(t,r),f!=null&&l.unshift(mc(t,f,p)),f=pn(t,i),f!=null&&l.push(mc(t,f,p))),t.tag===3)return l;t=t.return}return[]}function FS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jy(t,i,r,l,f){for(var p=i._reactName,T=[];r!==null&&r!==l;){var A=r,P=A.alternate,ee=A.stateNode;if(A=A.tag,P!==null&&P===l)break;A!==5&&A!==26&&A!==27||ee===null||(P=ee,f?(ee=pn(r,p),ee!=null&&T.unshift(mc(r,ee,P))):f||(ee=pn(r,p),ee!=null&&T.push(mc(r,ee,P)))),r=r.return}T.length!==0&&t.push({event:i,listeners:T})}var zS=/\r\n?/g,HS=/\u0000|\uFFFD/g;function Zy(t){return(typeof t=="string"?t:""+t).replace(zS,`
`).replace(HS,"")}function eE(t,i){return i=Zy(i),Zy(t)===i}function Ut(t,i,r,l,f,p){switch(r){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&An(t,""+l);break;case"className":cs(t,"class",l);break;case"tabIndex":cs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cs(t,r,l);break;case"style":ki(t,l,p);break;case"data":if(i!=="object"){cs(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=us(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&Ut(t,i,"name",f.name,f,null),Ut(t,i,"formEncType",f.formEncType,f,null),Ut(t,i,"formMethod",f.formMethod,f,null),Ut(t,i,"formTarget",f.formTarget,f,null)):(Ut(t,i,"encType",f.encType,f,null),Ut(t,i,"method",f.method,f,null),Ut(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=us(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=qn);break;case"onScroll":l!=null&&ut("scroll",t);break;case"onScrollEnd":l!=null&&ut("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=us(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":ut("beforetoggle",t),ut("toggle",t),Wi(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Wi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=qa.get(r)||r,Wi(t,r,l))}}function Ph(t,i,r,l,f,p){switch(r){case"style":ki(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&ut("scroll",t);break;case"onScrollEnd":l!=null&&ut("scrollend",t);break;case"onClick":l!=null&&(t.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ua.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=t[ln]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Wi(t,r,l)}}}function zn(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",t),ut("load",t);var l=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var T=r[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ut(t,i,p,T,r,null)}}f&&Ut(t,i,"srcSet",r.srcSet,r,null),l&&Ut(t,i,"src",r.src,r,null);return;case"input":ut("invalid",t);var A=p=T=f=null,P=null,ee=null;for(l in r)if(r.hasOwnProperty(l)){var ue=r[l];if(ue!=null)switch(l){case"name":f=ue;break;case"type":T=ue;break;case"checked":P=ue;break;case"defaultChecked":ee=ue;break;case"value":p=ue;break;case"defaultValue":A=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,i));break;default:Ut(t,i,l,ue,r,null)}}kr(t,p,A,P,ee,T,f,!1);return;case"select":ut("invalid",t),l=T=p=null;for(f in r)if(r.hasOwnProperty(f)&&(A=r[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":T=A;break;case"multiple":l=A;default:Ut(t,i,f,A,r,null)}i=p,r=T,t.multiple=!!l,i!=null?Ws(t,!!l,i,!1):r!=null&&Ws(t,!!l,r,!0);return;case"textarea":ut("invalid",t),p=f=l=null;for(T in r)if(r.hasOwnProperty(T)&&(A=r[T],A!=null))switch(T){case"value":l=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Ut(t,i,T,A,r,null)}Js(t,l,f,p);return;case"option":for(P in r)r.hasOwnProperty(P)&&(l=r[P],l!=null)&&(P==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Ut(t,i,P,l,r,null));return;case"dialog":ut("beforetoggle",t),ut("toggle",t),ut("cancel",t),ut("close",t);break;case"iframe":case"object":ut("load",t);break;case"video":case"audio":for(l=0;l<hc.length;l++)ut(hc[l],t);break;case"image":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"embed":case"source":case"link":ut("error",t),ut("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in r)if(r.hasOwnProperty(ee)&&(l=r[ee],l!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ut(t,i,ee,l,r,null)}return;default:if(Es(i)){for(ue in r)r.hasOwnProperty(ue)&&(l=r[ue],l!==void 0&&Ph(t,i,ue,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&Ut(t,i,A,l,r,null))}function GS(t,i,r,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,A=null,P=null,ee=null,ue=null;for(le in r){var me=r[le];if(r.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":P=me;default:l.hasOwnProperty(le)||Ut(t,i,le,null,l,me)}}for(var ne in l){var le=l[ne];if(me=r[ne],l.hasOwnProperty(ne)&&(le!=null||me!=null))switch(ne){case"type":p=le;break;case"name":f=le;break;case"checked":ee=le;break;case"defaultChecked":ue=le;break;case"value":T=le;break;case"defaultValue":A=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,i));break;default:le!==me&&Ut(t,i,ne,le,l,me)}}Ks(t,T,A,P,ee,ue,p,f);return;case"select":le=T=A=ne=null;for(p in r)if(P=r[p],r.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":le=P;default:l.hasOwnProperty(p)||Ut(t,i,p,null,l,P)}for(f in l)if(p=l[f],P=r[f],l.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":ne=p;break;case"defaultValue":A=p;break;case"multiple":T=p;default:p!==P&&Ut(t,i,f,p,l,P)}i=A,r=T,l=le,ne!=null?Ws(t,!!r,ne,!1):!!l!=!!r&&(i!=null?Ws(t,!!r,i,!0):Ws(t,!!r,r?[]:"",!1));return;case"textarea":le=ne=null;for(A in r)if(f=r[A],r.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ut(t,i,A,null,l,f)}for(T in l)if(f=l[T],p=r[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":ne=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&Ut(t,i,T,f,l,p)}jr(t,ne,le);return;case"option":for(var De in r)ne=r[De],r.hasOwnProperty(De)&&ne!=null&&!l.hasOwnProperty(De)&&(De==="selected"?t.selected=!1:Ut(t,i,De,null,l,ne));for(P in l)ne=l[P],le=r[P],l.hasOwnProperty(P)&&ne!==le&&(ne!=null||le!=null)&&(P==="selected"?t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":Ut(t,i,P,ne,l,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in r)ne=r[$e],r.hasOwnProperty($e)&&ne!=null&&!l.hasOwnProperty($e)&&Ut(t,i,$e,null,l,ne);for(ee in l)if(ne=l[ee],le=r[ee],l.hasOwnProperty(ee)&&ne!==le&&(ne!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:Ut(t,i,ee,ne,l,le)}return;default:if(Es(i)){for(var Vt in r)ne=r[Vt],r.hasOwnProperty(Vt)&&ne!==void 0&&!l.hasOwnProperty(Vt)&&Ph(t,i,Vt,void 0,l,ne);for(ue in l)ne=l[ue],le=r[ue],!l.hasOwnProperty(ue)||ne===le||ne===void 0&&le===void 0||Ph(t,i,ue,ne,l,le);return}}for(var Y in r)ne=r[Y],r.hasOwnProperty(Y)&&ne!=null&&!l.hasOwnProperty(Y)&&Ut(t,i,Y,null,l,ne);for(me in l)ne=l[me],le=r[me],!l.hasOwnProperty(me)||ne===le||ne==null&&le==null||Ut(t,i,me,ne,l,le)}function tE(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],p=f.transferSize,T=f.initiatorType,A=f.duration;if(p&&A&&tE(T)){for(T=0,A=f.responseEnd,l+=1;l<r.length;l++){var P=r[l],ee=P.startTime;if(ee>A)break;var ue=P.transferSize,me=P.initiatorType;ue&&tE(me)&&(P=P.responseEnd,T+=ue*(P<A?1:(A-ee)/(P-ee)))}if(--l,i+=8*(p+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Fh=null,zh=null;function Fu(t){return t.nodeType===9?t:t.ownerDocument}function nE(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sE(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Hh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gh=null;function $S(){var t=window.event;return t&&t.type==="popstate"?t===Gh?!1:(Gh=t,!0):(Gh=null,!1)}var iE=typeof setTimeout=="function"?setTimeout:void 0,YS=typeof clearTimeout=="function"?clearTimeout:void 0,aE=typeof Promise=="function"?Promise:void 0,QS=typeof queueMicrotask=="function"?queueMicrotask:typeof aE<"u"?function(t){return aE.resolve(null).then(t).catch(KS)}:iE;function KS(t){setTimeout(function(){throw t})}function ir(t){return t==="head"}function rE(t,i){var r=i,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),rl(i);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")pc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,pc(r);for(var p=r.firstChild;p;){var T=p.nextSibling,A=p.nodeName;p[os]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=T}}else r==="body"&&pc(t.ownerDocument.body);r=f}while(r);rl(i)}function oE(t,i){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Xh(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Xh(r),Ma(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function WS(t,i,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[os])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function JS(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=li(t.nextSibling),t===null))return null;return t}function lE(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=li(t.nextSibling),t===null))return null;return t}function $h(t){return t.data==="$?"||t.data==="$~"}function Yh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ZS(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var l=function(){i(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function li(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Qh=null;function cE(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return li(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function uE(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function dE(t,i,r){switch(i=Fu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function pc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ma(t)}var ci=new Map,fE=new Set;function zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ya=Te.d;Te.d={f:eN,r:tN,D:nN,C:sN,L:iN,m:aN,X:oN,S:rN,M:lN};function eN(){var t=ya.f(),i=Du();return t||i}function tN(t){var i=Un(t);i!==null&&i.tag===5&&i.type==="form"?Cg(i):ya.r(t)}var sl=typeof document>"u"?null:document;function hE(t,i,r){var l=sl;if(l&&typeof i=="string"&&i){var f=Jn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),fE.has(f)||(fE.add(f),t={rel:t,crossOrigin:r,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),zn(i,"link",t),en(i),l.head.appendChild(i)))}}function nN(t){ya.D(t),hE("dns-prefetch",t,null)}function sN(t,i){ya.C(t,i),hE("preconnect",t,i)}function iN(t,i,r){ya.L(t,i,r);var l=sl;if(l&&t&&i){var f='link[rel="preload"][as="'+Jn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Jn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Jn(r.imageSizes)+'"]')):f+='[href="'+Jn(t)+'"]';var p=f;switch(i){case"style":p=il(t);break;case"script":p=al(t)}ci.has(p)||(t=w({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),ci.set(p,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(_c(p))||i==="script"&&l.querySelector(gc(p))||(i=l.createElement("link"),zn(i,"link",t),en(i),l.head.appendChild(i)))}}function aN(t,i){ya.m(t,i);var r=sl;if(r&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Jn(l)+'"][href="'+Jn(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=al(t)}if(!ci.has(p)&&(t=w({rel:"modulepreload",href:t},i),ci.set(p,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(gc(p)))return}l=r.createElement("link"),zn(l,"link",t),en(l),r.head.appendChild(l)}}}function rN(t,i,r){ya.S(t,i,r);var l=sl;if(l&&t){var f=Ds(l).hoistableStyles,p=il(t);i=i||"default";var T=f.get(p);if(!T){var A={loading:0,preload:null};if(T=l.querySelector(_c(p)))A.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},r),(r=ci.get(p))&&Kh(t,r);var P=T=l.createElement("link");en(P),zn(P,"link",t),P._p=new Promise(function(ee,ue){P.onload=ee,P.onerror=ue}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Hu(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:A},f.set(p,T)}}}function oN(t,i){ya.X(t,i);var r=sl;if(r&&t){var l=Ds(r).hoistableScripts,f=al(t),p=l.get(f);p||(p=r.querySelector(gc(f)),p||(t=w({src:t,async:!0},i),(i=ci.get(f))&&Wh(t,i),p=r.createElement("script"),en(p),zn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function lN(t,i){ya.M(t,i);var r=sl;if(r&&t){var l=Ds(r).hoistableScripts,f=al(t),p=l.get(f);p||(p=r.querySelector(gc(f)),p||(t=w({src:t,async:!0,type:"module"},i),(i=ci.get(f))&&Wh(t,i),p=r.createElement("script"),en(p),zn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function mE(t,i,r,l){var f=(f=xe.current)?zu(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=il(r.href),r=Ds(f).hoistableStyles,l=r.get(i),l||(l={type:"style",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=il(r.href);var p=Ds(f).hoistableStyles,T=p.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=f.querySelector(_c(t)))&&!p._p&&(T.instance=p,T.state.loading=5),ci.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ci.set(t,r),p||cN(f,t,r,T.state))),i&&l===null)throw Error(a(528,""));return T}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=al(r),r=Ds(f).hoistableScripts,l=r.get(i),l||(l={type:"script",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function il(t){return'href="'+Jn(t)+'"'}function _c(t){return'link[rel="stylesheet"]['+t+"]"}function pE(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function cN(t,i,r,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),zn(i,"link",r),en(i),t.head.appendChild(i))}function al(t){return'[src="'+Jn(t)+'"]'}function gc(t){return"script[async]"+t}function _E(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Jn(r.href)+'"]');if(l)return i.instance=l,en(l),l;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),en(l),zn(l,"style",f),Hu(l,r.precedence,t),i.instance=l;case"stylesheet":f=il(r.href);var p=t.querySelector(_c(f));if(p)return i.state.loading|=4,i.instance=p,en(p),p;l=pE(r),(f=ci.get(f))&&Kh(l,f),p=(t.ownerDocument||t).createElement("link"),en(p);var T=p;return T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),zn(p,"link",l),i.state.loading|=4,Hu(p,r.precedence,t),i.instance=p;case"script":return p=al(r.src),(f=t.querySelector(gc(p)))?(i.instance=f,en(f),f):(l=r,(f=ci.get(p))&&(l=w({},r),Wh(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),en(f),zn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Hu(l,r.precedence,t));return i.instance}function Hu(t,i,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var A=l[T];if(A.dataset.precedence===i)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Kh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Wh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Gu=null;function gE(t,i,r){if(Gu===null){var l=new Map,f=Gu=new Map;f.set(r,l)}else f=Gu,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var p=r[f];if(!(p[os]||p[ft]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=t+T;var A=l.get(T);A?A.push(p):l.set(T,[p])}}return l}function yE(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function uN(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function EE(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function dN(t,i,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=il(l.href),p=i.querySelector(_c(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Xu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=p,en(p);return}p=i.ownerDocument||i,l=pE(l),(f=ci.get(f))&&Kh(l,f),p=p.createElement("link"),en(p);var T=p;T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),zn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Xu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var Jh=0;function fN(t,i){return t.stylesheets&&t.count===0&&Yu(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&Jh===0&&(Jh=62500*XS());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Jh?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Yu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,i.forEach(hN,t),$u=null,Xu.call(t))}function hN(t,i){if(!(i.state.loading&4)){var r=$u.get(t);if(r)var l=r.get(null);else{r=new Map,$u.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),l=T)}l&&r.set(null,l)}f=i.instance,T=f.getAttribute("data-precedence"),p=r.get(T)||l,p===l&&r.set(null,f),r.set(T,f),this.count++,l=Xu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var yc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function mN(t,i,r,l,f,p,T,A,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_s(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_s(0),this.hiddenUpdates=_s(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function vE(t,i,r,l,f,p,T,A,P,ee,ue,me){return t=new mN(t,i,r,T,P,ee,ue,me,A),i=1,p===!0&&(i|=24),p=Vs(3,null,null,i),t.current=p,p.stateNode=t,i=kf(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:i},Of(p),t}function TE(t){return t?(t=Mo,t):Mo}function bE(t,i,r,l,f,p){f=TE(f),l.context===null?l.context=f:l.pendingContext=f,l=$a(i),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=Ya(t,l,i),r!==null&&(xs(r,t,i),Kl(r,t,i))}function SE(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function Zh(t,i){SE(t,i),(t=t.alternate)&&SE(t,i)}function NE(t){if(t.tag===13||t.tag===31){var i=Pr(t,67108864);i!==null&&xs(i,t,67108864),Zh(t,67108864)}}function wE(t){if(t.tag===13||t.tag===31){var i=zs();i=Ai(i);var r=Pr(t,i);r!==null&&xs(r,t,i),Zh(t,i)}}var Qu=!0;function pN(t,i,r,l){var f=se.T;se.T=null;var p=Te.p;try{Te.p=2,em(t,i,r,l)}finally{Te.p=p,se.T=f}}function _N(t,i,r,l){var f=se.T;se.T=null;var p=Te.p;try{Te.p=8,em(t,i,r,l)}finally{Te.p=p,se.T=f}}function em(t,i,r,l){if(Qu){var f=tm(l);if(f===null)Bh(t,i,l,Ku,r),AE(t,l);else if(yN(f,t,i,r,l))l.stopPropagation();else if(AE(t,l),i&4&&-1<gN.indexOf(t)){for(;f!==null;){var p=Un(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Ls(p.pendingLanes);if(T!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var P=1<<31-Xt(T);A.entanglements[1]|=P,T&=~P}qi(p),(Rt&6)===0&&(Lu=On()+500,fc(0))}}break;case 31:case 13:A=Pr(p,2),A!==null&&xs(A,p,2),Du(),Zh(p,2)}if(p=tm(l),p===null&&Bh(t,i,l,Ku,r),p===f)break;f=p}f!==null&&l.stopPropagation()}else Bh(t,i,l,null,r)}}function tm(t){return t=Ce(t),nm(t)}var Ku=null;function nm(t){if(Ku=null,t=cn(t),t!==null){var i=u(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=h(i),t!==null)return t;t=null}else if(r===31){if(t=g(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ku=t,null}function xE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fi()){case hi:return 2;case is:return 8;case mi:case go:return 32;case wr:return 268435456;default:return 32}default:return 32}}var sm=!1,ar=null,rr=null,or=null,Ec=new Map,vc=new Map,lr=[],gN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AE(t,i){switch(t){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":Ec.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(i.pointerId)}}function Tc(t,i,r,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Un(i),i!==null&&NE(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function yN(t,i,r,l,f){switch(i){case"focusin":return ar=Tc(ar,t,i,r,l,f),!0;case"dragenter":return rr=Tc(rr,t,i,r,l,f),!0;case"mouseover":return or=Tc(or,t,i,r,l,f),!0;case"pointerover":var p=f.pointerId;return Ec.set(p,Tc(Ec.get(p)||null,t,i,r,l,f)),!0;case"gotpointercapture":return p=f.pointerId,vc.set(p,Tc(vc.get(p)||null,t,i,r,l,f)),!0}return!1}function RE(t){var i=cn(t.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=h(r),i!==null){t.blockedOn=i,gs(t.priority,function(){wE(r)});return}}else if(i===31){if(i=g(r),i!==null){t.blockedOn=i,gs(t.priority,function(){wE(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=tm(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);Dr=l,r.target.dispatchEvent(l),Dr=null}else return i=Un(r),i!==null&&NE(i),t.blockedOn=r,!1;i.shift()}return!0}function CE(t,i,r){Wu(t)&&r.delete(i)}function EN(){sm=!1,ar!==null&&Wu(ar)&&(ar=null),rr!==null&&Wu(rr)&&(rr=null),or!==null&&Wu(or)&&(or=null),Ec.forEach(CE),vc.forEach(CE)}function Ju(t,i){t.blockedOn===i&&(t.blockedOn=null,sm||(sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,EN)))}var Zu=null;function IE(t){Zu!==t&&(Zu=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zu===t&&(Zu=null);for(var i=0;i<t.length;i+=3){var r=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(nm(l||r)===null)continue;break}var p=Un(r);p!==null&&(t.splice(i,3),i-=3,th(p,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function rl(t){function i(P){return Ju(P,t)}ar!==null&&Ju(ar,t),rr!==null&&Ju(rr,t),or!==null&&Ju(or,t),Ec.forEach(i),vc.forEach(i);for(var r=0;r<lr.length;r++){var l=lr[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<lr.length&&(r=lr[0],r.blockedOn===null);)RE(r),r.blockedOn===null&&lr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],p=r[l+1],T=f[ln]||null;if(typeof p=="function")T||IE(r);else if(T){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[ln]||null)A=T.formAction;else if(nm(f)!==null)continue}else A=T.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),IE(r)}}}function kE(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function im(t){this._internalRoot=t}ed.prototype.render=im.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,l=zs();bE(r,l,t,i,null,null)},ed.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;bE(t.current,2,null,t,null,null),Du(),i[$s]=null}};function ed(t){this._internalRoot=t}ed.prototype.unstable_scheduleHydration=function(t){if(t){var i=Rr();t={blockedOn:null,target:t,priority:i};for(var r=0;r<lr.length&&i!==0&&i<lr[r].priority;r++);lr.splice(r,0,t),r===0&&RE(t)}};var LE=e.version;if(LE!=="19.2.4")throw Error(a(527,LE,"19.2.4"));Te.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var vN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Is=td.inject(vN),Be=td}catch{}}return Sc.createRoot=function(t,i){if(!o(t))throw Error(a(299));var r=!1,l="",f=qg,p=Bg,T=Pg;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=vE(t,1,!1,null,null,r,l,null,f,p,T,kE),t[$s]=i.current,qh(t),new im(i)},Sc.hydrateRoot=function(t,i,r){if(!o(t))throw Error(a(299));var l=!1,f="",p=qg,T=Bg,A=Pg,P=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(P=r.formState)),i=vE(t,1,!0,i,r??null,l,f,P,p,T,A,kE),i.context=TE(null),r=i.current,l=zs(),l=Ai(l),f=$a(l),f.callback=null,Ya(r,f,l),r=l,i.current.lanes=r,pi(i,r),qi(i),t[$s]=i.current,qh(t),new ed(i)},Sc.version="19.2.4",Sc}var FE;function LN(){if(FE)return om.exports;FE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),om.exports=kN(),om.exports}var jN=LN(),dm={exports:{}};const DN={},ON=Object.freeze(Object.defineProperty({__proto__:null,default:DN},Symbol.toStringTag,{value:"Module"})),zE=SN(ON);var HE;function MN(){return HE||(HE=1,(function(n,e){var s=void 0,a=function(o){return s||(s=new Promise(function(u,h){var g=typeof o<"u"?o:{},E=g.onAbort;g.onAbort=function(m){h(new Error(m)),E&&E(m)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),n=void 0;var _;_||=typeof g<"u"?g:{};var S=typeof window=="object",w=typeof WorkerGlobalScope<"u",x=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";_.onRuntimeInitialized=function(){function m(Q,he){switch(typeof he){case"boolean":Ne(Q,he?1:0);break;case"number":b(Q,he);break;case"string":J(Q,he,-1,-1);break;case"object":if(he===null)I(Q);else if(he.length!=null){var Ae=ki(he,Ii);re(Q,Ae,he.length,-1),ds(Ae)}else We(Q,"Wrong API use : tried to return a value of an unknown type ("+he+").",-1);break;default:I(Q)}}function y(Q,he){for(var Ae=[],Me=0;Me<Q;Me+=1){var Xe=hn(he+4*Me,"i32"),ht=Io(Xe);if(ht===1||ht===2)Xe=v(Xe);else if(ht===3)Xe=yi(Xe);else if(ht===4){ht=Xe,Xe=ko(ht),ht=d(ht);for(var kn=new Uint8Array(Xe),Ts=0;Ts<Xe;Ts+=1)kn[Ts]=q[ht+Ts];Xe=kn}else Xe=null;Ae.push(Xe)}return Ae}function N(Q,he){this.Qa=Q,this.db=he,this.Oa=1,this.lb=[]}function C(Q,he){if(this.db=he,he=hi(Q)+1,this.eb=Zs(he),this.eb===null)throw Error("Unable to allocate memory for the SQL string");is(Q,R,this.eb,he),this.kb=this.eb,this.Za=this.pb=null}function F(Q){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),Q!=null){var he=this.filename,Ae="/",Me=he;if(Ae&&(Ae=typeof Ae=="string"?Ae:_s(Ae),Me=he?Kt(Ae+"/"+he):Ae),he=as(!0,!0),Me=Ma(Me,he),Q){if(typeof Q=="string"){Ae=Array(Q.length);for(var Xe=0,ht=Q.length;Xe<ht;++Xe)Ae[Xe]=Q.charCodeAt(Xe);Q=Ae}ls(Me,he|146),Ae=Ys(Me,577),Wi(Ae,Q,0,Q.length,0),Ki(Ae),ls(Me,he)}}this.handleError(je(this.filename,W)),this.db=hn(W,"i32"),Tt(this.db),this.fb={},this.Sa={}}var W=pn(4),ce=_.cwrap,je=ce("sqlite3_open","number",["string","number"]),Fe=ce("sqlite3_close_v2","number",["number"]),Ye=ce("sqlite3_exec","number",["number","string","number","number","number"]),Nt=ce("sqlite3_changes","number",["number"]),tn=ce("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ba=ce("sqlite3_sql","string",["number"]),ji=ce("sqlite3_normalized_sql","string",["number"]),ea=ce("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ei=ce("sqlite3_bind_text","number",["number","number","number","number","number"]),ta=ce("sqlite3_bind_blob","number",["number","number","number","number","number"]),Or=ce("sqlite3_bind_double","number",["number","number","number"]),na=ce("sqlite3_bind_int","number",["number","number","number"]),bo=ce("sqlite3_bind_parameter_index","number",["number","string"]),So=ce("sqlite3_step","number",["number"]),sa=ce("sqlite3_errmsg","string",["number"]),Mr=ce("sqlite3_column_count","number",["number"]),No=ce("sqlite3_data_count","number",["number"]),Pa=ce("sqlite3_column_double","number",["number","number"]),Ur=ce("sqlite3_column_text","string",["number","number"]),wo=ce("sqlite3_column_blob","number",["number","number"]),ti=ce("sqlite3_column_bytes","number",["number","number"]),xo=ce("sqlite3_column_type","number",["number","number"]),Ao=ce("sqlite3_column_name","string",["number","number"]),Ro=ce("sqlite3_reset","number",["number"]),Co=ce("sqlite3_clear_bindings","number",["number"]),Di=ce("sqlite3_finalize","number",["number"]),In=ce("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Io=ce("sqlite3_value_type","number",["number"]),ko=ce("sqlite3_value_bytes","number",["number"]),yi=ce("sqlite3_value_text","string",["number"]),d=ce("sqlite3_value_blob","number",["number"]),v=ce("sqlite3_value_double","number",["number"]),b=ce("sqlite3_result_double","",["number","number"]),I=ce("sqlite3_result_null","",["number"]),J=ce("sqlite3_result_text","",["number","string","number","number"]),re=ce("sqlite3_result_blob","",["number","number","number","number"]),Ne=ce("sqlite3_result_int","",["number","number"]),We=ce("sqlite3_result_error","",["number","string","number"]),Wt=ce("sqlite3_aggregate_context","number",["number","number"]),Tt=ce("RegisterExtensionFunctions","number",["number"]),Bt=ce("sqlite3_update_hook","number",["number","number","number"]);N.prototype.bind=function(Q){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(Q)?this.Cb(Q):Q!=null&&typeof Q=="object"?this.Db(Q):!0},N.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var Q=So(this.Qa);switch(Q){case 100:return!0;case 101:return!1;default:throw this.db.handleError(Q)}},N.prototype.wb=function(Q){return Q==null&&(Q=this.Oa,this.Oa+=1),Pa(this.Qa,Q)},N.prototype.Gb=function(Q){if(Q==null&&(Q=this.Oa,this.Oa+=1),Q=Ur(this.Qa,Q),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(Q)},N.prototype.Hb=function(Q){return Q==null&&(Q=this.Oa,this.Oa+=1),Ur(this.Qa,Q)},N.prototype.getBlob=function(Q){Q==null&&(Q=this.Oa,this.Oa+=1);var he=ti(this.Qa,Q);Q=wo(this.Qa,Q);for(var Ae=new Uint8Array(he),Me=0;Me<he;Me+=1)Ae[Me]=q[Q+Me];return Ae},N.prototype.get=function(Q,he){he=he||{},Q!=null&&this.bind(Q)&&this.step(),Q=[];for(var Ae=No(this.Qa),Me=0;Me<Ae;Me+=1)switch(xo(this.Qa,Me)){case 1:var Xe=he.useBigInt?this.Gb(Me):this.wb(Me);Q.push(Xe);break;case 2:Q.push(this.wb(Me));break;case 3:Q.push(this.Hb(Me));break;case 4:Q.push(this.getBlob(Me));break;default:Q.push(null)}return Q},N.prototype.getColumnNames=function(){for(var Q=[],he=Mr(this.Qa),Ae=0;Ae<he;Ae+=1)Q.push(Ao(this.Qa,Ae));return Q},N.prototype.getAsObject=function(Q,he){Q=this.get(Q,he),he=this.getColumnNames();for(var Ae={},Me=0;Me<he.length;Me+=1)Ae[he[Me]]=Q[Me];return Ae},N.prototype.getSQL=function(){return Ba(this.Qa)},N.prototype.getNormalizedSQL=function(){return ji(this.Qa)},N.prototype.run=function(Q){return Q!=null&&this.bind(Q),this.step(),this.reset()},N.prototype.sb=function(Q,he){he==null&&(he=this.Oa,this.Oa+=1),Q=mi(Q);var Ae=ki(Q,Ii);this.lb.push(Ae),this.db.handleError(ei(this.Qa,he,Ae,Q.length-1,0))},N.prototype.Bb=function(Q,he){he==null&&(he=this.Oa,this.Oa+=1);var Ae=ki(Q,Ii);this.lb.push(Ae),this.db.handleError(ta(this.Qa,he,Ae,Q.length,0))},N.prototype.rb=function(Q,he){he==null&&(he=this.Oa,this.Oa+=1),this.db.handleError((Q===(Q|0)?na:Or)(this.Qa,he,Q))},N.prototype.Eb=function(Q){Q==null&&(Q=this.Oa,this.Oa+=1),ta(this.Qa,Q,0,0,0)},N.prototype.tb=function(Q,he){switch(he==null&&(he=this.Oa,this.Oa+=1),typeof Q){case"string":this.sb(Q,he);return;case"number":this.rb(Q,he);return;case"bigint":this.sb(Q.toString(),he);return;case"boolean":this.rb(Q+0,he);return;case"object":if(Q===null){this.Eb(he);return}if(Q.length!=null){this.Bb(Q,he);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+Q+")."},N.prototype.Db=function(Q){var he=this;return Object.keys(Q).forEach(function(Ae){var Me=bo(he.Qa,Ae);Me!==0&&he.tb(Q[Ae],Me)}),!0},N.prototype.Cb=function(Q){for(var he=0;he<Q.length;he+=1)this.tb(Q[he],he+1);return!0},N.prototype.reset=function(){return this.freemem(),Co(this.Qa)===0&&Ro(this.Qa)===0},N.prototype.freemem=function(){for(var Q;(Q=this.lb.pop())!==void 0;)ds(Q)},N.prototype.free=function(){this.freemem();var Q=Di(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,Q},C.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var Q=Cn(),he=pn(4);Yn(W),Yn(he);try{this.db.handleError(ea(this.db.db,this.kb,-1,W,he)),this.kb=hn(he,"i32");var Ae=hn(W,"i32");return Ae===0?(this.mb(),{done:!0}):(this.Za=new N(Ae,this.db),this.db.fb[Ae]=this.Za,{value:this.Za,done:!1})}catch(Me){throw this.pb=Qi(this.kb),this.mb(),Me}finally{vs(Q)}},C.prototype.mb=function(){ds(this.eb),this.eb=null},C.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Qi(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(C.prototype[Symbol.iterator]=function(){return this}),F.prototype.run=function(Q,he){if(!this.db)throw"Database closed";if(he){Q=this.prepare(Q,he);try{Q.step()}finally{Q.free()}}else this.handleError(Ye(this.db,Q,0,0,W));return this},F.prototype.exec=function(Q,he,Ae){if(!this.db)throw"Database closed";var Me=Cn(),Xe=null;try{var ht=An(Q),kn=pn(4);for(Q=[];hn(ht,"i8")!==0;){Yn(W),Yn(kn),this.handleError(ea(this.db,ht,-1,W,kn));var Ts=hn(W,"i32");if(ht=hn(kn,"i32"),Ts!==0){var fs=null;for(Xe=new N(Ts,this),he!=null&&Xe.bind(he);Xe.step();)fs===null&&(fs={columns:Xe.getColumnNames(),values:[]},Q.push(fs)),fs.values.push(Xe.get(null,Ae));Xe.free()}}return Q}catch(Ms){throw Xe&&Xe.free(),Ms}finally{vs(Me)}},F.prototype.each=function(Q,he,Ae,Me,Xe){typeof he=="function"&&(Me=Ae,Ae=he,he=void 0),Q=this.prepare(Q,he);try{for(;Q.step();)Ae(Q.getAsObject(null,Xe))}finally{Q.free()}if(typeof Me=="function")return Me()},F.prototype.prepare=function(Q,he){if(Yn(W),this.handleError(tn(this.db,Q,-1,W,0)),Q=hn(W,"i32"),Q===0)throw"Nothing to prepare";var Ae=new N(Q,this);return he!=null&&Ae.bind(he),this.fb[Q]=Ae},F.prototype.iterateStatements=function(Q){return new C(Q,this)},F.prototype.export=function(){Object.values(this.fb).forEach(function(he){he.free()}),Object.values(this.Sa).forEach(us),this.Sa={},this.handleError(Fe(this.db));var Q=cs(this.filename);return this.handleError(je(this.filename,W)),this.db=hn(W,"i32"),Tt(this.db),Q},F.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(Q){Q.free()}),Object.values(this.Sa).forEach(us),this.Sa={},this.Ya&&(us(this.Ya),this.Ya=void 0),this.handleError(Fe(this.db)),en("/"+this.filename),this.db=null)},F.prototype.handleError=function(Q){if(Q===0)return null;throw Q=sa(this.db),Error(Q)},F.prototype.getRowsModified=function(){return Nt(this.db)},F.prototype.create_function=function(Q,he){Object.prototype.hasOwnProperty.call(this.Sa,Q)&&(us(this.Sa[Q]),delete this.Sa[Q]);var Ae=qn(function(Me,Xe,ht){Xe=y(Xe,ht);try{var kn=he.apply(null,Xe)}catch(Ts){We(Me,Ts,-1);return}m(Me,kn)},"viii");return this.Sa[Q]=Ae,this.handleError(In(this.db,Q,he.length,1,0,Ae,0,0,0)),this},F.prototype.create_aggregate=function(Q,he){var Ae=he.init||function(){return null},Me=he.finalize||function(fs){return fs},Xe=he.step;if(!Xe)throw"An aggregate function must have a step function in "+Q;var ht={};Object.hasOwnProperty.call(this.Sa,Q)&&(us(this.Sa[Q]),delete this.Sa[Q]),he=Q+"__finalize",Object.hasOwnProperty.call(this.Sa,he)&&(us(this.Sa[he]),delete this.Sa[he]);var kn=qn(function(fs,Ms,Lo){var Oi=Wt(fs,1);Object.hasOwnProperty.call(ht,Oi)||(ht[Oi]=Ae()),Ms=y(Ms,Lo),Ms=[ht[Oi]].concat(Ms);try{ht[Oi]=Xe.apply(null,Ms)}catch(Vr){delete ht[Oi],We(fs,Vr,-1)}},"viii"),Ts=qn(function(fs){var Ms=Wt(fs,1);try{var Lo=Me(ht[Ms])}catch(Oi){delete ht[Ms],We(fs,Oi,-1);return}m(fs,Lo),delete ht[Ms]},"vi");return this.Sa[Q]=kn,this.Sa[he]=Ts,this.handleError(In(this.db,Q,Xe.length-1,1,0,0,kn,Ts,0)),this},F.prototype.updateHook=function(Q){this.Ya&&(Bt(this.db,0,0),us(this.Ya),this.Ya=void 0),Q&&(this.Ya=qn(function(he,Ae,Me,Xe,ht){switch(Ae){case 18:he="insert";break;case 23:he="update";break;case 9:he="delete";break;default:throw"unknown operationCode in updateHook callback: "+Ae}if(Me=Me?It(R,Me):"",Xe=Xe?It(R,Xe):"",ht>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";Q(he,Me,Xe,Number(ht))},"viiiij"),Bt(this.db,this.Ya,0))},_.Database=F};var B={..._},X="./this.program",V=(m,y)=>{throw y},U="",z,G;if(x){var K=zE;U=__dirname+"/",G=m=>(m=Re(m)?new URL(m):m,K.readFileSync(m)),z=async m=>(m=Re(m)?new URL(m):m,K.readFileSync(m,void 0)),!_.thisProgram&&1<process.argv.length&&(X=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.exports=_,V=(m,y)=>{throw process.exitCode=m,y}}else(S||w)&&(w?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),U=U.startsWith("blob:")?"":U.slice(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1),w&&(G=m=>{var y=new XMLHttpRequest;return y.open("GET",m,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),z=async m=>{if(Re(m))return new Promise((N,C)=>{var F=new XMLHttpRequest;F.open("GET",m,!0),F.responseType="arraybuffer",F.onload=()=>{F.status==200||F.status==0&&F.response?N(F.response):C(F.status)},F.onerror=C,F.send(null)});var y=await fetch(m,{credentials:"same-origin"});if(y.ok)return y.arrayBuffer();throw Error(y.status+" : "+y.url)});var oe=_.print||console.log.bind(console),ye=_.printErr||console.error.bind(console);Object.assign(_,B),B=null,_.thisProgram&&(X=_.thisProgram);var ge=_.wasmBinary,O,j=!1,M,q,R,D,k,we,Je,se,Te,Re=m=>m.startsWith("file://");function rt(){var m=O.buffer;_.HEAP8=q=new Int8Array(m),_.HEAP16=D=new Int16Array(m),_.HEAPU8=R=new Uint8Array(m),_.HEAPU16=new Uint16Array(m),_.HEAP32=k=new Int32Array(m),_.HEAPU32=we=new Uint32Array(m),_.HEAPF32=Je=new Float32Array(m),_.HEAPF64=Te=new Float64Array(m),_.HEAP64=se=new BigInt64Array(m),_.HEAPU64=new BigUint64Array(m)}var at=0,H=null;function de(m){throw _.onAbort?.(m),m="Aborted("+m+")",ye(m),j=!0,new WebAssembly.RuntimeError(m+". Build with -sASSERTIONS for more info.")}var ae;async function Ee(m){if(!ge)try{var y=await z(m);return new Uint8Array(y)}catch{}if(m==ae&&ge)m=new Uint8Array(ge);else if(G)m=G(m);else throw"both async and sync fetching of the wasm failed";return m}async function ie(m,y){try{var N=await Ee(m);return await WebAssembly.instantiate(N,y)}catch(C){ye(`failed to asynchronously prepare wasm: ${C}`),de(C)}}async function xe(m){var y=ae;if(!ge&&typeof WebAssembly.instantiateStreaming=="function"&&!Re(y)&&!x)try{var N=fetch(y,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(N,m)}catch(C){ye(`wasm streaming compile failed: ${C}`),ye("falling back to ArrayBuffer instantiation")}return ie(y,m)}class Pe{name="ExitStatus";constructor(y){this.message=`Program terminated with exit(${y})`,this.status=y}}var wt=m=>{for(;0<m.length;)m.shift()(_)},yt=[],on=[],ps=()=>{var m=_.preRun.shift();on.unshift(m)};function hn(m,y="i8"){switch(y.endsWith("*")&&(y="*"),y){case"i1":return q[m];case"i8":return q[m];case"i16":return D[m>>1];case"i32":return k[m>>2];case"i64":return se[m>>3];case"float":return Je[m>>2];case"double":return Te[m>>3];case"*":return we[m>>2];default:de(`invalid type for getValue: ${y}`)}}var wi=_.noExitRuntime||!0;function Yn(m){var y="i32";switch(y.endsWith("*")&&(y="*"),y){case"i1":q[m]=0;break;case"i8":q[m]=0;break;case"i16":D[m>>1]=0;break;case"i32":k[m>>2]=0;break;case"i64":se[m>>3]=BigInt(0);break;case"float":Je[m>>2]=0;break;case"double":Te[m>>3]=0;break;case"*":we[m>>2]=0;break;default:de(`invalid type for setValue: ${y}`)}}var La=typeof TextDecoder<"u"?new TextDecoder:void 0,It=(m,y=0,N=NaN)=>{var C=y+N;for(N=y;m[N]&&!(N>=C);)++N;if(16<N-y&&m.buffer&&La)return La.decode(m.subarray(y,N));for(C="";y<N;){var F=m[y++];if(F&128){var W=m[y++]&63;if((F&224)==192)C+=String.fromCharCode((F&31)<<6|W);else{var ce=m[y++]&63;F=(F&240)==224?(F&15)<<12|W<<6|ce:(F&7)<<18|W<<12|ce<<6|m[y++]&63,65536>F?C+=String.fromCharCode(F):(F-=65536,C+=String.fromCharCode(55296|F>>10,56320|F&1023))}}else C+=String.fromCharCode(F)}return C},Qi=(m,y)=>m?It(R,m,y):"",ja=(m,y)=>{for(var N=0,C=m.length-1;0<=C;C--){var F=m[C];F==="."?m.splice(C,1):F===".."?(m.splice(C,1),N++):N&&(m.splice(C,1),N--)}if(y)for(;N;N--)m.unshift("..");return m},Kt=m=>{var y=m.charAt(0)==="/",N=m.slice(-1)==="/";return(m=ja(m.split("/").filter(C=>!!C),!y).join("/"))||y||(m="."),m&&N&&(m+="/"),(y?"/":"")+m},sn=m=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(m).slice(1);return m=y[0],y=y[1],!m&&!y?".":(y&&=y.slice(0,-1),m+y)},Cs=m=>m&&m.match(/([^\/]+|\/)\/*$/)[1],Vl=()=>{if(x){var m=zE;return y=>m.randomFillSync(y)}return y=>crypto.getRandomValues(y)},Nr=m=>{(Nr=Vl())(m)},On=(...m)=>{for(var y="",N=!1,C=m.length-1;-1<=C&&!N;C--){if(N=0<=C?m[C]:"/",typeof N!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!N)return"";y=N+"/"+y,N=N.charAt(0)==="/"}return y=ja(y.split("/").filter(F=>!!F),!N).join("/"),(N?"/":"")+y||"."},fi=[],hi=m=>{for(var y=0,N=0;N<m.length;++N){var C=m.charCodeAt(N);127>=C?y++:2047>=C?y+=2:55296<=C&&57343>=C?(y+=4,++N):y+=3}return y},is=(m,y,N,C)=>{if(!(0<C))return 0;var F=N;C=N+C-1;for(var W=0;W<m.length;++W){var ce=m.charCodeAt(W);if(55296<=ce&&57343>=ce){var je=m.charCodeAt(++W);ce=65536+((ce&1023)<<10)|je&1023}if(127>=ce){if(N>=C)break;y[N++]=ce}else{if(2047>=ce){if(N+1>=C)break;y[N++]=192|ce>>6}else{if(65535>=ce){if(N+2>=C)break;y[N++]=224|ce>>12}else{if(N+3>=C)break;y[N++]=240|ce>>18,y[N++]=128|ce>>12&63}y[N++]=128|ce>>6&63}y[N++]=128|ce&63}}return y[N]=0,N-F},mi=(m,y)=>{var N=Array(hi(m)+1);return m=is(m,N,0,N.length),y&&(N.length=m),N},go=[];function wr(m,y){go[m]={input:[],output:[],cb:y},Oa(m,yo)}var yo={open(m){var y=go[m.node.rdev];if(!y)throw new be(43);m.tty=y,m.seekable=!1},close(m){m.tty.cb.fsync(m.tty)},fsync(m){m.tty.cb.fsync(m.tty)},read(m,y,N,C){if(!m.tty||!m.tty.cb.xb)throw new be(60);for(var F=0,W=0;W<C;W++){try{var ce=m.tty.cb.xb(m.tty)}catch{throw new be(29)}if(ce===void 0&&F===0)throw new be(6);if(ce==null)break;F++,y[N+W]=ce}return F&&(m.node.atime=Date.now()),F},write(m,y,N,C){if(!m.tty||!m.tty.cb.qb)throw new be(60);try{for(var F=0;F<C;F++)m.tty.cb.qb(m.tty,y[N+F])}catch{throw new be(29)}return C&&(m.node.mtime=m.node.ctime=Date.now()),F}},Eo={xb(){e:{if(!fi.length){var m=null;if(x){var y=Buffer.alloc(256),N=0,C=process.stdin.fd;try{N=K.readSync(C,y,0,256)}catch(F){if(F.toString().includes("EOF"))N=0;else throw F}0<N&&(m=y.slice(0,N).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(m=window.prompt("Input: "),m!==null&&(m+=`
`));if(!m){m=null;break e}fi=mi(m,!0)}m=fi.shift()}return m},qb(m,y){y===null||y===10?(oe(It(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(oe(It(m.output)),m.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Is={qb(m,y){y===null||y===10?(ye(It(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(ye(It(m.output)),m.output=[])}},Be={Wa:null,Xa(){return Be.createNode(null,"/",16895,0)},createNode(m,y,N,C){if((N&61440)===24576||(N&61440)===4096)throw new be(63);return Be.Wa||(Be.Wa={dir:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua,lookup:Be.La.lookup,hb:Be.La.hb,rename:Be.La.rename,unlink:Be.La.unlink,rmdir:Be.La.rmdir,readdir:Be.La.readdir,symlink:Be.La.symlink},stream:{Va:Be.Ma.Va}},file:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua},stream:{Va:Be.Ma.Va,read:Be.Ma.read,write:Be.Ma.write,ib:Be.Ma.ib,jb:Be.Ma.jb}},link:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua,readlink:Be.La.readlink},stream:{}},ub:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua},stream:Bl}}),N=Da(m,y,N,C),mn(N.mode)?(N.La=Be.Wa.dir.node,N.Ma=Be.Wa.dir.stream,N.Na={}):(N.mode&61440)===32768?(N.La=Be.Wa.file.node,N.Ma=Be.Wa.file.stream,N.Ra=0,N.Na=null):(N.mode&61440)===40960?(N.La=Be.Wa.link.node,N.Ma=Be.Wa.link.stream):(N.mode&61440)===8192&&(N.La=Be.Wa.ub.node,N.Ma=Be.Wa.ub.stream),N.atime=N.mtime=N.ctime=Date.now(),m&&(m.Na[y]=N,m.atime=m.mtime=m.ctime=N.atime),N},Sb(m){return m.Na?m.Na.subarray?m.Na.subarray(0,m.Ra):new Uint8Array(m.Na):new Uint8Array(0)},La:{Ta(m){var y={};return y.dev=(m.mode&61440)===8192?m.id:1,y.ino=m.id,y.mode=m.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=m.rdev,mn(m.mode)?y.size=4096:(m.mode&61440)===32768?y.size=m.Ra:(m.mode&61440)===40960?y.size=m.link.length:y.size=0,y.atime=new Date(m.atime),y.mtime=new Date(m.mtime),y.ctime=new Date(m.ctime),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},Ua(m,y){for(var N of["mode","atime","mtime","ctime"])y[N]!=null&&(m[N]=y[N]);y.size!==void 0&&(y=y.size,m.Ra!=y&&(y==0?(m.Na=null,m.Ra=0):(N=m.Na,m.Na=new Uint8Array(y),N&&m.Na.set(N.subarray(0,Math.min(y,m.Ra))),m.Ra=y)))},lookup(){throw Be.vb},hb(m,y,N,C){return Be.createNode(m,y,N,C)},rename(m,y,N){try{var C=rs(y,N)}catch{}if(C){if(mn(m.mode))for(var F in C.Na)throw new be(55);Ar(C)}delete m.parent.Na[m.name],y.Na[N]=m,m.name=N,y.ctime=y.mtime=m.parent.ctime=m.parent.mtime=Date.now()},unlink(m,y){delete m.Na[y],m.ctime=m.mtime=Date.now()},rmdir(m,y){var N=rs(m,y),C;for(C in N.Na)throw new be(55);delete m.Na[y],m.ctime=m.mtime=Date.now()},readdir(m){return[".","..",...Object.keys(m.Na)]},symlink(m,y,N){return m=Be.createNode(m,y,41471,0),m.link=N,m},readlink(m){if((m.mode&61440)!==40960)throw new be(28);return m.link}},Ma:{read(m,y,N,C,F){var W=m.node.Na;if(F>=m.node.Ra)return 0;if(m=Math.min(m.node.Ra-F,C),8<m&&W.subarray)y.set(W.subarray(F,F+m),N);else for(C=0;C<m;C++)y[N+C]=W[F+C];return m},write(m,y,N,C,F,W){if(y.buffer===q.buffer&&(W=!1),!C)return 0;if(m=m.node,m.mtime=m.ctime=Date.now(),y.subarray&&(!m.Na||m.Na.subarray)){if(W)return m.Na=y.subarray(N,N+C),m.Ra=C;if(m.Ra===0&&F===0)return m.Na=y.slice(N,N+C),m.Ra=C;if(F+C<=m.Ra)return m.Na.set(y.subarray(N,N+C),F),C}W=F+C;var ce=m.Na?m.Na.length:0;if(ce>=W||(W=Math.max(W,ce*(1048576>ce?2:1.125)>>>0),ce!=0&&(W=Math.max(W,256)),ce=m.Na,m.Na=new Uint8Array(W),0<m.Ra&&m.Na.set(ce.subarray(0,m.Ra),0)),m.Na.subarray&&y.subarray)m.Na.set(y.subarray(N,N+C),F);else for(W=0;W<C;W++)m.Na[F+W]=y[N+W];return m.Ra=Math.max(m.Ra,F+C),C},Va(m,y,N){if(N===1?y+=m.position:N===2&&(m.node.mode&61440)===32768&&(y+=m.node.Ra),0>y)throw new be(28);return y},ib(m,y,N,C,F){if((m.node.mode&61440)!==32768)throw new be(43);if(m=m.node.Na,F&2||!m||m.buffer!==q.buffer){F=!0,C=65536*Math.ceil(y/65536);var W=Li(65536,C);if(W&&R.fill(0,W,W+C),C=W,!C)throw new be(48);m&&((0<N||N+y<m.length)&&(m.subarray?m=m.subarray(N,N+y):m=Array.prototype.slice.call(m,N,N+y)),q.set(m,C))}else F=!1,C=m.byteOffset;return{Kb:C,Ab:F}},jb(m,y,N,C){return Be.Ma.write(m,y,0,C,N,!1),0}}},as=(m,y)=>{var N=0;return m&&(N|=365),y&&(N|=146),N},Xt=null,xr={},ks=[],vo=1,Sn=null,xi=!1,Zt=!0,Ls={},be=class{name="ErrnoError";constructor(m){this.Pa=m}},js=class{gb={};node=null;get flags(){return this.gb.flags}set flags(m){this.gb.flags=m}get position(){return this.gb.position}set position(m){this.gb.position=m}},ql=class{La={};Ma={};ab=null;constructor(m,y,N,C){m||=this,this.parent=m,this.Xa=m.Xa,this.id=vo++,this.name=y,this.mode=N,this.rdev=C,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(m){m?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(m){m?this.mode|=146:this.mode&=-147}};function Mn(m,y={}){if(!m)throw new be(44);y.nb??(y.nb=!0),m.charAt(0)==="/"||(m="//"+m);var N=0;e:for(;40>N;N++){m=m.split("/").filter(je=>!!je);for(var C=Xt,F="/",W=0;W<m.length;W++){var ce=W===m.length-1;if(ce&&y.parent)break;if(m[W]!==".")if(m[W]==="..")F=sn(F),C=C.parent;else{F=Kt(F+"/"+m[W]);try{C=rs(C,m[W])}catch(je){if(je?.Pa===44&&ce&&y.Jb)return{path:F};throw je}if(!C.ab||ce&&!y.nb||(C=C.ab.root),(C.mode&61440)===40960&&(!ce||y.$a)){if(!C.La.readlink)throw new be(52);C=C.La.readlink(C),C.charAt(0)==="/"||(C=sn(F)+"/"+C),m=C+"/"+m.slice(W+1).join("/");continue e}}}return{path:F,node:C}}throw new be(32)}function _s(m){for(var y;;){if(m===m.parent)return m=m.Xa.zb,y?m[m.length-1]!=="/"?`${m}/${y}`:m+y:m;y=y?`${m.name}/${y}`:m.name,m=m.parent}}function pi(m,y){for(var N=0,C=0;C<y.length;C++)N=(N<<5)-N+y.charCodeAt(C)|0;return(m+N>>>0)%Sn.length}function Ar(m){var y=pi(m.parent.id,m.name);if(Sn[y]===m)Sn[y]=m.bb;else for(y=Sn[y];y;){if(y.bb===m){y.bb=m.bb;break}y=y.bb}}function rs(m,y){var N=mn(m.mode)?(N=Qn(m,"x"))?N:m.La.lookup?0:2:54;if(N)throw new be(N);for(N=Sn[pi(m.id,y)];N;N=N.bb){var C=N.name;if(N.parent.id===m.id&&C===y)return N}return m.La.lookup(m,y)}function Da(m,y,N,C){return m=new ql(m,y,N,C),y=pi(m.parent.id,m.name),m.bb=Sn[y],Sn[y]=m}function mn(m){return(m&61440)===16384}function Ai(m){var y=["r","w","rw"][m&3];return m&512&&(y+="w"),y}function Qn(m,y){if(Zt)return 0;if(!y.includes("r")||m.mode&292){if(y.includes("w")&&!(m.mode&146)||y.includes("x")&&!(m.mode&73))return 2}else return 2;return 0}function Rr(m,y){if(!mn(m.mode))return 54;try{return rs(m,y),20}catch{}return Qn(m,"wx")}function gs(m,y,N){try{var C=rs(m,y)}catch(F){return F.Pa}if(m=Qn(m,"wx"))return m;if(N){if(!mn(C.mode))return 54;if(C===C.parent||_s(C)==="/")return 10}else if(mn(C.mode))return 31;return 0}function Kn(m){if(!m)throw new be(63);return m}function ft(m){if(m=ks[m],!m)throw new be(8);return m}function ln(m,y=-1){if(m=Object.assign(new js,m),y==-1)e:{for(y=0;4096>=y;y++)if(!ks[y])break e;throw new be(33)}return m.fd=y,ks[y]=m}function $s(m,y=-1){return m=ln(m,y),m.Ma?.Rb?.(m),m}function Ri(m,y,N){var C=m?.Ma.Ua;m=C?m:y,C??=y.La.Ua,Kn(C),C(m,N)}var Bl={open(m){m.Ma=xr[m.node.rdev].Ma,m.Ma.open?.(m)},Va(){throw new be(70)}};function Oa(m,y){xr[m]={Ma:y}}function Cr(m,y){var N=y==="/";if(N&&Xt)throw new be(10);if(!N&&y){var C=Mn(y,{nb:!1});if(y=C.path,C=C.node,C.ab)throw new be(10);if(!mn(C.mode))throw new be(54)}y={type:m,Wb:{},zb:y,Ib:[]},m=m.Xa(y),m.Xa=y,y.root=m,N?Xt=m:C&&(C.ab=y,C.Xa&&C.Xa.Ib.push(y))}function os(m,y,N){var C=Mn(m,{parent:!0}).node;if(m=Cs(m),!m)throw new be(28);if(m==="."||m==="..")throw new be(20);var F=Rr(C,m);if(F)throw new be(F);if(!C.La.hb)throw new be(63);return C.La.hb(C,m,y,N)}function Ma(m,y=438){return os(m,y&4095|32768,0)}function cn(m,y=511){return os(m,y&1023|16384,0)}function Un(m,y,N){typeof N>"u"&&(N=y,y=438),os(m,y|8192,N)}function Vn(m,y){if(!On(m))throw new be(44);var N=Mn(y,{parent:!0}).node;if(!N)throw new be(44);y=Cs(y);var C=Rr(N,y);if(C)throw new be(C);if(!N.La.symlink)throw new be(63);N.La.symlink(N,y,m)}function Ds(m){var y=Mn(m,{parent:!0}).node;m=Cs(m);var N=rs(y,m),C=gs(y,m,!0);if(C)throw new be(C);if(!y.La.rmdir)throw new be(63);if(N.ab)throw new be(10);y.La.rmdir(y,m),Ar(N)}function en(m){var y=Mn(m,{parent:!0}).node;if(!y)throw new be(44);m=Cs(m);var N=rs(y,m),C=gs(y,m,!1);if(C)throw new be(C);if(!y.La.unlink)throw new be(63);if(N.ab)throw new be(10);y.La.unlink(y,m),Ar(N)}function _i(m,y){return m=Mn(m,{$a:!y}).node,Kn(m.La.Ta)(m)}function Ua(m,y,N,C){Ri(m,y,{mode:N&4095|y.mode&-4096,ctime:Date.now(),Fb:C})}function ls(m,y){m=typeof m=="string"?Mn(m,{$a:!0}).node:m,Ua(null,m,y)}function Os(m,y,N){if(mn(y.mode))throw new be(31);if((y.mode&61440)!==32768)throw new be(28);var C=Qn(y,"w");if(C)throw new be(C);Ri(m,y,{size:N,timestamp:Date.now()})}function Ys(m,y,N=438){if(m==="")throw new be(44);if(typeof y=="string"){var C={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[y];if(typeof C>"u")throw Error(`Unknown file open mode: ${y}`);y=C}if(N=y&64?N&4095|32768:0,typeof m=="object")C=m;else{var F=m.endsWith("/");m=Mn(m,{$a:!(y&131072),Jb:!0}),C=m.node,m=m.path}var W=!1;if(y&64)if(C){if(y&128)throw new be(20)}else{if(F)throw new be(31);C=os(m,N|511,0),W=!0}if(!C)throw new be(44);if((C.mode&61440)===8192&&(y&=-513),y&65536&&!mn(C.mode))throw new be(54);if(!W&&(F=C?(C.mode&61440)===40960?32:mn(C.mode)&&(Ai(y)!=="r"||y&576)?31:Qn(C,Ai(y)):44))throw new be(F);return y&512&&!W&&(F=C,F=typeof F=="string"?Mn(F,{$a:!0}).node:F,Os(null,F,0)),y&=-131713,F=ln({node:C,path:_s(C),flags:y,seekable:!0,position:0,Ma:C.Ma,Lb:[],error:!1}),F.Ma.open&&F.Ma.open(F),W&&ls(C,N&511),!_.logReadFiles||y&1||m in Ls||(Ls[m]=1),F}function Ki(m){if(m.fd===null)throw new be(8);m.ob&&(m.ob=null);try{m.Ma.close&&m.Ma.close(m)}catch(y){throw y}finally{ks[m.fd]=null}m.fd=null}function Va(m,y,N){if(m.fd===null)throw new be(8);if(!m.seekable||!m.Ma.Va)throw new be(70);if(N!=0&&N!=1&&N!=2)throw new be(28);m.position=m.Ma.Va(m,y,N),m.Lb=[]}function Ir(m,y,N,C,F){if(0>C||0>F)throw new be(28);if(m.fd===null)throw new be(8);if((m.flags&2097155)===1)throw new be(8);if(mn(m.node.mode))throw new be(31);if(!m.Ma.read)throw new be(28);var W=typeof F<"u";if(!W)F=m.position;else if(!m.seekable)throw new be(70);return y=m.Ma.read(m,y,N,C,F),W||(m.position+=y),y}function Wi(m,y,N,C,F){if(0>C||0>F)throw new be(28);if(m.fd===null)throw new be(8);if((m.flags&2097155)===0)throw new be(8);if(mn(m.node.mode))throw new be(31);if(!m.Ma.write)throw new be(28);m.seekable&&m.flags&1024&&Va(m,0,2);var W=typeof F<"u";if(!W)F=m.position;else if(!m.seekable)throw new be(70);return y=m.Ma.write(m,y,N,C,F,void 0),W||(m.position+=y),y}function cs(m){var y,N=Ys(m,N||0);m=_i(m).size;var C=new Uint8Array(m);return Ir(N,C,0,m,0),y=C,Ki(N),y}function Lt(m,y,N){m=Kt("/dev/"+m);var C=as(!!y,!!N);Lt.yb??(Lt.yb=64);var F=Lt.yb++<<8|0;Oa(F,{open(W){W.seekable=!1},close(){N?.buffer?.length&&N(10)},read(W,ce,je,Fe){for(var Ye=0,Nt=0;Nt<Fe;Nt++){try{var tn=y()}catch{throw new be(29)}if(tn===void 0&&Ye===0)throw new be(6);if(tn==null)break;Ye++,ce[je+Nt]=tn}return Ye&&(W.node.atime=Date.now()),Ye},write(W,ce,je,Fe){for(var Ye=0;Ye<Fe;Ye++)try{N(ce[je+Ye])}catch{throw new be(29)}return Fe&&(W.node.mtime=W.node.ctime=Date.now()),Ye}}),Un(m,C,F)}var tt={};function Wn(m,y,N){if(y.charAt(0)==="/")return y;if(m=m===-100?"/":ft(m).path,y.length==0){if(!N)throw new be(44);return m}return m+"/"+y}function Ci(m,y){k[m>>2]=y.dev,k[m+4>>2]=y.mode,we[m+8>>2]=y.nlink,k[m+12>>2]=y.uid,k[m+16>>2]=y.gid,k[m+20>>2]=y.rdev,se[m+24>>3]=BigInt(y.size),k[m+32>>2]=4096,k[m+36>>2]=y.blocks;var N=y.atime.getTime(),C=y.mtime.getTime(),F=y.ctime.getTime();return se[m+40>>3]=BigInt(Math.floor(N/1e3)),we[m+48>>2]=N%1e3*1e6,se[m+56>>3]=BigInt(Math.floor(C/1e3)),we[m+64>>2]=C%1e3*1e6,se[m+72>>3]=BigInt(Math.floor(F/1e3)),we[m+80>>2]=F%1e3*1e6,se[m+88>>3]=BigInt(y.ino),0}var vt=void 0,Qs=()=>{var m=k[+vt>>2];return vt+=4,m},ys=0,Ji=[0,31,60,91,121,152,182,213,244,274,305,335],Jn=[0,31,59,90,120,151,181,212,243,273,304,334],Ks={},kr=m=>{M=m,wi||0<ys||(_.onExit?.(m),j=!0),V(m,new Pe(m))},Lr=m=>{if(!j)try{if(m(),!(wi||0<ys))try{M=m=M,kr(m)}catch(y){y instanceof Pe||y=="unwind"||V(1,y)}}catch(y){y instanceof Pe||y=="unwind"||V(1,y)}},Ws={},jr=()=>{if(!Js){var m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:X||"./this.program"},y;for(y in Ws)Ws[y]===void 0?delete m[y]:m[y]=Ws[y];var N=[];for(y in m)N.push(`${y}=${m[y]}`);Js=N}return Js},Js,An=m=>{var y=hi(m)+1,N=pn(y);return is(m,R,N,y),N},To=(m,y,N,C)=>{var F={string:Ye=>{var Nt=0;return Ye!=null&&Ye!==0&&(Nt=An(Ye)),Nt},array:Ye=>{var Nt=pn(Ye.length);return q.set(Ye,Nt),Nt}};m=_["_"+m];var W=[],ce=0;if(C)for(var je=0;je<C.length;je++){var Fe=F[N[je]];Fe?(ce===0&&(ce=Cn()),W[je]=Fe(C[je])):W[je]=C[je]}return N=m(...W),N=(function(Ye){return ce!==0&&vs(ce),y==="string"?Ye?It(R,Ye):"":y==="boolean"?!!Ye:Ye})(N)},Ii=0,ki=(m,y)=>(y=y==1?pn(m.length):Zs(m.length),m.subarray||m.slice||(m=new Uint8Array(m)),R.set(m,y),y),Es,qa=[],Rn,us=m=>{Es.delete(Rn.get(m)),Rn.set(m,null),qa.push(m)},qn=(m,y)=>{if(!Es){Es=new WeakMap;var N=Rn.length;if(Es)for(var C=0;C<0+N;C++){var F=Rn.get(C);F&&Es.set(F,C)}}if(N=Es.get(m)||0)return N;if(qa.length)N=qa.pop();else{try{Rn.grow(1)}catch(Fe){throw Fe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Fe}N=Rn.length-1}try{Rn.set(N,m)}catch(Fe){if(!(Fe instanceof TypeError))throw Fe;if(typeof WebAssembly.Function=="function"){var W=WebAssembly.Function;C={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},F={parameters:[],results:y[0]=="v"?[]:[C[y[0]]]};for(var ce=1;ce<y.length;++ce)F.parameters.push(C[y[ce]]);y=new W(F,m)}else{C=[1],F=y.slice(0,1),y=y.slice(1),ce={i:127,p:127,j:126,f:125,d:124,e:111},C.push(96);var je=y.length;128>je?C.push(je):C.push(je%128|128,je>>7);for(W of y)C.push(ce[W]);F=="v"?C.push(0):C.push(1,ce[F]),y=[0,97,115,109,1,0,0,0,1],W=C.length,128>W?y.push(W):y.push(W%128|128,W>>7),y.push(...C),y.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),y=new WebAssembly.Module(new Uint8Array(y)),y=new WebAssembly.Instance(y,{e:{f:m}}).exports.f}Rn.set(N,y)}return Es.set(m,N),N};Sn=Array(4096),Cr(Be,"/"),cn("/tmp"),cn("/home"),cn("/home/web_user"),(function(){cn("/dev"),Oa(259,{read:()=>0,write:(C,F,W,ce)=>ce,Va:()=>0}),Un("/dev/null",259),wr(1280,Eo),wr(1536,Is),Un("/dev/tty",1280),Un("/dev/tty1",1536);var m=new Uint8Array(1024),y=0,N=()=>(y===0&&(Nr(m),y=m.byteLength),m[--y]);Lt("random",N),Lt("urandom",N),cn("/dev/shm"),cn("/dev/shm/tmp")})(),(function(){cn("/proc");var m=cn("/proc/self");cn("/proc/self/fd"),Cr({Xa(){var y=Da(m,"fd",16895,73);return y.Ma={Va:Be.Ma.Va},y.La={lookup(N,C){N=+C;var F=ft(N);return N={parent:null,Xa:{zb:"fake"},La:{readlink:()=>F.path},id:N+1},N.parent=N},readdir(){return Array.from(ks.entries()).filter(([,N])=>N).map(([N])=>N.toString())}},y}},"/proc/self/fd")})(),Be.vb=new be(44),Be.vb.stack="<generic error, no stack>";var Dr={a:(m,y,N,C)=>de(`Assertion failed: ${m?It(R,m):""}, at: `+[y?y?It(R,y):"":"unknown filename",N,C?C?It(R,C):"":"unknown function"]),i:function(m,y){try{return m=m?It(R,m):"",ls(m,y),0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},L:function(m,y,N){try{if(y=y?It(R,y):"",y=Wn(m,y),N&-8)return-28;var C=Mn(y,{$a:!0}).node;return C?(m="",N&4&&(m+="r"),N&2&&(m+="w"),N&1&&(m+="x"),m&&Qn(C,m)?-2:0):-44}catch(F){if(typeof tt>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},j:function(m,y){try{var N=ft(m);return Ua(N,N.node,y,!1),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},h:function(m){try{var y=ft(m);return Ri(y,y.node,{timestamp:Date.now(),Fb:!1}),0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},b:function(m,y,N){vt=N;try{var C=ft(m);switch(y){case 0:var F=Qs();if(0>F)break;for(;ks[F];)F++;return $s(C,F).fd;case 1:case 2:return 0;case 3:return C.flags;case 4:return F=Qs(),C.flags|=F,0;case 12:return F=Qs(),D[F+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},g:function(m,y){try{var N=ft(m),C=N.node,F=N.Ma.Ta;m=F?N:C,F??=C.La.Ta,Kn(F);var W=F(m);return Ci(y,W)}catch(ce){if(typeof tt>"u"||ce.name!=="ErrnoError")throw ce;return-ce.Pa}},H:function(m,y){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var N=ft(m);if(0>y||(N.flags&2097155)===0)throw new be(28);return Os(N,N.node,y),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},G:function(m,y){try{if(y===0)return-28;var N=hi("/")+1;return y<N?-68:(is("/",R,m,y),N)}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},K:function(m,y){try{return m=m?It(R,m):"",Ci(y,_i(m,!0))}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},C:function(m,y,N){try{return y=y?It(R,y):"",y=Wn(m,y),cn(y,N),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},J:function(m,y,N,C){try{y=y?It(R,y):"";var F=C&256;return y=Wn(m,y,C&4096),Ci(N,F?_i(y,!0):_i(y))}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},x:function(m,y,N,C){vt=C;try{y=y?It(R,y):"",y=Wn(m,y);var F=C?Qs():0;return Ys(y,N,F).fd}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},v:function(m,y,N,C){try{if(y=y?It(R,y):"",y=Wn(m,y),0>=C)return-28;var F=Mn(y).node;if(!F)throw new be(44);if(!F.La.readlink)throw new be(28);var W=F.La.readlink(F),ce=Math.min(C,hi(W)),je=q[N+ce];return is(W,R,N,C+1),q[N+ce]=je,ce}catch(Fe){if(typeof tt>"u"||Fe.name!=="ErrnoError")throw Fe;return-Fe.Pa}},u:function(m){try{return m=m?It(R,m):"",Ds(m),0}catch(y){if(typeof tt>"u"||y.name!=="ErrnoError")throw y;return-y.Pa}},f:function(m,y){try{return m=m?It(R,m):"",Ci(y,_i(m))}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},r:function(m,y,N){try{return y=y?It(R,y):"",y=Wn(m,y),N===0?en(y):N===512?Ds(y):de("Invalid flags passed to unlinkat"),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},q:function(m,y,N){try{y=y?It(R,y):"",y=Wn(m,y,!0);var C=Date.now(),F,W;if(N){var ce=we[N>>2]+4294967296*k[N+4>>2],je=k[N+8>>2];je==1073741823?F=C:je==1073741822?F=null:F=1e3*ce+je/1e6,N+=16,ce=we[N>>2]+4294967296*k[N+4>>2],je=k[N+8>>2],je==1073741823?W=C:je==1073741822?W=null:W=1e3*ce+je/1e6}else W=F=C;if((W??F)!==null){m=F;var Fe=Mn(y,{$a:!0}).node;Kn(Fe.La.Ua)(Fe,{atime:m,mtime:W})}return 0}catch(Ye){if(typeof tt>"u"||Ye.name!=="ErrnoError")throw Ye;return-Ye.Pa}},m:()=>de(""),l:()=>{wi=!1,ys=0},A:function(m,y){m=-9007199254740992>m||9007199254740992<m?NaN:Number(m),m=new Date(1e3*m),k[y>>2]=m.getSeconds(),k[y+4>>2]=m.getMinutes(),k[y+8>>2]=m.getHours(),k[y+12>>2]=m.getDate(),k[y+16>>2]=m.getMonth(),k[y+20>>2]=m.getFullYear()-1900,k[y+24>>2]=m.getDay();var N=m.getFullYear();k[y+28>>2]=(N%4!==0||N%100===0&&N%400!==0?Jn:Ji)[m.getMonth()]+m.getDate()-1|0,k[y+36>>2]=-(60*m.getTimezoneOffset()),N=new Date(m.getFullYear(),6,1).getTimezoneOffset();var C=new Date(m.getFullYear(),0,1).getTimezoneOffset();k[y+32>>2]=(N!=C&&m.getTimezoneOffset()==Math.min(C,N))|0},y:function(m,y,N,C,F,W,ce){F=-9007199254740992>F||9007199254740992<F?NaN:Number(F);try{if(isNaN(F))return 61;var je=ft(C);if((y&2)!==0&&(N&2)===0&&(je.flags&2097155)!==2)throw new be(2);if((je.flags&2097155)===1)throw new be(2);if(!je.Ma.ib)throw new be(43);if(!m)throw new be(28);var Fe=je.Ma.ib(je,m,F,y,N),Ye=Fe.Kb;return k[W>>2]=Fe.Ab,we[ce>>2]=Ye,0}catch(Nt){if(typeof tt>"u"||Nt.name!=="ErrnoError")throw Nt;return-Nt.Pa}},z:function(m,y,N,C,F,W){W=-9007199254740992>W||9007199254740992<W?NaN:Number(W);try{var ce=ft(F);if(N&2){if(N=W,(ce.node.mode&61440)!==32768)throw new be(43);if(!(C&2)){var je=R.slice(m,m+y);ce.Ma.jb&&ce.Ma.jb(ce,je,N,y,C)}}}catch(Fe){if(typeof tt>"u"||Fe.name!=="ErrnoError")throw Fe;return-Fe.Pa}},n:(m,y)=>{if(Ks[m]&&(clearTimeout(Ks[m].id),delete Ks[m]),!y)return 0;var N=setTimeout(()=>{delete Ks[m],Lr(()=>Zi(m,performance.now()))},y);return Ks[m]={id:N,Xb:y},0},B:(m,y,N,C)=>{var F=new Date().getFullYear(),W=new Date(F,0,1).getTimezoneOffset();F=new Date(F,6,1).getTimezoneOffset(),we[m>>2]=60*Math.max(W,F),k[y>>2]=+(W!=F),y=ce=>{var je=Math.abs(ce);return`UTC${0<=ce?"-":"+"}${String(Math.floor(je/60)).padStart(2,"0")}${String(je%60).padStart(2,"0")}`},m=y(W),y=y(F),F<W?(is(m,R,N,17),is(y,R,C,17)):(is(m,R,C,17),is(y,R,N,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:m=>{var y=R.length;if(m>>>=0,2147483648<m)return!1;for(var N=1;4>=N;N*=2){var C=y*(1+.2/N);C=Math.min(C,m+100663296);e:{C=(Math.min(2147483648,65536*Math.ceil(Math.max(m,C)/65536))-O.buffer.byteLength+65535)/65536|0;try{O.grow(C),rt();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},E:(m,y)=>{var N=0;return jr().forEach((C,F)=>{var W=y+N;for(F=we[m+4*F>>2]=W,W=0;W<C.length;++W)q[F++]=C.charCodeAt(W);q[F]=0,N+=C.length+1}),0},F:(m,y)=>{var N=jr();we[m>>2]=N.length;var C=0;return N.forEach(F=>C+=F.length+1),we[y>>2]=C,0},e:function(m){try{var y=ft(m);return Ki(y),0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},p:function(m,y){try{var N=ft(m);return q[y]=N.tty?2:mn(N.mode)?3:(N.mode&61440)===40960?7:4,D[y+2>>1]=0,se[y+8>>3]=BigInt(0),se[y+16>>3]=BigInt(0),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return C.Pa}},w:function(m,y,N,C){try{e:{var F=ft(m);m=y;for(var W,ce=y=0;ce<N;ce++){var je=we[m>>2],Fe=we[m+4>>2];m+=8;var Ye=Ir(F,q,je,Fe,W);if(0>Ye){var Nt=-1;break e}if(y+=Ye,Ye<Fe)break;typeof W<"u"&&(W+=Ye)}Nt=y}return we[C>>2]=Nt,0}catch(tn){if(typeof tt>"u"||tn.name!=="ErrnoError")throw tn;return tn.Pa}},D:function(m,y,N,C){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var F=ft(m);return Va(F,y,N),se[C>>3]=BigInt(F.position),F.ob&&y===0&&N===0&&(F.ob=null),0}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return W.Pa}},I:function(m){try{var y=ft(m);return y.Ma?.fsync?y.Ma.fsync(y):0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},t:function(m,y,N,C){try{e:{var F=ft(m);m=y;for(var W,ce=y=0;ce<N;ce++){var je=we[m>>2],Fe=we[m+4>>2];m+=8;var Ye=Wi(F,q,je,Fe,W);if(0>Ye){var Nt=-1;break e}if(y+=Ye,Ye<Fe)break;typeof W<"u"&&(W+=Ye)}Nt=y}return we[C>>2]=Nt,0}catch(tn){if(typeof tt>"u"||tn.name!=="ErrnoError")throw tn;return tn.Pa}},k:kr},Ce;(async function(){function m(N){return Ce=N.exports,O=Ce.M,rt(),Rn=Ce.O,at--,_.monitorRunDependencies?.(at),at==0&&H&&(N=H,H=null,N()),Ce}at++,_.monitorRunDependencies?.(at);var y={a:Dr};return _.instantiateWasm?new Promise(N=>{_.instantiateWasm(y,(C,F)=>{m(C),N(C.exports)})}):(ae??=_.locateFile?_.locateFile("sql-wasm.wasm",U):U+"sql-wasm.wasm",m((await xe(y)).instance))})(),_._sqlite3_free=m=>(_._sqlite3_free=Ce.P)(m),_._sqlite3_value_text=m=>(_._sqlite3_value_text=Ce.Q)(m),_._sqlite3_prepare_v2=(m,y,N,C,F)=>(_._sqlite3_prepare_v2=Ce.R)(m,y,N,C,F),_._sqlite3_step=m=>(_._sqlite3_step=Ce.S)(m),_._sqlite3_reset=m=>(_._sqlite3_reset=Ce.T)(m),_._sqlite3_exec=(m,y,N,C,F)=>(_._sqlite3_exec=Ce.U)(m,y,N,C,F),_._sqlite3_finalize=m=>(_._sqlite3_finalize=Ce.V)(m),_._sqlite3_column_name=(m,y)=>(_._sqlite3_column_name=Ce.W)(m,y),_._sqlite3_column_text=(m,y)=>(_._sqlite3_column_text=Ce.X)(m,y),_._sqlite3_column_type=(m,y)=>(_._sqlite3_column_type=Ce.Y)(m,y),_._sqlite3_errmsg=m=>(_._sqlite3_errmsg=Ce.Z)(m),_._sqlite3_clear_bindings=m=>(_._sqlite3_clear_bindings=Ce._)(m),_._sqlite3_value_blob=m=>(_._sqlite3_value_blob=Ce.$)(m),_._sqlite3_value_bytes=m=>(_._sqlite3_value_bytes=Ce.aa)(m),_._sqlite3_value_double=m=>(_._sqlite3_value_double=Ce.ba)(m),_._sqlite3_value_int=m=>(_._sqlite3_value_int=Ce.ca)(m),_._sqlite3_value_type=m=>(_._sqlite3_value_type=Ce.da)(m),_._sqlite3_result_blob=(m,y,N,C)=>(_._sqlite3_result_blob=Ce.ea)(m,y,N,C),_._sqlite3_result_double=(m,y)=>(_._sqlite3_result_double=Ce.fa)(m,y),_._sqlite3_result_error=(m,y,N)=>(_._sqlite3_result_error=Ce.ga)(m,y,N),_._sqlite3_result_int=(m,y)=>(_._sqlite3_result_int=Ce.ha)(m,y),_._sqlite3_result_int64=(m,y)=>(_._sqlite3_result_int64=Ce.ia)(m,y),_._sqlite3_result_null=m=>(_._sqlite3_result_null=Ce.ja)(m),_._sqlite3_result_text=(m,y,N,C)=>(_._sqlite3_result_text=Ce.ka)(m,y,N,C),_._sqlite3_aggregate_context=(m,y)=>(_._sqlite3_aggregate_context=Ce.la)(m,y),_._sqlite3_column_count=m=>(_._sqlite3_column_count=Ce.ma)(m),_._sqlite3_data_count=m=>(_._sqlite3_data_count=Ce.na)(m),_._sqlite3_column_blob=(m,y)=>(_._sqlite3_column_blob=Ce.oa)(m,y),_._sqlite3_column_bytes=(m,y)=>(_._sqlite3_column_bytes=Ce.pa)(m,y),_._sqlite3_column_double=(m,y)=>(_._sqlite3_column_double=Ce.qa)(m,y),_._sqlite3_bind_blob=(m,y,N,C,F)=>(_._sqlite3_bind_blob=Ce.ra)(m,y,N,C,F),_._sqlite3_bind_double=(m,y,N)=>(_._sqlite3_bind_double=Ce.sa)(m,y,N),_._sqlite3_bind_int=(m,y,N)=>(_._sqlite3_bind_int=Ce.ta)(m,y,N),_._sqlite3_bind_text=(m,y,N,C,F)=>(_._sqlite3_bind_text=Ce.ua)(m,y,N,C,F),_._sqlite3_bind_parameter_index=(m,y)=>(_._sqlite3_bind_parameter_index=Ce.va)(m,y),_._sqlite3_sql=m=>(_._sqlite3_sql=Ce.wa)(m),_._sqlite3_normalized_sql=m=>(_._sqlite3_normalized_sql=Ce.xa)(m),_._sqlite3_changes=m=>(_._sqlite3_changes=Ce.ya)(m),_._sqlite3_close_v2=m=>(_._sqlite3_close_v2=Ce.za)(m),_._sqlite3_create_function_v2=(m,y,N,C,F,W,ce,je,Fe)=>(_._sqlite3_create_function_v2=Ce.Aa)(m,y,N,C,F,W,ce,je,Fe),_._sqlite3_update_hook=(m,y,N)=>(_._sqlite3_update_hook=Ce.Ba)(m,y,N),_._sqlite3_open=(m,y)=>(_._sqlite3_open=Ce.Ca)(m,y);var Zs=_._malloc=m=>(Zs=_._malloc=Ce.Da)(m),ds=_._free=m=>(ds=_._free=Ce.Ea)(m);_._RegisterExtensionFunctions=m=>(_._RegisterExtensionFunctions=Ce.Fa)(m);var Li=(m,y)=>(Li=Ce.Ga)(m,y),Zi=(m,y)=>(Zi=Ce.Ha)(m,y),vs=m=>(vs=Ce.Ia)(m),pn=m=>(pn=Ce.Ja)(m),Cn=()=>(Cn=Ce.Ka)();_.stackSave=()=>Cn(),_.stackRestore=m=>vs(m),_.stackAlloc=m=>pn(m),_.cwrap=(m,y,N,C)=>{var F=!N||N.every(W=>W==="number"||W==="boolean");return y!=="string"&&F&&!C?_["_"+m]:(...W)=>To(m,y,N,W)},_.addFunction=qn,_.removeFunction=us,_.UTF8ToString=Qi,_.ALLOC_NORMAL=Ii,_.allocate=ki,_.allocateUTF8OnStack=An;function gi(){function m(){if(_.calledRun=!0,!j){if(!_.noFSInit&&!xi){var y,N;xi=!0,C??=_.stdin,y??=_.stdout,N??=_.stderr,C?Lt("stdin",C):Vn("/dev/tty","/dev/stdin"),y?Lt("stdout",null,y):Vn("/dev/tty","/dev/stdout"),N?Lt("stderr",null,N):Vn("/dev/tty1","/dev/stderr"),Ys("/dev/stdin",0),Ys("/dev/stdout",1),Ys("/dev/stderr",1)}if(Ce.N(),Zt=!1,_.onRuntimeInitialized?.(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var C=_.postRun.shift();yt.unshift(C)}wt(yt)}}if(0<at)H=gi;else{if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)ps();wt(on),0<at?H=gi:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),m()},1)):m()}}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return gi(),g}),s)};n.exports=a,n.exports.default=a})(dm)),dm.exports}var UN=MN();const JT=bN(UN),VN=`
CREATE TABLE IF NOT EXISTS domains (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  color TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  domain_id INTEGER NOT NULL REFERENCES domains(id),
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS quests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  goal_id INTEGER NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS steps (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  quest_id INTEGER NOT NULL REFERENCES quests(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'pending',
  sort_order INTEGER NOT NULL DEFAULT 0,
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS buff_definitions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  type TEXT NOT NULL DEFAULT 'buff',
  icon TEXT NOT NULL DEFAULT '',
  duration_hours INTEGER NOT NULL DEFAULT 24,
  stat_effects TEXT NOT NULL DEFAULT '{}',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS buff_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  definition_id INTEGER NOT NULL REFERENCES buff_definitions(id) ON DELETE CASCADE,
  activated_at TEXT NOT NULL DEFAULT (datetime('now')),
  expires_at TEXT NOT NULL,
  is_active INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS character (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  name TEXT NOT NULL DEFAULT 'Adventurer',
  total_xp INTEGER NOT NULL DEFAULT 0,
  level INTEGER NOT NULL DEFAULT 1,
  title TEXT NOT NULL DEFAULT 'Novice',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS xp_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount INTEGER NOT NULL,
  reason TEXT NOT NULL,
  source_type TEXT NOT NULL,
  source_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS planner_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  date TEXT NOT NULL,
  start_time TEXT,
  end_time TEXT,
  quest_id INTEGER REFERENCES quests(id) ON DELETE SET NULL,
  step_id INTEGER REFERENCES steps(id) ON DELETE SET NULL,
  is_completed INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);
`,qN=`
INSERT OR IGNORE INTO domains (id, name, icon, color) VALUES
  (1, 'Health', '', '#e74c3c'),
  (2, 'Career', '', '#c8a84e'),
  (3, 'Learning', '', '#3498db'),
  (4, 'Social', '', '#e67e22'),
  (5, 'Finance', '', '#2ecc71'),
  (6, 'Creative', '', '#9b59b6'),
  (7, 'Spiritual', '', '#1abc9c'),
  (8, 'Home', '', '#95a5a6');
`,BN=`
INSERT OR IGNORE INTO character (id, name, total_xp, level, title)
VALUES (1, 'Adventurer', 0, 1, 'Novice');
`,PN="goal-game-db",Tl="database",ZT="main";let ms=null;function eb(){return new Promise((n,e)=>{const s=indexedDB.open(PN,1);s.onupgradeneeded=()=>{const a=s.result;a.objectStoreNames.contains(Tl)||a.createObjectStore(Tl)},s.onsuccess=()=>n(s.result),s.onerror=()=>e(s.error)})}async function FN(){const n=await eb();return new Promise((e,s)=>{const a=n.transaction(Tl,"readonly"),u=a.objectStore(Tl).get(ZT);u.onsuccess=()=>e(u.result??null),u.onerror=()=>s(u.error),a.oncomplete=()=>n.close()})}async function zN(n){const e=await eb();return new Promise((s,a)=>{const o=e.transaction(Tl,"readwrite");o.objectStore(Tl).put(n,ZT),o.oncomplete=()=>{e.close(),s()},o.onerror=()=>a(o.error)})}async function HN(){if(ms)return ms;const n=await JT({locateFile:()=>"/goal-game/sql-wasm.wasm"}),e=await FN();return e?ms=new n.Database(e):ms=new n.Database,ms.run(VN),ms.run(qN),ms.run(BN),await ve(),ms}async function ve(){if(!ms)return;const n=ms.export();await zN(n)}function te(){if(!ms)throw new Error("Database not initialized. Call getDatabase() first.");return ms}async function pp(){return te().export()}async function tb(n){const e=await JT({locateFile:()=>"/goal-game/sql-wasm.wasm"});ms&&ms.close(),ms=new e.Database(n),await ve()}const fm="migration_feb2026_billing_v1";async function GN(){if(localStorage.getItem(fm))return!1;const n=te(),e=n.exec("SELECT id FROM goals WHERE title = 'Bill 190 Hours - February 2026'");if(e.length>0&&e[0].values.length>0)return localStorage.setItem(fm,"true"),!1;n.run(`
    INSERT INTO goals (domain_id, title, description, status)
    VALUES (2, 'Bill 190 Hours - February 2026', 'Target: 8 hours on weekdays, ~4.5 hours on weekends. Started with 8 hours billed.', 'active')
  `);const a=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0],o=[{title:"Week 1: Feb 3-9",description:"First partial week. Target: ~41 hours (4 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-03",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-04",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-05",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-06",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-07",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-08",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 2: Feb 9-15",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-09",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-10",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-11",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-12",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-13",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-14",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-15",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 3: Feb 16-22",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-16",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-17",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-18",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-19",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-20",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-21",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-22",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 4: Feb 23-28",description:"Final partial week. Target: ~44.5 hours (5 weekdays  8 + 1 weekend day  4.5)",days:[{date:"2026-02-23",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-24",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-25",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-26",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-27",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-28",day:"Sat",hours:4.5,isWeekend:!0}]}];for(const u of o){n.run(`
      INSERT INTO quests (goal_id, title, description, priority, status)
      VALUES (?, ?, ?, 'high', 'active')
    `,[a,u.title,u.description]);const g=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(let E=0;E<u.days.length;E++){const _=u.days[E],S=`${_.day} ${_.date.slice(5)}: Bill ${_.hours} hours`;n.run(`
        INSERT INTO steps (quest_id, title, priority, status, sort_order)
        VALUES (?, ?, ?, 'pending', ?)
      `,[g,S,_.isWeekend?"low":"normal",E])}}return await ve(),localStorage.setItem(fm,"true"),!0}const GE="notifications_migration_v1";async function XN(){if(localStorage.getItem(GE))return;const n=te();try{(n.exec("PRAGMA table_info(planner_events)")[0]?.values.map(a=>a[1])||[]).includes("reminder_minutes")||n.run("ALTER TABLE planner_events ADD COLUMN reminder_minutes INTEGER DEFAULT NULL"),n.run(`
      CREATE TABLE IF NOT EXISTS notification_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        enabled INTEGER NOT NULL DEFAULT 0,
        default_reminder_minutes INTEGER NOT NULL DEFAULT 15,
        fcm_token TEXT,
        device_id TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await ve(),localStorage.setItem(GE,"true"),console.log("Notifications migration completed successfully")}catch(e){throw console.error("Failed to run notifications migration:",e),e}}const XE="body_fat_goal_seed_v4";async function $N(){if(localStorage.getItem(XE))return;const n=te();try{const e=n.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(e.length&&e[0].values.length){const _=e[0].values[0][0],S=n.exec("SELECT id FROM quests WHERE goal_id = ?",[_]);if(S.length)for(const w of S[0].values)n.run("DELETE FROM steps WHERE quest_id = ?",[w[0]]);n.run("DELETE FROM quests WHERE goal_id = ?",[_]),n.run("DELETE FROM goals WHERE id = ?",[_])}n.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[1,"Achieve 12% Body Fat","12-week transformation program starting Feb 4, 2026. From 18-19% to 12% body fat through consistent training and nutrition."]);const a=n.exec("SELECT last_insert_rowid()")[0].values[0][0],o=new Date(2026,1,4,12,0,0),u=[{title:"Week 1 - Build Foundation",desc:"Establish daily habits and set your baseline."},{title:"Week 2 - Gain Momentum",desc:"Lock in the routine. Consistency is key."},{title:"Week 3 - Stay Disciplined",desc:"Push through early challenges. Trust the process."},{title:"Week 4 - Complete Month 1",desc:"First month done! Take measurements and assess progress."},{title:"Week 5 - Intensify",desc:"Increase intensity. Your body is adapting."},{title:"Week 6 - Push Through",desc:"Mental toughness week. No excuses."},{title:"Week 7 - Halfway Point",desc:"You're halfway there! Stay focused."},{title:"Week 8 - Stay Strong",desc:"Month 2 complete. Reassess and adjust if needed."},{title:"Week 9 - Final Month Begins",desc:"Last 4 weeks. Time to lock in."},{title:"Week 10 - Home Stretch",desc:"You can see the finish line. Don't let up."},{title:"Week 11 - Almost There",desc:"One more week after this. Give it everything."},{title:"Week 12 - Finish Strong",desc:"Final week! Complete the transformation."}],h=[{dayName:"Wed",workout:"Light Cardio (20-30 min)",isGym:!1},{dayName:"Thu",workout:"Gym - Legs (Quads/Hams/Glutes)",isGym:!0},{dayName:"Fri",workout:"Gym - Upper Body",isGym:!0},{dayName:"Sat",workout:"Gym - Lower Body / Deadlifts",isGym:!0},{dayName:"Sun",workout:"Rest + Weekly Check-in",isGym:!1},{dayName:"Mon",workout:"Gym - Push (Chest/Shoulders/Triceps)",isGym:!0},{dayName:"Tue",workout:"Gym - Pull (Back/Biceps)",isGym:!0}],g=_=>{const S=_.getMonth()+1,w=_.getDate();return`${S}/${w}`};let E=new Date(o);for(let _=0;_<u.length;_++){const S=u[_],w=g(E),x=g(new Date(E.getTime()+8640*60*1e3));n.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[a,`${S.title} (${w} - ${x})`,S.desc,"high"]);const X=n.exec("SELECT last_insert_rowid()")[0].values[0][0];let V=1;for(let U=0;U<7;U++){const z=h[U],G=g(E);n.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[X,`${z.dayName} ${G}: ${z.workout}`,"normal",V++]),n.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[X,`${z.dayName} ${G}: Hit protein goal`,"normal",V++]),E.setDate(E.getDate()+1)}}await ve(),localStorage.setItem(XE,"true"),console.log("Body fat goal seeded successfully (v3 - starting Wed 2/4/2026)")}catch(e){throw console.error("Failed to seed body fat goal:",e),e}}const nd="body_fat_steps_fix_v2";async function YN(){if(localStorage.getItem(nd))return;const n=te();try{const e=n.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(!e.length||!e[0].values.length){console.log("Body fat goal not found, skipping step title fix"),localStorage.setItem(nd,"true");return}const s=e[0].values[0][0],a=n.exec("SELECT id FROM quests WHERE goal_id = ? ORDER BY id",[s]);if(!a.length){console.log("No quests found for body fat goal"),localStorage.setItem(nd,"true");return}const o=new Date(2026,1,4,12,0,0);let u=new Date(o);const h=E=>{const _=E.getMonth()+1,S=E.getDate();return`${_}/${S}`};let g=0;for(let E=0;E<a[0].values.length;E++){const _=a[0].values[E][0],S=n.exec("SELECT id, title, sort_order FROM steps WHERE quest_id = ? ORDER BY sort_order",[_]);if(S.length)for(let w=0;w<S[0].values.length;w++){const x=S[0].values[w][0],B=S[0].values[w][1],X=S[0].values[w][2],V=Math.floor((X-1)/2),U=new Date(u);U.setDate(o.getDate()+E*7+V);const z=h(U);let G;B.toLowerCase().includes("protein")||X%2===0?G=`${z}: hit 150g of protein`:G=`${z}: worked out`,n.run("UPDATE steps SET title = ? WHERE id = ?",[G,x]),g++}}await ve(),localStorage.setItem(nd,"true"),console.log(`Fixed ${g} step titles in body fat goal with dates`)}catch(e){throw console.error("Failed to fix body fat step titles:",e),e}}const $E="miss_step_migration_v1";async function QN(){if(localStorage.getItem($E))return;const n=te();try{const e=n.exec("PRAGMA table_info(steps)");e.length>0&&e[0].values.some(a=>a[1]==="missed_at")||n.run("ALTER TABLE steps ADD COLUMN missed_at TEXT"),n.run(`
      CREATE TABLE IF NOT EXISTS missed_steps_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        step_id INTEGER NOT NULL,
        missed_date TEXT NOT NULL,
        xp_penalty INTEGER DEFAULT 0,
        created_at TEXT DEFAULT (datetime('now')),
        FOREIGN KEY (step_id) REFERENCES steps(id)
      )
    `),n.run(`
      CREATE INDEX IF NOT EXISTS idx_missed_steps_date
      ON missed_steps_log(missed_date)
    `),await ve(),localStorage.setItem($E,"true"),console.log("Miss step migration completed")}catch(e){throw console.error("Failed to run miss step migration:",e),e}}const YE="daily_quests_migration_v1";async function KN(){if(localStorage.getItem(YE))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS daily_quests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        quest_type TEXT NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        target_value INTEGER NOT NULL DEFAULT 1,
        current_value INTEGER NOT NULL DEFAULT 0,
        xp_reward INTEGER NOT NULL DEFAULT 25,
        is_completed INTEGER NOT NULL DEFAULT 0,
        completed_at TEXT
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS daily_quest_bonus (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL UNIQUE,
        claimed_at TEXT NOT NULL
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_daily_quests_date ON daily_quests(date)"),await ve(),localStorage.setItem(YE,"true"),console.log("Daily quests migration completed successfully")}catch(e){throw console.error("Failed to run daily quests migration:",e),e}}const QE="streak_migration_v1";async function WN(){if(localStorage.getItem(QE))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS streak_shields (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        quantity INTEGER NOT NULL DEFAULT 0,
        earned_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.exec("SELECT COUNT(*) FROM streak_shields")[0].values[0][0]===0&&n.run("INSERT INTO streak_shields (quantity) VALUES (3)"),n.run(`
      CREATE TABLE IF NOT EXISTS streak_freezes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        freeze_date TEXT NOT NULL,
        reason TEXT,
        created_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE,
        UNIQUE(buff_definition_id, freeze_date)
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS streak_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL UNIQUE,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_milestone_claimed INTEGER NOT NULL DEFAULT 0,
        updated_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS streak_shield_uses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        used_date TEXT NOT NULL,
        streak_saved INTEGER NOT NULL,
        used_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_date ON streak_freezes(freeze_date)"),n.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_buff ON streak_freezes(buff_definition_id)"),await ve(),localStorage.setItem(QE,"true"),console.log("Streak migration completed successfully")}catch(e){throw console.error("Failed to run streak migration:",e),e}}const KE="weekly_boss_migration_v1";async function JN(){if(localStorage.getItem(KE))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS weekly_boss (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        boss_type TEXT NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        max_hp INTEGER NOT NULL,
        current_hp INTEGER NOT NULL,
        is_defeated INTEGER NOT NULL DEFAULT 0,
        defeated_at TEXT,
        xp_reward INTEGER NOT NULL,
        bonus_shields INTEGER NOT NULL DEFAULT 0,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS boss_damage_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        boss_id INTEGER NOT NULL,
        damage_type TEXT NOT NULL,
        damage_amount INTEGER NOT NULL,
        source_description TEXT,
        dealt_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (boss_id) REFERENCES weekly_boss(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_weekly_boss_week ON weekly_boss(week_start)"),n.run("CREATE INDEX IF NOT EXISTS idx_boss_damage_log_boss ON boss_damage_log(boss_id)"),await ve(),localStorage.setItem(KE,"true"),console.log("Weekly boss migration completed successfully")}catch(e){throw console.error("Failed to run weekly boss migration:",e),e}}const ZN={quests:"Quests & Goals",buffs:"Habits & Buffs",streaks:"Streaks",boss:"Boss Battles",levels:"Leveling",special:"Special"},ew={quests:"",buffs:"",streaks:"",boss:"",levels:"",special:""},tw=[{key:"first_step",name:"First Step",description:"Complete your first step",category:"quests",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"steps_completed",sort_order:1,is_hidden:!1},{key:"ten_steps",name:"On Your Way",description:"Complete 10 steps",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"steps_completed",sort_order:2,is_hidden:!1},{key:"hundred_steps",name:"Journey Master",description:"Complete 100 steps",category:"quests",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"steps_completed",sort_order:3,is_hidden:!1},{key:"first_quest",name:"Quest Beginner",description:"Complete your first quest",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:1,requirement_source:"quests_completed",sort_order:4,is_hidden:!1},{key:"ten_quests",name:"Quest Veteran",description:"Complete 10 quests",category:"quests",icon:"",xp_reward:150,requirement_type:"count",requirement_value:10,requirement_source:"quests_completed",sort_order:5,is_hidden:!1},{key:"first_goal",name:"Goal Getter",description:"Complete your first goal",category:"quests",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"goals_completed",sort_order:6,is_hidden:!1},{key:"first_buff",name:"Habit Former",description:"Activate your first buff",category:"buffs",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"buffs_activated",sort_order:1,is_hidden:!1},{key:"ten_buffs",name:"Habit Builder",description:"Activate 10 buffs",category:"buffs",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"buffs_activated",sort_order:2,is_hidden:!1},{key:"hundred_buffs",name:"Habit Master",description:"Activate 100 buffs",category:"buffs",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"buffs_activated",sort_order:3,is_hidden:!1},{key:"week_streak",name:"Week Warrior",description:"Maintain a 7-day streak",category:"streaks",icon:"",xp_reward:75,requirement_type:"threshold",requirement_value:7,requirement_source:"buff_streak",sort_order:1,is_hidden:!1},{key:"month_streak",name:"Monthly Champion",description:"Maintain a 30-day streak",category:"streaks",icon:"",xp_reward:300,requirement_type:"threshold",requirement_value:30,requirement_source:"buff_streak",sort_order:2,is_hidden:!1},{key:"first_boss",name:"Dragon Slayer",description:"Defeat your first weekly boss",category:"boss",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"bosses_defeated",sort_order:1,is_hidden:!1},{key:"five_bosses",name:"Boss Hunter",description:"Defeat 5 weekly bosses",category:"boss",icon:"",xp_reward:250,requirement_type:"count",requirement_value:5,requirement_source:"bosses_defeated",sort_order:2,is_hidden:!1},{key:"level_5",name:"Rising Star",description:"Reach level 5",category:"levels",icon:"",xp_reward:50,requirement_type:"threshold",requirement_value:5,requirement_source:"character_level",sort_order:1,is_hidden:!1},{key:"level_10",name:"Apprentice",description:"Reach level 10",category:"levels",icon:"",xp_reward:100,requirement_type:"threshold",requirement_value:10,requirement_source:"character_level",sort_order:2,is_hidden:!1},{key:"level_25",name:"Expert",description:"Reach level 25",category:"levels",icon:"",xp_reward:250,requirement_type:"threshold",requirement_value:25,requirement_source:"character_level",sort_order:3,is_hidden:!1},{key:"level_50",name:"Master",description:"Reach level 50",category:"levels",icon:"",xp_reward:500,requirement_type:"threshold",requirement_value:50,requirement_source:"character_level",sort_order:4,is_hidden:!1}],WE="achievement_migration_v1";async function nw(){if(localStorage.getItem(WE))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS achievement_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        category TEXT NOT NULL,
        icon TEXT NOT NULL,
        xp_reward INTEGER NOT NULL DEFAULT 0,
        requirement_type TEXT NOT NULL,
        requirement_value INTEGER NOT NULL,
        requirement_source TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0,
        is_hidden INTEGER NOT NULL DEFAULT 0
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS achievement_unlocks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS achievement_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        current_value INTEGER NOT NULL DEFAULT 0,
        last_updated TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_unlocks_def ON achievement_unlocks(definition_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_progress_def ON achievement_progress(definition_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_category ON achievement_definitions(category)"),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_source ON achievement_definitions(requirement_source)");for(const e of tw)n.run(`INSERT OR IGNORE INTO achievement_definitions
         (key, name, description, category, icon, xp_reward, requirement_type, requirement_value, requirement_source, sort_order, is_hidden)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.key,e.name,e.description,e.category,e.icon,e.xp_reward,e.requirement_type,e.requirement_value,e.requirement_source,e.sort_order,e.is_hidden?1:0]);await ve(),localStorage.setItem(WE,"true"),console.log("Achievement migration completed successfully")}catch(e){throw console.error("Failed to run achievement migration:",e),e}}const nb=10,pl=100,Vm=20,qm=5,sw={complete_step:5,activate_buff:3,start_focus_timer:10,deactivate_debuff:15},hm={name:"Fatigued",icon:"",effects:{focus:-2,willpower:-2}},mm={name:"Exhausted",icon:"",effects:{stamina:-3,willpower:-3,focus:-3,health:-1}},JE="energy_migration_v1";async function iw(){if(localStorage.getItem(JE))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS energy_state (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        current_energy INTEGER NOT NULL DEFAULT ${pl},
        max_energy INTEGER NOT NULL DEFAULT ${pl},
        last_regen_at TEXT NOT NULL DEFAULT (datetime('now')),
        bonus_energy INTEGER NOT NULL DEFAULT 0
      )
    `),n.exec("SELECT COUNT(*) FROM energy_state")[0].values[0][0]===0&&n.run(`INSERT INTO energy_state (id, current_energy, max_energy) VALUES (1, ${pl}, ${pl})`),n.run(`
      CREATE TABLE IF NOT EXISTS energy_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        amount INTEGER NOT NULL,
        reason TEXT NOT NULL,
        source_type TEXT NOT NULL,
        source_id INTEGER,
        energy_before INTEGER NOT NULL,
        energy_after INTEGER NOT NULL,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS energy_costs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        action_type TEXT NOT NULL UNIQUE,
        base_cost INTEGER NOT NULL,
        description TEXT NOT NULL DEFAULT ''
      )
    `);for(const[s,a]of Object.entries(sw))n.run(`INSERT OR IGNORE INTO energy_costs (action_type, base_cost, description)
         VALUES (?, ?, ?)`,[s,a,`Cost for ${s.replace(/_/g," ")}`]);n.run("CREATE INDEX IF NOT EXISTS idx_energy_log_created ON energy_log(created_at)"),n.run("CREATE INDEX IF NOT EXISTS idx_energy_log_source ON energy_log(source_type)"),await ve(),localStorage.setItem(JE,"true"),console.log("Energy migration completed successfully")}catch(e){throw console.error("Failed to run energy migration:",e),e}}const aw=15,rw=5,ow=10,Xs={work_duration:25,short_break:5,long_break:15,sessions_before_long_break:4,auto_start_breaks:!1,sound_enabled:!0},ZE="focus_timer_migration_v1";async function lw(){if(localStorage.getItem(ZE))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS focus_sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        duration_minutes INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        status TEXT NOT NULL DEFAULT 'active',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        linked_step_id INTEGER,
        linked_quest_id INTEGER,
        break_taken INTEGER NOT NULL DEFAULT 0,
        notes TEXT NOT NULL DEFAULT '',
        FOREIGN KEY (linked_step_id) REFERENCES steps(id) ON DELETE SET NULL,
        FOREIGN KEY (linked_quest_id) REFERENCES quests(id) ON DELETE SET NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS focus_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        work_duration INTEGER NOT NULL DEFAULT ${Xs.work_duration},
        short_break INTEGER NOT NULL DEFAULT ${Xs.short_break},
        long_break INTEGER NOT NULL DEFAULT ${Xs.long_break},
        sessions_before_long_break INTEGER NOT NULL DEFAULT ${Xs.sessions_before_long_break},
        auto_start_breaks INTEGER NOT NULL DEFAULT ${Xs.auto_start_breaks?1:0},
        sound_enabled INTEGER NOT NULL DEFAULT ${Xs.sound_enabled?1:0}
      )
    `),n.exec("SELECT COUNT(*) FROM focus_settings")[0].values[0][0]===0&&n.run(`
        INSERT INTO focus_settings (id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled)
        VALUES (1, ?, ?, ?, ?, ?, ?)
      `,[Xs.work_duration,Xs.short_break,Xs.long_break,Xs.sessions_before_long_break,Xs.auto_start_breaks?1:0,Xs.sound_enabled?1:0]),n.run(`
      CREATE TABLE IF NOT EXISTS focus_stats (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        total_sessions INTEGER NOT NULL DEFAULT 0,
        total_minutes INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        current_streak INTEGER NOT NULL DEFAULT 0,
        today_sessions INTEGER NOT NULL DEFAULT 0,
        today_date TEXT NOT NULL DEFAULT (date('now'))
      )
    `),n.exec("SELECT COUNT(*) FROM focus_stats")[0].values[0][0]===0&&n.run("INSERT INTO focus_stats (id) VALUES (1)"),n.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_started ON focus_sessions(started_at)"),n.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_status ON focus_sessions(status)"),await ve(),localStorage.setItem(ZE,"true"),console.log("Focus timer migration completed successfully")}catch(e){throw console.error("Failed to run focus timer migration:",e),e}}const ev="routine_migration_v1";async function cw(){if(localStorage.getItem(ev))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS routine_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        type TEXT NOT NULL DEFAULT 'custom',
        description TEXT NOT NULL DEFAULT '',
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_steps (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        linked_buff_id INTEGER,
        sort_order INTEGER NOT NULL DEFAULT 0,
        duration_minutes INTEGER NOT NULL DEFAULT 5,
        is_optional INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        FOREIGN KEY (linked_buff_id) REFERENCES buff_definitions(id) ON DELETE SET NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        started_at TEXT,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        steps_completed INTEGER NOT NULL DEFAULT 0,
        total_steps INTEGER NOT NULL DEFAULT 0,
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        UNIQUE(routine_id, date)
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_step_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_log_id INTEGER NOT NULL,
        step_id INTEGER NOT NULL,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        skipped INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_log_id) REFERENCES routine_logs(id) ON DELETE CASCADE,
        FOREIGN KEY (step_id) REFERENCES routine_steps(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_streaks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL UNIQUE,
        current_streak INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_completed_date TEXT,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_routine_steps_routine ON routine_steps(routine_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_date ON routine_logs(date)"),n.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_routine ON routine_logs(routine_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_routine_step_logs_log ON routine_step_logs(routine_log_id)"),await ve(),localStorage.setItem(ev,"true"),console.log("Routine migration completed successfully")}catch(e){throw console.error("Failed to run routine migration:",e),e}}const uw=[{name:"Wellness Warrior",description:"Activate Meditation, Exercise, and Healthy Meal buffs",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0},{name:"Focus Master",description:"Activate No Phone First Hour, Deep Work Session, and Read 30+ Minutes",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Early Bird",description:"Activate Morning Exercise, 8 Hours Sleep, and No Phone First Hour",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:35,is_active:!0},{name:"Mind & Body",description:"Activate Meditation, Yoga/Stretching, and Journaling",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Social Champion",description:"Activate Socialised, Helped Someone, and Gratitude Practice",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0}],dw={"Wellness Warrior":["Meditation","Morning Exercise","Healthy Meal"],"Focus Master":["No Phone First Hour","Deep Work Session","Read 30+ Minutes"],"Early Bird":["Morning Exercise","8 Hours Sleep","No Phone First Hour"],"Mind & Body":["Meditation","Yoga / Stretching","Journaling"],"Social Champion":["Socialised","Helped Someone","Gratitude Practice"]},tv="combo_migration_v1";async function fw(){if(localStorage.getItem(tv))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS combo_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        icon TEXT NOT NULL DEFAULT '',
        required_buffs TEXT NOT NULL DEFAULT '[]',
        time_window_hours INTEGER NOT NULL DEFAULT 24,
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS combo_activations (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        combo_id INTEGER NOT NULL,
        activated_at TEXT NOT NULL DEFAULT (datetime('now')),
        buffs_used TEXT NOT NULL DEFAULT '[]',
        FOREIGN KEY (combo_id) REFERENCES combo_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_combo ON combo_activations(combo_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_date ON combo_activations(activated_at)");for(const e of uw){const s=dw[e.name]||[],a=[];for(const o of s){const u=n.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = 'buff' LIMIT 1",[o]);u.length&&u[0].values.length&&a.push(u[0].values[0][0])}a.length>=2&&n.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active)
           VALUES (?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,JSON.stringify(a),e.time_window_hours,e.bonus_xp,e.is_active?1:0])}await ve(),localStorage.setItem(tv,"true"),console.log("Combo migration completed successfully")}catch(e){throw console.error("Failed to run combo migration:",e),e}}const nv="weekly_review_migration_v1";async function hw(){if(localStorage.getItem(nv))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS weekly_reviews (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        generated_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        summary_data TEXT NOT NULL DEFAULT '{}',
        wins TEXT NOT NULL DEFAULT '',
        challenges TEXT NOT NULL DEFAULT '',
        priorities TEXT NOT NULL DEFAULT '[]',
        notes TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_weekly_reviews_week ON weekly_reviews(week_start)"),await ve(),localStorage.setItem(nv,"true"),console.log("Weekly review migration completed successfully")}catch(e){throw console.error("Failed to run weekly review migration:",e),e}}const mw=[{name:"Double XP Hour",description:"All XP gains are doubled for the next hour!",type:"bonus",icon:"",duration_hours:1,effect_type:"xp_multiplier",effect_value:'{"multiplier": 2}',rarity:"rare",weight:10},{name:"Energy Surge",description:"Instantly restore 50 energy!",type:"bonus",icon:"",duration_hours:0,effect_type:"energy_restore",effect_value:'{"amount": 50}',rarity:"common",weight:30},{name:"Streak Shield Drop",description:"A free streak shield has appeared!",type:"bonus",icon:"",duration_hours:0,effect_type:"streak_shield",effect_value:'{"shields": 1}',rarity:"uncommon",weight:15},{name:"XP Bonus",description:"Receive a bonus of 25 XP!",type:"bonus",icon:"",duration_hours:0,effect_type:"xp_bonus",effect_value:'{"amount": 25}',rarity:"common",weight:25},{name:"Sprint Challenge",description:"Complete 5 steps in 2 hours for bonus XP!",type:"challenge",icon:"",duration_hours:2,effect_type:"step_challenge",effect_value:'{"target": 5, "reward_xp": 50}',rarity:"uncommon",weight:20},{name:"Habit Rush",description:"Activate 3 buffs in 4 hours for bonus XP!",type:"challenge",icon:"",duration_hours:4,effect_type:"buff_challenge",effect_value:'{"target": 3, "reward_xp": 40}',rarity:"common",weight:25},{name:"Focus Marathon",description:"Complete 2 focus sessions in 3 hours!",type:"challenge",icon:"",duration_hours:3,effect_type:"focus_challenge",effect_value:'{"target": 2, "reward_xp": 45}',rarity:"uncommon",weight:15},{name:"Stat Boost",description:"All stats increased by +2 for 6 hours!",type:"modifier",icon:"",duration_hours:6,effect_type:"stat_boost",effect_value:'{"all_stats": 2}',rarity:"rare",weight:10},{name:"Lucky Day",description:"Increased chance of rare events for 12 hours!",type:"modifier",icon:"",duration_hours:12,effect_type:"luck_boost",effect_value:'{"rare_chance_bonus": 0.5}',rarity:"epic",weight:5}],pw=.15,_w=4,sv="random_event_migration_v1";async function gw(){if(localStorage.getItem(sv))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS event_templates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        type TEXT NOT NULL,
        icon TEXT NOT NULL,
        duration_hours INTEGER NOT NULL DEFAULT 0,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        rarity TEXT NOT NULL DEFAULT 'common',
        weight INTEGER NOT NULL DEFAULT 10
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS active_events (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        expires_at TEXT NOT NULL,
        is_claimed INTEGER NOT NULL DEFAULT 0,
        claimed_at TEXT,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS event_history (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        event_name TEXT NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        result TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_active_events_expires ON active_events(expires_at)"),n.run("CREATE INDEX IF NOT EXISTS idx_event_history_started ON event_history(started_at)");for(const e of mw)n.run(`INSERT INTO event_templates (name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.type,e.icon,e.duration_hours,e.effect_type,e.effect_value,e.rarity,e.weight]);await ve(),localStorage.setItem(sv,"true"),console.log("Random event migration completed successfully")}catch(e){throw console.error("Failed to run random event migration:",e),e}}const yw=[{name:"Productivity",description:"Quest and step bonuses",icon:"",color:"#3b82f6",sort_order:1},{name:"Health",description:"Energy and stamina bonuses",icon:"",color:"#ef4444",sort_order:2},{name:"Focus",description:"Timer and concentration bonuses",icon:"",color:"#8b5cf6",sort_order:3},{name:"Social",description:"Streak and charisma bonuses",icon:"",color:"#f97316",sort_order:4}],Ew=[{branch_id:1,name:"Quick Learner",description:"+5% XP from steps",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"step_xp_bonus",effect_value:'{"percent": 5}',is_capstone:!1},{branch_id:1,name:"Efficient Worker",description:"+10% XP from quests",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:1,effect_type:"quest_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:1,name:"Goal Master",description:"+15% XP from goals",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:2,effect_type:"goal_xp_bonus",effect_value:'{"percent": 15}',is_capstone:!0},{branch_id:2,name:"Energized",description:"+10 max energy",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"max_energy",effect_value:'{"amount": 10}',is_capstone:!1},{branch_id:2,name:"Quick Recovery",description:"+2 energy regen/hour",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:4,effect_type:"energy_regen",effect_value:'{"amount": 2}',is_capstone:!1},{branch_id:2,name:"Vitality Master",description:"+2 stamina, +2 health",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:5,effect_type:"stat_bonus",effect_value:'{"stamina": 2, "health": 2}',is_capstone:!0},{branch_id:3,name:"Focused Mind",description:"+1 focus stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"focus": 1}',is_capstone:!1},{branch_id:3,name:"Deep Concentration",description:"+10% focus session XP",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:7,effect_type:"focus_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:3,name:"Zen Master",description:"+3 focus, +2 willpower",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:8,effect_type:"stat_bonus",effect_value:'{"focus": 3, "willpower": 2}',is_capstone:!0},{branch_id:4,name:"Charismatic",description:"+1 charisma stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"charisma": 1}',is_capstone:!1},{branch_id:4,name:"Streak Guardian",description:"Streaks last 1 extra day",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:10,effect_type:"streak_extension",effect_value:'{"days": 1}',is_capstone:!1},{branch_id:4,name:"Social Champion",description:"+3 charisma, +10% streak XP",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:11,effect_type:"combined",effect_value:'{"charisma": 3, "streak_xp_bonus": 10}',is_capstone:!0}],iv="skill_tree_migration_v1";async function vw(){if(localStorage.getItem(iv))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS skill_branches (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        color TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS skill_nodes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        branch_id INTEGER NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        tier INTEGER NOT NULL DEFAULT 1,
        position INTEGER NOT NULL DEFAULT 0,
        xp_cost INTEGER NOT NULL DEFAULT 100,
        prerequisite_node_id INTEGER,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        is_capstone INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (branch_id) REFERENCES skill_branches(id) ON DELETE CASCADE,
        FOREIGN KEY (prerequisite_node_id) REFERENCES skill_nodes(id) ON DELETE SET NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS unlocked_skills (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        node_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (node_id) REFERENCES skill_nodes(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_skill_nodes_branch ON skill_nodes(branch_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_unlocked_skills_node ON unlocked_skills(node_id)");for(const e of yw)n.run(`INSERT INTO skill_branches (name, description, icon, color, sort_order)
         VALUES (?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.color,e.sort_order]);for(const e of Ew)n.run(`INSERT INTO skill_nodes (branch_id, name, description, icon, tier, position, xp_cost, prerequisite_node_id, effect_type, effect_value, is_capstone)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.branch_id,e.name,e.description,e.icon,e.tier,e.position,e.xp_cost,e.prerequisite_node_id,e.effect_type,e.effect_value,e.is_capstone?1:0]);await ve(),localStorage.setItem(iv,"true"),console.log("Skill tree migration completed successfully")}catch(e){throw console.error("Failed to run skill tree migration:",e),e}}const Tw=[{key:"warrior",name:"Warrior",description:"Masters of physical challenges and quest completion",icon:"",primary_stat:"stamina",stat_bonuses:'{"stamina": 3, "health": 2}',xp_bonus_type:"quest",xp_bonus_percent:10,special_ability:"Battlecry",special_ability_desc:"Once per day, complete a quest step instantly"},{key:"mage",name:"Mage",description:"Experts in habits and mental discipline",icon:"",primary_stat:"focus",stat_bonuses:'{"focus": 3, "willpower": 2}',xp_bonus_type:"buff",xp_bonus_percent:10,special_ability:"Arcane Focus",special_ability_desc:"Focus sessions grant 20% more XP"},{key:"ranger",name:"Ranger",description:"Specialists in maintaining streaks and consistency",icon:"",primary_stat:"willpower",stat_bonuses:'{"willpower": 3, "stamina": 1, "focus": 1}',xp_bonus_type:"streak",xp_bonus_percent:10,special_ability:"Tracking",special_ability_desc:"Streaks are protected for 1 extra day"},{key:"paladin",name:"Paladin",description:"Champions of boss battles and weekly challenges",icon:"",primary_stat:"health",stat_bonuses:'{"health": 2, "willpower": 2, "charisma": 1}',xp_bonus_type:"boss",xp_bonus_percent:10,special_ability:"Divine Shield",special_ability_desc:"Deal 25% more damage to weekly bosses"}],av=3,rv="character_class_migration_v1";async function bw(){if(localStorage.getItem(rv))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS character_classes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        primary_stat TEXT NOT NULL,
        stat_bonuses TEXT NOT NULL DEFAULT '{}',
        xp_bonus_type TEXT NOT NULL,
        xp_bonus_percent INTEGER NOT NULL DEFAULT 0,
        special_ability TEXT NOT NULL,
        special_ability_desc TEXT NOT NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS character_class_selection (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        class_id INTEGER,
        selected_at TEXT,
        last_changed_at TEXT,
        changes_remaining INTEGER NOT NULL DEFAULT ${av},
        FOREIGN KEY (class_id) REFERENCES character_classes(id) ON DELETE SET NULL
      )
    `),n.exec("SELECT COUNT(*) FROM character_class_selection")[0].values[0][0]===0&&n.run(`INSERT INTO character_class_selection (id, changes_remaining) VALUES (1, ${av})`);for(const s of Tw)n.run(`INSERT INTO character_classes (key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[s.key,s.name,s.description,s.icon,s.primary_stat,s.stat_bonuses,s.xp_bonus_type,s.xp_bonus_percent,s.special_ability,s.special_ability_desc]);await ve(),localStorage.setItem(rv,"true"),console.log("Character class migration completed successfully")}catch(e){throw console.error("Failed to run character class migration:",e),e}}const Sw=[{name:"The Awakening Glade",description:"Where every journey begins. A peaceful clearing filled with morning light.",icon:"",unlock_level:1,background_color:"#22c55e",position_x:50,position_y:80,connected_to:"[2]",challenges:'["Complete your first quest", "Activate 5 buffs", "Reach level 3"]',rewards:'{"xp": 100, "title": "Awakened"}'},{name:"Habit Highlands",description:"Rocky terrain where only consistent habits lead to the summit.",icon:"",unlock_level:5,background_color:"#a3a3a3",position_x:30,position_y:60,connected_to:"[1, 3]",challenges:'["Maintain a 7-day streak", "Complete 10 quests", "Defeat your first boss"]',rewards:'{"xp": 250, "title": "Highland Wanderer"}'},{name:"Focus Forest",description:"Dense woods where only the focused can find their way.",icon:"",unlock_level:10,background_color:"#166534",position_x:70,position_y:50,connected_to:"[2, 4]",challenges:'["Complete 10 focus sessions", "Reach level 15", "Unlock 3 skill nodes"]',rewards:'{"xp": 400, "title": "Forest Pathfinder"}'},{name:"Productivity Plains",description:"Vast open fields where goals are achieved and dreams realized.",icon:"",unlock_level:15,background_color:"#eab308",position_x:50,position_y:35,connected_to:"[3, 5]",challenges:'["Complete 5 goals", "Earn 5000 total XP", "Defeat 5 bosses"]',rewards:'{"xp": 600, "title": "Plains Champion"}'},{name:"Summit of Mastery",description:"The peak where only true masters stand. Your journey culminates here.",icon:"",unlock_level:25,background_color:"#7c3aed",position_x:50,position_y:15,connected_to:"[4]",challenges:'["Reach level 30", "Unlock all capstone skills", "Complete 50 quests"]',rewards:'{"xp": 1000, "title": "Summit Master"}'}],ov="territory_migration_v1";async function Nw(){if(localStorage.getItem(ov))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS territories (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        unlock_level INTEGER NOT NULL DEFAULT 1,
        background_color TEXT NOT NULL DEFAULT '#333333',
        position_x INTEGER NOT NULL DEFAULT 50,
        position_y INTEGER NOT NULL DEFAULT 50,
        connected_to TEXT NOT NULL DEFAULT '[]',
        challenges TEXT NOT NULL DEFAULT '[]',
        rewards TEXT NOT NULL DEFAULT '{}'
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS territory_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        territory_id INTEGER NOT NULL UNIQUE,
        discovered_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        challenges_completed TEXT NOT NULL DEFAULT '[]',
        is_current INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (territory_id) REFERENCES territories(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_territory_progress_territory ON territory_progress(territory_id)");for(const e of Sw)n.run(`INSERT INTO territories (name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.unlock_level,e.background_color,e.position_x,e.position_y,e.connected_to,e.challenges,e.rewards]);n.run("INSERT INTO territory_progress (territory_id, is_current) VALUES (1, 1)"),await ve(),localStorage.setItem(ov,"true"),console.log("Territory migration completed successfully")}catch(e){throw console.error("Failed to run territory migration:",e),e}}const ww=[{name:"Wooden Sword",description:"A basic training sword",icon:"",type:"equipment",slot:"weapon",rarity:"common",stat_effects:'{"stamina": 1}',special_effect:"",stack_limit:1},{name:"Iron Blade",description:"A sturdy iron sword",icon:"",type:"equipment",slot:"weapon",rarity:"uncommon",stat_effects:'{"stamina": 2, "willpower": 1}',special_effect:"",stack_limit:1},{name:"Focus Staff",description:"A staff that enhances concentration",icon:"",type:"equipment",slot:"weapon",rarity:"rare",stat_effects:'{"focus": 3, "willpower": 2}',special_effect:"+5% focus session XP",stack_limit:1},{name:"Dragon Slayer",description:"Legendary weapon forged from dragon scales",icon:"",type:"equipment",slot:"weapon",rarity:"legendary",stat_effects:'{"stamina": 5, "willpower": 3, "health": 2}',special_effect:"+25% boss damage",stack_limit:1},{name:"Leather Vest",description:"Basic protection",icon:"",type:"equipment",slot:"armor",rarity:"common",stat_effects:'{"health": 1}',special_effect:"",stack_limit:1},{name:"Chain Mail",description:"Linked metal rings for defense",icon:"",type:"equipment",slot:"armor",rarity:"uncommon",stat_effects:'{"health": 2, "stamina": 1}',special_effect:"",stack_limit:1},{name:"Mage Robes",description:"Enchanted robes of wisdom",icon:"",type:"equipment",slot:"armor",rarity:"rare",stat_effects:'{"willpower": 3, "focus": 2}',special_effect:"+10% buff duration",stack_limit:1},{name:"Lucky Charm",description:"Brings good fortune",icon:"",type:"equipment",slot:"accessory",rarity:"common",stat_effects:'{"charisma": 1}',special_effect:"",stack_limit:1},{name:"Ring of Focus",description:"Enhances mental clarity",icon:"",type:"equipment",slot:"accessory",rarity:"uncommon",stat_effects:'{"focus": 2}',special_effect:"",stack_limit:1},{name:"Amulet of Persistence",description:"Grants unwavering determination",icon:"",type:"equipment",slot:"accessory",rarity:"rare",stat_effects:'{"willpower": 3, "stamina": 1}',special_effect:"Streaks protected for +1 day",stack_limit:1},{name:"Energy Potion",description:"Restores 25 energy",icon:"",type:"consumable",slot:null,rarity:"common",stat_effects:"{}",special_effect:"restore_energy:25",stack_limit:10},{name:"XP Elixir",description:"Grants 50 bonus XP",icon:"",type:"consumable",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"grant_xp:50",stack_limit:5},{name:"Streak Shield Scroll",description:"Adds a streak shield",icon:"",type:"consumable",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"add_shield:1",stack_limit:3},{name:"First Blood Trophy",description:"Awarded for defeating your first boss",icon:"",type:"trophy",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Streak Champion Medal",description:"Awarded for a 30-day streak",icon:"",type:"trophy",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Mastery Crown",description:"Awarded for reaching level 50",icon:"",type:"trophy",slot:null,rarity:"legendary",stat_effects:"{}",special_effect:"",stack_limit:1}],lv="inventory_migration_v1";async function xw(){if(localStorage.getItem(lv))return;const n=te();try{n.run(`
      CREATE TABLE IF NOT EXISTS item_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        type TEXT NOT NULL,
        slot TEXT,
        rarity TEXT NOT NULL DEFAULT 'common',
        stat_effects TEXT NOT NULL DEFAULT '{}',
        special_effect TEXT NOT NULL DEFAULT '',
        stack_limit INTEGER NOT NULL DEFAULT 1
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS inventory (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        item_id INTEGER NOT NULL,
        quantity INTEGER NOT NULL DEFAULT 1,
        acquired_at TEXT NOT NULL DEFAULT (datetime('now')),
        source TEXT NOT NULL DEFAULT 'unknown',
        FOREIGN KEY (item_id) REFERENCES item_definitions(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS equipped_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        slot TEXT NOT NULL UNIQUE,
        inventory_id INTEGER NOT NULL,
        equipped_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (inventory_id) REFERENCES inventory(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_inventory_item ON inventory(item_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_equipped_items_slot ON equipped_items(slot)");for(const e of ww)n.run(`INSERT INTO item_definitions (name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.type,e.slot,e.rarity,e.stat_effects,e.special_effect,e.stack_limit]);n.run("INSERT INTO inventory (item_id, source) VALUES (1, 'starter')"),n.run("INSERT INTO inventory (item_id, source) VALUES (5, 'starter')"),n.run("INSERT INTO inventory (item_id, quantity, source) VALUES (12, 3, 'starter')"),await ve(),localStorage.setItem(lv,"true"),console.log("Inventory migration completed successfully")}catch(e){throw console.error("Failed to run inventory migration:",e),e}}function Aw(){const[n,e]=L.useState(!1),[s,a]=L.useState(null);return L.useEffect(()=>{HN().then(async()=>{await GN(),await XN(),await $N(),await YN(),await QN(),await KN(),await WN(),await JN(),await nw(),await iw(),await lw(),await cw(),await fw(),await hw(),await gw(),await vw(),await bw(),await Nw(),await xw(),e(!0)}).catch(o=>a(o.message))},[]),{ready:n,error:s}}function cv(){const e=te().exec("SELECT id, name, total_xp, level, title, created_at FROM character WHERE id = 1");if(!e.length)throw new Error("Character not found");const s=e[0].values[0];return{id:s[0],name:s[1],total_xp:s[2],level:s[3],title:s[4],created_at:s[5]}}async function Rw(n){te().run("UPDATE character SET name = ? WHERE id = 1",[n]),await ve()}function uv(n=50){const s=te().exec(`SELECT id, amount, reason, source_type, source_id, created_at
     FROM xp_log ORDER BY created_at DESC LIMIT ?`,[n]);return s.length?s[0].values.map(a=>({id:a[0],amount:a[1],reason:a[2],source_type:a[3],source_id:a[4],created_at:a[5]})):[]}const Bm=["stamina","willpower","health","focus","charisma"],ur=["Novice","Apprentice","Journeyman","Adept","Expert","Master","Legend","Dragonborn"],dv={normal:10,important:15,legendary:20},Cw=50,Iw=200,fv=5,kw=25,Lw=1.8,jw=50;function _p(n){return Math.floor(jw*Math.pow(n,Lw))}function Dw(n){let e=0;for(let s=1;s<n;s++)e+=_p(s);return e}function gp(n){let e=1,s=0;for(;;){if(s+=_p(e),n<s)return e;if(e++,e>100)return 100}}function yp(n){const e=gp(n),s=Dw(e),a=n-s,o=_p(e);return{current:a,needed:o,percentage:Math.min(a/o*100,100)}}function sb(n){return n>=50?ur[7]:n>=40?ur[6]:n>=30?ur[5]:n>=22?ur[4]:n>=15?ur[3]:n>=10?ur[2]:n>=5?ur[1]:ur[0]}async function Ow(n,e,s,a=null){const o=te(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],E=h+n,_=gp(E),S=sb(_),w=_>g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[n,e,s,a]),await ve(),{amount:n,newTotal:E,leveledUp:w,newLevel:_,newTitle:S}}async function Mw(n,e,s,a=null){const o=te(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],E=Math.max(0,h-n),_=gp(E),S=sb(_),w=_<g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[-n,e,s,a]),await ve(),{amount:n,newTotal:E,leveledDown:w,newLevel:_,newTitle:S}}function Uw(){const[n,e]=L.useState(()=>cv()),[s,a]=L.useState(()=>uv()),[o,u]=L.useState(null),[h,g]=L.useState([]),E=L.useCallback(()=>{e(cv()),a(uv())},[]),_=L.useCallback(async(B,X,V,U)=>{const z=await Ow(B,X,V,U??null);z.leveledUp&&u({level:z.newLevel,title:z.newTitle});const G=Date.now();return g(K=>[...K,{id:G,amount:B}]),setTimeout(()=>g(K=>K.filter(oe=>oe.id!==G)),1500),E(),z},[E]),S=L.useCallback(async(B,X,V,U)=>{const z=await Mw(B,X,V,U??null),G=Date.now();return g(K=>[...K,{id:G,amount:-B}]),setTimeout(()=>g(K=>K.filter(oe=>oe.id!==G)),1500),E(),z},[E]),w=L.useCallback(()=>u(null),[]),x=L.useCallback(async B=>{await Rw(B),E()},[E]);return{character:n,xpLog:s,levelUpInfo:o,xpFloats:h,grantXP:_,deductXP:S,dismissLevelUp:w,setName:x,refresh:E}}function ib(){const e=te().exec("SELECT id, name, icon, color FROM domains ORDER BY id");return e.length?e[0].values.map(s=>({id:s[0],name:s[1],icon:s[2],color:s[3]})):[]}function Vw(n,e){const s=te();let a="SELECT id, domain_id, title, description, status, created_at, completed_at FROM goals WHERE 1=1";const o=[];n&&(a+=" AND domain_id = ?",o.push(n)),e&&(a+=" AND status = ?",o.push(e)),a+=" ORDER BY created_at DESC";const u=s.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],domain_id:h[1],title:h[2],description:h[3],status:h[4],created_at:h[5],completed_at:h[6]})):[]}async function qw(n,e,s=""){const a=te();a.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[n,e,s]);const o=a.exec("SELECT last_insert_rowid()");return await ve(),o[0].values[0][0]}async function Bw(n,e){const s=te(),a=new Date().toISOString();s.run("UPDATE goals SET status = ?, completed_at = ? WHERE id = ?",[e,a,n]),await ve()}function Ep(n,e){const s=te();let a="SELECT id, goal_id, title, description, priority, status, created_at, completed_at FROM quests WHERE 1=1";const o=[];n&&(a+=" AND goal_id = ?",o.push(n)),a+=" ORDER BY created_at DESC";const u=s.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],goal_id:h[1],title:h[2],description:h[3],priority:h[4],status:h[5],created_at:h[6],completed_at:h[7]})):[]}async function Pw(n,e,s="",a="normal"){const o=te();o.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[n,e,s,a]);const u=o.exec("SELECT last_insert_rowid()");return await ve(),u[0].values[0][0]}async function Fw(n,e){const s=te(),a=new Date().toISOString();s.run("UPDATE quests SET status = ?, completed_at = ? WHERE id = ?",[e,a,n]),await ve()}function zw(n){const s=te().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at, missed_at FROM steps WHERE id = ?",[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6],missed_at:a[7]}}function vp(n){const s=te().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at, missed_at FROM steps WHERE quest_id = ? ORDER BY sort_order, id",[n]);return s.length?s[0].values.map(a=>({id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6],missed_at:a[7]})):[]}async function Hw(n,e,s="normal"){const a=te(),u=a.exec("SELECT COALESCE(MAX(sort_order), 0) FROM steps WHERE quest_id = ?",[n])[0].values[0][0]+1;a.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[n,e,s,u]);const h=a.exec("SELECT last_insert_rowid()");return await ve(),h[0].values[0][0]}async function Gw(n){te().run("UPDATE steps SET status = 'completed', completed_at = datetime('now') WHERE id = ?",[n]),await ve()}async function Xw(n){te().run("UPDATE steps SET status = 'pending', completed_at = NULL WHERE id = ?",[n]),await ve()}async function $w(n){te().run("DELETE FROM steps WHERE id = ?",[n]),await ve()}async function Yw(n,e=10){const s=te(),a=new Date().toISOString().split("T")[0];s.run("UPDATE steps SET status = 'missed', missed_at = datetime('now') WHERE id = ?",[n]),s.run("INSERT INTO missed_steps_log (step_id, missed_date, xp_penalty) VALUES (?, ?, ?)",[n,a,e]),await ve()}function Qw(){const n=te(),e=new Date().toISOString().split("T")[0],s=n.exec("SELECT COUNT(*) FROM missed_steps_log WHERE missed_date = ?",[e]);return s.length?s[0].values[0][0]:0}async function Kw(n){te().run("UPDATE steps SET status = 'pending', missed_at = NULL WHERE id = ?",[n]),await ve()}async function Ww(n){const e=te();e.run("DELETE FROM steps WHERE quest_id = ?",[n]),e.run("DELETE FROM quests WHERE id = ?",[n]),await ve()}async function Jw(n){const e=te(),s=Ep(n);for(const a of s)e.run("DELETE FROM steps WHERE quest_id = ?",[a.id]);e.run("DELETE FROM quests WHERE goal_id = ?",[n]),e.run("DELETE FROM goals WHERE id = ?",[n]),await ve()}function Zw(n){const s=te().exec(`SELECT q.id, q.goal_id, q.title, q.description, q.priority, q.status, q.created_at, q.completed_at,
            d.name as domain_name, d.icon as domain_icon, d.color as domain_color, g.title as goal_title
     FROM quests q
     JOIN goals g ON q.goal_id = g.id
     JOIN domains d ON g.domain_id = d.id
     WHERE q.id = ?`,[n]);if(!s.length)return null;const a=s[0].values[0];return{id:a[0],goal_id:a[1],title:a[2],description:a[3],priority:a[4],status:a[5],created_at:a[6],completed_at:a[7],domain_name:a[8],domain_icon:a[9],domain_color:a[10],goal_title:a[11],steps:vp(n)}}function ex(n,e){const s=Vw(n,e),a=ib(),o=new Map(a.map(u=>[u.id,u]));return s.map(u=>{const h=o.get(u.domain_id),g=Ep(u.id).map(E=>({...E,steps:vp(E.id),domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color,goal_title:u.title}));return{...u,quests:g,domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color}})}const hv=10;function tx({grantXP:n,onStepComplete:e,onQuestComplete:s,onGoalComplete:a,onStepMissed:o}){const[u,h]=L.useState([]),[g]=L.useState(()=>ib()),[E,_]=L.useState(void 0),[S,w]=L.useState("active"),x=L.useCallback(()=>{h(ex(E,S))},[E,S]);L.useEffect(()=>{x()},[x]);const B=L.useCallback(async(O,j,M)=>{await qw(O,j,M),x()},[x]),X=L.useCallback(async(O,j,M,q)=>{await Pw(O,j,M,q),x()},[x]),V=L.useCallback(async(O,j,M)=>{await Hw(O,j,M),x()},[x]),U=L.useCallback(async(O,j,M)=>{await Gw(O);const q=dv[M]||10;await n(q,"Completed step","step",O),e&&e();const R=vp(j);if(R.every(k=>k.status==="completed")&&R.length>0){await Fw(j,"completed"),await n(Cw,"Completed quest","quest",j),s&&s();const k=Zw(j);k&&Ep(k.goal_id).every(se=>se.status==="completed")&&(await Bw(k.goal_id,"completed"),await n(Iw,"Completed goal","goal",k.goal_id),a&&a())}x()},[x,n,e,s,a]),z=L.useCallback(async O=>{const j=zw(O);if(j){const M=dv[j.priority]||10;await n(-M,"Uncompleted step","step_uncomplete",O)}await Xw(O),x()},[x,n]),G=L.useCallback(async O=>{await $w(O),x()},[x]),K=L.useCallback(async O=>{await Ww(O),x()},[x]),oe=L.useCallback(async O=>{await Jw(O),x()},[x]),ye=L.useCallback(async O=>{await Yw(O,hv),await n(-hv,"Missed step","step_missed",O);const j=Qw();o&&o(j),x()},[x,n,o]),ge=L.useCallback(async O=>{await Kw(O),x()},[x]);return{goals:u,domains:g,filterDomain:E,filterStatus:S,setFilterDomain:_,setFilterStatus:w,refresh:x,createGoal:B,createQuest:X,createStep:V,completeStep:U,uncompleteStep:z,missStep:ye,unmissStep:ge,deleteStep:G,deleteQuest:K,deleteGoal:oe}}function nx(n){const e=te();let s="SELECT id, name, description, type, icon, duration_hours, stat_effects, created_at FROM buff_definitions";const a=[];s+=" ORDER BY name";const o=e.exec(s,a);return o.length?o[0].values.map(u=>({id:u[0],name:u[1],description:u[2],type:u[3],icon:u[4],duration_hours:u[5],stat_effects:u[6],created_at:u[7]})):[]}async function sx(n,e,s,a,o,u){const h=te();h.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[n,e,s,a,o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ve(),g[0].values[0][0]}async function ix(n){const e=te();e.run("DELETE FROM buff_log WHERE definition_id = ?",[n]),e.run("DELETE FROM buff_definitions WHERE id = ?",[n]),await ve()}async function Pm(n){const e=te(),s=e.exec("SELECT duration_hours FROM buff_definitions WHERE id = ?",[n]);if(!s.length)throw new Error("Buff definition not found");const a=s[0].values[0][0],o=e.exec(`SELECT id, expires_at FROM buff_log
     WHERE definition_id = ? AND is_active = 1 AND expires_at > datetime('now')
     ORDER BY expires_at DESC LIMIT 1`,[n]);if(o.length&&o[0].values.length){const _=o[0].values[0][0];e.run(`UPDATE buff_log SET expires_at = datetime(expires_at, '+' || ? || ' hours')
       WHERE id = ?`,[a,_]);const w=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[_])[0].values[0][0];return await ve(),{logId:_,isStacked:!0,newExpiresAt:w}}e.run(`INSERT INTO buff_log (definition_id, expires_at)
     VALUES (?, datetime('now', '+' || ? || ' hours'))`,[n,a]);const h=e.exec("SELECT last_insert_rowid()")[0].values[0][0],E=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[h])[0].values[0][0];return await ve(),{logId:h,isStacked:!1,newExpiresAt:E}}async function ax(n){const e=te(),s=e.exec(`SELECT bl.definition_id, bd.type, bd.name, bd.duration_hours, bl.expires_at, bl.activated_at
     FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bl.id = ?`,[n]);if(!s.length||!s[0].values.length)return null;const[a,o,u,h,g,E]=s[0].values[0],S=e.exec("SELECT datetime(?, '-' || ? || ' hours')",[g,h])[0].values[0][0];return e.exec("SELECT datetime('now') < datetime(?)",[S])[0].values[0][0]===1?(e.run("UPDATE buff_log SET expires_at = ? WHERE id = ?",[S,n]),await ve(),{definitionId:a,buffType:o,buffName:u,fullyDeactivated:!1,newExpiresAt:S}):(e.run("UPDATE buff_log SET is_active = 0 WHERE id = ?",[n]),await ve(),{definitionId:a,buffType:o,buffName:u,fullyDeactivated:!0,newExpiresAt:null})}function rx(n){const s=te().exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-30 days')
     ORDER BY d DESC`,[n]);if(!s.length)return 0;let a=0;const o=new Date().toISOString().split("T")[0],u=s[0].values.map(E=>E[0]),h=new Date(Date.now()-864e5).toISOString().split("T")[0];if(!u.includes(o)&&!u.includes(h))return 0;let g=u.includes(o)?o:h;for(const E of u)if(E===g){a++;const _=new Date(g+"T00:00:00");_.setDate(_.getDate()-1),g=_.toISOString().split("T")[0]}return a}const ox={GUILT:{name:"Guilt",description:"You missed a step. Focus and willpower reduced.",icon:"",duration_hours:4,stat_effects:'{"willpower": -1, "focus": -1}'},OFF_TRACK:{name:"Off Track",description:"You missed 3+ steps today. All stats reduced.",icon:"",duration_hours:24,stat_effects:'{"stamina": -2, "willpower": -2, "health": -2, "focus": -2, "charisma": -2}'}};async function mv(n){const e=te(),s=ox[n],a=e.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = ?",[s.name,"debuff"]);if(a.length&&a[0].values.length)return a[0].values[0][0];e.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[s.name,s.description,"debuff",s.icon,s.duration_hours,s.stat_effects]);const o=e.exec("SELECT last_insert_rowid()");return await ve(),o[0].values[0][0]}async function lx(n){const e=await mv("GUILT");if(await Pm(e),n>=3){const s=await mv("OFF_TRACK");await Pm(s)}}function Mc(n){try{return JSON.parse(n)}catch{return{}}}async function cx(){te().run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1 AND expires_at <= datetime('now')"),await ve()}function ux(){const e=te().exec(`
    SELECT bl.id, bl.definition_id, bl.activated_at, bl.expires_at, bl.is_active,
           bd.name, bd.description, bd.type, bd.icon, bd.stat_effects
    FROM buff_log bl
    JOIN buff_definitions bd ON bl.definition_id = bd.id
    WHERE bl.is_active = 1 AND bl.expires_at > datetime('now')
    ORDER BY bl.activated_at DESC
  `);return e.length?e[0].values.map(s=>({id:s[0],definition_id:s[1],activated_at:s[2],expires_at:s[3],is_active:!!s[4],name:s[5],description:s[6],type:s[7],icon:s[8],stat_effects:s[9]})):[]}function dx(n){const e={stamina:10,willpower:10,health:10,focus:10,charisma:10};for(const s of n){const a=Mc(s.stat_effects);for(const[o,u]of Object.entries(a))o in e&&(e[o]+=u)}return e}function fx({grantXP:n,deductXP:e,scheduleBuffExpiry:s,cancelBuffExpiry:a,onBuffActivated:o}){const[u,h]=L.useState([]),[g,E]=L.useState([]),[_,S]=L.useState({stamina:10,willpower:10,health:10,focus:10,charisma:10}),w=L.useCallback(async()=>{await cx(),h(nx());const U=ux();E(U),S(dx(U))},[]);L.useEffect(()=>{const U=setInterval(w,6e4);return()=>clearInterval(U)},[w]);const x=L.useCallback(async(U,z,G,K,oe,ye)=>{await sx(U,z,G,K,oe,ye),w()},[w]),B=L.useCallback(async U=>{await ix(U),w()},[w]),X=L.useCallback(async U=>{const z=await Pm(U),G=u.find(oe=>oe.id===U),K=G&&G.stat_effects&&G.stat_effects!=="{}"&&(()=>{try{const oe=JSON.parse(G.stat_effects);return Object.values(oe).some(ye=>ye!==0)}catch{return!1}})();if(G&&G.type==="buff"&&K&&(await n(fv,`Activated buff: ${G.name}`,"buff",z.logId),!z.isStacked)){const oe=rx(U);oe>0&&oe%7===0&&await n(kw,`7-day streak: ${G.name}`,"streak",U)}G&&o&&K&&o(G.type),G&&s&&(z.isStacked&&a&&await a(z.logId),await s(z.logId,G.name,G.type,z.newExpiresAt)),w()},[w,u,n,s,a,o]),V=L.useCallback(async U=>{const z=await ax(U);z&&(z.buffType==="buff"&&await e(fv,`Undo buff: ${z.buffName}`,"buff_undo",U),z.fullyDeactivated?a&&await a(U):s&&a&&z.newExpiresAt&&(await a(U),await s(U,z.buffName,z.buffType,z.newExpiresAt))),w()},[w,a,s,e]);return{definitions:u,activeBuffs:g,stats:_,refresh:w,createDefinition:x,deleteDefinition:B,activateBuff:X,deactivateBuff:V}}const hx=1440*60*1e3,ab="Goal Game Backup",Xc="github_gist_token",ba="github_gist_id",Vd="github_last_backup";function mx(){return!!localStorage.getItem(Xc)}function rb(){return!!localStorage.getItem(Xc)}function qd(){return localStorage.getItem(Xc)}function px(n){localStorage.setItem(Xc,n)}function _x(){localStorage.removeItem(Xc),localStorage.removeItem(ba),localStorage.removeItem(Vd)}function gx(){const n=localStorage.getItem(Vd);return n?Date.now()-Number(n)>hx:!0}function ob(){const n=localStorage.getItem(Vd);return n?new Date(Number(n)):null}function yx(n){let e="";for(let s=0;s<n.length;s++)e+=String.fromCharCode(n[s]);return btoa(e)}function Ex(n){const e=atob(n),s=new Uint8Array(e.length);for(let a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s}async function lb(n){try{const e=await fetch("https://api.github.com/gists?per_page=100",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}});if(!e.ok)return null;const s=await e.json();for(const a of s)if(a.description===ab)return a.id;return null}catch{return null}}async function vx(n){const e=localStorage.getItem(ba);if(e){if((await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}})).ok)return e;localStorage.removeItem(ba)}const s=await lb(n);if(s)return localStorage.setItem(ba,s),s;const a=await fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({description:ab,public:!1,files:{"README.md":{content:`# Goal Game Backups

This gist contains automatic backups of your Goal Game data.

Backups are stored as base64-encoded database files.`}}})});if(!a.ok)throw new Error("Failed to create backup gist");const o=await a.json();return localStorage.setItem(ba,o.id),o.id}async function cb(n){const e=qd();if(!e)return{success:!1,error:"Not authenticated"};try{const s=await vx(e),o=`backup-${new Date().toISOString().replace(/[:.]/g,"-")}.db.b64`,u=yx(n),h=await fetch(`https://api.github.com/gists/${s}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:{[o]:{content:u}}})});return h.ok?(localStorage.setItem(Vd,String(Date.now())),{success:!0,fileName:o}):{success:!1,error:(await h.json()).message||"Upload failed"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async function ub(){const n=qd();if(!n)return[];let e=localStorage.getItem(ba);if(!e)if(e=await lb(n),e)localStorage.setItem(ba,e);else return[];try{const s=await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}});if(!s.ok)return[];const a=await s.json(),o=[];for(const[u,h]of Object.entries(a.files))u.endsWith(".db.b64")&&o.push({fileName:u,size:h.size});return o.sort((u,h)=>h.fileName.localeCompare(u.fileName))}catch{return[]}}async function Tx(n){const e=qd();if(!e)return null;const s=localStorage.getItem(ba);if(!s)return null;try{const a=await fetch(`https://api.github.com/gists/${s}`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json"}});if(!a.ok)return null;const u=(await a.json()).files[n];if(!u)return null;let h;return u.truncated?h=await(await fetch(u.raw_url,{headers:{Authorization:`Bearer ${e}`}})).text():h=u.content,Ex(h)}catch{return null}}async function bx(n){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}})).ok}catch{return!1}}async function db(n=7){const e=qd();if(!e)return;const s=localStorage.getItem(ba);if(s)try{const a=await ub();if(a.length<=n)return;const o=a.slice(n),u={};for(const h of o)u[h.fileName]=null;await fetch(`https://api.github.com/gists/${s}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:u})})}catch{}}function Sx(){const[n,e]=L.useState("idle"),[s,a]=L.useState(null),[o,u]=L.useState(""),h=L.useRef(!1);return L.useEffect(()=>{if(h.current)return;h.current=!0;const E=setTimeout(async()=>{if(mx()&&rb()){if(!gx()){a(ob());return}e("backing-up"),u("Auto-backing up to GitHub...");try{const _=await pp(),S=await cb(_);S.success?(e("success"),u("Auto-backup complete!"),a(new Date),await db(7),setTimeout(()=>{e("idle"),u("")},5e3)):(e("error"),u(`Auto-backup failed: ${S.error}`))}catch(_){e("error"),u(`Auto-backup failed: ${_ instanceof Error?_.message:"Unknown error"}`)}}},3e3);return()=>clearTimeout(E)},[]),{status:n,lastBackup:s,message:o}}const Nx=()=>{};var pv={};const fb=function(n){const e=[];let s=0;for(let a=0;a<n.length;a++){let o=n.charCodeAt(a);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++a)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},wx=function(n){const e=[];let s=0,a=0;for(;s<n.length;){const o=n[s++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[s++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[s++],h=n[s++],g=n[s++],E=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(E>>10)),e[a++]=String.fromCharCode(56320+(E&1023))}else{const u=n[s++],h=n[s++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<n.length;o+=3){const u=n[o],h=o+1<n.length,g=h?n[o+1]:0,E=o+2<n.length,_=E?n[o+2]:0,S=u>>2,w=(u&3)<<4|g>>4;let x=(g&15)<<2|_>>6,B=_&63;E||(B=64,h||(x=64)),a.push(s[S],s[w],s[x],s[B])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<n.length;){const u=s[n.charAt(o++)],g=o<n.length?s[n.charAt(o)]:0;++o;const _=o<n.length?s[n.charAt(o)]:64;++o;const w=o<n.length?s[n.charAt(o)]:64;if(++o,u==null||g==null||_==null||w==null)throw new xx;const x=u<<2|g>>4;if(a.push(x),_!==64){const B=g<<4&240|_>>2;if(a.push(B),w!==64){const X=_<<6&192|w;a.push(X)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ax=function(n){const e=fb(n);return hb.encodeByteArray(e,!0)},yd=function(n){return Ax(n).replace(/\./g,"")},Rx=function(n){try{return hb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ix=()=>Cx().__FIREBASE_DEFAULTS__,kx=()=>{if(typeof process>"u"||typeof pv>"u")return;const n=pv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Lx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rx(n[1]);return e&&JSON.parse(e)},Tp=()=>{try{return Nx()||Ix()||kx()||Lx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jx=n=>Tp()?.emulatorHosts?.[n],Dx=n=>{const e=jx(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),a]:[e.substring(0,s),a]},mb=()=>Tp()?.config;class Ox{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,a)=>{s?this.reject(s):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,a))}}}function bp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mx(n){return(await fetch(n,{credentials:"include"})).ok}function Ux(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},a=e||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yd(JSON.stringify(s)),yd(JSON.stringify(h)),""].join(".")}const Ic={};function Vx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?n.emulator.push(e):n.prod.push(e);return n}function qx(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let _v=!1;function Bx(n,e){if(typeof window>"u"||typeof document>"u"||!bp(window.location.host)||Ic[n]===e||Ic[n]||_v)return;Ic[n]=e;function s(x){return`__firebase__banner__${x}`}const a="__firebase__banner",u=Vx().prod.length>0;function h(){const x=document.getElementById(a);x&&x.remove()}function g(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function E(x,B){x.setAttribute("width","24"),x.setAttribute("id",B),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function _(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{_v=!0,h()},x}function S(x,B){x.setAttribute("id",B),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=qx(a),B=s("text"),X=document.getElementById(B)||document.createElement("span"),V=s("learnmore"),U=document.getElementById(V)||document.createElement("a"),z=s("preprendIcon"),G=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const K=x.element;g(K),S(U,V);const oe=_();E(G,z),K.append(G,X,U,oe),document.body.appendChild(K)}u?(X.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Px(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fx(){const n=Tp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zx(){return!Fx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pb(){try{return typeof indexedDB=="object"}catch{return!1}}function _b(){return new Promise((n,e)=>{try{let s=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(a),n(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}function Hx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Gx="FirebaseError";class co extends Error{constructor(e,s,a){super(s),this.code=e,this.customData=a,this.name=Gx,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bd.prototype.create)}}class Bd{constructor(e,s,a){this.service=e,this.serviceName=s,this.errors=a}create(e,...s){const a=s[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Xx(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new co(o,g,a)}}function Xx(n,e){return n.replace($x,(s,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const $x=/\{\$([^}]+)}/g;function Ed(n,e){if(n===e)return!0;const s=Object.keys(n),a=Object.keys(e);for(const o of s){if(!a.includes(o))return!1;const u=n[o],h=e[o];if(gv(u)&&gv(h)){if(!Ed(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!s.includes(o))return!1;return!0}function gv(n){return n!==null&&typeof n=="object"}function xa(n){return n&&n._delegate?n._delegate:n}class Aa{constructor(e,s,a){this.name=e,this.instanceFactory=s,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const to="[DEFAULT]";class Yx{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const a=new Ox;if(this.instancesDeferred.set(s,a),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kx(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:s});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,s){const a=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const a=this.onInitCallbacks.get(s);if(a)for(const o of a)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Qx(e),options:s}),this.instances.set(e,a),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qx(n){return n===to?void 0:n}function Kx(n){return n.instantiationMode==="EAGER"}class Wx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Yx(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}var St;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(St||(St={}));const Jx={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},Zx=St.INFO,eA={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},tA=(n,e,...s)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),o=eA[e];if(o)console[o](`[${a}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gb{constructor(e){this.name=e,this._logLevel=Zx,this._logHandler=tA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const nA=(n,e)=>e.some(s=>n instanceof s);let yv,Ev;function sA(){return yv||(yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iA(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yb=new WeakMap,Fm=new WeakMap,Eb=new WeakMap,pm=new WeakMap,Sp=new WeakMap;function aA(n){const e=new Promise((s,a)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",h)},u=()=>{s(Na(n.result)),o()},h=()=>{a(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",h)});return e.then(s=>{s instanceof IDBCursor&&yb.set(s,n)}).catch(()=>{}),Sp.set(e,n),e}function rA(n){if(Fm.has(n))return;const e=new Promise((s,a)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",h),n.removeEventListener("abort",h)},u=()=>{s(),o()},h=()=>{a(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",h),n.addEventListener("abort",h)});Fm.set(n,e)}let zm={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return Fm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Eb.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Na(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function oA(n){zm=n(zm)}function lA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const a=n.call(_m(this),e,...s);return Eb.set(a,e.sort?e.sort():[e]),Na(a)}:iA().includes(n)?function(...e){return n.apply(_m(this),e),Na(yb.get(this))}:function(...e){return Na(n.apply(_m(this),e))}}function cA(n){return typeof n=="function"?lA(n):(n instanceof IDBTransaction&&rA(n),nA(n,sA())?new Proxy(n,zm):n)}function Na(n){if(n instanceof IDBRequest)return aA(n);if(pm.has(n))return pm.get(n);const e=cA(n);return e!==n&&(pm.set(n,e),Sp.set(e,n)),e}const _m=n=>Sp.get(n);function Pd(n,e,{blocked:s,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(n,e),g=Na(h);return a&&h.addEventListener("upgradeneeded",E=>{a(Na(h.result),E.oldVersion,E.newVersion,Na(h.transaction),E)}),s&&h.addEventListener("blocked",E=>s(E.oldVersion,E.newVersion,E)),g.then(E=>{u&&E.addEventListener("close",()=>u()),o&&E.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}function gm(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",a=>e(a.oldVersion,a)),Na(s).then(()=>{})}const uA=["get","getKey","getAll","getAllKeys","count"],dA=["put","add","delete","clear"],ym=new Map;function vv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const s=e.replace(/FromIndex$/,""),a=e!==s,o=dA.includes(s);if(!(s in(a?IDBIndex:IDBObjectStore).prototype)||!(o||uA.includes(s)))return;const u=async function(h,...g){const E=this.transaction(h,o?"readwrite":"readonly");let _=E.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[s](...g),o&&E.done]))[0]};return ym.set(e,u),u}oA(n=>({...n,get:(e,s,a)=>vv(e,s)||n.get(e,s,a),has:(e,s)=>!!vv(e,s)||n.has(e,s)}));class fA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(hA(s)){const a=s.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(s=>s).join(" ")}}function hA(n){return n.getComponent()?.type==="VERSION"}const Hm="@firebase/app",Tv="0.14.7";const Ra=new gb("@firebase/app"),mA="@firebase/app-compat",pA="@firebase/analytics-compat",_A="@firebase/analytics",gA="@firebase/app-check-compat",yA="@firebase/app-check",EA="@firebase/auth",vA="@firebase/auth-compat",TA="@firebase/database",bA="@firebase/data-connect",SA="@firebase/database-compat",NA="@firebase/functions",wA="@firebase/functions-compat",xA="@firebase/installations",AA="@firebase/installations-compat",RA="@firebase/messaging",CA="@firebase/messaging-compat",IA="@firebase/performance",kA="@firebase/performance-compat",LA="@firebase/remote-config",jA="@firebase/remote-config-compat",DA="@firebase/storage",OA="@firebase/storage-compat",MA="@firebase/firestore",UA="@firebase/ai",VA="@firebase/firestore-compat",qA="firebase",BA="12.8.0";const Gm="[DEFAULT]",PA={[Hm]:"fire-core",[mA]:"fire-core-compat",[_A]:"fire-analytics",[pA]:"fire-analytics-compat",[yA]:"fire-app-check",[gA]:"fire-app-check-compat",[EA]:"fire-auth",[vA]:"fire-auth-compat",[TA]:"fire-rtdb",[bA]:"fire-data-connect",[SA]:"fire-rtdb-compat",[NA]:"fire-fn",[wA]:"fire-fn-compat",[xA]:"fire-iid",[AA]:"fire-iid-compat",[RA]:"fire-fcm",[CA]:"fire-fcm-compat",[IA]:"fire-perf",[kA]:"fire-perf-compat",[LA]:"fire-rc",[jA]:"fire-rc-compat",[DA]:"fire-gcs",[OA]:"fire-gcs-compat",[MA]:"fire-fst",[VA]:"fire-fst-compat",[UA]:"fire-vertex","fire-js":"fire-js",[qA]:"fire-js-all"};const vd=new Map,FA=new Map,Xm=new Map;function bv(n,e){try{n.container.addComponent(e)}catch(s){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function gr(n){const e=n.name;if(Xm.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,n);for(const s of vd.values())bv(s,n);for(const s of FA.values())bv(s,n);return!0}function Fd(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function zA(n){return n==null?!1:n.settings!==void 0}const HA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new Bd("app","Firebase",HA);class GA{constructor(e,s,a){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const XA=BA;function vb(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const a={name:Gm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw hr.create("bad-app-name",{appName:String(o)});if(s||(s=mb()),!s)throw hr.create("no-options");const u=vd.get(o);if(u){if(Ed(s,u.options)&&Ed(a,u.config))return u;throw hr.create("duplicate-app",{appName:o})}const h=new Wx(o);for(const E of Xm.values())h.addComponent(E);const g=new GA(s,a,h);return vd.set(o,g),g}function Tb(n=Gm){const e=vd.get(n);if(!e&&n===Gm&&mb())return vb();if(!e)throw hr.create("no-app",{appName:n});return e}function Pi(n,e,s){let a=PA[n]??n;s&&(a+=`-${s}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(h.join(" "));return}gr(new Aa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const $A="firebase-heartbeat-database",YA=1,Uc="firebase-heartbeat-store";let Em=null;function bb(){return Em||(Em=Pd($A,YA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uc)}catch(s){console.warn(s)}}}}).catch(n=>{throw hr.create("idb-open",{originalErrorMessage:n.message})})),Em}async function QA(n){try{const s=(await bb()).transaction(Uc),a=await s.objectStore(Uc).get(Sb(n));return await s.done,a}catch(e){if(e instanceof co)Ra.warn(e.message);else{const s=hr.create("idb-get",{originalErrorMessage:e?.message});Ra.warn(s.message)}}}async function Sv(n,e){try{const a=(await bb()).transaction(Uc,"readwrite");await a.objectStore(Uc).put(e,Sb(n)),await a.done}catch(s){if(s instanceof co)Ra.warn(s.message);else{const a=hr.create("idb-set",{originalErrorMessage:s?.message});Ra.warn(a.message)}}}function Sb(n){return`${n.name}!${n.options.appId}`}const KA=1024,WA=30;class JA{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new eR(s),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Nv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>WA){const o=tR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ra.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Nv(),{heartbeatsToSend:s,unsentEntries:a}=ZA(this._heartbeatsCache.heartbeats),o=yd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ra.warn(e),""}}}function Nv(){return new Date().toISOString().substring(0,10)}function ZA(n,e=KA){const s=[];let a=n.slice();for(const o of n){const u=s.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),wv(s)>e){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),wv(s)>e){s.pop();break}a=a.slice(1)}return{heartbeatsToSend:s,unsentEntries:a}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pb()?_b().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await QA(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function wv(n){return yd(JSON.stringify({version:2,heartbeats:n})).length}function tR(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let a=1;a<n.length;a++)n[a].date<s&&(s=n[a].date,e=a);return e}function nR(n){gr(new Aa("platform-logger",e=>new fA(e),"PRIVATE")),gr(new Aa("heartbeat",e=>new JA(e),"PRIVATE")),Pi(Hm,Tv,n),Pi(Hm,Tv,"esm2020"),Pi("fire-js","")}nR("");var sR="firebase",iR="12.8.0";Pi(sR,iR,"app");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mr,Nb;(function(){var n;function e(O,j){function M(){}M.prototype=j.prototype,O.F=j.prototype,O.prototype=new M,O.prototype.constructor=O,O.D=function(q,R,D){for(var k=Array(arguments.length-2),we=2;we<arguments.length;we++)k[we-2]=arguments[we];return j.prototype[R].apply(q,k)}}function s(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,s),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,j,M){M||(M=0);const q=Array(16);if(typeof j=="string")for(var R=0;R<16;++R)q[R]=j.charCodeAt(M++)|j.charCodeAt(M++)<<8|j.charCodeAt(M++)<<16|j.charCodeAt(M++)<<24;else for(R=0;R<16;++R)q[R]=j[M++]|j[M++]<<8|j[M++]<<16|j[M++]<<24;j=O.g[0],M=O.g[1],R=O.g[2];let D=O.g[3],k;k=j+(D^M&(R^D))+q[0]+3614090360&4294967295,j=M+(k<<7&4294967295|k>>>25),k=D+(R^j&(M^R))+q[1]+3905402710&4294967295,D=j+(k<<12&4294967295|k>>>20),k=R+(M^D&(j^M))+q[2]+606105819&4294967295,R=D+(k<<17&4294967295|k>>>15),k=M+(j^R&(D^j))+q[3]+3250441966&4294967295,M=R+(k<<22&4294967295|k>>>10),k=j+(D^M&(R^D))+q[4]+4118548399&4294967295,j=M+(k<<7&4294967295|k>>>25),k=D+(R^j&(M^R))+q[5]+1200080426&4294967295,D=j+(k<<12&4294967295|k>>>20),k=R+(M^D&(j^M))+q[6]+2821735955&4294967295,R=D+(k<<17&4294967295|k>>>15),k=M+(j^R&(D^j))+q[7]+4249261313&4294967295,M=R+(k<<22&4294967295|k>>>10),k=j+(D^M&(R^D))+q[8]+1770035416&4294967295,j=M+(k<<7&4294967295|k>>>25),k=D+(R^j&(M^R))+q[9]+2336552879&4294967295,D=j+(k<<12&4294967295|k>>>20),k=R+(M^D&(j^M))+q[10]+4294925233&4294967295,R=D+(k<<17&4294967295|k>>>15),k=M+(j^R&(D^j))+q[11]+2304563134&4294967295,M=R+(k<<22&4294967295|k>>>10),k=j+(D^M&(R^D))+q[12]+1804603682&4294967295,j=M+(k<<7&4294967295|k>>>25),k=D+(R^j&(M^R))+q[13]+4254626195&4294967295,D=j+(k<<12&4294967295|k>>>20),k=R+(M^D&(j^M))+q[14]+2792965006&4294967295,R=D+(k<<17&4294967295|k>>>15),k=M+(j^R&(D^j))+q[15]+1236535329&4294967295,M=R+(k<<22&4294967295|k>>>10),k=j+(R^D&(M^R))+q[1]+4129170786&4294967295,j=M+(k<<5&4294967295|k>>>27),k=D+(M^R&(j^M))+q[6]+3225465664&4294967295,D=j+(k<<9&4294967295|k>>>23),k=R+(j^M&(D^j))+q[11]+643717713&4294967295,R=D+(k<<14&4294967295|k>>>18),k=M+(D^j&(R^D))+q[0]+3921069994&4294967295,M=R+(k<<20&4294967295|k>>>12),k=j+(R^D&(M^R))+q[5]+3593408605&4294967295,j=M+(k<<5&4294967295|k>>>27),k=D+(M^R&(j^M))+q[10]+38016083&4294967295,D=j+(k<<9&4294967295|k>>>23),k=R+(j^M&(D^j))+q[15]+3634488961&4294967295,R=D+(k<<14&4294967295|k>>>18),k=M+(D^j&(R^D))+q[4]+3889429448&4294967295,M=R+(k<<20&4294967295|k>>>12),k=j+(R^D&(M^R))+q[9]+568446438&4294967295,j=M+(k<<5&4294967295|k>>>27),k=D+(M^R&(j^M))+q[14]+3275163606&4294967295,D=j+(k<<9&4294967295|k>>>23),k=R+(j^M&(D^j))+q[3]+4107603335&4294967295,R=D+(k<<14&4294967295|k>>>18),k=M+(D^j&(R^D))+q[8]+1163531501&4294967295,M=R+(k<<20&4294967295|k>>>12),k=j+(R^D&(M^R))+q[13]+2850285829&4294967295,j=M+(k<<5&4294967295|k>>>27),k=D+(M^R&(j^M))+q[2]+4243563512&4294967295,D=j+(k<<9&4294967295|k>>>23),k=R+(j^M&(D^j))+q[7]+1735328473&4294967295,R=D+(k<<14&4294967295|k>>>18),k=M+(D^j&(R^D))+q[12]+2368359562&4294967295,M=R+(k<<20&4294967295|k>>>12),k=j+(M^R^D)+q[5]+4294588738&4294967295,j=M+(k<<4&4294967295|k>>>28),k=D+(j^M^R)+q[8]+2272392833&4294967295,D=j+(k<<11&4294967295|k>>>21),k=R+(D^j^M)+q[11]+1839030562&4294967295,R=D+(k<<16&4294967295|k>>>16),k=M+(R^D^j)+q[14]+4259657740&4294967295,M=R+(k<<23&4294967295|k>>>9),k=j+(M^R^D)+q[1]+2763975236&4294967295,j=M+(k<<4&4294967295|k>>>28),k=D+(j^M^R)+q[4]+1272893353&4294967295,D=j+(k<<11&4294967295|k>>>21),k=R+(D^j^M)+q[7]+4139469664&4294967295,R=D+(k<<16&4294967295|k>>>16),k=M+(R^D^j)+q[10]+3200236656&4294967295,M=R+(k<<23&4294967295|k>>>9),k=j+(M^R^D)+q[13]+681279174&4294967295,j=M+(k<<4&4294967295|k>>>28),k=D+(j^M^R)+q[0]+3936430074&4294967295,D=j+(k<<11&4294967295|k>>>21),k=R+(D^j^M)+q[3]+3572445317&4294967295,R=D+(k<<16&4294967295|k>>>16),k=M+(R^D^j)+q[6]+76029189&4294967295,M=R+(k<<23&4294967295|k>>>9),k=j+(M^R^D)+q[9]+3654602809&4294967295,j=M+(k<<4&4294967295|k>>>28),k=D+(j^M^R)+q[12]+3873151461&4294967295,D=j+(k<<11&4294967295|k>>>21),k=R+(D^j^M)+q[15]+530742520&4294967295,R=D+(k<<16&4294967295|k>>>16),k=M+(R^D^j)+q[2]+3299628645&4294967295,M=R+(k<<23&4294967295|k>>>9),k=j+(R^(M|~D))+q[0]+4096336452&4294967295,j=M+(k<<6&4294967295|k>>>26),k=D+(M^(j|~R))+q[7]+1126891415&4294967295,D=j+(k<<10&4294967295|k>>>22),k=R+(j^(D|~M))+q[14]+2878612391&4294967295,R=D+(k<<15&4294967295|k>>>17),k=M+(D^(R|~j))+q[5]+4237533241&4294967295,M=R+(k<<21&4294967295|k>>>11),k=j+(R^(M|~D))+q[12]+1700485571&4294967295,j=M+(k<<6&4294967295|k>>>26),k=D+(M^(j|~R))+q[3]+2399980690&4294967295,D=j+(k<<10&4294967295|k>>>22),k=R+(j^(D|~M))+q[10]+4293915773&4294967295,R=D+(k<<15&4294967295|k>>>17),k=M+(D^(R|~j))+q[1]+2240044497&4294967295,M=R+(k<<21&4294967295|k>>>11),k=j+(R^(M|~D))+q[8]+1873313359&4294967295,j=M+(k<<6&4294967295|k>>>26),k=D+(M^(j|~R))+q[15]+4264355552&4294967295,D=j+(k<<10&4294967295|k>>>22),k=R+(j^(D|~M))+q[6]+2734768916&4294967295,R=D+(k<<15&4294967295|k>>>17),k=M+(D^(R|~j))+q[13]+1309151649&4294967295,M=R+(k<<21&4294967295|k>>>11),k=j+(R^(M|~D))+q[4]+4149444226&4294967295,j=M+(k<<6&4294967295|k>>>26),k=D+(M^(j|~R))+q[11]+3174756917&4294967295,D=j+(k<<10&4294967295|k>>>22),k=R+(j^(D|~M))+q[2]+718787259&4294967295,R=D+(k<<15&4294967295|k>>>17),k=M+(D^(R|~j))+q[9]+3951481745&4294967295,O.g[0]=O.g[0]+j&4294967295,O.g[1]=O.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,O.g[2]=O.g[2]+R&4294967295,O.g[3]=O.g[3]+D&4294967295}a.prototype.v=function(O,j){j===void 0&&(j=O.length);const M=j-this.blockSize,q=this.C;let R=this.h,D=0;for(;D<j;){if(R==0)for(;D<=M;)o(this,O,D),D+=this.blockSize;if(typeof O=="string"){for(;D<j;)if(q[R++]=O.charCodeAt(D++),R==this.blockSize){o(this,q),R=0;break}}else for(;D<j;)if(q[R++]=O[D++],R==this.blockSize){o(this,q),R=0;break}}this.h=R,this.o+=j},a.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var j=1;j<O.length-8;++j)O[j]=0;j=this.o*8;for(var M=O.length-8;M<O.length;++M)O[M]=j&255,j/=256;for(this.v(O),O=Array(16),j=0,M=0;M<4;++M)for(let q=0;q<32;q+=8)O[j++]=this.g[M]>>>q&255;return O};function u(O,j){var M=g;return Object.prototype.hasOwnProperty.call(M,O)?M[O]:M[O]=j(O)}function h(O,j){this.h=j;const M=[];let q=!0;for(let R=O.length-1;R>=0;R--){const D=O[R]|0;q&&D==j||(M[R]=D,q=!1)}this.g=M}var g={};function E(O){return-128<=O&&O<128?u(O,function(j){return new h([j|0],j<0?-1:0)}):new h([O|0],O<0?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return w;if(O<0)return U(_(-O));const j=[];let M=1;for(let q=0;O>=M;q++)j[q]=O/M|0,M*=4294967296;return new h(j,0)}function S(O,j){if(O.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(O.charAt(0)=="-")return U(S(O.substring(1),j));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=_(Math.pow(j,8));let q=w;for(let D=0;D<O.length;D+=8){var R=Math.min(8,O.length-D);const k=parseInt(O.substring(D,D+R),j);R<8?(R=_(Math.pow(j,R)),q=q.j(R).add(_(k))):(q=q.j(M),q=q.add(_(k)))}return q}var w=E(0),x=E(1),B=E(16777216);n=h.prototype,n.m=function(){if(V(this))return-U(this).m();let O=0,j=1;for(let M=0;M<this.g.length;M++){const q=this.i(M);O+=(q>=0?q:4294967296+q)*j,j*=4294967296}return O},n.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(X(this))return"0";if(V(this))return"-"+U(this).toString(O);const j=_(Math.pow(O,6));var M=this;let q="";for(;;){const R=oe(M,j).g;M=z(M,R.j(j));let D=((M.g.length>0?M.g[0]:M.h)>>>0).toString(O);if(M=R,X(M))return D+q;for(;D.length<6;)D="0"+D;q=D+q}},n.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function X(O){if(O.h!=0)return!1;for(let j=0;j<O.g.length;j++)if(O.g[j]!=0)return!1;return!0}function V(O){return O.h==-1}n.l=function(O){return O=z(this,O),V(O)?-1:X(O)?0:1};function U(O){const j=O.g.length,M=[];for(let q=0;q<j;q++)M[q]=~O.g[q];return new h(M,~O.h).add(x)}n.abs=function(){return V(this)?U(this):this},n.add=function(O){const j=Math.max(this.g.length,O.g.length),M=[];let q=0;for(let R=0;R<=j;R++){let D=q+(this.i(R)&65535)+(O.i(R)&65535),k=(D>>>16)+(this.i(R)>>>16)+(O.i(R)>>>16);q=k>>>16,D&=65535,k&=65535,M[R]=k<<16|D}return new h(M,M[M.length-1]&-2147483648?-1:0)};function z(O,j){return O.add(U(j))}n.j=function(O){if(X(this)||X(O))return w;if(V(this))return V(O)?U(this).j(U(O)):U(U(this).j(O));if(V(O))return U(this.j(U(O)));if(this.l(B)<0&&O.l(B)<0)return _(this.m()*O.m());const j=this.g.length+O.g.length,M=[];for(var q=0;q<2*j;q++)M[q]=0;for(q=0;q<this.g.length;q++)for(let R=0;R<O.g.length;R++){const D=this.i(q)>>>16,k=this.i(q)&65535,we=O.i(R)>>>16,Je=O.i(R)&65535;M[2*q+2*R]+=k*Je,G(M,2*q+2*R),M[2*q+2*R+1]+=D*Je,G(M,2*q+2*R+1),M[2*q+2*R+1]+=k*we,G(M,2*q+2*R+1),M[2*q+2*R+2]+=D*we,G(M,2*q+2*R+2)}for(O=0;O<j;O++)M[O]=M[2*O+1]<<16|M[2*O];for(O=j;O<2*j;O++)M[O]=0;return new h(M,0)};function G(O,j){for(;(O[j]&65535)!=O[j];)O[j+1]+=O[j]>>>16,O[j]&=65535,j++}function K(O,j){this.g=O,this.h=j}function oe(O,j){if(X(j))throw Error("division by zero");if(X(O))return new K(w,w);if(V(O))return j=oe(U(O),j),new K(U(j.g),U(j.h));if(V(j))return j=oe(O,U(j)),new K(U(j.g),j.h);if(O.g.length>30){if(V(O)||V(j))throw Error("slowDivide_ only works with positive integers.");for(var M=x,q=j;q.l(O)<=0;)M=ye(M),q=ye(q);var R=ge(M,1),D=ge(q,1);for(q=ge(q,2),M=ge(M,2);!X(q);){var k=D.add(q);k.l(O)<=0&&(R=R.add(M),D=k),q=ge(q,1),M=ge(M,1)}return j=z(O,R.j(j)),new K(R,j)}for(R=w;O.l(j)>=0;){for(M=Math.max(1,Math.floor(O.m()/j.m())),q=Math.ceil(Math.log(M)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),D=_(M),k=D.j(j);V(k)||k.l(O)>0;)M-=q,D=_(M),k=D.j(j);X(D)&&(D=x),R=R.add(D),O=z(O,k)}return new K(R,O)}n.B=function(O){return oe(this,O).h},n.and=function(O){const j=Math.max(this.g.length,O.g.length),M=[];for(let q=0;q<j;q++)M[q]=this.i(q)&O.i(q);return new h(M,this.h&O.h)},n.or=function(O){const j=Math.max(this.g.length,O.g.length),M=[];for(let q=0;q<j;q++)M[q]=this.i(q)|O.i(q);return new h(M,this.h|O.h)},n.xor=function(O){const j=Math.max(this.g.length,O.g.length),M=[];for(let q=0;q<j;q++)M[q]=this.i(q)^O.i(q);return new h(M,this.h^O.h)};function ye(O){const j=O.g.length+1,M=[];for(let q=0;q<j;q++)M[q]=O.i(q)<<1|O.i(q-1)>>>31;return new h(M,O.h)}function ge(O,j){const M=j>>5;j%=32;const q=O.g.length-M,R=[];for(let D=0;D<q;D++)R[D]=j>0?O.i(D+M)>>>j|O.i(D+M+1)<<32-j:O.i(D+M);return new h(R,O.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Nb=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=S,mr=h}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wb,Ac,xb,dd,$m,Ab,Rb,Cb;(function(){var n,e=Object.defineProperty;function s(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=s(this);function o(d,v){if(v)e:{var b=a;d=d.split(".");for(var I=0;I<d.length-1;I++){var J=d[I];if(!(J in b))break e;b=b[J]}d=d[d.length-1],I=b[d],v=v(I),v!=I&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var b=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&b.push([I,v[I]]);return b}});var u=u||{},h=this||self;function g(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function E(d,v,b){return d.call.apply(d.bind,arguments)}function _(d,v,b){return _=E,_.apply(null,arguments)}function S(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function w(d,v){function b(){}b.prototype=v.prototype,d.Z=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(I,J,re){for(var Ne=Array(arguments.length-2),We=2;We<arguments.length;We++)Ne[We-2]=arguments[We];return v.prototype[J].apply(I,Ne)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function B(d){const v=d.length;if(v>0){const b=Array(v);for(let I=0;I<v;I++)b[I]=d[I];return b}return[]}function X(d,v){for(let I=1;I<arguments.length;I++){const J=arguments[I];var b=typeof J;if(b=b!="object"?b:J?Array.isArray(J)?"array":b:"null",b=="array"||b=="object"&&typeof J.length=="number"){b=d.length||0;const re=J.length||0;d.length=b+re;for(let Ne=0;Ne<re;Ne++)d[b+Ne]=J[Ne]}else d.push(J)}}class V{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(d){h.setTimeout(()=>{throw d},0)}function z(){var d=O;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class G{constructor(){this.h=this.g=null}add(v,b){const I=K.get();I.set(v,b),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new V(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,ge=!1,O=new G,j=()=>{const d=Promise.resolve(void 0);ye=()=>{d.then(M)}};function M(){for(var d;d=z();){try{d.h.call(d.g)}catch(b){U(b)}var v=K;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}ge=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,v),h.removeEventListener("test",b,v)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function we(d,v){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}w(we,R),we.prototype.init=function(d,v){const b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),se=0;function Te(d,v,b,I,J){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!I,this.ha=J,this.key=++se,this.da=this.fa=!1}function Re(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function rt(d,v,b){for(const I in d)v.call(b,d[I],I,d)}function at(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function H(d){const v={};for(const b in d)v[b]=d[b];return v}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(d,v){let b,I;for(let J=1;J<arguments.length;J++){I=arguments[J];for(b in I)d[b]=I[b];for(let re=0;re<de.length;re++)b=de[re],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function Ee(d){this.src=d,this.g={},this.h=0}Ee.prototype.add=function(d,v,b,I,J){const re=d.toString();d=this.g[re],d||(d=this.g[re]=[],this.h++);const Ne=xe(d,v,I,J);return Ne>-1?(v=d[Ne],b||(v.fa=!1)):(v=new Te(v,this.src,re,!!I,J),v.fa=b,d.push(v)),v};function ie(d,v){const b=v.type;if(b in d.g){var I=d.g[b],J=Array.prototype.indexOf.call(I,v,void 0),re;(re=J>=0)&&Array.prototype.splice.call(I,J,1),re&&(Re(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function xe(d,v,b,I){for(let J=0;J<d.length;++J){const re=d[J];if(!re.da&&re.listener==v&&re.capture==!!b&&re.ha==I)return J}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),wt={};function yt(d,v,b,I,J){if(Array.isArray(v)){for(let re=0;re<v.length;re++)yt(d,v[re],b,I,J);return null}return b=ja(b),d&&d[Je]?d.J(v,b,g(I)?!!I.capture:!1,J):on(d,v,b,!1,I,J)}function on(d,v,b,I,J,re){if(!v)throw Error("Invalid event type");const Ne=g(J)?!!J.capture:!!J;let We=It(d);if(We||(d[Pe]=We=new Ee(d)),b=We.add(v,b,I,Ne,re),b.proxy)return b;if(I=ps(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)D||(J=Ne),J===void 0&&(J=!1),d.addEventListener(v.toString(),I,J);else if(d.attachEvent)d.attachEvent(Yn(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ps(){function d(b){return v.call(d.src,d.listener,b)}const v=La;return d}function hn(d,v,b,I,J){if(Array.isArray(v))for(var re=0;re<v.length;re++)hn(d,v[re],b,I,J);else I=g(I)?!!I.capture:!!I,b=ja(b),d&&d[Je]?(d=d.i,re=String(v).toString(),re in d.g&&(v=d.g[re],b=xe(v,b,I,J),b>-1&&(Re(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete d.g[re],d.h--)))):d&&(d=It(d))&&(v=d.g[v.toString()],d=-1,v&&(d=xe(v,b,I,J)),(b=d>-1?v[d]:null)&&wi(b))}function wi(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Je])ie(v.i,d);else{var b=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(b,I,d.capture):v.detachEvent?v.detachEvent(Yn(b),I):v.addListener&&v.removeListener&&v.removeListener(I),(b=It(v))?(ie(b,d),b.h==0&&(b.src=null,v[Pe]=null)):Re(d)}}}function Yn(d){return d in wt?wt[d]:wt[d]="on"+d}function La(d,v){if(d.da)d=!0;else{v=new we(v,this);const b=d.listener,I=d.ha||d.src;d.fa&&wi(d),d=b.call(I,v)}return d}function It(d){return d=d[Pe],d instanceof Ee?d:null}var Qi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ja(d){return typeof d=="function"?d:(d[Qi]||(d[Qi]=function(v){return d.handleEvent(v)}),d[Qi])}function Kt(){q.call(this),this.i=new Ee(this),this.M=this,this.G=null}w(Kt,q),Kt.prototype[Je]=!0,Kt.prototype.removeEventListener=function(d,v,b,I){hn(this,d,v,b,I)};function sn(d,v){var b,I=d.G;if(I)for(b=[];I;I=I.G)b.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new R(v,d);else if(v instanceof R)v.target=v.target||d;else{var J=v;v=new R(I,d),ae(v,J)}J=!0;let re,Ne;if(b)for(Ne=b.length-1;Ne>=0;Ne--)re=v.g=b[Ne],J=Cs(re,I,!0,v)&&J;if(re=v.g=d,J=Cs(re,I,!0,v)&&J,J=Cs(re,I,!1,v)&&J,b)for(Ne=0;Ne<b.length;Ne++)re=v.g=b[Ne],J=Cs(re,I,!1,v)&&J}Kt.prototype.N=function(){if(Kt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const b=d.g[v];for(let I=0;I<b.length;I++)Re(b[I]);delete d.g[v],d.h--}}this.G=null},Kt.prototype.J=function(d,v,b,I){return this.i.add(String(d),v,!1,b,I)},Kt.prototype.K=function(d,v,b,I){return this.i.add(String(d),v,!0,b,I)};function Cs(d,v,b,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let J=!0;for(let re=0;re<v.length;++re){const Ne=v[re];if(Ne&&!Ne.da&&Ne.capture==b){const We=Ne.listener,Wt=Ne.ha||Ne.src;Ne.fa&&ie(d.i,Ne),J=We.call(Wt,I)!==!1&&J}}return J&&!I.defaultPrevented}function Vl(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function Nr(d){d.g=Vl(()=>{d.g=null,d.i&&(d.i=!1,Nr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class On extends q{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(d){q.call(this),this.h=d,this.g={}}w(fi,q);var hi=[];function is(d){rt(d.g,function(v,b){this.g.hasOwnProperty(b)&&wi(v)},d),d.g={}}fi.prototype.N=function(){fi.Z.N.call(this),is(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mi=h.JSON.stringify,go=h.JSON.parse,wr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function yo(){}function Eo(){}var Is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Be(){R.call(this,"d")}w(Be,R);function as(){R.call(this,"c")}w(as,R);var Xt={},xr=null;function ks(){return xr=xr||new Kt}Xt.Ia="serverreachability";function vo(d){R.call(this,Xt.Ia,d)}w(vo,R);function Sn(d){const v=ks();sn(v,new vo(v))}Xt.STAT_EVENT="statevent";function xi(d,v){R.call(this,Xt.STAT_EVENT,d),this.stat=v}w(xi,R);function Zt(d){const v=ks();sn(v,new xi(v,d))}Xt.Ja="timingevent";function Ls(d,v){R.call(this,Xt.Ja,d),this.size=v}w(Ls,R);function be(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function js(){this.g=!0}js.prototype.ua=function(){this.g=!1};function ql(d,v,b,I,J,re){d.info(function(){if(d.g)if(re){var Ne="",We=re.split("&");for(let Tt=0;Tt<We.length;Tt++){var Wt=We[Tt].split("=");if(Wt.length>1){const Bt=Wt[0];Wt=Wt[1];const Q=Bt.split("_");Ne=Q.length>=2&&Q[1]=="type"?Ne+(Bt+"="+Wt+"&"):Ne+(Bt+"=redacted&")}}}else Ne=null;else Ne=re;return"XMLHTTP REQ ("+I+") [attempt "+J+"]: "+v+`
`+b+`
`+Ne})}function Mn(d,v,b,I,J,re,Ne){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+J+"]: "+v+`
`+b+`
`+re+" "+Ne})}function _s(d,v,b,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ar(d,b)+(I?" "+I:"")})}function pi(d,v){d.info(function(){return"TIMEOUT: "+v})}js.prototype.info=function(){};function Ar(d,v){if(!d.g)return v;if(!v)return null;try{const re=JSON.parse(v);if(re){for(d=0;d<re.length;d++)if(Array.isArray(re[d])){var b=re[d];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var J=I[0];if(J!="noop"&&J!="stop"&&J!="close")for(let Ne=1;Ne<I.length;Ne++)I[Ne]=""}}}}return mi(re)}catch{return v}}var rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Da={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mn;function Ai(){}w(Ai,yo),Ai.prototype.g=function(){return new XMLHttpRequest},mn=new Ai;function Qn(d){return encodeURIComponent(String(d))}function Rr(d){var v=1;d=d.split(":");const b=[];for(;v>0&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function gs(d,v,b,I){this.j=d,this.i=v,this.l=b,this.S=I||1,this.V=new fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var ft={},ln={};function $s(d,v,b){d.M=1,d.A=Qs(Lt(v)),d.u=b,d.R=!0,Ri(d,null)}function Ri(d,v){d.F=Date.now(),os(d),d.B=Lt(d.A);var b=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Es(b.i,"t",I),d.C=0,b=d.j.L,d.h=new Kn,d.g=Ro(d.j,b?v:null,!d.u),d.P>0&&(d.O=new On(_(d.Y,d,d.g),d.P)),v=d.V,b=d.g,I=d.ba;var J="readystatechange";Array.isArray(J)||(J&&(hi[0]=J.toString()),J=hi);for(let re=0;re<J.length;re++){const Ne=yt(b,J[re],I||v.handleEvent,!1,v.h||v);if(!Ne)break;v.g[Ne.key]=Ne}v=d.J?H(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Sn(),ql(d.i,d.v,d.B,d.l,d.S,d.u)}gs.prototype.ba=function(d){d=d.target;const v=this.O;v&&je(d)==3?v.j():this.Y(d)},gs.prototype.Y=function(d){try{if(d==this.g)e:{const We=je(this.g),Wt=this.g.ya(),Tt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Fe(this.g)))){this.K||We!=4||Wt==7||(Wt==8||Tt<=0?Sn(3):Sn(2)),cn(this);var v=this.g.ca();this.X=v;var b=Bl(this);if(this.o=v==200,Mn(this.i,this.v,this.B,this.l,this.S,We,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,J=this.g;if((I=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var re=I;break t}}re=null}if(d=re)_s(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ds(this,d);else{this.o=!1,this.m=3,Zt(12),Vn(this),Un(this);break e}}if(this.R){d=!0;let Bt;for(;!this.K&&this.C<b.length;)if(Bt=Cr(this,b),Bt==ln){We==4&&(this.m=4,Zt(14),d=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==ft){this.m=4,Zt(15),_s(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else _s(this.i,this.l,Bt,null),Ds(this,Bt);if(Oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||b.length!=0||this.h.h||(this.m=1,Zt(16),d=!1),this.o=this.o&&d,!d)_s(this.i,this.l,b,"[Invalid Chunked Response]"),Vn(this),Un(this);else if(b.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Mr(Ne),Ne.P=!0,Zt(11))}}else _s(this.i,this.l,b,null),Ds(this,b);We==4&&Vn(this),this.o&&!this.K&&(We==4?Ur(this.j,this):(this.o=!1,os(this)))}else Ye(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,Zt(12)):(this.m=0,Zt(13)),Vn(this),Un(this)}}}catch{}};function Bl(d){if(!Oa(d))return d.g.la();const v=Fe(d.g);if(v==="")return"";let b="";const I=v.length,J=je(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Vn(d),Un(d),"";d.h.i=new h.TextDecoder}for(let re=0;re<I;re++)d.h.h=!0,b+=d.h.i.decode(v[re],{stream:!(J&&re==I-1)});return v.length=0,d.h.g+=b,d.C=0,d.h.g}function Oa(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Cr(d,v){var b=d.C,I=v.indexOf(`
`,b);return I==-1?ln:(b=Number(v.substring(b,I)),isNaN(b)?ft:(I+=1,I+b>v.length?ln:(v=v.slice(I,I+b),d.C=I+b,v)))}gs.prototype.cancel=function(){this.K=!0,Vn(this)};function os(d){d.T=Date.now()+d.H,Ma(d,d.H)}function Ma(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=be(_(d.aa,d),v)}function cn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}gs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(pi(this.i,this.B),this.M!=2&&(Sn(),Zt(17)),Vn(this),this.m=2,Un(this)):Ma(this,this.T-d)};function Un(d){d.j.I==0||d.K||Ur(d.j,d)}function Vn(d){cn(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,is(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function Ds(d,v){try{var b=d.j;if(b.I!=0&&(b.g==d||Os(b.h,d))){if(!d.L&&Os(b.h,d)&&b.I==3){try{var I=b.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var J=I;if(J[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Pa(b),ji(b);else break e;sa(b),Zt(18)}}else b.xa=J[1],0<b.xa-b.K&&J[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=be(_(b.Va,b),6e3));ls(b.h)<=1&&b.ta&&(b.ta=void 0)}else ti(b,11)}else if((d.L||b.g==d)&&Pa(b),!k(v))for(J=b.Ba.g.parse(v),v=0;v<J.length;v++){let Tt=J[v];const Bt=Tt[0];if(!(Bt<=b.K))if(b.K=Bt,Tt=Tt[1],b.I==2)if(Tt[0]=="c"){b.M=Tt[1],b.ba=Tt[2];const Q=Tt[3];Q!=null&&(b.ka=Q,b.j.info("VER="+b.ka));const he=Tt[4];he!=null&&(b.za=he,b.j.info("SVER="+b.za));const Ae=Tt[5];Ae!=null&&typeof Ae=="number"&&Ae>0&&(I=1.5*Ae,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const Me=d.g;if(Me){const Xe=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xe){var re=I.h;re.g||Xe.indexOf("spdy")==-1&&Xe.indexOf("quic")==-1&&Xe.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ys(re,re.h),re.h=null))}if(I.G){const ht=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;ht&&(I.wa=ht,vt(I.J,I.G,ht))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var Ne=d;if(I.na=Ao(I,I.L?I.ba:null,I.W),Ne.L){Ki(I.h,Ne);var We=Ne,Wt=I.O;Wt&&(We.H=Wt),We.D&&(cn(We),os(We)),I.g=Ne}else So(I);b.i.length>0&&ei(b)}else Tt[0]!="stop"&&Tt[0]!="close"||ti(b,7);else b.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?ti(b,7):Ba(b):Tt[0]!="noop"&&b.l&&b.l.qa(Tt),b.A=0)}}Sn(4)}catch{}}var en=class{constructor(d,v){this.g=d,this.map=v}};function _i(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ua(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ls(d){return d.h?1:d.g?d.g.size:0}function Os(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Ys(d,v){d.g?d.g.add(v):d.h=v}function Ki(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}_i.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Va(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.G);return v}return B(d.i)}var Ir=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wi(d,v){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const I=d[b].indexOf("=");let J,re=null;I>=0?(J=d[b].substring(0,I),re=d[b].substring(I+1)):J=d[b],v(J,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function cs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof cs?(this.l=d.l,tt(this,d.j),this.o=d.o,this.g=d.g,Wn(this,d.u),this.h=d.h,Ci(this,qa(d.i)),this.m=d.m):d&&(v=String(d).match(Ir))?(this.l=!1,tt(this,v[1]||"",!0),this.o=ys(v[2]||""),this.g=ys(v[3]||"",!0),Wn(this,v[4]),this.h=ys(v[5]||"",!0),Ci(this,v[6]||"",!0),this.m=ys(v[7]||"")):(this.l=!1,this.i=new Js(null,this.l))}cs.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Ji(v,Ks,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Ji(v,Ks,!0),"@"),d.push(Qn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Ji(b,b.charAt(0)=="/"?Lr:kr,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Ji(b,jr)),d.join("")},cs.prototype.resolve=function(d){const v=Lt(this);let b=!!d.j;b?tt(v,d.j):b=!!d.o,b?v.o=d.o:b=!!d.g,b?v.g=d.g:b=d.u!=null;var I=d.h;if(b)Wn(v,d.u);else if(b=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var J=v.h.lastIndexOf("/");J!=-1&&(I=v.h.slice(0,J+1)+I)}if(J=I,J==".."||J==".")I="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){I=J.lastIndexOf("/",0)==0,J=J.split("/");const re=[];for(let Ne=0;Ne<J.length;){const We=J[Ne++];We=="."?I&&Ne==J.length&&re.push(""):We==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),I&&Ne==J.length&&re.push("")):(re.push(We),I=!0)}I=re.join("/")}else I=J}return b?v.h=I:b=d.i.toString()!=="",b?Ci(v,qa(d.i)):b=!!d.m,b&&(v.m=d.m),v};function Lt(d){return new cs(d)}function tt(d,v,b){d.j=b?ys(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Wn(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Ci(d,v,b){v instanceof Js?(d.i=v,us(d.i,d.l)):(b||(v=Ji(v,Ws)),d.i=new Js(v,d.l))}function vt(d,v,b){d.i.set(v,b)}function Qs(d){return vt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ys(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ji(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,Jn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ks=/[#\/\?@]/g,kr=/[#\?:]/g,Lr=/[#\?]/g,Ws=/[#\?@]/g,jr=/#/g;function Js(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function An(d){d.g||(d.g=new Map,d.h=0,d.i&&Wi(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}n=Js.prototype,n.add=function(d,v){An(this),this.i=null,d=Rn(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function To(d,v){An(d),v=Rn(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ii(d,v){return An(d),v=Rn(d,v),d.g.has(v)}n.forEach=function(d,v){An(this),this.g.forEach(function(b,I){b.forEach(function(J){d.call(v,J,I,this)},this)},this)};function ki(d,v){An(d);let b=[];if(typeof v=="string")Ii(d,v)&&(b=b.concat(d.g.get(Rn(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)b=b.concat(d[v]);return b}n.set=function(d,v){return An(this),this.i=null,d=Rn(this,d),Ii(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=ki(this,d),d.length>0?String(d[0]):v):v};function Es(d,v,b){To(d,v),b.length>0&&(d.i=null,d.g.set(Rn(d,v),B(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var b=v[I];const J=Qn(b);b=ki(this,b);for(let re=0;re<b.length;re++){let Ne=J;b[re]!==""&&(Ne+="="+Qn(b[re])),d.push(Ne)}}return this.i=d.join("&")};function qa(d){const v=new Js;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Rn(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function us(d,v){v&&!d.j&&(An(d),d.i=null,d.g.forEach(function(b,I){const J=I.toLowerCase();I!=J&&(To(this,I),Es(this,J,b))},d)),d.j=v}function qn(d,v){const b=new js;if(h.Image){const I=new Image;I.onload=S(Ce,b,"TestLoadImage: loaded",!0,v,I),I.onerror=S(Ce,b,"TestLoadImage: error",!1,v,I),I.onabort=S(Ce,b,"TestLoadImage: abort",!1,v,I),I.ontimeout=S(Ce,b,"TestLoadImage: timeout",!1,v,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function Dr(d,v){const b=new js,I=new AbortController,J=setTimeout(()=>{I.abort(),Ce(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(re=>{clearTimeout(J),re.ok?Ce(b,"TestPingServer: ok",!0,v):Ce(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(J),Ce(b,"TestPingServer: error",!1,v)})}function Ce(d,v,b,I,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),I(b)}catch{}}function Zs(){this.g=new wr}function ds(d){this.i=d.Sb||null,this.h=d.ab||!1}w(ds,yo),ds.prototype.g=function(){return new Li(this.i,this.h)};function Li(d,v){Kt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Li,Kt),n=Li.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,pn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zi(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zi(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?vs(this):pn(this),this.readyState==3&&Zi(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,vs(this))},n.Na=function(d){this.g&&(this.response=d,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,pn(d)}n.setRequestHeader=function(d,v){this.A.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function pn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Cn(d){let v="";return rt(d,function(b,I){v+=I,v+=":",v+=b,v+=`\r
`}),v}function gi(d,v,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Cn(b),typeof d=="string"?b!=null&&Qn(b):vt(d,v,b))}function m(d){Kt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(m,Kt);var y=/^https?$/i,N=["POST","PUT"];n=m.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,v,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mn.g(),this.g.onreadystatechange=x(_(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(re){C(this,re);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var J in I)b.set(J,I[J]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const re of I.keys())b.set(re,I.get(re));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),J=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(N,v,void 0)>=0)||I||J||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Ne]of b)this.g.setRequestHeader(re,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(re){C(this,re)}};function C(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,F(d),ce(d)}function F(d){d.A||(d.A=!0,sn(d,"complete"),sn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,sn(this,"complete"),sn(this,"abort"),ce(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ce(this,!0)),m.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?W(this):this.Xa())},n.Xa=function(){W(this)};function W(d){if(d.h&&typeof u<"u"){if(d.v&&je(d)==4)setTimeout(d.Ca.bind(d),0);else if(sn(d,"readystatechange"),je(d)==4){d.h=!1;try{const re=d.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var I;if(I=re===0){let Ne=String(d.D).match(Ir)[1]||null;!Ne&&h.self&&h.self.location&&(Ne=h.self.location.protocol.slice(0,-1)),I=!y.test(Ne?Ne.toLowerCase():"")}b=I}if(b)sn(d,"complete"),sn(d,"success");else{d.o=6;try{var J=je(d)>2?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.ca()+"]",F(d)}}finally{ce(d)}}}}function ce(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,v||sn(d,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function je(d){return d.g?d.g.readyState:0}n.ca=function(){try{return je(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),go(v)}};function Fe(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ye(d){const v={};d=(d.g&&je(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(k(d[I]))continue;var b=Rr(d[I]);const J=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=v[J]||[];v[J]=re,re.push(b)}at(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nt(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function tn(d){this.za=0,this.i=[],this.j=new js,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nt("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nt("baseRetryDelayMs",5e3,d),this.Za=Nt("retryDelaySeedMs",1e4,d),this.Ta=Nt("forwardChannelMaxRetries",2,d),this.va=Nt("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new _i(d&&d.concurrentRequestLimit),this.Ba=new Zs,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=tn.prototype,n.ka=8,n.I=1,n.connect=function(d,v,b,I){Zt(0),this.W=d,this.H=v||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=Ao(this,null,this.W),ei(this)};function Ba(d){if(ea(d),d.I==3){var v=d.V++,b=Lt(d.J);if(vt(b,"SID",d.M),vt(b,"RID",v),vt(b,"TYPE","terminate"),na(d,b),v=new gs(d,d.j,v),v.M=2,v.A=Qs(Lt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=v.A,b=!0),b||(v.g=Ro(v.j,null),v.g.ea(v.A)),v.F=Date.now(),os(v)}xo(d)}function ji(d){d.g&&(Mr(d),d.g.cancel(),d.g=null)}function ea(d){ji(d),d.v&&(h.clearTimeout(d.v),d.v=null),Pa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function ei(d){if(!Ua(d.h)&&!d.m){d.m=!0;var v=d.Ea;ye||j(),ge||(ye(),ge=!0),O.add(v,d),d.D=0}}function ta(d,v){return ls(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=be(_(d.Ea,d,v),wo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const J=new gs(this,this.j,d);let re=this.o;if(this.U&&(re?(re=H(re),ae(re,this.U)):re=this.U),this.u!==null||this.R||(J.J=re,re=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=bo(this,J,v),b=Lt(this.J),vt(b,"RID",d),vt(b,"CVER",22),this.G&&vt(b,"X-HTTP-Session-Id",this.G),na(this,b),re&&(this.R?v="headers="+Qn(Cn(re))+"&"+v:this.u&&gi(b,this.u,re)),Ys(this.h,J),this.Ra&&vt(b,"TYPE","init"),this.S?(vt(b,"$req",v),vt(b,"SID","null"),J.U=!0,$s(J,b,null)):$s(J,b,v),this.I=2}}else this.I==3&&(d?Or(this,d):this.i.length==0||Ua(this.h)||Or(this))};function Or(d,v){var b;v?b=v.l:b=d.V++;const I=Lt(d.J);vt(I,"SID",d.M),vt(I,"RID",b),vt(I,"AID",d.K),na(d,I),d.u&&d.o&&gi(I,d.u,d.o),b=new gs(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),v&&(d.i=v.G.concat(d.i)),v=bo(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ys(d.h,b),$s(b,I,v)}function na(d,v){d.H&&rt(d.H,function(b,I){vt(v,I,b)}),d.l&&rt({},function(b,I){vt(v,I,b)})}function bo(d,v,b){b=Math.min(d.i.length,b);const I=d.l?_(d.l.Ka,d.l,d):null;e:{var J=d.i;let We=-1;for(;;){const Wt=["count="+b];We==-1?b>0?(We=J[0].g,Wt.push("ofs="+We)):We=0:Wt.push("ofs="+We);let Tt=!0;for(let Bt=0;Bt<b;Bt++){var re=J[Bt].g;const Q=J[Bt].map;if(re-=We,re<0)We=Math.max(0,J[Bt].g-100),Tt=!1;else try{re="req"+re+"_"||"";try{var Ne=Q instanceof Map?Q:Object.entries(Q);for(const[he,Ae]of Ne){let Me=Ae;g(Ae)&&(Me=mi(Ae)),Wt.push(re+he+"="+encodeURIComponent(Me))}}catch(he){throw Wt.push(re+"type="+encodeURIComponent("_badmap")),he}}catch{I&&I(Q)}}if(Tt){Ne=Wt.join("&");break e}}Ne=void 0}return d=d.i.splice(0,b),v.G=d,Ne}function So(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;ye||j(),ge||(ye(),ge=!0),O.add(v,d),d.A=0}}function sa(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=be(_(d.Da,d),wo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,No(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=be(_(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Zt(10),ji(this),No(this))};function Mr(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function No(d){d.g=new gs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Lt(d.na);vt(v,"RID","rpc"),vt(v,"SID",d.M),vt(v,"AID",d.K),vt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&vt(v,"TO",d.ia),vt(v,"TYPE","xmlhttp"),na(d,v),d.u&&d.o&&gi(v,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Qs(Lt(v)),b.u=null,b.R=!0,Ri(b,d)}n.Va=function(){this.C!=null&&(this.C=null,ji(this),sa(this),Zt(19))};function Pa(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ur(d,v){var b=null;if(d.g==v){Pa(d),Mr(d),d.g=null;var I=2}else if(Os(d.h,v))b=v.G,Ki(d.h,v),I=1;else return;if(d.I!=0){if(v.o)if(I==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var J=d.D;I=ks(),sn(I,new Ls(I,b)),ei(d)}else So(d);else if(J=v.m,J==3||J==0&&v.X>0||!(I==1&&ta(d,v)||I==2&&sa(d)))switch(b&&b.length>0&&(v=d.h,v.i=v.i.concat(b)),J){case 1:ti(d,5);break;case 4:ti(d,10);break;case 3:ti(d,6);break;default:ti(d,2)}}}function wo(d,v){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*v}function ti(d,v){if(d.j.info("Error code "+v),v==2){var b=_(d.bb,d),I=d.Ua;const J=!I;I=new cs(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||tt(I,"https"),Qs(I),J?qn(I.toString(),b):Dr(I.toString(),b)}else Zt(2);d.I=0,d.l&&d.l.pa(v),xo(d),ea(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function xo(d){if(d.I=0,d.ja=[],d.l){const v=Va(d.h);(v.length!=0||d.i.length!=0)&&(X(d.ja,v),X(d.ja,d.i),d.h.i.length=0,B(d.i),d.i.length=0),d.l.oa()}}function Ao(d,v,b){var I=b instanceof cs?Lt(b):new cs(b);if(I.g!="")v&&(I.g=v+"."+I.g),Wn(I,I.u);else{var J=h.location;I=J.protocol,v=v?v+"."+J.hostname:J.hostname,J=+J.port;const re=new cs(null);I&&tt(re,I),v&&(re.g=v),J&&Wn(re,J),b&&(re.h=b),I=re}return b=d.G,v=d.wa,b&&v&&vt(I,b,v),vt(I,"VER",d.ka),na(d,I),I}function Ro(d,v,b){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new m(new ds({ab:b})):new m(d.ma),v.Fa(d.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Co(){}n=Co.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Di(){}Di.prototype.g=function(d,v){return new In(d,v)};function In(d,v){Kt.call(this),this.g=new tn(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!k(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new yi(this)}w(In,Kt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Ba(this.g)},In.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=mi(d),d=b);v.i.push(new en(v.Ya++,d)),v.I==3&&ei(v)},In.prototype.N=function(){this.g.l=null,delete this.j,Ba(this.g),delete this.g,In.Z.N.call(this)};function Io(d){Be.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}w(Io,Be);function ko(){as.call(this),this.status=1}w(ko,as);function yi(d){this.g=d}w(yi,Co),yi.prototype.ra=function(){sn(this.g,"a")},yi.prototype.qa=function(d){sn(this.g,new Io(d))},yi.prototype.pa=function(d){sn(this.g,new ko)},yi.prototype.oa=function(){sn(this.g,"b")},Di.prototype.createWebChannel=Di.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Cb=function(){return new Di},Rb=function(){return ks()},Ab=Xt,$m={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,dd=rs,Da.COMPLETE="complete",xb=Da,Eo.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",Kt.prototype.listen=Kt.prototype.J,Ac=Eo,m.prototype.listenOnce=m.prototype.K,m.prototype.getLastError=m.prototype.Ha,m.prototype.getLastErrorCode=m.prototype.ya,m.prototype.getStatus=m.prototype.ca,m.prototype.getResponseJson=m.prototype.La,m.prototype.getResponseText=m.prototype.la,m.prototype.send=m.prototype.ea,m.prototype.setWithCredentials=m.prototype.Fa,wb=m}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});class ts{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let Ll="12.8.0";function aR(n){Ll=n}const io=new gb("@firebase/firestore");function ul(){return io.logLevel}function ke(n,...e){if(io.logLevel<=St.DEBUG){const s=e.map(Np);io.debug(`Firestore (${Ll}): ${n}`,...s)}}function Ca(n,...e){if(io.logLevel<=St.ERROR){const s=e.map(Np);io.error(`Firestore (${Ll}): ${n}`,...s)}}function bl(n,...e){if(io.logLevel<=St.WARN){const s=e.map(Np);io.warn(`Firestore (${Ll}): ${n}`,...s)}}function Np(n){if(typeof n=="string")return n;try{return(function(s){return JSON.stringify(s)})(n)}catch{return n}}function Ke(n,e,s){let a="Unexpected state";typeof e=="string"?a=e:s=e,Ib(n,a,s)}function Ib(n,e,s){let a=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{a+=" CONTEXT: "+JSON.stringify(s)}catch{a+=" CONTEXT: "+s}throw Ca(a),new Error(a)}function kt(n,e,s,a){let o="Unexpected state";typeof s=="string"?o=s:a=s,n||Ib(e,o,a)}function it(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends co{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}class kb{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(ts.UNAUTHENTICATED)))}shutdown(){}}class oR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class lR{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){kt(this.o===void 0,42304);let a=this.i;const o=E=>this.i!==a?(a=this.i,s(E)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const E=u;e.enqueueRetryable((async()=>{await E.promise,await o(this.currentUser)}))},g=E=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((E=>g(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?g(E):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}}),0),h()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((a=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(kt(typeof a.accessToken=="string",31837,{l:a}),new kb(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new ts(e)}}class cR{constructor(e,s,a){this.P=e,this.T=s,this.I=a,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class uR{constructor(e,s,a){this.P=e,this.T=s,this.I=a}getToken(){return Promise.resolve(new cR(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(ts.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dR{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){kt(this.o===void 0,3512);const a=u=>{u.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?s(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(kt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Av(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function fR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let a=0;a<n;a++)s[a]=Math.floor(256*Math.random());return s}class wp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=fR(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<s&&(a+=e.charAt(o[u]%62))}return a}}function _t(n,e){return n<e?-1:n>e?1:0}function Ym(n,e){const s=Math.min(n.length,e.length);for(let a=0;a<s;a++){const o=n.charAt(a),u=e.charAt(a);if(o!==u)return vm(o)===vm(u)?_t(o,u):vm(o)?1:-1}return _t(n.length,e.length)}const hR=55296,mR=57343;function vm(n){const e=n.charCodeAt(0);return e>=hR&&e<=mR}function Sl(n,e,s){return n.length===e.length&&n.every(((a,o)=>s(a,e[o])))}const Rv="__name__";class Bi{constructor(e,s,a){s===void 0?s=0:s>e.length&&Ke(637,{offset:s,range:e.length}),a===void 0?a=e.length-s:a>e.length-s&&Ke(1746,{length:a,range:e.length-s}),this.segments=e,this.offset=s,this.len=a}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((a=>{s.push(a)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,a=this.limit();s<a;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const a=Math.min(e.length,s.length);for(let o=0;o<a;o++){const u=Bi.compareSegments(e.get(o),s.get(o));if(u!==0)return u}return _t(e.length,s.length)}static compareSegments(e,s){const a=Bi.isNumericId(e),o=Bi.isNumericId(s);return a&&!o?-1:!a&&o?1:a&&o?Bi.extractNumericId(e).compare(Bi.extractNumericId(s)):Ym(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class Gt extends Bi{construct(e,s,a){return new Gt(e,s,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const a of e){if(a.indexOf("//")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);s.push(...a.split("/").filter((o=>o.length>0)))}return new Gt(s)}static emptyPath(){return new Gt([])}}const pR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Bi{construct(e,s,a){return new Xn(e,s,a)}static isValidIdentifier(e){return pR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rv}static keyField(){return new Xn([Rv])}static fromServerFormat(e){const s=[];let a="",o=0;const u=()=>{if(a.length===0)throw new Le(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Le(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Le(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=E,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new Le(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(s)}static emptyPath(){return new Xn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Gt.fromString(e))}static fromName(e){return new He(Gt.fromString(e).popFirst(5))}static empty(){return new He(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Gt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Gt(e.slice()))}}function Lb(n,e,s){if(!s)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _R(n,e,s,a){if(e===!0&&a===!0)throw new Le(pe.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function Cv(n){if(!He.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Iv(n){if(He.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ke(12329,{type:typeof n})}function Nl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=zd(n);throw new Le(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}function bn(n,e){const s={typeString:n};return e&&(s.value=e),s}function $c(n,e){if(!jb(n))throw new Le(pe.INVALID_ARGUMENT,"JSON must be an object");let s;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){s=`JSON missing required field: '${a}'`;break}const h=n[a];if(o&&typeof h!==o){s=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){s=`Expected '${a}' field to equal '${u.value}'`;break}}if(s)throw new Le(pe.INVALID_ARGUMENT,s);return!0}const kv=-62135596800,Lv=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),a=Math.floor((e-1e3*s)*Lv);return new Qt(s,a)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<kv)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lv}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($c(e,Qt._jsonSchema))return new Qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:bn("string",Qt._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Qt(0,0))}static max(){return new et(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vc=-1;function gR(n,e){const s=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,o=et.fromTimestamp(a===1e9?new Qt(s+1,0):new Qt(s,a));return new yr(o,He.empty(),e)}function yR(n){return new yr(n.readTime,n.key,Vc)}class yr{constructor(e,s,a){this.readTime=e,this.documentKey=s,this.largestBatchId=a}static min(){return new yr(et.min(),He.empty(),Vc)}static max(){return new yr(et.max(),He.empty(),Vc)}}function ER(n,e){let s=n.readTime.compareTo(e.readTime);return s!==0?s:(s=He.comparator(n.documentKey,e.documentKey),s!==0?s:_t(n.largestBatchId,e.largestBatchId))}const vR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jl(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==vR)throw n;ke("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new _e(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(a,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof _e?s:_e.resolve(s)}catch(s){return _e.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):_e.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):_e.reject(s)}static resolve(e){return new _e(((s,a)=>{s(e)}))}static reject(e){return new _e(((s,a)=>{a(e)}))}static waitFor(e){return new _e(((s,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&s()}),(E=>a(E)))})),h=!0,u===o&&s()}))}static or(e){let s=_e.resolve(!1);for(const a of e)s=s.next((o=>o?_e.resolve(o):a()));return s}static forEach(e,s){const a=[];return e.forEach(((o,u)=>{a.push(s.call(this,o,u))})),this.waitFor(a)}static mapArray(e,s){return new _e(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let E=0;E<u;E++){const _=E;s(e[_]).next((S=>{h[_]=S,++g,g===u&&a(h)}),(S=>o(S)))}}))}static doWhile(e,s){return new _e(((a,o)=>{const u=()=>{e()===!0?s().next((()=>{u()}),o):a()};u()}))}}function bR(n){const e=n.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Dl(n){return n.name==="IndexedDbTransactionError"}class Hd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>s.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hd.ce=-1;const xp=-1;function Gd(n){return n==null}function Td(n){return n===0&&1/n==-1/0}function SR(n){return typeof n=="number"&&Number.isInteger(n)&&!Td(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Db="";function NR(n){let e="";for(let s=0;s<n.length;s++)e.length>0&&(e=jv(e)),e=wR(n.get(s),e);return jv(e)}function wR(n,e){let s=e;const a=n.length;for(let o=0;o<a;o++){const u=n.charAt(o);switch(u){case"\0":s+="";break;case Db:s+="";break;default:s+=u}}return s}function jv(n){return n+Db+""}function Dv(n){let e=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e++;return e}function uo(n,e){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e(s,n[s])}function Ob(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nn{constructor(e,s){this.comparator=e,this.root=s||Gn.EMPTY}insert(e,s){return new nn(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return s.value;a<0?s=s.left:a>0&&(s=s.right)}return null}indexOf(e){let s=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return s+a.left.size;o<0?a=a.left:(s+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,a)=>(e(s,a),!1)))}toString(){const e=[];return this.inorderTraversal(((s,a)=>(e.push(`${s}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,s,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=s?a(e.key,s):1,s&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gn{constructor(e,s,a,o,u){this.key=e,this.value=s,this.color=a??Gn.RED,this.left=o??Gn.EMPTY,this.right=u??Gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,a,o,u){return new Gn(e??this.key,s??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,s,a),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let a,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return Gn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,s,a,o,u){return this}insert(e,s,a){return new Gn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,a)=>(e(s),!1)))}forEachInRange(e,s){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let a;for(a=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Ov(this.data.getIterator())}getIteratorFrom(e){return new Ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((a=>{s=s.add(a)})),s}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const s=this.data.getIterator(),a=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new xn(this.comparator);return s.data=e,s}}class Ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class bi{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new bi([])}unionWith(e){let s=new xn(Xn.comparator);for(const a of this.fields)s=s.add(a);for(const a of e)s=s.add(a);return new bi(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((s,a)=>s.isEqual(a)))}}class Mb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Mb("Invalid base64 string: "+u):u}})(e);return new $n(s)}static fromUint8Array(e){const s=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new $n(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const a=new Uint8Array(s.length);for(let o=0;o<s.length;o++)a[o]=s.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const xR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(kt(!!n,39018),typeof n=="string"){let e=0;const s=xR.exec(n);if(kt(!!s,46558,{timestamp:n}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vr(n){return typeof n=="string"?$n.fromBase64String(n):$n.fromUint8Array(n)}const Ub="server_timestamp",Vb="__type__",qb="__previous_value__",Bb="__local_write_time__";function Ap(n){return(n?.mapValue?.fields||{})[Vb]?.stringValue===Ub}function Xd(n){const e=n.mapValue.fields[qb];return Ap(e)?Xd(e):e}function qc(n){const e=Er(n.mapValue.fields[Bb].timestampValue);return new Qt(e.seconds,e.nanos)}class AR{constructor(e,s,a,o,u,h,g,E,_,S,w){this.databaseId=e,this.appId=s,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=E,this.useFetchStreams=_,this.isUsingEmulator=S,this.apiKey=w}}const bd="(default)";class Bc{constructor(e,s){this.projectId=e,this.database=s||bd}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof Bc&&e.projectId===this.projectId&&e.database===this.database}}function RR(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Le(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(n.options.projectId,e)}const Pb="__type__",CR="__max__",ad={mapValue:{}},Fb="__vector__",Sd="value";function Tr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ap(n)?4:kR(n)?9007199254740991:IR(n)?10:11:Ke(28295,{value:n})}function Xi(n,e){if(n===e)return!0;const s=Tr(n);if(s!==Tr(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qc(n).isEqual(qc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Er(o.timestampValue),g=Er(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,u){return vr(o.bytesValue).isEqual(vr(u.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,u){return fn(o.geoPointValue.latitude)===fn(u.geoPointValue.latitude)&&fn(o.geoPointValue.longitude)===fn(u.geoPointValue.longitude)})(n,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return fn(o.integerValue)===fn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=fn(o.doubleValue),g=fn(u.doubleValue);return h===g?Td(h)===Td(g):isNaN(h)&&isNaN(g)}return!1})(n,e);case 9:return Sl(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(Dv(h)!==Dv(g))return!1;for(const E in h)if(h.hasOwnProperty(E)&&(g[E]===void 0||!Xi(h[E],g[E])))return!1;return!0})(n,e);default:return Ke(52216,{left:n})}}function Pc(n,e){return(n.values||[]).find((s=>Xi(s,e)))!==void 0}function wl(n,e){if(n===e)return 0;const s=Tr(n),a=Tr(e);if(s!==a)return _t(s,a);switch(s){case 0:case 9007199254740991:return 0;case 1:return _t(n.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=fn(u.integerValue||u.doubleValue),E=fn(h.integerValue||h.doubleValue);return g<E?-1:g>E?1:g===E?0:isNaN(g)?isNaN(E)?0:-1:1})(n,e);case 3:return Mv(n.timestampValue,e.timestampValue);case 4:return Mv(qc(n),qc(e));case 5:return Ym(n.stringValue,e.stringValue);case 6:return(function(u,h){const g=vr(u),E=vr(h);return g.compareTo(E)})(n.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),E=h.split("/");for(let _=0;_<g.length&&_<E.length;_++){const S=_t(g[_],E[_]);if(S!==0)return S}return _t(g.length,E.length)})(n.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=_t(fn(u.latitude),fn(h.latitude));return g!==0?g:_t(fn(u.longitude),fn(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Uv(n.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},E=h.fields||{},_=g[Sd]?.arrayValue,S=E[Sd]?.arrayValue,w=_t(_?.values?.length||0,S?.values?.length||0);return w!==0?w:Uv(_,S)})(n.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ad.mapValue&&h===ad.mapValue)return 0;if(u===ad.mapValue)return 1;if(h===ad.mapValue)return-1;const g=u.fields||{},E=Object.keys(g),_=h.fields||{},S=Object.keys(_);E.sort(),S.sort();for(let w=0;w<E.length&&w<S.length;++w){const x=Ym(E[w],S[w]);if(x!==0)return x;const B=wl(g[E[w]],_[S[w]]);if(B!==0)return B}return _t(E.length,S.length)})(n.mapValue,e.mapValue);default:throw Ke(23264,{he:s})}}function Mv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _t(n,e);const s=Er(n),a=Er(e),o=_t(s.seconds,a.seconds);return o!==0?o:_t(s.nanos,a.nanos)}function Uv(n,e){const s=n.values||[],a=e.values||[];for(let o=0;o<s.length&&o<a.length;++o){const u=wl(s[o],a[o]);if(u)return u}return _t(s.length,a.length)}function xl(n){return Qm(n)}function Qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(s){const a=Er(s);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(s){return vr(s).toBase64()})(n.bytesValue):"referenceValue"in n?(function(s){return He.fromName(s).toString()})(n.referenceValue):"geoPointValue"in n?(function(s){return`geo(${s.latitude},${s.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(s){let a="[",o=!0;for(const u of s.values||[])o?o=!1:a+=",",a+=Qm(u);return a+"]"})(n.arrayValue):"mapValue"in n?(function(s){const a=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${Qm(s.fields[h])}`;return o+"}"})(n.mapValue):Ke(61005,{value:n})}function fd(n){switch(Tr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(n);return e?16+fd(e):16;case 5:return 2*n.stringValue.length;case 6:return vr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+fd(u)),0)})(n.arrayValue);case 10:case 11:return(function(a){let o=0;return uo(a.fields,((u,h)=>{o+=u.length+fd(h)})),o})(n.mapValue);default:throw Ke(13486,{value:n})}}function Vv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Km(n){return!!n&&"integerValue"in n}function Rp(n){return!!n&&"arrayValue"in n}function qv(n){return!!n&&"nullValue"in n}function Bv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hd(n){return!!n&&"mapValue"in n}function IR(n){return(n?.mapValue?.fields||{})[Pb]?.stringValue===Fb}function kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return uo(n.mapValue.fields,((s,a)=>e.mapValue.fields[s]=kc(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=kc(n.arrayValue.values[s]);return e}return{...n}}function kR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===CR}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let a=0;a<e.length-1;++a)if(s=(s.mapValue.fields||{})[e.get(a)],!hd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(s)}setAll(e){let s=Xn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!s.isImmediateParentOf(g)){const E=this.getFieldsMap(s);this.applyChanges(E,a,o),a={},o=[],s=g.popLast()}h?a[g.lastSegment()]=kc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,a,o)}delete(e){const s=this.field(e.popLast());hd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=s.mapValue.fields[e.get(a)];hd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(a)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,a){uo(s,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new ui(kc(this.value))}}function zb(n){const e=[];return uo(n.fields,((s,a)=>{const o=new Xn([s]);if(hd(a)){const u=zb(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new bi(e)}class ns{constructor(e,s,a,o,u,h,g){this.key=e,this.documentType=s,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new ns(e,0,et.min(),et.min(),et.min(),ui.empty(),0)}static newFoundDocument(e,s,a,o){return new ns(e,1,s,et.min(),a,o,0)}static newNoDocument(e,s){return new ns(e,2,s,et.min(),et.min(),ui.empty(),0)}static newUnknownDocument(e,s){return new ns(e,3,s,et.min(),et.min(),ui.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ns&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nd{constructor(e,s){this.position=e,this.inclusive=s}}function Pv(n,e,s){let a=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(u.field.isKeyField()?a=He.comparator(He.fromName(h.referenceValue),s.key):a=wl(h,s.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Fv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!Xi(n.position[s],e.position[s]))return!1;return!0}class wd{constructor(e,s="asc"){this.field=e,this.dir=s}}function LR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Hb{}class Tn extends Hb{constructor(e,s,a){super(),this.field=e,this.op=s,this.value=a}static create(e,s,a){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,a):new DR(e,s,a):s==="array-contains"?new UR(e,a):s==="in"?new VR(e,a):s==="not-in"?new qR(e,a):s==="array-contains-any"?new BR(e,a):new Tn(e,s,a)}static createKeyFieldInFilter(e,s,a){return s==="in"?new OR(e,a):new MR(e,a)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(wl(s,this.value)):s!==null&&Tr(this.value)===Tr(s)&&this.matchesComparison(wl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends Hb{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Ni(e,s)}matches(e){return Gb(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gb(n){return n.op==="and"}function Xb(n){return jR(n)&&Gb(n)}function jR(n){for(const e of n.filters)if(e instanceof Ni)return!1;return!0}function Wm(n){if(n instanceof Tn)return n.field.canonicalString()+n.op.toString()+xl(n.value);if(Xb(n))return n.filters.map((e=>Wm(e))).join(",");{const e=n.filters.map((s=>Wm(s))).join(",");return`${n.op}(${e})`}}function $b(n,e){return n instanceof Tn?(function(a,o){return o instanceof Tn&&a.op===o.op&&a.field.isEqual(o.field)&&Xi(a.value,o.value)})(n,e):n instanceof Ni?(function(a,o){return o instanceof Ni&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&$b(h,o.filters[g])),!0):!1})(n,e):void Ke(19439)}function Yb(n){return n instanceof Tn?(function(s){return`${s.field.canonicalString()} ${s.op} ${xl(s.value)}`})(n):n instanceof Ni?(function(s){return s.op.toString()+" {"+s.getFilters().map(Yb).join(" ,")+"}"})(n):"Filter"}class DR extends Tn{constructor(e,s,a){super(e,s,a),this.key=He.fromName(a.referenceValue)}matches(e){const s=He.comparator(e.key,this.key);return this.matchesComparison(s)}}class OR extends Tn{constructor(e,s){super(e,"in",s),this.keys=Qb("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class MR extends Tn{constructor(e,s){super(e,"not-in",s),this.keys=Qb("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function Qb(n,e){return(e.arrayValue?.values||[]).map((s=>He.fromName(s.referenceValue)))}class UR extends Tn{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return Rp(s)&&Pc(s.arrayValue,this.value)}}class VR extends Tn{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Pc(this.value.arrayValue,s)}}class qR extends Tn{constructor(e,s){super(e,"not-in",s)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!Pc(this.value.arrayValue,s)}}class BR extends Tn{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!Rp(s)||!s.arrayValue.values)&&s.arrayValue.values.some((a=>Pc(this.value.arrayValue,a)))}}class PR{constructor(e,s=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=s,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function zv(n,e=null,s=[],a=[],o=null,u=null,h=null){return new PR(n,e,s,a,o,u,h)}function Cp(n){const e=it(n);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((a=>Wm(a))).join(","),s+="|ob:",s+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Gd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((a=>xl(a))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((a=>xl(a))).join(",")),e.Te=s}return e.Te}function Ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!LR(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if(!$b(n.filters[s],e.filters[s]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fv(n.startAt,e.startAt)&&Fv(n.endAt,e.endAt)}function Jm(n){return He.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Yc{constructor(e,s=null,a=[],o=[],u=null,h="F",g=null,E=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function FR(n,e,s,a,o,u,h,g){return new Yc(n,e,s,a,o,u,h,g)}function Kb(n){return new Yc(n)}function Hv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zR(n){return He.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wb(n){return n.collectionGroup!==null}function Lc(n){const e=it(n);if(e.Ie===null){e.Ie=[];const s=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),s.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new xn(Xn.comparator);return h.filters.forEach((E=>{E.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new wd(u,a))})),s.has(Xn.keyField().canonicalString())||e.Ie.push(new wd(Xn.keyField(),a))}return e.Ie}function Fi(n){const e=it(n);return e.Ee||(e.Ee=HR(e,Lc(n))),e.Ee}function HR(n,e){if(n.limitType==="F")return zv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new wd(o.field,u)}));const s=n.endAt?new Nd(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new Nd(n.startAt.position,n.startAt.inclusive):null;return zv(n.path,n.collectionGroup,e,n.filters,n.limit,s,a)}}function Zm(n,e){const s=n.filters.concat([e]);return new Yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),s,n.limit,n.limitType,n.startAt,n.endAt)}function ep(n,e,s){return new Yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,s,n.startAt,n.endAt)}function $d(n,e){return Ip(Fi(n),Fi(e))&&n.limitType===e.limitType}function Jb(n){return`${Cp(Fi(n))}|lt:${n.limitType}`}function dl(n){return`Query(target=${(function(s){let a=s.path.canonicalString();return s.collectionGroup!==null&&(a+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(a+=`, filters: [${s.filters.map((o=>Yb(o))).join(", ")}]`),Gd(s.limit)||(a+=", limit: "+s.limit),s.orderBy.length>0&&(a+=`, orderBy: [${s.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),s.startAt&&(a+=", startAt: ",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map((o=>xl(o))).join(",")),s.endAt&&(a+=", endAt: ",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map((o=>xl(o))).join(",")),`Target(${a})`})(Fi(n))}; limitType=${n.limitType})`}function Yd(n,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):He.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(n,e)&&(function(a,o){for(const u of Lc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(n,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(n,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,E){const _=Pv(h,g,E);return h.inclusive?_<=0:_<0})(a.startAt,Lc(a),o)||a.endAt&&!(function(h,g,E){const _=Pv(h,g,E);return h.inclusive?_>=0:_>0})(a.endAt,Lc(a),o))})(n,e)}function GR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zb(n){return(e,s)=>{let a=!1;for(const o of Lc(n)){const u=XR(o,e,s);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function XR(n,e,s){const a=n.field.isKeyField()?He.comparator(e.key,s.key):(function(u,h,g){const E=h.data.field(u),_=g.data.field(u);return E!==null&&_!==null?wl(E,_):Ke(42886)})(n.field,e,s);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Ke(19790,{direction:n.dir})}}class fo{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),a=this.inner[s];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,s){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[s]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,((s,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return Ob(this.inner)}size(){return this.innerSize}}const $R=new nn(He.comparator);function Ia(){return $R}const e0=new nn(He.comparator);function Rc(...n){let e=e0;for(const s of n)e=e.insert(s.key,s);return e}function t0(n){let e=e0;return n.forEach(((s,a)=>e=e.insert(s,a.overlayedDocument))),e}function no(){return jc()}function n0(){return jc()}function jc(){return new fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const YR=new nn(He.comparator),QR=new xn(He.comparator);function gt(...n){let e=QR;for(const s of n)e=e.add(s);return e}const KR=new xn(_t);function WR(){return KR}function kp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function s0(n){return{integerValue:""+n}}function JR(n,e){return SR(e)?s0(e):kp(n,e)}class Qd{constructor(){this._=void 0}}function ZR(n,e,s){return n instanceof xd?(function(o,u){const h={fields:{[Vb]:{stringValue:Ub},[Bb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ap(u)&&(u=Xd(u)),u&&(h.fields[qb]=u),{mapValue:h}})(s,e):n instanceof Fc?a0(n,e):n instanceof zc?r0(n,e):(function(o,u){const h=i0(o,u),g=Gv(h)+Gv(o.Ae);return Km(h)&&Km(o.Ae)?s0(g):kp(o.serializer,g)})(n,e)}function eC(n,e,s){return n instanceof Fc?a0(n,e):n instanceof zc?r0(n,e):s}function i0(n,e){return n instanceof Ad?(function(a){return Km(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class xd extends Qd{}class Fc extends Qd{constructor(e){super(),this.elements=e}}function a0(n,e){const s=o0(e);for(const a of n.elements)s.some((o=>Xi(o,a)))||s.push(a);return{arrayValue:{values:s}}}class zc extends Qd{constructor(e){super(),this.elements=e}}function r0(n,e){let s=o0(e);for(const a of n.elements)s=s.filter((o=>!Xi(o,a)));return{arrayValue:{values:s}}}class Ad extends Qd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function Gv(n){return fn(n.integerValue||n.doubleValue)}function o0(n){return Rp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function tC(n,e){return n.field.isEqual(e.field)&&(function(a,o){return a instanceof Fc&&o instanceof Fc||a instanceof zc&&o instanceof zc?Sl(a.elements,o.elements,Xi):a instanceof Ad&&o instanceof Ad?Xi(a.Ae,o.Ae):a instanceof xd&&o instanceof xd})(n.transform,e.transform)}class nC{constructor(e,s){this.version=e,this.transformResults=s}}class zi{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new zi}static exists(e){return new zi(void 0,e)}static updateTime(e){return new zi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kd{}function l0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lp(n.key,zi.none()):new Qc(n.key,n.data,zi.none());{const s=n.data,a=ui.empty();let o=new xn(Xn.comparator);for(let u of e.fields)if(!o.has(u)){let h=s.field(u);h===null&&u.length>1&&(u=u.popLast(),h=s.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new ho(n.key,a,new bi(o.toArray()),zi.none())}}function sC(n,e,s){n instanceof Qc?(function(o,u,h){const g=o.value.clone(),E=$v(o.fieldTransforms,u,h.transformResults);g.setAll(E),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(n,e,s):n instanceof ho?(function(o,u,h){if(!md(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=$v(o.fieldTransforms,u,h.transformResults),E=u.data;E.setAll(c0(o)),E.setAll(g),u.convertToFoundDocument(h.version,E).setHasCommittedMutations()})(n,e,s):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,s)}function Dc(n,e,s,a){return n instanceof Qc?(function(u,h,g,E){if(!md(u.precondition,h))return g;const _=u.value.clone(),S=Yv(u.fieldTransforms,E,h);return _.setAll(S),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(n,e,s,a):n instanceof ho?(function(u,h,g,E){if(!md(u.precondition,h))return g;const _=Yv(u.fieldTransforms,E,h),S=h.data;return S.setAll(c0(u)),S.setAll(_),h.convertToFoundDocument(h.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(n,e,s,a):(function(u,h,g){return md(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(n,e,s)}function iC(n,e){let s=null;for(const a of n.fieldTransforms){const o=e.data.field(a.field),u=i0(a.transform,o||null);u!=null&&(s===null&&(s=ui.empty()),s.set(a.field,u))}return s||null}function Xv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Sl(a,o,((u,h)=>tC(u,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Qc extends Kd{constructor(e,s,a,o=[]){super(),this.key=e,this.value=s,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ho extends Kd{constructor(e,s,a,o,u=[]){super(),this.key=e,this.data=s,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function c0(n){const e=new Map;return n.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const a=n.data.field(s);e.set(s,a)}})),e}function $v(n,e,s){const a=new Map;kt(n.length===s.length,32656,{Ve:s.length,de:n.length});for(let o=0;o<s.length;o++){const u=n[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,eC(h,g,s[o]))}return a}function Yv(n,e,s){const a=new Map;for(const o of n){const u=o.transform,h=s.data.field(o.field);a.set(o.field,ZR(u,h,e))}return a}class Lp extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aC extends Kd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rC{constructor(e,s,a,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,s){const a=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&sC(u,e,a[o])}}applyToLocalView(e,s){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(s=Dc(a,e,s,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(s=Dc(a,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const a=n0();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=s.has(o.key)?null:g;const E=l0(h,g);E!==null&&a.set(o.key,E),h.isValidDocument()||h.convertToNoDocument(et.min())})),a}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),gt())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((s,a)=>Xv(s,a)))&&Sl(this.baseMutations,e.baseMutations,((s,a)=>Xv(s,a)))}}class jp{constructor(e,s,a,o){this.batch=e,this.commitVersion=s,this.mutationResults=a,this.docVersions=o}static from(e,s,a){kt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return YR})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new jp(e,s,a,o)}}class oC{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class lC{constructor(e,s){this.count=e,this.unchangedNames=s}}var vn,bt;function cC(n){switch(n){case pe.OK:return Ke(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ke(15467,{code:n})}}function u0(n){if(n===void 0)return Ca("GRPC error has no .code"),pe.UNKNOWN;switch(n){case vn.OK:return pe.OK;case vn.CANCELLED:return pe.CANCELLED;case vn.UNKNOWN:return pe.UNKNOWN;case vn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case vn.INTERNAL:return pe.INTERNAL;case vn.UNAVAILABLE:return pe.UNAVAILABLE;case vn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case vn.NOT_FOUND:return pe.NOT_FOUND;case vn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case vn.ABORTED:return pe.ABORTED;case vn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case vn.DATA_LOSS:return pe.DATA_LOSS;default:return Ke(39323,{code:n})}}(bt=vn||(vn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function uC(){return new TextEncoder}const dC=new mr([4294967295,4294967295],0);function Qv(n){const e=uC().encode(n),s=new Nb;return s.update(e),new Uint8Array(s.digest())}function Kv(n){const e=new DataView(n.buffer),s=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mr([s,a],0),new mr([o,u],0)]}class Dp{constructor(e,s,a){if(this.bitmap=e,this.padding=s,this.hashCount=a,s<0||s>=8)throw new Cc(`Invalid padding: ${s}`);if(a<0)throw new Cc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${a}`);if(e.length===0&&s!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=mr.fromNumber(this.ge)}ye(e,s,a){let o=e.add(s.multiply(mr.fromNumber(a)));return o.compare(dC)===1&&(o=new mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Qv(e),[a,o]=Kv(s);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,s,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Dp(u,o,s);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const s=Qv(e),[a,o]=Kv(s);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.be(h)}}be(e){const s=Math.floor(e/8),a=e%8;this.bitmap[s]|=1<<a}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wd{constructor(e,s,a,o,u){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,s,a){const o=new Map;return o.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,s,a)),new Wd(et.min(),o,new nn(_t),Ia(),gt())}}class Kc{constructor(e,s,a,o,u){this.resumeToken=e,this.current=s,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,s,a){return new Kc(a,s,gt(),gt(),gt())}}class pd{constructor(e,s,a,o){this.Se=e,this.removedTargetIds=s,this.key=a,this.De=o}}class d0{constructor(e,s){this.targetId=e,this.Ce=s}}class f0{constructor(e,s,a=$n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=a,this.cause=o}}class Wv{constructor(){this.ve=0,this.Fe=Jv(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),s=gt(),a=gt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:a=a.add(o);break;default:Ke(38017,{changeType:u})}})),new Kc(this.Me,this.xe,e,s,a)}Ke(){this.Oe=!1,this.Fe=Jv()}qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class fC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ia(),this.He=rd(),this.Je=rd(),this.Ze=new nn(_t)}Xe(e){for(const s of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const a=this.nt(s);switch(e.state){case 0:this.rt(s)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),a.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((a,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,a=e.Ce.count,o=this.ot(s);if(o){const u=o.target;if(Jm(u))if(a===0){const h=new He(u.path);this.et(s,h,ns.newNoDocument(h,et.min()))}else kt(a===1,20013,{expectedCount:a});else{const h=this._t(s);if(h!==a){const g=this.ut(e),E=g?this.ct(g,e,h):1;if(E!==0){this.it(s);const _=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,_)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=s;let h,g;try{h=vr(a).toUint8Array()}catch(E){if(E instanceof Mb)return bl("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{g=new Dp(h,o,u)}catch(E){return bl(E instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return g.ge===0?null:g}ct(e,s,a){return s.Ce.count===a-this.Pt(e,s.targetId)?0:2}Pt(e,s){const a=this.Ge.getRemoteKeysForTarget(s);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(s,u,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Jm(g.target)){const E=new He(g.target.path);this.It(E).has(h)||this.Et(h,E)||this.et(h,E,ns.newNoDocument(E,e))}u.Be&&(s.set(h,u.ke()),u.Ke())}}));let a=gt();this.Je.forEach(((u,h)=>{let g=!0;h.forEachWhile((E=>{const _=this.ot(E);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Wd(e,s,this.Ze,this.je,a);return this.je=Ia(),this.He=rd(),this.Je=rd(),this.Ze=new nn(_t),o}Ye(e,s){if(!this.rt(e))return;const a=this.Et(e,s.key)?2:0;this.nt(e).qe(s.key,a),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(e)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(e))}et(e,s,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.qe(s,1):o.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(e)),this.Je=this.Je.insert(s,this.Rt(s).add(e)),a&&(this.je=this.je.insert(s,a))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let s=this.ze.get(e);return s||(s=new Wv,this.ze.set(e,s)),s}Rt(e){let s=this.Je.get(e);return s||(s=new xn(_t),this.Je=this.Je.insert(e,s)),s}It(e){let s=this.He.get(e);return s||(s=new xn(_t),this.He=this.He.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||ke("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wv),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function rd(){return new nn(He.comparator)}function Jv(){return new nn(He.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},mC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pC={and:"AND",or:"OR"};class _C{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function tp(n,e){return n.useProto3Json||Gd(e)?e:{value:e}}function Rd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gC(n,e){return Rd(n,e.toTimestamp())}function Hi(n){return kt(!!n,49232),et.fromTimestamp((function(s){const a=Er(s);return new Qt(a.seconds,a.nanos)})(n))}function Op(n,e){return np(n,e).canonicalString()}function np(n,e){const s=(function(o){return new Gt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?s:s.child(e)}function m0(n){const e=Gt.fromString(n);return kt(E0(e),10190,{key:e.toString()}),e}function sp(n,e){return Op(n.databaseId,e.path)}function Tm(n,e){const s=m0(e);if(s.get(1)!==n.databaseId.projectId)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new He(_0(s))}function p0(n,e){return Op(n.databaseId,e)}function yC(n){const e=m0(n);return e.length===4?Gt.emptyPath():_0(e)}function ip(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _0(n){return kt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Zv(n,e,s){return{name:sp(n,e),fields:s.value.mapValue.fields}}function EC(n,e){let s;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ke(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,S){return _.useProto3Json?(kt(S===void 0||typeof S=="string",58123),$n.fromBase64String(S||"")):(kt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),$n.fromUint8Array(S||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(_){const S=_.code===void 0?pe.UNKNOWN:u0(_.code);return new Le(S,_.message||"")})(h);s=new f0(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Tm(n,a.document.name),u=Hi(a.document.updateTime),h=a.document.createTime?Hi(a.document.createTime):et.min(),g=new ui({mapValue:{fields:a.document.fields}}),E=ns.newFoundDocument(o,u,h,g),_=a.targetIds||[],S=a.removedTargetIds||[];s=new pd(_,S,E.key,E)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Tm(n,a.document),u=a.readTime?Hi(a.readTime):et.min(),h=ns.newNoDocument(o,u),g=a.removedTargetIds||[];s=new pd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Tm(n,a.document),u=a.removedTargetIds||[];s=new pd([],u,o,null)}else{if(!("filter"in e))return Ke(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new lC(o,u),g=a.targetId;s=new d0(g,h)}}return s}function vC(n,e){let s;if(e instanceof Qc)s={update:Zv(n,e.key,e.value)};else if(e instanceof Lp)s={delete:sp(n,e.key)};else if(e instanceof ho)s={update:Zv(n,e.key,e.data),updateMask:CC(e.fieldMask)};else{if(!(e instanceof aC))return Ke(16599,{dt:e.type});s={verify:sp(n,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof xd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Fc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof zc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Ad)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Ke(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:gC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ke(27497)})(n,e.precondition)),s}function TC(n,e){return n&&n.length>0?(kt(e!==void 0,14353),n.map((s=>(function(o,u){let h=o.updateTime?Hi(o.updateTime):Hi(u);return h.isEqual(et.min())&&(h=Hi(u)),new nC(h,o.transformResults||[])})(s,e)))):[]}function bC(n,e){return{documents:[p0(n,e.path)]}}function SC(n,e){const s={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=p0(n,o);const u=(function(_){if(_.length!==0)return y0(Ni.create(_,"and"))})(e.filters);u&&(s.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((S=>(function(x){return{field:fl(x.field),direction:xC(x.dir)}})(S)))})(e.orderBy);h&&(s.structuredQuery.orderBy=h);const g=tp(n,e.limit);return g!==null&&(s.structuredQuery.limit=g),e.startAt&&(s.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:s,parent:o}}function NC(n){let e=yC(n.parent);const s=n.structuredQuery,a=s.from?s.from.length:0;let o=null;if(a>0){kt(a===1,65062);const S=s.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];s.where&&(u=(function(w){const x=g0(w);return x instanceof Ni&&Xb(x)?x.getFilters():[x]})(s.where));let h=[];s.orderBy&&(h=(function(w){return w.map((x=>(function(X){return new wd(hl(X.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(x)))})(s.orderBy));let g=null;s.limit&&(g=(function(w){let x;return x=typeof w=="object"?w.value:w,Gd(x)?null:x})(s.limit));let E=null;s.startAt&&(E=(function(w){const x=!!w.before,B=w.values||[];return new Nd(B,x)})(s.startAt));let _=null;return s.endAt&&(_=(function(w){const x=!w.before,B=w.values||[];return new Nd(B,x)})(s.endAt)),FR(e,o,h,u,g,"F",E,_)}function wC(n,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function g0(n){return n.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const a=hl(s.unaryFilter.field);return Tn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=hl(s.unaryFilter.field);return Tn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=hl(s.unaryFilter.field);return Tn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=hl(s.unaryFilter.field);return Tn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(n):n.fieldFilter!==void 0?(function(s){return Tn.create(hl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(s){return Ni.create(s.compositeFilter.filters.map((a=>g0(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(s.compositeFilter.op))})(n):Ke(30097,{filter:n})}function xC(n){return hC[n]}function AC(n){return mC[n]}function RC(n){return pC[n]}function fl(n){return{fieldPath:n.canonicalString()}}function hl(n){return Xn.fromServerFormat(n.fieldPath)}function y0(n){return n instanceof Tn?(function(s){if(s.op==="=="){if(Bv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NAN"}};if(qv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Bv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NOT_NAN"}};if(qv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(s.field),op:AC(s.op),value:s.value}}})(n):n instanceof Ni?(function(s){const a=s.getFilters().map((o=>y0(o)));return a.length===1?a[0]:{compositeFilter:{op:RC(s.op),filters:a}}})(n):Ke(54877,{filter:n})}function CC(n){const e=[];return n.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function E0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function v0(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class fr{constructor(e,s,a,o,u=et.min(),h=et.min(),g=$n.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=s,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=E}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IC{constructor(e){this.yt=e}}function kC(n){const e=NC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ep(e,e.limit,"L"):e}class LC{constructor(){this.Sn=new jC}addToCollectionParentIndex(e,s){return this.Sn.add(s),_e.resolve()}getCollectionParents(e,s){return _e.resolve(this.Sn.getEntries(s))}addFieldIndex(e,s){return _e.resolve()}deleteFieldIndex(e,s){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,s){return _e.resolve()}getDocumentsMatchingTarget(e,s){return _e.resolve(null)}getIndexType(e,s){return _e.resolve(0)}getFieldIndexes(e,s){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,s){return _e.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,s){return _e.resolve(yr.min())}updateCollectionGroup(e,s,a){return _e.resolve()}updateIndexEntries(e,s){return _e.resolve()}}class jC{constructor(){this.index={}}add(e){const s=e.lastSegment(),a=e.popLast(),o=this.index[s]||new xn(Gt.comparator),u=!o.has(a);return this.index[s]=o.add(a),u}has(e){const s=e.lastSegment(),a=e.popLast(),o=this.index[s];return o&&o.has(a)}getEntries(e){return(this.index[e]||new xn(Gt.comparator)).toArray()}}const eT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040;class Rs{static withCacheSize(e){return new Rs(e,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=a}}Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(T0,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);class Al{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Al(0)}static ar(){return new Al(-1)}}const tT="LruGarbageCollector",DC=1048576;function nT([n,e],[s,a]){const o=_t(n,s);return o===0?_t(e,a):o}class OC{constructor(e){this.Pr=e,this.buffer=new xn(nT),this.Tr=0}Ir(){return++this.Tr}Er(e){const s=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const a=this.buffer.last();nT(s,a)<0&&(this.buffer=this.buffer.delete(a).add(s))}}get maxValue(){return this.buffer.last()[0]}}class MC{constructor(e,s,a){this.garbageCollector=e,this.asyncQueue=s,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ke(tT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Dl(s)?ke(tT,"Ignoring IndexedDB error during garbage collection: ",s):await jl(s)}await this.Ar(3e5)}))}}class UC{constructor(e,s){this.Vr=e,this.params=s}calculateTargetCount(e,s){return this.Vr.dr(e).next((a=>Math.floor(s/100*a)))}nthSequenceNumber(e,s){if(s===0)return _e.resolve(Hd.ce);const a=new OC(s);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,s,a){return this.Vr.removeTargets(e,s,a)}removeOrphanedDocuments(e,s){return this.Vr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(eT)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eT):this.gr(e,s)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,s){let a,o,u,h,g,E,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,s)))).next((w=>(u=w,E=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(_=Date.now(),ul()<=St.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-S}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(E-g)+`ms
	Removed ${w} documents in `+(_-E)+`ms
Total Duration: ${_-S}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function VC(n,e){return new UC(n,e)}class qC{constructor(){this.changes=new fo((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,ns.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const a=this.changes.get(s);return a!==void 0?_e.resolve(a):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BC{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}class PC{constructor(e,s,a,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,s){let a=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(a!==null&&Dc(a.mutation,o,bi.empty(),Qt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((a=>this.getLocalViewOfDocuments(e,a,gt()).next((()=>a))))}getLocalViewOfDocuments(e,s,a=gt()){const o=no();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,a).next((u=>{let h=Rc();return u.forEach(((g,E)=>{h=h.insert(g,E.overlayedDocument)})),h}))))}getOverlayedDocuments(e,s){const a=no();return this.populateOverlays(e,a,s).next((()=>this.computeViews(e,s,a,gt())))}populateOverlays(e,s,a){const o=[];return a.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{s.set(h,g)}))}))}computeViews(e,s,a,o){let u=Ia();const h=jc(),g=(function(){return jc()})();return s.forEach(((E,_)=>{const S=a.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof ho)?u=u.insert(_.key,_):S!==void 0?(h.set(_.key,S.mutation.getFieldMask()),Dc(S.mutation,_,S.mutation.getFieldMask(),Qt.now())):h.set(_.key,bi.empty())})),this.recalculateAndSaveOverlays(e,u).next((E=>(E.forEach(((_,S)=>h.set(_,S))),s.forEach(((_,S)=>g.set(_,new BC(S,h.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,s){const a=jc();let o=new nn(((h,g)=>h-g)),u=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((h=>{for(const g of h)g.keys().forEach((E=>{const _=s.get(E);if(_===null)return;let S=a.get(E)||bi.empty();S=g.applyToLocalView(_,S),a.set(E,S);const w=(o.get(g.batchId)||gt()).add(E);o=o.insert(g.batchId,w)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const E=g.getNext(),_=E.key,S=E.value,w=n0();S.forEach((x=>{if(!u.has(x)){const B=l0(s.get(x),a.get(x));B!==null&&w.set(x,B),u=u.add(x)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,w))}return _e.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,s,a,o){return zR(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):Wb(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,a,o):this.getDocumentsMatchingCollectionQuery(e,s,a,o)}getNextDocuments(e,s,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,a.largestBatchId,o-u.size):_e.resolve(no());let g=Vc,E=u;return h.next((_=>_e.forEach(_,((S,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(S)?_e.resolve():this.remoteDocumentCache.getEntry(e,S).next((x=>{E=E.insert(S,x)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,E,_,gt()))).next((S=>({batchId:g,changes:t0(S)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new He(s)).next((a=>{let o=Rc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,a,o){const u=s.collectionGroup;let h=Rc();return this.indexManager.getCollectionParents(e,u).next((g=>_e.forEach(g,(E=>{const _=(function(w,x){return new Yc(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(s,E.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((S=>{S.forEach(((w,x)=>{h=h.insert(w,x)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,s,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,a,u,o)))).next((h=>{u.forEach(((E,_)=>{const S=_.getKey();h.get(S)===null&&(h=h.insert(S,ns.newInvalidDocument(S)))}));let g=Rc();return h.forEach(((E,_)=>{const S=u.get(E);S!==void 0&&Dc(S.mutation,_,bi.empty(),Qt.now()),Yd(s,_)&&(g=g.insert(E,_))})),g}))}}class FC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,s){return _e.resolve(this.Nr.get(s))}saveBundleMetadata(e,s){return this.Nr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Hi(o.createTime)}})(s)),_e.resolve()}getNamedQuery(e,s){return _e.resolve(this.Br.get(s))}saveNamedQuery(e,s){return this.Br.set(s.name,(function(o){return{name:o.name,query:kC(o.bundledQuery),readTime:Hi(o.readTime)}})(s)),_e.resolve()}}class zC{constructor(){this.overlays=new nn(He.comparator),this.Lr=new Map}getOverlay(e,s){return _e.resolve(this.overlays.get(s))}getOverlays(e,s){const a=no();return _e.forEach(s,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,s,a){return a.forEach(((o,u)=>{this.bt(e,s,u)})),_e.resolve()}removeOverlaysForBatchId(e,s,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),_e.resolve()}getOverlaysForCollection(e,s,a){const o=no(),u=s.length+1,h=new He(s.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const E=g.getNext().value,_=E.getKey();if(!s.isPrefixOf(_.path))break;_.path.length===u&&E.largestBatchId>a&&o.set(E.getKey(),E)}return _e.resolve(o)}getOverlaysForCollectionGroup(e,s,a,o){let u=new nn(((_,S)=>_-S));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===s&&_.largestBatchId>a){let S=u.get(_.largestBatchId);S===null&&(S=no(),u=u.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=no(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=o)););return _e.resolve(g)}bt(e,s,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new oC(s,a));let u=this.Lr.get(s);u===void 0&&(u=gt(),this.Lr.set(s,u)),this.Lr.set(s,u.add(a.key))}}class HC{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,_e.resolve()}}class Mp{constructor(){this.kr=new xn(jn.Kr),this.qr=new xn(jn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,s){const a=new jn(e,s);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,s){e.forEach((a=>this.addReference(a,s)))}removeReference(e,s){this.Wr(new jn(e,s))}Qr(e,s){e.forEach((a=>this.removeReference(a,s)))}Gr(e){const s=new He(new Gt([])),a=new jn(s,e),o=new jn(s,e+1),u=[];return this.qr.forEachInRange([a,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const s=new He(new Gt([])),a=new jn(s,e),o=new jn(s,e+1);let u=gt();return this.qr.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const s=new jn(e,0),a=this.kr.firstAfterOrEqual(s);return a!==null&&e.isEqual(a.key)}}class jn{constructor(e,s){this.key=e,this.Hr=s}static Kr(e,s){return He.comparator(e.key,s.key)||_t(e.Hr,s.Hr)}static Ur(e,s){return _t(e.Hr,s.Hr)||He.comparator(e.key,s.key)}}class GC{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new xn(jn.Kr)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new rC(u,s,a,o);this.mutationQueue.push(h);for(const g of o)this.Jr=this.Jr.add(new jn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return _e.resolve(h)}lookupMutationBatch(e,s){return _e.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(e,s){const a=s+1,o=this.Xr(a),u=o<0?0:o;return _e.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?xp:this.Yn-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const a=new jn(s,0),o=new jn(s,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(h=>{const g=this.Zr(h.Hr);u.push(g)})),_e.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,s){let a=new xn(_t);return s.forEach((o=>{const u=new jn(o,0),h=new jn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(g=>{a=a.add(g.Hr)}))})),_e.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,s){const a=s.path,o=a.length+1;let u=a;He.isDocumentKey(u)||(u=u.child(""));const h=new jn(new He(u),0);let g=new xn(_t);return this.Jr.forEachWhile((E=>{const _=E.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(g=g.add(E.Hr)),!0)}),h),_e.resolve(this.Yr(g))}Yr(e){const s=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){kt(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return _e.forEach(s.mutations,(o=>{const u=new jn(o.key,s.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,s){const a=new jn(s,0),o=this.Jr.firstAfterOrEqual(a);return _e.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ei(e,s){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const s=this.Xr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}class XC{constructor(e){this.ti=e,this.docs=(function(){return new nn(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const a=s.key,o=this.docs.get(a),u=o?o.size:0,h=this.ti(s);return this.docs=this.docs.insert(a,{document:s.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const a=this.docs.get(s);return _e.resolve(a?a.document.mutableCopy():ns.newInvalidDocument(s))}getEntries(e,s){let a=Ia();return s.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():ns.newInvalidDocument(o))})),_e.resolve(a)}getDocumentsMatchingQuery(e,s,a,o){let u=Ia();const h=s.path,g=new He(h.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(g);for(;E.hasNext();){const{key:_,value:{document:S}}=E.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||ER(yR(S),a)<=0||(o.has(S.key)||Yd(s,S))&&(u=u.insert(S.key,S.mutableCopy()))}return _e.resolve(u)}getAllFromCollectionGroup(e,s,a,o){Ke(9500)}ni(e,s){return _e.forEach(this.docs,(a=>s(a)))}newChangeBuffer(e){return new $C(this)}getSize(e){return _e.resolve(this.size)}}class $C extends qC{constructor(e){super(),this.Mr=e}applyChanges(e){const s=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?s.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),_e.waitFor(s)}getFromCache(e,s){return this.Mr.getEntry(e,s)}getAllFromCache(e,s){return this.Mr.getEntries(e,s)}}class YC{constructor(e){this.persistence=e,this.ri=new fo((s=>Cp(s)),Ip),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new Mp,this.targetCount=0,this.oi=Al._r()}forEachTarget(e,s){return this.ri.forEach(((a,o)=>s(o))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,s,a){return a&&(this.lastRemoteSnapshotVersion=a),s>this.ii&&(this.ii=s),_e.resolve()}lr(e){this.ri.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.oi=new Al(s),this.highestTargetId=s),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,s){return this.lr(s),this.targetCount+=1,_e.resolve()}updateTargetData(e,s){return this.lr(s),_e.resolve()}removeTargetData(e,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,s,a){let o=0;const u=[];return this.ri.forEach(((h,g)=>{g.sequenceNumber<=s&&a.get(g.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),_e.waitFor(u).next((()=>o))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,s){const a=this.ri.get(s)||null;return _e.resolve(a)}addMatchingKeys(e,s,a){return this.si.$r(s,a),_e.resolve()}removeMatchingKeys(e,s,a){this.si.Qr(s,a);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),_e.waitFor(u)}removeMatchingKeysForTargetId(e,s){return this.si.Gr(s),_e.resolve()}getMatchingKeysForTargetId(e,s){const a=this.si.jr(s);return _e.resolve(a)}containsKey(e,s){return _e.resolve(this.si.containsKey(s))}}class b0{constructor(e,s){this._i={},this.overlays={},this.ai=new Hd(0),this.ui=!1,this.ui=!0,this.ci=new HC,this.referenceDelegate=e(this),this.li=new YC(this),this.indexManager=new LC,this.remoteDocumentCache=(function(o){return new XC(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new IC(s),this.Pi=new FC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new zC,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let a=this._i[e.toKey()];return a||(a=new GC(s,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,s,a){ke("MemoryPersistence","Starting transaction:",e);const o=new QC(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,s){return _e.or(Object.values(this._i).map((a=>()=>a.containsKey(e,s))))}}class QC extends TR{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new Mp,this.Ai=null}static Vi(e){return new Up(e)}get di(){if(this.Ai)return this.Ai;throw Ke(60996)}addReference(e,s,a){return this.Ri.addReference(a,s),this.di.delete(a.toString()),_e.resolve()}removeReference(e,s,a){return this.Ri.removeReference(a,s),this.di.add(a.toString()),_e.resolve()}markPotentiallyOrphaned(e,s){return this.di.add(s.toString()),_e.resolve()}removeTarget(e,s){this.Ri.Gr(s.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,s)))}Ti(){this.Ai=new Set}Ii(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.di,(a=>{const o=He.fromPath(a);return this.mi(e,o).next((u=>{u||s.removeEntry(o,et.min())}))})).next((()=>(this.Ai=null,s.apply(e))))}updateLimboDocument(e,s){return this.mi(e,s).next((a=>{a?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(e){return 0}mi(e,s){return _e.or([()=>_e.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ei(e,s)])}}class Cd{constructor(e,s){this.persistence=e,this.fi=new fo((a=>NR(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=VC(this,s)}static Vi(e,s){return new Cd(e,s)}Ti(){}Ii(e){return _e.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}dr(e){const s=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>s.next((o=>a+o))))}pr(e){let s=0;return this.mr(e,(a=>{s++})).next((()=>s))}mr(e,s){return _e.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?_e.resolve():s(o)))))}removeTargets(e,s,a){return this.persistence.getTargetCache().removeTargets(e,s,a)}removeOrphanedDocuments(e,s){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,s).next((g=>{g||(a++,u.removeEntry(h,et.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,s){return this.fi.set(s,e.currentSequenceNumber),_e.resolve()}removeTarget(e,s){const a=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,s,a){return this.fi.set(a,e.currentSequenceNumber),_e.resolve()}removeReference(e,s,a){return this.fi.set(a,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,s){return this.fi.set(s,e.currentSequenceNumber),_e.resolve()}hi(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=fd(e.data.value)),s}wr(e,s,a){return _e.or([()=>this.persistence.Ei(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.fi.get(s);return _e.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vp{constructor(e,s,a,o){this.targetId=e,this.fromCache=s,this.Ts=a,this.Is=o}static Es(e,s){let a=gt(),o=gt();for(const u of s.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Vp(e,s.fromCache,a,o)}}class KC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return zx()?8:bR(Px())>0?6:4})()}initialize(e,s){this.fs=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,a,o){const u={result:null};return this.gs(e,s).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,s,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new KC;return this.ys(e,s,h).next((g=>{if(u.result=g,this.As)return this.ws(e,s,h,g.size)}))})).next((()=>u.result))}ws(e,s,a,o){return a.documentReadCount<this.Vs?(ul()<=St.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",dl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),_e.resolve()):(ul()<=St.DEBUG&&ke("QueryEngine","Query:",dl(s),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(ul()<=St.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",dl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(s))):_e.resolve())}gs(e,s){if(Hv(s))return _e.resolve(null);let a=Fi(s);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=ep(s,null,"F"),a=Fi(s)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=gt(...u);return this.fs.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((E=>{const _=this.bs(s,g);return this.Ss(s,_,h,E.readTime)?this.gs(e,ep(s,null,"F")):this.Ds(e,_,s,E)}))))})))))}ps(e,s,a,o){return Hv(s)||o.isEqual(et.min())?_e.resolve(null):this.fs.getDocuments(e,a).next((u=>{const h=this.bs(s,u);return this.Ss(s,h,a,o)?_e.resolve(null):(ul()<=St.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dl(s)),this.Ds(e,h,s,gR(o,Vc)).next((g=>g)))}))}bs(e,s){let a=new xn(Zb(e));return s.forEach(((o,u)=>{Yd(e,u)&&(a=a.add(u))})),a}Ss(e,s,a,o){if(e.limit===null)return!1;if(a.size!==s.size)return!0;const u=e.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,s,a){return ul()<=St.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",dl(s)),this.fs.getDocumentsMatchingQuery(e,s,yr.min(),a)}Ds(e,s,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(s.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const qp="LocalStore",JC=3e8;class ZC{constructor(e,s,a,o){this.persistence=e,this.Cs=s,this.serializer=o,this.vs=new nn(_t),this.Fs=new fo((u=>Cp(u)),Ip),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.vs)))}}function e2(n,e,s,a){return new ZC(n,e,s,a)}async function S0(n,e){const s=it(n);return await s.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return s.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,s.Os(e),s.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let E=gt();for(const _ of o){h.push(_.batchId);for(const S of _.mutations)E=E.add(S.key)}for(const _ of u){g.push(_.batchId);for(const S of _.mutations)E=E.add(S.key)}return s.localDocuments.getDocuments(a,E).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:g})))}))}))}function t2(n,e){const s=it(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=s.xs.newChangeBuffer({trackRemovals:!0});return(function(g,E,_,S){const w=_.batch,x=w.keys();let B=_e.resolve();return x.forEach((X=>{B=B.next((()=>S.getEntry(E,X))).next((V=>{const U=_.docVersions.get(X);kt(U!==null,48541),V.version.compareTo(U)<0&&(w.applyToRemoteDocument(V,_),V.isValidDocument()&&(V.setReadTime(_.commitVersion),S.addEntry(V)))}))})),B.next((()=>g.mutationQueue.removeMutationBatch(E,w)))})(s,a,e,u).next((()=>u.apply(a))).next((()=>s.mutationQueue.performConsistencyCheck(a))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let E=gt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(E=E.add(g.batch.mutations[_].key));return E})(e)))).next((()=>s.localDocuments.getDocuments(a,o)))}))}function N0(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.li.getLastRemoteSnapshotVersion(s)))}function n2(n,e){const s=it(n),a=e.snapshotVersion;let o=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=s.xs.newChangeBuffer({trackRemovals:!0});o=s.vs;const g=[];e.targetChanges.forEach(((S,w)=>{const x=o.get(w);if(!x)return;g.push(s.li.removeMatchingKeys(u,S.removedDocuments,w).next((()=>s.li.addMatchingKeys(u,S.addedDocuments,w))));let B=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?B=B.withResumeToken($n.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):S.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(S.resumeToken,a)),o=o.insert(w,B),(function(V,U,z){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=JC?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(x,B,S)&&g.push(s.li.updateTargetData(u,B))}));let E=Ia(),_=gt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(s.persistence.referenceDelegate.updateLimboDocument(u,S))})),g.push(s2(u,h,e.documentUpdates).next((S=>{E=S.Bs,_=S.Ls}))),!a.isEqual(et.min())){const S=s.li.getLastRemoteSnapshotVersion(u).next((w=>s.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(S)}return _e.waitFor(g).next((()=>h.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,E,_))).next((()=>E))})).then((u=>(s.vs=o,u)))}function s2(n,e,s){let a=gt(),o=gt();return s.forEach((u=>a=a.add(u))),e.getEntries(n,a).next((u=>{let h=Ia();return s.forEach(((g,E)=>{const _=u.get(g);E.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),E.isNoDocument()&&E.version.isEqual(et.min())?(e.removeEntry(g,E.readTime),h=h.insert(g,E)):!_.isValidDocument()||E.version.compareTo(_.version)>0||E.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(E),h=h.insert(g,E)):ke(qp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",E.version)})),{Bs:h,Ls:o}}))}function i2(n,e){const s=it(n);return s.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=xp),s.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function a2(n,e){const s=it(n);return s.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return s.li.getTargetData(a,e).next((u=>u?(o=u,_e.resolve(o)):s.li.allocateTargetId(a).next((h=>(o=new fr(e,h,"TargetPurposeListen",a.currentSequenceNumber),s.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=s.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.vs=s.vs.insert(a.targetId,a),s.Fs.set(e,a.targetId)),a}))}async function ap(n,e,s){const a=it(n),o=a.vs.get(e),u=s?"readwrite":"readwrite-primary";try{s||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Dl(h))throw h;ke(qp,`Failed to update sequence numbers for target ${e}: ${h}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function sT(n,e,s){const a=it(n);let o=et.min(),u=gt();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(E,_,S){const w=it(E),x=w.Fs.get(S);return x!==void 0?_e.resolve(w.vs.get(x)):w.li.getTargetData(_,S)})(a,h,Fi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(h,g.targetId).next((E=>{u=E}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,s?o:et.min(),s?u:gt()))).next((g=>(r2(a,GR(e),g),{documents:g,ks:u})))))}function r2(n,e,s){let a=n.Ms.get(e)||et.min();s.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),n.Ms.set(e,a)}class iT{constructor(){this.activeTargetIds=WR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o2{constructor(){this.vo=new iT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,a){}addLocalQueryTarget(e,s=!0){return s&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,s,a){this.Fo[e]=s}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new iT,Promise.resolve()}handleUserChange(e,s,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class l2{Mo(e){}shutdown(){}}const aT="ConnectivityMonitor";class rT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ke(aT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ke(aT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let od=null;function rp(){return od===null?od=(function(){return 268435456+Math.round(2147483648*Math.random())})():od++,"0x"+od.toString(16)}const bm="RestConnection",c2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class u2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===bd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,s,a,o,u){const h=rp(),g=this.Qo(e,s.toUriEncodedString());ke(bm,`Sending RPC '${e}' ${h}:`,g,a);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,o,u);const{host:_}=new URL(g),S=bp(_);return this.zo(e,g,E,a,S).then((w=>(ke(bm,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw bl(bm,`RPC '${e}' ${h} failed with error: `,w,"url: ",g,"request:",a),w}))}jo(e,s,a,o,u,h){return this.Wo(e,s,a,o,u)}Go(e,s,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,s){const a=c2[e];let o=`${this.qo}/v1/${s}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class d2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const es="WebChannelConnection",Nc=(n,e,s)=>{n.listen(e,(a=>{try{s(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class gl extends u2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!gl.c_){const e=Rb();Nc(e,Ab.STAT_EVENT,(s=>{s.stat===$m.PROXY?ke(es,"STAT_EVENT: detected buffering proxy"):s.stat===$m.NOPROXY&&ke(es,"STAT_EVENT: detected no buffering proxy")})),gl.c_=!0}}zo(e,s,a,o,u){const h=rp();return new Promise(((g,E)=>{const _=new wb;_.setWithCredentials(!0),_.listenOnce(xb.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case dd.NO_ERROR:const w=_.getResponseJson();ke(es,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),g(w);break;case dd.TIMEOUT:ke(es,`RPC '${e}' ${h} timed out`),E(new Le(pe.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:const x=_.getStatus();if(ke(es,`RPC '${e}' ${h} failed with status:`,x,"response text:",_.getResponseText()),x>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const X=B?.error;if(X&&X.status&&X.message){const V=(function(z){const G=z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(G)>=0?G:pe.UNKNOWN})(X.status);E(new Le(V,X.message))}else E(new Le(pe.UNKNOWN,"Server responded with status "+_.getStatus()))}else E(new Le(pe.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ke(es,`RPC '${e}' ${h} completed.`)}}));const S=JSON.stringify(o);ke(es,`RPC '${e}' ${h} sending request:`,o),_.send(s,"POST",S,a,15)}))}T_(e,s,a){const o=rp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(g.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,s,a),g.encodeInitMessageHeaders=!0;const _=u.join("");ke(es,`Creating RPC '${e}' stream ${o}: ${_}`,g);const S=h.createWebChannel(_,g);this.I_(S);let w=!1,x=!1;const B=new d2({Ho:X=>{x?ke(es,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(w||(ke(es,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),ke(es,`RPC '${e}' stream ${o} sending:`,X),S.send(X))},Jo:()=>S.close()});return Nc(S,Ac.EventType.OPEN,(()=>{x||(ke(es,`RPC '${e}' stream ${o} transport opened.`),B.i_())})),Nc(S,Ac.EventType.CLOSE,(()=>{x||(x=!0,ke(es,`RPC '${e}' stream ${o} transport closed`),B.o_(),this.E_(S))})),Nc(S,Ac.EventType.ERROR,(X=>{x||(x=!0,bl(es,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),B.o_(new Le(pe.UNAVAILABLE,"The operation could not be completed")))})),Nc(S,Ac.EventType.MESSAGE,(X=>{if(!x){const V=X.data[0];kt(!!V,16349);const U=V,z=U?.error||U[0]?.error;if(z){ke(es,`RPC '${e}' stream ${o} received error:`,z);const G=z.status;let K=(function(ge){const O=vn[ge];if(O!==void 0)return u0(O)})(G),oe=z.message;K===void 0&&(K=pe.INTERNAL,oe="Unknown error status: "+G+" with message "+z.message),x=!0,B.o_(new Le(K,oe)),S.close()}else ke(es,`RPC '${e}' stream ${o} received:`,V),B.__(V)}})),gl.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((s=>s===e))}Go(e,s,a){super.Go(e,s,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Cb()}}function f2(n){return new gl(n)}function Sm(){return typeof document<"u"?document:null}function Jd(n){return new _C(n,!0)}gl.c_=!1;class w0{constructor(e,s,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=s,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const s=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-a);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const oT="PersistentStream";class x0{constructor(e,s,a,o,u,h,g,E){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new w0(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===pe.RESOURCE_EXHAUSTED?(Ca(s.toString()),Ca("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(s)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===s&&this.G_(a,o)}),(a=>{e((()=>{const o=new Le(pe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,s){const a=this.Q_(this.D_);this.stream=this.j_(e,s),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(oT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return s=>{this.Ci.enqueueAndForget((()=>this.D_===e?s():(ke(oT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h2 extends x0{constructor(e,s,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,a,o,h),this.serializer=u}j_(e,s){return this.connection.T_("Listen",e,s)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=EC(this.serializer,e),a=(function(u){if(!("targetChange"in u))return et.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?et.min():h.readTime?Hi(h.readTime):et.min()})(e);return this.listener.J_(s,a)}Z_(e){const s={};s.database=ip(this.serializer),s.addTarget=(function(u,h){let g;const E=h.target;if(g=Jm(E)?{documents:bC(u,E)}:{query:SC(u,E).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=h0(u,h.resumeToken);const _=tp(u,h.expectedCount);_!==null&&(g.expectedCount=_)}else if(h.snapshotVersion.compareTo(et.min())>0){g.readTime=Rd(u,h.snapshotVersion.toTimestamp());const _=tp(u,h.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const a=wC(this.serializer,e);a&&(s.labels=a),this.K_(s)}X_(e){const s={};s.database=ip(this.serializer),s.removeTarget=e,this.K_(s)}}class m2 extends x0{constructor(e,s,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,a,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}H_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=TC(e.writeResults,e.commitTime),a=Hi(e.commitTime);return this.listener.na(a,s)}ra(){const e={};e.database=ip(this.serializer),this.K_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((a=>vC(this.serializer,a)))};this.K_(s)}}class p2{}class _2 extends p2{constructor(e,s,a,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,s,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,np(s,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Le(pe.UNKNOWN,u.toString())}))}jo(e,s,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.jo(e,np(s,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Le(pe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function g2(n,e,s,a){return new _2(n,e,s,a)}class y2{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ca(s),this.aa=!1):ke("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ao="RemoteStore";class E2{constructor(e,s,a,o,u){this.localStore=e,this.datastore=s,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{a.enqueueAndForget((async()=>{mo(this)&&(ke(ao,"Restarting streams for network reachability change."),await(async function(E){const _=it(E);_.Ea.add(4),await Wc(_),_.Va.set("Unknown"),_.Ea.delete(4),await Zd(_)})(this))}))})),this.Va=new y2(a,o)}}async function Zd(n){if(mo(n))for(const e of n.Ra)await e(!0)}async function Wc(n){for(const e of n.Ra)await e(!1)}function A0(n,e){const s=it(n);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),zp(s)?Fp(s):Ol(s).O_()&&Pp(s,e))}function Bp(n,e){const s=it(n),a=Ol(s);s.Ia.delete(e),a.O_()&&R0(s,e),s.Ia.size===0&&(a.O_()?a.L_():mo(s)&&s.Va.set("Unknown"))}function Pp(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const s=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ol(n).Z_(e)}function R0(n,e){n.da.$e(e),Ol(n).X_(e)}function Fp(n){n.da=new fC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ol(n).start(),n.Va.ua()}function zp(n){return mo(n)&&!Ol(n).x_()&&n.Ia.size>0}function mo(n){return it(n).Ea.size===0}function C0(n){n.da=void 0}async function v2(n){n.Va.set("Online")}async function T2(n){n.Ia.forEach(((e,s)=>{Pp(n,e)}))}async function b2(n,e){C0(n),zp(n)?(n.Va.ha(e),Fp(n)):n.Va.set("Unknown")}async function S2(n,e,s){if(n.Va.set("Online"),e instanceof f0&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.da.removeTarget(g))})(n,e)}catch(a){ke(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Id(n,a)}else if(e instanceof pd?n.da.Xe(e):e instanceof d0?n.da.st(e):n.da.tt(e),!s.isEqual(et.min()))try{const a=await N0(n.localStore);s.compareTo(a)>=0&&await(function(u,h){const g=u.da.Tt(h);return g.targetChanges.forEach(((E,_)=>{if(E.resumeToken.approximateByteSize()>0){const S=u.Ia.get(_);S&&u.Ia.set(_,S.withResumeToken(E.resumeToken,h))}})),g.targetMismatches.forEach(((E,_)=>{const S=u.Ia.get(E);if(!S)return;u.Ia.set(E,S.withResumeToken($n.EMPTY_BYTE_STRING,S.snapshotVersion)),R0(u,E);const w=new fr(S.target,E,_,S.sequenceNumber);Pp(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(n,s)}catch(a){ke(ao,"Failed to raise snapshot:",a),await Id(n,a)}}async function Id(n,e,s){if(!Dl(e))throw e;n.Ea.add(1),await Wc(n),n.Va.set("Offline"),s||(s=()=>N0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ke(ao,"Retrying IndexedDB access"),await s(),n.Ea.delete(1),await Zd(n)}))}function I0(n,e){return e().catch((s=>Id(n,s,e)))}async function ef(n){const e=it(n),s=br(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;N2(e);)try{const o=await i2(e.localStore,a);if(o===null){e.Ta.length===0&&s.L_();break}a=o.batchId,w2(e,o)}catch(o){await Id(e,o)}k0(e)&&L0(e)}function N2(n){return mo(n)&&n.Ta.length<10}function w2(n,e){n.Ta.push(e);const s=br(n);s.O_()&&s.Y_&&s.ea(e.mutations)}function k0(n){return mo(n)&&!br(n).x_()&&n.Ta.length>0}function L0(n){br(n).start()}async function x2(n){br(n).ra()}async function A2(n){const e=br(n);for(const s of n.Ta)e.ea(s.mutations)}async function R2(n,e,s){const a=n.Ta.shift(),o=jp.from(a,e,s);await I0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await ef(n)}async function C2(n,e){e&&br(n).Y_&&await(async function(a,o){if((function(h){return cC(h)&&h!==pe.ABORTED})(o.code)){const u=a.Ta.shift();br(a).B_(),await I0(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ef(a)}})(n,e),k0(n)&&L0(n)}async function lT(n,e){const s=it(n);s.asyncQueue.verifyOperationInProgress(),ke(ao,"RemoteStore received new credentials");const a=mo(s);s.Ea.add(3),await Wc(s),a&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Zd(s)}async function I2(n,e){const s=it(n);e?(s.Ea.delete(2),await Zd(s)):e||(s.Ea.add(2),await Wc(s),s.Va.set("Unknown"))}function Ol(n){return n.ma||(n.ma=(function(s,a,o){const u=it(s);return u.sa(),new h2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Zo:v2.bind(null,n),Yo:T2.bind(null,n),t_:b2.bind(null,n),J_:S2.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),zp(n)?Fp(n):n.Va.set("Unknown")):(await n.ma.stop(),C0(n))}))),n.ma}function br(n){return n.fa||(n.fa=(function(s,a,o){const u=it(s);return u.sa(),new m2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:x2.bind(null,n),t_:C2.bind(null,n),ta:A2.bind(null,n),na:R2.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ef(n)):(await n.fa.stop(),n.Ta.length>0&&(ke(ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Hp{constructor(e,s,a,o,u){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,a,o,u){const h=Date.now()+a,g=new Hp(e,s,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(n,e){if(Ca("AsyncQueue",`${e}: ${n}`),Dl(n))return new Le(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(s,a)=>e(s,a)||He.comparator(s.key,a.key):(s,a)=>He.comparator(s.key,a.key),this.keyedMap=Rc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,a)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const a=new yl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=s,a}}class cT{constructor(){this.ga=new nn(He.comparator)}track(e){const s=e.doc.key,a=this.ga.get(s);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(s,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(s,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(s):e.type===1&&a.type===2?this.ga=this.ga.insert(s,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ke(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,a)=>{e.push(a)})),e}}class Rl{constructor(e,s,a,o,u,h,g,E,_){this.query=e,this.docs=s,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=E,this.hasCachedResults=_}static fromInitialDocuments(e,s,a,o,u){const h=[];return s.forEach((g=>{h.push({type:0,doc:g})})),new Rl(e,s,yl.emptySet(s),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,a=e.docChanges;if(s.length!==a.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==a[o].type||!s[o].doc.isEqual(a[o].doc))return!1;return!0}}class k2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class L2{constructor(){this.queries=uT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,a){const o=it(s),u=o.queries;o.queries=uT(),u.forEach(((h,g)=>{for(const E of g.ba)E.onError(a)}))})(this,new Le(pe.ABORTED,"Firestore shutting down"))}}function uT(){return new fo((n=>Jb(n)),$d)}async function j2(n,e){const s=it(n);let a=3;const o=e.query;let u=s.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new k2,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(h){const g=Gp(h,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(g)}s.queries.set(o,u),u.ba.push(e),e.va(s.onlineState),u.wa&&e.Fa(u.wa)&&Xp(s)}async function D2(n,e){const s=it(n),a=e.query;let o=3;const u=s.queries.get(a);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(a),s.onUnlisten(a,!0);case 1:return s.queries.delete(a),s.onUnlisten(a,!1);case 2:return s.onLastRemoteStoreUnlisten(a);default:return}}function O2(n,e){const s=it(n);let a=!1;for(const o of e){const u=o.query,h=s.queries.get(u);if(h){for(const g of h.ba)g.Fa(o)&&(a=!0);h.wa=o}}a&&Xp(s)}function M2(n,e,s){const a=it(n),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(s);a.queries.delete(e)}function Xp(n){n.Ca.forEach((e=>{e.next()}))}var op,dT;(dT=op||(op={})).Ma="default",dT.Cache="cache";class U2{constructor(e,s,a){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Rl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const a=s!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}class j0{constructor(e){this.key=e}}class D0{constructor(e){this.key=e}}class V2{constructor(e,s){this.query=e,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=gt(),this.mutatedKeys=gt(),this.eu=Zb(e),this.tu=new yl(this.eu)}get nu(){return this.Za}ru(e,s){const a=s?s.iu:new cT,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,h=o,g=!1;const E=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,w)=>{const x=o.get(S),B=Yd(this.query,w)?w:null,X=!!x&&this.mutatedKeys.has(x.key),V=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let U=!1;x&&B?x.data.isEqual(B.data)?X!==V&&(a.track({type:3,doc:B}),U=!0):this.su(x,B)||(a.track({type:2,doc:B}),U=!0,(E&&this.eu(B,E)>0||_&&this.eu(B,_)<0)&&(g=!0)):!x&&B?(a.track({type:0,doc:B}),U=!0):x&&!B&&(a.track({type:1,doc:x}),U=!0,(E||_)&&(g=!0)),U&&(B?(h=h.add(B),u=V?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const S=this.query.limitType==="F"?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),a.track({type:1,doc:S})}return{tu:h,iu:a,Ss:g,mutatedKeys:u}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((S,w)=>(function(B,X){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Vt:U})}};return V(B)-V(X)})(S.type,w.type)||this.eu(S.doc,w.doc))),this.ou(a),o=o??!1;const g=s&&!o?this._u():[],E=this.Ya.size===0&&this.current&&!o?1:0,_=E!==this.Xa;return this.Xa=E,h.length!==0||_?{snapshot:new Rl(this.query,e.tu,u,h,e.mutatedKeys,E===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=gt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const s=[];return e.forEach((a=>{this.Ya.has(a)||s.push(new D0(a))})),this.Ya.forEach((a=>{e.has(a)||s.push(new j0(a))})),s}cu(e){this.Za=e.ks,this.Ya=gt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $p="SyncEngine";class q2{constructor(e,s,a){this.query=e,this.targetId=s,this.view=a}}class B2{constructor(e){this.key=e,this.hu=!1}}class P2{constructor(e,s,a,o,u,h){this.localStore=e,this.remoteStore=s,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new fo((g=>Jb(g)),$d),this.Iu=new Map,this.Eu=new Set,this.Ru=new nn(He.comparator),this.Au=new Map,this.Vu=new Mp,this.du={},this.mu=new Map,this.fu=Al.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function F2(n,e,s=!0){const a=B0(n);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await O0(a,e,s,!0),o}async function z2(n,e){const s=B0(n);await O0(s,e,!0,!1)}async function O0(n,e,s,a){const o=await a2(n.localStore,Fi(e)),u=o.targetId,h=n.sharedClientState.addLocalQueryTarget(u,s);let g;return a&&(g=await H2(n,e,u,h==="current",o.resumeToken)),n.isPrimaryClient&&s&&A0(n.remoteStore,o),g}async function H2(n,e,s,a,o){n.pu=(w,x,B)=>(async function(V,U,z,G){let K=U.view.ru(z);K.Ss&&(K=await sT(V.localStore,U.query,!1).then((({documents:O})=>U.view.ru(O,K))));const oe=G&&G.targetChanges.get(U.targetId),ye=G&&G.targetMismatches.get(U.targetId)!=null,ge=U.view.applyChanges(K,V.isPrimaryClient,oe,ye);return hT(V,U.targetId,ge.au),ge.snapshot})(n,w,x,B);const u=await sT(n.localStore,e,!0),h=new V2(e,u.ks),g=h.ru(u.documents),E=Kc.createSynthesizedTargetChangeForCurrentChange(s,a&&n.onlineState!=="Offline",o),_=h.applyChanges(g,n.isPrimaryClient,E);hT(n,s,_.au);const S=new q2(e,s,h);return n.Tu.set(e,S),n.Iu.has(s)?n.Iu.get(s).push(e):n.Iu.set(s,[e]),_.snapshot}async function G2(n,e,s){const a=it(n),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!$d(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),s&&Bp(a.remoteStore,o.targetId),lp(a,o.targetId)})).catch(jl)):(lp(a,o.targetId),await ap(a.localStore,o.targetId,!0))}async function X2(n,e){const s=it(n),a=s.Tu.get(e),o=s.Iu.get(a.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(a.targetId),Bp(s.remoteStore,a.targetId))}async function $2(n,e,s){const a=eI(n);try{const o=await(function(h,g){const E=it(h),_=Qt.now(),S=g.reduce(((B,X)=>B.add(X.key)),gt());let w,x;return E.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let X=Ia(),V=gt();return E.xs.getEntries(B,S).next((U=>{X=U,X.forEach(((z,G)=>{G.isValidDocument()||(V=V.add(z))}))})).next((()=>E.localDocuments.getOverlayedDocuments(B,X))).next((U=>{w=U;const z=[];for(const G of g){const K=iC(G,w.get(G.key).overlayedDocument);K!=null&&z.push(new ho(G.key,K,zb(K.value.mapValue),zi.exists(!0)))}return E.mutationQueue.addMutationBatch(B,_,z,g)})).next((U=>{x=U;const z=U.applyToLocalDocumentSet(w,V);return E.documentOverlayCache.saveOverlays(B,U.batchId,z)}))})).then((()=>({batchId:x.batchId,changes:t0(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,E){let _=h.du[h.currentUser.toKey()];_||(_=new nn(_t)),_=_.insert(g,E),h.du[h.currentUser.toKey()]=_})(a,o.batchId,s),await Jc(a,o.changes),await ef(a.remoteStore)}catch(o){const u=Gp(o,"Failed to persist write");s.reject(u)}}async function M0(n,e){const s=it(n);try{const a=await n2(s.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=s.Au.get(u);h&&(kt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?kt(h.hu,14607):o.removedDocuments.size>0&&(kt(h.hu,42227),h.hu=!1))})),await Jc(s,a,e)}catch(a){await jl(a)}}function fT(n,e,s){const a=it(n);if(a.isPrimaryClient&&s===0||!a.isPrimaryClient&&s===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const E=it(h);E.onlineState=g;let _=!1;E.queries.forEach(((S,w)=>{for(const x of w.ba)x.va(g)&&(_=!0)})),_&&Xp(E)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Y2(n,e,s){const a=it(n);a.sharedClientState.updateQueryState(e,"rejected",s);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new nn(He.comparator);h=h.insert(u,ns.newNoDocument(u,et.min()));const g=gt().add(u),E=new Wd(et.min(),new Map,new nn(_t),h,g);await M0(a,E),a.Ru=a.Ru.remove(u),a.Au.delete(e),Yp(a)}else await ap(a.localStore,e,!1).then((()=>lp(a,e,s))).catch(jl)}async function Q2(n,e){const s=it(n),a=e.batch.batchId;try{const o=await t2(s.localStore,e);V0(s,a,null),U0(s,a),s.sharedClientState.updateMutationState(a,"acknowledged"),await Jc(s,o)}catch(o){await jl(o)}}async function K2(n,e,s){const a=it(n);try{const o=await(function(h,g){const E=it(h);return E.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return E.mutationQueue.lookupMutationBatch(_,g).next((w=>(kt(w!==null,37113),S=w.keys(),E.mutationQueue.removeMutationBatch(_,w)))).next((()=>E.mutationQueue.performConsistencyCheck(_))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>E.localDocuments.getDocuments(_,S)))}))})(a.localStore,e);V0(a,e,s),U0(a,e),a.sharedClientState.updateMutationState(e,"rejected",s),await Jc(a,o)}catch(o){await jl(o)}}function U0(n,e){(n.mu.get(e)||[]).forEach((s=>{s.resolve()})),n.mu.delete(e)}function V0(n,e,s){const a=it(n);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(s?u.reject(s):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function lp(n,e,s=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),s&&n.Pu.yu(a,s);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||q0(n,a)}))}function q0(n,e){n.Eu.delete(e.path.canonicalString());const s=n.Ru.get(e);s!==null&&(Bp(n.remoteStore,s),n.Ru=n.Ru.remove(e),n.Au.delete(s),Yp(n))}function hT(n,e,s){for(const a of s)a instanceof j0?(n.Vu.addReference(a.key,e),W2(n,a)):a instanceof D0?(ke($p,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||q0(n,a.key)):Ke(19791,{wu:a})}function W2(n,e){const s=e.key,a=s.path.canonicalString();n.Ru.get(s)||n.Eu.has(a)||(ke($p,"New document in limbo: "+s),n.Eu.add(a),Yp(n))}function Yp(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const s=new He(Gt.fromString(e)),a=n.fu.next();n.Au.set(a,new B2(s)),n.Ru=n.Ru.insert(s,a),A0(n.remoteStore,new fr(Fi(Kb(s.path)),a,"TargetPurposeLimboResolution",Hd.ce))}}async function Jc(n,e,s){const a=it(n),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,E)=>{h.push(a.pu(E,e,s).then((_=>{if((_||s)&&a.isPrimaryClient){const S=_?!_.fromCache:s?.targetChanges.get(E.targetId)?.current;a.sharedClientState.updateQueryState(E.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Vp.Es(E.targetId,_);u.push(S)}})))})),await Promise.all(h),a.Pu.J_(o),await(async function(E,_){const S=it(E);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>_e.forEach(_,(x=>_e.forEach(x.Ts,(B=>S.persistence.referenceDelegate.addReference(w,x.targetId,B))).next((()=>_e.forEach(x.Is,(B=>S.persistence.referenceDelegate.removeReference(w,x.targetId,B)))))))))}catch(w){if(!Dl(w))throw w;ke(qp,"Failed to update sequence numbers: "+w)}for(const w of _){const x=w.targetId;if(!w.fromCache){const B=S.vs.get(x),X=B.snapshotVersion,V=B.withLastLimboFreeSnapshotVersion(X);S.vs=S.vs.insert(x,V)}}})(a.localStore,u))}async function J2(n,e){const s=it(n);if(!s.currentUser.isEqual(e)){ke($p,"User change. New user:",e.toKey());const a=await S0(s.localStore,e);s.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((E=>{E.reject(new Le(pe.CANCELLED,h))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Jc(s,a.Ns)}}function Z2(n,e){const s=it(n),a=s.Au.get(e);if(a&&a.hu)return gt().add(a.key);{let o=gt();const u=s.Iu.get(e);if(!u)return o;for(const h of u){const g=s.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function B0(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=M0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y2.bind(null,e),e.Pu.J_=O2.bind(null,e.eventManager),e.Pu.yu=M2.bind(null,e.eventManager),e}function eI(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K2.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return e2(this.persistence,new WC,e.initialUser,this.serializer)}Cu(e){return new b0(Up.Vi,this.serializer)}Du(e){return new o2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class tI extends kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){kt(this.persistence.referenceDelegate instanceof Cd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new MC(a,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Rs.withCacheSize(this.cacheSizeBytes):Rs.DEFAULT;return new b0((a=>Cd.Vi(a,s)),this.serializer)}}class cp{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>fT(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=J2.bind(null,this.syncEngine),await I2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new L2})()}createDatastore(e){const s=Jd(e.databaseInfo.databaseId),a=f2(e.databaseInfo);return g2(e.authCredentials,e.appCheckCredentials,a,s)}createRemoteStore(e){return(function(a,o,u,h,g){return new E2(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(s=>fT(this.syncEngine,s,0)),(function(){return rT.v()?new rT:new l2})())}createSyncEngine(e,s){return(function(o,u,h,g,E,_,S){const w=new P2(o,u,h,g,E,_);return S&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const a=it(s);ke(ao,"RemoteStore shutting down."),a.Ea.add(5),await Wc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cp.provider={build:()=>new cp};class nI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ca("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}const Sr="FirestoreClient";class sI{constructor(e,s,a,o,u){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=a,this._databaseInfo=o,this.user=ts.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{ke(Sr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(ke(Sr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const a=Gp(s,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Nm(n,e){n.asyncQueue.verifyOperationInProgress(),ke(Sr,"Initializing OfflineComponentProvider");const s=n.configuration;await e.initialize(s);let a=s.initialUser;n.setCredentialChangeListener((async o=>{a.isEqual(o)||(await S0(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function mT(n,e){n.asyncQueue.verifyOperationInProgress();const s=await iI(n);ke(Sr,"Initializing OnlineComponentProvider"),await e.initialize(s,n.configuration),n.setCredentialChangeListener((a=>lT(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,o)=>lT(e.remoteStore,o))),n._onlineComponents=e}async function iI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke(Sr,"Using user provided OfflineComponentProvider");try{await Nm(n,n._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===pe.FAILED_PRECONDITION||o.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;bl("Error using user provided cache. Falling back to memory cache: "+s),await Nm(n,new kd)}}else ke(Sr,"Using default OfflineComponentProvider"),await Nm(n,new tI(void 0));return n._offlineComponents}async function P0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke(Sr,"Using user provided OnlineComponentProvider"),await mT(n,n._uninitializedComponentsProvider._online)):(ke(Sr,"Using default OnlineComponentProvider"),await mT(n,new cp))),n._onlineComponents}function aI(n){return P0(n).then((e=>e.syncEngine))}async function rI(n){const e=await P0(n),s=e.eventManager;return s.onListen=F2.bind(null,e.syncEngine),s.onUnlisten=G2.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=z2.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=X2.bind(null,e.syncEngine),s}function oI(n,e,s={}){const a=new pr;return n.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,E,_){const S=new nI({next:x=>{S.Nu(),h.enqueueAndForget((()=>D2(u,w))),x.fromCache&&E.source==="server"?_.reject(new Le(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),w=new U2(g,S,{includeMetadataChanges:!0,Ka:!0});return j2(u,w)})(await rI(n),n.asyncQueue,e,s,a))),a.promise}function lI(n,e){const s=new pr;return n.asyncQueue.enqueueAndForget((async()=>$2(await aI(n),e,s))),s.promise}function F0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const cI="ComponentProvider",pT=new Map;function uI(n,e,s,a,o){return new AR(n,e,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,F0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const z0="firestore.googleapis.com",_T=!0;class gT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Le(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z0,this.ssl=_T}else this.host=e.host,this.ssl=e.ssl??_T;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DC)throw new Le(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Le(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Le(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Le(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,s,a,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new rR;switch(a.type){case"firstParty":return new uR(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Le(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const a=pT.get(s);a&&(ke(cI,"Removing Datastore"),pT.delete(s),a.terminate())})(this),Promise.resolve()}}function dI(n,e,s,a={}){n=Nl(n,tf);const o=bp(e),u=n._getSettings(),h={...u,emulatorOptions:n._getEmulatorOptions()},g=`${e}:${s}`;o&&(Mx(`https://${g}`),Bx("Firestore",!0)),u.host!==z0&&u.host!==g&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:g,ssl:o,emulatorOptions:a};if(!Ed(E,h)&&(n._setSettings(E),a.mockUserToken)){let _,S;if(typeof a.mockUserToken=="string")_=a.mockUserToken,S=ts.MOCK_USER;else{_=Ux(a.mockUserToken,n._app?.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new Le(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new ts(w)}n._authCredentials=new oR(new kb(_,S))}}class Ml{constructor(e,s,a){this.converter=s,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class wn{constructor(e,s,a){this.converter=s,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}toJSON(){return{type:wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,a){if($c(s,wn._jsonSchema))return new wn(e,a||null,new He(Gt.fromString(s.referencePath)))}}wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:bn("string",wn._jsonSchemaVersion),referencePath:bn("string")};class _r extends Ml{constructor(e,s,a){super(e,s,Kb(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new He(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function fI(n,e,...s){if(n=xa(n),Lb("collection","path",e),n instanceof tf){const a=Gt.fromString(e,...s);return Iv(a),new _r(n,null,a)}{if(!(n instanceof wn||n instanceof _r))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Gt.fromString(e,...s));return Iv(a),new _r(n.firestore,null,a)}}function po(n,e,...s){if(n=xa(n),arguments.length===1&&(e=wp.newId()),Lb("doc","path",e),n instanceof tf){const a=Gt.fromString(e,...s);return Cv(a),new wn(n,null,new He(a))}{if(!(n instanceof wn||n instanceof _r))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Gt.fromString(e,...s));return Cv(a),new wn(n.firestore,n instanceof _r?n.converter:null,new He(a))}}const yT="AsyncQueue";class ET{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new w0(this,"async_queue_retry"),this._c=()=>{const a=Sm();a&&ke(yT,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const s=Sm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=Sm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;ke(yT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Ca("INTERNAL UNHANDLED ERROR: ",vT(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=s,s}enqueueAfterDelay(e,s,a){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Hp.createAndSchedule(this,e,s,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ke(47125,{Pc:vT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,a)=>s.targetTimeMs-a.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function vT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class nf extends tf{constructor(e,s,a,o){super(e,s,a,o),this.type="firestore",this._queue=new ET,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ET(e),this._firestoreClient=void 0,await e}}}function hI(n,e){const s=typeof n=="object"?n:Tb(),a=typeof n=="string"?n:bd,o=Fd(s,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Dx("firestore");u&&dI(o,...u)}return o}function H0(n){if(n._terminated)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mI(n),n._firestoreClient}function mI(n){const e=n._freezeSettings(),s=uI(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new sI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(n._componentsProvider))}class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di($n.fromBase64String(e))}catch(s){throw new Le(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new di($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:di._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($c(e,di._jsonSchema))return di.fromBase64String(e.bytes)}}di._jsonSchemaVersion="firestore/bytes/1.0",di._jsonSchema={type:bn("string",di._jsonSchemaVersion),bytes:bn("string")};class G0{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Le(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class X0{constructor(e){this._methodName=e}}class Gi{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Le(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Le(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if($c(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:bn("string",Gi._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};class Si{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($c(e,Si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Si(e.vectorValues);throw new Le(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:bn("string",Si._jsonSchemaVersion),vectorValues:bn("object")};const pI=/^__.*__$/;class _I{constructor(e,s,a){this.data=e,this.fieldMask=s,this.fieldTransforms=a}toMutation(e,s){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,s,this.fieldTransforms):new Qc(e,this.data,s,this.fieldTransforms)}}function $0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{dataSource:n})}}class Qp{constructor(e,s,a,o,u,h){this.settings=e,this.databaseId=s,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const s=this.path?.child(e),a=this.contextWith({path:s,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const s=this.path?.child(e),a=this.contextWith({path:s,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ld(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if($0(this.dataSource)&&pI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class gI{constructor(e,s,a){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=a||Jd(e)}createContext(e,s,a,o=!1){return new Qp({dataSource:e,methodName:s,targetDoc:a,path:Xn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y0(n){const e=n._freezeSettings(),s=Jd(n._databaseId);return new gI(n._databaseId,!!e.ignoreUndefinedProperties,s)}function yI(n,e,s,a,o,u={}){const h=n.createContext(u.merge||u.mergeFields?2:0,e,s,o);W0("Data must be an object, but it was:",h,a);const g=Q0(a,h);let E,_;if(u.merge)E=new bi(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const w of u.mergeFields){const x=sf(e,w,s);if(!h.contains(x))throw new Le(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);bI(S,x)||S.push(x)}E=new bi(S),_=h.fieldTransforms.filter((w=>E.covers(w.field)))}else E=null,_=h.fieldTransforms;return new _I(new ui(g),E,_)}function EI(n,e,s,a=!1){return Kp(s,n.createContext(a?4:3,e))}function Kp(n,e){if(K0(n=xa(n)))return W0("Unsupported field value:",e,n),Q0(n,e);if(n instanceof X0)return(function(a,o){if(!$0(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let E=Kp(g,o.childContextForArray(h));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),h++}return{arrayValue:{values:u}}})(n,e)}return(function(a,o){if((a=xa(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return JR(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Qt.fromDate(a);return{timestampValue:Rd(o.serializer,u)}}if(a instanceof Qt){const u=new Qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Rd(o.serializer,u)}}if(a instanceof Gi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof di)return{bytesValue:h0(o.serializer,a._byteString)};if(a instanceof wn){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Op(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Si)return(function(h,g){const E=h instanceof Si?h.toArray():h;return{mapValue:{fields:{[Pb]:{stringValue:Fb},[Sd]:{arrayValue:{values:E.map((S=>{if(typeof S!="number")throw g.createError("VectorValues must only contain numeric values.");return kp(g.serializer,S)}))}}}}}})(a,o);if(v0(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${zd(a)}`)})(n,e)}function Q0(n,e){const s={};return Ob(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(n,((a,o)=>{const u=Kp(o,e.childContextForField(a));u!=null&&(s[a]=u)})),{mapValue:{fields:s}}}function K0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qt||n instanceof Gi||n instanceof di||n instanceof wn||n instanceof X0||n instanceof Si||v0(n))}function W0(n,e,s){if(!K0(s)||!jb(s)){const a=zd(s);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function sf(n,e,s){if((e=xa(e))instanceof G0)return e._internalPath;if(typeof e=="string")return TI(n,e);throw Ld("Field path arguments must be of type string or ",n,!1,void 0,s)}const vI=new RegExp("[~\\*/\\[\\]]");function TI(n,e,s){if(e.search(vI)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new G0(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function Ld(n,e,s,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;s&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${a}`),h&&(E+=` in document ${o}`),E+=")"),new Le(pe.INVALID_ARGUMENT,g+n+E)}function bI(n,e){return n.some((s=>s.isEqual(e)))}class SI{convertValue(e,s="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const a={};return uo(e,((o,u)=>{a[o]=this.convertValue(u,s)})),a}convertVectorValue(e){const s=e.fields?.[Sd].arrayValue?.values?.map((a=>fn(a.doubleValue)));return new Si(s)}convertGeoPoint(e){return new Gi(fn(e.latitude),fn(e.longitude))}convertArray(e,s){return(e.values||[]).map((a=>this.convertValue(a,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const a=Xd(e);return a==null?null:this.convertValue(a,s);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const s=Er(e);return new Qt(s.seconds,s.nanos)}convertDocumentKey(e,s){const a=Gt.fromString(e);kt(E0(a),9688,{name:e});const o=new Bc(a.get(1),a.get(3)),u=new He(a.popFirst(5));return o.isEqual(s)||Ca(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}class NI extends SI{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,s)}}const TT="@firebase/firestore",bT="4.10.0";class J0{constructor(e,s,a,o,u){this._firestore=e,this._userDataWriter=s,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const s=this._document.data.field(sf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class wI extends J0{data(){return super.data()}}function xI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Le(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class AI extends Wp{}function RI(n,e,...s){let a=[];e instanceof Wp&&a.push(e),a=a.concat(s),(function(u){const h=u.filter((E=>E instanceof Jp)).length,g=u.filter((E=>E instanceof af)).length;if(h>1||h>0&&g>0)throw new Le(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)n=o._apply(n);return n}class af extends AI{constructor(e,s,a){super(),this._field=e,this._op=s,this._value=a,this.type="where"}static _create(e,s,a){return new af(e,s,a)}_apply(e){const s=this._parse(e);return Z0(e._query,s),new Ml(e.firestore,e.converter,Zm(e._query,s))}_parse(e){const s=Y0(e.firestore);return(function(u,h,g,E,_,S,w){let x;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){wT(w,S);const X=[];for(const V of w)X.push(NT(E,u,V));x={arrayValue:{values:X}}}else x=NT(E,u,w)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||wT(w,S),x=EI(g,h,w,S==="in"||S==="not-in");return Tn.create(_,S,x)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function ST(n,e,s){const a=e,o=sf("where",n);return af._create(o,a,s)}class Jp extends Wp{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Jp(e,s)}_parse(e){const s=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return s.length===1?s[0]:Ni.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const E of g)Z0(h,E),h=Zm(h,E)})(e._query,s),new Ml(e.firestore,e.converter,Zm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NT(n,e,s){if(typeof(s=xa(s))=="string"){if(s==="")throw new Le(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wb(e)&&s.indexOf("/")!==-1)throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const a=e.path.child(Gt.fromString(s));if(!He.isDocumentKey(a))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Vv(n,new He(a))}if(s instanceof wn)return Vv(n,s._key);throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(s)}.`)}function wT(n,e){if(!Array.isArray(n)||n.length===0)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Z0(n,e){const s=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Le(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}function CI(n,e,s){let a;return a=n?n.toFirestore(e):e,a}class ld{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class El extends J0{constructor(e,s,a,o,u,h){super(e,s,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const a=this._document.data.field(sf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=El._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}El._jsonSchemaVersion="firestore/documentSnapshot/1.0",El._jsonSchema={type:bn("string",El._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class _d extends El{data(e={}){return super.data(e)}}class vl{constructor(e,s,a,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new ld(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((a=>{e.call(s,new _d(this._firestore,this._userDataWriter,a.key,a,new ld(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Le(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const E=new _d(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ld(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:E,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const E=new _d(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ld(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return g.type!==0&&(_=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),S=h.indexOf(g.doc.key)),{type:II(g.type),doc:E,oldIndex:_,newIndex:S}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function II(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:n})}}vl._jsonSchemaVersion="firestore/querySnapshot/1.0",vl._jsonSchema={type:bn("string",vl._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};function kI(n){n=Nl(n,Ml);const e=Nl(n.firestore,nf),s=H0(e),a=new NI(e);return xI(n._query),oI(s,n._query).then((o=>new vl(e,a,n,o)))}function Zp(n,e,s){n=Nl(n,wn);const a=Nl(n.firestore,nf),o=CI(n.converter,e),u=Y0(a);return e1(a,[yI(u,"setDoc",n._key,o,n.converter!==null,s).toMutation(n._key,zi.none())])}function rf(n){return e1(Nl(n.firestore,nf),[new Lp(n._key,zi.none())])}function e1(n,e){const s=H0(n);return lI(s,e)}(function(e,s=!0){aR(XA),gr(new Aa("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new nf(new lR(a.getProvider("auth-internal")),new dR(h,a.getProvider("app-check-internal")),RR(h,o),h);return u={useFetchStreams:s,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Pi(TT,bT,e),Pi(TT,bT,"esm2020")})();const t1="@firebase/installations",e_="0.6.19";const n1=1e4,s1=`w:${e_}`,i1="FIS_v2",LI="https://firebaseinstallations.googleapis.com/v1",jI=3600*1e3,DI="installations",OI="Installations";const MI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ro=new Bd(DI,OI,MI);function a1(n){return n instanceof co&&n.code.includes("request-failed")}function r1({projectId:n}){return`${LI}/projects/${n}/installations`}function o1(n){return{token:n.token,requestStatus:2,expiresIn:VI(n.expiresIn),creationTime:Date.now()}}async function l1(n,e){const a=(await e.json()).error;return ro.create("request-failed",{requestName:n,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function c1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function UI(n,{refreshToken:e}){const s=c1(n);return s.append("Authorization",qI(e)),s}async function u1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function VI(n){return Number(n.replace("s","000"))}function qI(n){return`${i1} ${n}`}async function BI({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const a=r1(n),o=c1(n),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={fid:s,authVersion:i1,appId:n.appId,sdkVersion:s1},g={method:"POST",headers:o,body:JSON.stringify(h)},E=await u1(()=>fetch(a,g));if(E.ok){const _=await E.json();return{fid:_.fid||s,registrationStatus:2,refreshToken:_.refreshToken,authToken:o1(_.authToken)}}else throw await l1("Create Installation",E)}function d1(n){return new Promise(e=>{setTimeout(e,n)})}function PI(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const FI=/^[cdef][\w-]{21}$/,up="";function zI(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=HI(n);return FI.test(s)?s:up}catch{return up}}function HI(n){return PI(n).substr(0,22)}function of(n){return`${n.appName}!${n.appId}`}const f1=new Map;function h1(n,e){const s=of(n);m1(s,e),GI(s,e)}function m1(n,e){const s=f1.get(n);if(s)for(const a of s)a(e)}function GI(n,e){const s=XI();s&&s.postMessage({key:n,fid:e}),$I()}let so=null;function XI(){return!so&&"BroadcastChannel"in self&&(so=new BroadcastChannel("[Firebase] FID Change"),so.onmessage=n=>{m1(n.data.key,n.data.fid)}),so}function $I(){f1.size===0&&so&&(so.close(),so=null)}const YI="firebase-installations-database",QI=1,oo="firebase-installations-store";let wm=null;function t_(){return wm||(wm=Pd(YI,QI,{upgrade:(n,e)=>{e===0&&n.createObjectStore(oo)}})),wm}async function jd(n,e){const s=of(n),o=(await t_()).transaction(oo,"readwrite"),u=o.objectStore(oo),h=await u.get(s);return await u.put(e,s),await o.done,(!h||h.fid!==e.fid)&&h1(n,e.fid),e}async function p1(n){const e=of(n),a=(await t_()).transaction(oo,"readwrite");await a.objectStore(oo).delete(e),await a.done}async function lf(n,e){const s=of(n),o=(await t_()).transaction(oo,"readwrite"),u=o.objectStore(oo),h=await u.get(s),g=e(h);return g===void 0?await u.delete(s):await u.put(g,s),await o.done,g&&(!h||h.fid!==g.fid)&&h1(n,g.fid),g}async function n_(n){let e;const s=await lf(n.appConfig,a=>{const o=KI(a),u=WI(n,o);return e=u.registrationPromise,u.installationEntry});return s.fid===up?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function KI(n){const e=n||{fid:zI(),registrationStatus:0};return _1(e)}function WI(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ro.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=JI(n,s);return{installationEntry:s,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZI(n)}:{installationEntry:e}}async function JI(n,e){try{const s=await BI(n,e);return jd(n.appConfig,s)}catch(s){throw a1(s)&&s.customData.serverCode===409?await p1(n.appConfig):await jd(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function ZI(n){let e=await xT(n.appConfig);for(;e.registrationStatus===1;)await d1(100),e=await xT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:a}=await n_(n);return a||s}return e}function xT(n){return lf(n,e=>{if(!e)throw ro.create("installation-not-found");return _1(e)})}function _1(n){return ek(n)?{fid:n.fid,registrationStatus:0}:n}function ek(n){return n.registrationStatus===1&&n.registrationTime+n1<Date.now()}async function tk({appConfig:n,heartbeatServiceProvider:e},s){const a=nk(n,s),o=UI(n,s),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={installation:{sdkVersion:s1,appId:n.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},E=await u1(()=>fetch(a,g));if(E.ok){const _=await E.json();return o1(_)}else throw await l1("Generate Auth Token",E)}function nk(n,{fid:e}){return`${r1(n)}/${e}/authTokens:generate`}async function s_(n,e=!1){let s;const a=await lf(n.appConfig,u=>{if(!g1(u))throw ro.create("not-registered");const h=u.authToken;if(!e&&ak(h))return u;if(h.requestStatus===1)return s=sk(n,e),u;{if(!navigator.onLine)throw ro.create("app-offline");const g=ok(u);return s=ik(n,g),g}});return s?await s:a.authToken}async function sk(n,e){let s=await AT(n.appConfig);for(;s.authToken.requestStatus===1;)await d1(100),s=await AT(n.appConfig);const a=s.authToken;return a.requestStatus===0?s_(n,e):a}function AT(n){return lf(n,e=>{if(!g1(e))throw ro.create("not-registered");const s=e.authToken;return lk(s)?{...e,authToken:{requestStatus:0}}:e})}async function ik(n,e){try{const s=await tk(n,e),a={...e,authToken:s};return await jd(n.appConfig,a),s}catch(s){if(a1(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await p1(n.appConfig);else{const a={...e,authToken:{requestStatus:0}};await jd(n.appConfig,a)}throw s}}function g1(n){return n!==void 0&&n.registrationStatus===2}function ak(n){return n.requestStatus===2&&!rk(n)}function rk(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+jI}function ok(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function lk(n){return n.requestStatus===1&&n.requestTime+n1<Date.now()}async function ck(n){const e=n,{installationEntry:s,registrationPromise:a}=await n_(e);return a?a.catch(console.error):s_(e).catch(console.error),s.fid}async function uk(n,e=!1){const s=n;return await dk(s),(await s_(s,e)).token}async function dk(n){const{registrationPromise:e}=await n_(n);e&&await e}function fk(n){if(!n||!n.options)throw xm("App Configuration");if(!n.name)throw xm("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw xm(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function xm(n){return ro.create("missing-app-config-values",{valueName:n})}const y1="installations",hk="installations-internal",mk=n=>{const e=n.getProvider("app").getImmediate(),s=fk(e),a=Fd(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},pk=n=>{const e=n.getProvider("app").getImmediate(),s=Fd(e,y1).getImmediate();return{getId:()=>ck(s),getToken:o=>uk(s,o)}};function _k(){gr(new Aa(y1,mk,"PUBLIC")),gr(new Aa(hk,pk,"PRIVATE"))}_k();Pi(t1,e_);Pi(t1,e_,"esm2020");const gk="/firebase-messaging-sw.js",yk="/firebase-cloud-messaging-push-scope",E1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ek="https://fcmregistrations.googleapis.com/v1",v1="google.c.a.c_id",vk="google.c.a.c_l",Tk="google.c.a.ts",bk="google.c.a.e",RT=1e4;var CT;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(CT||(CT={}));var Hc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Hc||(Hc={}));function va(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sk(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(s),o=new Uint8Array(a.length);for(let u=0;u<a.length;++u)o[u]=a.charCodeAt(u);return o}const Am="fcm_token_details_db",Nk=5,IT="fcm_token_object_Store";async function wk(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(Am))return null;let e=null;return(await Pd(Am,Nk,{upgrade:async(a,o,u,h)=>{if(o<2||!a.objectStoreNames.contains(IT))return;const g=h.objectStore(IT),E=await g.index("fcmSenderId").get(n);if(await g.clear(),!!E){if(o===2){const _=E;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:_.createTime??Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:va(_.vapidKey)}}}else if(o===3){const _=E;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:va(_.auth),p256dh:va(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:va(_.vapidKey)}}}else if(o===4){const _=E;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:va(_.auth),p256dh:va(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:va(_.vapidKey)}}}}}})).close(),await gm(Am),await gm("fcm_vapid_details_db"),await gm("undefined"),xk(e)?e:null}function xk(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const Ak="firebase-messaging-database",Rk=1,Gc="firebase-messaging-store";let Rm=null;function T1(){return Rm||(Rm=Pd(Ak,Rk,{upgrade:(n,e)=>{e===0&&n.createObjectStore(Gc)}})),Rm}async function Ck(n){const e=b1(n),a=await(await T1()).transaction(Gc).objectStore(Gc).get(e);if(a)return a;{const o=await wk(n.appConfig.senderId);if(o)return await i_(n,o),o}}async function i_(n,e){const s=b1(n),o=(await T1()).transaction(Gc,"readwrite");return await o.objectStore(Gc).put(e,s),await o.done,e}function b1({appConfig:n}){return n.appId}const Ik={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ss=new Bd("messaging","Messaging",Ik);async function kk(n,e){const s=await r_(n),a=S1(e),o={method:"POST",headers:s,body:JSON.stringify(a)};let u;try{u=await(await fetch(a_(n.appConfig),o)).json()}catch(h){throw ss.create("token-subscribe-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ss.create("token-subscribe-failed",{errorInfo:h})}if(!u.token)throw ss.create("token-subscribe-no-token");return u.token}async function Lk(n,e){const s=await r_(n),a=S1(e.subscriptionOptions),o={method:"PATCH",headers:s,body:JSON.stringify(a)};let u;try{u=await(await fetch(`${a_(n.appConfig)}/${e.token}`,o)).json()}catch(h){throw ss.create("token-update-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ss.create("token-update-failed",{errorInfo:h})}if(!u.token)throw ss.create("token-update-no-token");return u.token}async function jk(n,e){const a={method:"DELETE",headers:await r_(n)};try{const u=await(await fetch(`${a_(n.appConfig)}/${e}`,a)).json();if(u.error){const h=u.error.message;throw ss.create("token-unsubscribe-failed",{errorInfo:h})}}catch(o){throw ss.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}}function a_({projectId:n}){return`${Ek}/projects/${n}/registrations`}async function r_({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function S1({p256dh:n,auth:e,endpoint:s,vapidKey:a}){const o={web:{endpoint:s,auth:e,p256dh:n}};return a!==E1&&(o.web.applicationPubKey=a),o}const Dk=10080*60*1e3;async function Ok(n){const e=await Uk(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:va(e.getKey("auth")),p256dh:va(e.getKey("p256dh"))},a=await Ck(n.firebaseDependencies);if(a){if(Vk(a.subscriptionOptions,s))return Date.now()>=a.createTime+Dk?Mk(n,{token:a.token,createTime:Date.now(),subscriptionOptions:s}):a.token;try{await jk(n.firebaseDependencies,a.token)}catch(o){console.warn(o)}return kT(n.firebaseDependencies,s)}else return kT(n.firebaseDependencies,s)}async function Mk(n,e){try{const s=await Lk(n.firebaseDependencies,e),a={...e,token:s,createTime:Date.now()};return await i_(n.firebaseDependencies,a),s}catch(s){throw s}}async function kT(n,e){const a={token:await kk(n,e),createTime:Date.now(),subscriptionOptions:e};return await i_(n,a),a.token}async function Uk(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sk(e)})}function Vk(n,e){const s=e.vapidKey===n.vapidKey,a=e.endpoint===n.endpoint,o=e.auth===n.auth,u=e.p256dh===n.p256dh;return s&&a&&o&&u}function LT(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return qk(e,n),Bk(e,n),Pk(e,n),e}function qk(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const a=e.notification.body;a&&(n.notification.body=a);const o=e.notification.image;o&&(n.notification.image=o);const u=e.notification.icon;u&&(n.notification.icon=u)}function Bk(n,e){e.data&&(n.data=e.data)}function Pk(n,e){if(!e.fcmOptions&&!e.notification?.click_action)return;n.fcmOptions={};const s=e.fcmOptions?.link??e.notification?.click_action;s&&(n.fcmOptions.link=s);const a=e.fcmOptions?.analytics_label;a&&(n.fcmOptions.analyticsLabel=a)}function Fk(n){return typeof n=="object"&&!!n&&v1 in n}function zk(n){if(!n||!n.options)throw Cm("App Configuration Object");if(!n.name)throw Cm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const a of e)if(!s[a])throw Cm(a);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function Cm(n){return ss.create("missing-app-config-values",{valueName:n})}class Hk{constructor(e,s,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=zk(e);this.firebaseDependencies={app:e,appConfig:o,installations:s,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function Gk(n){try{n.swRegistration=await navigator.serviceWorker.register(gk,{scope:yk}),n.swRegistration.update().catch(()=>{}),await Xk(n.swRegistration)}catch(e){throw ss.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function Xk(n){return new Promise((e,s)=>{const a=setTimeout(()=>s(new Error(`Service worker not registered after ${RT} ms`)),RT),o=n.installing||n.waiting;n.active?(clearTimeout(a),e()):o?o.onstatechange=u=>{u.target?.state==="activated"&&(o.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),s(new Error("No incoming service worker found.")))})}async function $k(n,e){if(!e&&!n.swRegistration&&await Gk(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ss.create("invalid-sw-registration");n.swRegistration=e}}async function Yk(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=E1)}async function N1(n,e){if(!navigator)throw ss.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ss.create("permission-blocked");return await Yk(n,e?.vapidKey),await $k(n,e?.serviceWorkerRegistration),Ok(n)}async function Qk(n,e,s){const a=Kk(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:s[v1],message_name:s[vk],message_time:s[Tk],message_device_time:Math.floor(Date.now()/1e3)})}function Kk(n){switch(n){case Hc.NOTIFICATION_CLICKED:return"notification_open";case Hc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function Wk(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===Hc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(LT(s)):n.onMessageHandler.next(LT(s)));const a=s.data;Fk(a)&&a[bk]==="1"&&await Qk(n,s.messageType,a)}const jT="@firebase/messaging",DT="0.12.23";const Jk=n=>{const e=new Hk(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>Wk(e,s)),e},Zk=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:a=>N1(e,a)}};function eL(){gr(new Aa("messaging",Jk,"PUBLIC")),gr(new Aa("messaging-internal",Zk,"PRIVATE")),Pi(jT,DT),Pi(jT,DT,"esm2020")}async function w1(){try{await _b()}catch{return!1}return typeof window<"u"&&pb()&&Hx()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function tL(n,e){if(!navigator)throw ss.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}function nL(n=Tb()){return w1().then(e=>{if(!e)throw ss.create("unsupported-browser")},e=>{throw ss.create("indexed-db-unsupported")}),Fd(xa(n),"messaging").getImmediate()}async function sL(n,e){return n=xa(n),N1(n,e)}function iL(n,e){return n=xa(n),tL(n,e)}eL();const gd={apiKey:"AIzaSyA3dJLU8Xw6vcqXtOhVbuI5aO_ImdT8upg",authDomain:"goal-game-7ad53.firebaseapp.com",projectId:"goal-game-7ad53",storageBucket:"goal-game-7ad53.firebasestorage.app",messagingSenderId:"86507800050",appId:"1:86507800050:web:f7674a55bc2291686f976b"},x1="BLD2XB0Bh-Y2EwwHU1YimB6-tzKQNrGh-bzoZHXbSWlvQt1mg6K5c7EJWfBIDrGY0cQJXO4LNrKD9MjlZhMsb3c";let Im=null,km=null,cd=null;function Yi(){return!!(gd.apiKey&&gd.projectId&&gd.messagingSenderId&&x1)}function A1(){if(!Im){if(!Yi())throw new Error("Firebase is not configured. Please add your Firebase config to .env file.");Im=vb(gd)}return Im}function _o(){return km||(km=hI(A1())),km}async function R1(){return cd||(await w1()?(cd=nL(A1()),cd):(console.warn("Firebase Messaging is not supported in this browser"),null))}function ka(){let n=localStorage.getItem("goal-game-device-id");return n||(n=crypto.randomUUID(),localStorage.setItem("goal-game-device-id",n)),n}const Cl="scheduled_notifications",C1="fcm_tokens";async function aL(n,e,s,a,o,u){if(!Yi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const h=_o(),g=ka(),E=new Date(`${s}T${a}`),_=new Date(E.getTime()-o*60*1e3);if(_<=new Date)return console.warn("Notification trigger time is in the past, skipping"),null;const S=`${g}_event_${n}`,w={id:S,eventId:n,eventTitle:e,eventDate:s,eventTime:a,triggerAt:_.toISOString(),fcmToken:u,deviceId:g,status:"pending",createdAt:new Date().toISOString(),notificationType:"event"};try{return await Zp(po(h,Cl,S),w),S}catch(x){return console.error("Failed to schedule notification:",x),null}}async function rL(n,e,s,a,o){if(!Yi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const u=_o(),h=ka(),g=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z",E=new Date(g);if(E<=new Date)return console.warn("Buff expiry time is in the past, skipping notification"),null;const _=`${h}_buff_${n}`,S={id:_,buffLogId:n,buffName:e,buffType:s,triggerAt:E.toISOString(),fcmToken:o,deviceId:h,status:"pending",createdAt:new Date().toISOString(),notificationType:"buff_expiry"};try{return await Zp(po(u,Cl,_),S),_}catch(w){return console.error("Failed to schedule buff expiry notification:",w),null}}async function oL(n){if(!Yi())return;const e=_o(),a=`${ka()}_buff_${n}`;try{await rf(po(e,Cl,a))}catch(o){console.error("Failed to cancel buff expiry notification:",o)}}async function lL(n){if(!Yi())return;const e=_o(),a=`${ka()}_event_${n}`;try{await rf(po(e,Cl,a))}catch(o){console.error("Failed to cancel notification:",o)}}async function cL(){if(!Yi())return;const n=_o(),e=ka();try{const s=RI(fI(n,Cl),ST("deviceId","==",e),ST("status","==","pending")),o=(await kI(s)).docs.map(u=>rf(po(n,Cl,u.id)));await Promise.all(o)}catch(s){console.error("Failed to cancel all notifications:",s)}}async function uL(n){if(!Yi())return;const e=_o(),s=ka();try{await Zp(po(e,C1,s),{token:n,deviceId:s,updatedAt:new Date().toISOString(),platform:navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?"ios":navigator.userAgent.includes("Android")?"android":"web"})}catch(a){console.error("Failed to save FCM token:",a)}}async function dL(){if(!Yi())return;const n=_o(),e=ka();try{await rf(po(n,C1,e))}catch(s){console.error("Failed to delete FCM token:",s)}}function fL(){return"Notification"in window?Notification.permission:"unsupported"}function o_(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function l_(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}function c_(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function hL(){return l_()&&!c_()?!1:o_()}async function mL(){if(!Yi())return{success:!1,token:null,error:"Firebase is not configured"};if(!o_())return{success:!1,token:null,error:"Notifications are not supported in this browser"};if(l_()&&!c_())return{success:!1,token:null,error:"On iOS, you must add this app to your home screen first, then enable notifications"};try{if(await Notification.requestPermission()!=="granted")return{success:!1,token:null,error:"Notification permission was denied"};const e=await R1();if(!e)return{success:!1,token:null,error:"Failed to initialize Firebase Messaging"};const s=await navigator.serviceWorker.ready,a=await sL(e,{vapidKey:x1,serviceWorkerRegistration:s});return a?(await uL(a),{success:!0,token:a}):{success:!1,token:null,error:"Failed to get FCM token"}}catch(n){return console.error("Error requesting notification permission:",n),{success:!1,token:null,error:n instanceof Error?n.message:"Unknown error occurred"}}}async function pL(){try{await dL(),await cL()}catch(n){console.error("Error disabling notifications:",n)}}function _L(n){let e=null;return R1().then(s=>{s&&(e=iL(s,a=>{if(console.log("Foreground message received:",a),n(a),a.notification){const{title:o,body:u}=a.notification;o&&new Notification(o,{body:u||"",icon:"/goal-game/icons/icon-192.png",badge:"/goal-game/icons/icon-192.png",tag:a.data?.eventId||"goal-game-notification"})}}))}),()=>{e&&e()}}function I1(){const n=te(),e=ka(),s=n.exec("SELECT enabled, default_reminder_minutes, fcm_token, device_id FROM notification_settings WHERE id = 1");if(s.length===0||s[0].values.length===0)return n.run("INSERT OR REPLACE INTO notification_settings (id, enabled, default_reminder_minutes, fcm_token, device_id) VALUES (1, 0, 15, NULL, ?)",[e]),{enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:e};const a=s[0].values[0];return{enabled:!!a[0],defaultReminderMinutes:a[1],fcmToken:a[2],deviceId:a[3]}}async function Lm(n){const e=te(),s=ka(),o={...I1(),...n};e.run(`UPDATE notification_settings SET
      enabled = ?,
      default_reminder_minutes = ?,
      fcm_token = ?,
      device_id = ?,
      updated_at = datetime('now')
    WHERE id = 1`,[o.enabled?1:0,o.defaultReminderMinutes,o.fcmToken,s]),await ve()}function k1(){const[n,e]=L.useState({enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:""}),[s,a]=L.useState("default"),[o,u]=L.useState(!1),[h,g]=L.useState(null),E=o_(),_=Yi(),S=hL(),w=l_(),x=c_();L.useEffect(()=>{try{const oe=I1();e(oe),a(fL())}catch(oe){console.error("Failed to load notification settings:",oe)}},[]),L.useEffect(()=>!n.enabled||!n.fcmToken?void 0:_L(ye=>{console.log("Notification received in foreground:",ye)}),[n.enabled,n.fcmToken]);const B=L.useCallback(async()=>{u(!0),g(null);try{const oe=await mL();return oe.success?(await Lm({enabled:!0,fcmToken:oe.token}),e(ye=>({...ye,enabled:!0,fcmToken:oe.token})),a("granted"),!0):(g(oe.error||"Failed to enable notifications"),!1)}catch(oe){const ye=oe instanceof Error?oe.message:"Unknown error";return g(ye),!1}finally{u(!1)}},[]),X=L.useCallback(async()=>{u(!0),g(null);try{await pL(),await Lm({enabled:!1,fcmToken:null}),e(oe=>({...oe,enabled:!1,fcmToken:null}))}catch(oe){const ye=oe instanceof Error?oe.message:"Unknown error";g(ye)}finally{u(!1)}},[]),V=L.useCallback(async oe=>{await Lm({defaultReminderMinutes:oe}),e(ye=>({...ye,defaultReminderMinutes:oe}))},[]),U=L.useCallback(async(oe,ye,ge,O,j)=>{!n.enabled||!n.fcmToken||await aL(oe,ye,ge,O,j,n.fcmToken)},[n.enabled,n.fcmToken]),z=L.useCallback(async oe=>{await lL(oe)},[]),G=L.useCallback(async(oe,ye,ge,O)=>{!n.enabled||!n.fcmToken||await rL(oe,ye,ge,O,n.fcmToken)},[n.enabled,n.fcmToken]),K=L.useCallback(async oe=>{await oL(oe)},[]);return{settings:n,permissionState:s,isSupported:E,isConfigured:_,canEnable:S,isIOS:w,isStandalone:x,loading:o,error:h,enableNotifications:B,disableNotificationsHandler:X,setDefaultReminderMinutes:V,scheduleEventReminder:U,cancelEventReminder:z,scheduleBuffExpiry:G,cancelBuffExpiry:K}}const gL=[{type:"activate_buffs",title:"Habit Builder",description:"Activate {target} buff(s) today",targetRange:[2,4],xpReward:25},{type:"complete_steps",title:"Step by Step",description:"Complete {target} quest step(s) today",targetRange:[3,7],xpReward:30},{type:"no_debuffs",title:"Clean Slate",description:"Avoid activating any debuffs today",targetRange:[1,1],xpReward:40},{type:"gym_session",title:"Iron Warrior",description:"Complete a gym workout today",targetRange:[1,1],xpReward:35},{type:"early_start",title:"Early Bird",description:"Complete a habit before 8 AM",targetRange:[1,1],xpReward:30},{type:"activate_specific",title:"Wellness Warrior",description:"Activate a health-related buff",targetRange:[1,1],xpReward:20}],OT=50;function Ul(){return new Date().toISOString().split("T")[0]}function MT(n){const e=te(),s=n||Ul(),a=e.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE date = ? ORDER BY id`,[s]);return a.length?a[0].values.map(o=>({id:o[0],date:o[1],quest_type:o[2],title:o[3],description:o[4],target_value:o[5],current_value:o[6],xp_reward:o[7],is_completed:!!o[8],completed_at:o[9]})):[]}function yL(n){const e=te(),s=Ul(),a=e.exec("SELECT id FROM daily_quest_bonus WHERE date = ?",[s]);return a.length>0&&a[0].values.length>0}async function EL(n){const e=te(),s=Ul();e.run("INSERT OR IGNORE INTO daily_quest_bonus (date, claimed_at) VALUES (?, datetime('now'))",[s]),await ve()}async function vL(){const n=te(),e=Ul(),s=MT(e);if(s.length>0)return s;const o=[...gL].sort(()=>Math.random()-.5).slice(0,3);for(const u of o){const h=u.targetRange[0]===u.targetRange[1]?u.targetRange[0]:Math.floor(Math.random()*(u.targetRange[1]-u.targetRange[0]+1))+u.targetRange[0],g=u.description.replace("{target}",h.toString());n.run(`INSERT INTO daily_quests (date, quest_type, title, description, target_value, xp_reward)
       VALUES (?, ?, ?, ?, ?, ?)`,[e,u.type,u.title,g,h,u.xpReward])}return await ve(),MT(e)}async function L1(n,e=1,s){const a=te(),o=s||Ul(),u=a.exec(`SELECT id, current_value, target_value, is_completed FROM daily_quests
     WHERE date = ? AND quest_type = ? AND is_completed = 0`,[o,n]);if(!u.length||!u[0].values.length)return null;const h=u[0].values[0][0],g=u[0].values[0][1],E=u[0].values[0][2],_=g+e,S=_>=E;a.run(`UPDATE daily_quests SET current_value = ?, is_completed = ?, completed_at = ?
     WHERE id = ?`,[_,S?1:0,S?new Date().toISOString():null,h]),await ve();const w=a.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE id = ?`,[h]);if(!w.length)return null;const x=w[0].values[0];return{id:x[0],date:x[1],quest_type:x[2],title:x[3],description:x[4],target_value:x[5],current_value:x[6],xp_reward:x[7],is_completed:!!x[8],completed_at:x[9]}}async function TL(n){const e=te(),s=Ul();(e.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) = ?`,[s])[0]?.values[0]?.[0]||0)===0&&await L1("no_debuffs",1,s)}function bL({grantXP:n}){const[e,s]=L.useState([]),[a,o]=L.useState(!1),[u,h]=L.useState(!0),g=L.useCallback(async()=>{const X=await vL();s(X),o(yL()),h(!1)},[]);L.useEffect(()=>{g()},[g]),L.useEffect(()=>{const V=setInterval(()=>{const U=new Date().toISOString().split("T")[0];e.length>0&&e[0].date!==U&&g()},6e4);return()=>clearInterval(V)},[e,g]);const E=L.useCallback(async(X,V=1)=>{const U=await L1(X,V);return U?.is_completed&&await n(U.xp_reward,`Daily Quest: ${U.title}`,"daily_quest",U.id),await g(),U},[n,g]),_=L.useCallback(async()=>!e.every(V=>V.is_completed)||a?!1:(await EL(),await n(OT,"Daily Quest Bonus: All quests completed!","daily_quest_bonus"),o(!0),!0),[e,a,n]),S=L.useCallback(async()=>{await TL(),await g()},[g]),w=e.every(X=>X.is_completed),x=e.filter(X=>X.is_completed).length,B=e.filter(X=>X.is_completed).reduce((X,V)=>X+V.xp_reward,0);return{quests:e,loading:u,allCompleted:w,completedCount:x,bonusClaimed:a,bonusXp:OT,totalXpEarned:B,refresh:g,updateProgress:E,claimBonus:_,checkNoDebuffs:S}}const j1=[{days:3,title:"Getting Started",bonusXp:15,icon:""},{days:7,title:"One Week Strong",bonusXp:50,icon:""},{days:14,title:"Two Week Warrior",bonusXp:75,icon:""},{days:21,title:"Habit Forming",bonusXp:100,icon:""},{days:30,title:"Monthly Master",bonusXp:150,icon:""},{days:60,title:"Two Month Champion",bonusXp:250,icon:""},{days:90,title:"Quarterly Legend",bonusXp:400,icon:""},{days:180,title:"Half Year Hero",bonusXp:750,icon:""},{days:365,title:"Annual Achiever",bonusXp:1500,icon:""}];function SL(n){return j1.filter(e=>e.days<=n)}function NL(n){const e=SL(n);return e.length>0?e[e.length-1]:null}function D1(){return new Date().toISOString().split("T")[0]}function wL(){const n=new Date;return n.setDate(n.getDate()-1),n.toISOString().split("T")[0]}function O1(n){const e=te(),s=D1(),a=wL(),o=e.exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-400 days')
     ORDER BY d DESC`,[n]),u=o.length?o[0].values.map(U=>U[0]):[],h=e.exec(`SELECT freeze_date FROM streak_freezes
     WHERE buff_definition_id = ? AND freeze_date >= date('now', '-400 days')`,[n]),g=h.length?h[0].values.map(U=>U[0]):[],E=e.exec(`SELECT used_date FROM streak_shield_uses
     WHERE buff_definition_id = ? AND used_date >= date('now', '-400 days')`,[n]),_=E.length?E[0].values.map(U=>U[0]):[];let S=0;const w=new Set([...u,...g,..._]);let x=s;if(!w.has(s))if(w.has(a))x=a;else if(g.includes(s))x=s;else return{buffDefinitionId:n,currentStreak:0,longestStreak:UT(n),lastActivatedDate:u[0]||null,isAtRisk:u.length>0&&u[0]===a,shieldActive:!1};for(;w.has(x);){S++;const U=new Date(x+"T12:00:00");U.setDate(U.getDate()-1),x=U.toISOString().split("T")[0]}const B=!u.includes(s)&&!g.includes(s)&&u.includes(a),X=_.includes(s),V=UT(n);return S>V&&xL(n,S),{buffDefinitionId:n,currentStreak:S,longestStreak:Math.max(S,V),lastActivatedDate:u[0]||null,isAtRisk:B,shieldActive:X}}function UT(n){const s=te().exec("SELECT longest_streak FROM streak_records WHERE buff_definition_id = ?",[n]);return s.length&&s[0].values.length?s[0].values[0][0]:0}async function xL(n,e){te().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, updated_at)
     VALUES (?, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       longest_streak = MAX(longest_streak, excluded.longest_streak),
       updated_at = datetime('now')`,[n,e]),await ve()}function M1(){const e=te().exec("SELECT SUM(quantity) FROM streak_shields");return e.length&&e[0].values.length&&e[0].values[0][0]||0}async function AL(n){te().run("INSERT INTO streak_shields (quantity) VALUES (?)",[n]),await ve()}async function RL(n){const e=te(),s=D1();if(M1()<=0)return!1;const o=e.exec("SELECT id FROM streak_shield_uses WHERE buff_definition_id = ? AND used_date = ?",[n,s]);if(o.length&&o[0].values.length)return!1;const u=O1(n);return e.run(`UPDATE streak_shields SET quantity = quantity - 1
     WHERE id = (SELECT id FROM streak_shields WHERE quantity > 0 ORDER BY earned_at LIMIT 1)`),e.run(`INSERT INTO streak_shield_uses (buff_definition_id, used_date, streak_saved)
     VALUES (?, ?, ?)`,[n,s,u.currentStreak]),e.run("DELETE FROM streak_shields WHERE quantity <= 0"),await ve(),!0}function CL(n){const s=te().exec(`SELECT id, buff_definition_id, freeze_date, reason, created_at
     FROM streak_freezes WHERE buff_definition_id = ? AND freeze_date >= date('now')
     ORDER BY freeze_date`,[n]);return s.length?s[0].values.map(a=>({id:a[0],buff_definition_id:a[1],freeze_date:a[2],reason:a[3],created_at:a[4]})):[]}async function IL(n,e,s){te().run(`INSERT OR IGNORE INTO streak_freezes (buff_definition_id, freeze_date, reason)
     VALUES (?, ?, ?)`,[n,e,s||null]),await ve()}async function kL(n){te().run("DELETE FROM streak_freezes WHERE id = ?",[n]),await ve()}function LL(n){const s=te().exec("SELECT last_milestone_claimed FROM streak_records WHERE buff_definition_id = ?",[n]);return s.length&&s[0].values.length?s[0].values[0][0]:0}async function jL(n,e){te().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, last_milestone_claimed, updated_at)
     VALUES (?, 0, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       last_milestone_claimed = ?,
       updated_at = datetime('now')`,[n,e,e]),await ve()}function VT(n,e){const s=LL(n);return j1.filter(a=>a.days<=e&&a.days>s)}function DL(){const e=te().exec("SELECT DISTINCT definition_id FROM buff_log WHERE definition_id IN (SELECT id FROM buff_definitions WHERE type = ?)",["buff"]),s=new Map;if(!e.length)return s;for(const a of e[0].values){const o=a[0];s.set(o,O1(o))}return s}function OL({grantXP:n}){const[e,s]=L.useState(new Map),[a,o]=L.useState(0),[u,h]=L.useState(!0),g=L.useCallback(()=>{s(DL()),o(M1()),h(!1)},[]);L.useEffect(()=>{g()},[g]);const E=L.useCallback(U=>e.get(U)||{buffDefinitionId:U,currentStreak:0,longestStreak:0,lastActivatedDate:null,isAtRisk:!1,shieldActive:!1},[e]),_=L.useCallback(async U=>{const z=await RL(U);return z&&g(),z},[g]),S=L.useCallback(async(U,z,G)=>{await IL(U,z,G),g()},[g]),w=L.useCallback(async U=>{await kL(U),g()},[g]),x=L.useCallback(U=>CL(U),[]),B=L.useCallback(async U=>{const z=E(U),G=VT(U,z.currentStreak);for(const K of G)await n(K.bonusXp,`Streak Milestone: ${K.title} (${K.days} days)`,"streak_milestone",U),await jL(U,K.days);return g(),G},[E,n,g]),X=L.useCallback(U=>{const z=E(U);return VT(U,z.currentStreak)},[E]),V=L.useCallback(async U=>{await AL(U),g()},[g]);return{streakInfos:e,shieldCount:a,loading:u,refresh:g,getStreakForBuff:E,useShield:_,addFreeze:S,removeFreeze:w,getFreezes:x,claimMilestones:B,getUnclaimedMilestones:X,addShields:V}}const qT=[{type:"procrastination_dragon",name:"Procrastination Dragon",description:"A lazy beast that feeds on delayed tasks and broken promises.",icon:"",hpRange:[400,500],xpReward:200,bonusShields:1,difficulty:"medium"},{type:"distraction_demon",name:"Distraction Demon",description:"A cunning fiend that lures you away from your goals with endless diversions.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"},{type:"sloth_specter",name:"Sloth Specter",description:"A ghostly presence that drains your energy and willpower.",icon:"",hpRange:[300,400],xpReward:150,bonusShields:0,difficulty:"easy"},{type:"chaos_chimera",name:"Chaos Chimera",description:"A multi-headed monster representing disorganization and scattered focus.",icon:"",hpRange:[500,600],xpReward:250,bonusShields:2,difficulty:"hard"},{type:"anxiety_wyrm",name:"Anxiety Wyrm",description:"A serpentine creature that coils around your mind with worry and doubt.",icon:"",hpRange:[450,550],xpReward:225,bonusShields:1,difficulty:"hard"},{type:"comfort_zone_golem",name:"Comfort Zone Golem",description:"A stubborn construct that blocks the path to growth and change.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"}],ml={step_completed:10,buff_activated:25,quest_completed:50,goal_completed:100,daily_quest_completed:15,focus_session:20,routine_completed:30};function Dd(n=new Date){const e=new Date(n),s=e.getDay(),a=e.getDate()-s+(s===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function ML(n){const e=new Date(n+"T12:00:00");return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}function BT(){const n=te(),e=Dd(),s=n.exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE week_start = ?`,[e]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return U1(a)}function UL(n){const s=te().exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE id = ?`,[n]);return!s.length||!s[0].values.length?null:U1(s[0].values[0])}async function VL(){const n=te(),e=Dd(),s=BT();if(s)return s;const a=qT[Math.floor(Math.random()*qT.length)],o=Math.floor(Math.random()*(a.hpRange[1]-a.hpRange[0]+1))+a.hpRange[0];return n.run(`INSERT INTO weekly_boss (week_start, boss_type, name, description, icon, max_hp, current_hp, xp_reward, bonus_shields)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,a.type,a.name,a.description,a.icon,o,o,a.xpReward,a.bonusShields]),await ve(),BT()}async function qL(n,e,s,a){const o=te(),u=UL(n);if(!u||u.is_defeated)return{newHp:u?.current_hp||0,isDefeated:u?.is_defeated||!1};const h=Math.max(0,u.current_hp-s),g=h===0;return o.run(`UPDATE weekly_boss SET current_hp = ?, is_defeated = ?, defeated_at = ?
     WHERE id = ?`,[h,g?1:0,g?new Date().toISOString():null,n]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[n,e,s,a||null]),await ve(),{newHp:h,isDefeated:g}}function BL(){const e=te().exec("SELECT COUNT(*) FROM weekly_boss WHERE is_defeated = 1");return e.length&&e[0].values.length?e[0].values[0][0]:0}function U1(n){return{id:n[0],week_start:n[1],boss_type:n[2],name:n[3],description:n[4],icon:n[5],max_hp:n[6],current_hp:n[7],is_defeated:!!n[8],defeated_at:n[9],xp_reward:n[10],bonus_shields:n[11],created_at:n[12]}}function PL({grantXP:n,addShields:e}){const[s,a]=L.useState(null),[o,u]=L.useState(!0),[h,g]=L.useState(!1),E=L.useCallback(async()=>{const U=await VL();a(U),u(!1)},[]);L.useEffect(()=>{E()},[E]),L.useEffect(()=>{const z=setInterval(()=>{const G=Dd();s&&s.week_start!==G&&E()},6e4);return()=>clearInterval(z)},[s,E]);const _=L.useCallback(async(U,z)=>{if(!s||s.is_defeated)return;const G=ml[U],K=await qL(s.id,U,G,z);return a(oe=>oe?{...oe,current_hp:K.newHp,is_defeated:K.isDefeated}:null),K.isDefeated&&!s.is_defeated&&(g(!0),await n(s.xp_reward,`Defeated ${s.name}!`,"boss",s.id),s.bonus_shields>0&&e&&await e(s.bonus_shields)),K},[s,n,e]),S=L.useCallback(()=>{g(!1)},[]),w=s?.week_start||Dd(),x=ML(w),B=s?Math.round(s.current_hp/s.max_hp*100):100,X=s?s.max_hp-s.current_hp:0,V=BL();return{boss:s,loading:o,justDefeated:h,weekStart:w,weekEnd:x,hpPercentage:B,damageDealt:X,totalDefeated:V,refresh:E,dealDamage:_,dismissDefeatNotification:S}}function FL(){const s=te().exec(`
    SELECT
      ad.id, ad.key, ad.name, ad.description, ad.category, ad.icon, ad.xp_reward,
      ad.requirement_type, ad.requirement_value, ad.requirement_source, ad.sort_order, ad.is_hidden,
      au.unlocked_at,
      COALESCE(ap.current_value, 0) as current_value
    FROM achievement_definitions ad
    LEFT JOIN achievement_unlocks au ON ad.id = au.definition_id
    LEFT JOIN achievement_progress ap ON ad.id = ap.definition_id
    ORDER BY ad.category, ad.sort_order
  `);return s.length?s[0].values.map(a=>{const o=a[8],u=a[13],h=a[12];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:o,requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11],unlocked:h!==null,unlocked_at:h,current_value:u,progress_percent:Math.min(100,Math.round(u/o*100))}}):[]}async function zL(n,e=1){const s=te(),a=s.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ?`,[n]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],E=s.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);if(E.length&&E[0].values.length)continue;const _=s.exec("SELECT current_value FROM achievement_progress WHERE definition_id = ?",[h]),w=(_.length&&_[0].values.length?_[0].values[0][0]:0)+e;s.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,w]),w>=g&&o.push(h)}return await ve(),o}async function HL(n,e){const s=te(),a=s.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ? AND requirement_type = 'threshold'`,[n]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],E=s.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);E.length&&E[0].values.length||(s.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,e]),e>=g&&o.push(h))}return await ve(),o}async function GL(n){const e=te(),s=e.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[n]);return s.length&&s[0].values.length?!1:(e.run("INSERT INTO achievement_unlocks (definition_id, unlocked_at) VALUES (?, datetime('now'))",[n]),await ve(),!0)}function XL(n){const s=te().exec(`SELECT id, key, name, description, category, icon, xp_reward,
     requirement_type, requirement_value, requirement_source, sort_order, is_hidden
     FROM achievement_definitions WHERE id = ?`,[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:a[8],requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11]}}function $L(){const n=te(),e=n.exec("SELECT COUNT(*), SUM(xp_reward) FROM achievement_definitions"),s=e.length?e[0].values[0][0]:0,a=e.length&&e[0].values[0][1]||0,o=n.exec(`
    SELECT COUNT(*), COALESCE(SUM(ad.xp_reward), 0)
    FROM achievement_unlocks au
    JOIN achievement_definitions ad ON au.definition_id = ad.id
  `),u=o.length?o[0].values[0][0]:0,h=o.length?o[0].values[0][1]:0;return{total:s,unlocked:u,totalXp:a,earnedXp:h}}function YL({grantXP:n}){const[e,s]=L.useState([]),[a,o]=L.useState({total:0,unlocked:0,totalXp:0,earnedXp:0}),[u,h]=L.useState([]),[g,E]=L.useState(!0),_=L.useCallback(()=>{s(FL()),o($L()),E(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async U=>{const z=[];for(const G of U)if(await GL(G)){const oe=XL(G);oe&&(await n(oe.xp_reward,`Achievement: ${oe.name}`,"achievement",G),z.push({achievement:oe,xpAwarded:oe.xp_reward}))}return z.length>0&&(h(G=>[...G,...z]),_()),z},[n,_]),w=L.useCallback(async(U,z=1)=>{const G=await zL(U,z);G.length>0&&await S(G),_()},[S,_]),x=L.useCallback(async(U,z)=>{const G=await HL(U,z);G.length>0&&await S(G),_()},[S,_]),B=L.useCallback(U=>{h(z=>z.filter((G,K)=>K!==U))},[]),X=L.useCallback(()=>{h([])},[]),V=L.useCallback(U=>e.filter(z=>z.category===U),[e]);return{achievements:e,stats:a,loading:g,pendingUnlocks:u,refresh:_,incrementProgress:w,checkThreshold:x,dismissUnlock:B,dismissAllUnlocks:X,getAchievementsByCategory:V}}function lo(){const e=te().exec("SELECT id, current_energy, max_energy, last_regen_at, bonus_energy FROM energy_state WHERE id = 1");if(!e.length||!e[0].values.length)return{id:1,current_energy:pl,max_energy:pl,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19),bonus_energy:0};const s=e[0].values[0];return{id:s[0],current_energy:s[1],max_energy:s[2],last_regen_at:s[3],bonus_energy:s[4]}}async function cf(n,e,s,a=null){const o=te(),u=lo(),h=u.current_energy,g=u.max_energy+u.bonus_energy,E=Math.max(0,Math.min(g,u.current_energy+n));return o.run("UPDATE energy_state SET current_energy = ?, last_regen_at = datetime('now') WHERE id = 1",[E]),o.run(`INSERT INTO energy_log (amount, reason, source_type, source_id, energy_before, energy_after)
     VALUES (?, ?, ?, ?, ?, ?)`,[n,e,s,a,h,E]),await ve(),{...u,current_energy:E,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19)}}async function QL(n,e=null){const s=u_(n),a=lo();return a.current_energy<s?{success:!1,newState:a,cost:s}:{success:!0,newState:await cf(-s,`Spent on ${n.replace(/_/g," ")}`,n,e),cost:s}}function KL(n){const e=u_(n);return lo().current_energy>=e}function u_(n){const s=te().exec("SELECT base_cost FROM energy_costs WHERE action_type = ?",[n]);return!s.length||!s[0].values.length?0:s[0].values[0][0]}async function WL(){const n=te(),e=lo(),s=e.max_energy+e.bonus_energy;if(e.current_energy>=s)return n.run("UPDATE energy_state SET last_regen_at = datetime('now') WHERE id = 1"),await ve(),{regenerated:0,newState:e};const a=new Date(e.last_regen_at+"Z"),u=(new Date().getTime()-a.getTime())/(1e3*60*60),h=Math.floor(u*nb);if(h<=0)return{regenerated:0,newState:e};const E=Math.min(s,e.current_energy+h)-e.current_energy;if(E>0){const _=await cf(E,"Natural regeneration","regen");return{regenerated:E,newState:_}}return{regenerated:0,newState:e}}async function JL(){const n=lo(),s=n.max_energy+n.bonus_energy-n.current_energy;return s>0?await cf(s,"Full energy restore","restore"):n}function ZL(){const[n,e]=L.useState(()=>lo()),[s,a]=L.useState(!0),o=L.useCallback(()=>{e(lo()),a(!1)},[]);L.useEffect(()=>{o()},[o]),L.useEffect(()=>{const V=async()=>{const{regenerated:z,newState:G}=await WL();z>0&&e(G)};V();const U=setInterval(V,6e4);return()=>clearInterval(U)},[]);const u=L.useCallback(async(V,U=null)=>{const z=await QL(V,U);return z.success&&e(z.newState),z},[]),h=L.useCallback(async(V,U)=>{const z=await cf(V,U,"bonus");return e(z),z},[]),g=L.useCallback(async()=>{const V=await JL();return e(V),V},[]),E=L.useCallback(V=>KL(V),[]),_=L.useCallback(V=>u_(V),[]),S=L.useCallback(()=>{const V=[];return n.current_energy<=qm?V.push({active:!0,name:mm.name,icon:mm.icon,effects:mm.effects}):n.current_energy<=Vm&&V.push({active:!0,name:hm.name,icon:hm.icon,effects:hm.effects}),V},[n.current_energy]),w=L.useCallback(()=>{const V=S(),U={};for(const z of V)for(const[G,K]of Object.entries(z.effects))U[G]=(U[G]||0)+K;return U},[S]),x=Math.round(n.current_energy/(n.max_energy+n.bonus_energy)*100),B=n.current_energy<=Vm,X=n.current_energy<=qm;return{state:n,loading:s,refresh:o,spendEnergy:u,addEnergy:h,restoreFullEnergy:g,canAfford:E,getActionCost:_,getEnergyDebuffs:S,getEnergyStatPenalties:w,percentage:x,isLow:B,isEmpty:X}}function dp(){const e=te().exec(`
    SELECT id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled
    FROM focus_settings WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,...Xs};const s=e[0].values[0];return{id:s[0],work_duration:s[1],short_break:s[2],long_break:s[3],sessions_before_long_break:s[4],auto_start_breaks:!!s[5],sound_enabled:!!s[6]}}async function ej(n){const e=te(),a={...dp(),...n};return e.run(`
    UPDATE focus_settings SET
      work_duration = ?,
      short_break = ?,
      long_break = ?,
      sessions_before_long_break = ?,
      auto_start_breaks = ?,
      sound_enabled = ?
    WHERE id = 1
  `,[a.work_duration,a.short_break,a.long_break,a.sessions_before_long_break,a.auto_start_breaks?1:0,a.sound_enabled?1:0]),await ve(),a}function fp(){const e=te().exec(`
    SELECT id, total_sessions, total_minutes, longest_streak, current_streak, today_sessions, today_date
    FROM focus_stats WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,total_sessions:0,total_minutes:0,longest_streak:0,current_streak:0,today_sessions:0,today_date:new Date().toISOString().split("T")[0]};const s=e[0].values[0];return{id:s[0],total_sessions:s[1],total_minutes:s[2],longest_streak:s[3],current_streak:s[4],today_sessions:s[5],today_date:s[6]}}async function tj(n,e=null,s=null){const a=te();a.run(`
    INSERT INTO focus_sessions (duration_minutes, linked_step_id, linked_quest_id, status)
    VALUES (?, ?, ?, 'active')
  `,[n,e,s]);const u=a.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ve(),d_(u)}async function nj(n,e,s=""){te().run(`
    UPDATE focus_sessions SET
      status = 'completed',
      completed_at = datetime('now'),
      xp_earned = ?,
      notes = ?
    WHERE id = ? AND status = 'active'
  `,[e,s,n]);const o=d_(n);return o&&await aj(o.duration_minutes),await ve(),o}async function sj(n){te().run("UPDATE focus_sessions SET status = 'cancelled', completed_at = datetime('now') WHERE id = ?",[n]),await ve()}function d_(n){const s=te().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE id = ?
  `,[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return f_(a)}function PT(){const e=te().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE status = 'active' ORDER BY started_at DESC LIMIT 1
  `);return!e.length||!e[0].values.length?null:f_(e[0].values[0])}function ij(n=10){const s=te().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions ORDER BY started_at DESC LIMIT ?
  `,[n]);return s.length?s[0].values.map(f_):[]}async function aj(n){const e=te(),s=fp(),a=new Date().toISOString().split("T")[0],u=s.today_date===a?s.today_sessions+1:1,h=s.current_streak+1,g=Math.max(s.longest_streak,h);e.run(`
    UPDATE focus_stats SET
      total_sessions = total_sessions + 1,
      total_minutes = total_minutes + ?,
      current_streak = ?,
      longest_streak = ?,
      today_sessions = ?,
      today_date = ?
    WHERE id = 1
  `,[n,h,g,u,a]),await ve()}function f_(n){return{id:n[0],duration_minutes:n[1],started_at:n[2],completed_at:n[3],status:n[4],xp_earned:n[5],linked_step_id:n[6],linked_quest_id:n[7],break_taken:!!n[8],notes:n[9]}}function rj({grantXP:n,onSessionComplete:e}){const[s,a]=L.useState(()=>dp()),[o,u]=L.useState(()=>fp()),[h,g]=L.useState(()=>PT()),[E,_]=L.useState([]),[S,w]=L.useState({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:0}),x=L.useRef(null),B=L.useRef(h?.id||null),X=L.useCallback(()=>{a(dp()),u(fp()),g(PT()),_(ij(10))},[]);L.useEffect(()=>{X()},[X]),L.useEffect(()=>{if(S.isRunning&&S.timeRemaining>0)return x.current=setInterval(()=>{w(j=>({...j,timeRemaining:Math.max(0,j.timeRemaining-1)}))},1e3),()=>{x.current&&clearInterval(x.current)}},[S.isRunning]),L.useEffect(()=>{S.timeRemaining===0&&S.isRunning&&V()},[S.timeRemaining,S.isRunning]);const V=async()=>{if(S.phase==="work"&&B.current){const j=d_(B.current);let M=aw;j?.linked_step_id&&(M+=rw);const q=S.sessionsCompleted+1;q%4===0&&(M+=ow),await nj(B.current,M),await n(M,"Focus session completed","focus",B.current),e?.(),s.sound_enabled&&FT();const R=q%s.sessions_before_long_break===0,D=R?"long_break":"short_break",k=R?s.long_break:s.short_break;w({phase:s.auto_start_breaks?D:"idle",timeRemaining:k*60,isRunning:s.auto_start_breaks,sessionsCompleted:q}),B.current=null,X()}else(S.phase==="short_break"||S.phase==="long_break")&&(s.sound_enabled&&FT(),w({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}))},U=L.useCallback(async(j=null,M=null)=>{const q=await tj(s.work_duration,j,M);B.current=q.id,g(q),w({phase:"work",timeRemaining:s.work_duration*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[s.work_duration,S.sessionsCompleted]),z=L.useCallback((j=!1)=>{const M=j?s.long_break:s.short_break;w({phase:j?"long_break":"short_break",timeRemaining:M*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[s.short_break,s.long_break,S.sessionsCompleted]),G=L.useCallback(()=>{w(j=>({...j,isRunning:!1}))},[]),K=L.useCallback(()=>{w(j=>({...j,isRunning:!0}))},[]),oe=L.useCallback(async()=>{x.current&&clearInterval(x.current),B.current&&S.phase==="work"&&await sj(B.current),B.current=null,g(null),w({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}),X()},[s.work_duration,S.phase,S.sessionsCompleted,X]),ye=L.useCallback(()=>{(S.phase==="short_break"||S.phase==="long_break")&&w({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted})},[s.work_duration,S.phase,S.sessionsCompleted]),ge=L.useCallback(async j=>{const M=await ej(j);a(M),S.phase==="idle"&&w(q=>({...q,timeRemaining:(j.work_duration||q.timeRemaining/60)*60}))},[S.phase]);return{settings:s,stats:o,timerState:S,currentSession:h,recentSessions:E,refresh:X,startWork:U,startBreak:z,pause:G,resume:K,stop:oe,skipBreak:ye,updateSettings:ge,formatTime:j=>{const M=Math.floor(j/60),q=j%60;return`${M.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`}}}function FT(){try{const n=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdGCdqIyYY19lf6O3qJyAa3B1gqKvpZNyYW50iaS7s5yBaWx3g6C4t5uGc2l0gJy0t5qGcWl0gJyzrZOAbWp0gJyzrZaEc2p2gJixsJmGeWt3gJivsJmGd2x3gZitq5OAbWp0f5asrJaAdmp1f5aqq5aAdmp1f5aqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZOAdGlzfpKppZKAc2hyfpCmpZCAbGZxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY6kpJCAa2RvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoyjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI4=");n.volume=.5,n.play().catch(()=>{})}catch{}}const oj=25,zT=10;function lj(){const e=te().exec(`
    SELECT id, name, type, description, bonus_xp, is_active, created_at
    FROM routine_definitions WHERE is_active = 1 ORDER BY type, name
  `);return e.length?e[0].values.map(yj):[]}function cj(){return lj().map(e=>{const s=h_(e.id),a=Od(e.id),o=Md(e.id);return{...e,steps:s,streak:a||void 0,todayLog:o||void 0}})}function h_(n){const s=te().exec(`
    SELECT id, routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional
    FROM routine_steps WHERE routine_id = ? ORDER BY sort_order
  `,[n]);return s.length?s[0].values.map(Ej):[]}function Od(n){const s=te().exec(`
    SELECT id, routine_id, current_streak, longest_streak, last_completed_date
    FROM routine_streaks WHERE routine_id = ?
  `,[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],routine_id:a[1],current_streak:a[2],longest_streak:a[3],last_completed_date:a[4]}}function Md(n){const s=te().exec(`
    SELECT id, routine_id, date, started_at, completed_at, is_completed, steps_completed, total_steps, xp_earned
    FROM routine_logs WHERE routine_id = ? AND date = date('now')
  `,[n]);return!s.length||!s[0].values.length?null:vj(s[0].values[0])}function uj(n){const s=te().exec(`
    SELECT id, routine_log_id, step_id, completed_at, is_completed, skipped
    FROM routine_step_logs WHERE routine_log_id = ?
  `,[n]);return s.length?s[0].values.map(a=>({id:a[0],routine_log_id:a[1],step_id:a[2],completed_at:a[3],is_completed:!!a[4],skipped:!!a[5]})):[]}function V1(n){const e=h_(n),s=Md(n);if(!s)return e.map(u=>({...u,is_completed:!1,skipped:!1,completed_at:null}));const a=uj(s.id),o=new Map(a.map(u=>[u.step_id,u]));return e.map(u=>{const h=o.get(u.id);return{...u,is_completed:h?.is_completed||!1,skipped:h?.skipped||!1,completed_at:h?.completed_at||null}})}async function dj(n,e,s,a){const o=te();o.run("INSERT INTO routine_definitions (name, type, description, bonus_xp) VALUES (?, ?, ?, ?)",[n,e,s,a]);const h=o.exec("SELECT last_insert_rowid()")[0].values[0][0];return o.run("INSERT INTO routine_streaks (routine_id) VALUES (?)",[h]),await ve(),h}async function fj(n,e,s,a,o,u){const h=te(),E=h.exec("SELECT COALESCE(MAX(sort_order), -1) + 1 FROM routine_steps WHERE routine_id = ?",[n])[0].values[0][0];h.run(`INSERT INTO routine_steps (routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional)
     VALUES (?, ?, ?, ?, ?, ?, ?)`,[n,e,s,a,E,o,u?1:0]);const _=h.exec("SELECT last_insert_rowid()");return await ve(),_[0].values[0][0]}async function hj(n){te().run("DELETE FROM routine_steps WHERE id = ?",[n]),await ve()}async function mj(n){te().run("DELETE FROM routine_definitions WHERE id = ?",[n]),await ve()}async function pj(n){const e=te(),s=h_(n);let a=Md(n);if(!a){e.run(`INSERT INTO routine_logs (routine_id, date, started_at, total_steps)
       VALUES (?, date('now'), datetime('now'), ?)`,[n,s.length]);const u=e.exec("SELECT last_insert_rowid()")[0].values[0][0];for(const h of s)e.run("INSERT INTO routine_step_logs (routine_log_id, step_id) VALUES (?, ?)",[u,h.id]);await ve(),a=Md(n)}return a}async function _j(n,e){const s=te();s.run(`UPDATE routine_step_logs SET is_completed = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[n,e]);const o=s.exec("SELECT COUNT(*) FROM routine_step_logs WHERE routine_log_id = ? AND is_completed = 1",[n])[0].values[0][0];s.run("UPDATE routine_logs SET steps_completed = ? WHERE id = ?",[o,n]),await ve()}async function gj(n,e){te().run(`UPDATE routine_step_logs SET skipped = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[n,e]),await ve()}async function HT(n,e){const s=te(),a=new Date().toISOString().split("T")[0];s.run(`UPDATE routine_logs SET is_completed = 1, completed_at = datetime('now'), xp_earned = ?
     WHERE routine_id = ? AND date = date('now')`,[e,n]);const o=Od(n);if(o){const u=new Date(Date.now()-864e5).toISOString().split("T")[0],g=o.last_completed_date===u?o.current_streak+1:1,E=Math.max(o.longest_streak,g);s.run(`UPDATE routine_streaks SET current_streak = ?, longest_streak = ?, last_completed_date = ?
       WHERE routine_id = ?`,[g,E,a,n])}await ve()}function GT(n){return V1(n).filter(a=>!a.is_optional).every(a=>a.is_completed||a.skipped)}function yj(n){return{id:n[0],name:n[1],type:n[2],description:n[3],bonus_xp:n[4],is_active:!!n[5],created_at:n[6]}}function Ej(n){return{id:n[0],routine_id:n[1],title:n[2],description:n[3],linked_buff_id:n[4],sort_order:n[5],duration_minutes:n[6],is_optional:!!n[7]}}function vj(n){return{id:n[0],routine_id:n[1],date:n[2],started_at:n[3],completed_at:n[4],is_completed:!!n[5],steps_completed:n[6],total_steps:n[7],xp_earned:n[8]}}function Tj({grantXP:n,onRoutineComplete:e}){const[s,a]=L.useState([]),[o,u]=L.useState(!0),h=L.useCallback(()=>{a(cj()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async(G,K,oe,ye=oj)=>{await dj(G,K,oe,ye),h()},[h]),E=L.useCallback(async(G,K,oe,ye,ge,O)=>{await fj(G,K,oe,ye,ge,O),h()},[h]),_=L.useCallback(async G=>{await hj(G),h()},[h]),S=L.useCallback(async G=>{await mj(G),h()},[h]),w=L.useCallback(async G=>{await pj(G),h()},[h]),x=L.useCallback(async(G,K)=>{const oe=s.find(ye=>ye.id===G);if(oe?.todayLog){if(await _j(oe.todayLog.id,K),GT(G)){let ye=oe.bonus_xp;const ge=Od(G);ge&&ge.current_streak>0&&ge.current_streak%7===0&&(ye+=zT),await HT(G,ye),await n(ye,`Completed routine: ${oe.name}`,"routine",G),e?.(G)}h()}},[s,n,e,h]),B=L.useCallback(async(G,K)=>{const oe=s.find(ye=>ye.id===G);if(oe?.todayLog){if(await gj(oe.todayLog.id,K),GT(G)){let ye=oe.bonus_xp;const ge=Od(G);ge&&ge.current_streak>0&&ge.current_streak%7===0&&(ye+=zT),await HT(G,ye),await n(ye,`Completed routine: ${oe.name}`,"routine",G),e?.(G)}h()}},[s,n,e,h]),X=L.useCallback(G=>V1(G),[]),V=L.useCallback(()=>s.filter(G=>G.type==="morning"),[s]),U=L.useCallback(()=>s.filter(G=>G.type==="evening"),[s]),z=L.useCallback(()=>s.filter(G=>G.type==="custom"),[s]);return{routines:s,loading:o,refresh:h,createRoutine:g,addStep:E,deleteStep:_,deleteRoutine:S,startRoutine:w,completeStep:x,skipStep:B,getStepsWithStatus:X,getMorningRoutines:V,getEveningRoutines:U,getCustomRoutines:z}}function bj(){const e=te().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE is_active = 1 ORDER BY name
  `);return e.length?e[0].values.map(B1):[]}function Sj(n){const s=te().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE id = ?
  `,[n]);return!s.length||!s[0].values.length?null:B1(s[0].values[0])}function q1(){const n=te();return bj().map(s=>{const a=JSON.parse(s.required_buffs),o=n.exec(`SELECT name FROM buff_definitions WHERE id IN (${a.join(",")||"0"})`),u=o.length?o[0].values.map(X=>X[0]):[],h=n.exec(`SELECT DISTINCT definition_id FROM buff_log
       WHERE is_active = 1
       AND definition_id IN (${a.join(",")||"0"})
       AND activated_at >= datetime('now', '-${s.time_window_hours} hours')`),g=h.length?h[0].values.map(X=>X[0]):[],E=n.exec(`SELECT activated_at FROM combo_activations
       WHERE combo_id = ? ORDER BY activated_at DESC LIMIT 1`,[s.id]),_=E.length&&E[0].values.length?E[0].values[0][0]:null,S=n.exec(`SELECT 1 FROM combo_activations
       WHERE combo_id = ? AND date(activated_at) = date('now')`,[s.id]),w=S.length&&S[0].values.length>0,x=a.length>0?Math.round(g.length/a.length*100):0,B=g.length===a.length&&!w;return{...s,required_buff_names:u,active_buff_ids:g,progress:x,is_ready:B,last_activated:_}})}function Nj(){return q1().filter(n=>n.is_ready)}async function XT(n,e){const s=te();if(!Sj(n))return null;s.run("INSERT INTO combo_activations (combo_id, buffs_used) VALUES (?, ?)",[n,JSON.stringify(e)]);const u=s.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ve(),wj(u)}function wj(n){const s=te().exec("SELECT id, combo_id, activated_at, buffs_used FROM combo_activations WHERE id = ?",[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],combo_id:a[1],activated_at:a[2],buffs_used:a[3]}}async function xj(n,e,s,a,o,u){const h=te();h.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp)
     VALUES (?, ?, ?, ?, ?, ?)`,[n,e,s,JSON.stringify(a),o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ve(),g[0].values[0][0]}async function Aj(n){te().run("DELETE FROM combo_definitions WHERE id = ?",[n]),await ve()}function B1(n){return{id:n[0],name:n[1],description:n[2],icon:n[3],required_buffs:n[4],time_window_hours:n[5],bonus_xp:n[6],is_active:!!n[7]}}function Rj({grantXP:n,onComboActivated:e}){const[s,a]=L.useState([]),[o,u]=L.useState(!0),h=L.useCallback(()=>{a(q1()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async()=>{const B=Nj(),X=[];for(const V of B)await XT(V.id,V.active_buff_ids),await n(V.bonus_xp,`Combo activated: ${V.name}`,"combo",V.id),X.push(V),e?.(V);return X.length>0&&h(),X},[n,e,h]),E=L.useCallback(async B=>{const X=s.find(V=>V.id===B);return!X||!X.is_ready?null:(await XT(B,X.active_buff_ids),await n(X.bonus_xp,`Combo activated: ${X.name}`,"combo",B),e?.(X),h(),X)},[s,n,e,h]),_=L.useCallback(async(B,X,V,U,z,G)=>{await xj(B,X,V,U,z,G),h()},[h]),S=L.useCallback(async B=>{await Aj(B),h()},[h]),w=L.useCallback(()=>s.filter(B=>B.is_ready),[s]),x=L.useCallback(()=>s.filter(B=>B.progress>0&&B.progress<100&&!B.is_ready),[s]);return{combos:s,loading:o,refresh:h,checkAndActivateCombos:g,claimCombo:E,createCombo:_,deleteCombo:S,getReadyCombos:w,getInProgressCombos:x}}const _l=100,Cj={steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0};function uf(n=new Date){const e=new Date(n),s=e.getDay(),a=e.getDate()-s+(s===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function hp(){const n=te(),e=uf(),s=n.exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews WHERE week_start = ?`,[e]);return!s.length||!s[0].values.length?null:P1(s[0].values[0])}function Ij(n=10){const s=te().exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews ORDER BY week_start DESC LIMIT ?`,[n]);return s.length?s[0].values.map(P1):[]}async function kj(){const n=te(),e=uf(),s=new Date(e);s.setDate(s.getDate()+7);const a=s.toISOString().split("T")[0],o={...Cj},u=n.exec(`SELECT COUNT(*) FROM steps WHERE completed_at IS NOT NULL
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.steps_completed=u.length?u[0].values[0][0]:0;const h=n.exec(`SELECT COUNT(*) FROM quests WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.quests_completed=h.length?h[0].values[0][0]:0;const g=n.exec(`SELECT COUNT(*) FROM goals WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.goals_completed=g.length?g[0].values[0][0]:0;const E=n.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'buff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.buffs_activated=E.length?E[0].values[0][0]:0;const _=n.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.debuffs_activated=_.length?_[0].values[0][0]:0;const S=n.exec(`SELECT COALESCE(SUM(amount), 0) FROM xp_log
     WHERE date(created_at) >= ? AND date(created_at) < ?`,[e,a]);o.xp_earned=S.length?S[0].values[0][0]:0;try{const w=n.exec(`SELECT COALESCE(SUM(damage), 0), MAX(CASE WHEN is_defeated = 1 THEN 1 ELSE 0 END)
       FROM weekly_boss WHERE week_start = ?`,[e]);w.length&&w[0].values.length&&(o.boss_damage_dealt=w[0].values[0][0],o.boss_defeated=!!w[0].values[0][1])}catch{}try{const w=n.exec(`SELECT COUNT(*), COALESCE(SUM(duration_minutes), 0) FROM focus_sessions
       WHERE status = 'completed' AND date(started_at) >= ? AND date(started_at) < ?`,[e,a]);w.length&&w[0].values.length&&(o.focus_sessions=w[0].values[0][0],o.focus_minutes=w[0].values[0][1])}catch{}try{const w=n.exec(`SELECT COUNT(*) FROM routine_logs
       WHERE is_completed = 1 AND date >= ? AND date < ?`,[e,a]);o.routines_completed=w.length?w[0].values[0][0]:0}catch{}try{const w=n.exec(`SELECT COUNT(*) FROM combo_activations
       WHERE date(activated_at) >= ? AND date(activated_at) < ?`,[e,a]);o.combos_activated=w.length?w[0].values[0][0]:0}catch{}try{const w=n.exec(`SELECT COUNT(*) FROM achievement_unlocks
       WHERE date(unlocked_at) >= ? AND date(unlocked_at) < ?`,[e,a]);o.achievements_unlocked=w.length?w[0].values[0][0]:0}catch{}return o}async function Lj(n){const e=te(),s=uf(),a=JSON.stringify(n),o=hp();return o?e.run("UPDATE weekly_reviews SET summary_data = ?, generated_at = datetime('now') WHERE id = ?",[a,o.id]):e.run("INSERT INTO weekly_reviews (week_start, summary_data) VALUES (?, ?)",[s,a]),await ve(),hp()}async function jj(n,e,s,a,o){te().run("UPDATE weekly_reviews SET wins = ?, challenges = ?, priorities = ?, notes = ? WHERE id = ?",[e,s,JSON.stringify(a),o,n]),await ve()}async function Dj(n,e){te().run("UPDATE weekly_reviews SET is_completed = 1, completed_at = datetime('now'), xp_earned = ? WHERE id = ?",[e,n]),await ve()}function P1(n){return{id:n[0],week_start:n[1],generated_at:n[2],completed_at:n[3],is_completed:!!n[4],summary_data:n[5],wins:n[6],challenges:n[7],priorities:n[8],notes:n[9],xp_earned:n[10]}}function Oj({grantXP:n}){const[e,s]=L.useState(null),[a,o]=L.useState(null),[u,h]=L.useState([]),[g,E]=L.useState(!0),_=L.useCallback(async()=>{s(hp()),h(Ij(10)),E(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async()=>{const U=await kj();o(U);const z=await Lj(U);return s(z),{summary:U,review:z}},[]),w=L.useCallback(async(U,z,G,K)=>{e&&(await jj(e.id,U,z,G,K),_())},[e,_]),x=L.useCallback(async()=>{!e||e.is_completed||(await Dj(e.id,_l),await n(_l,"Completed weekly review","weekly_review",e.id),_())},[e,n,_]),B=L.useCallback(()=>uf(),[]),X=L.useCallback(U=>{try{return JSON.parse(U.summary_data)}catch{return{steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0}}},[]),V=L.useCallback(U=>{try{return JSON.parse(U.priorities)}catch{return[]}},[]);return{currentReview:e,summaryData:a,recentReviews:u,loading:g,refresh:_,generateSummary:S,updateContent:w,completeReview:x,getWeekStart:B,getSummaryFromReview:X,getPrioritiesFromReview:V}}function Mj(){const e=te().exec(`
    SELECT id, name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight
    FROM event_templates ORDER BY rarity, name
  `);return e.length?e[0].values.map(Bj):[]}function m_(){const e=te().exec(`
    SELECT ae.id, ae.template_id, ae.started_at, ae.expires_at, ae.is_claimed, ae.claimed_at,
           et.id, et.name, et.description, et.type, et.icon, et.duration_hours, et.effect_type, et.effect_value, et.rarity, et.weight
    FROM active_events ae
    JOIN event_templates et ON ae.template_id = et.id
    WHERE ae.expires_at > datetime('now') OR (ae.is_claimed = 0 AND et.duration_hours = 0)
    ORDER BY ae.started_at DESC
  `);if(!e.length)return[];const s=Date.now();return e[0].values.map(a=>{const o=new Date(a[3]+"Z").getTime();return{id:a[0],template_id:a[1],started_at:a[2],expires_at:a[3],is_claimed:!!a[4],claimed_at:a[5],template:{id:a[6],name:a[7],description:a[8],type:a[9],icon:a[10],duration_hours:a[11],effect_type:a[12],effect_value:a[13],rarity:a[14],weight:a[15]},time_remaining:Math.max(0,Math.floor((o-s)/1e3))}})}async function Uj(){const n=te(),e=Mj();if(e.length===0)return null;const s=e.reduce((g,E)=>g+E.weight,0);let a=Math.random()*s,o=null;for(const g of e)if(a-=g.weight,a<=0){o=g;break}o||(o=e[0]);const u=o.duration_hours>0?`datetime('now', '+${o.duration_hours} hours')`:"datetime('now', '+24 hours')";return n.run(`INSERT INTO active_events (template_id, expires_at) VALUES (?, ${u})`,[o.id]),await ve(),m_().find(g=>g.template_id===o.id)||null}async function Vj(n){const e=te(),a=m_().find(o=>o.id===n);if(!a||a.is_claimed)return{success:!1,effectValue:{}};e.run("UPDATE active_events SET is_claimed = 1, claimed_at = datetime('now') WHERE id = ?",[n]),e.run(`INSERT INTO event_history (template_id, event_name, result, xp_earned)
     VALUES (?, ?, 'claimed', 0)`,[a.template_id,a.template.name]),await ve();try{return{success:!0,effectValue:JSON.parse(a.template.effect_value)}}catch{return{success:!0,effectValue:{}}}}async function qj(){te().run(`
    DELETE FROM active_events
    WHERE expires_at <= datetime('now') AND is_claimed = 0
  `),await ve()}function Bj(n){return{id:n[0],name:n[1],description:n[2],type:n[3],icon:n[4],duration_hours:n[5],effect_type:n[6],effect_value:n[7],rarity:n[8],weight:n[9]}}const $T="last_event_check";function Pj({grantXP:n,addEnergy:e,addShields:s,onEventTriggered:a}){const[o,u]=L.useState([]),[h,g]=L.useState(!0),[E,_]=L.useState(null),S=L.useCallback(async()=>{await qj(),u(m_()),g(!1)},[]);L.useEffect(()=>{S()},[S]),L.useEffect(()=>{(async()=>{const G=localStorage.getItem($T),K=Date.now();if(!(G&&(K-parseInt(G,10))/36e5<_w)){if(Math.random()<pw){const oe=await Uj();oe&&(_(oe),a?.(oe),S())}localStorage.setItem($T,K.toString())}})()},[a,S]);const w=L.useCallback(async z=>{const{success:G,effectValue:K}=await Vj(z);if(!G)return null;const oe=o.find(ye=>ye.id===z);if(!oe)return null;switch(oe.template.effect_type){case"xp_bonus":K.amount&&await n(K.amount,`Event: ${oe.template.name}`,"event",z);break;case"energy_restore":K.amount&&e&&await e(K.amount,`Event: ${oe.template.name}`);break;case"streak_shield":K.shields&&s&&await s(K.shields);break}return S(),oe},[o,n,e,s,S]),x=L.useCallback(()=>{_(null)},[]),B=L.useCallback(()=>o.filter(z=>!z.is_claimed),[o]),X=L.useCallback(()=>o.filter(z=>z.is_claimed&&z.template.type==="modifier"&&z.time_remaining>0),[o]),V=L.useCallback(()=>o.some(z=>z.is_claimed&&z.template.effect_type==="xp_multiplier"&&z.time_remaining>0),[o]),U=L.useCallback(()=>{const z=o.find(G=>G.is_claimed&&G.template.effect_type==="xp_multiplier"&&G.time_remaining>0);if(!z)return 1;try{return JSON.parse(z.template.effect_value).multiplier||1}catch{return 1}},[o]);return{activeEvents:o,loading:h,pendingEvent:E,refresh:S,claimEvent:w,dismissPendingEvent:x,getUnclaimedEvents:B,getActiveModifiers:X,hasActiveXpMultiplier:V,getXpMultiplier:U}}function Fj(){const e=te().exec("SELECT id, name, description, icon, color, sort_order FROM skill_branches ORDER BY sort_order");return e.length?e[0].values.map(s=>({id:s[0],name:s[1],description:s[2],icon:s[3],color:s[4],sort_order:s[5]})):[]}function zj(){const e=te().exec("SELECT id, node_id, unlocked_at FROM unlocked_skills");return e.length?e[0].values.map(s=>({id:s[0],node_id:s[1],unlocked_at:s[2]})):[]}function Hj(){const e=te().exec(`
    SELECT sn.id, sn.branch_id, sn.name, sn.description, sn.icon, sn.tier, sn.position, sn.xp_cost,
           sn.prerequisite_node_id, sn.effect_type, sn.effect_value, sn.is_capstone,
           us.unlocked_at, sb.name as branch_name, sb.color as branch_color
    FROM skill_nodes sn
    LEFT JOIN unlocked_skills us ON sn.id = us.node_id
    JOIN skill_branches sb ON sn.branch_id = sb.id
    ORDER BY sb.sort_order, sn.tier, sn.position
  `);if(!e.length)return[];const s=new Set(zj().map(a=>a.node_id));return e[0].values.map(a=>{const o=a[0],u=a[8],h=a[12]!==null,g=!h&&(u===null||s.has(u));return{id:o,branch_id:a[1],name:a[2],description:a[3],icon:a[4],tier:a[5],position:a[6],xp_cost:a[7],prerequisite_node_id:u,effect_type:a[9],effect_value:a[10],is_capstone:!!a[11],unlocked:h,unlocked_at:a[12],can_unlock:g,branch_name:a[13],branch_color:a[14]}})}async function Gj(n){const e=te(),s=e.exec("SELECT 1 FROM unlocked_skills WHERE node_id = ?",[n]);return s.length&&s[0].values.length?!1:(e.run("INSERT INTO unlocked_skills (node_id) VALUES (?)",[n]),await ve(),!0)}function Xj(){const e=te().exec(`
    SELECT sn.effect_value FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
    WHERE sn.effect_type IN ('stat_bonus', 'combined')
  `);if(!e.length)return{};const s={};for(const a of e[0].values)try{const o=JSON.parse(a[0]);for(const[u,h]of Object.entries(o))typeof h=="number"&&!u.includes("_bonus")&&(s[u]=(s[u]||0)+h)}catch{}return s}function jm(){const e=te().exec(`
    SELECT COALESCE(SUM(sn.xp_cost), 0) FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
  `);return e.length?e[0].values[0][0]:0}function $j({totalXP:n}){const[e,s]=L.useState([]),[a,o]=L.useState([]),[u,h]=L.useState(!0),g=L.useCallback(()=>{s(Fj()),o(Hj()),h(!1)},[]);L.useEffect(()=>{g()},[g]);const E=L.useCallback(async V=>{const U=a.find(oe=>oe.id===V);if(!U||U.unlocked||!U.can_unlock)return!1;const z=jm();if(n-z<U.xp_cost)return!1;const K=await Gj(V);return K&&g(),K},[a,n,g]),_=L.useCallback(V=>a.filter(U=>U.branch_id===V),[a]),S=L.useCallback(()=>a.filter(V=>V.unlocked).length,[a]),w=L.useCallback(()=>a.length,[a]),x=L.useCallback(()=>Xj(),[]),B=L.useCallback(()=>{const V=jm();return n-V},[n]),X=L.useCallback(()=>jm(),[]);return{branches:e,nodes:a,loading:u,refresh:g,unlockSkill:E,getNodesByBranch:_,getUnlockedCount:S,getTotalNodes:w,getStatBonuses:x,getAvailableXp:B,getXpSpent:X}}function Yj(){const e=te().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes ORDER BY name
  `);return e.length?e[0].values.map(z1):[]}function Qj(n){const s=te().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes WHERE id = ?
  `,[n]);return!s.length||!s[0].values.length?null:z1(s[0].values[0])}function df(){const e=te().exec(`
    SELECT id, class_id, selected_at, last_changed_at, changes_remaining
    FROM character_class_selection WHERE id = 1
  `);if(!e.length||!e[0].values.length)return null;const s=e[0].values[0];return{id:s[0],class_id:s[1],selected_at:s[2],last_changed_at:s[3],changes_remaining:s[4]}}function F1(){const n=df();return!n||!n.class_id?null:Qj(n.class_id)}function Kj(){const n=Yj(),e=df();return n.map(s=>({...s,is_selected:e?.class_id===s.id}))}async function Wj(n){const e=te(),s=df();if(s?.class_id&&s.changes_remaining<=0)return!1;const a=s?.class_id?s.changes_remaining-1:s?.changes_remaining||3;return e.run("UPDATE character_class_selection SET class_id = ?, selected_at = COALESCE(selected_at, datetime('now')), last_changed_at = datetime('now'), changes_remaining = ? WHERE id = 1",[n,a]),await ve(),!0}function Jj(){const n=F1();if(!n)return{};try{return JSON.parse(n.stat_bonuses)}catch{return{}}}function Zj(n){const e=F1();return e&&e.xp_bonus_type===n?e.xp_bonus_percent:0}function z1(n){return{id:n[0],key:n[1],name:n[2],description:n[3],icon:n[4],primary_stat:n[5],stat_bonuses:n[6],xp_bonus_type:n[7],xp_bonus_percent:n[8],special_ability:n[9],special_ability_desc:n[10]}}function eD(){const[n,e]=L.useState([]),[s,a]=L.useState(null),[o,u]=L.useState(!0),h=L.useCallback(()=>{e(Kj()),a(df()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async x=>{const B=await Wj(x);return B&&h(),B},[h]),E=L.useCallback(()=>n.find(x=>x.is_selected)||null,[n]),_=L.useCallback(()=>Jj(),[]),S=L.useCallback(x=>Zj(x),[]),w=L.useCallback(()=>!s||!s.class_id?!0:s.changes_remaining>0,[s]);return{classes:n,selection:s,loading:o,refresh:h,selectClass:g,getSelectedClass:E,getStatBonuses:_,getXpBonus:S,canChangeClass:w}}function H1(){const e=te().exec(`
    SELECT id, name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards
    FROM territories ORDER BY unlock_level
  `);return e.length?e[0].values.map(oD):[]}function tD(n){const e=te(),s=H1(),a=e.exec(`
    SELECT id, territory_id, discovered_at, completed_at, challenges_completed, is_current
    FROM territory_progress
  `),o=new Map;if(a.length)for(const u of a[0].values)o.set(u[1],{id:u[0],territory_id:u[1],discovered_at:u[2],completed_at:u[3],challenges_completed:u[4],is_current:!!u[5]});return s.map(u=>{const h=o.get(u.id);return{...u,discovered:!!h,discovered_at:h?.discovered_at||null,completed:!!h?.completed_at,completed_at:h?.completed_at||null,is_current:h?.is_current||!1,is_locked:u.unlock_level>n,challenges_completed:h?JSON.parse(h.challenges_completed):[]}})}function nD(){const e=te().exec(`
    SELECT t.id, t.name, t.description, t.icon, t.unlock_level, t.background_color, t.position_x, t.position_y, t.connected_to, t.challenges, t.rewards,
           tp.id, tp.discovered_at, tp.completed_at, tp.challenges_completed, tp.is_current
    FROM territories t
    JOIN territory_progress tp ON t.id = tp.territory_id
    WHERE tp.is_current = 1
  `);if(!e.length||!e[0].values.length)return null;const s=e[0].values[0];return{id:s[0],name:s[1],description:s[2],icon:s[3],unlock_level:s[4],background_color:s[5],position_x:s[6],position_y:s[7],connected_to:s[8],challenges:s[9],rewards:s[10],discovered:!0,discovered_at:s[12],completed:s[13]!==null,completed_at:s[13],is_current:!0,is_locked:!1,challenges_completed:JSON.parse(s[14])}}async function sD(n){const e=te(),s=e.exec("SELECT 1 FROM territory_progress WHERE territory_id = ?",[n]);s.length&&s[0].values.length||(e.run("INSERT INTO territory_progress (territory_id) VALUES (?)",[n]),await ve())}async function iD(n){const e=te();e.run("UPDATE territory_progress SET is_current = 0"),e.run("UPDATE territory_progress SET is_current = 1 WHERE territory_id = ?",[n]),await ve()}async function aD(n,e){const s=te(),a=s.exec("SELECT challenges_completed FROM territory_progress WHERE territory_id = ?",[n]);if(!a.length||!a[0].values.length)return;const o=JSON.parse(a[0].values[0][0]);o.includes(e)||(o.push(e),s.run("UPDATE territory_progress SET challenges_completed = ? WHERE territory_id = ?",[JSON.stringify(o),n]),await ve())}async function rD(n){te().run("UPDATE territory_progress SET completed_at = datetime('now') WHERE territory_id = ?",[n]),await ve()}function oD(n){return{id:n[0],name:n[1],description:n[2],icon:n[3],unlock_level:n[4],background_color:n[5],position_x:n[6],position_y:n[7],connected_to:n[8],challenges:n[9],rewards:n[10]}}function lD({characterLevel:n,grantXP:e}){const[s,a]=L.useState([]),[o,u]=L.useState(null),[h,g]=L.useState(!0),E=L.useCallback(()=>{a(tD(n)),u(nD()),g(!1)},[n]);L.useEffect(()=>{E()},[E]),L.useEffect(()=>{(async()=>{const V=H1();for(const U of V)U.unlock_level<=n&&(s.find(G=>G.id===U.id)?.discovered||await sD(U.id));E()})()},[n,s,E]);const _=L.useCallback(async X=>{const V=s.find(U=>U.id===X);return!V||V.is_locked||!V.discovered?!1:(await iD(X),E(),!0)},[s,E]),S=L.useCallback(async(X,V)=>{await aD(X,V),E()},[E]),w=L.useCallback(async X=>{const V=s.find(U=>U.id===X);if(!(!V||V.completed)){await rD(X);try{const U=JSON.parse(V.rewards);U.xp&&await e(U.xp,`Completed territory: ${V.name}`,"territory",X)}catch{}E()}},[s,e,E]),x=L.useCallback(()=>s.filter(X=>X.discovered),[s]),B=L.useCallback(()=>s.filter(X=>X.completed),[s]);return{territories:s,currentTerritory:o,loading:h,refresh:E,travelTo:_,completeChallenge:S,completeTerritory:w,getDiscoveredTerritories:x,getCompletedTerritories:B}}function cD(n){const s=te().exec(`
    SELECT id, name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit
    FROM item_definitions WHERE id = ?
  `,[n]);return!s.length||!s[0].values.length?null:mD(s[0].values[0])}function G1(){const e=te().exec(`
    SELECT i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM inventory i
    JOIN item_definitions d ON i.item_id = d.id
    ORDER BY d.type, d.rarity DESC, d.name
  `);return e.length?e[0].values.map(s=>({id:s[0],item_id:s[1],quantity:s[2],acquired_at:s[3],source:s[4],definition:{id:s[5],name:s[6],description:s[7],icon:s[8],type:s[9],slot:s[10],rarity:s[11],stat_effects:s[12],special_effect:s[13],stack_limit:s[14]}})):[]}function X1(){const e=te().exec(`
    SELECT e.id, e.slot, e.inventory_id, e.equipped_at,
           i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM equipped_items e
    JOIN inventory i ON e.inventory_id = i.id
    JOIN item_definitions d ON i.item_id = d.id
  `);return e.length?e[0].values.map(s=>({id:s[0],slot:s[1],inventory_id:s[2],equipped_at:s[3],item:{id:s[4],item_id:s[5],quantity:s[6],acquired_at:s[7],source:s[8],definition:{id:s[9],name:s[10],description:s[11],icon:s[12],type:s[13],slot:s[14],rarity:s[15],stat_effects:s[16],special_effect:s[17],stack_limit:s[18]}}})):[]}async function uD(n,e=1,s="unknown"){const a=te(),o=cD(n);if(!o)throw new Error("Item not found");if(o.stack_limit>1){const h=a.exec("SELECT id, quantity FROM inventory WHERE item_id = ?",[n]);if(h.length&&h[0].values.length){const g=h[0].values[0][0],E=h[0].values[0][1],_=Math.min(E+e,o.stack_limit);return a.run("UPDATE inventory SET quantity = ? WHERE id = ?",[_,g]),await ve(),{id:g,item_id:n,quantity:_,acquired_at:"",source:s}}}a.run("INSERT INTO inventory (item_id, quantity, source) VALUES (?, ?, ?)",[n,e,s]);const u=a.exec("SELECT last_insert_rowid()");return await ve(),{id:u[0].values[0][0],item_id:n,quantity:e,acquired_at:"",source:s}}async function YT(n,e=1){const s=te(),a=s.exec("SELECT quantity FROM inventory WHERE id = ?",[n]);if(!a.length||!a[0].values.length)return;a[0].values[0][0]<=e?s.run("DELETE FROM inventory WHERE id = ?",[n]):s.run("UPDATE inventory SET quantity = quantity - ? WHERE id = ?",[e,n]),await ve()}async function dD(n){const e=te(),s=G1().find(a=>a.id===n);!s||!s.definition.slot||(e.run("DELETE FROM equipped_items WHERE slot = ?",[s.definition.slot]),e.run("INSERT INTO equipped_items (slot, inventory_id) VALUES (?, ?)",[s.definition.slot,n]),await ve())}async function fD(n){te().run("DELETE FROM equipped_items WHERE slot = ?",[n]),await ve()}function hD(){const n=X1(),e={};for(const s of n)try{const a=JSON.parse(s.item.definition.stat_effects);for(const[o,u]of Object.entries(a))typeof u=="number"&&(e[o]=(e[o]||0)+u)}catch{}return e}function mD(n){return{id:n[0],name:n[1],description:n[2],icon:n[3],type:n[4],slot:n[5],rarity:n[6],stat_effects:n[7],special_effect:n[8],stack_limit:n[9]}}function pD({grantXP:n,addEnergy:e,addShields:s}={}){const[a,o]=L.useState([]),[u,h]=L.useState([]),[g,E]=L.useState(!0),_=L.useCallback(()=>{o(G1()),h(X1()),E(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async(G,K=1,oe="reward")=>{await uD(G,K,oe),_()},[_]),w=L.useCallback(async(G,K=1)=>{await YT(G,K),_()},[_]),x=L.useCallback(async G=>{await dD(G),_()},[_]),B=L.useCallback(async G=>{await fD(G),_()},[_]),X=L.useCallback(async G=>{const K=a.find(j=>j.id===G);if(!K||K.definition.type!=="consumable")return!1;const oe=K.definition.special_effect;if(!oe)return!1;const[ye,ge]=oe.split(":"),O=parseInt(ge,10);switch(ye){case"restore_energy":e&&await e(O,`Used ${K.definition.name}`);break;case"grant_xp":n&&await n(O,`Used ${K.definition.name}`,"consumable",G);break;case"add_shield":s&&await s(O);break;default:return!1}return await YT(G,1),_(),!0},[a,n,e,s,_]),V=L.useCallback(()=>hD(),[]),U=L.useCallback(G=>u.find(K=>K.slot===G)||null,[u]),z=L.useCallback(G=>a.filter(K=>K.definition.type===G),[a]);return{inventory:a,equipped:u,loading:g,refresh:_,addItem:S,removeItem:w,equipItem:x,unequipItem:B,useConsumable:X,getStatBonuses:V,getEquipmentBySlot:U,getInventoryByType:z}}const _D="_appShell_w38qa_1",gD="_sidebar_w38qa_13",yD="_sidebarLogo_w38qa_41",ED="_logoTitle_w38qa_51",vD="_logoSubtitle_w38qa_67",TD="_sidebarNav_w38qa_81",bD="_navItem_w38qa_97",SD="_navItemActive_w38qa_147",ND="_navIcon_w38qa_179",wD="_header_w38qa_193",xD="_headerLeft_w38qa_227",AD="_characterName_w38qa_239",RD="_levelBadge_w38qa_253",CD="_headerXP_w38qa_283",ID="_headerEnergy_w38qa_291",kD="_headerRight_w38qa_299",LD="_main_w38qa_313",jD="_xpFloat_w38qa_331",Dn={appShell:_D,sidebar:gD,sidebarLogo:yD,logoTitle:ED,logoSubtitle:vD,sidebarNav:TD,navItem:bD,navItemActive:SD,navIcon:ND,header:wD,headerLeft:xD,characterName:AD,levelBadge:RD,headerXP:CD,headerEnergy:ID,headerRight:kD,main:LD,xpFloat:jD},DD=[{id:"character",label:"Character",icon:""},{id:"quests",label:"Quest Log",icon:""},{id:"buffs",label:"Buffs",icon:""},{id:"focus",label:"Focus Timer",icon:""},{id:"skills",label:"Skills",icon:""},{id:"inventory",label:"Inventory",icon:""}];function OD({activeTab:n,onTabChange:e}){return c.jsxs("aside",{className:Dn.sidebar,children:[c.jsxs("div",{className:Dn.sidebarLogo,children:[c.jsx("div",{className:Dn.logoTitle,children:"GOAL GAME"}),c.jsx("div",{className:Dn.logoSubtitle,children:"Life Management RPG"})]}),c.jsx("nav",{className:Dn.sidebarNav,children:DD.map(s=>c.jsxs("button",{className:`${Dn.navItem} ${n===s.id?Dn.navItemActive:""}`,onClick:()=>e(s.id),children:[c.jsx("span",{className:Dn.navIcon,children:s.icon}),s.label]},s.id))})]})}const MD="_progressContainer_1jr5p_1",UD="_progressLabel_1jr5p_9",VD="_track_1jr5p_33",qD="_fill_1jr5p_53",BD="_fillGold_1jr5p_67",PD="_fillGreen_1jr5p_77",FD="_fillBlue_1jr5p_85",zD="_shimmer_1jr5p_93",HD="_trackLarge_1jr5p_117",Ea={progressContainer:MD,progressLabel:UD,track:VD,fill:qD,fillGold:BD,fillGreen:PD,fillBlue:FD,shimmer:zD,trackLarge:HD};function Oc({value:n,max:e,label:s,showValue:a=!0,color:o="gold",size:u="normal",shimmer:h=!1,className:g}){const E=e>0?Math.min(n/e*100,100):0,_=o==="gold"?Ea.fillGold:o==="green"?Ea.fillGreen:Ea.fillBlue,S=[Ea.track,u==="large"&&Ea.trackLarge].filter(Boolean).join(" ");return c.jsxs("div",{className:`${Ea.progressContainer} ${g||""}`,children:[(s||a)&&c.jsxs("div",{className:Ea.progressLabel,children:[s&&c.jsx("span",{children:s}),a&&c.jsxs("span",{children:[n," / ",e]})]}),c.jsx("div",{className:S,children:c.jsx("div",{className:[_,Ea.fill,h&&Ea.shimmer].filter(Boolean).join(" "),style:{width:`${E}%`}})})]})}const GD="_energyContainer_1u07x_1",XD="_energyBar_1u07x_13",$D="_energyIcon_1u07x_33",YD="_energyTrack_1u07x_41",QD="_energyFill_1u07x_59",KD="_low_1u07x_73",WD="_empty_1u07x_81",JD="_energyText_1u07x_91",ZD="_energyBarCompact_1u07x_125",eO="_energyDebuff_1u07x_175",tO="_exhausted_1u07x_199",nO="_debuffIcon_1u07x_207",sO="_energyTooltip_1u07x_217",iO="_tooltipRow_1u07x_251",aO="_tooltipLabel_1u07x_273",rO="_tooltipValue_1u07x_281",Ft={energyContainer:GD,energyBar:XD,energyIcon:$D,energyTrack:YD,energyFill:QD,low:KD,empty:WD,energyText:JD,energyBarCompact:ZD,energyDebuff:eO,exhausted:tO,debuffIcon:nO,energyTooltip:sO,tooltipRow:iO,tooltipLabel:aO,tooltipValue:rO};function oO({state:n,percentage:e,isLow:s,isEmpty:a,debuffs:o=[],compact:u=!1}){const[h,g]=L.useState(!1),E=n.max_energy+n.bonus_energy,_=u?Ft.energyBarCompact:Ft.energyBar,S=`${Ft.energyFill} ${a?Ft.empty:s?Ft.low:""}`,w=`${Ft.energyText} ${a?Ft.empty:s?Ft.low:""}`;return c.jsxs("div",{className:Ft.energyContainer,children:[c.jsxs("div",{className:_,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{position:"relative"},children:[c.jsx("span",{className:Ft.energyIcon,children:""}),c.jsx("div",{className:Ft.energyTrack,children:c.jsx("div",{className:S,style:{width:`${e}%`}})}),c.jsxs("span",{className:w,children:[n.current_energy,"/",E]}),h&&c.jsxs("div",{className:Ft.energyTooltip,children:[c.jsxs("div",{className:Ft.tooltipRow,children:[c.jsx("span",{className:Ft.tooltipLabel,children:"Current"}),c.jsx("span",{className:Ft.tooltipValue,children:n.current_energy})]}),c.jsxs("div",{className:Ft.tooltipRow,children:[c.jsx("span",{className:Ft.tooltipLabel,children:"Max"}),c.jsx("span",{className:Ft.tooltipValue,children:n.max_energy})]}),n.bonus_energy>0&&c.jsxs("div",{className:Ft.tooltipRow,children:[c.jsx("span",{className:Ft.tooltipLabel,children:"Bonus"}),c.jsxs("span",{className:Ft.tooltipValue,children:["+",n.bonus_energy]})]}),c.jsxs("div",{className:Ft.tooltipRow,children:[c.jsx("span",{className:Ft.tooltipLabel,children:"Regen"}),c.jsxs("span",{className:Ft.tooltipValue,children:[nb,"/hr"]})]})]})]}),o.map((x,B)=>c.jsxs("div",{className:`${Ft.energyDebuff} ${x.name==="Exhausted"?Ft.exhausted:""}`,children:[c.jsx("span",{className:Ft.debuffIcon,children:x.icon}),x.name]},B))]})}function lO({character:n,energyState:e}){const s=yp(n.total_xp),a=e?e.current_energy/(e.max_energy+e.bonus_energy)*100:0,o=e?e.current_energy<=Vm:!1,u=e?e.current_energy<=qm:!1;return c.jsxs("header",{className:Dn.header,children:[c.jsxs("div",{className:Dn.headerLeft,children:[c.jsx("span",{className:Dn.characterName,children:n.name}),c.jsxs("span",{className:Dn.levelBadge,children:["Lv. ",n.level,"  ",n.title]})]}),c.jsxs("div",{className:Dn.headerRight,children:[e&&c.jsx("div",{className:Dn.headerEnergy,children:c.jsx(oO,{state:e,percentage:a,isLow:o,isEmpty:u,compact:!0})}),c.jsx("div",{className:Dn.headerXP,children:c.jsx(Oc,{value:s.current,max:s.needed,label:"XP",shimmer:!0})})]})]})}const cO="_levelUpOverlay_dig0a_1",uO="_levelUpContent_dig0a_23",dO="_levelUpIcon_dig0a_33",fO="_levelUpTitle_dig0a_47",hO="_levelUpLevel_dig0a_65",mO="_levelUpTitleName_dig0a_79",pO="_dismissText_dig0a_95",eo={levelUpOverlay:cO,levelUpContent:uO,levelUpIcon:dO,levelUpTitle:fO,levelUpLevel:hO,levelUpTitleName:mO,dismissText:pO};function _O({level:n,title:e,onDismiss:s}){return L.useEffect(()=>{const a=setTimeout(s,5e3),o=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&s()};return window.addEventListener("keydown",o),()=>{clearTimeout(a),window.removeEventListener("keydown",o)}},[s]),c.jsx("div",{className:eo.levelUpOverlay,onClick:s,children:c.jsxs("div",{className:eo.levelUpContent,children:[c.jsx("span",{className:eo.levelUpIcon,children:""}),c.jsx("div",{className:eo.levelUpTitle,children:"LEVEL UP"}),c.jsxs("div",{className:eo.levelUpLevel,children:["Level ",n]}),c.jsx("div",{className:eo.levelUpTitleName,children:e}),c.jsx("div",{className:eo.dismissText,children:"Click or press any key to continue"})]})})}const gO="_panel_zw35t_1",yO="_panelHeader_zw35t_69",EO="_panelGlow_zw35t_93",Dm={panel:gO,panelHeader:yO,panelGlow:EO};function qt({children:n,header:e,glow:s,className:a,style:o}){const u=[Dm.panel,s&&Dm.panelGlow,a].filter(Boolean).join(" ");return c.jsxs("div",{className:u,style:o,children:[e&&c.jsx("div",{className:Dm.panelHeader,children:e}),n]})}const vO="_button_vi3e3_1",TO="_primary_vi3e3_61",bO="_danger_vi3e3_83",SO="_small_vi3e3_103",NO="_ghost_vi3e3_113",wO="_fullWidth_vi3e3_133",ud={button:vO,primary:TO,danger:bO,small:SO,ghost:NO,fullWidth:wO};function Ve({variant:n="default",size:e="normal",fullWidth:s,children:a,className:o,...u}){const h=[ud.button,n!=="default"&&ud[n],e==="small"&&ud.small,s&&ud.fullWidth,o].filter(Boolean).join(" ");return c.jsx("button",{className:h,...u,children:a})}const xO="_inputGroup_1helv_1",AO="_label_1helv_13",RO="_input_1helv_1",CO="_select_1helv_31",IO="_textarea_1helv_31",wa={inputGroup:xO,label:AO,input:RO,select:CO,textarea:IO};function $i({label:n,className:e,...s}){return c.jsxs("div",{className:wa.inputGroup,children:[n&&c.jsx("label",{className:wa.label,children:n}),c.jsx("input",{className:`${wa.input} ${e||""}`,...s})]})}function Sa({label:n,children:e,className:s,...a}){return c.jsxs("div",{className:wa.inputGroup,children:[n&&c.jsx("label",{className:wa.label,children:n}),c.jsx("select",{className:`${wa.select} ${s||""}`,...a,children:e})]})}function Ud({label:n,className:e,...s}){return c.jsxs("div",{className:wa.inputGroup,children:[n&&c.jsx("label",{className:wa.label,children:n}),c.jsx("textarea",{className:`${wa.textarea} ${e||""}`,...s})]})}const kO=[{minLevel:50,tier:7},{minLevel:40,tier:6},{minLevel:30,tier:5},{minLevel:22,tier:4},{minLevel:15,tier:3},{minLevel:10,tier:2},{minLevel:5,tier:1},{minLevel:1,tier:0}];function LO(n){for(const{minLevel:e,tier:s}of kO)if(n>=e)return s;return 0}function wc(n){if(n<5)return 0;const a=(n-5)/25;return Math.min(Math.pow(a,.7),1)}const xc={stamina:"#2ecc71",willpower:"#9b59b6",health:"#e74c3c",focus:"#3498db",charisma:"#e67e22"},$1={0:{primary:"#8b7355",secondary:"#6b5344",accent:"#a08060",skin:"#e8c4a0",hair:"#4a3728"},1:{primary:"#8b4513",secondary:"#654321",accent:"#cd853f",skin:"#e8c4a0",hair:"#4a3728"},2:{primary:"#708090",secondary:"#4a5568",accent:"#a0aec0",skin:"#e8c4a0",hair:"#4a3728"},3:{primary:"#5a6672",secondary:"#3d4852",accent:"#8892a0",skin:"#e8c4a0",hair:"#4a3728"},4:{primary:"#b8860b",secondary:"#8b6914",accent:"#daa520",skin:"#e8c4a0",hair:"#4a3728"},5:{primary:"#ffd700",secondary:"#b8860b",accent:"#ffed4a",skin:"#e8c4a0",hair:"#4a3728",glow:"#ffd700"},6:{primary:"#e6e6fa",secondary:"#9370db",accent:"#dda0dd",skin:"#e8c4a0",hair:"#4a3728",glow:"#9370db"},7:{primary:"#8b0000",secondary:"#4a0000",accent:"#ff4500",skin:"#e8c4a0",hair:"#ffd700",glow:"#ff4500",crown:"#ffd700"}},Il=64;function Ta(n,e,s,a,o=1){n.fillStyle=a,n.fillRect(e,s,o,o)}function Ot(n,e,s,a,o,u){n.fillStyle=u,n.fillRect(e,s,a,o)}function jO({ctx:n,palette:e}){Ot(n,27,7,10,4,e.hair),Ot(n,28,8,8,8,e.skin),Ot(n,28,7,8,2,e.hair),Ta(n,30,11,"#2c3e50"),Ta(n,33,11,"#2c3e50")}function DO({ctx:n,palette:e,tier:s}){Ot(n,26,16,12,16,e.primary),Ot(n,31,18,2,12,e.secondary),s>=2&&(Ot(n,24,16,3,4,e.accent),Ot(n,37,16,3,4,e.accent)),s>=1&&(Ot(n,26,28,12,2,e.secondary),Ta(n,31,28,e.accent,2)),s>=3&&(Ot(n,28,18,8,6,e.accent),Ot(n,30,19,4,4,e.secondary))}function OO({ctx:n,palette:e,tier:s}){Ot(n,22,18,4,12,e.primary),Ot(n,22,30,4,3,e.skin),Ot(n,38,18,4,12,e.primary),Ot(n,38,30,4,3,e.skin),s>=2&&(Ot(n,22,18,4,3,e.accent),Ot(n,38,18,4,3,e.accent)),s>=4&&(Ot(n,21,28,5,5,e.accent),Ot(n,38,28,5,5,e.accent))}function MO({ctx:n,palette:e,tier:s}){Ot(n,27,32,5,14,s>=3?e.secondary:e.primary),Ot(n,26,46,6,4,e.secondary),Ot(n,32,32,5,14,s>=3?e.secondary:e.primary),Ot(n,32,46,6,4,e.secondary),s>=2&&(Ot(n,26,46,6,2,e.accent),Ot(n,32,46,6,2,e.accent))}function UO({ctx:n,palette:e,tier:s}){if(s<3)return;const o={3:"#8b0000",4:"#4a0082",5:"#1a1a2e",6:"#4a0082",7:"#8b0000"}[s]||e.secondary;n.fillStyle=o,n.beginPath(),n.moveTo(24,16),n.lineTo(40,16),n.lineTo(42,48),n.lineTo(22,48),n.closePath(),n.fill(),n.fillStyle=e.accent,n.fillRect(22,16,2,32),n.fillRect(40,16,2,32)}function VO({ctx:n,palette:e,tier:s}){if(s<2)return;const a=28,o=8;s===2?Ot(n,a-1,o-2,10,3,e.secondary):s>=3&&s<7&&(Ot(n,a-2,o-3,12,5,e.accent),Ot(n,a,o+2,8,2,"#1a1a2e"),s>=4&&Ot(n,a+3,o-6,2,4,"#e74c3c"))}function qO({ctx:n,palette:e}){const s="crown"in e?e.crown:"#ffd700",a=28,o=8;Ot(n,a-2,o-4,12,3,s),Ta(n,a-1,o-6,s,2),Ta(n,a+3,o-7,s,2),Ta(n,a+7,o-6,s,2),Ta(n,a,o-5,"#e74c3c"),Ta(n,a+4,o-6,"#3498db"),Ta(n,a+8,o-5,"#2ecc71")}function BO({ctx:n}){const e="#8b0000",s="#ff4500";n.fillStyle=e,n.beginPath(),n.moveTo(22,20),n.lineTo(8,10),n.lineTo(6,16),n.lineTo(10,24),n.lineTo(14,32),n.lineTo(20,36),n.lineTo(22,28),n.closePath(),n.fill(),n.fillStyle=s,n.beginPath(),n.moveTo(20,22),n.lineTo(12,14),n.lineTo(12,20),n.lineTo(16,28),n.closePath(),n.fill(),n.fillStyle=e,n.beginPath(),n.moveTo(42,20),n.lineTo(56,10),n.lineTo(58,16),n.lineTo(54,24),n.lineTo(50,32),n.lineTo(44,36),n.lineTo(42,28),n.closePath(),n.fill(),n.fillStyle=s,n.beginPath(),n.moveTo(44,22),n.lineTo(52,14),n.lineTo(52,20),n.lineTo(48,28),n.closePath(),n.fill()}function PO(n,e){if(e<5)return;const s=$1[e],a="glow"in s?s.glow:"#ffd700",o=n.createRadialGradient(32,32,10,32,32,40);o.addColorStop(0,`${a}40`),o.addColorStop(.5,`${a}20`),o.addColorStop(1,`${a}00`),n.fillStyle=o,n.fillRect(0,0,Il,Il)}function FO(n,e){const s=Math.max(0,Math.min(7,e)),a=$1[s];n.clearRect(0,0,Il,Il),n.imageSmoothingEnabled=!1;const o={ctx:n,palette:a,tier:s};PO(n,s),s>=7&&BO(o),s>=3&&UO(o),MO(o),DO(o),OO(o),jO(o),s>=7?qO(o):s>=2&&VO(o)}const zO="_spriteContainer_1ozus_3",HO="_spriteCanvas_1ozus_25",GO="_auraStamina_1ozus_79",XO="_auraWillpower_1ozus_81",$O="_auraHealth_1ozus_83",YO="_auraFocus_1ozus_85",QO="_auraCharisma_1ozus_87",KO="_auraLayer_1ozus_99",WO="_small_1ozus_417",JO="_large_1ozus_489",As={spriteContainer:zO,spriteCanvas:HO,auraStamina:GO,auraWillpower:XO,auraHealth:$O,auraFocus:YO,auraCharisma:QO,auraLayer:KO,small:WO,large:JO};function Y1({level:n,stats:e,size:s="medium"}){const a=L.useRef(null),o=LO(n);L.useEffect(()=>{const E=a.current;if(!E)return;const _=E.getContext("2d");_&&FO(_,o)},[o]);const u={stamina:wc(e.stamina),willpower:wc(e.willpower),health:wc(e.health),focus:wc(e.focus),charisma:wc(e.charisma)},h={"--aura-stamina-intensity":u.stamina,"--aura-stamina-color":xc.stamina,"--aura-willpower-intensity":u.willpower,"--aura-willpower-color":xc.willpower,"--aura-health-intensity":u.health,"--aura-health-color":xc.health,"--aura-focus-intensity":u.focus,"--aura-focus-color":xc.focus,"--aura-charisma-intensity":u.charisma,"--aura-charisma-color":xc.charisma},g=s==="small"?As.small:s==="large"?As.large:"";return c.jsxs("div",{className:`${As.spriteContainer} ${g}`,style:h,children:[u.stamina>0&&c.jsx("div",{className:`${As.auraLayer} ${As.auraStamina}`}),u.willpower>0&&c.jsx("div",{className:`${As.auraLayer} ${As.auraWillpower}`}),u.health>0&&c.jsx("div",{className:`${As.auraLayer} ${As.auraHealth}`}),u.focus>0&&c.jsx("div",{className:`${As.auraLayer} ${As.auraFocus}`}),u.charisma>0&&c.jsx("div",{className:`${As.auraLayer} ${As.auraCharisma}`}),c.jsx("canvas",{ref:a,width:Il,height:Il,className:As.spriteCanvas})]})}const ZO="_characterGrid_1frbt_1",e3="_characterMain_1frbt_13",t3="_characterSide_1frbt_25",n3="_profileSection_1frbt_37",s3="_characterNameDisplay_1frbt_61",i3="_characterTitleDisplay_1frbt_75",a3="_xpSection_1frbt_89",r3="_totalXP_1frbt_97",o3="_statsGrid_1frbt_113",l3="_statRow_1frbt_125",c3="_statName_1frbt_137",u3="_statBar_1frbt_157",d3="_statValue_1frbt_165",f3="_buffsList_1frbt_185",h3="_activeBuff_1frbt_197",m3="_buffType_1frbt_219",p3="_debuffType_1frbt_229",_3="_buffIcon_1frbt_239",g3="_buffInfo_1frbt_247",y3="_buffName_1frbt_255",E3="_buffTimer_1frbt_265",v3="_emptyState_1frbt_275",T3="_nameEditRow_1frbt_291",b3="_xpLogList_1frbt_307",S3="_xpLogEntry_1frbt_323",N3="_xpLogReason_1frbt_343",w3="_xpLogAmount_1frbt_351",x3="_negative_1frbt_363",A3="_compactScreen_1frbt_385",R3="_compactStats_1frbt_397",C3="_compactStatsTitle_1frbt_409",I3="_compactStatsGrid_1frbt_425",k3="_compactStatItem_1frbt_437",L3="_compactStatName_1frbt_449",j3="_compactStatValue_1frbt_471",D3="_compactBuffs_1frbt_487",O3="_compactBuffsTitle_1frbt_497",M3="_compactBuffsList_1frbt_515",U3="_compactBuff_1frbt_487",V3="_compactBuffIcon_1frbt_555",q3="_compactBuffName_1frbt_563",B3="_compactBuffTimer_1frbt_575",P3="_compactXpLog_1frbt_585",F3="_compactXpEntry_1frbt_609",z3="_positive_1frbt_641",Qe={characterGrid:ZO,characterMain:e3,characterSide:t3,profileSection:n3,characterNameDisplay:s3,characterTitleDisplay:i3,xpSection:a3,totalXP:r3,statsGrid:o3,statRow:l3,statName:c3,statBar:u3,statValue:d3,buffsList:f3,activeBuff:h3,buffType:m3,debuffType:p3,buffIcon:_3,buffInfo:g3,buffName:y3,buffTimer:E3,emptyState:v3,nameEditRow:T3,xpLogList:b3,xpLogEntry:S3,xpLogReason:N3,xpLogAmount:w3,negative:x3,compactScreen:A3,compactStats:R3,compactStatsTitle:C3,compactStatsGrid:I3,compactStatItem:k3,compactStatName:L3,compactStatValue:j3,compactBuffs:D3,compactBuffsTitle:O3,compactBuffsList:M3,compactBuff:U3,compactBuffIcon:V3,compactBuffName:q3,compactBuffTimer:B3,compactXpLog:P3,compactXpEntry:F3,positive:z3},QT={stamina:"green",willpower:"blue",health:"gold",focus:"blue",charisma:"gold"};function H3({character:n,stats:e,activeBuffs:s,xpLog:a,onNameChange:o,compact:u=!1}){const h=yp(n.total_xp),[g,E]=L.useState(!1),[_,S]=L.useState(n.name),[w,x]=L.useState(!1),B=()=>{_.trim()&&(o(_.trim()),E(!1))};function X(V){const U=new Date,G=new Date(V+"Z").getTime()-U.getTime();if(G<=0)return"Expired";const K=Math.floor(G/36e5),oe=Math.floor(G%36e5/6e4);return K>0?`${K}h ${oe}m remaining`:`${oe}m remaining`}return u?c.jsxs("div",{className:Qe.compactScreen,children:[c.jsxs("div",{className:Qe.compactStats,children:[c.jsx("div",{className:Qe.compactStatsTitle,children:"Stats"}),c.jsx("div",{className:Qe.compactStatsGrid,children:Bm.map(V=>c.jsxs("div",{className:Qe.compactStatItem,children:[c.jsx("span",{className:Qe.compactStatName,children:V}),c.jsx(Oc,{value:e[V],max:30,showValue:!1,color:QT[V]||"gold"}),c.jsx("span",{className:Qe.compactStatValue,children:e[V]})]},V))})]}),s.length>0&&c.jsxs("div",{className:Qe.compactBuffs,children:[c.jsxs("div",{className:Qe.compactBuffsTitle,children:["Active Effects (",s.length,")"]}),c.jsx("div",{className:Qe.compactBuffsList,children:s.map(V=>{const U=Mc(V.stat_effects);return Object.entries(U).map(([z,G])=>`${G>0?"+":""}${G} ${z}`).join(", "),c.jsxs("div",{className:`${Qe.compactBuff} ${V.type==="buff"?Qe.buffType:Qe.debuffType}`,children:[c.jsx("span",{className:Qe.compactBuffIcon,children:V.icon}),c.jsx("span",{className:Qe.compactBuffName,children:V.name}),c.jsx("span",{className:Qe.compactBuffTimer,children:X(V.expires_at)})]},V.id)})})]}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>x(!w),style:{marginTop:12},children:w?"Hide XP History":"Show XP History"}),w&&a.length>0&&c.jsx("div",{className:Qe.compactXpLog,children:a.slice(0,10).map(V=>c.jsxs("div",{className:Qe.compactXpEntry,children:[c.jsx("span",{children:V.reason}),c.jsxs("span",{className:V.amount>0?Qe.positive:Qe.negative,children:[V.amount>0?"+":"",V.amount," XP"]})]},V.id))})]}):c.jsxs("div",{className:Qe.characterGrid,children:[c.jsxs("div",{className:Qe.characterMain,children:[c.jsx(qt,{children:c.jsxs("div",{className:Qe.profileSection,children:[c.jsx(Y1,{level:n.level,stats:e}),g?c.jsxs("div",{className:Qe.nameEditRow,children:[c.jsx($i,{value:_,onChange:V=>S(V.target.value),onKeyDown:V=>V.key==="Enter"&&B(),autoFocus:!0}),c.jsx(Ve,{size:"small",variant:"primary",onClick:B,children:"Save"}),c.jsx(Ve,{size:"small",onClick:()=>E(!1),children:"Cancel"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:Qe.characterNameDisplay,children:n.name}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>E(!0),children:"Rename"})]}),c.jsxs("div",{className:Qe.characterTitleDisplay,children:["Level ",n.level,"  ",n.title]}),c.jsxs("div",{className:Qe.xpSection,children:[c.jsx(Oc,{value:h.current,max:h.needed,label:"Experience",size:"large",shimmer:!0}),c.jsxs("div",{className:Qe.totalXP,children:[n.total_xp," Total XP"]})]})]})}),c.jsx(qt,{header:"Stats",children:c.jsx("div",{className:Qe.statsGrid,children:Bm.map(V=>c.jsxs("div",{className:Qe.statRow,children:[c.jsx("span",{className:Qe.statName,children:V}),c.jsx("div",{className:Qe.statBar,children:c.jsx(Oc,{value:e[V],max:30,showValue:!1,color:QT[V]||"gold"})}),c.jsx("span",{className:Qe.statValue,children:e[V]})]},V))})})]}),c.jsxs("div",{className:Qe.characterSide,children:[c.jsx(qt,{header:"Active Effects",children:s.length===0?c.jsx("div",{className:Qe.emptyState,children:"No active buffs or debuffs"}):c.jsx("div",{className:Qe.buffsList,children:s.map(V=>{const U=Mc(V.stat_effects),z=Object.entries(U).map(([G,K])=>`${K>0?"+":""}${K} ${G}`).join(", ");return c.jsxs("div",{className:`${Qe.activeBuff} ${V.type==="buff"?Qe.buffType:Qe.debuffType}`,children:[c.jsx("span",{className:Qe.buffIcon,children:V.icon}),c.jsxs("div",{className:Qe.buffInfo,children:[c.jsx("div",{className:Qe.buffName,children:V.name}),c.jsxs("div",{className:Qe.buffTimer,children:[X(V.expires_at),z&&`  ${z}`]})]})]},V.id)})})}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>x(!w),style:{width:"100%",marginTop:8},children:w?"Hide XP History":"Show XP History"}),w&&c.jsx(qt,{header:"XP History",style:{marginTop:8},children:a.length===0?c.jsx("div",{className:Qe.emptyState,children:"No XP earned yet. Complete steps to earn XP!"}):c.jsx("div",{className:Qe.xpLogList,children:a.slice(0,20).map(V=>c.jsxs("div",{className:Qe.xpLogEntry,children:[c.jsx("span",{className:Qe.xpLogReason,children:V.reason}),c.jsxs("span",{className:`${Qe.xpLogAmount} ${V.amount<0?Qe.negative:""}`,children:[V.amount>0?"+":"",V.amount," XP"]})]},V.id))})})]})]})}const G3="_header_1ln45_1",X3="_spriteContainer_1ln45_23",$3="_info_1ln45_31",Y3="_nameRow_1ln45_41",Q3="_name_1ln45_41",K3="_level_1ln45_71",W3="_title_1ln45_91",J3="_xpRow_1ln45_103",Z3="_xpText_1ln45_125",e4="_quickStats_1ln45_137",t4="_quickStat_1ln45_137",n4="_statIcon_1ln45_169",s4="_statValue_1ln45_177",Hs={header:G3,spriteContainer:X3,info:$3,nameRow:Y3,name:Q3,level:K3,title:W3,xpRow:J3,xpText:Z3,quickStats:e4,quickStat:t4,statIcon:n4,statValue:s4};function i4({character:n,stats:e}){const s=yp(n.total_xp);return c.jsxs("div",{className:Hs.header,children:[c.jsx("div",{className:Hs.spriteContainer,children:c.jsx(Y1,{level:n.level,stats:e,size:"small"})}),c.jsxs("div",{className:Hs.info,children:[c.jsxs("div",{className:Hs.nameRow,children:[c.jsx("span",{className:Hs.name,children:n.name}),c.jsxs("span",{className:Hs.level,children:["Lv. ",n.level]}),c.jsx("span",{className:Hs.title,children:n.title})]}),c.jsxs("div",{className:Hs.xpRow,children:[c.jsx(Oc,{value:s.current,max:s.needed,showValue:!1,shimmer:!0}),c.jsxs("span",{className:Hs.xpText,children:[s.current," / ",s.needed," XP"]})]})]}),c.jsx("div",{className:Hs.quickStats,children:Object.entries(e).slice(0,5).map(([a,o])=>c.jsxs("div",{className:Hs.quickStat,children:[c.jsx("span",{className:Hs.statIcon,children:a4(a)}),c.jsx("span",{className:Hs.statValue,children:o})]},a))})]})}function a4(n){return{stamina:"",willpower:"",health:"",focus:"",charisma:""}[n]||""}const r4="_section_1hgtf_1",o4="_expanded_1hgtf_27",l4="_header_1hgtf_35",c4="_headerLeft_1hgtf_73",u4="_icon_1hgtf_85",d4="_title_1hgtf_93",f4="_badge_1hgtf_107",h4="_gold_1hgtf_123",m4="_green_1hgtf_133",p4="_red_1hgtf_143",_4="_blue_1hgtf_153",g4="_headerContent_1hgtf_163",y4="_chevron_1hgtf_179",E4="_chevronUp_1hgtf_191",v4="_content_1hgtf_199",T4="_contentInner_1hgtf_219",b4="_miniProgress_1hgtf_239",S4="_miniProgressFill_1hgtf_255",Gs={section:r4,expanded:o4,header:l4,headerLeft:c4,icon:u4,title:d4,badge:f4,gold:h4,green:m4,red:p4,blue:_4,headerContent:g4,chevron:y4,chevronUp:E4,content:v4,contentInner:T4,miniProgress:b4,miniProgressFill:S4};function ol({title:n,badge:e,badgeColor:s="gold",icon:a,defaultExpanded:o=!1,children:u,headerContent:h}){const[g,E]=L.useState(o);return c.jsxs("div",{className:`${Gs.section} ${g?Gs.expanded:""}`,children:[c.jsxs("button",{className:Gs.header,onClick:()=>E(!g),"aria-expanded":g,children:[c.jsxs("div",{className:Gs.headerLeft,children:[a&&c.jsx("span",{className:Gs.icon,children:a}),c.jsx("span",{className:Gs.title,children:n}),e!==void 0&&c.jsx("span",{className:`${Gs.badge} ${Gs[s]}`,children:e})]}),h&&c.jsx("div",{className:Gs.headerContent,children:h}),c.jsx("span",{className:`${Gs.chevron} ${g?Gs.chevronUp:""}`,children:""})]}),c.jsx("div",{className:Gs.content,children:c.jsx("div",{className:Gs.contentInner,children:u})})]})}const N4="_overlay_15bjw_1",w4="_modal_15bjw_25",x4="_modalHeader_15bjw_97",A4="_modalTitle_15bjw_111",R4="_closeButton_15bjw_123",C4="_modalActions_15bjw_153",ll={overlay:N4,modal:w4,modalHeader:x4,modalTitle:A4,closeButton:R4,modalActions:C4};function kl({open:n,onClose:e,title:s,children:a,actions:o}){return L.useEffect(()=>{if(!n)return;const u=h=>{h.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),n?c.jsx("div",{className:ll.overlay,onClick:e,children:c.jsxs("div",{className:ll.modal,onClick:u=>u.stopPropagation(),children:[s&&c.jsxs("div",{className:ll.modalHeader,children:[c.jsx("h3",{className:ll.modalTitle,children:s}),c.jsx("button",{className:ll.closeButton,onClick:e,children:""})]}),a,o&&c.jsx("div",{className:ll.modalActions,children:o})]})}):null}const I4="_checkbox_543u2_1",k4="_box_543u2_17",L4="_checked_543u2_53",j4="_checkmark_543u2_63",D4="_checkboxLabel_543u2_75",O4="_hidden_543u2_99",cl={checkbox:I4,box:k4,checked:L4,checkmark:j4,checkboxLabel:D4,hidden:O4};function M4({checked:n,onChange:e,label:s,className:a}){const o=[cl.checkbox,n&&cl.checked,a].filter(Boolean).join(" ");return c.jsxs("label",{className:o,onClick:u=>u.stopPropagation(),children:[c.jsx("input",{type:"checkbox",className:cl.hidden,checked:n,onChange:u=>e(u.target.checked)}),c.jsx("span",{className:cl.box,children:n&&c.jsx("span",{className:cl.checkmark,children:""})}),s&&c.jsx("span",{className:cl.checkboxLabel,children:s})]})}const U4="_questLog_15h7c_1",V4="_questToolbar_15h7c_13",q4="_questFilters_15h7c_27",B4="_goalsContainer_15h7c_41",P4="_goalCard_15h7c_55",F4="_goalCompleted_15h7c_79",z4="_goalTitle_15h7c_87",H4="_goalHeader_15h7c_97",G4="_goalDomainIcon_15h7c_125",X4="_goalInfo_15h7c_135",$4="_goalStats_15h7c_165",Y4="_goalStatItem_15h7c_177",Q4="_missed_15h7c_187",K4="_goalProgress_15h7c_195",W4="_goalProgressBar_15h7c_209",J4="_goalProgressFill_15h7c_225",Z4="_goalProgressText_15h7c_239",e5="_goalActions_15h7c_255",t5="_goalContent_15h7c_267",n5="_questsGrid_15h7c_277",s5="_emptyStateSmall_15h7c_289",i5="_questCard_15h7c_305",a5="_questCardCompact_15h7c_329",r5="_questCardHeader_15h7c_337",o5="_questHeaderContent_15h7c_363",l5="_questPriority_15h7c_373",c5="_normal_15h7c_387",u5="_important_15h7c_389",d5="_legendary_15h7c_391",f5="_questTitle_15h7c_395",h5="_questCompleted_15h7c_421",m5="_questProgressInline_15h7c_431",p5="_questProgressBarSmall_15h7c_445",_5="_questProgressFillSmall_15h7c_463",g5="_questProgressTextSmall_15h7c_475",y5="_missedCount_15h7c_485",E5="_questMeta_15h7c_493",v5="_questStepCount_15h7c_509",T5="_questActions_15h7c_525",b5="_expandIcon_15h7c_537",S5="_expanded_15h7c_551",N5="_stepsSection_15h7c_561",w5="_stepsList_15h7c_579",x5="_stepItem_15h7c_593",A5="_stepItemCompact_15h7c_611",R5="_stepPriorityDot_15h7c_627",C5="_stepActions_15h7c_641",I5="_addStepRow_15h7c_651",k5="_addStepRowCompact_15h7c_663",L5="_addStepInput_15h7c_671",j5="_stepMissed_15h7c_681",D5="_missedLabel_15h7c_691",O5="_missedIcon_15h7c_709",M5="_missedText_15h7c_721",U5="_missBtn_15h7c_733",V5="_formGrid_15h7c_751",q5="_formRow_15h7c_763",B5="_emptyState_15h7c_289",qe={questLog:U4,questToolbar:V4,questFilters:q4,goalsContainer:B4,goalCard:P4,goalCompleted:F4,goalTitle:z4,goalHeader:H4,goalDomainIcon:G4,goalInfo:X4,goalStats:$4,goalStatItem:Y4,missed:Q4,goalProgress:K4,goalProgressBar:W4,goalProgressFill:J4,goalProgressText:Z4,goalActions:e5,goalContent:t5,questsGrid:n5,emptyStateSmall:s5,questCard:i5,questCardCompact:a5,questCardHeader:r5,questHeaderContent:o5,questPriority:l5,normal:c5,important:u5,legendary:d5,questTitle:f5,questCompleted:h5,questProgressInline:m5,questProgressBarSmall:p5,questProgressFillSmall:_5,questProgressTextSmall:g5,missedCount:y5,questMeta:E5,questStepCount:v5,questActions:T5,expandIcon:b5,expanded:S5,stepsSection:N5,stepsList:w5,stepItem:x5,stepItemCompact:A5,stepPriorityDot:R5,stepActions:C5,addStepRow:I5,addStepRowCompact:k5,addStepInput:L5,stepMissed:j5,missedLabel:D5,missedIcon:O5,missedText:M5,missBtn:U5,formGrid:V5,formRow:q5,emptyState:B5};function P5({quest:n,compact:e=!1,onCreateStep:s,onCompleteStep:a,onUncompleteStep:o,onMissStep:u,onUnmissStep:h,onDeleteStep:g,onDeleteQuest:E}){const[_,S]=L.useState(!1),[w,x]=L.useState(""),[B,X]=L.useState("normal"),V=n.steps.filter(ge=>ge.status==="completed").length,U=n.steps.filter(ge=>ge.status==="missed").length,z=n.steps.length,G=n.status==="completed",K=z>0?Math.round(V/z*100):0,oe=()=>{w.trim()&&(s(n.id,w.trim(),B),x(""),X("normal"))},ye=ge=>ge==="legendary"?"var(--priority-legendary)":ge==="important"?"var(--priority-important)":"var(--priority-normal)";return c.jsxs("div",{className:`${qe.questCard} ${G?qe.questCompleted:""} ${e?qe.questCardCompact:""}`,children:[c.jsxs("div",{className:qe.questCardHeader,onClick:()=>S(!_),children:[c.jsx("div",{className:`${qe.questPriority} ${qe[n.priority]}`}),c.jsxs("div",{className:qe.questHeaderContent,children:[c.jsx("span",{className:qe.questTitle,children:n.title}),e&&c.jsxs("div",{className:qe.questProgressInline,children:[c.jsx("div",{className:qe.questProgressBarSmall,children:c.jsx("div",{className:qe.questProgressFillSmall,style:{width:`${K}%`}})}),c.jsxs("span",{className:qe.questProgressTextSmall,children:[V,"/",z,U>0&&c.jsxs("span",{className:qe.missedCount,children:[" (",U," )"]})]})]})]}),!e&&c.jsx("span",{className:qe.questMeta,children:c.jsxs("span",{className:qe.questStepCount,children:[V,"/",z]})}),c.jsx("div",{className:qe.questActions,onClick:ge=>ge.stopPropagation(),children:c.jsx(Ve,{size:"small",variant:"danger",onClick:()=>E(n.id),children:""})}),c.jsx("span",{className:`${qe.expandIcon} ${_?qe.expanded:""}`,children:""})]}),_&&c.jsxs("div",{className:qe.stepsSection,children:[c.jsx("div",{className:qe.stepsList,children:n.steps.map(ge=>{const O=ge.status==="missed",j=ge.status==="completed",M=ge.status==="pending";return c.jsxs("div",{className:`${qe.stepItem} ${O?qe.stepMissed:""} ${e?qe.stepItemCompact:""}`,children:[c.jsx("div",{className:qe.stepPriorityDot,style:{background:ye(ge.priority)}}),O?c.jsxs("span",{className:qe.missedLabel,onClick:()=>h(ge.id),children:[c.jsx("span",{className:qe.missedIcon,children:""}),c.jsx("span",{className:qe.missedText,children:ge.title})]}):c.jsx(M4,{checked:j,onChange:q=>{q?a(ge.id,n.id,ge.priority):o(ge.id)},label:ge.title}),c.jsxs("div",{className:qe.stepActions,children:[M&&c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>u(ge.id),title:"Mark as missed",className:qe.missBtn,children:""}),c.jsx(Ve,{size:"small",variant:"danger",onClick:()=>g(ge.id),children:""})]})]},ge.id)})}),!G&&c.jsxs("div",{className:`${qe.addStepRow} ${e?qe.addStepRowCompact:""}`,children:[c.jsx("div",{className:qe.addStepInput,children:c.jsx($i,{value:w,onChange:ge=>x(ge.target.value),placeholder:"Add a step...",onKeyDown:ge=>ge.key==="Enter"&&oe()})}),!e&&c.jsxs(Sa,{value:B,onChange:ge=>X(ge.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important"}),c.jsx("option",{value:"legendary",children:"Legendary"})]}),c.jsx(Ve,{variant:"primary",onClick:oe,children:"+"})]})]})]})}function F5({goals:n,domains:e,filterDomain:s,filterStatus:a,onFilterDomain:o,onFilterStatus:u,onCreateGoal:h,onCreateQuest:g,onCreateStep:E,onCompleteStep:_,onUncompleteStep:S,onMissStep:w,onUnmissStep:x,onDeleteStep:B,onDeleteQuest:X,onDeleteGoal:V}){const[U,z]=L.useState(!1),[G,K]=L.useState(null),[oe,ye]=L.useState(""),[ge,O]=L.useState(""),[j,M]=L.useState(1),[q,R]=L.useState(""),[D,k]=L.useState(""),[we,Je]=L.useState("normal"),[se,Te]=L.useState(()=>{const ae=new Set;return n.forEach(Ee=>{Ee.status!=="completed"&&ae.add(Ee.id)}),ae});L.useEffect(()=>{Te(ae=>{const Ee=new Set(ae);return n.forEach(ie=>{ie.status!=="completed"&&!ae.has(ie.id)&&Ee.add(ie.id)}),Ee})},[n]);const Re=ae=>{Te(Ee=>{const ie=new Set(Ee);return ie.has(ae)?ie.delete(ae):ie.add(ae),ie})},rt=()=>{oe.trim()&&(h(j,oe.trim(),ge.trim()),ye(""),O(""),z(!1))},at=()=>{!q.trim()||G===null||(g(G,q.trim(),D.trim(),we),R(""),k(""),Je("normal"),K(null))},H=ae=>{const Ee=ae.quests.length,ie=ae.quests.filter(on=>on.status==="completed").length,xe=ae.quests.reduce((on,ps)=>on+ps.steps.length,0),Pe=ae.quests.reduce((on,ps)=>on+ps.steps.filter(hn=>hn.status==="completed").length,0),wt=ae.quests.reduce((on,ps)=>on+ps.steps.filter(hn=>hn.status==="missed").length,0),yt=xe>0?Math.round(Pe/xe*100):0;return{totalQuests:Ee,completedQuests:ie,totalSteps:xe,completedSteps:Pe,missedSteps:wt,progressPercent:yt}},de=L.useMemo(()=>[...n].sort((ae,Ee)=>ae.status==="completed"&&Ee.status!=="completed"?1:ae.status!=="completed"&&Ee.status==="completed"?-1:0),[n]);return c.jsxs("div",{className:qe.questLog,children:[c.jsxs("div",{className:qe.questToolbar,children:[c.jsxs("div",{className:qe.questFilters,children:[c.jsxs(Sa,{value:s??"",onChange:ae=>o(ae.target.value?Number(ae.target.value):void 0),children:[c.jsx("option",{value:"",children:"All Domains"}),e.map(ae=>c.jsxs("option",{value:ae.id,children:[ae.icon," ",ae.name]},ae.id))]}),c.jsxs(Sa,{value:a??"",onChange:ae=>u(ae.target.value||void 0),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]})]}),c.jsx(Ve,{variant:"primary",onClick:()=>z(!0),children:"+ New Goal"})]}),n.length===0?c.jsx(qt,{children:c.jsx("div",{className:qe.emptyState,children:"No goals yet. Create your first goal to begin your adventure!"})}):c.jsx("div",{className:qe.goalsContainer,children:de.map(ae=>{const Ee=H(ae),ie=se.has(ae.id),xe=ae.status==="completed";return c.jsxs("div",{className:`${qe.goalCard} ${xe?qe.goalCompleted:""}`,children:[c.jsxs("div",{className:qe.goalHeader,onClick:()=>Re(ae.id),children:[c.jsx("span",{className:`${qe.expandIcon} ${ie?qe.expanded:""}`,children:""}),c.jsx("span",{className:qe.goalDomainIcon,children:ae.domain_icon}),c.jsxs("div",{className:qe.goalInfo,children:[c.jsx("span",{className:qe.goalTitle,children:ae.title}),c.jsxs("div",{className:qe.goalStats,children:[c.jsxs("span",{className:qe.goalStatItem,children:[Ee.completedQuests,"/",Ee.totalQuests," quests"]}),c.jsxs("span",{className:qe.goalStatItem,children:[Ee.completedSteps,"/",Ee.totalSteps," steps"]}),Ee.missedSteps>0&&c.jsxs("span",{className:`${qe.goalStatItem} ${qe.missed}`,children:[Ee.missedSteps," missed"]})]})]}),c.jsxs("div",{className:qe.goalProgress,children:[c.jsx("div",{className:qe.goalProgressBar,children:c.jsx("div",{className:qe.goalProgressFill,style:{width:`${Ee.progressPercent}%`}})}),c.jsxs("span",{className:qe.goalProgressText,children:[Ee.progressPercent,"%"]})]}),c.jsxs("div",{className:qe.goalActions,onClick:Pe=>Pe.stopPropagation(),children:[c.jsx(Ve,{size:"small",variant:"primary",onClick:()=>K(ae.id),children:"+"}),c.jsx(Ve,{size:"small",variant:"danger",onClick:()=>V(ae.id),children:""})]})]}),ie&&c.jsx("div",{className:qe.goalContent,children:ae.quests.length===0?c.jsx("div",{className:qe.emptyStateSmall,children:"No quests yet. Click + to add one."}):c.jsx("div",{className:qe.questsGrid,children:ae.quests.map(Pe=>c.jsx(P5,{quest:Pe,compact:!0,onCreateStep:E,onCompleteStep:_,onUncompleteStep:S,onMissStep:w,onUnmissStep:x,onDeleteStep:B,onDeleteQuest:X},Pe.id))})})]},ae.id)})}),c.jsx(kl,{open:U,onClose:()=>z(!1),title:"New Goal",actions:c.jsxs(c.Fragment,{children:[c.jsx(Ve,{onClick:()=>z(!1),children:"Cancel"}),c.jsx(Ve,{variant:"primary",onClick:rt,children:"Create Goal"})]}),children:c.jsxs("div",{className:qe.formGrid,children:[c.jsx(Sa,{label:"Domain",value:j,onChange:ae=>M(Number(ae.target.value)),children:e.map(ae=>c.jsxs("option",{value:ae.id,children:[ae.icon," ",ae.name]},ae.id))}),c.jsx($i,{label:"Goal Title",value:oe,onChange:ae=>ye(ae.target.value),placeholder:"e.g., Get in shape",onKeyDown:ae=>ae.key==="Enter"&&rt()}),c.jsx(Ud,{label:"Description (optional)",value:ge,onChange:ae=>O(ae.target.value),placeholder:"Describe your goal..."})]})}),c.jsx(kl,{open:G!==null,onClose:()=>K(null),title:"New Quest",actions:c.jsxs(c.Fragment,{children:[c.jsx(Ve,{onClick:()=>K(null),children:"Cancel"}),c.jsx(Ve,{variant:"primary",onClick:at,children:"Create Quest"})]}),children:c.jsxs("div",{className:qe.formGrid,children:[c.jsx($i,{label:"Quest Title",value:q,onChange:ae=>R(ae.target.value),placeholder:"e.g., Run 5K",onKeyDown:ae=>ae.key==="Enter"&&at()}),c.jsx(Ud,{label:"Description (optional)",value:D,onChange:ae=>k(ae.target.value),placeholder:"Describe this quest..."}),c.jsxs(Sa,{label:"Priority",value:we,onChange:ae=>Je(ae.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important (1.5x XP)"}),c.jsx("option",{value:"legendary",children:"Legendary (2x XP)"})]})]})})]})}const z5="_buffTracker_lb0ok_1",H5="_buffToolbar_lb0ok_13",G5="_activeEffectsBar_lb0ok_25",X5="_activeEffectsHeader_lb0ok_39",$5="_activeEffectsTitle_lb0ok_53",Y5="_activeEffectsCount_lb0ok_65",Q5="_buffCount_lb0ok_75",K5="_debuffCount_lb0ok_87",W5="_activeEffectsList_lb0ok_99",J5="_activeEffectChip_lb0ok_111",Z5="_buffChip_lb0ok_133",eM="_debuffChip_lb0ok_143",tM="_chipIcon_lb0ok_153",nM="_chipInfo_lb0ok_161",sM="_chipName_lb0ok_171",iM="_chipMeta_lb0ok_189",aM="_chipRemove_lb0ok_199",rM="_quickActions_lb0ok_231",oM="_quickActionsHeader_lb0ok_245",lM="_quickActionsTitle_lb0ok_259",cM="_quickActionsHint_lb0ok_271",uM="_quickActionsGrid_lb0ok_281",dM="_quickActionBtn_lb0ok_293",fM="_quickBuff_lb0ok_317",hM="_quickDebuff_lb0ok_337",mM="_isActive_lb0ok_357",pM="_quickIcon_lb0ok_367",_M="_quickName_lb0ok_375",gM="_quickStreak_lb0ok_389",yM="_shieldInventory_lb0ok_403",EM="_shieldIcon_lb0ok_423",vM="_shieldInfo_lb0ok_431",TM="_shieldTitle_lb0ok_439",bM="_shieldDesc_lb0ok_451",SM="_shieldCount_lb0ok_461",NM="_collapsibleSection_lb0ok_481",wM="_sectionHeader_lb0ok_495",xM="_debuffHeader_lb0ok_525",AM="_sectionExpand_lb0ok_533",RM="_expanded_lb0ok_545",CM="_sectionIcon_lb0ok_553",IM="_sectionTitle_lb0ok_561",kM="_sectionCount_lb0ok_575",LM="_sectionContent_lb0ok_593",jM="_compactGrid_lb0ok_605",DM="_compactCard_lb0ok_619",OM="_compactBuff_lb0ok_639",MM="_compactDebuff_lb0ok_659",UM="_cardActive_lb0ok_679",VM="_compactCardMain_lb0ok_689",qM="_compactIcon_lb0ok_701",BM="_compactInfo_lb0ok_711",PM="_compactName_lb0ok_721",FM="_compactMilestone_lb0ok_737",zM="_compactMeta_lb0ok_745",HM="_compactStreak_lb0ok_757",GM="_atRisk_lb0ok_777",XM="_shieldActive_lb0ok_789",$M="_compactActions_lb0ok_799",YM="_compactActionBtn_lb0ok_813",QM="_claimBtn_lb0ok_845",KM="_deleteBtn_lb0ok_855",WM="_activeIndicator_lb0ok_863",JM="_emptyStateSmall_lb0ok_905",ZM="_formGrid_lb0ok_921",e6="_formRow_lb0ok_933",t6="_statEffectRow_lb0ok_951",n6="_statEffectLabel_lb0ok_965",s6="_statEffectInput_lb0ok_979",i6="_divider_lb0ok_987",Se={buffTracker:z5,buffToolbar:H5,activeEffectsBar:G5,activeEffectsHeader:X5,activeEffectsTitle:$5,activeEffectsCount:Y5,buffCount:Q5,debuffCount:K5,activeEffectsList:W5,activeEffectChip:J5,buffChip:Z5,debuffChip:eM,chipIcon:tM,chipInfo:nM,chipName:sM,chipMeta:iM,chipRemove:aM,quickActions:rM,quickActionsHeader:oM,quickActionsTitle:lM,quickActionsHint:cM,quickActionsGrid:uM,quickActionBtn:dM,quickBuff:fM,quickDebuff:hM,isActive:mM,quickIcon:pM,quickName:_M,quickStreak:gM,shieldInventory:yM,shieldIcon:EM,shieldInfo:vM,shieldTitle:TM,shieldDesc:bM,shieldCount:SM,collapsibleSection:NM,sectionHeader:wM,debuffHeader:xM,sectionExpand:AM,expanded:RM,sectionIcon:CM,sectionTitle:IM,sectionCount:kM,sectionContent:LM,compactGrid:jM,compactCard:DM,compactBuff:OM,compactDebuff:MM,cardActive:UM,compactCardMain:VM,compactIcon:qM,compactInfo:BM,compactName:PM,compactMilestone:FM,compactMeta:zM,compactStreak:HM,atRisk:GM,shieldActive:XM,compactActions:$M,compactActionBtn:YM,claimBtn:QM,deleteBtn:KM,activeIndicator:WM,emptyStateSmall:JM,formGrid:ZM,formRow:e6,statEffectRow:t6,statEffectLabel:n6,statEffectInput:s6,divider:i6},Om=[{name:"Morning Exercise",description:"Worked out in the morning",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2,willpower:1}},{name:"Cardio / Running",description:"Ran, cycled, swam, or did sustained cardio",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2}},{name:"Strength Training",description:"Lifted weights or did resistance training",type:"buff",icon:"",duration:24,stats:{stamina:2,health:1,willpower:2}},{name:"Yoga / Stretching",description:"Did yoga, stretching, or mobility work",type:"buff",icon:"",duration:24,stats:{health:2,focus:1,willpower:1}},{name:"8 Hours Sleep",description:"Got a full night of quality sleep",type:"buff",icon:"",duration:24,stats:{health:2,focus:2,stamina:1,willpower:1}},{name:"Meditation",description:"Practiced mindfulness or meditation",type:"buff",icon:"",duration:24,stats:{willpower:3,focus:2}},{name:"Healthy Meal",description:"Ate a balanced, nutritious meal",type:"buff",icon:"",duration:24,stats:{health:3,stamina:1}},{name:"Drank Enough Water",description:"Hit daily water intake goal",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Read 30+ Minutes",description:"Read a book, article, or educational material",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:1}},{name:"Studied / Learned",description:"Studied a course, skill, or new subject",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2}},{name:"Deep Work Session",description:"Focused work with no distractions for 90+ min",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2,stamina:1}},{name:"Journaling",description:"Wrote in journal or reflected on the day",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Cold Shower",description:"Took a cold shower or ice bath",type:"buff",icon:"",duration:24,stats:{willpower:3,stamina:1}},{name:"No Phone First Hour",description:"Avoided phone for first hour after waking",type:"buff",icon:"",duration:24,stats:{focus:2,willpower:2}},{name:"Socialised",description:"Had meaningful social interaction",type:"buff",icon:"",duration:24,stats:{charisma:3,willpower:1}},{name:"Helped Someone",description:"Did something kind or helpful for another person",type:"buff",icon:"",duration:24,stats:{charisma:2,willpower:1}},{name:"Creative Time",description:"Spent time on a creative pursuit",type:"buff",icon:"",duration:24,stats:{focus:2,charisma:1,willpower:1}},{name:"Sunlight / Nature",description:"Spent 20+ minutes outdoors in natural light",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Gratitude Practice",description:"Practiced gratitude  wrote or reflected on 3+",type:"buff",icon:"",duration:24,stats:{willpower:2,charisma:1}},{name:"Meal Prep",description:"Prepared healthy meals in advance",type:"buff",icon:"",duration:48,stats:{health:2,willpower:1,stamina:1}},{name:"Cleaned / Organised",description:"Cleaned home, desk, or organised belongings",type:"buff",icon:"",duration:24,stats:{focus:1,willpower:2}},{name:"Financial Check-In",description:"Reviewed budget, tracked expenses, or saved",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Junk Food",description:"Ate fast food, excessive sugar, or processed food",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-1}},{name:"Skipped Exercise",description:"Had planned to exercise but didn't",type:"debuff",icon:"",duration:24,stats:{stamina:-2,willpower:-2}},{name:"Poor Sleep",description:"Got less than 6 hours or very poor quality",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,stamina:-1,willpower:-1}},{name:"Doomscrolling",description:"Mindlessly scrolled social media for 30+ min",type:"debuff",icon:"",duration:24,stats:{focus:-3,willpower:-2}},{name:"Excessive Gaming",description:"Played video games for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-2,stamina:-1}},{name:"Binge Watching",description:"Watched TV/streaming for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-1,stamina:-1}},{name:"Alcohol",description:"Drank alcohol",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,willpower:-1}},{name:"Smoking / Vaping",description:"Smoked cigarettes or vaped",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-2}},{name:"Excessive Caffeine",description:"Had too much coffee or energy drinks",type:"debuff",icon:"",duration:24,stats:{health:-1,focus:-1,stamina:-1}},{name:"Procrastinated",description:"Avoided important tasks most of the day",type:"debuff",icon:"",duration:24,stats:{willpower:-3,focus:-2}},{name:"Skipped Meals",description:"Skipped a meal or barely ate",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-2,focus:-1}},{name:"Stayed Up Too Late",description:"Went to bed much later than planned",type:"debuff",icon:"",duration:24,stats:{health:-1,willpower:-2,stamina:-1}},{name:"Impulse Spending",description:"Made unnecessary or impulse purchases",type:"debuff",icon:"",duration:24,stats:{willpower:-2}},{name:"Negative Self-Talk",description:"Caught in self-criticism or negative thought loops",type:"debuff",icon:"",duration:24,stats:{willpower:-2,charisma:-2}},{name:"Social Isolation",description:"Avoided people or cancelled social plans",type:"debuff",icon:"",duration:24,stats:{charisma:-3,willpower:-1}},{name:"Sugary Drinks",description:"Had soda, energy drinks, or sugary beverages",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-1}},{name:"Lost Temper",description:"Got angry or had an emotional outburst",type:"debuff",icon:"",duration:24,stats:{charisma:-2,willpower:-2}}],a6=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function r6(n){const e=Math.round(n*60);if(e<60)return`${e}m`;const s=Math.floor(e/60),a=e%60;return a===0?`${s}h`:`${s}h ${a}m`}function o6({definitions:n,activeBuffs:e,onCreateDefinition:s,onDeleteDefinition:a,onActivateBuff:o,onDeactivateBuff:u,streakInfos:h,shieldCount:g=0,onUseShield:E,getUnclaimedMilestones:_,onClaimMilestones:S}){const[w,x]=L.useState(!1),[B,X]=L.useState(!0),[V,U]=L.useState(!0),[z,G]=L.useState(""),[K,oe]=L.useState(""),[ye,ge]=L.useState("buff"),[O,j]=L.useState(""),[M,q]=L.useState(1440),[R,D]=L.useState({}),k=ie=>{if(ie==="")return;const xe=Om[Number(ie)];xe&&(G(xe.name),oe(xe.description),ge(xe.type),j(xe.icon),q(xe.duration*60),D({...xe.stats}))},we=()=>{G(""),oe(""),ge("buff"),j(""),q(1440),D({})},Je=()=>{if(!z.trim())return;const ie=Object.fromEntries(Object.entries(R).filter(([,Pe])=>Pe!==0)),xe=M/60;s(z.trim(),K.trim(),ye,O,xe,JSON.stringify(ie)),we(),x(!1)};function se(ie){const xe=new Date,wt=new Date(ie+"Z").getTime()-xe.getTime();if(wt<=0)return"Expired";const yt=Math.floor(wt/36e5),on=Math.floor(wt%36e5/6e4);return yt>0?`${yt}h ${on}m`:`${on}m`}const Te=n.filter(ie=>ie.type==="buff"),Re=n.filter(ie=>ie.type==="debuff"),rt=L.useMemo(()=>Te.filter(ie=>{const xe=h?.get(ie.id);return xe&&xe.currentStreak>0}).slice(0,6),[Te,h]),at=L.useMemo(()=>Re.slice(0,4),[Re]),H=Om.map((ie,xe)=>({...ie,index:xe})).filter(ie=>ie.type==="buff"),de=Om.map((ie,xe)=>({...ie,index:xe})).filter(ie=>ie.type==="debuff"),ae=e.filter(ie=>ie.type==="buff"),Ee=e.filter(ie=>ie.type==="debuff");return c.jsxs("div",{className:Se.buffTracker,children:[e.length>0&&c.jsxs("div",{className:Se.activeEffectsBar,children:[c.jsxs("div",{className:Se.activeEffectsHeader,children:[c.jsx("span",{className:Se.activeEffectsTitle,children:"Active Effects"}),c.jsxs("span",{className:Se.activeEffectsCount,children:[ae.length>0&&c.jsxs("span",{className:Se.buffCount,children:["+",ae.length]}),Ee.length>0&&c.jsxs("span",{className:Se.debuffCount,children:["-",Ee.length]})]})]}),c.jsx("div",{className:Se.activeEffectsList,children:e.map(ie=>{const xe=Mc(ie.stat_effects),Pe=Object.entries(xe).map(([wt,yt])=>`${yt>0?"+":""}${yt} ${wt.slice(0,3)}`).join(" ");return c.jsxs("div",{className:`${Se.activeEffectChip} ${ie.type==="buff"?Se.buffChip:Se.debuffChip}`,children:[c.jsx("span",{className:Se.chipIcon,children:ie.icon}),c.jsxs("div",{className:Se.chipInfo,children:[c.jsx("span",{className:Se.chipName,children:ie.name}),c.jsxs("span",{className:Se.chipMeta,children:[se(ie.expires_at),"  ",Pe]})]}),c.jsx("button",{className:Se.chipRemove,onClick:()=>u(ie.id),children:""})]},ie.id)})})]}),(rt.length>0||at.length>0)&&c.jsxs("div",{className:Se.quickActions,children:[c.jsxs("div",{className:Se.quickActionsHeader,children:[c.jsx("span",{className:Se.quickActionsTitle,children:"Quick Actions"}),c.jsx("span",{className:Se.quickActionsHint,children:"Tap to activate"})]}),c.jsxs("div",{className:Se.quickActionsGrid,children:[rt.map(ie=>{const xe=h?.get(ie.id),Pe=e.some(wt=>wt.definition_id===ie.id);return c.jsxs("button",{className:`${Se.quickActionBtn} ${Se.quickBuff} ${Pe?Se.isActive:""}`,onClick:()=>o(ie.id),disabled:Pe,children:[c.jsx("span",{className:Se.quickIcon,children:ie.icon}),c.jsx("span",{className:Se.quickName,children:ie.name}),xe&&xe.currentStreak>0&&c.jsxs("span",{className:Se.quickStreak,children:["",xe.currentStreak]})]},ie.id)}),at.map(ie=>{const xe=e.some(Pe=>Pe.definition_id===ie.id);return c.jsxs("button",{className:`${Se.quickActionBtn} ${Se.quickDebuff} ${xe?Se.isActive:""}`,onClick:()=>o(ie.id),disabled:xe,children:[c.jsx("span",{className:Se.quickIcon,children:ie.icon}),c.jsx("span",{className:Se.quickName,children:ie.name})]},ie.id)})]})]}),c.jsxs("div",{className:Se.shieldInventory,children:[c.jsx("span",{className:Se.shieldIcon,children:""}),c.jsxs("div",{className:Se.shieldInfo,children:[c.jsx("div",{className:Se.shieldTitle,children:"Streak Shields"}),c.jsx("div",{className:Se.shieldDesc,children:"Protects a streak if you miss a day"})]}),c.jsx("span",{className:Se.shieldCount,children:g})]}),c.jsx("div",{className:Se.buffToolbar,children:c.jsx(Ve,{variant:"primary",onClick:()=>{we(),x(!0)},children:"+ New Buff/Debuff"})}),c.jsxs("div",{className:Se.collapsibleSection,children:[c.jsxs("div",{className:Se.sectionHeader,onClick:()=>X(!B),children:[c.jsx("span",{className:`${Se.sectionExpand} ${B?Se.expanded:""}`,children:""}),c.jsx("span",{className:Se.sectionIcon,children:""}),c.jsx("span",{className:Se.sectionTitle,children:"Buffs (Positive Habits)"}),c.jsx("span",{className:Se.sectionCount,children:Te.length})]}),B&&c.jsx("div",{className:Se.sectionContent,children:Te.length===0?c.jsx("div",{className:Se.emptyStateSmall,children:"No buffs defined yet. Create one above!"}):c.jsx("div",{className:Se.compactGrid,children:Te.map(ie=>c.jsx(KT,{definition:ie,onActivate:o,onDelete:a,streakInfo:h?.get(ie.id),shieldCount:g,onUseShield:E,unclaimedMilestones:_?.(ie.id)||[],onClaimMilestones:S,isActive:e.some(xe=>xe.definition_id===ie.id)},ie.id))})})]}),c.jsxs("div",{className:Se.collapsibleSection,children:[c.jsxs("div",{className:`${Se.sectionHeader} ${Se.debuffHeader}`,onClick:()=>U(!V),children:[c.jsx("span",{className:`${Se.sectionExpand} ${V?Se.expanded:""}`,children:""}),c.jsx("span",{className:Se.sectionIcon,children:""}),c.jsx("span",{className:Se.sectionTitle,children:"Debuffs (Negative Habits)"}),c.jsx("span",{className:Se.sectionCount,children:Re.length})]}),V&&c.jsx("div",{className:Se.sectionContent,children:Re.length===0?c.jsx("div",{className:Se.emptyStateSmall,children:"No debuffs defined yet."}):c.jsx("div",{className:Se.compactGrid,children:Re.map(ie=>c.jsx(KT,{definition:ie,onActivate:o,onDelete:a,isActive:e.some(xe=>xe.definition_id===ie.id)},ie.id))})})]}),c.jsx(kl,{open:w,onClose:()=>x(!1),title:"New Buff / Debuff",actions:c.jsxs(c.Fragment,{children:[c.jsx(Ve,{onClick:()=>x(!1),children:"Cancel"}),c.jsx(Ve,{variant:"primary",onClick:Je,children:"Create"})]}),children:c.jsxs("div",{className:Se.formGrid,children:[c.jsxs(Sa,{label:"Quick Select  Common Habits",value:"",onChange:ie=>k(ie.target.value),children:[c.jsx("option",{value:"",children:" Choose a preset to auto-fill "}),c.jsx("optgroup",{label:"Buffs (Positive Habits)",children:H.map(ie=>c.jsxs("option",{value:ie.index,children:[ie.icon," ",ie.name]},ie.index))}),c.jsx("optgroup",{label:"Debuffs (Negative Habits)",children:de.map(ie=>c.jsxs("option",{value:ie.index,children:[ie.icon," ",ie.name]},ie.index))})]}),c.jsx("div",{className:Se.divider}),c.jsxs("div",{className:Se.formRow,children:[c.jsx($i,{label:"Name",value:z,onChange:ie=>G(ie.target.value),placeholder:"e.g., Morning Exercise"}),c.jsxs(Sa,{label:"Type",value:ye,onChange:ie=>ge(ie.target.value),children:[c.jsx("option",{value:"buff",children:"Buff (Positive)"}),c.jsx("option",{value:"debuff",children:"Debuff (Negative)"})]})]}),c.jsx(Ud,{label:"Description",value:K,onChange:ie=>oe(ie.target.value),placeholder:"Describe this habit..."}),c.jsxs("div",{className:Se.formRow,children:[c.jsx(Sa,{label:"Icon",value:O,onChange:ie=>j(ie.target.value),children:a6.map(ie=>c.jsx("option",{value:ie,children:ie},ie))}),c.jsx($i,{label:"Duration (minutes)",type:"number",value:M,onChange:ie=>q(Number(ie.target.value)),min:1,max:10080})]}),c.jsxs("div",{children:[c.jsx("label",{className:Se.statEffectLabel,style:{display:"block",marginBottom:8,fontFamily:"var(--font-heading)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-secondary)"},children:"Stat Effects"}),Bm.map(ie=>c.jsxs("div",{className:Se.statEffectRow,children:[c.jsx("span",{className:Se.statEffectLabel,children:ie}),c.jsx("input",{type:"number",className:Se.statEffectInput,value:R[ie]||0,onChange:xe=>D({...R,[ie]:Number(xe.target.value)}),style:{padding:"4px 8px",background:"var(--bg-dark)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontFamily:"var(--font-body)"}})]},ie))]})]})})]})}function KT({definition:n,onActivate:e,onDelete:s,streakInfo:a,shieldCount:o=0,onUseShield:u,unclaimedMilestones:h=[],onClaimMilestones:g,isActive:E}){const _=Mc(n.stat_effects),S=Object.entries(_).map(([z,G])=>`${G>0?"+":""}${G} ${z.slice(0,3)}`).join(" "),w=a?NL(a.currentStreak):null,x=a&&a.currentStreak>0,B=a?.isAtRisk&&!a?.shieldActive,X=a?.shieldActive,V=async z=>{z.stopPropagation(),u&&a&&await u(n.id)},U=async z=>{z.stopPropagation(),g&&await g(n.id)};return c.jsxs("div",{className:`${Se.compactCard} ${n.type==="buff"?Se.compactBuff:Se.compactDebuff} ${E?Se.cardActive:""}`,onClick:()=>!E&&e(n.id),children:[c.jsxs("div",{className:Se.compactCardMain,children:[c.jsx("span",{className:Se.compactIcon,children:n.icon}),c.jsxs("div",{className:Se.compactInfo,children:[c.jsxs("div",{className:Se.compactName,children:[n.name,w&&c.jsx("span",{className:Se.compactMilestone,children:w.icon})]}),c.jsxs("div",{className:Se.compactMeta,children:[r6(n.duration_hours),"  ",S]})]}),x&&c.jsxs("div",{className:`${Se.compactStreak} ${B?Se.atRisk:""} ${X?Se.shieldActive:""}`,children:[X?"":"",a.currentStreak]})]}),c.jsxs("div",{className:Se.compactActions,children:[B&&o>0&&u&&c.jsx("button",{className:Se.compactActionBtn,onClick:V,title:"Use Shield",children:""}),h.length>0&&g&&c.jsx("button",{className:`${Se.compactActionBtn} ${Se.claimBtn}`,onClick:U,title:"Claim Milestone",children:""}),c.jsx("button",{className:`${Se.compactActionBtn} ${Se.deleteBtn}`,onClick:z=>{z.stopPropagation(),s(n.id)},title:"Delete",children:""})]}),E&&c.jsx("div",{className:Se.activeIndicator,children:"Active"})]})}const l6="_container_e9q7r_1",c6="_title_e9q7r_17",u6="_status_e9q7r_33",d6="_indicator_e9q7r_49",f6="_connected_e9q7r_61",h6="_disconnected_e9q7r_71",m6="_lastBackup_e9q7r_79",p6="_statusMessage_e9q7r_91",_6="_actions_e9q7r_121",g6="_button_e9q7r_135",y6="_buttonSecondary_e9q7r_167 _button_e9q7r_135",E6="_buttonDanger_e9q7r_187 _button_e9q7r_135",v6="_backupList_e9q7r_209",T6="_backupItem_e9q7r_233",b6="_backupName_e9q7r_255",S6="_backupDate_e9q7r_269",N6="_restoreButton_e9q7r_279",w6="_noBackups_e9q7r_307",x6="_tokenInputContainer_e9q7r_321",A6="_tokenHelp_e9q7r_329",R6="_tokenInput_e9q7r_321",C6="_tokenActions_e9q7r_393",Ct={container:l6,title:c6,status:u6,indicator:d6,connected:f6,disconnected:h6,lastBackup:m6,statusMessage:p6,actions:_6,button:g6,buttonSecondary:y6,buttonDanger:E6,backupList:v6,backupItem:T6,backupName:b6,backupDate:S6,restoreButton:N6,noBackups:w6,tokenInputContainer:x6,tokenHelp:A6,tokenInput:R6,tokenActions:C6};function I6(){const[n,e]=L.useState(!1),[s,a]=L.useState(!0),[o,u]=L.useState(null),[h,g]=L.useState(""),[E,_]=L.useState([]),[S,w]=L.useState(!1),[x,B]=L.useState(""),[X,V]=L.useState(!1),[U,z]=L.useState(!1),[G,K]=L.useState(""),oe=L.useCallback(()=>{e(rb()),u(ob())},[]);L.useEffect(()=>{oe(),a(!1)},[oe]);const ye=async()=>{if(!x.trim()){g("Please enter a GitHub token");return}g("Verifying token..."),await bx(x.trim())?(px(x.trim()),e(!0),V(!1),B(""),g("Connected to GitHub!")):g("Invalid token. Please check and try again.")},ge=()=>{_x(),e(!1),u(null),g("Disconnected"),_([])},O=async()=>{g("Backing up...");try{const D=await pp(),k=await cb(D);k.success?(g(`Backup saved: ${k.fileName}`),u(new Date),await db(7)):g(`Backup failed: ${k.error}`)}catch(D){g(`Backup failed: ${D instanceof Error?D.message:"Unknown error"}`)}},j=async()=>{if(w(!S),!S){g("Loading backups...");const D=await ub();_(D),g("")}},M=()=>{const D=G.trim();if(!D){g("Please enter a gist ID");return}const k=D.match(/([a-f0-9]{32})/i);k?(localStorage.setItem("github_gist_id",k[1]),g('Gist ID set! Click "Restore from Backup" to see backups.'),z(!1),K("")):g("Invalid gist ID. Paste the gist URL or ID.")},q=async D=>{if(confirm(`Restore from "${D}"? This will replace all current data.`)){g("Restoring...");try{const k=await Tx(D);k?(await tb(k),g("Restored successfully! Refreshing..."),setTimeout(()=>window.location.reload(),1500)):g("Failed to download backup")}catch(k){g(`Restore failed: ${k instanceof Error?k.message:"Unknown error"}`)}}},R=D=>{const k=D.match(/backup-(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})/);if(k){const[,we,Je,se,Te,Re]=k;return`${we}-${Je}-${se} ${Te}:${Re}`}return D};return s?c.jsx("div",{className:Ct.container,children:"Loading..."}):c.jsxs("div",{className:Ct.container,children:[c.jsx("h3",{className:Ct.title,children:"Cloud Backup (GitHub)"}),c.jsxs("div",{className:Ct.status,children:[c.jsx("span",{className:`${Ct.indicator} ${n?Ct.connected:Ct.disconnected}`}),c.jsx("span",{children:n?"Connected to GitHub":"Not connected"})]}),o&&c.jsxs("p",{className:Ct.lastBackup,children:["Last backup: ",o.toLocaleString()]}),h&&c.jsx("p",{className:Ct.statusMessage,children:h}),c.jsx("div",{className:Ct.actions,children:n?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:O,className:Ct.button,children:"Backup Now"}),c.jsx("button",{onClick:j,className:Ct.buttonSecondary,children:S?"Hide Backups":"Restore from Backup"}),c.jsx("button",{onClick:()=>z(!U),className:Ct.buttonSecondary,children:U?"Cancel":"Link Existing Gist"}),c.jsx("button",{onClick:ge,className:Ct.buttonDanger,children:"Disconnect"}),U&&c.jsxs("div",{className:Ct.tokenInputContainer,children:[c.jsx("p",{className:Ct.tokenHelp,children:"Paste your gist URL or ID to restore from an existing backup:"}),c.jsx("input",{type:"text",value:G,onChange:D=>K(D.target.value),placeholder:"https://gist.github.com/user/abc123... or just abc123...",className:Ct.tokenInput}),c.jsx("button",{onClick:M,className:Ct.button,children:"Link Gist"})]})]}):c.jsx(c.Fragment,{children:X?c.jsxs("div",{className:Ct.tokenInputContainer,children:[c.jsxs("p",{className:Ct.tokenHelp,children:["Create a token at ",c.jsx("a",{href:"https://github.com/settings/tokens/new?description=Goal%20Game%20Backup&scopes=gist",target:"_blank",rel:"noopener noreferrer",children:"GitHub Settings"})," with ",c.jsx("strong",{children:"gist"})," scope."]}),c.jsx("input",{type:"password",value:x,onChange:D=>B(D.target.value),placeholder:"Paste your GitHub token",className:Ct.tokenInput}),c.jsxs("div",{className:Ct.tokenActions,children:[c.jsx("button",{onClick:ye,className:Ct.button,children:"Save Token"}),c.jsx("button",{onClick:()=>{V(!1),B("")},className:Ct.buttonSecondary,children:"Cancel"})]})]}):c.jsx("button",{onClick:()=>V(!0),className:Ct.button,children:"Connect GitHub"})})}),S&&E.length>0&&c.jsxs("div",{className:Ct.backupList,children:[c.jsx("h4",{children:"Available Backups (Last 7 kept)"}),E.map(D=>c.jsxs("div",{className:Ct.backupItem,children:[c.jsx("span",{className:Ct.backupName,children:R(D.fileName)}),c.jsxs("span",{className:Ct.backupDate,children:[Math.round(D.size/1024)," KB"]}),c.jsx("button",{onClick:()=>q(D.fileName),className:Ct.restoreButton,children:"Restore"})]},D.fileName))]}),S&&E.length===0&&c.jsx("p",{className:Ct.noBackups,children:"No backups found"})]})}const k6=[{value:null,label:"No reminder"},{value:0,label:"At event time"},{value:5,label:"5 minutes before"},{value:10,label:"10 minutes before"},{value:15,label:"15 minutes before"},{value:30,label:"30 minutes before"},{value:60,label:"1 hour before"}],L6="_settingsPanel_zjhn0_1",j6="_settingsTitle_zjhn0_9",D6="_settingsDescription_zjhn0_23",O6="_settingRow_zjhn0_35",M6="_settingLabel_zjhn0_59",U6="_iosInstructions_zjhn0_71",V6="_iosTitle_zjhn0_87",q6="_iosText_zjhn0_99",B6="_iosList_zjhn0_111",P6="_deniedMessage_zjhn0_135",F6="_errorMessage_zjhn0_137",z6="_statusIndicator_zjhn0_169",H6="_statusDot_zjhn0_187",G6="_reminderSelect_zjhn0_251",X6="_debugInfo_zjhn0_317",$6="_debugLabel_zjhn0_335",Y6="_debugToken_zjhn0_349",Q6="_debugError_zjhn0_363",zt={settingsPanel:L6,settingsTitle:j6,settingsDescription:D6,settingRow:O6,settingLabel:M6,iosInstructions:U6,iosTitle:V6,iosText:q6,iosList:B6,deniedMessage:P6,errorMessage:F6,statusIndicator:z6,statusDot:H6,reminderSelect:G6,debugInfo:X6,debugLabel:$6,debugToken:Y6,debugError:Q6};function K6(){const{settings:n,permissionState:e,isSupported:s,isConfigured:a,canEnable:o,isIOS:u,isStandalone:h,loading:g,error:E,enableNotifications:_,disableNotificationsHandler:S,setDefaultReminderMinutes:w}=k1();return a?s?c.jsxs(qt,{className:zt.settingsPanel,children:[c.jsx("h3",{className:zt.settingsTitle,children:"Push Notifications"}),u&&!h&&c.jsxs("div",{className:zt.iosInstructions,children:[c.jsx("p",{className:zt.iosTitle,children:"iOS Setup Required"}),c.jsx("p",{className:zt.iosText,children:"To receive push notifications on iOS, you need to add this app to your home screen first:"}),c.jsxs("ol",{className:zt.iosList,children:[c.jsx("li",{children:"Tap the Share button in Safari"}),c.jsx("li",{children:'Select "Add to Home Screen"'}),c.jsx("li",{children:"Open the app from your home screen"}),c.jsx("li",{children:"Then enable notifications here"})]})]}),e==="denied"&&c.jsx("div",{className:zt.deniedMessage,children:c.jsx("p",{children:"Notifications are blocked. Please enable them in your browser settings."})}),E&&c.jsx("div",{className:zt.errorMessage,children:c.jsx("p",{children:E})}),c.jsxs("div",{className:zt.settingRow,children:[c.jsx("span",{className:zt.settingLabel,children:"Event Reminders"}),n.enabled?c.jsx(Ve,{variant:"danger",size:"small",onClick:S,disabled:g,children:g?"Disabling...":"Disable"}):c.jsx(Ve,{variant:"primary",size:"small",onClick:_,disabled:g||!o||e==="denied",children:g?"Enabling...":"Enable"})]}),n.enabled&&c.jsxs("div",{className:zt.settingRow,children:[c.jsx("span",{className:zt.settingLabel,children:"Default Reminder"}),c.jsx("select",{className:zt.reminderSelect,value:n.defaultReminderMinutes,onChange:x=>w(Number(x.target.value)),children:k6.filter(x=>x.value!==null).map(x=>c.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.enabled&&c.jsxs("div",{className:zt.statusIndicator,children:[c.jsx("span",{className:zt.statusDot}),"Notifications enabled"]}),n.enabled&&c.jsxs("div",{className:zt.debugInfo,children:[c.jsx("p",{className:zt.debugLabel,children:"Token Status:"}),n.fcmToken?c.jsxs("p",{className:zt.debugToken,children:[n.fcmToken.substring(0,20),"...",n.fcmToken.substring(n.fcmToken.length-10)]}):c.jsx("p",{className:zt.debugError,children:"No token - notifications will not work!"}),c.jsxs("p",{className:zt.debugLabel,children:["Device ID: ",n.deviceId.substring(0,8),"..."]})]}),n.enabled&&!n.fcmToken&&c.jsx("div",{className:zt.errorMessage,children:c.jsx("p",{children:"Token missing! Try: Disable  Wait 5 sec  Re-enable"})})]}):c.jsxs(qt,{className:zt.settingsPanel,children:[c.jsx("h3",{className:zt.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:zt.settingsDescription,children:"Push notifications are not supported in this browser."})]}):c.jsxs(qt,{className:zt.settingsPanel,children:[c.jsx("h3",{className:zt.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:zt.settingsDescription,children:"Push notifications are not configured. To enable them, add your Firebase configuration to the .env file."})]})}const W6="_dailyQuestsPanel_1fkrh_1",J6="_questsList_1fkrh_55",Z6="_questItem_1fkrh_67",eU="_completed_1fkrh_89",tU="_questItemHeader_1fkrh_99",nU="_questCheckbox_1fkrh_111",sU="_questInfo_1fkrh_149",iU="_questTitleRow_1fkrh_159",aU="_questName_1fkrh_173",rU="_questXp_1fkrh_193",oU="_questDescription_1fkrh_223",lU="_progressContainer_1fkrh_235",cU="_progressBar_1fkrh_247",uU="_progressFill_1fkrh_263",dU="_progressText_1fkrh_285",fU="_bonusSection_1fkrh_303",hU="_available_1fkrh_321",mU="_claimed_1fkrh_329",pU="_bonusTitle_1fkrh_349",_U="_bonusDescription_1fkrh_371",gU="_bonusXp_1fkrh_383",yU="_claimButton_1fkrh_403",EU="_loading_1fkrh_413",vU="_emptyState_1fkrh_429",TU="_compactPanel_1fkrh_445",bU="_questItemCompact_1fkrh_457",SU="_questCheckboxCompact_1fkrh_489",NU="_questNameCompact_1fkrh_511",wU="_progressBarCompact_1fkrh_541",xU="_progressFillCompact_1fkrh_559",AU="_progressTextCompact_1fkrh_581",RU="_compactBonus_1fkrh_595",CU="_compactBonusClaimed_1fkrh_629",dt={dailyQuestsPanel:W6,questsList:J6,questItem:Z6,completed:eU,questItemHeader:tU,questCheckbox:nU,questInfo:sU,questTitleRow:iU,questName:aU,questXp:rU,questDescription:oU,progressContainer:lU,progressBar:cU,progressFill:uU,progressText:dU,bonusSection:fU,available:hU,claimed:mU,bonusTitle:pU,bonusDescription:_U,bonusXp:gU,claimButton:yU,loading:EU,emptyState:vU,compactPanel:TU,questItemCompact:bU,questCheckboxCompact:SU,questNameCompact:NU,progressBarCompact:wU,progressFillCompact:xU,progressTextCompact:AU,compactBonus:RU,compactBonusClaimed:CU};function IU({quests:n,loading:e,allCompleted:s,completedCount:a,bonusClaimed:o,bonusXp:u,onClaimBonus:h,compact:g=!1}){const[E,_]=L.useState(!1);if(g)return e?c.jsx("div",{className:dt.loading,children:"Loading daily quests..."}):n.length===0?c.jsx("div",{className:dt.emptyState,children:"No daily quests available"}):c.jsxs("div",{className:dt.compactPanel,children:[c.jsx("div",{className:dt.questsList,children:n.map(w=>c.jsx(WT,{quest:w,compact:!0},w.id))}),s&&!o&&c.jsxs("div",{className:dt.compactBonus,children:[c.jsx("span",{children:"All quests complete!"}),c.jsxs(Ve,{size:"small",onClick:h,children:["Claim +",u," XP"]})]}),o&&c.jsxs("div",{className:dt.compactBonusClaimed,children:[" Bonus claimed! +",u," XP"]})]});const S=e?"Daily Quests (Loading...)":`Daily Quests (${a}/${n.length})${s&&!o?" - Bonus Ready!":""}`;return c.jsxs("div",{className:dt.dailyQuestsPanel,children:[c.jsx(Ve,{size:"small",variant:s&&!o?"primary":void 0,onClick:()=>_(!E),style:{width:"100%",marginBottom:E?8:0},children:E?"Hide Daily Quests":S}),E&&c.jsx(qt,{glow:s&&!o,children:e?c.jsx("div",{className:dt.loading,children:"Loading daily quests..."}):n.length===0?c.jsx("div",{className:dt.emptyState,children:"No daily quests available"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:dt.questsList,children:n.map(w=>c.jsx(WT,{quest:w},w.id))}),c.jsxs("div",{className:`${dt.bonusSection} ${s&&!o?dt.available:o?dt.claimed:""}`,children:[c.jsx("div",{className:dt.bonusTitle,children:o?"Bonus Claimed!":"Complete All Quests"}),c.jsx("div",{className:dt.bonusDescription,children:o?"Great work! See you tomorrow.":"Finish all 3 quests to earn a bonus"}),c.jsxs("div",{className:dt.bonusXp,children:["+",u," XP"]}),s&&!o&&c.jsx(Ve,{className:dt.claimButton,size:"small",onClick:h,children:"Claim Bonus"})]})]})})]})}function WT({quest:n,compact:e=!1}){const s=Math.min(n.current_value/n.target_value*100,100);return e?c.jsxs("div",{className:`${dt.questItemCompact} ${n.is_completed?dt.completed:""}`,children:[c.jsx("div",{className:dt.questCheckboxCompact,children:n.is_completed?"":""}),c.jsx("span",{className:dt.questNameCompact,children:n.title}),c.jsx("div",{className:dt.progressBarCompact,children:c.jsx("div",{className:dt.progressFillCompact,style:{width:`${s}%`}})}),c.jsxs("span",{className:dt.progressTextCompact,children:[n.current_value,"/",n.target_value]})]}):c.jsxs("div",{className:`${dt.questItem} ${n.is_completed?dt.completed:""}`,children:[c.jsxs("div",{className:dt.questItemHeader,children:[c.jsx("div",{className:dt.questCheckbox,children:n.is_completed&&c.jsx("span",{children:""})}),c.jsxs("div",{className:dt.questInfo,children:[c.jsxs("div",{className:dt.questTitleRow,children:[c.jsx("span",{className:dt.questName,children:n.title}),c.jsxs("span",{className:dt.questXp,children:["+",n.xp_reward," XP"]})]}),c.jsx("div",{className:dt.questDescription,children:n.description})]})]}),c.jsxs("div",{className:dt.progressContainer,children:[c.jsx("div",{className:dt.progressBar,children:c.jsx("div",{className:dt.progressFill,style:{width:`${s}%`}})}),c.jsxs("span",{className:dt.progressText,children:[n.current_value,"/",n.target_value]})]})]})}const kU="_bossPanel_1pnzt_1",LU="_bossButton_1pnzt_9",jU="_bossContent_1pnzt_17",DU="_bossHeader_1pnzt_25",OU="_bossIcon_1pnzt_39",MU="_defeated_1pnzt_49",UU="_bossInfo_1pnzt_57",VU="_bossName_1pnzt_65",qU="_bossDescription_1pnzt_89",BU="_bossStatus_1pnzt_101",PU="_bossReward_1pnzt_109",FU="_hpSection_1pnzt_135",zU="_hpLabel_1pnzt_143",HU="_hpTitle_1pnzt_157",GU="_hpValue_1pnzt_171",XU="_hpBar_1pnzt_181",$U="_hpFill_1pnzt_199",YU="_low_1pnzt_237",QU="_damageStats_1pnzt_255",KU="_damageStat_1pnzt_255",WU="_damageStatValue_1pnzt_283",JU="_damageStatLabel_1pnzt_295",ZU="_damageGuide_1pnzt_309",e9="_damageGuideTitle_1pnzt_323",t9="_damageGuideList_1pnzt_339",n9="_damageGuideItem_1pnzt_353",s9="_damageGuideAmount_1pnzt_365",i9="_defeatedBanner_1pnzt_377",a9="_defeatedTitle_1pnzt_395",r9="_defeatedText_1pnzt_409",o9="_defeatedRewards_1pnzt_419",l9="_weekInfo_1pnzt_433",c9="_loading_1pnzt_449",u9="_compactBoss_1pnzt_465",d9="_compactHeader_1pnzt_477",f9="_compactIcon_1pnzt_489",h9="_compactInfo_1pnzt_509",m9="_compactName_1pnzt_519",p9="_compactDesc_1pnzt_533",_9="_compactReward_1pnzt_549",g9="_compactVictory_1pnzt_569",y9="_compactHp_1pnzt_595",E9="_compactHpBar_1pnzt_607",v9="_compactHpFill_1pnzt_623",T9="_compactHpText_1pnzt_645",b9="_compactStats_1pnzt_659",Oe={bossPanel:kU,bossButton:LU,bossContent:jU,bossHeader:DU,bossIcon:OU,defeated:MU,bossInfo:UU,bossName:VU,bossDescription:qU,bossStatus:BU,bossReward:PU,hpSection:FU,hpLabel:zU,hpTitle:HU,hpValue:GU,hpBar:XU,hpFill:$U,low:YU,damageStats:QU,damageStat:KU,damageStatValue:WU,damageStatLabel:JU,damageGuide:ZU,damageGuideTitle:e9,damageGuideList:t9,damageGuideItem:n9,damageGuideAmount:s9,defeatedBanner:i9,defeatedTitle:a9,defeatedText:r9,defeatedRewards:o9,weekInfo:l9,loading:c9,compactBoss:u9,compactHeader:d9,compactIcon:f9,compactInfo:h9,compactName:m9,compactDesc:p9,compactReward:_9,compactVictory:g9,compactHp:y9,compactHpBar:E9,compactHpFill:v9,compactHpText:T9,compactStats:b9};function S9({boss:n,loading:e,weekStart:s,weekEnd:a,hpPercentage:o,damageDealt:u,totalDefeated:h,compact:g=!1}){const[E,_]=L.useState(!1),S=x=>new Date(x+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});if(g)return e?c.jsx("div",{className:Oe.loading,children:"Loading boss..."}):n?c.jsxs("div",{className:Oe.compactBoss,children:[c.jsxs("div",{className:Oe.compactHeader,children:[c.jsx("span",{className:`${Oe.compactIcon} ${n.is_defeated?Oe.defeated:""}`,children:n.icon}),c.jsxs("div",{className:Oe.compactInfo,children:[c.jsx("div",{className:Oe.compactName,children:n.name}),c.jsx("div",{className:Oe.compactDesc,children:n.description})]}),c.jsxs("div",{className:Oe.compactReward,children:["+",n.xp_reward," XP"]})]}),n.is_defeated?c.jsxs("div",{className:Oe.compactVictory,children:[c.jsx("span",{children:""})," Victory! Boss defeated this week!"]}):c.jsxs("div",{className:Oe.compactHp,children:[c.jsx("div",{className:Oe.compactHpBar,children:c.jsx("div",{className:`${Oe.compactHpFill} ${o<30?Oe.low:""}`,style:{width:`${o}%`}})}),c.jsxs("span",{className:Oe.compactHpText,children:[n.current_hp,"/",n.max_hp," HP"]})]}),c.jsxs("div",{className:Oe.compactStats,children:[c.jsxs("span",{children:["Damage dealt: ",u]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Bosses defeated: ",h]})]})]}):c.jsx("div",{className:Oe.loading,children:"No boss found"});const w=e?"Weekly Boss (Loading...)":n?.is_defeated?`Weekly Boss - ${n.name} DEFEATED!`:`Weekly Boss - ${n?.name} (${n?.current_hp}/${n?.max_hp} HP)`;return c.jsxs("div",{className:Oe.bossPanel,children:[c.jsx(Ve,{size:"small",variant:n?.is_defeated?"primary":void 0,onClick:()=>_(!E),className:Oe.bossButton,children:E?"Hide Weekly Boss":w}),E&&c.jsx(qt,{className:Oe.bossContent,glow:n?.is_defeated,children:e?c.jsx("div",{className:Oe.loading,children:"Summoning this week's boss..."}):n?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:Oe.bossHeader,children:[c.jsx("span",{className:`${Oe.bossIcon} ${n.is_defeated?Oe.defeated:""}`,children:n.icon}),c.jsxs("div",{className:Oe.bossInfo,children:[c.jsx("div",{className:`${Oe.bossName} ${n.is_defeated?Oe.defeated:""}`,children:n.name}),c.jsx("div",{className:Oe.bossDescription,children:n.description})]}),c.jsxs("div",{className:Oe.bossStatus,children:[c.jsxs("div",{className:Oe.bossReward,children:["+",n.xp_reward," XP"]}),n.bonus_shields>0&&c.jsxs("div",{className:Oe.bossReward,children:["+",n.bonus_shields," Shield",n.bonus_shields>1?"s":""]})]})]}),n.is_defeated&&c.jsxs("div",{className:Oe.defeatedBanner,children:[c.jsx("div",{className:Oe.defeatedTitle,children:"Victory!"}),c.jsxs("div",{className:Oe.defeatedText,children:["You defeated ",n.name," this week!"]}),c.jsxs("div",{className:Oe.defeatedRewards,children:["Rewards: +",n.xp_reward," XP",n.bonus_shields>0&&`, +${n.bonus_shields} Streak Shield${n.bonus_shields>1?"s":""}`]})]}),!n.is_defeated&&c.jsxs("div",{className:Oe.hpSection,children:[c.jsxs("div",{className:Oe.hpLabel,children:[c.jsx("span",{className:Oe.hpTitle,children:"Boss HP"}),c.jsxs("span",{className:Oe.hpValue,children:[n.current_hp," / ",n.max_hp]})]}),c.jsx("div",{className:Oe.hpBar,children:c.jsx("div",{className:`${Oe.hpFill} ${o<30?Oe.low:""}`,style:{width:`${o}%`}})})]}),c.jsxs("div",{className:Oe.damageStats,children:[c.jsxs("div",{className:Oe.damageStat,children:[c.jsx("div",{className:Oe.damageStatValue,children:u}),c.jsx("div",{className:Oe.damageStatLabel,children:"Damage Dealt"})]}),c.jsxs("div",{className:Oe.damageStat,children:[c.jsx("div",{className:Oe.damageStatValue,children:h}),c.jsx("div",{className:Oe.damageStatLabel,children:"Bosses Defeated"})]})]}),!n.is_defeated&&c.jsxs("div",{className:Oe.damageGuide,children:[c.jsx("div",{className:Oe.damageGuideTitle,children:"How to Deal Damage"}),c.jsxs("div",{className:Oe.damageGuideList,children:[c.jsxs("div",{className:Oe.damageGuideItem,children:[c.jsx("span",{children:"Complete Step"}),c.jsxs("span",{className:Oe.damageGuideAmount,children:["-",ml.step_completed," HP"]})]}),c.jsxs("div",{className:Oe.damageGuideItem,children:[c.jsx("span",{children:"Activate Buff"}),c.jsxs("span",{className:Oe.damageGuideAmount,children:["-",ml.buff_activated," HP"]})]}),c.jsxs("div",{className:Oe.damageGuideItem,children:[c.jsx("span",{children:"Complete Quest"}),c.jsxs("span",{className:Oe.damageGuideAmount,children:["-",ml.quest_completed," HP"]})]}),c.jsxs("div",{className:Oe.damageGuideItem,children:[c.jsx("span",{children:"Complete Goal"}),c.jsxs("span",{className:Oe.damageGuideAmount,children:["-",ml.goal_completed," HP"]})]}),c.jsxs("div",{className:Oe.damageGuideItem,children:[c.jsx("span",{children:"Daily Quest"}),c.jsxs("span",{className:Oe.damageGuideAmount,children:["-",ml.daily_quest_completed," HP"]})]})]})]}),c.jsxs("div",{className:Oe.weekInfo,children:["Week of ",S(s)," - ",S(a)]})]}):c.jsx("div",{className:Oe.loading,children:"No boss found"})})]})}const N9="_achievementPanel_13bl3_1",w9="_statsBar_13bl3_13",x9="_statItem_13bl3_33",A9="_statValue_13bl3_47",R9="_statLabel_13bl3_59",C9="_progressBarContainer_13bl3_73",I9="_progressLabel_13bl3_85",k9="_progressTrack_13bl3_99",L9="_progressFill_13bl3_115",j9="_categoryTabs_13bl3_129",D9="_categoryTab_13bl3_129",O9="_active_13bl3_183",M9="_categoryIcon_13bl3_195",U9="_categoryCount_13bl3_203",V9="_achievementGrid_13bl3_219",q9="_achievementCard_13bl3_231",B9="_unlocked_13bl3_261",P9="_locked_13bl3_271",F9="_hidden_13bl3_279",z9="_achievementIcon_13bl3_287",H9="_achievementInfo_13bl3_335",G9="_achievementName_13bl3_345",X9="_achievementDesc_13bl3_367",$9="_achievementMeta_13bl3_379",Y9="_achievementXp_13bl3_393",Q9="_achievementProgress_13bl3_409",K9="_achievementProgressTrack_13bl3_423",W9="_achievementProgressFill_13bl3_441",J9="_achievementProgressText_13bl3_455",Z9="_achievementUnlockDate_13bl3_469",eV="_emptyState_13bl3_479",tV="_unlockModal_13bl3_531",nV="_unlockIcon_13bl3_539",sV="_unlockTitle_13bl3_551",iV="_unlockDesc_13bl3_565",aV="_unlockReward_13bl3_577",st={achievementPanel:N9,statsBar:w9,statItem:x9,statValue:A9,statLabel:R9,progressBarContainer:C9,progressLabel:I9,progressTrack:k9,progressFill:L9,categoryTabs:j9,categoryTab:D9,active:O9,categoryIcon:M9,categoryCount:U9,achievementGrid:V9,achievementCard:q9,unlocked:B9,locked:P9,hidden:F9,achievementIcon:z9,achievementInfo:H9,achievementName:G9,achievementDesc:X9,achievementMeta:$9,achievementXp:Y9,achievementProgress:Q9,achievementProgressTrack:K9,achievementProgressFill:W9,achievementProgressText:J9,achievementUnlockDate:Z9,emptyState:eV,unlockModal:tV,unlockIcon:nV,unlockTitle:sV,unlockDesc:iV,unlockReward:aV},rV=["quests","buffs","streaks","boss","levels","special"];function oV({achievements:n,stats:e,loading:s,compact:a=!1}){const[o,u]=L.useState("all"),h=o==="all"?n:n.filter(_=>_.category===o),g=_=>{const S=n.filter(x=>x.category===_);return{unlocked:S.filter(x=>x.unlocked).length,total:S.length}},E=e.total>0?Math.round(e.unlocked/e.total*100):0;return s?c.jsx(qt,{header:"Achievements",children:c.jsx("div",{className:st.emptyState,children:"Loading achievements..."})}):c.jsx(qt,{header:"Achievements",glow:!0,children:c.jsxs("div",{className:st.achievementPanel,children:[c.jsxs("div",{className:st.statsBar,children:[c.jsxs("div",{className:st.statItem,children:[c.jsx("span",{className:st.statValue,children:e.unlocked}),c.jsx("span",{className:st.statLabel,children:"Unlocked"})]}),c.jsxs("div",{className:st.progressBarContainer,children:[c.jsxs("div",{className:st.progressLabel,children:[E,"% Complete"]}),c.jsx("div",{className:st.progressTrack,children:c.jsx("div",{className:st.progressFill,style:{width:`${E}%`}})})]}),c.jsxs("div",{className:st.statItem,children:[c.jsx("span",{className:st.statValue,children:e.earnedXp}),c.jsx("span",{className:st.statLabel,children:"XP Earned"})]})]}),c.jsxs("div",{className:st.categoryTabs,children:[c.jsxs("button",{className:`${st.categoryTab} ${o==="all"?st.active:""}`,onClick:()=>u("all"),children:[c.jsx("span",{className:st.categoryIcon,children:""}),"All",c.jsxs("span",{className:st.categoryCount,children:[e.unlocked,"/",e.total]})]}),rV.map(_=>{const S=g(_);return S.total===0?null:c.jsxs("button",{className:`${st.categoryTab} ${o===_?st.active:""}`,onClick:()=>u(_),children:[c.jsx("span",{className:st.categoryIcon,children:ew[_]}),ZN[_],c.jsxs("span",{className:st.categoryCount,children:[S.unlocked,"/",S.total]})]},_)})]}),h.length===0?c.jsx("div",{className:st.emptyState,children:"No achievements in this category yet"}):c.jsx("div",{className:st.achievementGrid,children:h.map(_=>c.jsx(lV,{achievement:_},_.id))})]})})}function lV({achievement:n}){const e=`${st.achievementCard} ${n.unlocked?st.unlocked:st.locked} ${n.is_hidden&&!n.unlocked?st.hidden:""}`,s=a=>new Date(a+"Z").toLocaleDateString();return c.jsxs("div",{className:e,children:[c.jsx("div",{className:st.achievementIcon,children:n.icon}),c.jsxs("div",{className:st.achievementInfo,children:[c.jsx("div",{className:st.achievementName,children:n.is_hidden&&!n.unlocked?"???":n.name}),c.jsx("div",{className:st.achievementDesc,children:n.is_hidden&&!n.unlocked?"Hidden achievement":n.description}),c.jsxs("div",{className:st.achievementMeta,children:[c.jsxs("span",{className:st.achievementXp,children:["+",n.xp_reward," XP"]}),n.unlocked?c.jsxs("span",{className:st.achievementUnlockDate,children:["Unlocked ",s(n.unlocked_at)]}):c.jsxs("div",{className:st.achievementProgress,children:[c.jsx("div",{className:st.achievementProgressTrack,children:c.jsx("div",{className:st.achievementProgressFill,style:{width:`${n.progress_percent}%`}})}),c.jsxs("span",{className:st.achievementProgressText,children:[n.current_value,"/",n.requirement_value]})]})]})]})]})}function cV({unlock:n,onDismiss:e}){return n?c.jsx(kl,{open:!0,onClose:e,title:"Achievement Unlocked!",actions:c.jsx(Ve,{variant:"primary",onClick:e,children:"Awesome!"}),children:c.jsxs("div",{className:st.unlockModal,children:[c.jsx("div",{className:st.unlockIcon,children:n.achievement.icon}),c.jsx("div",{className:st.unlockTitle,children:n.achievement.name}),c.jsx("div",{className:st.unlockDesc,children:n.achievement.description}),c.jsxs("div",{className:st.unlockReward,children:["+",n.xpAwarded," XP"]})]})}):null}const uV="_focusTimerPanel_clj8g_1",dV="_timerContainer_clj8g_13",fV="_timerCircleWrapper_clj8g_33",hV="_timerCircle_clj8g_33",mV="_timerCircleBg_clj8g_55",pV="_timerCircleProgress_clj8g_67",_V="_work_clj8g_81",gV="_shortBreak_clj8g_89",yV="_longBreak_clj8g_97",EV="_idle_clj8g_105",vV="_timerDisplay_clj8g_113",TV="_timerTime_clj8g_129",bV="_timerPhase_clj8g_143",SV="_timerControls_clj8g_181",NV="_sessionCount_clj8g_191",wV="_sessionDot_clj8g_209",xV="_completed_clj8g_225",AV="_active_clj8g_235",RV="_statsGrid_clj8g_247",CV="_statCard_clj8g_259",IV="_statIcon_clj8g_279",kV="_statValue_clj8g_289",LV="_statLabel_clj8g_301",jV="_settingsGrid_clj8g_319",DV="_settingItem_clj8g_331",OV="_settingLabel_clj8g_343",MV="_settingInput_clj8g_353",UV="_toggleRow_clj8g_383",VV="_toggleLabel_clj8g_407",qV="_toggle_clj8g_383",BV="_toggleKnob_clj8g_449",PV="_sessionList_clj8g_483",FV="_sessionItem_clj8g_495",zV="_cancelled_clj8g_523",HV="_sessionTime_clj8g_533",GV="_sessionInfo_clj8g_547",XV="_sessionXp_clj8g_559",Ie={focusTimerPanel:uV,timerContainer:dV,timerCircleWrapper:fV,timerCircle:hV,timerCircleBg:mV,timerCircleProgress:pV,work:_V,shortBreak:gV,longBreak:yV,idle:EV,timerDisplay:vV,timerTime:TV,timerPhase:bV,timerControls:SV,sessionCount:NV,sessionDot:wV,completed:xV,active:AV,statsGrid:RV,statCard:CV,statIcon:IV,statValue:kV,statLabel:LV,settingsGrid:jV,settingItem:DV,settingLabel:OV,settingInput:MV,toggleRow:UV,toggleLabel:VV,toggle:qV,toggleKnob:BV,sessionList:PV,sessionItem:FV,cancelled:zV,sessionTime:HV,sessionInfo:GV,sessionXp:XV};function $V({timeRemaining:n,totalTime:e,phase:s,formattedTime:a}){const g=192*Math.PI,E=e>0?n/e:1,_=g*(1-E),S={work:"Focus",short_break:"Short Break",long_break:"Long Break",idle:"Ready"}[s];return c.jsxs("div",{className:Ie.timerCircleWrapper,children:[c.jsxs("svg",{className:Ie.timerCircle,width:200,height:200,children:[c.jsx("circle",{className:Ie.timerCircleBg,cx:200/2,cy:200/2,r:96}),c.jsx("circle",{className:`${Ie.timerCircleProgress} ${s==="work"?Ie.work:s==="short_break"?Ie.shortBreak:s==="long_break"?Ie.longBreak:Ie.idle}`,cx:200/2,cy:200/2,r:96,strokeDasharray:g,strokeDashoffset:_})]}),c.jsxs("div",{className:Ie.timerDisplay,children:[c.jsx("div",{className:Ie.timerTime,children:a}),c.jsx("div",{className:`${Ie.timerPhase} ${s==="work"?Ie.work:s==="short_break"?Ie.shortBreak:s==="long_break"?Ie.longBreak:""}`,children:S})]})]})}function YV({settings:n,onUpdateSettings:e}){return c.jsxs(qt,{header:"Timer Settings",children:[c.jsxs("div",{className:Ie.settingsGrid,children:[c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Work Duration (min)"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:n.work_duration,onChange:s=>e({work_duration:Number(s.target.value)}),min:1,max:120})]}),c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Short Break (min)"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:n.short_break,onChange:s=>e({short_break:Number(s.target.value)}),min:1,max:30})]}),c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Long Break (min)"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:n.long_break,onChange:s=>e({long_break:Number(s.target.value)}),min:1,max:60})]}),c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Sessions Before Long Break"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:n.sessions_before_long_break,onChange:s=>e({sessions_before_long_break:Number(s.target.value)}),min:1,max:10})]})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{className:Ie.toggleRow,children:[c.jsx("span",{className:Ie.toggleLabel,children:"Auto-start breaks"}),c.jsx("div",{className:`${Ie.toggle} ${n.auto_start_breaks?Ie.active:""}`,onClick:()=>e({auto_start_breaks:!n.auto_start_breaks}),children:c.jsx("div",{className:Ie.toggleKnob})})]}),c.jsxs("div",{className:Ie.toggleRow,children:[c.jsx("span",{className:Ie.toggleLabel,children:"Sound notifications"}),c.jsx("div",{className:`${Ie.toggle} ${n.sound_enabled?Ie.active:""}`,onClick:()=>e({sound_enabled:!n.sound_enabled}),children:c.jsx("div",{className:Ie.toggleKnob})})]})]})]})}function QV({settings:n,stats:e,timerState:s,recentSessions:a,onStartWork:o,onStartBreak:u,onPause:h,onResume:g,onStop:E,onSkipBreak:_,onUpdateSettings:S,formatTime:w}){const[x,B]=L.useState(!1),X=()=>{switch(s.phase){case"work":return n.work_duration*60;case"short_break":return n.short_break*60;case"long_break":return n.long_break*60;default:return n.work_duration*60}},V=n.sessions_before_long_break-s.sessionsCompleted%n.sessions_before_long_break;return c.jsxs("div",{className:Ie.focusTimerPanel,children:[c.jsx(qt,{header:"Focus Timer",glow:!0,children:c.jsxs("div",{className:Ie.timerContainer,children:[c.jsx($V,{timeRemaining:s.timeRemaining,totalTime:X(),phase:s.phase,formattedTime:w(s.timeRemaining)}),c.jsxs("div",{className:Ie.timerControls,children:[s.phase==="idle"&&c.jsx(Ve,{variant:"primary",onClick:()=>o(),children:"Start Focus"}),s.phase==="work"&&s.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Ve,{variant:"ghost",onClick:h,children:"Pause"}),c.jsx(Ve,{variant:"danger",onClick:E,children:"Stop"})]}),s.phase==="work"&&!s.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Ve,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Ve,{variant:"danger",onClick:E,children:"Stop"})]}),(s.phase==="short_break"||s.phase==="long_break")&&c.jsxs(c.Fragment,{children:[s.isRunning?c.jsx(Ve,{variant:"ghost",onClick:h,children:"Pause"}):c.jsx(Ve,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Ve,{variant:"ghost",onClick:_,children:"Skip Break"})]})]}),c.jsxs("div",{className:Ie.sessionCount,children:[Array.from({length:n.sessions_before_long_break}).map((U,z)=>c.jsx("div",{className:`${Ie.sessionDot} ${z<s.sessionsCompleted%n.sessions_before_long_break?Ie.completed:""} ${z===s.sessionsCompleted%n.sessions_before_long_break&&s.phase==="work"?Ie.active:""}`},z)),c.jsxs("span",{style:{marginLeft:8},children:[V," until long break"]})]})]})}),c.jsxs("div",{className:Ie.statsGrid,children:[c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsx("span",{className:Ie.statValue,children:e.total_sessions}),c.jsx("span",{className:Ie.statLabel,children:"Total Sessions"})]}),c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsxs("span",{className:Ie.statValue,children:[Math.round(e.total_minutes/60),"h"]}),c.jsx("span",{className:Ie.statLabel,children:"Total Focus"})]}),c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsx("span",{className:Ie.statValue,children:e.current_streak}),c.jsx("span",{className:Ie.statLabel,children:"Current Streak"})]}),c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsx("span",{className:Ie.statValue,children:e.today_sessions}),c.jsx("span",{className:Ie.statLabel,children:"Today"})]})]}),c.jsx(Ve,{variant:"ghost",size:"small",onClick:()=>B(!x),children:x?"Hide Settings":"Timer Settings"}),x&&c.jsx(YV,{settings:n,onUpdateSettings:S}),a.length>0&&c.jsx(qt,{header:"Recent Sessions",children:c.jsx("div",{className:Ie.sessionList,children:a.slice(0,5).map(U=>c.jsxs("div",{className:`${Ie.sessionItem} ${U.status==="completed"?Ie.completed:Ie.cancelled}`,children:[c.jsxs("span",{className:Ie.sessionTime,children:[U.duration_minutes,"m"]}),c.jsx("span",{className:Ie.sessionInfo,children:new Date(U.started_at+"Z").toLocaleString()}),U.status==="completed"&&U.xp_earned>0&&c.jsxs("span",{className:Ie.sessionXp,children:["+",U.xp_earned," XP"]})]},U.id))})})]})}const KV="_routinePanel_1b2ro_1",WV="_routineGrid_1b2ro_13",JV="_routineCard_1b2ro_25",ZV="_morning_1b2ro_53",eq="_evening_1b2ro_61",tq="_custom_1b2ro_69",nq="_completed_1b2ro_77",sq="_routineHeader_1b2ro_87",iq="_routineInfo_1b2ro_101",aq="_routineName_1b2ro_109",rq="_routineType_1b2ro_123",oq="_routineStreak_1b2ro_177",lq="_routineDesc_1b2ro_201",cq="_routineProgress_1b2ro_213",uq="_progressTrack_1b2ro_227",dq="_progressFill_1b2ro_243",fq="_progressText_1b2ro_257",hq="_stepsList_1b2ro_271",mq="_stepItem_1b2ro_283",pq="_skipped_1b2ro_313",_q="_optional_1b2ro_323",gq="_stepCheckbox_1b2ro_331",yq="_checked_1b2ro_365",Eq="_stepInfo_1b2ro_377",vq="_stepTitle_1b2ro_385",Tq="_stepMeta_1b2ro_395",bq="_stepDuration_1b2ro_411",Sq="_optionalBadge_1b2ro_423",Nq="_stepActions_1b2ro_439",wq="_routineActions_1b2ro_449",xq="_formSection_1b2ro_467",Aq="_formRow_1b2ro_487",Rq="_emptyState_1b2ro_505",Ze={routinePanel:KV,routineGrid:WV,routineCard:JV,morning:ZV,evening:eq,custom:tq,completed:nq,routineHeader:sq,routineInfo:iq,routineName:aq,routineType:rq,routineStreak:oq,routineDesc:lq,routineProgress:cq,progressTrack:uq,progressFill:dq,progressText:fq,stepsList:hq,stepItem:mq,skipped:pq,optional:_q,stepCheckbox:gq,checked:yq,stepInfo:Eq,stepTitle:vq,stepMeta:Tq,stepDuration:bq,optionalBadge:Sq,stepActions:Nq,routineActions:wq,formSection:xq,formRow:Aq,emptyState:Rq};function Cq({routines:n,loading:e,onCreateRoutine:s,onDeleteRoutine:a,onStartRoutine:o,onCompleteStep:u,onSkipStep:h,onAddStep:g,onDeleteStep:E,getStepsWithStatus:_,compact:S=!1}){const[w,x]=L.useState(!1),[B,X]=L.useState(null),[V,U]=L.useState(""),[z,G]=L.useState("morning"),[K,oe]=L.useState(""),[ye,ge]=L.useState(25),O=()=>{U(""),G("morning"),oe(""),ge(25)},j=()=>{V.trim()&&(s(V.trim(),z,K.trim(),ye),O(),x(!1))},M=n.filter(D=>D.type==="morning"),q=n.filter(D=>D.type==="evening"),R=n.filter(D=>D.type==="custom");return e?c.jsx(qt,{header:"Routines",children:c.jsx("div",{className:Ze.emptyState,children:"Loading routines..."})}):c.jsxs("div",{className:Ze.routinePanel,children:[c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:c.jsx(Ve,{variant:"primary",onClick:()=>{O(),x(!0)},children:"+ New Routine"})}),n.length===0?c.jsx(qt,{header:"Routines",children:c.jsx("div",{className:Ze.emptyState,children:"No routines yet. Create your first morning or evening routine!"})}):c.jsxs(c.Fragment,{children:[M.length>0&&c.jsx(qt,{header:"Morning Routines",children:c.jsx("div",{className:Ze.routineGrid,children:M.map(D=>c.jsx(Mm,{routine:D,stepsWithStatus:_(D.id),onStart:()=>o(D.id),onCompleteStep:k=>u(D.id,k),onSkipStep:k=>h(D.id,k),onEdit:()=>X(D.id),onDelete:()=>a(D.id)},D.id))})}),q.length>0&&c.jsx(qt,{header:"Evening Routines",children:c.jsx("div",{className:Ze.routineGrid,children:q.map(D=>c.jsx(Mm,{routine:D,stepsWithStatus:_(D.id),onStart:()=>o(D.id),onCompleteStep:k=>u(D.id,k),onSkipStep:k=>h(D.id,k),onEdit:()=>X(D.id),onDelete:()=>a(D.id)},D.id))})}),R.length>0&&c.jsx(qt,{header:"Custom Routines",children:c.jsx("div",{className:Ze.routineGrid,children:R.map(D=>c.jsx(Mm,{routine:D,stepsWithStatus:_(D.id),onStart:()=>o(D.id),onCompleteStep:k=>u(D.id,k),onSkipStep:k=>h(D.id,k),onEdit:()=>X(D.id),onDelete:()=>a(D.id)},D.id))})})]}),c.jsx(kl,{open:w,onClose:()=>x(!1),title:"Create Routine",actions:c.jsxs(c.Fragment,{children:[c.jsx(Ve,{onClick:()=>x(!1),children:"Cancel"}),c.jsx(Ve,{variant:"primary",onClick:j,children:"Create"})]}),children:c.jsxs("div",{className:Ze.formSection,children:[c.jsx($i,{label:"Name",value:V,onChange:D=>U(D.target.value),placeholder:"e.g., Morning Power-Up"}),c.jsxs("div",{className:Ze.formRow,children:[c.jsxs(Sa,{label:"Type",value:z,onChange:D=>G(D.target.value),children:[c.jsx("option",{value:"morning",children:"Morning"}),c.jsx("option",{value:"evening",children:"Evening"}),c.jsx("option",{value:"custom",children:"Custom"})]}),c.jsx($i,{label:"Bonus XP",type:"number",value:ye,onChange:D=>ge(Number(D.target.value)),min:0,max:200})]}),c.jsx(Ud,{label:"Description",value:K,onChange:D=>oe(D.target.value),placeholder:"Describe this routine..."})]})}),B&&c.jsx(Iq,{routine:n.find(D=>D.id===B),onClose:()=>X(null),onAddStep:g,onDeleteStep:E})]})}function Mm({routine:n,stepsWithStatus:e,onStart:s,onCompleteStep:a,onSkipStep:o,onEdit:u,onDelete:h}){const g=n.todayLog!==void 0,E=n.todayLog?.is_completed||!1,_=e.filter(x=>x.is_completed).length,S=e.length,w=S>0?Math.round(_/S*100):0;return c.jsxs("div",{className:`${Ze.routineCard} ${Ze[n.type]} ${E?Ze.completed:""}`,children:[c.jsxs("div",{className:Ze.routineHeader,children:[c.jsxs("div",{className:Ze.routineInfo,children:[c.jsx("div",{className:Ze.routineName,children:n.name}),c.jsxs("span",{className:`${Ze.routineType} ${Ze[n.type]}`,children:[n.type==="morning"?"":n.type==="evening"?"":""," ",n.type]})]}),n.streak&&n.streak.current_streak>0&&c.jsxs("div",{className:Ze.routineStreak,children:[" ",n.streak.current_streak," day",n.streak.current_streak!==1?"s":""]})]}),n.description&&c.jsx("div",{className:Ze.routineDesc,children:n.description}),g&&c.jsxs("div",{className:Ze.routineProgress,children:[c.jsx("div",{className:Ze.progressTrack,children:c.jsx("div",{className:Ze.progressFill,style:{width:`${w}%`}})}),c.jsxs("span",{className:Ze.progressText,children:[_,"/",S]})]}),g&&e.length>0&&c.jsx("div",{className:Ze.stepsList,children:e.map(x=>c.jsxs("div",{className:`${Ze.stepItem} ${x.is_completed?Ze.completed:""} ${x.skipped?Ze.skipped:""} ${x.is_optional?Ze.optional:""}`,children:[c.jsx("div",{className:`${Ze.stepCheckbox} ${x.is_completed?Ze.checked:""}`,onClick:()=>!x.is_completed&&!x.skipped&&!E&&a(x.id),children:x.is_completed&&""}),c.jsxs("div",{className:Ze.stepInfo,children:[c.jsx("div",{className:Ze.stepTitle,children:x.title}),c.jsxs("div",{className:Ze.stepMeta,children:[c.jsxs("span",{className:Ze.stepDuration,children:[" ",x.duration_minutes,"m"]}),x.is_optional&&c.jsx("span",{className:Ze.optionalBadge,children:"Optional"})]})]}),!x.is_completed&&!x.skipped&&!E&&x.is_optional&&c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>o(x.id),children:"Skip"})]},x.id))}),c.jsxs("div",{className:Ze.routineActions,children:[!g&&n.steps.length>0&&c.jsx(Ve,{variant:"primary",onClick:s,children:"Start Routine"}),E&&c.jsxs("span",{style:{color:"var(--buff-color)",fontFamily:"var(--font-heading)"},children:[" Completed Today (+",n.todayLog?.xp_earned||n.bonus_xp," XP)"]}),c.jsx("div",{style:{flex:1}}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:u,children:"Edit"}),c.jsx(Ve,{size:"small",variant:"danger",onClick:h,children:"Delete"})]})]})}function Iq({routine:n,onClose:e,onAddStep:s,onDeleteStep:a}){const[o,u]=L.useState(""),[h,g]=L.useState(""),[E,_]=L.useState(5),[S,w]=L.useState(!1),x=()=>{o.trim()&&(s(n.id,o.trim(),h.trim(),null,E,S),u(""),g(""),_(5),w(!1))};return c.jsx(kl,{open:!0,onClose:e,title:`Edit: ${n.name}`,actions:c.jsx(Ve,{onClick:e,children:"Done"}),children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[c.jsxs("div",{className:Ze.formSection,children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Add Step"}),c.jsx($i,{label:"Step Title",value:o,onChange:B=>u(B.target.value),placeholder:"e.g., Drink water"}),c.jsxs("div",{className:Ze.formRow,children:[c.jsx($i,{label:"Duration (min)",type:"number",value:E,onChange:B=>_(Number(B.target.value)),min:1,max:120}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,paddingTop:20},children:[c.jsx("input",{type:"checkbox",checked:S,onChange:B=>w(B.target.checked)}),c.jsx("label",{children:"Optional"})]})]}),c.jsx(Ve,{variant:"primary",onClick:x,children:"Add Step"})]}),n.steps.length>0&&c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Current Steps"}),c.jsx("div",{className:Ze.stepsList,children:n.steps.map((B,X)=>c.jsxs("div",{className:`${Ze.stepItem} ${B.is_optional?Ze.optional:""}`,children:[c.jsxs("span",{style:{color:"var(--text-dim)",minWidth:24},children:[X+1,"."]}),c.jsxs("div",{className:Ze.stepInfo,children:[c.jsx("div",{className:Ze.stepTitle,children:B.title}),c.jsxs("div",{className:Ze.stepMeta,children:[c.jsxs("span",{className:Ze.stepDuration,children:[" ",B.duration_minutes,"m"]}),B.is_optional&&c.jsx("span",{className:Ze.optionalBadge,children:"Optional"})]})]}),c.jsx(Ve,{size:"small",variant:"danger",onClick:()=>a(B.id),children:"Remove"})]},B.id))})]})]})})}const kq="_comboPanel_1yu75_1",Lq="_comboGrid_1yu75_13",jq="_comboCard_1yu75_25",Dq="_ready_1yu75_53",Oq="_inProgress_1yu75_65",Mq="_comboHeader_1yu75_73",Uq="_comboIcon_1yu75_87",Vq="_comboInfo_1yu75_95",qq="_comboName_1yu75_103",Bq="_comboXp_1yu75_115",Pq="_comboDesc_1yu75_127",Fq="_comboBuffs_1yu75_139",zq="_comboBuff_1yu75_139",Hq="_active_1yu75_177",Gq="_missing_1yu75_189",Xq="_buffCheck_1yu75_197",$q="_comboProgress_1yu75_205",Yq="_progressTrack_1yu75_219",Qq="_progressFill_1yu75_235",Kq="_complete_1yu75_249",Wq="_progressText_1yu75_257",Jq="_comboActions_1yu75_271",Zq="_emptyState_1yu75_313",Ht={comboPanel:kq,comboGrid:Lq,comboCard:jq,ready:Dq,inProgress:Oq,comboHeader:Mq,comboIcon:Uq,comboInfo:Vq,comboName:qq,comboXp:Bq,comboDesc:Pq,comboBuffs:Fq,comboBuff:zq,active:Hq,missing:Gq,buffCheck:Xq,comboProgress:$q,progressTrack:Yq,progressFill:Qq,complete:Kq,progressText:Wq,comboActions:Jq,emptyState:Zq};function eB({combos:n,loading:e,onClaimCombo:s,compact:a=!1}){const o=n.filter(g=>g.is_ready),u=n.filter(g=>g.progress>0&&!g.is_ready),h=n.filter(g=>g.progress===0);return e?c.jsx(qt,{header:"Habit Combos",children:c.jsx("div",{className:Ht.emptyState,children:"Loading combos..."})}):n.length===0?c.jsx(qt,{header:"Habit Combos",children:c.jsx("div",{className:Ht.emptyState,children:"No combos available. Create buff definitions to unlock combos!"})}):c.jsxs("div",{className:Ht.comboPanel,children:[o.length>0&&c.jsx(qt,{header:"Ready to Claim!",glow:!0,children:c.jsx("div",{className:Ht.comboGrid,children:o.map(g=>c.jsx(Um,{combo:g,onClaim:()=>s(g.id)},g.id))})}),u.length>0&&c.jsx(qt,{header:"In Progress",children:c.jsx("div",{className:Ht.comboGrid,children:u.map(g=>c.jsx(Um,{combo:g},g.id))})}),h.length>0&&c.jsx(qt,{header:"Available Combos",children:c.jsx("div",{className:Ht.comboGrid,children:h.map(g=>c.jsx(Um,{combo:g},g.id))})})]})}function Um({combo:n,onClaim:e}){const s=JSON.parse(n.required_buffs);return c.jsxs("div",{className:`${Ht.comboCard} ${n.is_ready?Ht.ready:n.progress>0?Ht.inProgress:""}`,children:[c.jsxs("div",{className:Ht.comboHeader,children:[c.jsx("span",{className:Ht.comboIcon,children:n.icon}),c.jsxs("div",{className:Ht.comboInfo,children:[c.jsx("div",{className:Ht.comboName,children:n.name}),c.jsxs("div",{className:Ht.comboXp,children:["+",n.bonus_xp," XP"]})]})]}),c.jsx("div",{className:Ht.comboDesc,children:n.description}),c.jsx("div",{className:Ht.comboBuffs,children:n.required_buff_names.map((a,o)=>{const u=s[o],h=n.active_buff_ids.includes(u);return c.jsxs("div",{className:`${Ht.comboBuff} ${h?Ht.active:Ht.missing}`,children:[c.jsx("span",{className:Ht.buffCheck,children:h?"":""}),a]},o)})}),c.jsxs("div",{className:Ht.comboProgress,children:[c.jsx("div",{className:Ht.progressTrack,children:c.jsx("div",{className:`${Ht.progressFill} ${n.progress===100?Ht.complete:""}`,style:{width:`${n.progress}%`}})}),c.jsxs("span",{className:Ht.progressText,children:[n.progress,"%"]})]}),n.is_ready&&e&&c.jsx("div",{className:Ht.comboActions,children:c.jsx(Ve,{variant:"primary",onClick:e,style:{width:"100%"},children:"Claim Combo!"})}),n.last_activated&&!n.is_ready&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textAlign:"center"},children:["Last claimed: ",new Date(n.last_activated+"Z").toLocaleDateString()]})]})}const tB="_weeklyReviewPanel_1ro8g_1",nB="_weekHeader_1ro8g_13",sB="_weekTitle_1ro8g_27",iB="_weekDates_1ro8g_39",aB="_summaryGrid_1ro8g_49",rB="_summaryCard_1ro8g_61",oB="_summaryIcon_1ro8g_83",lB="_summaryValue_1ro8g_93",cB="_summaryLabel_1ro8g_105",uB="_highlight_1ro8g_121",dB="_reflectionSection_1ro8g_131",fB="_reflectionField_1ro8g_143",hB="_reflectionLabel_1ro8g_155",mB="_reflectionIcon_1ro8g_173",pB="_reflectionTextarea_1ro8g_181",_B="_prioritiesSection_1ro8g_223",gB="_priorityInput_1ro8g_235",yB="_priorityList_1ro8g_277",EB="_priorityItem_1ro8g_289",vB="_priorityNumber_1ro8g_309",TB="_priorityText_1ro8g_321",bB="_removeBtn_1ro8g_331",SB="_completedBanner_1ro8g_357",NB="_completedIcon_1ro8g_385",wB="_actions_1ro8g_393",xB="_emptyState_1ro8g_497",AB="_compactPanel_1ro8g_533",RB="_compactMessage_1ro8g_545",CB="_compactCompletedBanner_1ro8g_559",IB="_compactSummary_1ro8g_587",kB="_compactStat_1ro8g_601",LB="_compactActions_1ro8g_631",Ge={weeklyReviewPanel:tB,weekHeader:nB,weekTitle:sB,weekDates:iB,summaryGrid:aB,summaryCard:rB,summaryIcon:oB,summaryValue:lB,summaryLabel:cB,highlight:uB,reflectionSection:dB,reflectionField:fB,reflectionLabel:hB,reflectionIcon:mB,reflectionTextarea:pB,prioritiesSection:_B,priorityInput:gB,priorityList:yB,priorityItem:EB,priorityNumber:vB,priorityText:TB,removeBtn:bB,completedBanner:SB,completedIcon:NB,actions:wB,emptyState:xB,compactPanel:AB,compactMessage:RB,compactCompletedBanner:CB,compactSummary:IB,compactStat:kB,compactActions:LB};function jB({currentReview:n,loading:e,onGenerateSummary:s,onUpdateContent:a,onCompleteReview:o,getSummaryFromReview:u,getPrioritiesFromReview:h,getWeekStart:g,compact:E=!1}){const[_,S]=L.useState(""),[w,x]=L.useState(""),[B,X]=L.useState([]),[V,U]=L.useState(""),[z,G]=L.useState(""),[K,oe]=L.useState(null),[ye,ge]=L.useState(!1);L.useEffect(()=>{n&&(S(n.wins),x(n.challenges),X(h(n)),U(n.notes),oe(u(n)))},[n,u,h]);const O=async()=>{ge(!0);const{summary:we}=await s();oe(we),ge(!1)},j=()=>{if(!z.trim()||B.length>=5)return;const we=[...B,z.trim()];X(we),G(""),a(_,w,we,V)},M=we=>{const Je=B.filter((se,Te)=>Te!==we);X(Je),a(_,w,Je,V)},q=()=>{a(_,w,B,V)},R=()=>{q(),o()},D=we=>{const Je=new Date(we),se=new Date(we);return se.setDate(se.getDate()+6),`${Je.toLocaleDateString()} - ${se.toLocaleDateString()}`};if(e)return c.jsx(qt,{header:"Weekly Review",children:c.jsx("div",{className:Ge.emptyState,children:"Loading..."})});if(E){const we=n?.is_completed,Je=n?u(n):K;return!n&&!K?c.jsxs("div",{className:Ge.compactPanel,children:[c.jsx("p",{className:Ge.compactMessage,children:"Generate your weekly summary to review your progress!"}),c.jsx(Ve,{variant:"primary",size:"small",onClick:O,disabled:ye,children:ye?"Generating...":"Generate Summary"})]}):c.jsxs("div",{className:Ge.compactPanel,children:[we&&c.jsxs("div",{className:Ge.compactCompletedBanner,children:[" Completed (+",n?.xp_earned||_l," XP)"]}),Je&&c.jsxs("div",{className:Ge.compactSummary,children:[c.jsxs("div",{className:Ge.compactStat,children:[c.jsx("span",{children:""})," ",Je.steps_completed," Steps"]}),c.jsxs("div",{className:Ge.compactStat,children:[c.jsx("span",{children:""})," ",Je.quests_completed," Quests"]}),c.jsxs("div",{className:Ge.compactStat,children:[c.jsx("span",{children:""})," ",Je.xp_earned," XP"]}),c.jsxs("div",{className:Ge.compactStat,children:[c.jsx("span",{children:""})," ",Je.focus_sessions," Focus"]})]}),!we&&c.jsx("div",{className:Ge.compactActions,children:c.jsxs(Ve,{variant:"primary",size:"small",onClick:R,children:["Complete Review (+",_l," XP)"]})})]})}if(!n&&!K)return c.jsx(qt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:Ge.weeklyReviewPanel,children:[c.jsxs("div",{className:Ge.weekHeader,children:[c.jsx("span",{className:Ge.weekTitle,children:"This Week's Review"}),c.jsx("span",{className:Ge.weekDates,children:D(g())})]}),c.jsxs("div",{className:Ge.emptyState,children:[c.jsx("p",{children:"Generate your weekly summary to review your progress!"}),c.jsx(Ve,{variant:"primary",onClick:O,disabled:ye,style:{marginTop:16},children:ye?"Generating...":"Generate Summary"})]})]})});const k=n?.is_completed;return c.jsx(qt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:Ge.weeklyReviewPanel,children:[c.jsxs("div",{className:Ge.weekHeader,children:[c.jsxs("span",{className:Ge.weekTitle,children:["Week of ",n?.week_start||g()]}),c.jsx("span",{className:Ge.weekDates,children:D(n?.week_start||g())})]}),k&&c.jsxs("div",{className:Ge.completedBanner,children:[c.jsx("span",{className:Ge.completedIcon,children:""}),"Review Completed (+",n?.xp_earned||_l," XP)"]}),K&&c.jsxs("div",{className:Ge.summaryGrid,children:[c.jsx(dr,{icon:"",value:K.steps_completed,label:"Steps"}),c.jsx(dr,{icon:"",value:K.quests_completed,label:"Quests"}),c.jsx(dr,{icon:"",value:K.goals_completed,label:"Goals",highlight:!0}),c.jsx(dr,{icon:"",value:K.buffs_activated,label:"Buffs"}),c.jsx(dr,{icon:"",value:K.xp_earned,label:"XP Earned",highlight:!0}),c.jsx(dr,{icon:"",value:K.boss_damage_dealt,label:"Boss Dmg"}),c.jsx(dr,{icon:"",value:K.focus_sessions,label:"Focus"}),c.jsx(dr,{icon:"",value:K.routines_completed,label:"Routines"})]}),c.jsxs("div",{className:Ge.reflectionSection,children:[c.jsxs("div",{className:Ge.reflectionField,children:[c.jsxs("label",{className:Ge.reflectionLabel,children:[c.jsx("span",{className:Ge.reflectionIcon,children:""}),"Wins This Week"]}),c.jsx("textarea",{className:Ge.reflectionTextarea,value:_,onChange:we=>S(we.target.value),onBlur:q,placeholder:"What went well? What are you proud of?",disabled:k})]}),c.jsxs("div",{className:Ge.reflectionField,children:[c.jsxs("label",{className:Ge.reflectionLabel,children:[c.jsx("span",{className:Ge.reflectionIcon,children:""}),"Challenges & Learnings"]}),c.jsx("textarea",{className:Ge.reflectionTextarea,value:w,onChange:we=>x(we.target.value),onBlur:q,placeholder:"What was difficult? What did you learn?",disabled:k})]}),c.jsxs("div",{className:Ge.reflectionField,children:[c.jsxs("label",{className:Ge.reflectionLabel,children:[c.jsx("span",{className:Ge.reflectionIcon,children:""}),"Priorities for Next Week (up to 5)"]}),c.jsxs("div",{className:Ge.prioritiesSection,children:[!k&&B.length<5&&c.jsxs("div",{className:Ge.priorityInput,children:[c.jsx("input",{type:"text",value:z,onChange:we=>G(we.target.value),placeholder:"Add a priority...",onKeyDown:we=>we.key==="Enter"&&j()}),c.jsx(Ve,{size:"small",onClick:j,children:"Add"})]}),B.length>0&&c.jsx("div",{className:Ge.priorityList,children:B.map((we,Je)=>c.jsxs("div",{className:Ge.priorityItem,children:[c.jsxs("span",{className:Ge.priorityNumber,children:[Je+1,"."]}),c.jsx("span",{className:Ge.priorityText,children:we}),!k&&c.jsx("button",{className:Ge.removeBtn,onClick:()=>M(Je),children:""})]},Je))})]})]}),c.jsxs("div",{className:Ge.reflectionField,children:[c.jsxs("label",{className:Ge.reflectionLabel,children:[c.jsx("span",{className:Ge.reflectionIcon,children:""}),"Additional Notes"]}),c.jsx("textarea",{className:Ge.reflectionTextarea,value:V,onChange:we=>U(we.target.value),onBlur:q,placeholder:"Any other thoughts or notes...",disabled:k})]})]}),!k&&c.jsxs("div",{className:Ge.actions,children:[c.jsx(Ve,{variant:"ghost",onClick:O,disabled:ye,children:"Refresh Summary"}),c.jsxs(Ve,{variant:"primary",onClick:R,children:["Complete Review (+",_l," XP)"]})]})]})})}function dr({icon:n,value:e,label:s,highlight:a}){return c.jsxs("div",{className:`${Ge.summaryCard} ${a?Ge.highlight:""}`,children:[c.jsx("span",{className:Ge.summaryIcon,children:n}),c.jsx("span",{className:Ge.summaryValue,children:e}),c.jsx("span",{className:Ge.summaryLabel,children:s})]})}const DB="_guideButton_1u1py_1",OB="_guideOverlay_1u1py_71",MB="_guideContainer_1u1py_95",UB="_guideHeader_1u1py_159",VB="_guideTitle_1u1py_177",qB="_closeButton_1u1py_191",BB="_guideContent_1u1py_229",PB="_table_1u1py_335",FB="_tocList_1u1py_393",zB="_tocItem_1u1py_411",Hn={guideButton:DB,guideOverlay:OB,guideContainer:MB,guideHeader:UB,guideTitle:VB,closeButton:qB,guideContent:BB,table:PB,tocList:FB,tocItem:zB};function HB(){const[n,e]=L.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:Hn.guideButton,onClick:()=>e(!0),title:"Open Guide",children:"?"}),n&&c.jsx(GB,{onClose:()=>e(!1)})]})}function GB({onClose:n}){const e=L.useRef(null);L.useEffect(()=>{const a=o=>{o.key==="Escape"&&n()};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=""}},[n]);const s=a=>{e.current?.querySelector(`#${a}`)?.scrollIntoView({behavior:"smooth"})};return c.jsx("div",{className:Hn.guideOverlay,onClick:n,children:c.jsxs("div",{className:Hn.guideContainer,onClick:a=>a.stopPropagation(),ref:e,children:[c.jsxs("div",{className:Hn.guideHeader,children:[c.jsx("span",{className:Hn.guideTitle,children:"Adventurer's Guide"}),c.jsx("button",{className:Hn.closeButton,onClick:n,children:"Close"})]}),c.jsx("ul",{className:Hn.tocList,children:["overview","character","quests","buffs","achievements","energy","focus","routines","combos","review","events","skills","classes","territory","inventory","xp","levels","stats","tips","data"].map(a=>c.jsx("li",{className:Hn.tocItem,onClick:()=>s(`guide-${a}`),children:{xp:"XP System",data:"Save Data",achievements:"Achievements",energy:"Energy",focus:"Focus Timer",routines:"Routines",combos:"Habit Combos",review:"Weekly Review",events:"Random Events",skills:"Skill Trees",classes:"Classes",territory:"Territory Map",inventory:"Inventory"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},a))}),c.jsxs("div",{className:Hn.guideContent,children:[c.jsx("h2",{id:"guide-overview",children:"Overview"}),c.jsxs("p",{children:["Goal Game turns your real-life goals into an RPG adventure. You create ",c.jsx("strong",{children:"Goals"})," (big-picture ambitions), break them into ",c.jsx("strong",{children:"Quests"})," (projects), and then into ",c.jsx("strong",{children:"Steps"})," (individual tasks). Completing steps earns ",c.jsx("strong",{children:"XP"}),", which levels up your character."]}),c.jsxs("p",{children:["Track daily habits as ",c.jsx("strong",{children:"Buffs"})," (positive) and ",c.jsx("strong",{children:"Debuffs"})," (negative) that affect your character's stats."]}),c.jsx("h2",{id:"guide-character",children:"Character Screen"}),c.jsx("p",{children:"Your character screen shows your current progress at a glance."}),c.jsx("h3",{children:"What you'll see"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Name"}),`  Tap "Rename" to change your character's name.`]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Level & Title"}),'  Your current level and rank title (e.g., "Novice", "Adept"). Titles change automatically as you level up.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP Bar"}),"  Shows progress toward your next level. The numbers show current XP in this level / XP needed for next level."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Total XP"}),"  Your lifetime XP earned across all activities."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Stats"}),"  Five attributes (Stamina, Willpower, Health, Focus, Charisma) that start at 10 and change based on your active buffs/debuffs."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Effects"}),"  Currently active buffs (green pulse) and debuffs (red throb) with time remaining."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP History"}),"  A log of your most recent XP gains showing what you earned and why."]})]}),c.jsx("h2",{id:"guide-quests",children:"Quest Log"}),c.jsx("p",{children:"This is where you organize everything you want to accomplish."}),c.jsx("h3",{children:"Hierarchy"}),c.jsx("p",{children:"Life is organized in three layers:"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Goals"}),'  Big-picture ambitions tied to a life domain. Example: "Get fit" in the Health domain.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),'  Specific projects within a goal. Example: "Run a 5K" under "Get fit".']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Steps"}),'  Individual actionable tasks within a quest. Example: "Run 1 mile without stopping" inside "Run a 5K".']})]}),c.jsx("h3",{children:"Domains"}),c.jsx("p",{children:"Every goal belongs to one of eight life domains:"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Icon"}),c.jsx("th",{children:"Domain"}),c.jsx("th",{children:"Examples"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Fitness, diet, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Career"}),c.jsx("td",{children:"Work projects, promotions, skills"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Learning"}),c.jsx("td",{children:"Courses, reading, certifications"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Social"}),c.jsx("td",{children:"Relationships, networking, community"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Finance"}),c.jsx("td",{children:"Saving, investing, budgeting"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Creative"}),c.jsx("td",{children:"Art, music, writing, hobbies"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Spiritual"}),c.jsx("td",{children:"Meditation, mindfulness, gratitude"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Home"}),c.jsx("td",{children:"Cleaning, organizing, repairs"})]})]})]}),c.jsx("h3",{children:"Priority Levels"}),c.jsx("p",{children:"Quests and steps can have a priority that affects XP rewards:"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Priority"}),c.jsx("th",{children:"Color"}),c.jsx("th",{children:"Step XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Normal"}),c.jsx("td",{children:"Gray"}),c.jsx("td",{children:"10 XP"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Important"}),c.jsx("td",{children:"Gold"}),c.jsx("td",{children:"15 XP (1.5x)"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Legendary"}),c.jsx("td",{children:"Orange"}),c.jsx("td",{children:"20 XP (2x)"})]})]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Goal"}),"  pick a domain, give it a title."]}),c.jsxs("li",{children:["Inside a goal, tap ",c.jsx("strong",{children:"+ Quest"}),"  name the project, choose priority."]}),c.jsx("li",{children:'Tap a quest to expand it, then type steps in the "Add a step" field at the bottom.'}),c.jsx("li",{children:"Check off steps to earn XP. When all steps are done, the quest auto-completes for bonus XP. When all quests in a goal are done, the goal auto-completes for even more bonus XP."})]}),c.jsx("h3",{children:"Filters"}),c.jsx("p",{children:"Use the dropdowns at the top to filter by domain or status (Active / Completed / All)."}),c.jsx("h2",{id:"guide-buffs",children:"Buffs & Debuffs"}),c.jsx("p",{children:"Buffs and debuffs represent daily habits that affect your character."}),c.jsx("h3",{children:"Buffs (Positive Habits)"}),c.jsxs("p",{children:["Things you ",c.jsx("em",{children:"want"})," to do every day. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Morning Exercise  +2 Stamina, +1 Health"}),c.jsx("li",{children:" Meditation  +2 Willpower, +1 Focus"}),c.jsx("li",{children:" 8 Hours Sleep  +1 Health, +1 Focus, +1 Stamina"}),c.jsx("li",{children:" Read 30 Minutes  +2 Focus"})]}),c.jsxs("p",{children:["Activating a buff earns ",c.jsx("strong",{children:"5 XP"})," and applies its stat effects for the duration you set (e.g., 24 hours). After that, the buff expires and you need to activate it again the next day."]}),c.jsx("h3",{children:"Debuffs (Negative Habits)"}),c.jsxs("p",{children:["Things you want to be ",c.jsx("em",{children:"honest about tracking"}),". There is no XP penalty  this is for self-awareness. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Junk Food  -1 Health, -1 Stamina"}),c.jsx("li",{children:" Doomscrolling  -2 Focus, -1 Willpower"}),c.jsx("li",{children:" Alcohol  -1 Health, -1 Focus"})]}),c.jsx("p",{children:"Debuffs still affect your stats while active, shown as red on your character screen."}),c.jsx("h3",{children:"Streaks"}),c.jsxs("p",{children:["Activate the same buff on consecutive days to build a streak. Every ",c.jsx("strong",{children:"7-day streak"})," earns a bonus ",c.jsx("strong",{children:"25 XP"}),"."]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Buff/Debuff"})," to define a habit template."]}),c.jsx("li",{children:"Choose a name, type (buff or debuff), icon, duration in hours, and stat effects (positive numbers for buffs, negative for debuffs)."}),c.jsxs("li",{children:["Once created, it appears in the Buffs or Debuffs column. Tap ",c.jsx("strong",{children:"Activate"})," each day you do the habit."]}),c.jsx("li",{children:"Active effects appear at the top with a countdown timer and are reflected on your Character screen stats."})]}),c.jsx("h3",{children:"Expiry"}),c.jsxs("p",{children:["Buffs and debuffs expire automatically after their duration. The app checks every 60 seconds. You can also manually remove an active effect by tapping ",c.jsx("strong",{children:"Remove"}),"."]}),c.jsx("h2",{id:"guide-achievements",children:"Achievements"}),c.jsx("p",{children:"Unlock achievements by reaching milestones. Each achievement rewards XP when unlocked."}),c.jsx("h3",{children:"Categories"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),"  Complete steps, quests, and goals"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Buffs"}),"  Activate habits regularly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Streaks"}),"  Maintain consecutive day streaks"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Boss"}),"  Defeat weekly bosses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Levels"}),"  Reach level milestones (5, 10, 25, 50)"]})]}),c.jsx("p",{children:"View your progress in the Achievements panel. Some achievements are hidden until unlocked!"}),c.jsx("h2",{id:"guide-energy",children:"Energy System"}),c.jsx("p",{children:"Energy represents your daily capacity for action."}),c.jsx("h3",{children:"Mechanics"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Max Energy"}),"  Starts at 100"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Regeneration"}),"  Recovers 10 energy per hour automatically"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Costs"}),"  Some actions cost energy (completing steps: 5, activating buffs: 3)"]})]}),c.jsx("h3",{children:"Energy Debuffs"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Threshold"}),c.jsx("th",{children:"Debuff"}),c.jsx("th",{children:"Effects"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Below 20"}),c.jsx("td",{children:"Fatigued"}),c.jsx("td",{children:"-2 Focus, -2 Willpower"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Below 5"}),c.jsx("td",{children:"Exhausted"}),c.jsx("td",{children:"-3 Stamina, -3 Willpower, -3 Focus, -1 Health"})]})]})]}),c.jsx("p",{children:"Keep your energy up to avoid stat penalties!"}),c.jsx("h2",{id:"guide-focus",children:"Focus Timer"}),c.jsx("p",{children:"A Pomodoro-style timer to boost productivity."}),c.jsx("h3",{children:"How it works"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Work sessions"}),"  Default 25 minutes of focused work"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Short breaks"}),"  5 minutes after each session"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Long breaks"}),"  15 minutes after 4 sessions"]})]}),c.jsx("h3",{children:"XP Rewards"}),c.jsxs("ul",{children:[c.jsx("li",{children:"+15 XP per completed focus session"}),c.jsx("li",{children:"+5 XP bonus if linked to a quest step"}),c.jsx("li",{children:"+10 XP bonus every 4 consecutive sessions"})]}),c.jsx("p",{children:"Customize timer durations in Settings."}),c.jsx("h2",{id:"guide-routines",children:"Morning/Evening Routines"}),c.jsx("p",{children:"Create routine chains to build powerful habits."}),c.jsx("h3",{children:"Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Morning"}),"  Start your day right"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Evening"}),"  Wind down properly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Custom"}),"  Any time routines"]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsx("li",{children:"Create a routine with a name and bonus XP reward"}),c.jsx("li",{children:"Add steps to the routine (can be linked to buffs)"}),c.jsx("li",{children:"Start the routine each day and complete steps in order"}),c.jsx("li",{children:"Complete all required steps to earn the bonus XP"})]}),c.jsx("p",{children:"Routine streaks earn extra XP every 7 days!"}),c.jsx("h2",{id:"guide-combos",children:"Habit Combos"}),c.jsx("p",{children:"Activate specific buff combinations for bonus XP."}),c.jsx("h3",{children:"Example Combos"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wellness Warrior"}),"  Meditation + Exercise + Healthy Meal = +30 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Master"}),"  No Phone + Deep Work + Reading = +25 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Early Bird"}),"  Morning Exercise + 8 Hours Sleep + No Phone First Hour = +35 XP"]})]}),c.jsx("p",{children:"Combos can only be claimed once per day. Activate all required buffs within 24 hours to qualify."}),c.jsx("h2",{id:"guide-review",children:"Weekly Review"}),c.jsx("p",{children:"Reflect on your progress every week."}),c.jsx("h3",{children:"Summary Data"}),c.jsx("p",{children:"Auto-generated stats include: steps completed, quests completed, buffs activated, XP earned, boss damage dealt, focus sessions, and more."}),c.jsx("h3",{children:"Reflection Prompts"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wins"}),"  What went well this week?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenges"}),"  What was difficult?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Priorities"}),"  Set up to 5 priorities for next week"]})]}),c.jsxs("p",{children:["Completing your weekly review earns ",c.jsx("strong",{children:"100 XP"}),"."]}),c.jsx("h2",{id:"guide-events",children:"Random Events"}),c.jsx("p",{children:"Special limited-time opportunities that appear randomly."}),c.jsx("h3",{children:"Event Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Bonus"}),"  Instant rewards (XP, energy, shields)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenge"}),"  Complete objectives for rewards"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Modifier"}),"  Temporary boosts (double XP, stat increases)"]})]}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Events have different rarities: Common, Uncommon, Rare, Epic. Rarer events have better rewards!"}),c.jsx("p",{children:"Events have a 15% chance to trigger and a 4-hour cooldown between checks."}),c.jsx("h2",{id:"guide-skills",children:"Skill Trees"}),c.jsx("p",{children:"Spend XP to unlock permanent passive bonuses."}),c.jsx("h3",{children:"Branches"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity"})," (Blue)  Quest and step XP bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Health"})," (Red)  Energy and stamina bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus"})," (Purple)  Timer and concentration bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Social"})," (Orange)  Streak and charisma bonuses"]})]}),c.jsx("h3",{children:"How to unlock"}),c.jsx("p",{children:"Skills cost XP to unlock (100-500 XP per node). You must unlock prerequisite skills first. Capstone skills at the end of each branch provide the biggest bonuses."}),c.jsx("h2",{id:"guide-classes",children:"Character Classes"}),c.jsx("p",{children:"Choose a class to specialize your character."}),c.jsx("h3",{children:"Available Classes"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Class"}),c.jsx("th",{children:"Stat Bonuses"}),c.jsx("th",{children:"XP Bonus"}),c.jsx("th",{children:"Special"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Warrior"}),c.jsx("td",{children:"+3 Stamina, +2 Health"}),c.jsx("td",{children:"+10% Quest XP"}),c.jsx("td",{children:"Battlecry"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Mage"}),c.jsx("td",{children:"+3 Focus, +2 Willpower"}),c.jsx("td",{children:"+10% Buff XP"}),c.jsx("td",{children:"Arcane Focus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Ranger"}),c.jsx("td",{children:"+3 Willpower, +1 Stamina, +1 Focus"}),c.jsx("td",{children:"+10% Streak XP"}),c.jsx("td",{children:"Tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Paladin"}),c.jsx("td",{children:"+2 Health, +2 Willpower, +1 Charisma"}),c.jsx("td",{children:"+10% Boss XP"}),c.jsx("td",{children:"Divine Shield"})]})]})]}),c.jsx("p",{children:"You can change your class up to 3 times total."}),c.jsx("h2",{id:"guide-territory",children:"Territory Map"}),c.jsx("p",{children:"Explore regions as you level up."}),c.jsx("h3",{children:"Territories"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"The Awakening Glade"})," (Level 1)  Where every journey begins"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Habit Highlands"})," (Level 5)  Rocky terrain for consistent habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Forest"})," (Level 10)  Dense woods for the focused"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity Plains"})," (Level 15)  Vast fields for goal achievers"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Summit of Mastery"})," (Level 25)  The peak for true masters"]})]}),c.jsx("p",{children:"Complete territory challenges to unlock rewards and earn special titles!"}),c.jsx("h2",{id:"guide-inventory",children:"Inventory & Items"}),c.jsx("p",{children:"Collect and equip items for stat bonuses."}),c.jsx("h3",{children:"Item Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Equipment"}),"  Weapons, armor, accessories with stat bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Consumables"}),"  One-time use items (energy potions, XP elixirs)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Trophies"}),"  Special commemorative items from achievements"]})]}),c.jsx("h3",{children:"Equipment Slots"}),c.jsx("p",{children:"You can equip one item in each slot: Weapon, Armor, Accessory."}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Items come in 5 rarities: Common (gray), Uncommon (green), Rare (blue), Epic (purple), Legendary (orange)."}),c.jsx("p",{children:"Items drop from achievements, boss defeats, and random events."}),c.jsx("h2",{id:"guide-xp",children:"XP System"}),c.jsx("p",{children:"Everything you do earns experience points:"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Action"}),c.jsx("th",{children:"XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a normal step"}),c.jsx("td",{children:"+10"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete an important step"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a legendary step"}),c.jsx("td",{children:"+20"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a quest (all steps done)"}),c.jsx("td",{children:"+50 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a goal (all quests done)"}),c.jsx("td",{children:"+200 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a buff (daily habit)"}),c.jsx("td",{children:"+5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"7-day streak on any buff"}),c.jsx("td",{children:"+25 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a focus session"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a routine"}),c.jsx("td",{children:"+25"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a habit combo"}),c.jsx("td",{children:"+25-35"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete weekly review"}),c.jsx("td",{children:"+100"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Unlock an achievement"}),c.jsx("td",{children:"+25-500"})]})]})]}),c.jsx("h2",{id:"guide-levels",children:"Levels & Titles"}),c.jsxs("p",{children:["XP needed per level increases as you grow. The formula is ",c.jsx("code",{children:"50  level^1.8"}),"."]}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Level"}),c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Approx. Timeline"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"14"}),c.jsx("td",{children:"Novice"}),c.jsx("td",{children:"Starting out"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"59"}),c.jsx("td",{children:"Apprentice"}),c.jsx("td",{children:"~12 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1014"}),c.jsx("td",{children:"Journeyman"}),c.jsx("td",{children:"~34 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1521"}),c.jsx("td",{children:"Adept"}),c.jsx("td",{children:"~12 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2229"}),c.jsx("td",{children:"Expert"}),c.jsx("td",{children:"~24 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3039"}),c.jsx("td",{children:"Master"}),c.jsx("td",{children:"~48 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"4049"}),c.jsx("td",{children:"Legend"}),c.jsx("td",{children:"~812 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"50+"}),c.jsx("td",{children:"Dragonborn"}),c.jsx("td",{children:"~1 year+"})]})]})]}),c.jsx("p",{children:"When you level up, a golden overlay appears announcing your new level and title."}),c.jsx("h2",{id:"guide-stats",children:"Stats"}),c.jsxs("p",{children:["Your character has five stats, all starting at ",c.jsx("strong",{children:"10"}),":"]}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Stat"}),c.jsx("th",{children:"Represents"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Stamina"}),c.jsx("td",{children:"Physical energy, endurance, exercise habits"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Willpower"}),c.jsx("td",{children:"Discipline, self-control, mental toughness"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Physical wellbeing, nutrition, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Focus"}),c.jsx("td",{children:"Concentration, productivity, mental clarity"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Charisma"}),c.jsx("td",{children:"Social skills, confidence, communication"})]})]})]}),c.jsx("h3",{children:"Stat Sources"}),c.jsx("p",{children:"Your final stats are calculated from multiple sources:"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Base"}),"  10 in each stat"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Buffs/Debuffs"}),"  Temporary effects from habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Equipped Items"}),"  Bonuses from weapons, armor, accessories"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Skill Tree"}),"  Permanent passive bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Character Class"}),"  Class-specific bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Energy Debuffs"}),"  Penalties when energy is low"]})]}),c.jsx("p",{children:"Stats serve as a mirror of your current lifestyle  high Focus means you've been studying and avoiding distractions; low Health means you've been eating junk food or skipping sleep."}),c.jsx("h2",{id:"guide-tips",children:"Tips"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Start small."})," Create one goal with one quest and a few steps. Don't overload yourself on day one."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Be honest with debuffs."})," There's no punishment  tracking negative habits helps you see patterns."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Use priorities wisely."}),' Reserve "Legendary" for truly difficult or impactful tasks.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Build streaks."})," The 7-day streak bonus compounds  maintaining 3 daily buffs earns 75 bonus XP per week on top of the daily 5 XP each."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Check your character screen daily."})," Your stats tell you how balanced your life is."]})]}),c.jsx("h2",{id:"guide-data",children:"Saving & Data"}),c.jsx("p",{children:"All your data is stored locally on this device in the browser's database. It persists across sessions  closing and reopening the app keeps everything."}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Export Save"}),"  Downloads your entire database as a .db file. Use this for backups."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Import Save"}),"  Loads a previously exported .db file, replacing all current data. Use this to restore a backup or transfer data between devices."]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Important:"})," Clearing your browser/app data will erase your progress. Export a backup regularly."]}),c.jsx("h3",{children:"Keyboard Shortcuts (Desktop)"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Key"}),c.jsx("th",{children:"Action"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"1"}),c.jsx("td",{children:"Character screen"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2"}),c.jsx("td",{children:"Quest Log"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3"}),c.jsx("td",{children:"Buffs"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Esc"}),c.jsx("td",{children:"Close any open modal/popup"})]})]})]})]})]})})}function XB(){const{ready:n,error:e}=Aw(),[s,a]=L.useState("character");return n?c.jsx($B,{activeTab:s,setActiveTab:a}):c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a0f",color:"#c8a84e",fontFamily:"Cinzel, serif",fontSize:"1.2rem"},children:e?`Error: ${e}`:"Loading database..."})}function $B({activeTab:n,setActiveTab:e}){const s=Uw(),a=OL({grantXP:s.grantXP}),o=PL({grantXP:s.grantXP,addShields:a.addShields}),u=bL({grantXP:s.grantXP}),h=ZL(),g=YL({grantXP:s.grantXP}),E=$j({totalXP:s.character.total_xp}),_=eD(),S=lD({characterLevel:s.character.level,grantXP:s.grantXP}),w=pD({grantXP:s.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),x=rj({grantXP:s.grantXP,onSessionComplete:()=>{g.incrementProgress("focus_sessions_completed",1),o.dealDamage("focus_session","Focus session completed")}}),B=Tj({grantXP:s.grantXP,onRoutineComplete:R=>{g.incrementProgress("routines_completed",1),o.dealDamage("routine_completed","Routine completed")}}),X=Rj({grantXP:s.grantXP}),V=Oj({grantXP:s.grantXP}),U=Pj({grantXP:s.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),z=tx({grantXP:s.grantXP,onStepComplete:()=>{u.updateProgress("complete_steps",1),o.dealDamage("step_completed","Completed a step"),g.incrementProgress("steps_completed",1)},onQuestComplete:()=>{o.dealDamage("quest_completed","Completed a quest"),g.incrementProgress("quests_completed",1)},onGoalComplete:()=>{o.dealDamage("goal_completed","Completed a goal"),g.incrementProgress("goals_completed",1)},onStepMissed:async R=>{await lx(R),K.refresh()}}),G=k1(),K=fx({grantXP:s.grantXP,deductXP:s.deductXP,scheduleBuffExpiry:G.scheduleBuffExpiry,cancelBuffExpiry:G.cancelBuffExpiry,onBuffActivated:R=>{u.updateProgress("activate_buffs",1),new Date().getHours()<8&&u.updateProgress("early_start",1),R==="buff"&&(u.updateProgress("activate_specific",1),o.dealDamage("buff_activated","Activated a buff"),g.incrementProgress("buffs_activated",1)),a.refresh(),X.checkAndActivateCombos()}}),oe=Sx(),[ye,ge]=L.useState(!1),[O,j]=L.useState(!1);L.useEffect(()=>{s.refresh(),n==="quests"&&z.refresh(),n==="buffs"&&(K.refresh(),a.refresh(),X.refresh()),n==="focus"&&x.refresh(),n==="skills"&&(E.refresh(),_.refresh(),S.refresh()),n==="inventory"&&w.refresh()},[n]),L.useEffect(()=>{z.refresh(),K.refresh(),a.refresh(),h.refresh(),g.refresh(),u.checkNoDebuffs()},[]),L.useEffect(()=>{g.checkThreshold("character_level",s.character.level)},[s.character.level]),L.useEffect(()=>{const R=D=>{D.target instanceof HTMLInputElement||D.target instanceof HTMLTextAreaElement||D.target instanceof HTMLSelectElement||(D.key==="1"&&e("character"),D.key==="2"&&e("quests"),D.key==="3"&&e("buffs"),D.key==="4"&&e("focus"),D.key==="5"&&e("skills"),D.key==="6"&&e("inventory"))};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[e]);const M=L.useCallback(async()=>{const R=await pp(),D=new Blob([new Uint8Array(R)],{type:"application/octet-stream"}),k=URL.createObjectURL(D),we=document.createElement("a");we.href=k,we.download=`goal-game-backup-${new Date().toISOString().split("T")[0]}.db`,we.click(),URL.revokeObjectURL(k)},[]),q=L.useCallback(async()=>{const R=document.createElement("input");R.type="file",R.accept=".db",R.onchange=async()=>{const D=R.files?.[0];if(!D)return;const k=await D.arrayBuffer();await tb(new Uint8Array(k)),window.location.reload()},R.click()},[]);return c.jsxs("div",{className:Dn.appShell,children:[c.jsx(OD,{activeTab:n,onTabChange:e}),c.jsx(lO,{character:s.character,energyState:h.state}),c.jsxs("main",{className:Dn.main,children:[n==="character"&&c.jsxs(c.Fragment,{children:[c.jsx(i4,{character:s.character,stats:K.stats}),U.activeEvents.length>0&&c.jsx("div",{style:{marginBottom:12},children:U.activeEvents.map(R=>c.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(200,168,78,0.2), rgba(200,168,78,0.1))",border:"1px solid var(--border-gold)",borderRadius:8,padding:"10px 14px",marginBottom:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("span",{style:{fontSize:"1.1rem"},children:R.template.icon}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"var(--gold)",fontSize:"0.9rem"},children:R.template.name}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:R.template.description})]})]}),!R.is_claimed&&c.jsx(Ve,{size:"small",onClick:()=>U.claimEvent(R.id),children:"Claim"})]},R.id))}),c.jsxs(ol,{title:"Today's Tasks",icon:"",badge:`${u.completedCount}/${u.quests.length}`,badgeColor:u.allCompleted?"green":"gold",defaultExpanded:!0,children:[c.jsx(IU,{quests:u.quests,loading:u.loading,allCompleted:u.allCompleted,completedCount:u.completedCount,bonusClaimed:u.bonusClaimed,bonusXp:u.bonusXp,totalXpEarned:u.totalXpEarned,onClaimBonus:async()=>{await u.claimBonus();for(const R of u.quests)R.is_completed&&o.dealDamage("daily_quest_completed",`Daily Quest: ${R.title}`)},compact:!0}),B.routines.length>0&&c.jsx("div",{style:{marginTop:16},children:c.jsx(Cq,{routines:B.routines,loading:B.loading,onCreateRoutine:B.createRoutine,onDeleteRoutine:B.deleteRoutine,onStartRoutine:B.startRoutine,onCompleteStep:B.completeStep,onSkipStep:B.skipStep,onAddStep:B.addStep,onDeleteStep:B.deleteStep,getStepsWithStatus:B.getStepsWithStatus,compact:!0})})]}),c.jsx(ol,{title:"Weekly Boss",icon:"",badge:o.boss?.is_defeated?"Defeated!":`${o.hpPercentage}% HP`,badgeColor:o.boss?.is_defeated?"green":o.hpPercentage<30?"red":"gold",headerContent:!o.boss?.is_defeated&&c.jsx("div",{style:{width:80,height:6,background:"var(--bg-dark)",borderRadius:3,overflow:"hidden"},children:c.jsx("div",{style:{width:`${o.hpPercentage}%`,height:"100%",background:o.hpPercentage<30?"#ef4444":"#22c55e",borderRadius:3}})}),children:c.jsx(S9,{boss:o.boss,loading:o.loading,weekStart:o.weekStart,weekEnd:o.weekEnd,hpPercentage:o.hpPercentage,damageDealt:o.damageDealt,totalDefeated:o.totalDefeated,compact:!0})}),X.combos.length>0&&c.jsx(ol,{title:"Combos",icon:"",badge:X.combos.filter(R=>R.is_ready).length>0?`${X.combos.filter(R=>R.is_ready).length} ready!`:void 0,badgeColor:"green",children:c.jsx(eB,{combos:X.combos,loading:X.loading,onClaimCombo:X.claimCombo,compact:!0})}),c.jsx(ol,{title:"Character Stats",icon:"",badge:`Lv.${s.character.level}`,badgeColor:"gold",children:c.jsx(H3,{character:s.character,stats:K.stats,activeBuffs:K.activeBuffs,xpLog:s.xpLog,onNameChange:s.setName,compact:!0})}),c.jsx(ol,{title:"Achievements",icon:"",badge:`${g.stats.unlocked}/${g.stats.total}`,badgeColor:g.stats.unlocked===g.stats.total?"green":"gold",children:c.jsx(oV,{achievements:g.achievements,stats:g.stats,loading:g.loading,compact:!0})}),!V.currentReview?.is_completed&&c.jsx(ol,{title:"Weekly Review",icon:"",badge:"Due",badgeColor:"blue",children:c.jsx(jB,{currentReview:V.currentReview,loading:V.loading,onGenerateSummary:V.generateSummary,onUpdateContent:V.updateContent,onCompleteReview:V.completeReview,getSummaryFromReview:V.getSummaryFromReview,getPrioritiesFromReview:V.getPrioritiesFromReview,getWeekStart:V.getWeekStart,compact:!0})})]}),n==="quests"&&c.jsx(F5,{goals:z.goals,domains:z.domains,filterDomain:z.filterDomain,filterStatus:z.filterStatus,onFilterDomain:R=>{z.setFilterDomain(R)},onFilterStatus:R=>{z.setFilterStatus(R)},onCreateGoal:z.createGoal,onCreateQuest:z.createQuest,onCreateStep:z.createStep,onCompleteStep:z.completeStep,onUncompleteStep:z.uncompleteStep,onMissStep:z.missStep,onUnmissStep:z.unmissStep,onDeleteStep:z.deleteStep,onDeleteQuest:z.deleteQuest,onDeleteGoal:z.deleteGoal}),n==="buffs"&&c.jsx(o6,{definitions:K.definitions,activeBuffs:K.activeBuffs,onCreateDefinition:K.createDefinition,onDeleteDefinition:K.deleteDefinition,onActivateBuff:K.activateBuff,onDeactivateBuff:K.deactivateBuff,streakInfos:a.streakInfos,shieldCount:a.shieldCount,onUseShield:a.useShield,getUnclaimedMilestones:a.getUnclaimedMilestones,onClaimMilestones:a.claimMilestones}),n==="focus"&&c.jsx(QV,{timerState:x.timerState,settings:x.settings,stats:x.stats,recentSessions:x.recentSessions,onStartWork:x.startWork,onStartBreak:x.startBreak,onPause:x.pause,onResume:x.resume,onStop:x.stop,onSkipBreak:x.skipBreak,onUpdateSettings:x.updateSettings,formatTime:x.formatTime}),n==="skills"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Character Class"}),_.getSelectedClass()?c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[c.jsx("span",{style:{fontSize:"2rem"},children:_.getSelectedClass()?.icon}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--text-primary)",margin:0},children:_.getSelectedClass()?.name}),c.jsx("p",{style:{color:"var(--text-secondary)",margin:"4px 0 0 0"},children:_.getSelectedClass()?.description}),c.jsx("p",{style:{color:"var(--gold)",fontSize:"0.85rem",marginTop:8},children:_.getSelectedClass()?.special_ability_desc})]})]}):c.jsxs("div",{children:[c.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"Choose your class to gain unique bonuses:"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},children:_.classes.map(R=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,cursor:"pointer",transition:"all 0.2s"},onClick:()=>_.selectClass(R.id),onMouseEnter:D=>{D.currentTarget.style.borderColor="var(--border-gold)"},onMouseLeave:D=>{D.currentTarget.style.borderColor="var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:8},children:R.icon}),c.jsx("h4",{style:{color:"var(--gold)",margin:"0 0 4px 0"},children:R.name}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",margin:0},children:R.description})]},R.id))})]})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Skill Trees"}),c.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:["Spend XP to unlock passive bonuses. Total XP available: ",s.character.total_xp]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:16},children:E.branches.map(R=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${R.color}40`,borderRadius:8,padding:16},children:[c.jsxs("h3",{style:{color:R.color,marginBottom:12},children:[R.icon," ",R.name]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:E.nodes.filter(D=>D.branch_id===R.id).sort((D,k)=>D.tier-k.tier).map(D=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:D.unlocked?`${R.color}20`:"var(--bg-dark)",border:`1px solid ${D.unlocked?R.color:"var(--border-color)"}`,borderRadius:6,opacity:D.can_unlock||D.unlocked?1:.5},children:[c.jsxs("div",{children:[c.jsx("span",{style:{marginRight:8},children:D.icon}),c.jsx("span",{style:{color:D.unlocked?R.color:"var(--text-primary)"},children:D.name})]}),D.unlocked?c.jsx("span",{style:{color:"var(--success)",fontSize:"0.85rem"},children:"Unlocked"}):D.can_unlock?c.jsxs(Ve,{size:"small",onClick:()=>E.unlockSkill(D.id),children:[D.xp_cost," XP"]}):c.jsxs("span",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:[D.xp_cost," XP"]})]},D.id))})]},R.id))})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Territory Map"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:S.territories.map(R=>c.jsxs("div",{style:{flex:"1 1 200px",maxWidth:250,background:R.is_current?`${R.background_color}30`:"var(--bg-medium)",border:`2px solid ${R.is_current?R.background_color:R.discovered?"var(--border-gold)":"var(--border-color)"}`,borderRadius:8,padding:16,opacity:R.is_locked?.5:1,cursor:R.discovered&&!R.is_current?"pointer":"default"},onClick:()=>{R.discovered&&!R.is_current&&S.travelTo(R.id)},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:8},children:R.icon}),c.jsx("h4",{style:{color:R.is_current?R.background_color:"var(--text-primary)",margin:"0 0 4px 0"},children:R.name}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",margin:0},children:R.is_locked?`Unlocks at Level ${R.unlock_level}`:R.description}),R.is_current&&c.jsx("span",{style:{display:"inline-block",marginTop:8,padding:"2px 8px",background:R.background_color,color:"#000",borderRadius:4,fontSize:"0.75rem",fontWeight:600},children:"Current"})]},R.id))})]})]}),n==="inventory"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Equipment"}),c.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:["weapon","armor","accessory"].map(R=>{const D=w.getEquipmentBySlot(R);return c.jsxs("div",{style:{flex:"1 1 150px",maxWidth:200,background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textTransform:"uppercase",marginBottom:8},children:R}),D?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:D.item.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",marginBottom:4},children:D.item.definition.name}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>w.unequipItem(R),children:"Unequip"})]}):c.jsx("div",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:"Empty"})]},R)})})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Inventory"}),w.inventory.length===0?c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Your inventory is empty. Complete achievements and defeat bosses to earn items!"}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:12},children:w.inventory.map(R=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${R.definition.rarity==="legendary"?"#ff9800":R.definition.rarity==="epic"?"#9c27b0":R.definition.rarity==="rare"?"#2196f3":R.definition.rarity==="uncommon"?"#4caf50":"var(--border-color)"}`,borderRadius:8,padding:12,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:R.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.85rem",marginBottom:4},children:R.definition.name}),R.quantity>1&&c.jsxs("div",{style:{color:"var(--text-dim)",fontSize:"0.75rem",marginBottom:4},children:["x",R.quantity]}),R.definition.type==="equipment"&&c.jsx(Ve,{size:"small",onClick:()=>w.equipItem(R.id),children:"Equip"}),R.definition.type==="consumable"&&c.jsx(Ve,{size:"small",onClick:()=>w.useConsumable(R.id),children:"Use"})]},R.id))})]})]}),c.jsxs("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:[O&&c.jsx(K6,{}),ye&&c.jsx(I6,{}),c.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>j(!O),children:O?"Hide Notifications":"Notifications"}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:()=>ge(!ye),children:ye?"Hide Cloud Backup":"Cloud Backup"}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:M,children:"Export Save"}),c.jsx(Ve,{size:"small",variant:"ghost",onClick:q,children:"Import Save"})]})]})]}),s.xpFloats.map(R=>c.jsxs("div",{className:Dn.xpFloat,children:["+",R.amount," XP"]},R.id)),s.levelUpInfo&&c.jsx(_O,{level:s.levelUpInfo.level,title:s.levelUpInfo.title,onDismiss:s.dismissLevelUp}),c.jsx(cV,{unlock:g.pendingUnlocks.length>0?g.pendingUnlocks[0]:null,onDismiss:()=>g.dismissUnlock(0)}),c.jsx(HB,{}),oe.message&&c.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 20px",background:oe.status==="error"?"rgba(231, 76, 60, 0.9)":"rgba(46, 204, 113, 0.9)",color:"#fff",borderRadius:8,fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:oe.message})]})}jN.createRoot(document.getElementById("root")).render(c.jsx(L.StrictMode,{children:c.jsx(XB,{})}));
