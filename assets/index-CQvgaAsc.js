(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function lN(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function cN(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var n=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var o=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return s[a]}})}),n}var em={exports:{}},yc={};var wE;function uN(){if(wE)return yc;wE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:u}}return yc.Fragment=e,yc.jsx=n,yc.jsxs=n,yc}var AE;function dN(){return AE||(AE=1,em.exports=uN()),em.exports}var c=dN(),tm={exports:{}},Ke={};var RE;function fN(){if(RE)return Ke;RE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),C=Symbol.iterator;function B(H){return H===null||typeof H!="object"?null:(H=C&&H[C]||H["@@iterator"],typeof H=="function"?H:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,U={};function G(H,ue,be){this.props=H,this.context=ue,this.refs=U,this.updater=be||z}G.prototype.isReactComponent={},G.prototype.setState=function(H,ue){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ue,"setState")},G.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function Y(){}Y.prototype=G.prototype;function se(H,ue,be){this.props=H,this.context=ue,this.refs=U,this.updater=be||z}var re=se.prototype=new Y;re.constructor=se,F(re,G.prototype),re.isPureReactComponent=!0;var _e=Array.isArray;function ve(){}var j={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function M(H,ue,be){var Ne=be.ref;return{$$typeof:s,type:H,key:ue,ref:Ne!==void 0?Ne:null,props:be}}function V(H,ue){return M(H.type,ue,H.props)}function w(H){return typeof H=="object"&&H!==null&&H.$$typeof===s}function O(H){var ue={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(be){return ue[be]})}var k=/\/+/g;function Ce(H,ue){return typeof H=="object"&&H!==null&&H.key!=null?O(""+H.key):ue.toString(36)}function mt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ve,ve):(H.status="pending",H.then(function(ue){H.status==="pending"&&(H.status="fulfilled",H.value=ue)},function(ue){H.status==="pending"&&(H.status="rejected",H.reason=ue)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function $(H,ue,be,Ne,Ge){var et=typeof H;(et==="undefined"||et==="boolean")&&(H=null);var at=!1;if(H===null)at=!0;else switch(et){case"bigint":case"string":case"number":at=!0;break;case"object":switch(H.$$typeof){case s:case e:at=!0;break;case S:return at=H._init,$(at(H._payload),ue,be,Ne,Ge)}}if(at)return Ge=Ge(H),at=Ne===""?"."+Ce(H,0):Ne,_e(Ge)?(be="",at!=null&&(be=at.replace(k,"$&/")+"/"),$(Ge,ue,be,"",function(Ti){return Ti})):Ge!=null&&(w(Ge)&&(Ge=V(Ge,be+(Ge.key==null||H&&H.key===Ge.key?"":(""+Ge.key).replace(k,"$&/")+"/")+at)),ue.push(Ge)),1;at=0;var nn=Ne===""?".":Ne+":";if(_e(H))for(var Ut=0;Ut<H.length;Ut++)Ne=H[Ut],et=nn+Ce(Ne,Ut),at+=$(Ne,ue,be,et,Ge);else if(Ut=B(H),typeof Ut=="function")for(H=Ut.call(H),Ut=0;!(Ne=H.next()).done;)Ne=Ne.value,et=nn+Ce(Ne,Ut++),at+=$(Ne,ue,be,et,Ge);else if(et==="object"){if(typeof H.then=="function")return $(mt(H),ue,be,Ne,Ge);throw ue=String(H),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return at}function ne(H,ue,be){if(H==null)return H;var Ne=[],Ge=0;return $(H,Ne,"","",function(et){return ue.call(be,et,Ge++)}),Ne}function Te(H){if(H._status===-1){var ue=H._result;ue=ue(),ue.then(function(be){(H._status===0||H._status===-1)&&(H._status=1,H._result=be)},function(be){(H._status===0||H._status===-1)&&(H._status=2,H._result=be)}),H._status===-1&&(H._status=0,H._result=ue)}if(H._status===1)return H._result.default;throw H._result}var tt=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Ze={map:ne,forEach:function(H,ue,be){ne(H,function(){ue.apply(this,arguments)},be)},count:function(H){var ue=0;return ne(H,function(){ue++}),ue},toArray:function(H){return ne(H,function(ue){return ue})||[]},only:function(H){if(!w(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ke.Activity=A,Ke.Children=Ze,Ke.Component=G,Ke.Fragment=n,Ke.Profiler=o,Ke.PureComponent=se,Ke.StrictMode=a,Ke.Suspense=v,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(H){return j.H.useMemoCache(H)}},Ke.cache=function(H){return function(){return H.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(H,ue,be){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Ne=F({},H.props),Ge=H.key;if(ue!=null)for(et in ue.key!==void 0&&(Ge=""+ue.key),ue)!D.call(ue,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&ue.ref===void 0||(Ne[et]=ue[et]);var et=arguments.length-2;if(et===1)Ne.children=be;else if(1<et){for(var at=Array(et),nn=0;nn<et;nn++)at[nn]=arguments[nn+2];Ne.children=at}return M(H.type,Ge,Ne)},Ke.createContext=function(H){return H={$$typeof:h,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},Ke.createElement=function(H,ue,be){var Ne,Ge={},et=null;if(ue!=null)for(Ne in ue.key!==void 0&&(et=""+ue.key),ue)D.call(ue,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Ge[Ne]=ue[Ne]);var at=arguments.length-2;if(at===1)Ge.children=be;else if(1<at){for(var nn=Array(at),Ut=0;Ut<at;Ut++)nn[Ut]=arguments[Ut+2];Ge.children=nn}if(H&&H.defaultProps)for(Ne in at=H.defaultProps,at)Ge[Ne]===void 0&&(Ge[Ne]=at[Ne]);return M(H,et,Ge)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(H){return{$$typeof:g,render:H}},Ke.isValidElement=w,Ke.lazy=function(H){return{$$typeof:S,_payload:{_status:-1,_result:H},_init:Te}},Ke.memo=function(H,ue){return{$$typeof:_,type:H,compare:ue===void 0?null:ue}},Ke.startTransition=function(H){var ue=j.T,be={};j.T=be;try{var Ne=H(),Ge=j.S;Ge!==null&&Ge(be,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(ve,tt)}catch(et){tt(et)}finally{ue!==null&&be.types!==null&&(ue.types=be.types),j.T=ue}},Ke.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ke.use=function(H){return j.H.use(H)},Ke.useActionState=function(H,ue,be){return j.H.useActionState(H,ue,be)},Ke.useCallback=function(H,ue){return j.H.useCallback(H,ue)},Ke.useContext=function(H){return j.H.useContext(H)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(H,ue){return j.H.useDeferredValue(H,ue)},Ke.useEffect=function(H,ue){return j.H.useEffect(H,ue)},Ke.useEffectEvent=function(H){return j.H.useEffectEvent(H)},Ke.useId=function(){return j.H.useId()},Ke.useImperativeHandle=function(H,ue,be){return j.H.useImperativeHandle(H,ue,be)},Ke.useInsertionEffect=function(H,ue){return j.H.useInsertionEffect(H,ue)},Ke.useLayoutEffect=function(H,ue){return j.H.useLayoutEffect(H,ue)},Ke.useMemo=function(H,ue){return j.H.useMemo(H,ue)},Ke.useOptimistic=function(H,ue){return j.H.useOptimistic(H,ue)},Ke.useReducer=function(H,ue,be){return j.H.useReducer(H,ue,be)},Ke.useRef=function(H){return j.H.useRef(H)},Ke.useState=function(H){return j.H.useState(H)},Ke.useSyncExternalStore=function(H,ue,be){return j.H.useSyncExternalStore(H,ue,be)},Ke.useTransition=function(){return j.H.useTransition()},Ke.version="19.2.4",Ke}var xE;function lp(){return xE||(xE=1,tm.exports=fN()),tm.exports}var L=lp(),nm={exports:{}},Ec={},sm={exports:{}},im={};var CE;function hN(){return CE||(CE=1,(function(s){function e($,ne){var Te=$.length;$.push(ne);e:for(;0<Te;){var tt=Te-1>>>1,Ze=$[tt];if(0<o(Ze,ne))$[tt]=ne,$[Te]=Ze,Te=tt;else break e}}function n($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var ne=$[0],Te=$.pop();if(Te!==ne){$[0]=Te;e:for(var tt=0,Ze=$.length,H=Ze>>>1;tt<H;){var ue=2*(tt+1)-1,be=$[ue],Ne=ue+1,Ge=$[Ne];if(0>o(be,Te))Ne<Ze&&0>o(Ge,be)?($[tt]=Ge,$[Ne]=Te,tt=Ne):($[tt]=be,$[ue]=Te,tt=ue);else if(Ne<Ze&&0>o(Ge,Te))$[tt]=Ge,$[Ne]=Te,tt=Ne;else break e}}return ne}function o($,ne){var Te=$.sortIndex-ne.sortIndex;return Te!==0?Te:$.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var v=[],_=[],S=1,A=null,C=3,B=!1,z=!1,F=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function re($){for(var ne=n(_);ne!==null;){if(ne.callback===null)a(_);else if(ne.startTime<=$)a(_),ne.sortIndex=ne.expirationTime,e(v,ne);else break;ne=n(_)}}function _e($){if(F=!1,re($),!z)if(n(v)!==null)z=!0,ve||(ve=!0,O());else{var ne=n(_);ne!==null&&mt(_e,ne.startTime-$)}}var ve=!1,j=-1,D=5,M=-1;function V(){return U?!0:!(s.unstable_now()-M<D)}function w(){if(U=!1,ve){var $=s.unstable_now();M=$;var ne=!0;try{e:{z=!1,F&&(F=!1,Y(j),j=-1),B=!0;var Te=C;try{t:{for(re($),A=n(v);A!==null&&!(A.expirationTime>$&&V());){var tt=A.callback;if(typeof tt=="function"){A.callback=null,C=A.priorityLevel;var Ze=tt(A.expirationTime<=$);if($=s.unstable_now(),typeof Ze=="function"){A.callback=Ze,re($),ne=!0;break t}A===n(v)&&a(v),re($)}else a(v);A=n(v)}if(A!==null)ne=!0;else{var H=n(_);H!==null&&mt(_e,H.startTime-$),ne=!1}}break e}finally{A=null,C=Te,B=!1}ne=void 0}}finally{ne?O():ve=!1}}}var O;if(typeof se=="function")O=function(){se(w)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Ce=k.port2;k.port1.onmessage=w,O=function(){Ce.postMessage(null)}}else O=function(){G(w,0)};function mt($,ne){j=G(function(){$(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function($){switch(C){case 1:case 2:case 3:var ne=3;break;default:ne=C}var Te=C;C=ne;try{return $()}finally{C=Te}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function($,ne){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Te=C;C=$;try{return ne()}finally{C=Te}},s.unstable_scheduleCallback=function($,ne,Te){var tt=s.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?tt+Te:tt):Te=tt,$){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=Te+Ze,$={id:S++,callback:ne,priorityLevel:$,startTime:Te,expirationTime:Ze,sortIndex:-1},Te>tt?($.sortIndex=Te,e(_,$),n(v)===null&&$===n(_)&&(F?(Y(j),j=-1):F=!0,mt(_e,Te-tt))):($.sortIndex=Ze,e(v,$),z||B||(z=!0,ve||(ve=!0,O()))),$},s.unstable_shouldYield=V,s.unstable_wrapCallback=function($){var ne=C;return function(){var Te=C;C=ne;try{return $.apply(this,arguments)}finally{C=Te}}}})(im)),im}var IE;function mN(){return IE||(IE=1,sm.exports=hN()),sm.exports}var am={exports:{}},Jn={};var kE;function pN(){if(kE)return Jn;kE=1;var s=lp();function e(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(v,_,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:v,containerInfo:_,implementation:S}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Jn.createPortal=function(v,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(v,_,null,S)},Jn.flushSync=function(v){var _=h.T,S=a.p;try{if(h.T=null,a.p=2,v)return v()}finally{h.T=_,a.p=S,a.d.f()}},Jn.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(v,_))},Jn.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},Jn.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var S=_.as,A=g(S,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?a.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:C,fetchPriority:B}):S==="script"&&a.d.X(v,{crossOrigin:A,integrity:C,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Jn.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);a.d.M(v,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(v)},Jn.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,A=g(S,_.crossOrigin);a.d.L(v,S,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Jn.preloadModule=function(v,_){if(typeof v=="string")if(_){var S=g(_.as,_.crossOrigin);a.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(v)},Jn.requestFormReset=function(v){a.d.r(v)},Jn.unstable_batchedUpdates=function(v,_){return v(_)},Jn.useFormState=function(v,_,S){return h.H.useFormState(v,_,S)},Jn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jn.version="19.2.4",Jn}var LE;function _N(){if(LE)return am.exports;LE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),am.exports=pN(),am.exports}var DE;function gN(){if(DE)return Ec;DE=1;var s=mN(),e=lp(),n=_N();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function v(t){if(u(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,l=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return v(f),t;if(p===l)return v(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==l.return)r=f,l=p;else{for(var T=!1,R=f.child;R;){if(R===r){T=!0,r=f,l=p;break}if(R===l){T=!0,l=f,r=p;break}R=R.sibling}if(!T){for(R=p.child;R;){if(R===r){T=!0,r=p,l=f;break}if(R===l){T=!0,l=p,r=f;break}R=R.sibling}if(!T)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,C=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),se=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=w&&t[w]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function Ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case G:return"Profiler";case U:return"StrictMode";case _e:return"Suspense";case ve:return"SuspenseList";case M:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case se:return t.displayName||"Context";case Y:return(t._context.displayName||"Context")+".Consumer";case re:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return i=t.displayName||null,i!==null?i:Ce(t.type)||"Memo";case D:i=t._payload,t=t._init;try{return Ce(t(i))}catch{}}return null}var mt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},tt=[],Ze=-1;function H(t){return{current:t}}function ue(t){0>Ze||(t.current=tt[Ze],tt[Ze]=null,Ze--)}function be(t,i){Ze++,tt[Ze]=t.current,t.current=i}var Ne=H(null),Ge=H(null),et=H(null),at=H(null);function nn(t,i){switch(be(et,i),be(Ge,t),be(Ne,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?$y(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=$y(i),t=Qy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(Ne),be(Ne,t)}function Ut(){ue(Ne),ue(Ge),ue(et)}function Ti(t){t.memoizedState!==null&&be(at,t);var i=Ne.current,r=Qy(i,t.type);i!==r&&(be(Ge,t),be(Ne,r))}function Ca(t){Ge.current===t&&(ue(Ne),ue(Ge)),at.current===t&&(ue(at),mc._currentValue=Te)}var Xn,bi;function Yn(t){if(Xn===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Xn=i&&i[1]||"",bi=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xn+t+bi}var Ia=!1;function At(t,i){if(!t||Ia)return"";Ia=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(oe){var te=oe}Reflect.construct(t,[],he)}else{try{he.call()}catch(oe){te=oe}t.call(he.prototype)}}else{try{throw Error()}catch(oe){te=oe}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(oe){if(oe&&te&&typeof oe.stack=="string")return[oe.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],R=p[1];if(T&&R){var q=T.split(`
`),ee=R.split(`
`);for(f=l=0;l<q.length&&!q[l].includes("DetermineComponentFrameRoot");)l++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(l===q.length||f===ee.length)for(l=q.length-1,f=ee.length-1;1<=l&&0<=f&&q[l]!==ee[f];)f--;for(;1<=l&&0<=f;l--,f--)if(q[l]!==ee[f]){if(l!==1||f!==1)do if(l--,f--,0>f||q[l]!==ee[f]){var ce=`
`+q[l].replace(" at new "," at ");return t.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",t.displayName)),ce}while(1<=l&&0<=f);break}}}finally{Ia=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Yn(r):""}function Xi(t,i){switch(t.tag){case 26:case 27:case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return t.child!==i&&i!==null?Yn("Suspense Fallback"):Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return At(t.type,!1);case 11:return At(t.type.render,!1);case 1:return At(t.type,!0);case 31:return Yn("Activity");default:return""}}function ka(t){try{var i="",r=null;do i+=Xi(t,r),r=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var $t=Object.prototype.hasOwnProperty,sn=s.unstable_scheduleCallback,As=s.unstable_cancelCallback,Ol=s.unstable_shouldYield,br=s.unstable_requestPaint,Dn=s.unstable_now,li=s.unstable_getCurrentPriorityLevel,ci=s.unstable_ImmediatePriority,ss=s.unstable_UserBlockingPriority,ui=s.unstable_NormalPriority,po=s.unstable_LowPriority,Sr=s.unstable_IdlePriority,_o=s.log,go=s.unstable_setDisableYieldValue,Rs=null,je=null;function is(t){if(typeof _o=="function"&&go(t),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Rs,t)}catch{}}var Gt=Math.clz32?Math.clz32:yo,Nr=Math.log,xs=Math.LN2;function yo(t){return t>>>=0,t===0?32:31-(Nr(t)/xs|0)|0}var Tn=256,Si=262144,Jt=4194304;function Cs(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ge(t,i,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var R=l&134217727;return R!==0?(l=R&~p,l!==0?f=Cs(l):(T&=R,T!==0?f=Cs(T):r||(r=R&~t,r!==0&&(f=Cs(r))))):(R=l&~p,R!==0?f=Cs(R):T!==0?f=Cs(T):r||(r=l&~t,r!==0&&(f=Cs(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function Is(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function jl(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function On(){var t=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),t}function ms(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function di(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wr(t,i,r,l,f,p){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var R=t.entanglements,q=t.expirationTimes,ee=t.hiddenUpdates;for(r=T&~r;0<r;){var ce=31-Gt(r),he=1<<ce;R[ce]=0,q[ce]=-1;var te=ee[ce];if(te!==null)for(ee[ce]=null,ce=0;ce<te.length;ce++){var oe=te[ce];oe!==null&&(oe.lane&=-536870913)}r&=~he}l!==0&&as(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~i))}function as(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Gt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function La(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var l=31-Gt(r),f=1<<l;f&i|t[l]&i&&(t[l]|=i),r&=~f}}function fn(t,i){var r=i&-i;return r=(r&42)!==0?1:Ni(r),(r&(t.suspendedLanes|i))!==0?0:r}function Ni(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $n(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ar(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:yE(t.type))}function ps(t,i){var r=ne.p;try{return ne.p=t,i()}finally{ne.p=r}}var Qn=Math.random().toString(36).slice(2),lt="__reactFiber$"+Qn,on="__reactProps$"+Qn,Fs="__reactContainer$"+Qn,wi="__reactEvents$"+Qn,Ml="__reactListeners$"+Qn,Da="__reactHandles$"+Qn,Rr="__reactResources$"+Qn,rs="__reactMarker$"+Qn;function Oa(t){delete t[lt],delete t[on],delete t[wi],delete t[Ml],delete t[Da]}function ln(t){var i=t[lt];if(i)return i;for(var r=t.parentNode;r;){if(i=r[Fs]||r[lt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=nE(t);t!==null;){if(r=t[lt])return r;t=nE(t)}return i}t=r,r=t.parentNode}return null}function jn(t){if(t=t[lt]||t[Fs]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Mn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function ks(t){var i=t[Rr];return i||(i=t[Rr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Zt(t){t[rs]=!0}var fi=new Set,ja={};function os(t,i){Ls(t,i),Ls(t+"Capture",i)}function Ls(t,i){for(ja[t]=i,t=0;t<i.length;t++)fi.add(i[t])}var zs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yi={},Ma={};function xr(t){return $t.call(Ma,t)?!0:$t.call(Yi,t)?!1:zs.test(t)?Ma[t]=!0:(Yi[t]=!0,!1)}function $i(t,i,r){if(xr(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function ls(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function Ct(t,i,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+l)}}function Qe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kn(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ai(t,i,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){r=""+T,p.call(this,T)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function _t(t){if(!t._valueTracker){var i=Kn(t)?"checked":"value";t._valueTracker=Ai(t,i,""+t[i])}}function Gs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),l="";return t&&(l=Kn(t)?t.checked?"true":"false":t.value),t=l,t!==r?(i.setValue(t),!0):!1}function _s(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qi=/[\n"\\]/g;function Wn(t){return t.replace(Qi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Hs(t,i,r,l,f,p,T,R){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Qe(i)):t.value!==""+Qe(i)&&(t.value=""+Qe(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?Ir(t,T,Qe(i)):r!=null?Ir(t,T,Qe(r)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+Qe(R):t.removeAttribute("name")}function Cr(t,i,r,l,f,p,T,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){_t(t);return}r=r!=null?""+Qe(r):"",i=i!=null?""+Qe(i):r,R||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=R?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),_t(t)}function Ir(t,i,r){i==="number"&&_s(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Xs(t,i,r,l){if(t=t.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=i.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+Qe(r),i=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function kr(t,i,r){if(i!=null&&(i=""+Qe(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+Qe(r):""}function Ys(t,i,r,l){if(i==null){if(l!=null){if(r!=null)throw Error(a(92));if(mt(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),i=r}r=Qe(i),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),_t(t)}function wn(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var Eo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ri(t,i,r){var l=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,r):typeof r!="number"||r===0||Eo.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function xi(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&r[f]!==l&&Ri(t,f,l)}else for(var p in i)i.hasOwnProperty(p)&&Ri(t,p,i[p])}function gs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),An=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cs(t){return An.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Un(){}var Lr=null;function we(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $s=null,us=null;function Ci(t){var i=jn(t);if(i&&(t=i.stateNode)){var r=t[on]||null;e:switch(t=i.stateNode,i.type){case"input":if(Hs(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Wn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var l=r[i];if(l!==t&&l.form===t.form){var f=l[on]||null;if(!f)throw Error(a(90));Hs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)l=r[i],l.form===t.form&&Gs(l)}break e;case"textarea":kr(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Xs(t,!!r.multiple,i,!1)}}}var Ki=!1;function ys(t,i,r){if(Ki)return t(i,r);Ki=!0;try{var l=t(i);return l}finally{if(Ki=!1,($s!==null||us!==null)&&(xu(),$s&&(i=$s,t=us,us=$s=null,Ci(i),t)))for(i=0;i<t.length;i++)Ci(t[i])}}function hn(t,i){var r=t.stateNode;if(r===null)return null;var l=r[on]||null;if(l===null)return null;r=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hi=!1;if(Rn)try{var m={};Object.defineProperty(m,"passive",{get:function(){hi=!0}}),window.addEventListener("test",m,m),window.removeEventListener("test",m,m)}catch{hi=!1}var y=null,N=null,x=null;function P(){if(x)return x;var t,i=N,r=i.length,l,f="value"in y?y.value:y.textContent,p=f.length;for(t=0;t<r&&i[t]===f[t];t++);var T=r-t;for(l=1;l<=T&&i[r-l]===f[p-l];l++);return x=f.slice(t,1<l?1-l:void 0)}function W(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function le(){return!0}function Ie(){return!1}function Me(t){function i(r,l,f,p,T){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(r=t[R],this[R]=r?r(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?le:Ie,this.isPropagationStopped=Ie,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){},isPersistent:le}),i}var Pe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vt=Me(Pe),en=A({},Pe,{view:0,detail:0}),Va=Me(en),Ii,Wi,Qs,Ji=A({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ki,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Ii=t.screenX-Qs.screenX,Wi=t.screenY-Qs.screenY):Wi=Ii=0,Qs=t),Ii)},movementY:function(t){return"movementY"in t?t.movementY:Wi}}),Dr=Me(Ji),Zi=A({},Ji,{dataTransfer:0}),vo=Me(Zi),To=A({},en,{relatedTarget:0}),ea=Me(To),Or=A({},Pe,{animationName:0,elapsedTime:0,pseudoElement:0}),bo=Me(Or),qa=A({},Pe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jr=Me(qa),So=A({},Pe,{data:0}),Ks=Me(So),No={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ao={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ao[t])?!!i[t]:!1}function ki(){return Ro}var xn=A({},en,{key:function(t){if(t.key){var i=No[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=W(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ki,charCode:function(t){return t.type==="keypress"?W(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xo=Me(xn),Co=A({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mi=Me(Co),d=A({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ki}),E=Me(d),b=A({},Pe,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Me(b),J=A({},Ji,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Me(J),Ee=A({},Pe,{newState:0,oldState:0}),He=Me(Ee),Qt=[9,13,27,32],gt=Rn&&"CompositionEvent"in window,Vt=null;Rn&&"documentMode"in document&&(Vt=document.documentMode);var K=Rn&&"TextEvent"in window&&!Vt,fe=Rn&&(!gt||Vt&&8<Vt&&11>=Vt),Se=" ",Le=!1;function qe(t,i){switch(t){case"keyup":return Qt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ct(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cn=!1;function Es(t,i){switch(t){case"compositionend":return ct(i);case"keypress":return i.which!==32?null:(Le=!0,Se);case"textInput":return t=i.data,t===Se&&Le?null:t;default:return null}}function ds(t,i){if(Cn)return t==="compositionend"||!gt&&qe(t,i)?(t=P(),x=N=y=null,Cn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fe&&i.locale!=="ko"?null:i.data;default:return null}}var Ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Io(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ds[t.type]:i==="textarea"}function Li(t,i,r,l){$s?us?us.push(l):us=[l]:$s=l,i=ju(i,"onChange"),0<i.length&&(r=new vt("onChange","change",null,r,l),t.push({event:r,listeners:i}))}var Mr=null,Ul=null;function j1(t){Fy(t,0)}function Yc(t){var i=Mn(t);if(Gs(i))return t}function o_(t,i){if(t==="change")return i}var l_=!1;if(Rn){var of;if(Rn){var lf="oninput"in document;if(!lf){var c_=document.createElement("div");c_.setAttribute("oninput","return;"),lf=typeof c_.oninput=="function"}of=lf}else of=!1;l_=of&&(!document.documentMode||9<document.documentMode)}function u_(){Mr&&(Mr.detachEvent("onpropertychange",d_),Ul=Mr=null)}function d_(t){if(t.propertyName==="value"&&Yc(Ul)){var i=[];Li(i,Ul,t,we(t)),ys(j1,i)}}function M1(t,i,r){t==="focusin"?(u_(),Mr=i,Ul=r,Mr.attachEvent("onpropertychange",d_)):t==="focusout"&&u_()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yc(Ul)}function V1(t,i){if(t==="click")return Yc(i)}function q1(t,i){if(t==="input"||t==="change")return Yc(i)}function B1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Os=typeof Object.is=="function"?Object.is:B1;function Vl(t,i){if(Os(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),l=Object.keys(i);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!$t.call(i,f)||!Os(t[f],i[f]))return!1}return!0}function f_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h_(t,i){var r=f_(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=i&&l>=i)return{node:r,offset:i-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=f_(r)}}function m_(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?m_(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function p_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=_s(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=_s(t.document)}return i}function cf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var P1=Rn&&"documentMode"in document&&11>=document.documentMode,ko=null,uf=null,ql=null,df=!1;function __(t,i,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;df||ko==null||ko!==_s(l)||(l=ko,"selectionStart"in l&&cf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ql&&Vl(ql,l)||(ql=l,l=ju(uf,"onSelect"),0<l.length&&(i=new vt("onSelect","select",null,i,r),t.push({event:i,listeners:l}),i.target=ko)))}function Ur(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var Lo={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionrun:Ur("Transition","TransitionRun"),transitionstart:Ur("Transition","TransitionStart"),transitioncancel:Ur("Transition","TransitionCancel"),transitionend:Ur("Transition","TransitionEnd")},ff={},g_={};Rn&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Vr(t){if(ff[t])return ff[t];if(!Lo[t])return t;var i=Lo[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in g_)return ff[t]=i[r];return t}var y_=Vr("animationend"),E_=Vr("animationiteration"),v_=Vr("animationstart"),F1=Vr("transitionrun"),z1=Vr("transitionstart"),G1=Vr("transitioncancel"),T_=Vr("transitionend"),b_=new Map,hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hf.push("scrollEnd");function pi(t,i){b_.set(t,i),os(i,[t])}var $c=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ws=[],Do=0,mf=0;function Qc(){for(var t=Do,i=mf=Do=0;i<t;){var r=Ws[i];Ws[i++]=null;var l=Ws[i];Ws[i++]=null;var f=Ws[i];Ws[i++]=null;var p=Ws[i];if(Ws[i++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&S_(r,f,p)}}function Kc(t,i,r,l){Ws[Do++]=t,Ws[Do++]=i,Ws[Do++]=r,Ws[Do++]=l,mf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function pf(t,i,r,l){return Kc(t,i,r,l),Wc(t)}function qr(t,i){return Kc(t,null,null,i),Wc(t)}function S_(t,i,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&i!==null&&(f=31-Gt(r),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=r|536870912),p):null}function Wc(t){if(50<oc)throw oc=0,Nh=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Oo={};function H1(t,i,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(t,i,r,l){return new H1(t,i,r,l)}function _f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ta(t,i){var r=t.alternate;return r===null?(r=js(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function N_(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Jc(t,i,r,l,f,p){var T=0;if(l=t,typeof t=="function")_f(t)&&(T=1);else if(typeof t=="string")T=KS(t,r,Ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case M:return t=js(31,r,i,f),t.elementType=M,t.lanes=p,t;case F:return Br(r.children,f,p,i);case U:T=8,f|=24;break;case G:return t=js(12,r,i,f|2),t.elementType=G,t.lanes=p,t;case _e:return t=js(13,r,i,f),t.elementType=_e,t.lanes=p,t;case ve:return t=js(19,r,i,f),t.elementType=ve,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:T=10;break e;case Y:T=9;break e;case re:T=11;break e;case j:T=14;break e;case D:T=16,l=null;break e}T=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=js(T,r,i,f),i.elementType=t,i.type=l,i.lanes=p,i}function Br(t,i,r,l){return t=js(7,t,l,i),t.lanes=r,t}function gf(t,i,r){return t=js(6,t,null,i),t.lanes=r,t}function w_(t){var i=js(18,null,null,0);return i.stateNode=t,i}function yf(t,i,r){return i=js(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var A_=new WeakMap;function Js(t,i){if(typeof t=="object"&&t!==null){var r=A_.get(t);return r!==void 0?r:(i={value:t,source:i,stack:ka(i)},A_.set(t,i),i)}return{value:t,source:i,stack:ka(i)}}var jo=[],Mo=0,Zc=null,Bl=0,Zs=[],ei=0,Ba=null,Di=1,Oi="";function na(t,i){jo[Mo++]=Bl,jo[Mo++]=Zc,Zc=t,Bl=i}function R_(t,i,r){Zs[ei++]=Di,Zs[ei++]=Oi,Zs[ei++]=Ba,Ba=t;var l=Di;t=Oi;var f=32-Gt(l)-1;l&=~(1<<f),r+=1;var p=32-Gt(i)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,Di=1<<32-Gt(i)+f|r<<f|l,Oi=p+t}else Di=1<<p|r<<f|l,Oi=t}function Ef(t){t.return!==null&&(na(t,1),R_(t,1,0))}function vf(t){for(;t===Zc;)Zc=jo[--Mo],jo[Mo]=null,Bl=jo[--Mo],jo[Mo]=null;for(;t===Ba;)Ba=Zs[--ei],Zs[ei]=null,Oi=Zs[--ei],Zs[ei]=null,Di=Zs[--ei],Zs[ei]=null}function x_(t,i){Zs[ei++]=Di,Zs[ei++]=Oi,Zs[ei++]=Ba,Di=i.id,Oi=i.overflow,Ba=t}var Vn=null,Ht=null,pt=!1,Pa=null,ti=!1,Tf=Error(a(519));function Fa(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(Js(i,t)),Tf}function C_(t){var i=t.stateNode,r=t.type,l=t.memoizedProps;switch(i[lt]=t,i[on]=l,r){case"dialog":ot("cancel",i),ot("close",i);break;case"iframe":case"object":case"embed":ot("load",i);break;case"video":case"audio":for(r=0;r<cc.length;r++)ot(cc[r],i);break;case"source":ot("error",i);break;case"img":case"image":case"link":ot("error",i),ot("load",i);break;case"details":ot("toggle",i);break;case"input":ot("invalid",i),Cr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ot("invalid",i);break;case"textarea":ot("invalid",i),Ys(i,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||l.suppressHydrationWarning===!0||Xy(i.textContent,r)?(l.popover!=null&&(ot("beforetoggle",i),ot("toggle",i)),l.onScroll!=null&&ot("scroll",i),l.onScrollEnd!=null&&ot("scrollend",i),l.onClick!=null&&(i.onclick=Un),i=!0):i=!1,i||Fa(t,!0)}function I_(t){for(Vn=t.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Vn=Vn.return}}function Uo(t){if(t!==Vn)return!1;if(!pt)return I_(t),pt=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||qh(t.type,t.memoizedProps)),r=!r),r&&Ht&&Fa(t),I_(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ht=tE(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ht=tE(t)}else i===27?(i=Ht,nr(t.type)?(t=Gh,Gh=null,Ht=t):Ht=i):Ht=Vn?si(t.stateNode.nextSibling):null;return!0}function Pr(){Ht=Vn=null,pt=!1}function bf(){var t=Pa;return t!==null&&(Ss===null?Ss=t:Ss.push.apply(Ss,t),Pa=null),t}function Pl(t){Pa===null?Pa=[t]:Pa.push(t)}var Sf=H(null),Fr=null,sa=null;function za(t,i,r){be(Sf,i._currentValue),i._currentValue=r}function ia(t){t._currentValue=Sf.current,ue(Sf)}function Nf(t,i,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===r)break;t=t.return}}function wf(t,i,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var R=p;p=f;for(var q=0;q<i.length;q++)if(R.context===i[q]){p.lanes|=r,R=p.alternate,R!==null&&(R.lanes|=r),Nf(p.return,r,t),l||(T=null);break e}p=R.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(a(341));T.lanes|=r,p=T.alternate,p!==null&&(p.lanes|=r),Nf(T,r,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Vo(t,i,r,l){t=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var R=f.type;Os(f.pendingProps.value,T.value)||(t!==null?t.push(R):t=[R])}}else if(f===at.current){if(T=f.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(mc):t=[mc])}f=f.return}t!==null&&wf(i,t,r,l),i.flags|=262144}function eu(t){for(t=t.firstContext;t!==null;){if(!Os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zr(t){Fr=t,sa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qn(t){return k_(Fr,t)}function tu(t,i){return Fr===null&&zr(t),k_(t,i)}function k_(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},sa===null){if(t===null)throw Error(a(308));sa=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else sa=sa.next=i;return r}var X1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},Y1=s.unstable_scheduleCallback,$1=s.unstable_NormalPriority,mn={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new X1,data:new Map,refCount:0}}function Fl(t){t.refCount--,t.refCount===0&&Y1($1,function(){t.controller.abort()})}var zl=null,Rf=0,qo=0,Bo=null;function Q1(t,i){if(zl===null){var r=zl=[];Rf=0,qo=Ih(),Bo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Rf++,i.then(L_,L_),i}function L_(){if(--Rf===0&&zl!==null){Bo!==null&&(Bo.status="fulfilled");var t=zl;zl=null,qo=0,Bo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function K1(t,i){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var D_=$.S;$.S=function(t,i){_y=Dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Q1(t,i),D_!==null&&D_(t,i)};var Gr=H(null);function xf(){var t=Gr.current;return t!==null?t:qt.pooledCache}function nu(t,i){i===null?be(Gr,Gr.current):be(Gr,i.pool)}function O_(){var t=xf();return t===null?null:{parent:mn._currentValue,pool:t}}var Po=Error(a(460)),Cf=Error(a(474)),su=Error(a(542)),iu={then:function(){}};function j_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function M_(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(Un,Un),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,V_(t),t;default:if(typeof i.status=="string")i.then(Un,Un);else{if(t=qt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,V_(t),t}throw Xr=i,Po}}function Hr(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Xr=r,Po):r}}var Xr=null;function U_(){if(Xr===null)throw Error(a(459));var t=Xr;return Xr=null,t}function V_(t){if(t===Po||t===su)throw Error(a(483))}var Fo=null,Gl=0;function au(t){var i=Gl;return Gl+=1,Fo===null&&(Fo=[]),M_(Fo,t,i)}function Hl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ru(t,i){throw i.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function q_(t){function i(Q,X){if(t){var Z=Q.deletions;Z===null?(Q.deletions=[X],Q.flags|=16):Z.push(X)}}function r(Q,X){if(!t)return null;for(;X!==null;)i(Q,X),X=X.sibling;return null}function l(Q){for(var X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function f(Q,X){return Q=ta(Q,X),Q.index=0,Q.sibling=null,Q}function p(Q,X,Z){return Q.index=Z,t?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<X?(Q.flags|=67108866,X):Z):(Q.flags|=67108866,X)):(Q.flags|=1048576,X)}function T(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function R(Q,X,Z,de){return X===null||X.tag!==6?(X=gf(Z,Q.mode,de),X.return=Q,X):(X=f(X,Z),X.return=Q,X)}function q(Q,X,Z,de){var Ue=Z.type;return Ue===F?ce(Q,X,Z.props.children,de,Z.key):X!==null&&(X.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===D&&Hr(Ue)===X.type)?(X=f(X,Z.props),Hl(X,Z),X.return=Q,X):(X=Jc(Z.type,Z.key,Z.props,null,Q.mode,de),Hl(X,Z),X.return=Q,X)}function ee(Q,X,Z,de){return X===null||X.tag!==4||X.stateNode.containerInfo!==Z.containerInfo||X.stateNode.implementation!==Z.implementation?(X=yf(Z,Q.mode,de),X.return=Q,X):(X=f(X,Z.children||[]),X.return=Q,X)}function ce(Q,X,Z,de,Ue){return X===null||X.tag!==7?(X=Br(Z,Q.mode,de,Ue),X.return=Q,X):(X=f(X,Z),X.return=Q,X)}function he(Q,X,Z){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=gf(""+X,Q.mode,Z),X.return=Q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case B:return Z=Jc(X.type,X.key,X.props,null,Q.mode,Z),Hl(Z,X),Z.return=Q,Z;case z:return X=yf(X,Q.mode,Z),X.return=Q,X;case D:return X=Hr(X),he(Q,X,Z)}if(mt(X)||O(X))return X=Br(X,Q.mode,Z,null),X.return=Q,X;if(typeof X.then=="function")return he(Q,au(X),Z);if(X.$$typeof===se)return he(Q,tu(Q,X),Z);ru(Q,X)}return null}function te(Q,X,Z,de){var Ue=X!==null?X.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ue!==null?null:R(Q,X,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:return Z.key===Ue?q(Q,X,Z,de):null;case z:return Z.key===Ue?ee(Q,X,Z,de):null;case D:return Z=Hr(Z),te(Q,X,Z,de)}if(mt(Z)||O(Z))return Ue!==null?null:ce(Q,X,Z,de,null);if(typeof Z.then=="function")return te(Q,X,au(Z),de);if(Z.$$typeof===se)return te(Q,X,tu(Q,Z),de);ru(Q,Z)}return null}function oe(Q,X,Z,de,Ue){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(Z)||null,R(X,Q,""+de,Ue);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return Q=Q.get(de.key===null?Z:de.key)||null,q(X,Q,de,Ue);case z:return Q=Q.get(de.key===null?Z:de.key)||null,ee(X,Q,de,Ue);case D:return de=Hr(de),oe(Q,X,Z,de,Ue)}if(mt(de)||O(de))return Q=Q.get(Z)||null,ce(X,Q,de,Ue,null);if(typeof de.then=="function")return oe(Q,X,Z,au(de),Ue);if(de.$$typeof===se)return oe(Q,X,Z,tu(X,de),Ue);ru(X,de)}return null}function ke(Q,X,Z,de){for(var Ue=null,Tt=null,De=X,it=X=0,dt=null;De!==null&&it<Z.length;it++){De.index>it?(dt=De,De=null):dt=De.sibling;var bt=te(Q,De,Z[it],de);if(bt===null){De===null&&(De=dt);break}t&&De&&bt.alternate===null&&i(Q,De),X=p(bt,X,it),Tt===null?Ue=bt:Tt.sibling=bt,Tt=bt,De=dt}if(it===Z.length)return r(Q,De),pt&&na(Q,it),Ue;if(De===null){for(;it<Z.length;it++)De=he(Q,Z[it],de),De!==null&&(X=p(De,X,it),Tt===null?Ue=De:Tt.sibling=De,Tt=De);return pt&&na(Q,it),Ue}for(De=l(De);it<Z.length;it++)dt=oe(De,Q,it,Z[it],de),dt!==null&&(t&&dt.alternate!==null&&De.delete(dt.key===null?it:dt.key),X=p(dt,X,it),Tt===null?Ue=dt:Tt.sibling=dt,Tt=dt);return t&&De.forEach(function(or){return i(Q,or)}),pt&&na(Q,it),Ue}function Be(Q,X,Z,de){if(Z==null)throw Error(a(151));for(var Ue=null,Tt=null,De=X,it=X=0,dt=null,bt=Z.next();De!==null&&!bt.done;it++,bt=Z.next()){De.index>it?(dt=De,De=null):dt=De.sibling;var or=te(Q,De,bt.value,de);if(or===null){De===null&&(De=dt);break}t&&De&&or.alternate===null&&i(Q,De),X=p(or,X,it),Tt===null?Ue=or:Tt.sibling=or,Tt=or,De=dt}if(bt.done)return r(Q,De),pt&&na(Q,it),Ue;if(De===null){for(;!bt.done;it++,bt=Z.next())bt=he(Q,bt.value,de),bt!==null&&(X=p(bt,X,it),Tt===null?Ue=bt:Tt.sibling=bt,Tt=bt);return pt&&na(Q,it),Ue}for(De=l(De);!bt.done;it++,bt=Z.next())bt=oe(De,Q,it,bt.value,de),bt!==null&&(t&&bt.alternate!==null&&De.delete(bt.key===null?it:bt.key),X=p(bt,X,it),Tt===null?Ue=bt:Tt.sibling=bt,Tt=bt);return t&&De.forEach(function(oN){return i(Q,oN)}),pt&&na(Q,it),Ue}function Mt(Q,X,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:e:{for(var Ue=Z.key;X!==null;){if(X.key===Ue){if(Ue=Z.type,Ue===F){if(X.tag===7){r(Q,X.sibling),de=f(X,Z.props.children),de.return=Q,Q=de;break e}}else if(X.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===D&&Hr(Ue)===X.type){r(Q,X.sibling),de=f(X,Z.props),Hl(de,Z),de.return=Q,Q=de;break e}r(Q,X);break}else i(Q,X);X=X.sibling}Z.type===F?(de=Br(Z.props.children,Q.mode,de,Z.key),de.return=Q,Q=de):(de=Jc(Z.type,Z.key,Z.props,null,Q.mode,de),Hl(de,Z),de.return=Q,Q=de)}return T(Q);case z:e:{for(Ue=Z.key;X!==null;){if(X.key===Ue)if(X.tag===4&&X.stateNode.containerInfo===Z.containerInfo&&X.stateNode.implementation===Z.implementation){r(Q,X.sibling),de=f(X,Z.children||[]),de.return=Q,Q=de;break e}else{r(Q,X);break}else i(Q,X);X=X.sibling}de=yf(Z,Q.mode,de),de.return=Q,Q=de}return T(Q);case D:return Z=Hr(Z),Mt(Q,X,Z,de)}if(mt(Z))return ke(Q,X,Z,de);if(O(Z)){if(Ue=O(Z),typeof Ue!="function")throw Error(a(150));return Z=Ue.call(Z),Be(Q,X,Z,de)}if(typeof Z.then=="function")return Mt(Q,X,au(Z),de);if(Z.$$typeof===se)return Mt(Q,X,tu(Q,Z),de);ru(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,X!==null&&X.tag===6?(r(Q,X.sibling),de=f(X,Z),de.return=Q,Q=de):(r(Q,X),de=gf(Z,Q.mode,de),de.return=Q,Q=de),T(Q)):r(Q,X)}return function(Q,X,Z,de){try{Gl=0;var Ue=Mt(Q,X,Z,de);return Fo=null,Ue}catch(De){if(De===Po||De===su)throw De;var Tt=js(29,De,null,Q.mode);return Tt.lanes=de,Tt.return=Q,Tt}}}var Yr=q_(!0),B_=q_(!1),Ga=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ha(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(t,i,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Nt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Wc(t),S_(t,null,r),i}return Kc(t,l,i,r),Wc(t)}function Xl(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,La(t,r)}}function Lf(t,i){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Df=!1;function Yl(){if(Df){var t=Bo;if(t!==null)throw t}}function $l(t,i,r,l){Df=!1;var f=t.updateQueue;Ga=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var q=R,ee=q.next;q.next=null,T===null?p=ee:T.next=ee,T=q;var ce=t.alternate;ce!==null&&(ce=ce.updateQueue,R=ce.lastBaseUpdate,R!==T&&(R===null?ce.firstBaseUpdate=ee:R.next=ee,ce.lastBaseUpdate=q))}if(p!==null){var he=f.baseState;T=0,ce=ee=q=null,R=p;do{var te=R.lane&-536870913,oe=te!==R.lane;if(oe?(ut&te)===te:(l&te)===te){te!==0&&te===qo&&(Df=!0),ce!==null&&(ce=ce.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ke=t,Be=R;te=i;var Mt=r;switch(Be.tag){case 1:if(ke=Be.payload,typeof ke=="function"){he=ke.call(Mt,he,te);break e}he=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Be.payload,te=typeof ke=="function"?ke.call(Mt,he,te):ke,te==null)break e;he=A({},he,te);break e;case 2:Ga=!0}}te=R.callback,te!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[te]:oe.push(te))}else oe={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ce===null?(ee=ce=oe,q=he):ce=ce.next=oe,T|=te;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);ce===null&&(q=he),f.baseState=q,f.firstBaseUpdate=ee,f.lastBaseUpdate=ce,p===null&&(f.shared.lanes=0),Wa|=T,t.lanes=T,t.memoizedState=he}}function P_(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function F_(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)P_(r[t],i)}var zo=H(null),ou=H(0);function z_(t,i){t=ha,be(ou,t),be(zo,i),ha=t|i.baseLanes}function Of(){be(ou,ha),be(zo,zo.current)}function jf(){ha=ou.current,ue(zo),ue(ou)}var Ms=H(null),ni=null;function Ya(t){var i=t.alternate;be(cn,cn.current&1),be(Ms,t),ni===null&&(i===null||zo.current!==null||i.memoizedState!==null)&&(ni=t)}function Mf(t){be(cn,cn.current),be(Ms,t),ni===null&&(ni=t)}function G_(t){t.tag===22?(be(cn,cn.current),be(Ms,t),ni===null&&(ni=t)):$a()}function $a(){be(cn,cn.current),be(Ms,Ms.current)}function Us(t){ue(Ms),ni===t&&(ni=null),ue(cn)}var cn=H(0);function lu(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Fh(r)||zh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var aa=0,nt=null,Ot=null,pn=null,cu=!1,Go=!1,$r=!1,uu=0,Ql=0,Ho=null,W1=0;function an(){throw Error(a(321))}function Uf(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Os(t[r],i[r]))return!1;return!0}function Vf(t,i,r,l,f,p){return aa=p,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?Rg:Zf,$r=!1,p=r(l,f),$r=!1,Go&&(p=X_(i,r,l,f)),H_(t),p}function H_(t){$.H=Jl;var i=Ot!==null&&Ot.next!==null;if(aa=0,pn=Ot=nt=null,cu=!1,Ql=0,Ho=null,i)throw Error(a(300));t===null||_n||(t=t.dependencies,t!==null&&eu(t)&&(_n=!0))}function X_(t,i,r,l){nt=t;var f=0;do{if(Go&&(Ho=null),Ql=0,Go=!1,25<=f)throw Error(a(301));if(f+=1,pn=Ot=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=xg,p=i(r,l)}while(Go);return p}function J1(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?Kl(i):i,t=t.useState()[0],(Ot!==null?Ot.memoizedState:null)!==t&&(nt.flags|=1024),i}function qf(){var t=uu!==0;return uu=0,t}function Bf(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function Pf(t){if(cu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}cu=!1}aa=0,pn=Ot=nt=null,Go=!1,Ql=uu=0,Ho=null}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?nt.memoizedState=pn=t:pn=pn.next=t,pn}function un(){if(Ot===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var i=pn===null?nt.memoizedState:pn.next;if(i!==null)pn=i,Ot=t;else{if(t===null)throw nt.alternate===null?Error(a(467)):Error(a(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},pn===null?nt.memoizedState=pn=t:pn=pn.next=t}return pn}function du(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(t){var i=Ql;return Ql+=1,Ho===null&&(Ho=[]),t=M_(Ho,t,i),i=nt,(pn===null?i.memoizedState:pn.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?Rg:Zf),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Kl(t);if(t.$$typeof===se)return qn(t)}throw Error(a(438,String(t)))}function Ff(t){var i=null,r=nt.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var l=nt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=du(),nt.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),l=0;l<t;l++)r[l]=V;return i.index++,r}function ra(t,i){return typeof i=="function"?i(t):i}function hu(t){var i=un();return zf(i,Ot,t)}function zf(t,i,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{i=f.next;var R=T=null,q=null,ee=i,ce=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(ut&he)===he:(aa&he)===he){var te=ee.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===qo&&(ce=!0);else if((aa&te)===te){ee=ee.next,te===qo&&(ce=!0);continue}else he={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},q===null?(R=q=he,T=p):q=q.next=he,nt.lanes|=te,Wa|=te;he=ee.action,$r&&r(p,he),p=ee.hasEagerState?ee.eagerState:r(p,he)}else te={lane:he,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},q===null?(R=q=te,T=p):q=q.next=te,nt.lanes|=he,Wa|=he;ee=ee.next}while(ee!==null&&ee!==i);if(q===null?T=p:q.next=R,!Os(p,t.memoizedState)&&(_n=!0,ce&&(r=Bo,r!==null)))throw r;t.memoizedState=p,t.baseState=T,t.baseQueue=q,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Gf(t){var i=un(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var T=f=f.next;do p=t(p,T.action),T=T.next;while(T!==f);Os(p,i.memoizedState)||(_n=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,l]}function Y_(t,i,r){var l=nt,f=un(),p=pt;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var T=!Os((Ot||f).memoizedState,r);if(T&&(f.memoizedState=r,_n=!0),f=f.queue,Yf(K_.bind(null,l,f,t),[t]),f.getSnapshot!==i||T||pn!==null&&pn.memoizedState.tag&1){if(l.flags|=2048,Xo(9,{destroy:void 0},Q_.bind(null,l,f,r,i),null),qt===null)throw Error(a(349));p||(aa&127)!==0||$_(l,i,r)}return r}function $_(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=nt.updateQueue,i===null?(i=du(),nt.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function Q_(t,i,r,l){i.value=r,i.getSnapshot=l,W_(i)&&J_(t)}function K_(t,i,r){return r(function(){W_(i)&&J_(t)})}function W_(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Os(t,r)}catch{return!0}}function J_(t){var i=qr(t,2);i!==null&&Ns(i,t,2)}function Hf(t){var i=fs();if(typeof t=="function"){var r=t;if(t=r(),$r){is(!0);try{r()}finally{is(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:t},i}function Z_(t,i,r,l){return t.baseState=r,zf(t,Ot,typeof l=="function"?l:ra)}function Z1(t,i,r,l,f){if(_u(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};$.T!==null?r(!0):p.isTransition=!1,l(p),r=i.pending,r===null?(p.next=i.pending=p,eg(i,p)):(p.next=r.next,i.pending=r.next=p)}}function eg(t,i){var r=i.action,l=i.payload,f=t.state;if(i.isTransition){var p=$.T,T={};$.T=T;try{var R=r(f,l),q=$.S;q!==null&&q(T,R),tg(t,i,R)}catch(ee){Xf(t,i,ee)}finally{p!==null&&T.types!==null&&(p.types=T.types),$.T=p}}else try{p=r(f,l),tg(t,i,p)}catch(ee){Xf(t,i,ee)}}function tg(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){ng(t,i,l)},function(l){return Xf(t,i,l)}):ng(t,i,r)}function ng(t,i,r){i.status="fulfilled",i.value=r,sg(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,eg(t,r)))}function Xf(t,i,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=r,sg(i),i=i.next;while(i!==l)}t.action=null}function sg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ig(t,i){return i}function ag(t,i){if(pt){var r=qt.formState;if(r!==null){e:{var l=nt;if(pt){if(Ht){t:{for(var f=Ht,p=ti;f.nodeType!==8;){if(!p){f=null;break t}if(f=si(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Ht=si(f.nextSibling),l=f.data==="F!";break e}}Fa(l)}l=!1}l&&(i=r[0])}}return r=fs(),r.memoizedState=r.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:i},r.queue=l,r=Ng.bind(null,nt,l),l.dispatch=r,l=Hf(!1),p=Jf.bind(null,nt,!1,l.queue),l=fs(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,r=Z1.bind(null,nt,f,p,r),f.dispatch=r,l.memoizedState=t,[i,r,!1]}function rg(t){var i=un();return og(i,Ot,t)}function og(t,i,r){if(i=zf(t,i,ig)[0],t=hu(ra)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Kl(i)}catch(T){throw T===Po?su:T}else l=i;i=un();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&(nt.flags|=2048,Xo(9,{destroy:void 0},eS.bind(null,f,r),null)),[l,p,t]}function eS(t,i){t.action=i}function lg(t){var i=un(),r=Ot;if(r!==null)return og(i,r,t);un(),i=i.memoizedState,r=un();var l=r.queue.dispatch;return r.memoizedState=t,[i,l,!1]}function Xo(t,i,r,l){return t={tag:t,create:r,deps:l,inst:i,next:null},i=nt.updateQueue,i===null&&(i=du(),nt.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,i.lastEffect=t),t}function cg(){return un().memoizedState}function mu(t,i,r,l){var f=fs();nt.flags|=t,f.memoizedState=Xo(1|i,{destroy:void 0},r,l===void 0?null:l)}function pu(t,i,r,l){var f=un();l=l===void 0?null:l;var p=f.memoizedState.inst;Ot!==null&&l!==null&&Uf(l,Ot.memoizedState.deps)?f.memoizedState=Xo(i,p,r,l):(nt.flags|=t,f.memoizedState=Xo(1|i,p,r,l))}function ug(t,i){mu(8390656,8,t,i)}function Yf(t,i){pu(2048,8,t,i)}function tS(t){nt.flags|=4;var i=nt.updateQueue;if(i===null)i=du(),nt.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function dg(t){var i=un().memoizedState;return tS({ref:i,nextImpl:t}),function(){if((Nt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function fg(t,i){return pu(4,2,t,i)}function hg(t,i){return pu(4,4,t,i)}function mg(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function pg(t,i,r){r=r!=null?r.concat([t]):null,pu(4,4,mg.bind(null,i,t),r)}function $f(){}function _g(t,i){var r=un();i=i===void 0?null:i;var l=r.memoizedState;return i!==null&&Uf(i,l[1])?l[0]:(r.memoizedState=[t,i],t)}function gg(t,i){var r=un();i=i===void 0?null:i;var l=r.memoizedState;if(i!==null&&Uf(i,l[1]))return l[0];if(l=t(),$r){is(!0);try{t()}finally{is(!1)}}return r.memoizedState=[l,i],l}function Qf(t,i,r){return r===void 0||(aa&1073741824)!==0&&(ut&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=yy(),nt.lanes|=t,Wa|=t,r)}function yg(t,i,r,l){return Os(r,i)?r:zo.current!==null?(t=Qf(t,r,l),Os(t,i)||(_n=!0),t):(aa&42)===0||(aa&1073741824)!==0&&(ut&261930)===0?(_n=!0,t.memoizedState=r):(t=yy(),nt.lanes|=t,Wa|=t,i)}function Eg(t,i,r,l,f){var p=ne.p;ne.p=p!==0&&8>p?p:8;var T=$.T,R={};$.T=R,Jf(t,!1,i,r);try{var q=f(),ee=$.S;if(ee!==null&&ee(R,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ce=K1(q,l);Wl(t,i,ce,Bs(t))}else Wl(t,i,l,Bs(t))}catch(he){Wl(t,i,{then:function(){},status:"rejected",reason:he},Bs())}finally{ne.p=p,T!==null&&R.types!==null&&(T.types=R.types),$.T=T}}function nS(){}function Kf(t,i,r,l){if(t.tag!==5)throw Error(a(476));var f=vg(t).queue;Eg(t,f,i,Te,r===null?nS:function(){return Tg(t),r(l)})}function vg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:Te},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Tg(t){var i=vg(t);i.next===null&&(i=t.alternate.memoizedState),Wl(t,i.next.queue,{},Bs())}function Wf(){return qn(mc)}function bg(){return un().memoizedState}function Sg(){return un().memoizedState}function sS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=Bs();t=Ha(r);var l=Xa(i,t,r);l!==null&&(Ns(l,i,r),Xl(l,i,r)),i={cache:Af()},t.payload=i;return}i=i.return}}function iS(t,i,r){var l=Bs();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},_u(t)?wg(i,r):(r=pf(t,i,r,l),r!==null&&(Ns(r,t,l),Ag(r,i,l)))}function Ng(t,i,r){var l=Bs();Wl(t,i,r,l)}function Wl(t,i,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(_u(t))wg(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,R=p(T,r);if(f.hasEagerState=!0,f.eagerState=R,Os(R,T))return Kc(t,i,f,0),qt===null&&Qc(),!1}catch{}if(r=pf(t,i,f,l),r!==null)return Ns(r,t,l),Ag(r,i,l),!0}return!1}function Jf(t,i,r,l){if(l={lane:2,revertLane:Ih(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},_u(t)){if(i)throw Error(a(479))}else i=pf(t,r,l,2),i!==null&&Ns(i,t,2)}function _u(t){var i=t.alternate;return t===nt||i!==null&&i===nt}function wg(t,i){Go=cu=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function Ag(t,i,r){if((r&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,La(t,r)}}var Jl={readContext:qn,use:fu,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};Jl.useEffectEvent=an;var Rg={readContext:qn,use:fu,useCallback:function(t,i){return fs().memoizedState=[t,i===void 0?null:i],t},useContext:qn,useEffect:ug,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,mu(4194308,4,mg.bind(null,i,t),r)},useLayoutEffect:function(t,i){return mu(4194308,4,t,i)},useInsertionEffect:function(t,i){mu(4,2,t,i)},useMemo:function(t,i){var r=fs();i=i===void 0?null:i;var l=t();if($r){is(!0);try{t()}finally{is(!1)}}return r.memoizedState=[l,i],l},useReducer:function(t,i,r){var l=fs();if(r!==void 0){var f=r(i);if($r){is(!0);try{r(i)}finally{is(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=iS.bind(null,nt,t),[l.memoizedState,t]},useRef:function(t){var i=fs();return t={current:t},i.memoizedState=t},useState:function(t){t=Hf(t);var i=t.queue,r=Ng.bind(null,nt,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:$f,useDeferredValue:function(t,i){var r=fs();return Qf(r,t,i)},useTransition:function(){var t=Hf(!1);return t=Eg.bind(null,nt,t.queue,!0,!1),fs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var l=nt,f=fs();if(pt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),qt===null)throw Error(a(349));(ut&127)!==0||$_(l,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,ug(K_.bind(null,l,p,t),[t]),l.flags|=2048,Xo(9,{destroy:void 0},Q_.bind(null,l,p,r,i),null),r},useId:function(){var t=fs(),i=qt.identifierPrefix;if(pt){var r=Oi,l=Di;r=(l&~(1<<32-Gt(l)-1)).toString(32)+r,i="_"+i+"R_"+r,r=uu++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=W1++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Wf,useFormState:ag,useActionState:ag,useOptimistic:function(t){var i=fs();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=Jf.bind(null,nt,!0,r),r.dispatch=i,[t,i]},useMemoCache:Ff,useCacheRefresh:function(){return fs().memoizedState=sS.bind(null,nt)},useEffectEvent:function(t){var i=fs(),r={impl:t};return i.memoizedState=r,function(){if((Nt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Zf={readContext:qn,use:fu,useCallback:_g,useContext:qn,useEffect:Yf,useImperativeHandle:pg,useInsertionEffect:fg,useLayoutEffect:hg,useMemo:gg,useReducer:hu,useRef:cg,useState:function(){return hu(ra)},useDebugValue:$f,useDeferredValue:function(t,i){var r=un();return yg(r,Ot.memoizedState,t,i)},useTransition:function(){var t=hu(ra)[0],i=un().memoizedState;return[typeof t=="boolean"?t:Kl(t),i]},useSyncExternalStore:Y_,useId:bg,useHostTransitionStatus:Wf,useFormState:rg,useActionState:rg,useOptimistic:function(t,i){var r=un();return Z_(r,Ot,t,i)},useMemoCache:Ff,useCacheRefresh:Sg};Zf.useEffectEvent=dg;var xg={readContext:qn,use:fu,useCallback:_g,useContext:qn,useEffect:Yf,useImperativeHandle:pg,useInsertionEffect:fg,useLayoutEffect:hg,useMemo:gg,useReducer:Gf,useRef:cg,useState:function(){return Gf(ra)},useDebugValue:$f,useDeferredValue:function(t,i){var r=un();return Ot===null?Qf(r,t,i):yg(r,Ot.memoizedState,t,i)},useTransition:function(){var t=Gf(ra)[0],i=un().memoizedState;return[typeof t=="boolean"?t:Kl(t),i]},useSyncExternalStore:Y_,useId:bg,useHostTransitionStatus:Wf,useFormState:lg,useActionState:lg,useOptimistic:function(t,i){var r=un();return Ot!==null?Z_(r,Ot,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:Sg};xg.useEffectEvent=dg;function eh(t,i,r,l){i=t.memoizedState,r=r(l,i),r=r==null?i:A({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var th={enqueueSetState:function(t,i,r){t=t._reactInternals;var l=Bs(),f=Ha(l);f.payload=i,r!=null&&(f.callback=r),i=Xa(t,f,l),i!==null&&(Ns(i,t,l),Xl(i,t,l))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var l=Bs(),f=Ha(l);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=Xa(t,f,l),i!==null&&(Ns(i,t,l),Xl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=Bs(),l=Ha(r);l.tag=2,i!=null&&(l.callback=i),i=Xa(t,l,r),i!==null&&(Ns(i,t,r),Xl(i,t,r))}};function Cg(t,i,r,l,f,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,T):i.prototype&&i.prototype.isPureReactComponent?!Vl(r,l)||!Vl(f,p):!0}function Ig(t,i,r,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,l),i.state!==t&&th.enqueueReplaceState(i,i.state,null)}function Qr(t,i){var r=i;if("ref"in i){r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}if(t=t.defaultProps){r===i&&(r=A({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function kg(t){$c(t)}function Lg(t){console.error(t)}function Dg(t){$c(t)}function gu(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Og(t,i,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function nh(t,i,r){return r=Ha(r),r.tag=3,r.payload={element:null},r.callback=function(){gu(t,i)},r}function jg(t){return t=Ha(t),t.tag=3,t}function Mg(t,i,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Og(i,r,l)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Og(i,r,l),typeof f!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})})}function aS(t,i,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=r.alternate,i!==null&&Vo(i,r,f,!0),r=Ms.current,r!==null){switch(r.tag){case 31:case 13:return ni===null?Cu():r.alternate===null&&rn===0&&(rn=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===iu?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([l]):i.add(l),Rh(t,l,f)),!1;case 22:return r.flags|=65536,l===iu?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([l]):r.add(l)),Rh(t,l,f)),!1}throw Error(a(435,r.tag))}return Rh(t,l,f),Cu(),!1}if(pt)return i=Ms.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Tf&&(t=Error(a(422),{cause:l}),Pl(Js(t,r)))):(l!==Tf&&(i=Error(a(423),{cause:l}),Pl(Js(i,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Js(l,r),f=nh(t.stateNode,l,f),Lf(t,f),rn!==4&&(rn=2)),!1;var p=Error(a(520),{cause:l});if(p=Js(p,r),rc===null?rc=[p]:rc.push(p),rn!==4&&(rn=2),i===null)return!0;l=Js(l,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=nh(r.stateNode,l,t),Lf(r,t),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=jg(f),Mg(f,t,r,l),Lf(r,f),!1}r=r.return}while(r!==null);return!1}var sh=Error(a(461)),_n=!1;function Bn(t,i,r,l){i.child=t===null?B_(i,null,r,l):Yr(i,t.child,r,l)}function Ug(t,i,r,l,f){r=r.render;var p=i.ref;if("ref"in l){var T={};for(var R in l)R!=="ref"&&(T[R]=l[R])}else T=l;return zr(i),l=Vf(t,i,r,T,p,f),R=qf(),t!==null&&!_n?(Bf(t,i,f),oa(t,i,f)):(pt&&R&&Ef(i),i.flags|=1,Bn(t,i,l,f),i.child)}function Vg(t,i,r,l,f){if(t===null){var p=r.type;return typeof p=="function"&&!_f(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,qg(t,i,p,l,f)):(t=Jc(r.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!dh(t,f)){var T=p.memoizedProps;if(r=r.compare,r=r!==null?r:Vl,r(T,l)&&t.ref===i.ref)return oa(t,i,f)}return i.flags|=1,t=ta(p,l),t.ref=i.ref,t.return=i,i.child=t}function qg(t,i,r,l,f){if(t!==null){var p=t.memoizedProps;if(Vl(p,l)&&t.ref===i.ref)if(_n=!1,i.pendingProps=l=p,dh(t,f))(t.flags&131072)!==0&&(_n=!0);else return i.lanes=t.lanes,oa(t,i,f)}return ih(t,i,r,l,f)}function Bg(t,i,r,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,i.child=null;return Pg(t,i,p,r,l)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&nu(i,p!==null?p.cachePool:null),p!==null?z_(i,p):Of(),G_(i);else return l=i.lanes=536870912,Pg(t,i,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(nu(i,p.cachePool),z_(i,p),$a(),i.memoizedState=null):(t!==null&&nu(i,null),Of(),$a());return Bn(t,i,f,r),i.child}function Zl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Pg(t,i,r,l,f){var p=xf();return p=p===null?null:{parent:mn._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},t!==null&&nu(i,null),Of(),G_(i),t!==null&&Vo(t,i,l,!0),i.childLanes=f,null}function yu(t,i){return i=vu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Fg(t,i,r){return Yr(i,t.child,null,r),t=yu(i,i.pendingProps),t.flags|=2,Us(i),i.memoizedState=null,t}function rS(t,i,r){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(pt){if(l.mode==="hidden")return t=yu(i,l),i.lanes=536870912,Zl(null,t);if(Mf(i),(t=Ht)?(t=eE(t,ti),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Di,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},r=w_(t),r.return=i,i.child=r,Vn=i,Ht=null)):t=null,t===null)throw Fa(i);return i.lanes=536870912,null}return yu(i,l)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(Mf(i),f)if(i.flags&256)i.flags&=-257,i=Fg(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(_n||Vo(t,i,r,!1),f=(r&t.childLanes)!==0,_n||f){if(l=qt,l!==null&&(T=fn(l,r),T!==0&&T!==p.retryLane))throw p.retryLane=T,qr(t,T),Ns(l,t,T),sh;Cu(),i=Fg(t,i,r)}else t=p.treeContext,Ht=si(T.nextSibling),Vn=i,pt=!0,Pa=null,ti=!1,t!==null&&x_(i,t),i=yu(i,l),i.flags|=4096;return i}return t=ta(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Eu(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function ih(t,i,r,l,f){return zr(i),r=Vf(t,i,r,l,void 0,f),l=qf(),t!==null&&!_n?(Bf(t,i,f),oa(t,i,f)):(pt&&l&&Ef(i),i.flags|=1,Bn(t,i,r,f),i.child)}function zg(t,i,r,l,f,p){return zr(i),i.updateQueue=null,r=X_(i,l,r,f),H_(t),l=qf(),t!==null&&!_n?(Bf(t,i,p),oa(t,i,p)):(pt&&l&&Ef(i),i.flags|=1,Bn(t,i,r,p),i.child)}function Gg(t,i,r,l,f){if(zr(i),i.stateNode===null){var p=Oo,T=r.contextType;typeof T=="object"&&T!==null&&(p=qn(T)),p=new r(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=th,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},If(i),T=r.contextType,p.context=typeof T=="object"&&T!==null?qn(T):Oo,p.state=i.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(eh(i,r,T,l),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&th.enqueueReplaceState(p,p.state,null),$l(i,l,p,f),Yl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){p=i.stateNode;var R=i.memoizedProps,q=Qr(r,R);p.props=q;var ee=p.context,ce=r.contextType;T=Oo,typeof ce=="object"&&ce!==null&&(T=qn(ce));var he=r.getDerivedStateFromProps;ce=typeof he=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,ce||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||ee!==T)&&Ig(i,p,l,T),Ga=!1;var te=i.memoizedState;p.state=te,$l(i,l,p,f),Yl(),ee=i.memoizedState,R||te!==ee||Ga?(typeof he=="function"&&(eh(i,r,he,l),ee=i.memoizedState),(q=Ga||Cg(i,r,q,l,te,ee,T))?(ce||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=ee),p.props=l,p.state=ee,p.context=T,l=q):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,kf(t,i),T=i.memoizedProps,ce=Qr(r,T),p.props=ce,he=i.pendingProps,te=p.context,ee=r.contextType,q=Oo,typeof ee=="object"&&ee!==null&&(q=qn(ee)),R=r.getDerivedStateFromProps,(ee=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==he||te!==q)&&Ig(i,p,l,q),Ga=!1,te=i.memoizedState,p.state=te,$l(i,l,p,f),Yl();var oe=i.memoizedState;T!==he||te!==oe||Ga||t!==null&&t.dependencies!==null&&eu(t.dependencies)?(typeof R=="function"&&(eh(i,r,R,l),oe=i.memoizedState),(ce=Ga||Cg(i,r,ce,l,te,oe,q)||t!==null&&t.dependencies!==null&&eu(t.dependencies))?(ee||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,oe,q),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,oe,q)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=oe),p.props=l,p.state=oe,p.context=q,l=ce):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(i.flags|=1024),l=!1)}return p=l,Eu(t,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&l?(i.child=Yr(i,t.child,null,f),i.child=Yr(i,null,r,f)):Bn(t,i,r,f),i.memoizedState=p.state,t=i.child):t=oa(t,i,f),t}function Hg(t,i,r,l){return Pr(),i.flags|=256,Bn(t,i,r,l),i.child}var ah={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rh(t){return{baseLanes:t,cachePool:O_()}}function oh(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=qs),t}function Xg(t,i,r){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(cn.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(pt){if(f?Ya(i):$a(),(t=Ht)?(t=eE(t,ti),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Di,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},r=w_(t),r.return=i,i.child=r,Vn=i,Ht=null)):t=null,t===null)throw Fa(i);return zh(t)?i.lanes=32:i.lanes=536870912,null}var R=l.children;return l=l.fallback,f?($a(),f=i.mode,R=vu({mode:"hidden",children:R},f),l=Br(l,f,r,null),R.return=i,l.return=i,R.sibling=l,i.child=R,l=i.child,l.memoizedState=rh(r),l.childLanes=oh(t,T,r),i.memoizedState=ah,Zl(null,l)):(Ya(i),lh(i,R))}var q=t.memoizedState;if(q!==null&&(R=q.dehydrated,R!==null)){if(p)i.flags&256?(Ya(i),i.flags&=-257,i=ch(t,i,r)):i.memoizedState!==null?($a(),i.child=t.child,i.flags|=128,i=null):($a(),R=l.fallback,f=i.mode,l=vu({mode:"visible",children:l.children},f),R=Br(R,f,r,null),R.flags|=2,l.return=i,R.return=i,l.sibling=R,i.child=l,Yr(i,t.child,null,r),l=i.child,l.memoizedState=rh(r),l.childLanes=oh(t,T,r),i.memoizedState=ah,i=Zl(null,l));else if(Ya(i),zh(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var ee=T.dgst;T=ee,l=Error(a(419)),l.stack="",l.digest=T,Pl({value:l,source:null,stack:null}),i=ch(t,i,r)}else if(_n||Vo(t,i,r,!1),T=(r&t.childLanes)!==0,_n||T){if(T=qt,T!==null&&(l=fn(T,r),l!==0&&l!==q.retryLane))throw q.retryLane=l,qr(t,l),Ns(T,t,l),sh;Fh(R)||Cu(),i=ch(t,i,r)}else Fh(R)?(i.flags|=192,i.child=t.child,i=null):(t=q.treeContext,Ht=si(R.nextSibling),Vn=i,pt=!0,Pa=null,ti=!1,t!==null&&x_(i,t),i=lh(i,l.children),i.flags|=4096);return i}return f?($a(),R=l.fallback,f=i.mode,q=t.child,ee=q.sibling,l=ta(q,{mode:"hidden",children:l.children}),l.subtreeFlags=q.subtreeFlags&65011712,ee!==null?R=ta(ee,R):(R=Br(R,f,r,null),R.flags|=2),R.return=i,l.return=i,l.sibling=R,i.child=l,Zl(null,l),l=i.child,R=t.child.memoizedState,R===null?R=rh(r):(f=R.cachePool,f!==null?(q=mn._currentValue,f=f.parent!==q?{parent:q,pool:q}:f):f=O_(),R={baseLanes:R.baseLanes|r,cachePool:f}),l.memoizedState=R,l.childLanes=oh(t,T,r),i.memoizedState=ah,Zl(t.child,l)):(Ya(i),r=t.child,t=r.sibling,r=ta(r,{mode:"visible",children:l.children}),r.return=i,r.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=r,i.memoizedState=null,r)}function lh(t,i){return i=vu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function vu(t,i){return t=js(22,t,null,i),t.lanes=0,t}function ch(t,i,r){return Yr(i,t.child,null,r),t=lh(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Yg(t,i,r){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Nf(t.return,i,r)}function uh(t,i,r,l,f,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:p}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=r,T.tailMode=f,T.treeForkCount=p)}function $g(t,i,r){var l=i.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var T=cn.current,R=(T&2)!==0;if(R?(T=T&1|2,i.flags|=128):T&=1,be(cn,T),Bn(t,i,l,r),l=pt?Bl:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yg(t,r,i);else if(t.tag===19)Yg(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)t=r.alternate,t!==null&&lu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),uh(i,!1,f,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&lu(t)===null){i.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}uh(i,!0,r,null,p,l);break;case"together":uh(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function oa(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),Wa|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(Vo(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=ta(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=ta(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function dh(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&eu(t)))}function oS(t,i,r){switch(i.tag){case 3:nn(i,i.stateNode.containerInfo),za(i,mn,t.memoizedState.cache),Pr();break;case 27:case 5:Ti(i);break;case 4:nn(i,i.stateNode.containerInfo);break;case 10:za(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Mf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ya(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Xg(t,i,r):(Ya(i),t=oa(t,i,r),t!==null?t.sibling:null);Ya(i);break;case 19:var f=(t.flags&128)!==0;if(l=(r&i.childLanes)!==0,l||(Vo(t,i,r,!1),l=(r&i.childLanes)!==0),f){if(l)return $g(t,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),be(cn,cn.current),l)break;return null;case 22:return i.lanes=0,Bg(t,i,r,i.pendingProps);case 24:za(i,mn,t.memoizedState.cache)}return oa(t,i,r)}function Qg(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)_n=!0;else{if(!dh(t,r)&&(i.flags&128)===0)return _n=!1,oS(t,i,r);_n=(t.flags&131072)!==0}else _n=!1,pt&&(i.flags&1048576)!==0&&R_(i,Bl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Hr(i.elementType),i.type=t,typeof t=="function")_f(t)?(l=Qr(t,l),i.tag=1,i=Gg(null,i,t,l,r)):(i.tag=0,i=ih(null,i,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===re){i.tag=11,i=Ug(null,i,t,l,r);break e}else if(f===j){i.tag=14,i=Vg(null,i,t,l,r);break e}}throw i=Ce(t)||t,Error(a(306,i,""))}}return i;case 0:return ih(t,i,i.type,i.pendingProps,r);case 1:return l=i.type,f=Qr(l,i.pendingProps),Gg(t,i,l,f,r);case 3:e:{if(nn(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,kf(t,i),$l(i,l,null,r);var T=i.memoizedState;if(l=T.cache,za(i,mn,l),l!==p.cache&&wf(i,[mn],r,!0),Yl(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Hg(t,i,l,r);break e}else if(l!==f){f=Js(Error(a(424)),i),Pl(f),i=Hg(t,i,l,r);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ht=si(t.firstChild),Vn=i,pt=!0,Pa=null,ti=!0,r=B_(i,null,l,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Pr(),l===f){i=oa(t,i,r);break e}Bn(t,i,l,r)}i=i.child}return i;case 26:return Eu(t,i),t===null?(r=rE(i.type,null,i.pendingProps,null))?i.memoizedState=r:pt||(r=i.type,t=i.pendingProps,l=Mu(et.current).createElement(r),l[lt]=i,l[on]=t,Pn(l,r,t),Zt(l),i.stateNode=l):i.memoizedState=rE(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ti(i),t===null&&pt&&(l=i.stateNode=sE(i.type,i.pendingProps,et.current),Vn=i,ti=!0,f=Ht,nr(i.type)?(Gh=f,Ht=si(l.firstChild)):Ht=f),Bn(t,i,i.pendingProps.children,r),Eu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&pt&&((f=l=Ht)&&(l=US(l,i.type,i.pendingProps,ti),l!==null?(i.stateNode=l,Vn=i,Ht=si(l.firstChild),ti=!1,f=!0):f=!1),f||Fa(i)),Ti(i),f=i.type,p=i.pendingProps,T=t!==null?t.memoizedProps:null,l=p.children,qh(f,p)?l=null:T!==null&&qh(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=Vf(t,i,J1,null,null,r),mc._currentValue=f),Eu(t,i),Bn(t,i,l,r),i.child;case 6:return t===null&&pt&&((t=r=Ht)&&(r=VS(r,i.pendingProps,ti),r!==null?(i.stateNode=r,Vn=i,Ht=null,t=!0):t=!1),t||Fa(i)),null;case 13:return Xg(t,i,r);case 4:return nn(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Yr(i,null,l,r):Bn(t,i,l,r),i.child;case 11:return Ug(t,i,i.type,i.pendingProps,r);case 7:return Bn(t,i,i.pendingProps,r),i.child;case 8:return Bn(t,i,i.pendingProps.children,r),i.child;case 12:return Bn(t,i,i.pendingProps.children,r),i.child;case 10:return l=i.pendingProps,za(i,i.type,l.value),Bn(t,i,l.children,r),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,zr(i),f=qn(f),l=l(f),i.flags|=1,Bn(t,i,l,r),i.child;case 14:return Vg(t,i,i.type,i.pendingProps,r);case 15:return qg(t,i,i.type,i.pendingProps,r);case 19:return $g(t,i,r);case 31:return rS(t,i,r);case 22:return Bg(t,i,r,i.pendingProps);case 24:return zr(i),l=qn(mn),t===null?(f=xf(),f===null&&(f=qt,p=Af(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:l,cache:f},If(i),za(i,mn,f)):((t.lanes&r)!==0&&(kf(t,i),$l(i,null,null,r),Yl()),f=t.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),za(i,mn,l)):(l=p.cache,za(i,mn,l),l!==f.cache&&wf(i,[mn],r,!0))),Bn(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function la(t){t.flags|=4}function fh(t,i,r,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(by())t.flags|=8192;else throw Xr=iu,Cf}else t.flags&=-16777217}function Kg(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!dE(i))if(by())t.flags|=8192;else throw Xr=iu,Cf}function Tu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?On():536870912,t.lanes|=i,Ko|=i)}function ec(t,i){if(!pt)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Xt(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(i)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,i}function lS(t,i,r){var l=i.pendingProps;switch(vf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(i),null;case 1:return Xt(i),null;case 3:return r=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ia(mn),Ut(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(i)?la(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,bf())),Xt(i),null;case 26:var f=i.type,p=i.memoizedState;return t===null?(la(i),p!==null?(Xt(i),Kg(i,p)):(Xt(i),fh(i,f,null,l,r))):p?p!==t.memoizedState?(la(i),Xt(i),Kg(i,p)):(Xt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&la(i),Xt(i),fh(i,f,t,l,r)),null;case 27:if(Ca(i),r=et.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&la(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Xt(i),null}t=Ne.current,Uo(i)?C_(i):(t=sE(f,l,r),i.stateNode=t,la(i))}return Xt(i),null;case 5:if(Ca(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&la(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Xt(i),null}if(p=Ne.current,Uo(i))C_(i);else{var T=Mu(et.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}p[lt]=i,p[on]=l;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=p;e:switch(Pn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&la(i)}}return Xt(i),fh(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&la(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=et.current,Uo(i)){if(t=i.stateNode,r=i.memoizedProps,l=null,f=Vn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[lt]=i,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Xy(t.nodeValue,r)),t||Fa(i,!0)}else t=Mu(t).createTextNode(l),t[lt]=i,i.stateNode=t}return Xt(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(l=Uo(i),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[lt]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Xt(i),t=!1}else r=bf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(Us(i),i):(Us(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Xt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Uo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[lt]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Xt(i),f=!1}else f=bf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Us(i),i):(Us(i),null)}return Us(i),(i.flags&128)!==0?(i.lanes=r,i):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),Tu(i,i.updateQueue),Xt(i),null);case 4:return Ut(),t===null&&Oh(i.stateNode.containerInfo),Xt(i),null;case 10:return ia(i.type),Xt(i),null;case 19:if(ue(cn),l=i.memoizedState,l===null)return Xt(i),null;if(f=(i.flags&128)!==0,p=l.rendering,p===null)if(f)ec(l,!1);else{if(rn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=lu(t),p!==null){for(i.flags|=128,ec(l,!1),t=p.updateQueue,i.updateQueue=t,Tu(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)N_(r,t),r=r.sibling;return be(cn,cn.current&1|2),pt&&na(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Dn()>Au&&(i.flags|=128,f=!0,ec(l,!1),i.lanes=4194304)}else{if(!f)if(t=lu(p),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Tu(i,t),ec(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!pt)return Xt(i),null}else 2*Dn()-l.renderingStartTime>Au&&r!==536870912&&(i.flags|=128,f=!0,ec(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(t=l.last,t!==null?t.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Dn(),t.sibling=null,r=cn.current,be(cn,f?r&1|2:r&1),pt&&na(i,l.treeForkCount),t):(Xt(i),null);case 22:case 23:return Us(i),jf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(r&536870912)!==0&&(i.flags&128)===0&&(Xt(i),i.subtreeFlags&6&&(i.flags|=8192)):Xt(i),r=i.updateQueue,r!==null&&Tu(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048),t!==null&&ue(Gr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),ia(mn),Xt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function cS(t,i){switch(vf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ia(mn),Ut(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ca(i),null;case 31:if(i.memoizedState!==null){if(Us(i),i.alternate===null)throw Error(a(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Us(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(cn),null;case 4:return Ut(),null;case 10:return ia(i.type),null;case 22:case 23:return Us(i),jf(),t!==null&&ue(Gr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ia(mn),null;case 25:return null;default:return null}}function Wg(t,i){switch(vf(i),i.tag){case 3:ia(mn),Ut();break;case 26:case 27:case 5:Ca(i);break;case 4:Ut();break;case 31:i.memoizedState!==null&&Us(i);break;case 13:Us(i);break;case 19:ue(cn);break;case 10:ia(i.type);break;case 22:case 23:Us(i),jf(),t!==null&&ue(Gr);break;case 24:ia(mn)}}function tc(t,i){try{var r=i.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var p=r.create,T=r.inst;l=p(),T.destroy=l}r=r.next}while(r!==f)}}catch(R){kt(i,i.return,R)}}function Qa(t,i,r){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var T=l.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,f=i;var q=r,ee=R;try{ee()}catch(ce){kt(f,q,ce)}}}l=l.next}while(l!==p)}}catch(ce){kt(i,i.return,ce)}}function Jg(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{F_(i,r)}catch(l){kt(t,t.return,l)}}}function Zg(t,i,r){r.props=Qr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){kt(t,i,l)}}function nc(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){kt(t,i,f)}}function ji(t,i){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){kt(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){kt(t,i,f)}else r.current=null}function ey(t){var i=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){kt(t,t.return,f)}}function hh(t,i,r){try{var l=t.stateNode;kS(l,t.type,r,i),l[on]=i}catch(f){kt(t,t.return,f)}}function ty(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&nr(t.type)||t.tag===4}function mh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ty(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&nr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ph(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Un));else if(l!==4&&(l===27&&nr(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(ph(t,i,r),t=t.sibling;t!==null;)ph(t,i,r),t=t.sibling}function bu(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(l!==4&&(l===27&&nr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(bu(t,i,r),t=t.sibling;t!==null;)bu(t,i,r),t=t.sibling}function ny(t){var i=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Pn(i,l,r),i[lt]=t,i[on]=r}catch(p){kt(t,t.return,p)}}var ca=!1,gn=!1,_h=!1,sy=typeof WeakSet=="function"?WeakSet:Set,In=null;function uS(t,i){if(t=t.containerInfo,Uh=zu,t=p_(t),cf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var T=0,R=-1,q=-1,ee=0,ce=0,he=t,te=null;t:for(;;){for(var oe;he!==r||f!==0&&he.nodeType!==3||(R=T+f),he!==p||l!==0&&he.nodeType!==3||(q=T+l),he.nodeType===3&&(T+=he.nodeValue.length),(oe=he.firstChild)!==null;)te=he,he=oe;for(;;){if(he===t)break t;if(te===r&&++ee===f&&(R=T),te===p&&++ce===l&&(q=T),(oe=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=oe}r=R===-1||q===-1?null:{start:R,end:q}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vh={focusedElem:t,selectionRange:r},zu=!1,In=i;In!==null;)if(i=In,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,In=t;else for(;In!==null;){switch(i=In,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var ke=Qr(r.type,f);t=l.getSnapshotBeforeUpdate(ke,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Be){kt(r,r.return,Be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)Ph(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ph(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,In=t;break}In=i.return}}function iy(t,i,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:da(t,r),l&4&&tc(5,r);break;case 1:if(da(t,r),l&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(T){kt(r,r.return,T)}else{var f=Qr(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){kt(r,r.return,T)}}l&64&&Jg(r),l&512&&nc(r,r.return);break;case 3:if(da(t,r),l&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{F_(t,i)}catch(T){kt(r,r.return,T)}}break;case 27:i===null&&l&4&&ny(r);case 26:case 5:da(t,r),i===null&&l&4&&ey(r),l&512&&nc(r,r.return);break;case 12:da(t,r);break;case 31:da(t,r),l&4&&oy(t,r);break;case 13:da(t,r),l&4&&ly(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=ES.bind(null,r),qS(t,r))));break;case 22:if(l=r.memoizedState!==null||ca,!l){i=i!==null&&i.memoizedState!==null||gn,f=ca;var p=gn;ca=l,(gn=i)&&!p?fa(t,r,(r.subtreeFlags&8772)!==0):da(t,r),ca=f,gn=p}break;case 30:break;default:da(t,r)}}function ay(t){var i=t.alternate;i!==null&&(t.alternate=null,ay(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Oa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Kt=null,vs=!1;function ua(t,i,r){for(r=r.child;r!==null;)ry(t,i,r),r=r.sibling}function ry(t,i,r){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Rs,r)}catch{}switch(r.tag){case 26:gn||ji(r,i),ua(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:gn||ji(r,i);var l=Kt,f=vs;nr(r.type)&&(Kt=r.stateNode,vs=!1),ua(t,i,r),dc(r.stateNode),Kt=l,vs=f;break;case 5:gn||ji(r,i);case 6:if(l=Kt,f=vs,Kt=null,ua(t,i,r),Kt=l,vs=f,Kt!==null)if(vs)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(r.stateNode)}catch(p){kt(r,i,p)}else try{Kt.removeChild(r.stateNode)}catch(p){kt(r,i,p)}break;case 18:Kt!==null&&(vs?(t=Kt,Jy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),il(t)):Jy(Kt,r.stateNode));break;case 4:l=Kt,f=vs,Kt=r.stateNode.containerInfo,vs=!0,ua(t,i,r),Kt=l,vs=f;break;case 0:case 11:case 14:case 15:Qa(2,r,i),gn||Qa(4,r,i),ua(t,i,r);break;case 1:gn||(ji(r,i),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Zg(r,i,l)),ua(t,i,r);break;case 21:ua(t,i,r);break;case 22:gn=(l=gn)||r.memoizedState!==null,ua(t,i,r),gn=l;break;default:ua(t,i,r)}}function oy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{il(t)}catch(r){kt(i,i.return,r)}}}function ly(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{il(t)}catch(r){kt(i,i.return,r)}}function dS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new sy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new sy),i;default:throw Error(a(435,t.tag))}}function Su(t,i){var r=dS(t);i.forEach(function(l){if(!r.has(l)){r.add(l);var f=vS.bind(null,t,l);l.then(f,f)}})}function Ts(t,i){var r=i.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],p=t,T=i,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(nr(R.type)){Kt=R.stateNode,vs=!1;break e}break;case 5:Kt=R.stateNode,vs=!1;break e;case 3:case 4:Kt=R.stateNode.containerInfo,vs=!0;break e}R=R.return}if(Kt===null)throw Error(a(160));ry(p,T,f),Kt=null,vs=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)cy(i,t),i=i.sibling}var _i=null;function cy(t,i){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ts(i,t),bs(t),l&4&&(Qa(3,t,t.return),tc(3,t),Qa(5,t,t.return));break;case 1:Ts(i,t),bs(t),l&512&&(gn||r===null||ji(r,r.return)),l&64&&ca&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=_i;if(Ts(i,t),bs(t),l&512&&(gn||r===null||ji(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[rs]||p[lt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Pn(p,l,r),p[lt]=t,Zt(p),l=p;break e;case"link":var T=cE("link","href",f).get(l+(r.href||""));if(T){for(var R=0;R<T.length;R++)if(p=T[R],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(R,1);break t}}p=f.createElement(l),Pn(p,l,r),f.head.appendChild(p);break;case"meta":if(T=cE("meta","content",f).get(l+(r.content||""))){for(R=0;R<T.length;R++)if(p=T[R],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(R,1);break t}}p=f.createElement(l),Pn(p,l,r),f.head.appendChild(p);break;default:throw Error(a(468,l))}p[lt]=t,Zt(p),l=p}t.stateNode=l}else uE(f,t.type,t.stateNode);else t.stateNode=lE(f,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?uE(f,t.type,t.stateNode):lE(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&hh(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ts(i,t),bs(t),l&512&&(gn||r===null||ji(r,r.return)),r!==null&&l&4&&hh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ts(i,t),bs(t),l&512&&(gn||r===null||ji(r,r.return)),t.flags&32){f=t.stateNode;try{wn(f,"")}catch(ke){kt(t,t.return,ke)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,hh(t,f,r!==null?r.memoizedProps:f)),l&1024&&(_h=!0);break;case 6:if(Ts(i,t),bs(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(ke){kt(t,t.return,ke)}}break;case 3:if(qu=null,f=_i,_i=Uu(i.containerInfo),Ts(i,t),_i=f,bs(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{il(i.containerInfo)}catch(ke){kt(t,t.return,ke)}_h&&(_h=!1,uy(t));break;case 4:l=_i,_i=Uu(t.stateNode.containerInfo),Ts(i,t),bs(t),_i=l;break;case 12:Ts(i,t),bs(t);break;case 31:Ts(i,t),bs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:Ts(i,t),bs(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(wu=Dn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:f=t.memoizedState!==null;var q=r!==null&&r.memoizedState!==null,ee=ca,ce=gn;if(ca=ee||f,gn=ce||q,Ts(i,t),gn=ce,ca=ee,bs(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||q||ca||gn||Kr(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){q=r=i;try{if(p=q.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=q.stateNode;var he=q.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ke){kt(q,q.return,ke)}}}else if(i.tag===6){if(r===null){q=i;try{q.stateNode.nodeValue=f?"":q.memoizedProps}catch(ke){kt(q,q.return,ke)}}}else if(i.tag===18){if(r===null){q=i;try{var oe=q.stateNode;f?Zy(oe,!0):Zy(q.stateNode,!1)}catch(ke){kt(q,q.return,ke)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Su(t,r))));break;case 19:Ts(i,t),bs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:Ts(i,t),bs(t)}}function bs(t){var i=t.flags;if(i&2){try{for(var r,l=t.return;l!==null;){if(ty(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=mh(t);bu(t,p,f);break;case 5:var T=r.stateNode;r.flags&32&&(wn(T,""),r.flags&=-33);var R=mh(t);bu(t,R,T);break;case 3:case 4:var q=r.stateNode.containerInfo,ee=mh(t);ph(t,ee,q);break;default:throw Error(a(161))}}catch(ce){kt(t,t.return,ce)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function uy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;uy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function da(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)iy(t,i.alternate,i),i=i.sibling}function Kr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Qa(4,i,i.return),Kr(i);break;case 1:ji(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Zg(i,i.return,r),Kr(i);break;case 27:dc(i.stateNode);case 26:case 5:ji(i,i.return),Kr(i);break;case 22:i.memoizedState===null&&Kr(i);break;case 30:Kr(i);break;default:Kr(i)}t=t.sibling}}function fa(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:fa(f,p,r),tc(4,p);break;case 1:if(fa(f,p,r),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){kt(l,l.return,ee)}if(l=p,f=l.updateQueue,f!==null){var R=l.stateNode;try{var q=f.shared.hiddenCallbacks;if(q!==null)for(f.shared.hiddenCallbacks=null,f=0;f<q.length;f++)P_(q[f],R)}catch(ee){kt(l,l.return,ee)}}r&&T&64&&Jg(p),nc(p,p.return);break;case 27:ny(p);case 26:case 5:fa(f,p,r),r&&l===null&&T&4&&ey(p),nc(p,p.return);break;case 12:fa(f,p,r);break;case 31:fa(f,p,r),r&&T&4&&oy(f,p);break;case 13:fa(f,p,r),r&&T&4&&ly(f,p);break;case 22:p.memoizedState===null&&fa(f,p,r),nc(p,p.return);break;case 30:break;default:fa(f,p,r)}i=i.sibling}}function gh(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Fl(r))}function yh(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fl(t))}function gi(t,i,r,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dy(t,i,r,l),i=i.sibling}function dy(t,i,r,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:gi(t,i,r,l),f&2048&&tc(9,i);break;case 1:gi(t,i,r,l);break;case 3:gi(t,i,r,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fl(t)));break;case 12:if(f&2048){gi(t,i,r,l),t=i.stateNode;try{var p=i.memoizedProps,T=p.id,R=p.onPostCommit;typeof R=="function"&&R(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(q){kt(i,i.return,q)}}else gi(t,i,r,l);break;case 31:gi(t,i,r,l);break;case 13:gi(t,i,r,l);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?gi(t,i,r,l):sc(t,i):p._visibility&2?gi(t,i,r,l):(p._visibility|=2,Yo(t,i,r,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&gh(T,i);break;case 24:gi(t,i,r,l),f&2048&&yh(i.alternate,i);break;default:gi(t,i,r,l)}}function Yo(t,i,r,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,T=i,R=r,q=l,ee=T.flags;switch(T.tag){case 0:case 11:case 15:Yo(p,T,R,q,f),tc(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Yo(p,T,R,q,f):sc(p,T):(ce._visibility|=2,Yo(p,T,R,q,f)),f&&ee&2048&&gh(T.alternate,T);break;case 24:Yo(p,T,R,q,f),f&&ee&2048&&yh(T.alternate,T);break;default:Yo(p,T,R,q,f)}i=i.sibling}}function sc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,l=i,f=l.flags;switch(l.tag){case 22:sc(r,l),f&2048&&gh(l.alternate,l);break;case 24:sc(r,l),f&2048&&yh(l.alternate,l);break;default:sc(r,l)}i=i.sibling}}var ic=8192;function $o(t,i,r){if(t.subtreeFlags&ic)for(t=t.child;t!==null;)fy(t,i,r),t=t.sibling}function fy(t,i,r){switch(t.tag){case 26:$o(t,i,r),t.flags&ic&&t.memoizedState!==null&&WS(r,_i,t.memoizedState,t.memoizedProps);break;case 5:$o(t,i,r);break;case 3:case 4:var l=_i;_i=Uu(t.stateNode.containerInfo),$o(t,i,r),_i=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ic,ic=16777216,$o(t,i,r),ic=l):$o(t,i,r));break;default:$o(t,i,r)}}function hy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ac(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];In=l,py(l,t)}hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)my(t),t=t.sibling}function my(t){switch(t.tag){case 0:case 11:case 15:ac(t),t.flags&2048&&Qa(9,t,t.return);break;case 3:ac(t);break;case 12:ac(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nu(t)):ac(t);break;default:ac(t)}}function Nu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];In=l,py(l,t)}hy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Qa(8,i,i.return),Nu(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Nu(i));break;default:Nu(i)}t=t.sibling}}function py(t,i){for(;In!==null;){var r=In;switch(r.tag){case 0:case 11:case 15:Qa(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Fl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,In=l;else e:for(r=t;In!==null;){l=In;var f=l.sibling,p=l.return;if(ay(l),l===r){In=null;break e}if(f!==null){f.return=p,In=f;break e}In=p}}}var fS={getCacheForType:function(t){var i=qn(mn),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return qn(mn).controller.signal}},hS=typeof WeakMap=="function"?WeakMap:Map,Nt=0,qt=null,rt=null,ut=0,It=0,Vs=null,Ka=!1,Qo=!1,Eh=!1,ha=0,rn=0,Wa=0,Wr=0,vh=0,qs=0,Ko=0,rc=null,Ss=null,Th=!1,wu=0,_y=0,Au=1/0,Ru=null,Ja=null,bn=0,Za=null,Wo=null,ma=0,bh=0,Sh=null,gy=null,oc=0,Nh=null;function Bs(){return(Nt&2)!==0&&ut!==0?ut&-ut:$.T!==null?Ih():Ar()}function yy(){if(qs===0)if((ut&536870912)===0||pt){var t=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),qs=t}else qs=536870912;return t=Ms.current,t!==null&&(t.flags|=32),qs}function Ns(t,i,r){(t===qt&&(It===2||It===9)||t.cancelPendingCommit!==null)&&(Jo(t,0),er(t,ut,qs,!1)),di(t,r),((Nt&2)===0||t!==qt)&&(t===qt&&((Nt&2)===0&&(Wr|=r),rn===4&&er(t,ut,qs,!1)),Mi(t))}function Ey(t,i,r){if((Nt&6)!==0)throw Error(a(327));var l=!r&&(i&127)===0&&(i&t.expiredLanes)===0||Is(t,i),f=l?_S(t,i):Ah(t,i,!0),p=l;do{if(f===0){Qo&&!l&&er(t,i,0,!1);break}else{if(r=t.current.alternate,p&&!mS(r)){f=Ah(t,i,!1),p=!1;continue}if(f===2){if(p=i,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var R=t;f=rc;var q=R.current.memoizedState.isDehydrated;if(q&&(Jo(R,T).flags|=256),T=Ah(R,T,!1),T!==2){if(Eh&&!q){R.errorRecoveryDisabledLanes|=p,Wr|=p,f=4;break e}p=Ss,Ss=f,p!==null&&(Ss===null?Ss=p:Ss.push.apply(Ss,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){Jo(t,0),er(t,i,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:er(l,i,qs,!Ka);break e;case 2:Ss=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=wu+300-Dn(),10<f)){if(er(l,i,qs,!Ka),ge(l,0,!0)!==0)break e;ma=i,l.timeoutHandle=Ky(vy.bind(null,l,r,Ss,Ru,Th,i,qs,Wr,Ko,Ka,p,"Throttled",-0,0),f);break e}vy(l,r,Ss,Ru,Th,i,qs,Wr,Ko,Ka,p,null,-0,0)}}break}while(!0);Mi(t)}function vy(t,i,r,l,f,p,T,R,q,ee,ce,he,te,oe){if(t.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Un},fy(i,p,he);var ke=(p&62914560)===p?wu-Dn():(p&4194048)===p?_y-Dn():0;if(ke=JS(he,ke),ke!==null){ma=p,t.cancelPendingCommit=ke(xy.bind(null,t,i,p,r,l,f,T,R,q,ce,he,null,te,oe)),er(t,p,T,!ee);return}}xy(t,i,p,r,l,f,T,R,q)}function mS(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],p=f.getSnapshot;f=f.value;try{if(!Os(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function er(t,i,r,l){i&=~vh,i&=~Wr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var p=31-Gt(f),T=1<<p;l[p]=-1,f&=~T}r!==0&&as(t,r,i)}function xu(){return(Nt&6)===0?(lc(0),!1):!0}function wh(){if(rt!==null){if(It===0)var t=rt.return;else t=rt,sa=Fr=null,Pf(t),Fo=null,Gl=0,t=rt;for(;t!==null;)Wg(t.alternate,t),t=t.return;rt=null}}function Jo(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,OS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ma=0,wh(),qt=t,rt=r=ta(t.current,null),ut=i,It=0,Vs=null,Ka=!1,Qo=Is(t,i),Eh=!1,Ko=qs=vh=Wr=Wa=rn=0,Ss=rc=null,Th=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Gt(l),p=1<<f;i|=t[f],l&=~p}return ha=i,Qc(),r}function Ty(t,i){nt=null,$.H=Jl,i===Po||i===su?(i=U_(),It=3):i===Cf?(i=U_(),It=4):It=i===sh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vs=i,rt===null&&(rn=1,gu(t,Js(i,t.current)))}function by(){var t=Ms.current;return t===null?!0:(ut&4194048)===ut?ni===null:(ut&62914560)===ut||(ut&536870912)!==0?t===ni:!1}function Sy(){var t=$.H;return $.H=Jl,t===null?Jl:t}function Ny(){var t=$.A;return $.A=fS,t}function Cu(){rn=4,Ka||(ut&4194048)!==ut&&Ms.current!==null||(Qo=!0),(Wa&134217727)===0&&(Wr&134217727)===0||qt===null||er(qt,ut,qs,!1)}function Ah(t,i,r){var l=Nt;Nt|=2;var f=Sy(),p=Ny();(qt!==t||ut!==i)&&(Ru=null,Jo(t,i)),i=!1;var T=rn;e:do try{if(It!==0&&rt!==null){var R=rt,q=Vs;switch(It){case 8:wh(),T=6;break e;case 3:case 2:case 9:case 6:Ms.current===null&&(i=!0);var ee=It;if(It=0,Vs=null,Zo(t,R,q,ee),r&&Qo){T=0;break e}break;default:ee=It,It=0,Vs=null,Zo(t,R,q,ee)}}pS(),T=rn;break}catch(ce){Ty(t,ce)}while(!0);return i&&t.shellSuspendCounter++,sa=Fr=null,Nt=l,$.H=f,$.A=p,rt===null&&(qt=null,ut=0,Qc()),T}function pS(){for(;rt!==null;)wy(rt)}function _S(t,i){var r=Nt;Nt|=2;var l=Sy(),f=Ny();qt!==t||ut!==i?(Ru=null,Au=Dn()+500,Jo(t,i)):Qo=Is(t,i);e:do try{if(It!==0&&rt!==null){i=rt;var p=Vs;t:switch(It){case 1:It=0,Vs=null,Zo(t,i,p,1);break;case 2:case 9:if(j_(p)){It=0,Vs=null,Ay(i);break}i=function(){It!==2&&It!==9||qt!==t||(It=7),Mi(t)},p.then(i,i);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:j_(p)?(It=0,Vs=null,Ay(i)):(It=0,Vs=null,Zo(t,i,p,7));break;case 5:var T=null;switch(rt.tag){case 26:T=rt.memoizedState;case 5:case 27:var R=rt;if(T?dE(T):R.stateNode.complete){It=0,Vs=null;var q=R.sibling;if(q!==null)rt=q;else{var ee=R.return;ee!==null?(rt=ee,Iu(ee)):rt=null}break t}}It=0,Vs=null,Zo(t,i,p,5);break;case 6:It=0,Vs=null,Zo(t,i,p,6);break;case 8:wh(),rn=6;break e;default:throw Error(a(462))}}gS();break}catch(ce){Ty(t,ce)}while(!0);return sa=Fr=null,$.H=l,$.A=f,Nt=r,rt!==null?0:(qt=null,ut=0,Qc(),rn)}function gS(){for(;rt!==null&&!Ol();)wy(rt)}function wy(t){var i=Qg(t.alternate,t,ha);t.memoizedProps=t.pendingProps,i===null?Iu(t):rt=i}function Ay(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=zg(r,i,i.pendingProps,i.type,void 0,ut);break;case 11:i=zg(r,i,i.pendingProps,i.type.render,i.ref,ut);break;case 5:Pf(i);default:Wg(r,i),i=rt=N_(i,ha),i=Qg(r,i,ha)}t.memoizedProps=t.pendingProps,i===null?Iu(t):rt=i}function Zo(t,i,r,l){sa=Fr=null,Pf(i),Fo=null,Gl=0;var f=i.return;try{if(aS(t,f,i,r,ut)){rn=1,gu(t,Js(r,t.current)),rt=null;return}}catch(p){if(f!==null)throw rt=f,p;rn=1,gu(t,Js(r,t.current)),rt=null;return}i.flags&32768?(pt||l===1?t=!0:Qo||(ut&536870912)!==0?t=!1:(Ka=t=!0,(l===2||l===9||l===3||l===6)&&(l=Ms.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ry(i,t)):Iu(i)}function Iu(t){var i=t;do{if((i.flags&32768)!==0){Ry(i,Ka);return}t=i.return;var r=lS(i.alternate,i,ha);if(r!==null){rt=r;return}if(i=i.sibling,i!==null){rt=i;return}rt=i=t}while(i!==null);rn===0&&(rn=5)}function Ry(t,i){do{var r=cS(t.alternate,t);if(r!==null){r.flags&=32767,rt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){rt=t;return}rt=t=r}while(t!==null);rn=6,rt=null}function xy(t,i,r,l,f,p,T,R,q){t.cancelPendingCommit=null;do ku();while(bn!==0);if((Nt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=mf,wr(t,r,p,T,R,q),t===qt&&(rt=qt=null,ut=0),Wo=i,Za=t,ma=r,bh=p,Sh=f,gy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,TS(ui,function(){return Dy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,f=ne.p,ne.p=2,T=Nt,Nt|=4;try{uS(t,i,r)}finally{Nt=T,ne.p=f,$.T=l}}bn=1,Cy(),Iy(),ky()}}function Cy(){if(bn===1){bn=0;var t=Za,i=Wo,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=$.T,$.T=null;var l=ne.p;ne.p=2;var f=Nt;Nt|=4;try{cy(i,t);var p=Vh,T=p_(t.containerInfo),R=p.focusedElem,q=p.selectionRange;if(T!==R&&R&&R.ownerDocument&&m_(R.ownerDocument.documentElement,R)){if(q!==null&&cf(R)){var ee=q.start,ce=q.end;if(ce===void 0&&(ce=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(ce,R.value.length);else{var he=R.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var oe=te.getSelection(),ke=R.textContent.length,Be=Math.min(q.start,ke),Mt=q.end===void 0?Be:Math.min(q.end,ke);!oe.extend&&Be>Mt&&(T=Mt,Mt=Be,Be=T);var Q=h_(R,Be),X=h_(R,Mt);if(Q&&X&&(oe.rangeCount!==1||oe.anchorNode!==Q.node||oe.anchorOffset!==Q.offset||oe.focusNode!==X.node||oe.focusOffset!==X.offset)){var Z=he.createRange();Z.setStart(Q.node,Q.offset),oe.removeAllRanges(),Be>Mt?(oe.addRange(Z),oe.extend(X.node,X.offset)):(Z.setEnd(X.node,X.offset),oe.addRange(Z))}}}}for(he=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&he.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var de=he[R];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}zu=!!Uh,Vh=Uh=null}finally{Nt=f,ne.p=l,$.T=r}}t.current=i,bn=2}}function Iy(){if(bn===2){bn=0;var t=Za,i=Wo,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=$.T,$.T=null;var l=ne.p;ne.p=2;var f=Nt;Nt|=4;try{iy(t,i.alternate,i)}finally{Nt=f,ne.p=l,$.T=r}}bn=3}}function ky(){if(bn===4||bn===3){bn=0,br();var t=Za,i=Wo,r=ma,l=gy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?bn=5:(bn=0,Wo=Za=null,Ly(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ja=null),$n(r),i=i.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Rs,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=$.T,f=ne.p,ne.p=2,$.T=null;try{for(var p=t.onRecoverableError,T=0;T<l.length;T++){var R=l[T];p(R.value,{componentStack:R.stack})}}finally{$.T=i,ne.p=f}}(ma&3)!==0&&ku(),Mi(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Nh?oc++:(oc=0,Nh=t):oc=0,lc(0)}}function Ly(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Fl(i)))}function ku(){return Cy(),Iy(),ky(),Dy()}function Dy(){if(bn!==5)return!1;var t=Za,i=bh;bh=0;var r=$n(ma),l=$.T,f=ne.p;try{ne.p=32>r?32:r,$.T=null,r=Sh,Sh=null;var p=Za,T=ma;if(bn=0,Wo=Za=null,ma=0,(Nt&6)!==0)throw Error(a(331));var R=Nt;if(Nt|=4,my(p.current),dy(p,p.current,T,r),Nt=R,lc(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Rs,p)}catch{}return!0}finally{ne.p=f,$.T=l,Ly(t,i)}}function Oy(t,i,r){i=Js(r,i),i=nh(t.stateNode,i,2),t=Xa(t,i,2),t!==null&&(di(t,2),Mi(t))}function kt(t,i,r){if(t.tag===3)Oy(t,t,r);else for(;i!==null;){if(i.tag===3){Oy(i,t,r);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ja===null||!Ja.has(l))){t=Js(r,t),r=jg(2),l=Xa(i,r,2),l!==null&&(Mg(r,l,i,t),di(l,2),Mi(l));break}}i=i.return}}function Rh(t,i,r){var l=t.pingCache;if(l===null){l=t.pingCache=new hS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(r)||(Eh=!0,f.add(r),t=yS.bind(null,t,i,r),i.then(t,t))}function yS(t,i,r){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,qt===t&&(ut&r)===r&&(rn===4||rn===3&&(ut&62914560)===ut&&300>Dn()-wu?(Nt&2)===0&&Jo(t,0):vh|=r,Ko===ut&&(Ko=0)),Mi(t)}function jy(t,i){i===0&&(i=On()),t=qr(t,i),t!==null&&(di(t,i),Mi(t))}function ES(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),jy(t,r)}function vS(t,i){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),jy(t,r)}function TS(t,i){return sn(t,i)}var Lu=null,el=null,xh=!1,Du=!1,Ch=!1,tr=0;function Mi(t){t!==el&&t.next===null&&(el===null?Lu=el=t:el=el.next=t),Du=!0,xh||(xh=!0,SS())}function lc(t,i){if(!Ch&&Du){Ch=!0;do for(var r=!1,l=Lu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,R=l.pingedLanes;p=(1<<31-Gt(42|t)+1)-1,p&=f&~(T&~R),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,qy(l,p))}else p=ut,p=ge(l,l===qt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Is(l,p)||(r=!0,qy(l,p));l=l.next}while(r);Ch=!1}}function bS(){My()}function My(){Du=xh=!1;var t=0;tr!==0&&DS()&&(t=tr);for(var i=Dn(),r=null,l=Lu;l!==null;){var f=l.next,p=Uy(l,i);p===0?(l.next=null,r===null?Lu=f:r.next=f,f===null&&(el=r)):(r=l,(t!==0||(p&3)!==0)&&(Du=!0)),l=f}bn!==0&&bn!==5||lc(t),tr!==0&&(tr=0)}function Uy(t,i){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-Gt(p),R=1<<T,q=f[T];q===-1?((R&r)===0||(R&l)!==0)&&(f[T]=jl(R,i)):q<=i&&(t.expiredLanes|=R),p&=~R}if(i=qt,r=ut,r=ge(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===i&&(It===2||It===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&As(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Is(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(l!==null&&As(l),$n(r)){case 2:case 8:r=ss;break;case 32:r=ui;break;case 268435456:r=Sr;break;default:r=ui}return l=Vy.bind(null,t),r=sn(r,l),t.callbackPriority=i,t.callbackNode=r,i}return l!==null&&l!==null&&As(l),t.callbackPriority=2,t.callbackNode=null,2}function Vy(t,i){if(bn!==0&&bn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(ku()&&t.callbackNode!==r)return null;var l=ut;return l=ge(t,t===qt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ey(t,l,i),Uy(t,Dn()),t.callbackNode!=null&&t.callbackNode===r?Vy.bind(null,t):null)}function qy(t,i){if(ku())return null;Ey(t,i,!0)}function SS(){jS(function(){(Nt&6)!==0?sn(ci,bS):My()})}function Ih(){if(tr===0){var t=qo;t===0&&(t=Tn,Tn<<=1,(Tn&261888)===0&&(Tn=256)),tr=t}return tr}function By(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:cs(""+t)}function Py(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function NS(t,i,r,l,f){if(i==="submit"&&r&&r.stateNode===f){var p=By((f[on]||null).action),T=l.submitter;T&&(i=(i=T[on]||null)?By(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var R=new vt("action","action",null,l,f);t.push({event:R,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(tr!==0){var q=T?Py(f,T):new FormData(f);Kf(r,{pending:!0,data:q,method:f.method,action:p},null,q)}}else typeof p=="function"&&(R.preventDefault(),q=T?Py(f,T):new FormData(f),Kf(r,{pending:!0,data:q,method:f.method,action:p},p,q))},currentTarget:f}]})}}for(var kh=0;kh<hf.length;kh++){var Lh=hf[kh],wS=Lh.toLowerCase(),AS=Lh[0].toUpperCase()+Lh.slice(1);pi(wS,"on"+AS)}pi(y_,"onAnimationEnd"),pi(E_,"onAnimationIteration"),pi(v_,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(F1,"onTransitionRun"),pi(z1,"onTransitionStart"),pi(G1,"onTransitionCancel"),pi(T_,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function Fy(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var T=l.length-1;0<=T;T--){var R=l[T],q=R.instance,ee=R.currentTarget;if(R=R.listener,q!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=ee;try{p(f)}catch(ce){$c(ce)}f.currentTarget=null,p=q}else for(T=0;T<l.length;T++){if(R=l[T],q=R.instance,ee=R.currentTarget,R=R.listener,q!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=ee;try{p(f)}catch(ce){$c(ce)}f.currentTarget=null,p=q}}}}function ot(t,i){var r=i[wi];r===void 0&&(r=i[wi]=new Set);var l=t+"__bubble";r.has(l)||(zy(i,t,2,!1),r.add(l))}function Dh(t,i,r){var l=0;i&&(l|=4),zy(r,t,l,i)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Oh(t){if(!t[Ou]){t[Ou]=!0,fi.forEach(function(r){r!=="selectionchange"&&(RS.has(r)||Dh(r,!1,t),Dh(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ou]||(i[Ou]=!0,Dh("selectionchange",!1,i))}}function zy(t,i,r,l){switch(yE(i)){case 2:var f=tN;break;case 8:f=nN;break;default:f=Qh}r=f.bind(null,i,r,t),f=void 0,!hi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,r,{capture:!0,passive:f}):t.addEventListener(i,r,!0):f!==void 0?t.addEventListener(i,r,{passive:f}):t.addEventListener(i,r,!1)}function jh(t,i,r,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var R=l.stateNode.containerInfo;if(R===f)break;if(T===4)for(T=l.return;T!==null;){var q=T.tag;if((q===3||q===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;R!==null;){if(T=ln(R),T===null)return;if(q=T.tag,q===5||q===6||q===26||q===27){l=p=T;continue e}R=R.parentNode}}l=l.return}ys(function(){var ee=p,ce=we(r),he=[];e:{var te=b_.get(t);if(te!==void 0){var oe=vt,ke=t;switch(t){case"keypress":if(W(r)===0)break e;case"keydown":case"keyup":oe=xo;break;case"focusin":ke="focus",oe=ea;break;case"focusout":ke="blur",oe=ea;break;case"beforeblur":case"afterblur":oe=ea;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=vo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=E;break;case y_:case E_:case v_:oe=bo;break;case T_:oe=I;break;case"scroll":case"scrollend":oe=Va;break;case"wheel":oe=ie;break;case"copy":case"cut":case"paste":oe=jr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=mi;break;case"toggle":case"beforetoggle":oe=He}var Be=(i&4)!==0,Mt=!Be&&(t==="scroll"||t==="scrollend"),Q=Be?te!==null?te+"Capture":null:te;Be=[];for(var X=ee,Z;X!==null;){var de=X;if(Z=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Z===null||Q===null||(de=hn(X,Q),de!=null&&Be.push(uc(X,de,Z))),Mt)break;X=X.return}0<Be.length&&(te=new oe(te,ke,null,r,ce),he.push({event:te,listeners:Be}))}}if((i&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",te&&r!==Lr&&(ke=r.relatedTarget||r.fromElement)&&(ln(ke)||ke[Fs]))break e;if((oe||te)&&(te=ce.window===ce?ce:(te=ce.ownerDocument)?te.defaultView||te.parentWindow:window,oe?(ke=r.relatedTarget||r.toElement,oe=ee,ke=ke?ln(ke):null,ke!==null&&(Mt=u(ke),Be=ke.tag,ke!==Mt||Be!==5&&Be!==27&&Be!==6)&&(ke=null)):(oe=null,ke=ee),oe!==ke)){if(Be=Dr,de="onMouseLeave",Q="onMouseEnter",X="mouse",(t==="pointerout"||t==="pointerover")&&(Be=mi,de="onPointerLeave",Q="onPointerEnter",X="pointer"),Mt=oe==null?te:Mn(oe),Z=ke==null?te:Mn(ke),te=new Be(de,X+"leave",oe,r,ce),te.target=Mt,te.relatedTarget=Z,de=null,ln(ce)===ee&&(Be=new Be(Q,X+"enter",ke,r,ce),Be.target=Z,Be.relatedTarget=Mt,de=Be),Mt=de,oe&&ke)t:{for(Be=xS,Q=oe,X=ke,Z=0,de=Q;de;de=Be(de))Z++;de=0;for(var Ue=X;Ue;Ue=Be(Ue))de++;for(;0<Z-de;)Q=Be(Q),Z--;for(;0<de-Z;)X=Be(X),de--;for(;Z--;){if(Q===X||X!==null&&Q===X.alternate){Be=Q;break t}Q=Be(Q),X=Be(X)}Be=null}else Be=null;oe!==null&&Gy(he,te,oe,Be,!1),ke!==null&&Mt!==null&&Gy(he,Mt,ke,Be,!0)}}e:{if(te=ee?Mn(ee):window,oe=te.nodeName&&te.nodeName.toLowerCase(),oe==="select"||oe==="input"&&te.type==="file")var Tt=o_;else if(Io(te))if(l_)Tt=q1;else{Tt=U1;var De=M1}else oe=te.nodeName,!oe||oe.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&gs(ee.elementType)&&(Tt=o_):Tt=V1;if(Tt&&(Tt=Tt(t,ee))){Li(he,Tt,r,ce);break e}De&&De(t,te,ee),t==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Ir(te,"number",te.value)}switch(De=ee?Mn(ee):window,t){case"focusin":(Io(De)||De.contentEditable==="true")&&(ko=De,uf=ee,ql=null);break;case"focusout":ql=uf=ko=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,__(he,r,ce);break;case"selectionchange":if(P1)break;case"keydown":case"keyup":__(he,r,ce)}var it;if(gt)e:{switch(t){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Cn?qe(t,r)&&(dt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(dt="onCompositionStart");dt&&(fe&&r.locale!=="ko"&&(Cn||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Cn&&(it=P()):(y=ce,N="value"in y?y.value:y.textContent,Cn=!0)),De=ju(ee,dt),0<De.length&&(dt=new Ks(dt,t,null,r,ce),he.push({event:dt,listeners:De}),it?dt.data=it:(it=ct(r),it!==null&&(dt.data=it)))),(it=K?Es(t,r):ds(t,r))&&(dt=ju(ee,"onBeforeInput"),0<dt.length&&(De=new Ks("onBeforeInput","beforeinput",null,r,ce),he.push({event:De,listeners:dt}),De.data=it)),NS(he,t,ee,r,ce)}Fy(he,i)})}function uc(t,i,r){return{instance:t,listener:i,currentTarget:r}}function ju(t,i){for(var r=i+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=hn(t,r),f!=null&&l.unshift(uc(t,f,p)),f=hn(t,i),f!=null&&l.push(uc(t,f,p))),t.tag===3)return l;t=t.return}return[]}function xS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gy(t,i,r,l,f){for(var p=i._reactName,T=[];r!==null&&r!==l;){var R=r,q=R.alternate,ee=R.stateNode;if(R=R.tag,q!==null&&q===l)break;R!==5&&R!==26&&R!==27||ee===null||(q=ee,f?(ee=hn(r,p),ee!=null&&T.unshift(uc(r,ee,q))):f||(ee=hn(r,p),ee!=null&&T.push(uc(r,ee,q)))),r=r.return}T.length!==0&&t.push({event:i,listeners:T})}var CS=/\r\n?/g,IS=/\u0000|\uFFFD/g;function Hy(t){return(typeof t=="string"?t:""+t).replace(CS,`
`).replace(IS,"")}function Xy(t,i){return i=Hy(i),Hy(t)===i}function jt(t,i,r,l,f,p){switch(r){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&wn(t,""+l);break;case"className":ls(t,"class",l);break;case"tabIndex":ls(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(t,r,l);break;case"style":xi(t,l,p);break;case"data":if(i!=="object"){ls(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=cs(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&jt(t,i,"name",f.name,f,null),jt(t,i,"formEncType",f.formEncType,f,null),jt(t,i,"formMethod",f.formMethod,f,null),jt(t,i,"formTarget",f.formTarget,f,null)):(jt(t,i,"encType",f.encType,f,null),jt(t,i,"method",f.method,f,null),jt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=cs(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Un);break;case"onScroll":l!=null&&ot("scroll",t);break;case"onScrollEnd":l!=null&&ot("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=cs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":ot("beforetoggle",t),ot("toggle",t),$i(t,"popover",l);break;case"xlinkActuate":Ct(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$i(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ua.get(r)||r,$i(t,r,l))}}function Mh(t,i,r,l,f,p){switch(r){case"style":xi(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&ot("scroll",t);break;case"onScrollEnd":l!=null&&ot("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ja.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=t[on]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):$i(t,r,l)}}}function Pn(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",t),ot("load",t);var l=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var T=r[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:jt(t,i,p,T,r,null)}}f&&jt(t,i,"srcSet",r.srcSet,r,null),l&&jt(t,i,"src",r.src,r,null);return;case"input":ot("invalid",t);var R=p=T=f=null,q=null,ee=null;for(l in r)if(r.hasOwnProperty(l)){var ce=r[l];if(ce!=null)switch(l){case"name":f=ce;break;case"type":T=ce;break;case"checked":q=ce;break;case"defaultChecked":ee=ce;break;case"value":p=ce;break;case"defaultValue":R=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,i));break;default:jt(t,i,l,ce,r,null)}}Cr(t,p,R,q,ee,T,f,!1);return;case"select":ot("invalid",t),l=T=p=null;for(f in r)if(r.hasOwnProperty(f)&&(R=r[f],R!=null))switch(f){case"value":p=R;break;case"defaultValue":T=R;break;case"multiple":l=R;default:jt(t,i,f,R,r,null)}i=p,r=T,t.multiple=!!l,i!=null?Xs(t,!!l,i,!1):r!=null&&Xs(t,!!l,r,!0);return;case"textarea":ot("invalid",t),p=f=l=null;for(T in r)if(r.hasOwnProperty(T)&&(R=r[T],R!=null))switch(T){case"value":l=R;break;case"defaultValue":f=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:jt(t,i,T,R,r,null)}Ys(t,l,f,p);return;case"option":for(q in r)r.hasOwnProperty(q)&&(l=r[q],l!=null)&&(q==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":jt(t,i,q,l,r,null));return;case"dialog":ot("beforetoggle",t),ot("toggle",t),ot("cancel",t),ot("close",t);break;case"iframe":case"object":ot("load",t);break;case"video":case"audio":for(l=0;l<cc.length;l++)ot(cc[l],t);break;case"image":ot("error",t),ot("load",t);break;case"details":ot("toggle",t);break;case"embed":case"source":case"link":ot("error",t),ot("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in r)if(r.hasOwnProperty(ee)&&(l=r[ee],l!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:jt(t,i,ee,l,r,null)}return;default:if(gs(i)){for(ce in r)r.hasOwnProperty(ce)&&(l=r[ce],l!==void 0&&Mh(t,i,ce,l,r,void 0));return}}for(R in r)r.hasOwnProperty(R)&&(l=r[R],l!=null&&jt(t,i,R,l,r,null))}function kS(t,i,r,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,R=null,q=null,ee=null,ce=null;for(oe in r){var he=r[oe];if(r.hasOwnProperty(oe)&&he!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":q=he;default:l.hasOwnProperty(oe)||jt(t,i,oe,null,l,he)}}for(var te in l){var oe=l[te];if(he=r[te],l.hasOwnProperty(te)&&(oe!=null||he!=null))switch(te){case"type":p=oe;break;case"name":f=oe;break;case"checked":ee=oe;break;case"defaultChecked":ce=oe;break;case"value":T=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:oe!==he&&jt(t,i,te,oe,l,he)}}Hs(t,T,R,q,ee,ce,p,f);return;case"select":oe=T=R=te=null;for(p in r)if(q=r[p],r.hasOwnProperty(p)&&q!=null)switch(p){case"value":break;case"multiple":oe=q;default:l.hasOwnProperty(p)||jt(t,i,p,null,l,q)}for(f in l)if(p=l[f],q=r[f],l.hasOwnProperty(f)&&(p!=null||q!=null))switch(f){case"value":te=p;break;case"defaultValue":R=p;break;case"multiple":T=p;default:p!==q&&jt(t,i,f,p,l,q)}i=R,r=T,l=oe,te!=null?Xs(t,!!r,te,!1):!!l!=!!r&&(i!=null?Xs(t,!!r,i,!0):Xs(t,!!r,r?[]:"",!1));return;case"textarea":oe=te=null;for(R in r)if(f=r[R],r.hasOwnProperty(R)&&f!=null&&!l.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:jt(t,i,R,null,l,f)}for(T in l)if(f=l[T],p=r[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":te=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&jt(t,i,T,f,l,p)}kr(t,te,oe);return;case"option":for(var ke in r)te=r[ke],r.hasOwnProperty(ke)&&te!=null&&!l.hasOwnProperty(ke)&&(ke==="selected"?t.selected=!1:jt(t,i,ke,null,l,te));for(q in l)te=l[q],oe=r[q],l.hasOwnProperty(q)&&te!==oe&&(te!=null||oe!=null)&&(q==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":jt(t,i,q,te,l,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in r)te=r[Be],r.hasOwnProperty(Be)&&te!=null&&!l.hasOwnProperty(Be)&&jt(t,i,Be,null,l,te);for(ee in l)if(te=l[ee],oe=r[ee],l.hasOwnProperty(ee)&&te!==oe&&(te!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:jt(t,i,ee,te,l,oe)}return;default:if(gs(i)){for(var Mt in r)te=r[Mt],r.hasOwnProperty(Mt)&&te!==void 0&&!l.hasOwnProperty(Mt)&&Mh(t,i,Mt,void 0,l,te);for(ce in l)te=l[ce],oe=r[ce],!l.hasOwnProperty(ce)||te===oe||te===void 0&&oe===void 0||Mh(t,i,ce,te,l,oe);return}}for(var Q in r)te=r[Q],r.hasOwnProperty(Q)&&te!=null&&!l.hasOwnProperty(Q)&&jt(t,i,Q,null,l,te);for(he in l)te=l[he],oe=r[he],!l.hasOwnProperty(he)||te===oe||te==null&&oe==null||jt(t,i,he,te,l,oe)}function Yy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],p=f.transferSize,T=f.initiatorType,R=f.duration;if(p&&R&&Yy(T)){for(T=0,R=f.responseEnd,l+=1;l<r.length;l++){var q=r[l],ee=q.startTime;if(ee>R)break;var ce=q.transferSize,he=q.initiatorType;ce&&Yy(he)&&(q=q.responseEnd,T+=ce*(q<R?1:(R-ee)/(q-ee)))}if(--l,i+=8*(p+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Uh=null,Vh=null;function Mu(t){return t.nodeType===9?t:t.ownerDocument}function $y(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function qh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bh=null;function DS(){var t=window.event;return t&&t.type==="popstate"?t===Bh?!1:(Bh=t,!0):(Bh=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,Wy=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof Wy<"u"?function(t){return Wy.resolve(null).then(t).catch(MS)}:Ky;function MS(t){setTimeout(function(){throw t})}function nr(t){return t==="head"}function Jy(t,i){var r=i,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),il(i);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")dc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,dc(r);for(var p=r.firstChild;p;){var T=p.nextSibling,R=p.nodeName;p[rs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=T}}else r==="body"&&dc(t.ownerDocument.body);r=f}while(r);il(i)}function Zy(t,i){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Ph(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Ph(r),Oa(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function US(t,i,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[rs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function VS(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=si(t.nextSibling),t===null))return null;return t}function eE(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=si(t.nextSibling),t===null))return null;return t}function Fh(t){return t.data==="$?"||t.data==="$~"}function zh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function qS(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var l=function(){i(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function si(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Gh=null;function tE(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return si(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function nE(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function sE(t,i,r){switch(i=Mu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function dc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Oa(t)}var ii=new Map,iE=new Set;function Uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pa=ne.d;ne.d={f:BS,r:PS,D:FS,C:zS,L:GS,m:HS,X:YS,S:XS,M:$S};function BS(){var t=pa.f(),i=xu();return t||i}function PS(t){var i=jn(t);i!==null&&i.tag===5&&i.type==="form"?Tg(i):pa.r(t)}var tl=typeof document>"u"?null:document;function aE(t,i,r){var l=tl;if(l&&typeof i=="string"&&i){var f=Wn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),iE.has(f)||(iE.add(f),t={rel:t,crossOrigin:r,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Pn(i,"link",t),Zt(i),l.head.appendChild(i)))}}function FS(t){pa.D(t),aE("dns-prefetch",t,null)}function zS(t,i){pa.C(t,i),aE("preconnect",t,i)}function GS(t,i,r){pa.L(t,i,r);var l=tl;if(l&&t&&i){var f='link[rel="preload"][as="'+Wn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Wn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Wn(r.imageSizes)+'"]')):f+='[href="'+Wn(t)+'"]';var p=f;switch(i){case"style":p=nl(t);break;case"script":p=sl(t)}ii.has(p)||(t=A({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),ii.set(p,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(fc(p))||i==="script"&&l.querySelector(hc(p))||(i=l.createElement("link"),Pn(i,"link",t),Zt(i),l.head.appendChild(i)))}}function HS(t,i){pa.m(t,i);var r=tl;if(r&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Wn(l)+'"][href="'+Wn(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=sl(t)}if(!ii.has(p)&&(t=A({rel:"modulepreload",href:t},i),ii.set(p,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(hc(p)))return}l=r.createElement("link"),Pn(l,"link",t),Zt(l),r.head.appendChild(l)}}}function XS(t,i,r){pa.S(t,i,r);var l=tl;if(l&&t){var f=ks(l).hoistableStyles,p=nl(t);i=i||"default";var T=f.get(p);if(!T){var R={loading:0,preload:null};if(T=l.querySelector(fc(p)))R.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},r),(r=ii.get(p))&&Hh(t,r);var q=T=l.createElement("link");Zt(q),Pn(q,"link",t),q._p=new Promise(function(ee,ce){q.onload=ee,q.onerror=ce}),q.addEventListener("load",function(){R.loading|=1}),q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Vu(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:R},f.set(p,T)}}}function YS(t,i){pa.X(t,i);var r=tl;if(r&&t){var l=ks(r).hoistableScripts,f=sl(t),p=l.get(f);p||(p=r.querySelector(hc(f)),p||(t=A({src:t,async:!0},i),(i=ii.get(f))&&Xh(t,i),p=r.createElement("script"),Zt(p),Pn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function $S(t,i){pa.M(t,i);var r=tl;if(r&&t){var l=ks(r).hoistableScripts,f=sl(t),p=l.get(f);p||(p=r.querySelector(hc(f)),p||(t=A({src:t,async:!0,type:"module"},i),(i=ii.get(f))&&Xh(t,i),p=r.createElement("script"),Zt(p),Pn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function rE(t,i,r,l){var f=(f=et.current)?Uu(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=nl(r.href),r=ks(f).hoistableStyles,l=r.get(i),l||(l={type:"style",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=nl(r.href);var p=ks(f).hoistableStyles,T=p.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=f.querySelector(fc(t)))&&!p._p&&(T.instance=p,T.state.loading=5),ii.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ii.set(t,r),p||QS(f,t,r,T.state))),i&&l===null)throw Error(a(528,""));return T}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=sl(r),r=ks(f).hoistableScripts,l=r.get(i),l||(l={type:"script",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function nl(t){return'href="'+Wn(t)+'"'}function fc(t){return'link[rel="stylesheet"]['+t+"]"}function oE(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function QS(t,i,r,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Pn(i,"link",r),Zt(i),t.head.appendChild(i))}function sl(t){return'[src="'+Wn(t)+'"]'}function hc(t){return"script[async]"+t}function lE(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Wn(r.href)+'"]');if(l)return i.instance=l,Zt(l),l;var f=A({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Zt(l),Pn(l,"style",f),Vu(l,r.precedence,t),i.instance=l;case"stylesheet":f=nl(r.href);var p=t.querySelector(fc(f));if(p)return i.state.loading|=4,i.instance=p,Zt(p),p;l=oE(r),(f=ii.get(f))&&Hh(l,f),p=(t.ownerDocument||t).createElement("link"),Zt(p);var T=p;return T._p=new Promise(function(R,q){T.onload=R,T.onerror=q}),Pn(p,"link",l),i.state.loading|=4,Vu(p,r.precedence,t),i.instance=p;case"script":return p=sl(r.src),(f=t.querySelector(hc(p)))?(i.instance=f,Zt(f),f):(l=r,(f=ii.get(p))&&(l=A({},r),Xh(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Zt(f),Pn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Vu(l,r.precedence,t));return i.instance}function Vu(t,i,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var R=l[T];if(R.dataset.precedence===i)p=R;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Hh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Xh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var qu=null;function cE(t,i,r){if(qu===null){var l=new Map,f=qu=new Map;f.set(r,l)}else f=qu,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var p=r[f];if(!(p[rs]||p[lt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=t+T;var R=l.get(T);R?R.push(p):l.set(T,[p])}}return l}function uE(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function KS(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function dE(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function WS(t,i,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=nl(l.href),p=i.querySelector(fc(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Bu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=p,Zt(p);return}p=i.ownerDocument||i,l=oE(l),(f=ii.get(f))&&Hh(l,f),p=p.createElement("link"),Zt(p);var T=p;T._p=new Promise(function(R,q){T.onload=R,T.onerror=q}),Pn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Bu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var Yh=0;function JS(t,i){return t.stylesheets&&t.count===0&&Fu(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&Yh===0&&(Yh=62500*LS());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Yh?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Pu=null;function Fu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Pu=new Map,i.forEach(ZS,t),Pu=null,Bu.call(t))}function ZS(t,i){if(!(i.state.loading&4)){var r=Pu.get(t);if(r)var l=r.get(null);else{r=new Map,Pu.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),l=T)}l&&r.set(null,l)}f=i.instance,T=f.getAttribute("data-precedence"),p=r.get(T)||l,p===l&&r.set(null,f),r.set(T,f),this.count++,l=Bu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var mc={$$typeof:se,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function eN(t,i,r,l,f,p,T,R,q){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.hiddenUpdates=ms(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function fE(t,i,r,l,f,p,T,R,q,ee,ce,he){return t=new eN(t,i,r,T,q,ee,ce,he,R),i=1,p===!0&&(i|=24),p=js(3,null,null,i),t.current=p,p.stateNode=t,i=Af(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:i},If(p),t}function hE(t){return t?(t=Oo,t):Oo}function mE(t,i,r,l,f,p){f=hE(f),l.context===null?l.context=f:l.pendingContext=f,l=Ha(i),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=Xa(t,l,i),r!==null&&(Ns(r,t,i),Xl(r,t,i))}function pE(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function $h(t,i){pE(t,i),(t=t.alternate)&&pE(t,i)}function _E(t){if(t.tag===13||t.tag===31){var i=qr(t,67108864);i!==null&&Ns(i,t,67108864),$h(t,67108864)}}function gE(t){if(t.tag===13||t.tag===31){var i=Bs();i=Ni(i);var r=qr(t,i);r!==null&&Ns(r,t,i),$h(t,i)}}var zu=!0;function tN(t,i,r,l){var f=$.T;$.T=null;var p=ne.p;try{ne.p=2,Qh(t,i,r,l)}finally{ne.p=p,$.T=f}}function nN(t,i,r,l){var f=$.T;$.T=null;var p=ne.p;try{ne.p=8,Qh(t,i,r,l)}finally{ne.p=p,$.T=f}}function Qh(t,i,r,l){if(zu){var f=Kh(l);if(f===null)jh(t,i,l,Gu,r),EE(t,l);else if(iN(f,t,i,r,l))l.stopPropagation();else if(EE(t,l),i&4&&-1<sN.indexOf(t)){for(;f!==null;){var p=jn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Cs(p.pendingLanes);if(T!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var q=1<<31-Gt(T);R.entanglements[1]|=q,T&=~q}Mi(p),(Nt&6)===0&&(Au=Dn()+500,lc(0))}}break;case 31:case 13:R=qr(p,2),R!==null&&Ns(R,p,2),xu(),$h(p,2)}if(p=Kh(l),p===null&&jh(t,i,l,Gu,r),p===f)break;f=p}f!==null&&l.stopPropagation()}else jh(t,i,l,null,r)}}function Kh(t){return t=we(t),Wh(t)}var Gu=null;function Wh(t){if(Gu=null,t=ln(t),t!==null){var i=u(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=h(i),t!==null)return t;t=null}else if(r===31){if(t=g(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Gu=t,null}function yE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case ci:return 2;case ss:return 8;case ui:case po:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var Jh=!1,sr=null,ir=null,ar=null,pc=new Map,_c=new Map,rr=[],sN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EE(t,i){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":pc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(i.pointerId)}}function gc(t,i,r,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=jn(i),i!==null&&_E(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function iN(t,i,r,l,f){switch(i){case"focusin":return sr=gc(sr,t,i,r,l,f),!0;case"dragenter":return ir=gc(ir,t,i,r,l,f),!0;case"mouseover":return ar=gc(ar,t,i,r,l,f),!0;case"pointerover":var p=f.pointerId;return pc.set(p,gc(pc.get(p)||null,t,i,r,l,f)),!0;case"gotpointercapture":return p=f.pointerId,_c.set(p,gc(_c.get(p)||null,t,i,r,l,f)),!0}return!1}function vE(t){var i=ln(t.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=h(r),i!==null){t.blockedOn=i,ps(t.priority,function(){gE(r)});return}}else if(i===31){if(i=g(r),i!==null){t.blockedOn=i,ps(t.priority,function(){gE(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=Kh(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);Lr=l,r.target.dispatchEvent(l),Lr=null}else return i=jn(r),i!==null&&_E(i),t.blockedOn=r,!1;i.shift()}return!0}function TE(t,i,r){Hu(t)&&r.delete(i)}function aN(){Jh=!1,sr!==null&&Hu(sr)&&(sr=null),ir!==null&&Hu(ir)&&(ir=null),ar!==null&&Hu(ar)&&(ar=null),pc.forEach(TE),_c.forEach(TE)}function Xu(t,i){t.blockedOn===i&&(t.blockedOn=null,Jh||(Jh=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,aN)))}var Yu=null;function bE(t){Yu!==t&&(Yu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yu===t&&(Yu=null);for(var i=0;i<t.length;i+=3){var r=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(Wh(l||r)===null)continue;break}var p=jn(r);p!==null&&(t.splice(i,3),i-=3,Kf(p,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function il(t){function i(q){return Xu(q,t)}sr!==null&&Xu(sr,t),ir!==null&&Xu(ir,t),ar!==null&&Xu(ar,t),pc.forEach(i),_c.forEach(i);for(var r=0;r<rr.length;r++){var l=rr[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<rr.length&&(r=rr[0],r.blockedOn===null);)vE(r),r.blockedOn===null&&rr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],p=r[l+1],T=f[on]||null;if(typeof p=="function")T||bE(r);else if(T){var R=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[on]||null)R=T.formAction;else if(Wh(f)!==null)continue}else R=T.action;typeof R=="function"?r[l+1]=R:(r.splice(l,3),l-=3),bE(r)}}}function SE(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Zh(t){this._internalRoot=t}$u.prototype.render=Zh.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,l=Bs();mE(r,l,t,i,null,null)},$u.prototype.unmount=Zh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;mE(t.current,2,null,t,null,null),xu(),i[Fs]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ar();t={blockedOn:null,target:t,priority:i};for(var r=0;r<rr.length&&i!==0&&i<rr[r].priority;r++);rr.splice(r,0,t),r===0&&vE(t)}};var NE=e.version;if(NE!=="19.2.4")throw Error(a(527,NE,"19.2.4"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var rN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{Rs=Qu.inject(rN),je=Qu}catch{}}return Ec.createRoot=function(t,i){if(!o(t))throw Error(a(299));var r=!1,l="",f=kg,p=Lg,T=Dg;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=fE(t,1,!1,null,null,r,l,null,f,p,T,SE),t[Fs]=i.current,Oh(t),new Zh(i)},Ec.hydrateRoot=function(t,i,r){if(!o(t))throw Error(a(299));var l=!1,f="",p=kg,T=Lg,R=Dg,q=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.formState!==void 0&&(q=r.formState)),i=fE(t,1,!0,i,r??null,l,f,q,p,T,R,SE),i.context=hE(null),r=i.current,l=Bs(),l=Ni(l),f=Ha(l),f.callback=null,Xa(r,f,l),r=l,i.current.lanes=r,di(i,r),Mi(i),t[Fs]=i.current,Oh(t),new $u(i)},Ec.version="19.2.4",Ec}var OE;function yN(){if(OE)return nm.exports;OE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),nm.exports=gN(),nm.exports}var EN=yN(),rm={exports:{}};const vN={},TN=Object.freeze(Object.defineProperty({__proto__:null,default:vN},Symbol.toStringTag,{value:"Module"})),jE=cN(TN);var ME;function bN(){return ME||(ME=1,(function(s,e){var n=void 0,a=function(o){return n||(n=new Promise(function(u,h){var g=typeof o<"u"?o:{},v=g.onAbort;g.onAbort=function(m){h(new Error(m)),v&&v(m)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),s=void 0;var _;_||=typeof g<"u"?g:{};var S=typeof window=="object",A=typeof WorkerGlobalScope<"u",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";_.onRuntimeInitialized=function(){function m(K,fe){switch(typeof fe){case"boolean":Ee(K,fe?1:0);break;case"number":b(K,fe);break;case"string":J(K,fe,-1,-1);break;case"object":if(fe===null)I(K);else if(fe.length!=null){var Se=xi(fe,Ri);ie(K,Se,fe.length,-1),us(Se)}else He(K,"Wrong API use : tried to return a value of an unknown type ("+fe+").",-1);break;default:I(K)}}function y(K,fe){for(var Se=[],Le=0;Le<K;Le+=1){var qe=Xn(fe+4*Le,"i32"),ct=xo(qe);if(ct===1||ct===2)qe=E(qe);else if(ct===3)qe=mi(qe);else if(ct===4){ct=qe,qe=Co(ct),ct=d(ct);for(var Cn=new Uint8Array(qe),Es=0;Es<qe;Es+=1)Cn[Es]=V[ct+Es];qe=Cn}else qe=null;Se.push(qe)}return Se}function N(K,fe){this.Qa=K,this.db=fe,this.Oa=1,this.lb=[]}function x(K,fe){if(this.db=fe,fe=ci(K)+1,this.eb=$s(fe),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ss(K,w,this.eb,fe),this.kb=this.eb,this.Za=this.pb=null}function P(K){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),K!=null){var fe=this.filename,Se="/",Le=fe;if(Se&&(Se=typeof Se=="string"?Se:ms(Se),Le=fe?$t(Se+"/"+fe):Se),fe=is(!0,!0),Le=Oa(Le,fe),K){if(typeof K=="string"){Se=Array(K.length);for(var qe=0,ct=K.length;qe<ct;++qe)Se[qe]=K.charCodeAt(qe);K=Se}os(Le,fe|146),Se=zs(Le,577),$i(Se,K,0,K.length,0),Yi(Se),os(Le,fe)}}this.handleError(Ie(this.filename,W)),this.db=Xn(W,"i32"),gt(this.db),this.fb={},this.Sa={}}var W=hn(4),le=_.cwrap,Ie=le("sqlite3_open","number",["string","number"]),Me=le("sqlite3_close_v2","number",["number"]),Pe=le("sqlite3_exec","number",["number","string","number","number","number"]),vt=le("sqlite3_changes","number",["number"]),en=le("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Va=le("sqlite3_sql","string",["number"]),Ii=le("sqlite3_normalized_sql","string",["number"]),Wi=le("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Qs=le("sqlite3_bind_text","number",["number","number","number","number","number"]),Ji=le("sqlite3_bind_blob","number",["number","number","number","number","number"]),Dr=le("sqlite3_bind_double","number",["number","number","number"]),Zi=le("sqlite3_bind_int","number",["number","number","number"]),vo=le("sqlite3_bind_parameter_index","number",["number","string"]),To=le("sqlite3_step","number",["number"]),ea=le("sqlite3_errmsg","string",["number"]),Or=le("sqlite3_column_count","number",["number"]),bo=le("sqlite3_data_count","number",["number"]),qa=le("sqlite3_column_double","number",["number","number"]),jr=le("sqlite3_column_text","string",["number","number"]),So=le("sqlite3_column_blob","number",["number","number"]),Ks=le("sqlite3_column_bytes","number",["number","number"]),No=le("sqlite3_column_type","number",["number","number"]),wo=le("sqlite3_column_name","string",["number","number"]),Ao=le("sqlite3_reset","number",["number"]),Ro=le("sqlite3_clear_bindings","number",["number"]),ki=le("sqlite3_finalize","number",["number"]),xn=le("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),xo=le("sqlite3_value_type","number",["number"]),Co=le("sqlite3_value_bytes","number",["number"]),mi=le("sqlite3_value_text","string",["number"]),d=le("sqlite3_value_blob","number",["number"]),E=le("sqlite3_value_double","number",["number"]),b=le("sqlite3_result_double","",["number","number"]),I=le("sqlite3_result_null","",["number"]),J=le("sqlite3_result_text","",["number","string","number","number"]),ie=le("sqlite3_result_blob","",["number","number","number","number"]),Ee=le("sqlite3_result_int","",["number","number"]),He=le("sqlite3_result_error","",["number","string","number"]),Qt=le("sqlite3_aggregate_context","number",["number","number"]),gt=le("RegisterExtensionFunctions","number",["number"]),Vt=le("sqlite3_update_hook","number",["number","number","number"]);N.prototype.bind=function(K){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(K)?this.Cb(K):K!=null&&typeof K=="object"?this.Db(K):!0},N.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var K=To(this.Qa);switch(K){case 100:return!0;case 101:return!1;default:throw this.db.handleError(K)}},N.prototype.wb=function(K){return K==null&&(K=this.Oa,this.Oa+=1),qa(this.Qa,K)},N.prototype.Gb=function(K){if(K==null&&(K=this.Oa,this.Oa+=1),K=jr(this.Qa,K),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(K)},N.prototype.Hb=function(K){return K==null&&(K=this.Oa,this.Oa+=1),jr(this.Qa,K)},N.prototype.getBlob=function(K){K==null&&(K=this.Oa,this.Oa+=1);var fe=Ks(this.Qa,K);K=So(this.Qa,K);for(var Se=new Uint8Array(fe),Le=0;Le<fe;Le+=1)Se[Le]=V[K+Le];return Se},N.prototype.get=function(K,fe){fe=fe||{},K!=null&&this.bind(K)&&this.step(),K=[];for(var Se=bo(this.Qa),Le=0;Le<Se;Le+=1)switch(No(this.Qa,Le)){case 1:var qe=fe.useBigInt?this.Gb(Le):this.wb(Le);K.push(qe);break;case 2:K.push(this.wb(Le));break;case 3:K.push(this.Hb(Le));break;case 4:K.push(this.getBlob(Le));break;default:K.push(null)}return K},N.prototype.getColumnNames=function(){for(var K=[],fe=Or(this.Qa),Se=0;Se<fe;Se+=1)K.push(wo(this.Qa,Se));return K},N.prototype.getAsObject=function(K,fe){K=this.get(K,fe),fe=this.getColumnNames();for(var Se={},Le=0;Le<fe.length;Le+=1)Se[fe[Le]]=K[Le];return Se},N.prototype.getSQL=function(){return Va(this.Qa)},N.prototype.getNormalizedSQL=function(){return Ii(this.Qa)},N.prototype.run=function(K){return K!=null&&this.bind(K),this.step(),this.reset()},N.prototype.sb=function(K,fe){fe==null&&(fe=this.Oa,this.Oa+=1),K=ui(K);var Se=xi(K,Ri);this.lb.push(Se),this.db.handleError(Qs(this.Qa,fe,Se,K.length-1,0))},N.prototype.Bb=function(K,fe){fe==null&&(fe=this.Oa,this.Oa+=1);var Se=xi(K,Ri);this.lb.push(Se),this.db.handleError(Ji(this.Qa,fe,Se,K.length,0))},N.prototype.rb=function(K,fe){fe==null&&(fe=this.Oa,this.Oa+=1),this.db.handleError((K===(K|0)?Zi:Dr)(this.Qa,fe,K))},N.prototype.Eb=function(K){K==null&&(K=this.Oa,this.Oa+=1),Ji(this.Qa,K,0,0,0)},N.prototype.tb=function(K,fe){switch(fe==null&&(fe=this.Oa,this.Oa+=1),typeof K){case"string":this.sb(K,fe);return;case"number":this.rb(K,fe);return;case"bigint":this.sb(K.toString(),fe);return;case"boolean":this.rb(K+0,fe);return;case"object":if(K===null){this.Eb(fe);return}if(K.length!=null){this.Bb(K,fe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+K+")."},N.prototype.Db=function(K){var fe=this;return Object.keys(K).forEach(function(Se){var Le=vo(fe.Qa,Se);Le!==0&&fe.tb(K[Se],Le)}),!0},N.prototype.Cb=function(K){for(var fe=0;fe<K.length;fe+=1)this.tb(K[fe],fe+1);return!0},N.prototype.reset=function(){return this.freemem(),Ro(this.Qa)===0&&Ao(this.Qa)===0},N.prototype.freemem=function(){for(var K;(K=this.lb.pop())!==void 0;)us(K)},N.prototype.free=function(){this.freemem();var K=ki(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,K},x.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var K=Rn(),fe=hn(4);Yn(W),Yn(fe);try{this.db.handleError(Wi(this.db.db,this.kb,-1,W,fe)),this.kb=Xn(fe,"i32");var Se=Xn(W,"i32");return Se===0?(this.mb(),{done:!0}):(this.Za=new N(Se,this.db),this.db.fb[Se]=this.Za,{value:this.Za,done:!1})}catch(Le){throw this.pb=Xi(this.kb),this.mb(),Le}finally{ys(K)}},x.prototype.mb=function(){us(this.eb),this.eb=null},x.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Xi(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(x.prototype[Symbol.iterator]=function(){return this}),P.prototype.run=function(K,fe){if(!this.db)throw"Database closed";if(fe){K=this.prepare(K,fe);try{K.step()}finally{K.free()}}else this.handleError(Pe(this.db,K,0,0,W));return this},P.prototype.exec=function(K,fe,Se){if(!this.db)throw"Database closed";var Le=Rn(),qe=null;try{var ct=wn(K),Cn=hn(4);for(K=[];Xn(ct,"i8")!==0;){Yn(W),Yn(Cn),this.handleError(Wi(this.db,ct,-1,W,Cn));var Es=Xn(W,"i32");if(ct=Xn(Cn,"i32"),Es!==0){var ds=null;for(qe=new N(Es,this),fe!=null&&qe.bind(fe);qe.step();)ds===null&&(ds={columns:qe.getColumnNames(),values:[]},K.push(ds)),ds.values.push(qe.get(null,Se));qe.free()}}return K}catch(Ds){throw qe&&qe.free(),Ds}finally{ys(Le)}},P.prototype.each=function(K,fe,Se,Le,qe){typeof fe=="function"&&(Le=Se,Se=fe,fe=void 0),K=this.prepare(K,fe);try{for(;K.step();)Se(K.getAsObject(null,qe))}finally{K.free()}if(typeof Le=="function")return Le()},P.prototype.prepare=function(K,fe){if(Yn(W),this.handleError(en(this.db,K,-1,W,0)),K=Xn(W,"i32"),K===0)throw"Nothing to prepare";var Se=new N(K,this);return fe!=null&&Se.bind(fe),this.fb[K]=Se},P.prototype.iterateStatements=function(K){return new x(K,this)},P.prototype.export=function(){Object.values(this.fb).forEach(function(fe){fe.free()}),Object.values(this.Sa).forEach(cs),this.Sa={},this.handleError(Me(this.db));var K=ls(this.filename);return this.handleError(Ie(this.filename,W)),this.db=Xn(W,"i32"),gt(this.db),K},P.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(K){K.free()}),Object.values(this.Sa).forEach(cs),this.Sa={},this.Ya&&(cs(this.Ya),this.Ya=void 0),this.handleError(Me(this.db)),Zt("/"+this.filename),this.db=null)},P.prototype.handleError=function(K){if(K===0)return null;throw K=ea(this.db),Error(K)},P.prototype.getRowsModified=function(){return vt(this.db)},P.prototype.create_function=function(K,fe){Object.prototype.hasOwnProperty.call(this.Sa,K)&&(cs(this.Sa[K]),delete this.Sa[K]);var Se=Un(function(Le,qe,ct){qe=y(qe,ct);try{var Cn=fe.apply(null,qe)}catch(Es){He(Le,Es,-1);return}m(Le,Cn)},"viii");return this.Sa[K]=Se,this.handleError(xn(this.db,K,fe.length,1,0,Se,0,0,0)),this},P.prototype.create_aggregate=function(K,fe){var Se=fe.init||function(){return null},Le=fe.finalize||function(ds){return ds},qe=fe.step;if(!qe)throw"An aggregate function must have a step function in "+K;var ct={};Object.hasOwnProperty.call(this.Sa,K)&&(cs(this.Sa[K]),delete this.Sa[K]),fe=K+"__finalize",Object.hasOwnProperty.call(this.Sa,fe)&&(cs(this.Sa[fe]),delete this.Sa[fe]);var Cn=Un(function(ds,Ds,Io){var Li=Qt(ds,1);Object.hasOwnProperty.call(ct,Li)||(ct[Li]=Se()),Ds=y(Ds,Io),Ds=[ct[Li]].concat(Ds);try{ct[Li]=qe.apply(null,Ds)}catch(Mr){delete ct[Li],He(ds,Mr,-1)}},"viii"),Es=Un(function(ds){var Ds=Qt(ds,1);try{var Io=Le(ct[Ds])}catch(Li){delete ct[Ds],He(ds,Li,-1);return}m(ds,Io),delete ct[Ds]},"vi");return this.Sa[K]=Cn,this.Sa[fe]=Es,this.handleError(xn(this.db,K,qe.length-1,1,0,0,Cn,Es,0)),this},P.prototype.updateHook=function(K){this.Ya&&(Vt(this.db,0,0),cs(this.Ya),this.Ya=void 0),K&&(this.Ya=Un(function(fe,Se,Le,qe,ct){switch(Se){case 18:fe="insert";break;case 23:fe="update";break;case 9:fe="delete";break;default:throw"unknown operationCode in updateHook callback: "+Se}if(Le=Le?At(w,Le):"",qe=qe?At(w,qe):"",ct>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";K(fe,Le,qe,Number(ct))},"viiiij"),Vt(this.db,this.Ya,0))},_.Database=P};var B={..._},z="./this.program",F=(m,y)=>{throw y},U="",G,Y;if(C){var se=jE;U=__dirname+"/",Y=m=>(m=Te(m)?new URL(m):m,se.readFileSync(m)),G=async m=>(m=Te(m)?new URL(m):m,se.readFileSync(m,void 0)),!_.thisProgram&&1<process.argv.length&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),s.exports=_,F=(m,y)=>{throw process.exitCode=m,y}}else(S||A)&&(A?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),U=U.startsWith("blob:")?"":U.slice(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1),A&&(Y=m=>{var y=new XMLHttpRequest;return y.open("GET",m,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),G=async m=>{if(Te(m))return new Promise((N,x)=>{var P=new XMLHttpRequest;P.open("GET",m,!0),P.responseType="arraybuffer",P.onload=()=>{P.status==200||P.status==0&&P.response?N(P.response):x(P.status)},P.onerror=x,P.send(null)});var y=await fetch(m,{credentials:"same-origin"});if(y.ok)return y.arrayBuffer();throw Error(y.status+" : "+y.url)});var re=_.print||console.log.bind(console),_e=_.printErr||console.error.bind(console);Object.assign(_,B),B=null,_.thisProgram&&(z=_.thisProgram);var ve=_.wasmBinary,j,D=!1,M,V,w,O,k,Ce,mt,$,ne,Te=m=>m.startsWith("file://");function tt(){var m=j.buffer;_.HEAP8=V=new Int8Array(m),_.HEAP16=O=new Int16Array(m),_.HEAPU8=w=new Uint8Array(m),_.HEAPU16=new Uint16Array(m),_.HEAP32=k=new Int32Array(m),_.HEAPU32=Ce=new Uint32Array(m),_.HEAPF32=mt=new Float32Array(m),_.HEAPF64=ne=new Float64Array(m),_.HEAP64=$=new BigInt64Array(m),_.HEAPU64=new BigUint64Array(m)}var Ze=0,H=null;function ue(m){throw _.onAbort?.(m),m="Aborted("+m+")",_e(m),D=!0,new WebAssembly.RuntimeError(m+". Build with -sASSERTIONS for more info.")}var be;async function Ne(m){if(!ve)try{var y=await G(m);return new Uint8Array(y)}catch{}if(m==be&&ve)m=new Uint8Array(ve);else if(Y)m=Y(m);else throw"both async and sync fetching of the wasm failed";return m}async function Ge(m,y){try{var N=await Ne(m);return await WebAssembly.instantiate(N,y)}catch(x){_e(`failed to asynchronously prepare wasm: ${x}`),ue(x)}}async function et(m){var y=be;if(!ve&&typeof WebAssembly.instantiateStreaming=="function"&&!Te(y)&&!C)try{var N=fetch(y,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(N,m)}catch(x){_e(`wasm streaming compile failed: ${x}`),_e("falling back to ArrayBuffer instantiation")}return Ge(y,m)}class at{name="ExitStatus";constructor(y){this.message=`Program terminated with exit(${y})`,this.status=y}}var nn=m=>{for(;0<m.length;)m.shift()(_)},Ut=[],Ti=[],Ca=()=>{var m=_.preRun.shift();Ti.unshift(m)};function Xn(m,y="i8"){switch(y.endsWith("*")&&(y="*"),y){case"i1":return V[m];case"i8":return V[m];case"i16":return O[m>>1];case"i32":return k[m>>2];case"i64":return $[m>>3];case"float":return mt[m>>2];case"double":return ne[m>>3];case"*":return Ce[m>>2];default:ue(`invalid type for getValue: ${y}`)}}var bi=_.noExitRuntime||!0;function Yn(m){var y="i32";switch(y.endsWith("*")&&(y="*"),y){case"i1":V[m]=0;break;case"i8":V[m]=0;break;case"i16":O[m>>1]=0;break;case"i32":k[m>>2]=0;break;case"i64":$[m>>3]=BigInt(0);break;case"float":mt[m>>2]=0;break;case"double":ne[m>>3]=0;break;case"*":Ce[m>>2]=0;break;default:ue(`invalid type for setValue: ${y}`)}}var Ia=typeof TextDecoder<"u"?new TextDecoder:void 0,At=(m,y=0,N=NaN)=>{var x=y+N;for(N=y;m[N]&&!(N>=x);)++N;if(16<N-y&&m.buffer&&Ia)return Ia.decode(m.subarray(y,N));for(x="";y<N;){var P=m[y++];if(P&128){var W=m[y++]&63;if((P&224)==192)x+=String.fromCharCode((P&31)<<6|W);else{var le=m[y++]&63;P=(P&240)==224?(P&15)<<12|W<<6|le:(P&7)<<18|W<<12|le<<6|m[y++]&63,65536>P?x+=String.fromCharCode(P):(P-=65536,x+=String.fromCharCode(55296|P>>10,56320|P&1023))}}else x+=String.fromCharCode(P)}return x},Xi=(m,y)=>m?At(w,m,y):"",ka=(m,y)=>{for(var N=0,x=m.length-1;0<=x;x--){var P=m[x];P==="."?m.splice(x,1):P===".."?(m.splice(x,1),N++):N&&(m.splice(x,1),N--)}if(y)for(;N;N--)m.unshift("..");return m},$t=m=>{var y=m.charAt(0)==="/",N=m.slice(-1)==="/";return(m=ka(m.split("/").filter(x=>!!x),!y).join("/"))||y||(m="."),m&&N&&(m+="/"),(y?"/":"")+m},sn=m=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(m).slice(1);return m=y[0],y=y[1],!m&&!y?".":(y&&=y.slice(0,-1),m+y)},As=m=>m&&m.match(/([^\/]+|\/)\/*$/)[1],Ol=()=>{if(C){var m=jE;return y=>m.randomFillSync(y)}return y=>crypto.getRandomValues(y)},br=m=>{(br=Ol())(m)},Dn=(...m)=>{for(var y="",N=!1,x=m.length-1;-1<=x&&!N;x--){if(N=0<=x?m[x]:"/",typeof N!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!N)return"";y=N+"/"+y,N=N.charAt(0)==="/"}return y=ka(y.split("/").filter(P=>!!P),!N).join("/"),(N?"/":"")+y||"."},li=[],ci=m=>{for(var y=0,N=0;N<m.length;++N){var x=m.charCodeAt(N);127>=x?y++:2047>=x?y+=2:55296<=x&&57343>=x?(y+=4,++N):y+=3}return y},ss=(m,y,N,x)=>{if(!(0<x))return 0;var P=N;x=N+x-1;for(var W=0;W<m.length;++W){var le=m.charCodeAt(W);if(55296<=le&&57343>=le){var Ie=m.charCodeAt(++W);le=65536+((le&1023)<<10)|Ie&1023}if(127>=le){if(N>=x)break;y[N++]=le}else{if(2047>=le){if(N+1>=x)break;y[N++]=192|le>>6}else{if(65535>=le){if(N+2>=x)break;y[N++]=224|le>>12}else{if(N+3>=x)break;y[N++]=240|le>>18,y[N++]=128|le>>12&63}y[N++]=128|le>>6&63}y[N++]=128|le&63}}return y[N]=0,N-P},ui=(m,y)=>{var N=Array(ci(m)+1);return m=ss(m,N,0,N.length),y&&(N.length=m),N},po=[];function Sr(m,y){po[m]={input:[],output:[],cb:y},Da(m,_o)}var _o={open(m){var y=po[m.node.rdev];if(!y)throw new ge(43);m.tty=y,m.seekable=!1},close(m){m.tty.cb.fsync(m.tty)},fsync(m){m.tty.cb.fsync(m.tty)},read(m,y,N,x){if(!m.tty||!m.tty.cb.xb)throw new ge(60);for(var P=0,W=0;W<x;W++){try{var le=m.tty.cb.xb(m.tty)}catch{throw new ge(29)}if(le===void 0&&P===0)throw new ge(6);if(le==null)break;P++,y[N+W]=le}return P&&(m.node.atime=Date.now()),P},write(m,y,N,x){if(!m.tty||!m.tty.cb.qb)throw new ge(60);try{for(var P=0;P<x;P++)m.tty.cb.qb(m.tty,y[N+P])}catch{throw new ge(29)}return x&&(m.node.mtime=m.node.ctime=Date.now()),P}},go={xb(){e:{if(!li.length){var m=null;if(C){var y=Buffer.alloc(256),N=0,x=process.stdin.fd;try{N=se.readSync(x,y,0,256)}catch(P){if(P.toString().includes("EOF"))N=0;else throw P}0<N&&(m=y.slice(0,N).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(m=window.prompt("Input: "),m!==null&&(m+=`
`));if(!m){m=null;break e}li=ui(m,!0)}m=li.shift()}return m},qb(m,y){y===null||y===10?(re(At(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(re(At(m.output)),m.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Rs={qb(m,y){y===null||y===10?(_e(At(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(_e(At(m.output)),m.output=[])}},je={Wa:null,Xa(){return je.createNode(null,"/",16895,0)},createNode(m,y,N,x){if((N&61440)===24576||(N&61440)===4096)throw new ge(63);return je.Wa||(je.Wa={dir:{node:{Ta:je.La.Ta,Ua:je.La.Ua,lookup:je.La.lookup,hb:je.La.hb,rename:je.La.rename,unlink:je.La.unlink,rmdir:je.La.rmdir,readdir:je.La.readdir,symlink:je.La.symlink},stream:{Va:je.Ma.Va}},file:{node:{Ta:je.La.Ta,Ua:je.La.Ua},stream:{Va:je.Ma.Va,read:je.Ma.read,write:je.Ma.write,ib:je.Ma.ib,jb:je.Ma.jb}},link:{node:{Ta:je.La.Ta,Ua:je.La.Ua,readlink:je.La.readlink},stream:{}},ub:{node:{Ta:je.La.Ta,Ua:je.La.Ua},stream:Ml}}),N=La(m,y,N,x),fn(N.mode)?(N.La=je.Wa.dir.node,N.Ma=je.Wa.dir.stream,N.Na={}):(N.mode&61440)===32768?(N.La=je.Wa.file.node,N.Ma=je.Wa.file.stream,N.Ra=0,N.Na=null):(N.mode&61440)===40960?(N.La=je.Wa.link.node,N.Ma=je.Wa.link.stream):(N.mode&61440)===8192&&(N.La=je.Wa.ub.node,N.Ma=je.Wa.ub.stream),N.atime=N.mtime=N.ctime=Date.now(),m&&(m.Na[y]=N,m.atime=m.mtime=m.ctime=N.atime),N},Sb(m){return m.Na?m.Na.subarray?m.Na.subarray(0,m.Ra):new Uint8Array(m.Na):new Uint8Array(0)},La:{Ta(m){var y={};return y.dev=(m.mode&61440)===8192?m.id:1,y.ino=m.id,y.mode=m.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=m.rdev,fn(m.mode)?y.size=4096:(m.mode&61440)===32768?y.size=m.Ra:(m.mode&61440)===40960?y.size=m.link.length:y.size=0,y.atime=new Date(m.atime),y.mtime=new Date(m.mtime),y.ctime=new Date(m.ctime),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},Ua(m,y){for(var N of["mode","atime","mtime","ctime"])y[N]!=null&&(m[N]=y[N]);y.size!==void 0&&(y=y.size,m.Ra!=y&&(y==0?(m.Na=null,m.Ra=0):(N=m.Na,m.Na=new Uint8Array(y),N&&m.Na.set(N.subarray(0,Math.min(y,m.Ra))),m.Ra=y)))},lookup(){throw je.vb},hb(m,y,N,x){return je.createNode(m,y,N,x)},rename(m,y,N){try{var x=as(y,N)}catch{}if(x){if(fn(m.mode))for(var P in x.Na)throw new ge(55);wr(x)}delete m.parent.Na[m.name],y.Na[N]=m,m.name=N,y.ctime=y.mtime=m.parent.ctime=m.parent.mtime=Date.now()},unlink(m,y){delete m.Na[y],m.ctime=m.mtime=Date.now()},rmdir(m,y){var N=as(m,y),x;for(x in N.Na)throw new ge(55);delete m.Na[y],m.ctime=m.mtime=Date.now()},readdir(m){return[".","..",...Object.keys(m.Na)]},symlink(m,y,N){return m=je.createNode(m,y,41471,0),m.link=N,m},readlink(m){if((m.mode&61440)!==40960)throw new ge(28);return m.link}},Ma:{read(m,y,N,x,P){var W=m.node.Na;if(P>=m.node.Ra)return 0;if(m=Math.min(m.node.Ra-P,x),8<m&&W.subarray)y.set(W.subarray(P,P+m),N);else for(x=0;x<m;x++)y[N+x]=W[P+x];return m},write(m,y,N,x,P,W){if(y.buffer===V.buffer&&(W=!1),!x)return 0;if(m=m.node,m.mtime=m.ctime=Date.now(),y.subarray&&(!m.Na||m.Na.subarray)){if(W)return m.Na=y.subarray(N,N+x),m.Ra=x;if(m.Ra===0&&P===0)return m.Na=y.slice(N,N+x),m.Ra=x;if(P+x<=m.Ra)return m.Na.set(y.subarray(N,N+x),P),x}W=P+x;var le=m.Na?m.Na.length:0;if(le>=W||(W=Math.max(W,le*(1048576>le?2:1.125)>>>0),le!=0&&(W=Math.max(W,256)),le=m.Na,m.Na=new Uint8Array(W),0<m.Ra&&m.Na.set(le.subarray(0,m.Ra),0)),m.Na.subarray&&y.subarray)m.Na.set(y.subarray(N,N+x),P);else for(W=0;W<x;W++)m.Na[P+W]=y[N+W];return m.Ra=Math.max(m.Ra,P+x),x},Va(m,y,N){if(N===1?y+=m.position:N===2&&(m.node.mode&61440)===32768&&(y+=m.node.Ra),0>y)throw new ge(28);return y},ib(m,y,N,x,P){if((m.node.mode&61440)!==32768)throw new ge(43);if(m=m.node.Na,P&2||!m||m.buffer!==V.buffer){P=!0,x=65536*Math.ceil(y/65536);var W=Ci(65536,x);if(W&&w.fill(0,W,W+x),x=W,!x)throw new ge(48);m&&((0<N||N+y<m.length)&&(m.subarray?m=m.subarray(N,N+y):m=Array.prototype.slice.call(m,N,N+y)),V.set(m,x))}else P=!1,x=m.byteOffset;return{Kb:x,Ab:P}},jb(m,y,N,x){return je.Ma.write(m,y,0,x,N,!1),0}}},is=(m,y)=>{var N=0;return m&&(N|=365),y&&(N|=146),N},Gt=null,Nr={},xs=[],yo=1,Tn=null,Si=!1,Jt=!0,Cs={},ge=class{name="ErrnoError";constructor(m){this.Pa=m}},Is=class{gb={};node=null;get flags(){return this.gb.flags}set flags(m){this.gb.flags=m}get position(){return this.gb.position}set position(m){this.gb.position=m}},jl=class{La={};Ma={};ab=null;constructor(m,y,N,x){m||=this,this.parent=m,this.Xa=m.Xa,this.id=yo++,this.name=y,this.mode=N,this.rdev=x,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(m){m?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(m){m?this.mode|=146:this.mode&=-147}};function On(m,y={}){if(!m)throw new ge(44);y.nb??(y.nb=!0),m.charAt(0)==="/"||(m="//"+m);var N=0;e:for(;40>N;N++){m=m.split("/").filter(Ie=>!!Ie);for(var x=Gt,P="/",W=0;W<m.length;W++){var le=W===m.length-1;if(le&&y.parent)break;if(m[W]!==".")if(m[W]==="..")P=sn(P),x=x.parent;else{P=$t(P+"/"+m[W]);try{x=as(x,m[W])}catch(Ie){if(Ie?.Pa===44&&le&&y.Jb)return{path:P};throw Ie}if(!x.ab||le&&!y.nb||(x=x.ab.root),(x.mode&61440)===40960&&(!le||y.$a)){if(!x.La.readlink)throw new ge(52);x=x.La.readlink(x),x.charAt(0)==="/"||(x=sn(P)+"/"+x),m=x+"/"+m.slice(W+1).join("/");continue e}}}return{path:P,node:x}}throw new ge(32)}function ms(m){for(var y;;){if(m===m.parent)return m=m.Xa.zb,y?m[m.length-1]!=="/"?`${m}/${y}`:m+y:m;y=y?`${m.name}/${y}`:m.name,m=m.parent}}function di(m,y){for(var N=0,x=0;x<y.length;x++)N=(N<<5)-N+y.charCodeAt(x)|0;return(m+N>>>0)%Tn.length}function wr(m){var y=di(m.parent.id,m.name);if(Tn[y]===m)Tn[y]=m.bb;else for(y=Tn[y];y;){if(y.bb===m){y.bb=m.bb;break}y=y.bb}}function as(m,y){var N=fn(m.mode)?(N=$n(m,"x"))?N:m.La.lookup?0:2:54;if(N)throw new ge(N);for(N=Tn[di(m.id,y)];N;N=N.bb){var x=N.name;if(N.parent.id===m.id&&x===y)return N}return m.La.lookup(m,y)}function La(m,y,N,x){return m=new jl(m,y,N,x),y=di(m.parent.id,m.name),m.bb=Tn[y],Tn[y]=m}function fn(m){return(m&61440)===16384}function Ni(m){var y=["r","w","rw"][m&3];return m&512&&(y+="w"),y}function $n(m,y){if(Jt)return 0;if(!y.includes("r")||m.mode&292){if(y.includes("w")&&!(m.mode&146)||y.includes("x")&&!(m.mode&73))return 2}else return 2;return 0}function Ar(m,y){if(!fn(m.mode))return 54;try{return as(m,y),20}catch{}return $n(m,"wx")}function ps(m,y,N){try{var x=as(m,y)}catch(P){return P.Pa}if(m=$n(m,"wx"))return m;if(N){if(!fn(x.mode))return 54;if(x===x.parent||ms(x)==="/")return 10}else if(fn(x.mode))return 31;return 0}function Qn(m){if(!m)throw new ge(63);return m}function lt(m){if(m=xs[m],!m)throw new ge(8);return m}function on(m,y=-1){if(m=Object.assign(new Is,m),y==-1)e:{for(y=0;4096>=y;y++)if(!xs[y])break e;throw new ge(33)}return m.fd=y,xs[y]=m}function Fs(m,y=-1){return m=on(m,y),m.Ma?.Rb?.(m),m}function wi(m,y,N){var x=m?.Ma.Ua;m=x?m:y,x??=y.La.Ua,Qn(x),x(m,N)}var Ml={open(m){m.Ma=Nr[m.node.rdev].Ma,m.Ma.open?.(m)},Va(){throw new ge(70)}};function Da(m,y){Nr[m]={Ma:y}}function Rr(m,y){var N=y==="/";if(N&&Gt)throw new ge(10);if(!N&&y){var x=On(y,{nb:!1});if(y=x.path,x=x.node,x.ab)throw new ge(10);if(!fn(x.mode))throw new ge(54)}y={type:m,Wb:{},zb:y,Ib:[]},m=m.Xa(y),m.Xa=y,y.root=m,N?Gt=m:x&&(x.ab=y,x.Xa&&x.Xa.Ib.push(y))}function rs(m,y,N){var x=On(m,{parent:!0}).node;if(m=As(m),!m)throw new ge(28);if(m==="."||m==="..")throw new ge(20);var P=Ar(x,m);if(P)throw new ge(P);if(!x.La.hb)throw new ge(63);return x.La.hb(x,m,y,N)}function Oa(m,y=438){return rs(m,y&4095|32768,0)}function ln(m,y=511){return rs(m,y&1023|16384,0)}function jn(m,y,N){typeof N>"u"&&(N=y,y=438),rs(m,y|8192,N)}function Mn(m,y){if(!Dn(m))throw new ge(44);var N=On(y,{parent:!0}).node;if(!N)throw new ge(44);y=As(y);var x=Ar(N,y);if(x)throw new ge(x);if(!N.La.symlink)throw new ge(63);N.La.symlink(N,y,m)}function ks(m){var y=On(m,{parent:!0}).node;m=As(m);var N=as(y,m),x=ps(y,m,!0);if(x)throw new ge(x);if(!y.La.rmdir)throw new ge(63);if(N.ab)throw new ge(10);y.La.rmdir(y,m),wr(N)}function Zt(m){var y=On(m,{parent:!0}).node;if(!y)throw new ge(44);m=As(m);var N=as(y,m),x=ps(y,m,!1);if(x)throw new ge(x);if(!y.La.unlink)throw new ge(63);if(N.ab)throw new ge(10);y.La.unlink(y,m),wr(N)}function fi(m,y){return m=On(m,{$a:!y}).node,Qn(m.La.Ta)(m)}function ja(m,y,N,x){wi(m,y,{mode:N&4095|y.mode&-4096,ctime:Date.now(),Fb:x})}function os(m,y){m=typeof m=="string"?On(m,{$a:!0}).node:m,ja(null,m,y)}function Ls(m,y,N){if(fn(y.mode))throw new ge(31);if((y.mode&61440)!==32768)throw new ge(28);var x=$n(y,"w");if(x)throw new ge(x);wi(m,y,{size:N,timestamp:Date.now()})}function zs(m,y,N=438){if(m==="")throw new ge(44);if(typeof y=="string"){var x={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[y];if(typeof x>"u")throw Error(`Unknown file open mode: ${y}`);y=x}if(N=y&64?N&4095|32768:0,typeof m=="object")x=m;else{var P=m.endsWith("/");m=On(m,{$a:!(y&131072),Jb:!0}),x=m.node,m=m.path}var W=!1;if(y&64)if(x){if(y&128)throw new ge(20)}else{if(P)throw new ge(31);x=rs(m,N|511,0),W=!0}if(!x)throw new ge(44);if((x.mode&61440)===8192&&(y&=-513),y&65536&&!fn(x.mode))throw new ge(54);if(!W&&(P=x?(x.mode&61440)===40960?32:fn(x.mode)&&(Ni(y)!=="r"||y&576)?31:$n(x,Ni(y)):44))throw new ge(P);return y&512&&!W&&(P=x,P=typeof P=="string"?On(P,{$a:!0}).node:P,Ls(null,P,0)),y&=-131713,P=on({node:x,path:ms(x),flags:y,seekable:!0,position:0,Ma:x.Ma,Lb:[],error:!1}),P.Ma.open&&P.Ma.open(P),W&&os(x,N&511),!_.logReadFiles||y&1||m in Cs||(Cs[m]=1),P}function Yi(m){if(m.fd===null)throw new ge(8);m.ob&&(m.ob=null);try{m.Ma.close&&m.Ma.close(m)}catch(y){throw y}finally{xs[m.fd]=null}m.fd=null}function Ma(m,y,N){if(m.fd===null)throw new ge(8);if(!m.seekable||!m.Ma.Va)throw new ge(70);if(N!=0&&N!=1&&N!=2)throw new ge(28);m.position=m.Ma.Va(m,y,N),m.Lb=[]}function xr(m,y,N,x,P){if(0>x||0>P)throw new ge(28);if(m.fd===null)throw new ge(8);if((m.flags&2097155)===1)throw new ge(8);if(fn(m.node.mode))throw new ge(31);if(!m.Ma.read)throw new ge(28);var W=typeof P<"u";if(!W)P=m.position;else if(!m.seekable)throw new ge(70);return y=m.Ma.read(m,y,N,x,P),W||(m.position+=y),y}function $i(m,y,N,x,P){if(0>x||0>P)throw new ge(28);if(m.fd===null)throw new ge(8);if((m.flags&2097155)===0)throw new ge(8);if(fn(m.node.mode))throw new ge(31);if(!m.Ma.write)throw new ge(28);m.seekable&&m.flags&1024&&Ma(m,0,2);var W=typeof P<"u";if(!W)P=m.position;else if(!m.seekable)throw new ge(70);return y=m.Ma.write(m,y,N,x,P,void 0),W||(m.position+=y),y}function ls(m){var y,N=zs(m,N||0);m=fi(m).size;var x=new Uint8Array(m);return xr(N,x,0,m,0),y=x,Yi(N),y}function Ct(m,y,N){m=$t("/dev/"+m);var x=is(!!y,!!N);Ct.yb??(Ct.yb=64);var P=Ct.yb++<<8|0;Da(P,{open(W){W.seekable=!1},close(){N?.buffer?.length&&N(10)},read(W,le,Ie,Me){for(var Pe=0,vt=0;vt<Me;vt++){try{var en=y()}catch{throw new ge(29)}if(en===void 0&&Pe===0)throw new ge(6);if(en==null)break;Pe++,le[Ie+vt]=en}return Pe&&(W.node.atime=Date.now()),Pe},write(W,le,Ie,Me){for(var Pe=0;Pe<Me;Pe++)try{N(le[Ie+Pe])}catch{throw new ge(29)}return Me&&(W.node.mtime=W.node.ctime=Date.now()),Pe}}),jn(m,x,P)}var Qe={};function Kn(m,y,N){if(y.charAt(0)==="/")return y;if(m=m===-100?"/":lt(m).path,y.length==0){if(!N)throw new ge(44);return m}return m+"/"+y}function Ai(m,y){k[m>>2]=y.dev,k[m+4>>2]=y.mode,Ce[m+8>>2]=y.nlink,k[m+12>>2]=y.uid,k[m+16>>2]=y.gid,k[m+20>>2]=y.rdev,$[m+24>>3]=BigInt(y.size),k[m+32>>2]=4096,k[m+36>>2]=y.blocks;var N=y.atime.getTime(),x=y.mtime.getTime(),P=y.ctime.getTime();return $[m+40>>3]=BigInt(Math.floor(N/1e3)),Ce[m+48>>2]=N%1e3*1e6,$[m+56>>3]=BigInt(Math.floor(x/1e3)),Ce[m+64>>2]=x%1e3*1e6,$[m+72>>3]=BigInt(Math.floor(P/1e3)),Ce[m+80>>2]=P%1e3*1e6,$[m+88>>3]=BigInt(y.ino),0}var _t=void 0,Gs=()=>{var m=k[+_t>>2];return _t+=4,m},_s=0,Qi=[0,31,60,91,121,152,182,213,244,274,305,335],Wn=[0,31,59,90,120,151,181,212,243,273,304,334],Hs={},Cr=m=>{M=m,bi||0<_s||(_.onExit?.(m),D=!0),F(m,new at(m))},Ir=m=>{if(!D)try{if(m(),!(bi||0<_s))try{M=m=M,Cr(m)}catch(y){y instanceof at||y=="unwind"||F(1,y)}}catch(y){y instanceof at||y=="unwind"||F(1,y)}},Xs={},kr=()=>{if(!Ys){var m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:z||"./this.program"},y;for(y in Xs)Xs[y]===void 0?delete m[y]:m[y]=Xs[y];var N=[];for(y in m)N.push(`${y}=${m[y]}`);Ys=N}return Ys},Ys,wn=m=>{var y=ci(m)+1,N=hn(y);return ss(m,w,N,y),N},Eo=(m,y,N,x)=>{var P={string:Pe=>{var vt=0;return Pe!=null&&Pe!==0&&(vt=wn(Pe)),vt},array:Pe=>{var vt=hn(Pe.length);return V.set(Pe,vt),vt}};m=_["_"+m];var W=[],le=0;if(x)for(var Ie=0;Ie<x.length;Ie++){var Me=P[N[Ie]];Me?(le===0&&(le=Rn()),W[Ie]=Me(x[Ie])):W[Ie]=x[Ie]}return N=m(...W),N=(function(Pe){return le!==0&&ys(le),y==="string"?Pe?At(w,Pe):"":y==="boolean"?!!Pe:Pe})(N)},Ri=0,xi=(m,y)=>(y=y==1?hn(m.length):$s(m.length),m.subarray||m.slice||(m=new Uint8Array(m)),w.set(m,y),y),gs,Ua=[],An,cs=m=>{gs.delete(An.get(m)),An.set(m,null),Ua.push(m)},Un=(m,y)=>{if(!gs){gs=new WeakMap;var N=An.length;if(gs)for(var x=0;x<0+N;x++){var P=An.get(x);P&&gs.set(P,x)}}if(N=gs.get(m)||0)return N;if(Ua.length)N=Ua.pop();else{try{An.grow(1)}catch(Me){throw Me instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Me}N=An.length-1}try{An.set(N,m)}catch(Me){if(!(Me instanceof TypeError))throw Me;if(typeof WebAssembly.Function=="function"){var W=WebAssembly.Function;x={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},P={parameters:[],results:y[0]=="v"?[]:[x[y[0]]]};for(var le=1;le<y.length;++le)P.parameters.push(x[y[le]]);y=new W(P,m)}else{x=[1],P=y.slice(0,1),y=y.slice(1),le={i:127,p:127,j:126,f:125,d:124,e:111},x.push(96);var Ie=y.length;128>Ie?x.push(Ie):x.push(Ie%128|128,Ie>>7);for(W of y)x.push(le[W]);P=="v"?x.push(0):x.push(1,le[P]),y=[0,97,115,109,1,0,0,0,1],W=x.length,128>W?y.push(W):y.push(W%128|128,W>>7),y.push(...x),y.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),y=new WebAssembly.Module(new Uint8Array(y)),y=new WebAssembly.Instance(y,{e:{f:m}}).exports.f}An.set(N,y)}return gs.set(m,N),N};Tn=Array(4096),Rr(je,"/"),ln("/tmp"),ln("/home"),ln("/home/web_user"),(function(){ln("/dev"),Da(259,{read:()=>0,write:(x,P,W,le)=>le,Va:()=>0}),jn("/dev/null",259),Sr(1280,go),Sr(1536,Rs),jn("/dev/tty",1280),jn("/dev/tty1",1536);var m=new Uint8Array(1024),y=0,N=()=>(y===0&&(br(m),y=m.byteLength),m[--y]);Ct("random",N),Ct("urandom",N),ln("/dev/shm"),ln("/dev/shm/tmp")})(),(function(){ln("/proc");var m=ln("/proc/self");ln("/proc/self/fd"),Rr({Xa(){var y=La(m,"fd",16895,73);return y.Ma={Va:je.Ma.Va},y.La={lookup(N,x){N=+x;var P=lt(N);return N={parent:null,Xa:{zb:"fake"},La:{readlink:()=>P.path},id:N+1},N.parent=N},readdir(){return Array.from(xs.entries()).filter(([,N])=>N).map(([N])=>N.toString())}},y}},"/proc/self/fd")})(),je.vb=new ge(44),je.vb.stack="<generic error, no stack>";var Lr={a:(m,y,N,x)=>ue(`Assertion failed: ${m?At(w,m):""}, at: `+[y?y?At(w,y):"":"unknown filename",N,x?x?At(w,x):"":"unknown function"]),i:function(m,y){try{return m=m?At(w,m):"",os(m,y),0}catch(N){if(typeof Qe>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},L:function(m,y,N){try{if(y=y?At(w,y):"",y=Kn(m,y),N&-8)return-28;var x=On(y,{$a:!0}).node;return x?(m="",N&4&&(m+="r"),N&2&&(m+="w"),N&1&&(m+="x"),m&&$n(x,m)?-2:0):-44}catch(P){if(typeof Qe>"u"||P.name!=="ErrnoError")throw P;return-P.Pa}},j:function(m,y){try{var N=lt(m);return ja(N,N.node,y,!1),0}catch(x){if(typeof Qe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},h:function(m){try{var y=lt(m);return wi(y,y.node,{timestamp:Date.now(),Fb:!1}),0}catch(N){if(typeof Qe>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},b:function(m,y,N){_t=N;try{var x=lt(m);switch(y){case 0:var P=Gs();if(0>P)break;for(;xs[P];)P++;return Fs(x,P).fd;case 1:case 2:return 0;case 3:return x.flags;case 4:return P=Gs(),x.flags|=P,0;case 12:return P=Gs(),O[P+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(W){if(typeof Qe>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},g:function(m,y){try{var N=lt(m),x=N.node,P=N.Ma.Ta;m=P?N:x,P??=x.La.Ta,Qn(P);var W=P(m);return Ai(y,W)}catch(le){if(typeof Qe>"u"||le.name!=="ErrnoError")throw le;return-le.Pa}},H:function(m,y){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var N=lt(m);if(0>y||(N.flags&2097155)===0)throw new ge(28);return Ls(N,N.node,y),0}catch(x){if(typeof Qe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},G:function(m,y){try{if(y===0)return-28;var N=ci("/")+1;return y<N?-68:(ss("/",w,m,y),N)}catch(x){if(typeof Qe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},K:function(m,y){try{return m=m?At(w,m):"",Ai(y,fi(m,!0))}catch(N){if(typeof Qe>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},C:function(m,y,N){try{return y=y?At(w,y):"",y=Kn(m,y),ln(y,N),0}catch(x){if(typeof Qe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},J:function(m,y,N,x){try{y=y?At(w,y):"";var P=x&256;return y=Kn(m,y,x&4096),Ai(N,P?fi(y,!0):fi(y))}catch(W){if(typeof Qe>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},x:function(m,y,N,x){_t=x;try{y=y?At(w,y):"",y=Kn(m,y);var P=x?Gs():0;return zs(y,N,P).fd}catch(W){if(typeof Qe>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},v:function(m,y,N,x){try{if(y=y?At(w,y):"",y=Kn(m,y),0>=x)return-28;var P=On(y).node;if(!P)throw new ge(44);if(!P.La.readlink)throw new ge(28);var W=P.La.readlink(P),le=Math.min(x,ci(W)),Ie=V[N+le];return ss(W,w,N,x+1),V[N+le]=Ie,le}catch(Me){if(typeof Qe>"u"||Me.name!=="ErrnoError")throw Me;return-Me.Pa}},u:function(m){try{return m=m?At(w,m):"",ks(m),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Pa}},f:function(m,y){try{return m=m?At(w,m):"",Ai(y,fi(m))}catch(N){if(typeof Qe>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},r:function(m,y,N){try{return y=y?At(w,y):"",y=Kn(m,y),N===0?Zt(y):N===512?ks(y):ue("Invalid flags passed to unlinkat"),0}catch(x){if(typeof Qe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},q:function(m,y,N){try{y=y?At(w,y):"",y=Kn(m,y,!0);var x=Date.now(),P,W;if(N){var le=Ce[N>>2]+4294967296*k[N+4>>2],Ie=k[N+8>>2];Ie==1073741823?P=x:Ie==1073741822?P=null:P=1e3*le+Ie/1e6,N+=16,le=Ce[N>>2]+4294967296*k[N+4>>2],Ie=k[N+8>>2],Ie==1073741823?W=x:Ie==1073741822?W=null:W=1e3*le+Ie/1e6}else W=P=x;if((W??P)!==null){m=P;var Me=On(y,{$a:!0}).node;Qn(Me.La.Ua)(Me,{atime:m,mtime:W})}return 0}catch(Pe){if(typeof Qe>"u"||Pe.name!=="ErrnoError")throw Pe;return-Pe.Pa}},m:()=>ue(""),l:()=>{bi=!1,_s=0},A:function(m,y){m=-9007199254740992>m||9007199254740992<m?NaN:Number(m),m=new Date(1e3*m),k[y>>2]=m.getSeconds(),k[y+4>>2]=m.getMinutes(),k[y+8>>2]=m.getHours(),k[y+12>>2]=m.getDate(),k[y+16>>2]=m.getMonth(),k[y+20>>2]=m.getFullYear()-1900,k[y+24>>2]=m.getDay();var N=m.getFullYear();k[y+28>>2]=(N%4!==0||N%100===0&&N%400!==0?Wn:Qi)[m.getMonth()]+m.getDate()-1|0,k[y+36>>2]=-(60*m.getTimezoneOffset()),N=new Date(m.getFullYear(),6,1).getTimezoneOffset();var x=new Date(m.getFullYear(),0,1).getTimezoneOffset();k[y+32>>2]=(N!=x&&m.getTimezoneOffset()==Math.min(x,N))|0},y:function(m,y,N,x,P,W,le){P=-9007199254740992>P||9007199254740992<P?NaN:Number(P);try{if(isNaN(P))return 61;var Ie=lt(x);if((y&2)!==0&&(N&2)===0&&(Ie.flags&2097155)!==2)throw new ge(2);if((Ie.flags&2097155)===1)throw new ge(2);if(!Ie.Ma.ib)throw new ge(43);if(!m)throw new ge(28);var Me=Ie.Ma.ib(Ie,m,P,y,N),Pe=Me.Kb;return k[W>>2]=Me.Ab,Ce[le>>2]=Pe,0}catch(vt){if(typeof Qe>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},z:function(m,y,N,x,P,W){W=-9007199254740992>W||9007199254740992<W?NaN:Number(W);try{var le=lt(P);if(N&2){if(N=W,(le.node.mode&61440)!==32768)throw new ge(43);if(!(x&2)){var Ie=w.slice(m,m+y);le.Ma.jb&&le.Ma.jb(le,Ie,N,y,x)}}}catch(Me){if(typeof Qe>"u"||Me.name!=="ErrnoError")throw Me;return-Me.Pa}},n:(m,y)=>{if(Hs[m]&&(clearTimeout(Hs[m].id),delete Hs[m]),!y)return 0;var N=setTimeout(()=>{delete Hs[m],Ir(()=>Ki(m,performance.now()))},y);return Hs[m]={id:N,Xb:y},0},B:(m,y,N,x)=>{var P=new Date().getFullYear(),W=new Date(P,0,1).getTimezoneOffset();P=new Date(P,6,1).getTimezoneOffset(),Ce[m>>2]=60*Math.max(W,P),k[y>>2]=+(W!=P),y=le=>{var Ie=Math.abs(le);return`UTC${0<=le?"-":"+"}${String(Math.floor(Ie/60)).padStart(2,"0")}${String(Ie%60).padStart(2,"0")}`},m=y(W),y=y(P),P<W?(ss(m,w,N,17),ss(y,w,x,17)):(ss(m,w,x,17),ss(y,w,N,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:m=>{var y=w.length;if(m>>>=0,2147483648<m)return!1;for(var N=1;4>=N;N*=2){var x=y*(1+.2/N);x=Math.min(x,m+100663296);e:{x=(Math.min(2147483648,65536*Math.ceil(Math.max(m,x)/65536))-j.buffer.byteLength+65535)/65536|0;try{j.grow(x),tt();var P=1;break e}catch{}P=void 0}if(P)return!0}return!1},E:(m,y)=>{var N=0;return kr().forEach((x,P)=>{var W=y+N;for(P=Ce[m+4*P>>2]=W,W=0;W<x.length;++W)V[P++]=x.charCodeAt(W);V[P]=0,N+=x.length+1}),0},F:(m,y)=>{var N=kr();Ce[m>>2]=N.length;var x=0;return N.forEach(P=>x+=P.length+1),Ce[y>>2]=x,0},e:function(m){try{var y=lt(m);return Yi(y),0}catch(N){if(typeof Qe>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},p:function(m,y){try{var N=lt(m);return V[y]=N.tty?2:fn(N.mode)?3:(N.mode&61440)===40960?7:4,O[y+2>>1]=0,$[y+8>>3]=BigInt(0),$[y+16>>3]=BigInt(0),0}catch(x){if(typeof Qe>"u"||x.name!=="ErrnoError")throw x;return x.Pa}},w:function(m,y,N,x){try{e:{var P=lt(m);m=y;for(var W,le=y=0;le<N;le++){var Ie=Ce[m>>2],Me=Ce[m+4>>2];m+=8;var Pe=xr(P,V,Ie,Me,W);if(0>Pe){var vt=-1;break e}if(y+=Pe,Pe<Me)break;typeof W<"u"&&(W+=Pe)}vt=y}return Ce[x>>2]=vt,0}catch(en){if(typeof Qe>"u"||en.name!=="ErrnoError")throw en;return en.Pa}},D:function(m,y,N,x){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var P=lt(m);return Ma(P,y,N),$[x>>3]=BigInt(P.position),P.ob&&y===0&&N===0&&(P.ob=null),0}catch(W){if(typeof Qe>"u"||W.name!=="ErrnoError")throw W;return W.Pa}},I:function(m){try{var y=lt(m);return y.Ma?.fsync?y.Ma.fsync(y):0}catch(N){if(typeof Qe>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},t:function(m,y,N,x){try{e:{var P=lt(m);m=y;for(var W,le=y=0;le<N;le++){var Ie=Ce[m>>2],Me=Ce[m+4>>2];m+=8;var Pe=$i(P,V,Ie,Me,W);if(0>Pe){var vt=-1;break e}if(y+=Pe,Pe<Me)break;typeof W<"u"&&(W+=Pe)}vt=y}return Ce[x>>2]=vt,0}catch(en){if(typeof Qe>"u"||en.name!=="ErrnoError")throw en;return en.Pa}},k:Cr},we;(async function(){function m(N){return we=N.exports,j=we.M,tt(),An=we.O,Ze--,_.monitorRunDependencies?.(Ze),Ze==0&&H&&(N=H,H=null,N()),we}Ze++,_.monitorRunDependencies?.(Ze);var y={a:Lr};return _.instantiateWasm?new Promise(N=>{_.instantiateWasm(y,(x,P)=>{m(x),N(x.exports)})}):(be??=_.locateFile?_.locateFile("sql-wasm.wasm",U):U+"sql-wasm.wasm",m((await et(y)).instance))})(),_._sqlite3_free=m=>(_._sqlite3_free=we.P)(m),_._sqlite3_value_text=m=>(_._sqlite3_value_text=we.Q)(m),_._sqlite3_prepare_v2=(m,y,N,x,P)=>(_._sqlite3_prepare_v2=we.R)(m,y,N,x,P),_._sqlite3_step=m=>(_._sqlite3_step=we.S)(m),_._sqlite3_reset=m=>(_._sqlite3_reset=we.T)(m),_._sqlite3_exec=(m,y,N,x,P)=>(_._sqlite3_exec=we.U)(m,y,N,x,P),_._sqlite3_finalize=m=>(_._sqlite3_finalize=we.V)(m),_._sqlite3_column_name=(m,y)=>(_._sqlite3_column_name=we.W)(m,y),_._sqlite3_column_text=(m,y)=>(_._sqlite3_column_text=we.X)(m,y),_._sqlite3_column_type=(m,y)=>(_._sqlite3_column_type=we.Y)(m,y),_._sqlite3_errmsg=m=>(_._sqlite3_errmsg=we.Z)(m),_._sqlite3_clear_bindings=m=>(_._sqlite3_clear_bindings=we._)(m),_._sqlite3_value_blob=m=>(_._sqlite3_value_blob=we.$)(m),_._sqlite3_value_bytes=m=>(_._sqlite3_value_bytes=we.aa)(m),_._sqlite3_value_double=m=>(_._sqlite3_value_double=we.ba)(m),_._sqlite3_value_int=m=>(_._sqlite3_value_int=we.ca)(m),_._sqlite3_value_type=m=>(_._sqlite3_value_type=we.da)(m),_._sqlite3_result_blob=(m,y,N,x)=>(_._sqlite3_result_blob=we.ea)(m,y,N,x),_._sqlite3_result_double=(m,y)=>(_._sqlite3_result_double=we.fa)(m,y),_._sqlite3_result_error=(m,y,N)=>(_._sqlite3_result_error=we.ga)(m,y,N),_._sqlite3_result_int=(m,y)=>(_._sqlite3_result_int=we.ha)(m,y),_._sqlite3_result_int64=(m,y)=>(_._sqlite3_result_int64=we.ia)(m,y),_._sqlite3_result_null=m=>(_._sqlite3_result_null=we.ja)(m),_._sqlite3_result_text=(m,y,N,x)=>(_._sqlite3_result_text=we.ka)(m,y,N,x),_._sqlite3_aggregate_context=(m,y)=>(_._sqlite3_aggregate_context=we.la)(m,y),_._sqlite3_column_count=m=>(_._sqlite3_column_count=we.ma)(m),_._sqlite3_data_count=m=>(_._sqlite3_data_count=we.na)(m),_._sqlite3_column_blob=(m,y)=>(_._sqlite3_column_blob=we.oa)(m,y),_._sqlite3_column_bytes=(m,y)=>(_._sqlite3_column_bytes=we.pa)(m,y),_._sqlite3_column_double=(m,y)=>(_._sqlite3_column_double=we.qa)(m,y),_._sqlite3_bind_blob=(m,y,N,x,P)=>(_._sqlite3_bind_blob=we.ra)(m,y,N,x,P),_._sqlite3_bind_double=(m,y,N)=>(_._sqlite3_bind_double=we.sa)(m,y,N),_._sqlite3_bind_int=(m,y,N)=>(_._sqlite3_bind_int=we.ta)(m,y,N),_._sqlite3_bind_text=(m,y,N,x,P)=>(_._sqlite3_bind_text=we.ua)(m,y,N,x,P),_._sqlite3_bind_parameter_index=(m,y)=>(_._sqlite3_bind_parameter_index=we.va)(m,y),_._sqlite3_sql=m=>(_._sqlite3_sql=we.wa)(m),_._sqlite3_normalized_sql=m=>(_._sqlite3_normalized_sql=we.xa)(m),_._sqlite3_changes=m=>(_._sqlite3_changes=we.ya)(m),_._sqlite3_close_v2=m=>(_._sqlite3_close_v2=we.za)(m),_._sqlite3_create_function_v2=(m,y,N,x,P,W,le,Ie,Me)=>(_._sqlite3_create_function_v2=we.Aa)(m,y,N,x,P,W,le,Ie,Me),_._sqlite3_update_hook=(m,y,N)=>(_._sqlite3_update_hook=we.Ba)(m,y,N),_._sqlite3_open=(m,y)=>(_._sqlite3_open=we.Ca)(m,y);var $s=_._malloc=m=>($s=_._malloc=we.Da)(m),us=_._free=m=>(us=_._free=we.Ea)(m);_._RegisterExtensionFunctions=m=>(_._RegisterExtensionFunctions=we.Fa)(m);var Ci=(m,y)=>(Ci=we.Ga)(m,y),Ki=(m,y)=>(Ki=we.Ha)(m,y),ys=m=>(ys=we.Ia)(m),hn=m=>(hn=we.Ja)(m),Rn=()=>(Rn=we.Ka)();_.stackSave=()=>Rn(),_.stackRestore=m=>ys(m),_.stackAlloc=m=>hn(m),_.cwrap=(m,y,N,x)=>{var P=!N||N.every(W=>W==="number"||W==="boolean");return y!=="string"&&P&&!x?_["_"+m]:(...W)=>Eo(m,y,N,W)},_.addFunction=Un,_.removeFunction=cs,_.UTF8ToString=Xi,_.ALLOC_NORMAL=Ri,_.allocate=xi,_.allocateUTF8OnStack=wn;function hi(){function m(){if(_.calledRun=!0,!D){if(!_.noFSInit&&!Si){var y,N;Si=!0,x??=_.stdin,y??=_.stdout,N??=_.stderr,x?Ct("stdin",x):Mn("/dev/tty","/dev/stdin"),y?Ct("stdout",null,y):Mn("/dev/tty","/dev/stdout"),N?Ct("stderr",null,N):Mn("/dev/tty1","/dev/stderr"),zs("/dev/stdin",0),zs("/dev/stdout",1),zs("/dev/stderr",1)}if(we.N(),Jt=!1,_.onRuntimeInitialized?.(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var x=_.postRun.shift();Ut.unshift(x)}nn(Ut)}}if(0<Ze)H=hi;else{if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)Ca();nn(Ti),0<Ze?H=hi:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),m()},1)):m()}}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return hi(),g}),n)};s.exports=a,s.exports.default=a})(rm)),rm.exports}var SN=bN();const UT=lN(SN),NN=`
CREATE TABLE IF NOT EXISTS domains (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  color TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  domain_id INTEGER NOT NULL REFERENCES domains(id),
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS quests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  goal_id INTEGER NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS steps (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  quest_id INTEGER NOT NULL REFERENCES quests(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'pending',
  sort_order INTEGER NOT NULL DEFAULT 0,
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS buff_definitions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  type TEXT NOT NULL DEFAULT 'buff',
  icon TEXT NOT NULL DEFAULT '',
  duration_hours INTEGER NOT NULL DEFAULT 24,
  stat_effects TEXT NOT NULL DEFAULT '{}',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS buff_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  definition_id INTEGER NOT NULL REFERENCES buff_definitions(id) ON DELETE CASCADE,
  activated_at TEXT NOT NULL DEFAULT (datetime('now')),
  expires_at TEXT NOT NULL,
  is_active INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS character (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  name TEXT NOT NULL DEFAULT 'Adventurer',
  total_xp INTEGER NOT NULL DEFAULT 0,
  level INTEGER NOT NULL DEFAULT 1,
  title TEXT NOT NULL DEFAULT 'Novice',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS xp_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount INTEGER NOT NULL,
  reason TEXT NOT NULL,
  source_type TEXT NOT NULL,
  source_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS planner_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  date TEXT NOT NULL,
  start_time TEXT,
  end_time TEXT,
  quest_id INTEGER REFERENCES quests(id) ON DELETE SET NULL,
  step_id INTEGER REFERENCES steps(id) ON DELETE SET NULL,
  is_completed INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);
`,wN=`
INSERT OR IGNORE INTO domains (id, name, icon, color) VALUES
  (1, 'Health', '', '#e74c3c'),
  (2, 'Career', '', '#c8a84e'),
  (3, 'Learning', '', '#3498db'),
  (4, 'Social', '', '#e67e22'),
  (5, 'Finance', '', '#2ecc71'),
  (6, 'Creative', '', '#9b59b6'),
  (7, 'Spiritual', '', '#1abc9c'),
  (8, 'Home', '', '#95a5a6');
`,AN=`
INSERT OR IGNORE INTO character (id, name, total_xp, level, title)
VALUES (1, 'Adventurer', 0, 1, 'Novice');
`,RN="goal-game-db",gl="database",VT="main";let hs=null;function qT(){return new Promise((s,e)=>{const n=indexedDB.open(RN,1);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(gl)||a.createObjectStore(gl)},n.onsuccess=()=>s(n.result),n.onerror=()=>e(n.error)})}async function xN(){const s=await qT();return new Promise((e,n)=>{const a=s.transaction(gl,"readonly"),u=a.objectStore(gl).get(VT);u.onsuccess=()=>e(u.result??null),u.onerror=()=>n(u.error),a.oncomplete=()=>s.close()})}async function CN(s){const e=await qT();return new Promise((n,a)=>{const o=e.transaction(gl,"readwrite");o.objectStore(gl).put(s,VT),o.oncomplete=()=>{e.close(),n()},o.onerror=()=>a(o.error)})}async function IN(){if(hs)return hs;const s=await UT({locateFile:()=>"/goal-game/sql-wasm.wasm"}),e=await xN();return e?hs=new s.Database(e):hs=new s.Database,hs.run(NN),hs.run(wN),hs.run(AN),await ye(),hs}async function ye(){if(!hs)return;const s=hs.export();await CN(s)}function ae(){if(!hs)throw new Error("Database not initialized. Call getDatabase() first.");return hs}async function cp(){return ae().export()}async function BT(s){const e=await UT({locateFile:()=>"/goal-game/sql-wasm.wasm"});hs&&hs.close(),hs=new e.Database(s),await ye()}const om="migration_feb2026_billing_v1";async function kN(){if(localStorage.getItem(om))return!1;const s=ae(),e=s.exec("SELECT id FROM goals WHERE title = 'Bill 190 Hours - February 2026'");if(e.length>0&&e[0].values.length>0)return localStorage.setItem(om,"true"),!1;s.run(`
    INSERT INTO goals (domain_id, title, description, status)
    VALUES (2, 'Bill 190 Hours - February 2026', 'Target: 8 hours on weekdays, ~4.5 hours on weekends. Started with 8 hours billed.', 'active')
  `);const a=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0],o=[{title:"Week 1: Feb 3-9",description:"First partial week. Target: ~41 hours (4 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-03",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-04",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-05",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-06",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-07",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-08",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 2: Feb 9-15",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-09",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-10",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-11",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-12",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-13",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-14",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-15",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 3: Feb 16-22",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-16",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-17",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-18",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-19",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-20",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-21",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-22",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 4: Feb 23-28",description:"Final partial week. Target: ~44.5 hours (5 weekdays  8 + 1 weekend day  4.5)",days:[{date:"2026-02-23",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-24",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-25",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-26",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-27",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-28",day:"Sat",hours:4.5,isWeekend:!0}]}];for(const u of o){s.run(`
      INSERT INTO quests (goal_id, title, description, priority, status)
      VALUES (?, ?, ?, 'high', 'active')
    `,[a,u.title,u.description]);const g=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(let v=0;v<u.days.length;v++){const _=u.days[v],S=`${_.day} ${_.date.slice(5)}: Bill ${_.hours} hours`;s.run(`
        INSERT INTO steps (quest_id, title, priority, status, sort_order)
        VALUES (?, ?, ?, 'pending', ?)
      `,[g,S,_.isWeekend?"low":"normal",v])}}return await ye(),localStorage.setItem(om,"true"),!0}const UE="notifications_migration_v1";async function LN(){if(localStorage.getItem(UE))return;const s=ae();try{(s.exec("PRAGMA table_info(planner_events)")[0]?.values.map(a=>a[1])||[]).includes("reminder_minutes")||s.run("ALTER TABLE planner_events ADD COLUMN reminder_minutes INTEGER DEFAULT NULL"),s.run(`
      CREATE TABLE IF NOT EXISTS notification_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        enabled INTEGER NOT NULL DEFAULT 0,
        default_reminder_minutes INTEGER NOT NULL DEFAULT 15,
        fcm_token TEXT,
        device_id TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await ye(),localStorage.setItem(UE,"true"),console.log("Notifications migration completed successfully")}catch(e){throw console.error("Failed to run notifications migration:",e),e}}const VE="body_fat_goal_seed_v4";async function DN(){if(localStorage.getItem(VE))return;const s=ae();try{const e=s.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(e.length&&e[0].values.length){const _=e[0].values[0][0],S=s.exec("SELECT id FROM quests WHERE goal_id = ?",[_]);if(S.length)for(const A of S[0].values)s.run("DELETE FROM steps WHERE quest_id = ?",[A[0]]);s.run("DELETE FROM quests WHERE goal_id = ?",[_]),s.run("DELETE FROM goals WHERE id = ?",[_])}s.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[1,"Achieve 12% Body Fat","12-week transformation program starting Feb 4, 2026. From 18-19% to 12% body fat through consistent training and nutrition."]);const a=s.exec("SELECT last_insert_rowid()")[0].values[0][0],o=new Date(2026,1,4,12,0,0),u=[{title:"Week 1 - Build Foundation",desc:"Establish daily habits and set your baseline."},{title:"Week 2 - Gain Momentum",desc:"Lock in the routine. Consistency is key."},{title:"Week 3 - Stay Disciplined",desc:"Push through early challenges. Trust the process."},{title:"Week 4 - Complete Month 1",desc:"First month done! Take measurements and assess progress."},{title:"Week 5 - Intensify",desc:"Increase intensity. Your body is adapting."},{title:"Week 6 - Push Through",desc:"Mental toughness week. No excuses."},{title:"Week 7 - Halfway Point",desc:"You're halfway there! Stay focused."},{title:"Week 8 - Stay Strong",desc:"Month 2 complete. Reassess and adjust if needed."},{title:"Week 9 - Final Month Begins",desc:"Last 4 weeks. Time to lock in."},{title:"Week 10 - Home Stretch",desc:"You can see the finish line. Don't let up."},{title:"Week 11 - Almost There",desc:"One more week after this. Give it everything."},{title:"Week 12 - Finish Strong",desc:"Final week! Complete the transformation."}],h=[{dayName:"Wed",workout:"Light Cardio (20-30 min)",isGym:!1},{dayName:"Thu",workout:"Gym - Legs (Quads/Hams/Glutes)",isGym:!0},{dayName:"Fri",workout:"Gym - Upper Body",isGym:!0},{dayName:"Sat",workout:"Gym - Lower Body / Deadlifts",isGym:!0},{dayName:"Sun",workout:"Rest + Weekly Check-in",isGym:!1},{dayName:"Mon",workout:"Gym - Push (Chest/Shoulders/Triceps)",isGym:!0},{dayName:"Tue",workout:"Gym - Pull (Back/Biceps)",isGym:!0}],g=_=>{const S=_.getMonth()+1,A=_.getDate();return`${S}/${A}`};let v=new Date(o);for(let _=0;_<u.length;_++){const S=u[_],A=g(v),C=g(new Date(v.getTime()+8640*60*1e3));s.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[a,`${S.title} (${A} - ${C})`,S.desc,"high"]);const z=s.exec("SELECT last_insert_rowid()")[0].values[0][0];let F=1;for(let U=0;U<7;U++){const G=h[U],Y=g(v);s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[z,`${G.dayName} ${Y}: ${G.workout}`,"normal",F++]),s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[z,`${G.dayName} ${Y}: Hit protein goal`,"normal",F++]),v.setDate(v.getDate()+1)}}await ye(),localStorage.setItem(VE,"true"),console.log("Body fat goal seeded successfully (v3 - starting Wed 2/4/2026)")}catch(e){throw console.error("Failed to seed body fat goal:",e),e}}const qE="daily_quests_migration_v1";async function ON(){if(localStorage.getItem(qE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS daily_quests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        quest_type TEXT NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        target_value INTEGER NOT NULL DEFAULT 1,
        current_value INTEGER NOT NULL DEFAULT 0,
        xp_reward INTEGER NOT NULL DEFAULT 25,
        is_completed INTEGER NOT NULL DEFAULT 0,
        completed_at TEXT
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS daily_quest_bonus (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL UNIQUE,
        claimed_at TEXT NOT NULL
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_daily_quests_date ON daily_quests(date)"),await ye(),localStorage.setItem(qE,"true"),console.log("Daily quests migration completed successfully")}catch(e){throw console.error("Failed to run daily quests migration:",e),e}}const BE="streak_migration_v1";async function jN(){if(localStorage.getItem(BE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS streak_shields (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        quantity INTEGER NOT NULL DEFAULT 0,
        earned_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM streak_shields")[0].values[0][0]===0&&s.run("INSERT INTO streak_shields (quantity) VALUES (3)"),s.run(`
      CREATE TABLE IF NOT EXISTS streak_freezes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        freeze_date TEXT NOT NULL,
        reason TEXT,
        created_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE,
        UNIQUE(buff_definition_id, freeze_date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL UNIQUE,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_milestone_claimed INTEGER NOT NULL DEFAULT 0,
        updated_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_shield_uses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        used_date TEXT NOT NULL,
        streak_saved INTEGER NOT NULL,
        used_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_date ON streak_freezes(freeze_date)"),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_buff ON streak_freezes(buff_definition_id)"),await ye(),localStorage.setItem(BE,"true"),console.log("Streak migration completed successfully")}catch(e){throw console.error("Failed to run streak migration:",e),e}}const PE="weekly_boss_migration_v1";async function MN(){if(localStorage.getItem(PE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_boss (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        boss_type TEXT NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        max_hp INTEGER NOT NULL,
        current_hp INTEGER NOT NULL,
        is_defeated INTEGER NOT NULL DEFAULT 0,
        defeated_at TEXT,
        xp_reward INTEGER NOT NULL,
        bonus_shields INTEGER NOT NULL DEFAULT 0,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS boss_damage_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        boss_id INTEGER NOT NULL,
        damage_type TEXT NOT NULL,
        damage_amount INTEGER NOT NULL,
        source_description TEXT,
        dealt_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (boss_id) REFERENCES weekly_boss(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_boss_week ON weekly_boss(week_start)"),s.run("CREATE INDEX IF NOT EXISTS idx_boss_damage_log_boss ON boss_damage_log(boss_id)"),await ye(),localStorage.setItem(PE,"true"),console.log("Weekly boss migration completed successfully")}catch(e){throw console.error("Failed to run weekly boss migration:",e),e}}const UN={quests:"Quests & Goals",buffs:"Habits & Buffs",streaks:"Streaks",boss:"Boss Battles",levels:"Leveling",special:"Special"},VN={quests:"",buffs:"",streaks:"",boss:"",levels:"",special:""},qN=[{key:"first_step",name:"First Step",description:"Complete your first step",category:"quests",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"steps_completed",sort_order:1,is_hidden:!1},{key:"ten_steps",name:"On Your Way",description:"Complete 10 steps",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"steps_completed",sort_order:2,is_hidden:!1},{key:"hundred_steps",name:"Journey Master",description:"Complete 100 steps",category:"quests",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"steps_completed",sort_order:3,is_hidden:!1},{key:"first_quest",name:"Quest Beginner",description:"Complete your first quest",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:1,requirement_source:"quests_completed",sort_order:4,is_hidden:!1},{key:"ten_quests",name:"Quest Veteran",description:"Complete 10 quests",category:"quests",icon:"",xp_reward:150,requirement_type:"count",requirement_value:10,requirement_source:"quests_completed",sort_order:5,is_hidden:!1},{key:"first_goal",name:"Goal Getter",description:"Complete your first goal",category:"quests",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"goals_completed",sort_order:6,is_hidden:!1},{key:"first_buff",name:"Habit Former",description:"Activate your first buff",category:"buffs",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"buffs_activated",sort_order:1,is_hidden:!1},{key:"ten_buffs",name:"Habit Builder",description:"Activate 10 buffs",category:"buffs",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"buffs_activated",sort_order:2,is_hidden:!1},{key:"hundred_buffs",name:"Habit Master",description:"Activate 100 buffs",category:"buffs",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"buffs_activated",sort_order:3,is_hidden:!1},{key:"week_streak",name:"Week Warrior",description:"Maintain a 7-day streak",category:"streaks",icon:"",xp_reward:75,requirement_type:"threshold",requirement_value:7,requirement_source:"buff_streak",sort_order:1,is_hidden:!1},{key:"month_streak",name:"Monthly Champion",description:"Maintain a 30-day streak",category:"streaks",icon:"",xp_reward:300,requirement_type:"threshold",requirement_value:30,requirement_source:"buff_streak",sort_order:2,is_hidden:!1},{key:"first_boss",name:"Dragon Slayer",description:"Defeat your first weekly boss",category:"boss",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"bosses_defeated",sort_order:1,is_hidden:!1},{key:"five_bosses",name:"Boss Hunter",description:"Defeat 5 weekly bosses",category:"boss",icon:"",xp_reward:250,requirement_type:"count",requirement_value:5,requirement_source:"bosses_defeated",sort_order:2,is_hidden:!1},{key:"level_5",name:"Rising Star",description:"Reach level 5",category:"levels",icon:"",xp_reward:50,requirement_type:"threshold",requirement_value:5,requirement_source:"character_level",sort_order:1,is_hidden:!1},{key:"level_10",name:"Apprentice",description:"Reach level 10",category:"levels",icon:"",xp_reward:100,requirement_type:"threshold",requirement_value:10,requirement_source:"character_level",sort_order:2,is_hidden:!1},{key:"level_25",name:"Expert",description:"Reach level 25",category:"levels",icon:"",xp_reward:250,requirement_type:"threshold",requirement_value:25,requirement_source:"character_level",sort_order:3,is_hidden:!1},{key:"level_50",name:"Master",description:"Reach level 50",category:"levels",icon:"",xp_reward:500,requirement_type:"threshold",requirement_value:50,requirement_source:"character_level",sort_order:4,is_hidden:!1}],FE="achievement_migration_v1";async function BN(){if(localStorage.getItem(FE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS achievement_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        category TEXT NOT NULL,
        icon TEXT NOT NULL,
        xp_reward INTEGER NOT NULL DEFAULT 0,
        requirement_type TEXT NOT NULL,
        requirement_value INTEGER NOT NULL,
        requirement_source TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0,
        is_hidden INTEGER NOT NULL DEFAULT 0
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS achievement_unlocks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS achievement_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        current_value INTEGER NOT NULL DEFAULT 0,
        last_updated TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_unlocks_def ON achievement_unlocks(definition_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_progress_def ON achievement_progress(definition_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_category ON achievement_definitions(category)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_source ON achievement_definitions(requirement_source)");for(const e of qN)s.run(`INSERT OR IGNORE INTO achievement_definitions
         (key, name, description, category, icon, xp_reward, requirement_type, requirement_value, requirement_source, sort_order, is_hidden)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.key,e.name,e.description,e.category,e.icon,e.xp_reward,e.requirement_type,e.requirement_value,e.requirement_source,e.sort_order,e.is_hidden?1:0]);await ye(),localStorage.setItem(FE,"true"),console.log("Achievement migration completed successfully")}catch(e){throw console.error("Failed to run achievement migration:",e),e}}const PT=10,fl=100,Dm=20,Om=5,PN={complete_step:5,activate_buff:3,start_focus_timer:10,deactivate_debuff:15},lm={name:"Fatigued",icon:"",effects:{focus:-2,willpower:-2}},cm={name:"Exhausted",icon:"",effects:{stamina:-3,willpower:-3,focus:-3,health:-1}},zE="energy_migration_v1";async function FN(){if(localStorage.getItem(zE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS energy_state (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        current_energy INTEGER NOT NULL DEFAULT ${fl},
        max_energy INTEGER NOT NULL DEFAULT ${fl},
        last_regen_at TEXT NOT NULL DEFAULT (datetime('now')),
        bonus_energy INTEGER NOT NULL DEFAULT 0
      )
    `),s.exec("SELECT COUNT(*) FROM energy_state")[0].values[0][0]===0&&s.run(`INSERT INTO energy_state (id, current_energy, max_energy) VALUES (1, ${fl}, ${fl})`),s.run(`
      CREATE TABLE IF NOT EXISTS energy_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        amount INTEGER NOT NULL,
        reason TEXT NOT NULL,
        source_type TEXT NOT NULL,
        source_id INTEGER,
        energy_before INTEGER NOT NULL,
        energy_after INTEGER NOT NULL,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS energy_costs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        action_type TEXT NOT NULL UNIQUE,
        base_cost INTEGER NOT NULL,
        description TEXT NOT NULL DEFAULT ''
      )
    `);for(const[n,a]of Object.entries(PN))s.run(`INSERT OR IGNORE INTO energy_costs (action_type, base_cost, description)
         VALUES (?, ?, ?)`,[n,a,`Cost for ${n.replace(/_/g," ")}`]);s.run("CREATE INDEX IF NOT EXISTS idx_energy_log_created ON energy_log(created_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_energy_log_source ON energy_log(source_type)"),await ye(),localStorage.setItem(zE,"true"),console.log("Energy migration completed successfully")}catch(e){throw console.error("Failed to run energy migration:",e),e}}const zN=15,GN=5,HN=10,Ps={work_duration:25,short_break:5,long_break:15,sessions_before_long_break:4,auto_start_breaks:!1,sound_enabled:!0},GE="focus_timer_migration_v1";async function XN(){if(localStorage.getItem(GE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS focus_sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        duration_minutes INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        status TEXT NOT NULL DEFAULT 'active',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        linked_step_id INTEGER,
        linked_quest_id INTEGER,
        break_taken INTEGER NOT NULL DEFAULT 0,
        notes TEXT NOT NULL DEFAULT '',
        FOREIGN KEY (linked_step_id) REFERENCES steps(id) ON DELETE SET NULL,
        FOREIGN KEY (linked_quest_id) REFERENCES quests(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS focus_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        work_duration INTEGER NOT NULL DEFAULT ${Ps.work_duration},
        short_break INTEGER NOT NULL DEFAULT ${Ps.short_break},
        long_break INTEGER NOT NULL DEFAULT ${Ps.long_break},
        sessions_before_long_break INTEGER NOT NULL DEFAULT ${Ps.sessions_before_long_break},
        auto_start_breaks INTEGER NOT NULL DEFAULT ${Ps.auto_start_breaks?1:0},
        sound_enabled INTEGER NOT NULL DEFAULT ${Ps.sound_enabled?1:0}
      )
    `),s.exec("SELECT COUNT(*) FROM focus_settings")[0].values[0][0]===0&&s.run(`
        INSERT INTO focus_settings (id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled)
        VALUES (1, ?, ?, ?, ?, ?, ?)
      `,[Ps.work_duration,Ps.short_break,Ps.long_break,Ps.sessions_before_long_break,Ps.auto_start_breaks?1:0,Ps.sound_enabled?1:0]),s.run(`
      CREATE TABLE IF NOT EXISTS focus_stats (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        total_sessions INTEGER NOT NULL DEFAULT 0,
        total_minutes INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        current_streak INTEGER NOT NULL DEFAULT 0,
        today_sessions INTEGER NOT NULL DEFAULT 0,
        today_date TEXT NOT NULL DEFAULT (date('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM focus_stats")[0].values[0][0]===0&&s.run("INSERT INTO focus_stats (id) VALUES (1)"),s.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_started ON focus_sessions(started_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_status ON focus_sessions(status)"),await ye(),localStorage.setItem(GE,"true"),console.log("Focus timer migration completed successfully")}catch(e){throw console.error("Failed to run focus timer migration:",e),e}}const HE="routine_migration_v1";async function YN(){if(localStorage.getItem(HE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS routine_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        type TEXT NOT NULL DEFAULT 'custom',
        description TEXT NOT NULL DEFAULT '',
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_steps (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        linked_buff_id INTEGER,
        sort_order INTEGER NOT NULL DEFAULT 0,
        duration_minutes INTEGER NOT NULL DEFAULT 5,
        is_optional INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        FOREIGN KEY (linked_buff_id) REFERENCES buff_definitions(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        started_at TEXT,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        steps_completed INTEGER NOT NULL DEFAULT 0,
        total_steps INTEGER NOT NULL DEFAULT 0,
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        UNIQUE(routine_id, date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_step_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_log_id INTEGER NOT NULL,
        step_id INTEGER NOT NULL,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        skipped INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_log_id) REFERENCES routine_logs(id) ON DELETE CASCADE,
        FOREIGN KEY (step_id) REFERENCES routine_steps(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_streaks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL UNIQUE,
        current_streak INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_completed_date TEXT,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_routine_steps_routine ON routine_steps(routine_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_date ON routine_logs(date)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_routine ON routine_logs(routine_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_step_logs_log ON routine_step_logs(routine_log_id)"),await ye(),localStorage.setItem(HE,"true"),console.log("Routine migration completed successfully")}catch(e){throw console.error("Failed to run routine migration:",e),e}}const $N=[{name:"Wellness Warrior",description:"Activate Meditation, Exercise, and Healthy Meal buffs",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0},{name:"Focus Master",description:"Activate No Phone First Hour, Deep Work Session, and Read 30+ Minutes",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Early Bird",description:"Activate Morning Exercise, 8 Hours Sleep, and No Phone First Hour",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:35,is_active:!0},{name:"Mind & Body",description:"Activate Meditation, Yoga/Stretching, and Journaling",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Social Champion",description:"Activate Socialised, Helped Someone, and Gratitude Practice",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0}],QN={"Wellness Warrior":["Meditation","Morning Exercise","Healthy Meal"],"Focus Master":["No Phone First Hour","Deep Work Session","Read 30+ Minutes"],"Early Bird":["Morning Exercise","8 Hours Sleep","No Phone First Hour"],"Mind & Body":["Meditation","Yoga / Stretching","Journaling"],"Social Champion":["Socialised","Helped Someone","Gratitude Practice"]},XE="combo_migration_v1";async function KN(){if(localStorage.getItem(XE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS combo_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        icon TEXT NOT NULL DEFAULT '',
        required_buffs TEXT NOT NULL DEFAULT '[]',
        time_window_hours INTEGER NOT NULL DEFAULT 24,
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS combo_activations (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        combo_id INTEGER NOT NULL,
        activated_at TEXT NOT NULL DEFAULT (datetime('now')),
        buffs_used TEXT NOT NULL DEFAULT '[]',
        FOREIGN KEY (combo_id) REFERENCES combo_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_combo ON combo_activations(combo_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_date ON combo_activations(activated_at)");for(const e of $N){const n=QN[e.name]||[],a=[];for(const o of n){const u=s.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = 'buff' LIMIT 1",[o]);u.length&&u[0].values.length&&a.push(u[0].values[0][0])}a.length>=2&&s.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active)
           VALUES (?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,JSON.stringify(a),e.time_window_hours,e.bonus_xp,e.is_active?1:0])}await ye(),localStorage.setItem(XE,"true"),console.log("Combo migration completed successfully")}catch(e){throw console.error("Failed to run combo migration:",e),e}}const YE="weekly_review_migration_v1";async function WN(){if(localStorage.getItem(YE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_reviews (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        generated_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        summary_data TEXT NOT NULL DEFAULT '{}',
        wins TEXT NOT NULL DEFAULT '',
        challenges TEXT NOT NULL DEFAULT '',
        priorities TEXT NOT NULL DEFAULT '[]',
        notes TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_reviews_week ON weekly_reviews(week_start)"),await ye(),localStorage.setItem(YE,"true"),console.log("Weekly review migration completed successfully")}catch(e){throw console.error("Failed to run weekly review migration:",e),e}}const JN=[{name:"Double XP Hour",description:"All XP gains are doubled for the next hour!",type:"bonus",icon:"",duration_hours:1,effect_type:"xp_multiplier",effect_value:'{"multiplier": 2}',rarity:"rare",weight:10},{name:"Energy Surge",description:"Instantly restore 50 energy!",type:"bonus",icon:"",duration_hours:0,effect_type:"energy_restore",effect_value:'{"amount": 50}',rarity:"common",weight:30},{name:"Streak Shield Drop",description:"A free streak shield has appeared!",type:"bonus",icon:"",duration_hours:0,effect_type:"streak_shield",effect_value:'{"shields": 1}',rarity:"uncommon",weight:15},{name:"XP Bonus",description:"Receive a bonus of 25 XP!",type:"bonus",icon:"",duration_hours:0,effect_type:"xp_bonus",effect_value:'{"amount": 25}',rarity:"common",weight:25},{name:"Sprint Challenge",description:"Complete 5 steps in 2 hours for bonus XP!",type:"challenge",icon:"",duration_hours:2,effect_type:"step_challenge",effect_value:'{"target": 5, "reward_xp": 50}',rarity:"uncommon",weight:20},{name:"Habit Rush",description:"Activate 3 buffs in 4 hours for bonus XP!",type:"challenge",icon:"",duration_hours:4,effect_type:"buff_challenge",effect_value:'{"target": 3, "reward_xp": 40}',rarity:"common",weight:25},{name:"Focus Marathon",description:"Complete 2 focus sessions in 3 hours!",type:"challenge",icon:"",duration_hours:3,effect_type:"focus_challenge",effect_value:'{"target": 2, "reward_xp": 45}',rarity:"uncommon",weight:15},{name:"Stat Boost",description:"All stats increased by +2 for 6 hours!",type:"modifier",icon:"",duration_hours:6,effect_type:"stat_boost",effect_value:'{"all_stats": 2}',rarity:"rare",weight:10},{name:"Lucky Day",description:"Increased chance of rare events for 12 hours!",type:"modifier",icon:"",duration_hours:12,effect_type:"luck_boost",effect_value:'{"rare_chance_bonus": 0.5}',rarity:"epic",weight:5}],ZN=.15,ew=4,$E="random_event_migration_v1";async function tw(){if(localStorage.getItem($E))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS event_templates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        type TEXT NOT NULL,
        icon TEXT NOT NULL,
        duration_hours INTEGER NOT NULL DEFAULT 0,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        rarity TEXT NOT NULL DEFAULT 'common',
        weight INTEGER NOT NULL DEFAULT 10
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS active_events (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        expires_at TEXT NOT NULL,
        is_claimed INTEGER NOT NULL DEFAULT 0,
        claimed_at TEXT,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS event_history (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        event_name TEXT NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        result TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_active_events_expires ON active_events(expires_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_event_history_started ON event_history(started_at)");for(const e of JN)s.run(`INSERT INTO event_templates (name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.type,e.icon,e.duration_hours,e.effect_type,e.effect_value,e.rarity,e.weight]);await ye(),localStorage.setItem($E,"true"),console.log("Random event migration completed successfully")}catch(e){throw console.error("Failed to run random event migration:",e),e}}const nw=[{name:"Productivity",description:"Quest and step bonuses",icon:"",color:"#3b82f6",sort_order:1},{name:"Health",description:"Energy and stamina bonuses",icon:"",color:"#ef4444",sort_order:2},{name:"Focus",description:"Timer and concentration bonuses",icon:"",color:"#8b5cf6",sort_order:3},{name:"Social",description:"Streak and charisma bonuses",icon:"",color:"#f97316",sort_order:4}],sw=[{branch_id:1,name:"Quick Learner",description:"+5% XP from steps",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"step_xp_bonus",effect_value:'{"percent": 5}',is_capstone:!1},{branch_id:1,name:"Efficient Worker",description:"+10% XP from quests",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:1,effect_type:"quest_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:1,name:"Goal Master",description:"+15% XP from goals",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:2,effect_type:"goal_xp_bonus",effect_value:'{"percent": 15}',is_capstone:!0},{branch_id:2,name:"Energized",description:"+10 max energy",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"max_energy",effect_value:'{"amount": 10}',is_capstone:!1},{branch_id:2,name:"Quick Recovery",description:"+2 energy regen/hour",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:4,effect_type:"energy_regen",effect_value:'{"amount": 2}',is_capstone:!1},{branch_id:2,name:"Vitality Master",description:"+2 stamina, +2 health",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:5,effect_type:"stat_bonus",effect_value:'{"stamina": 2, "health": 2}',is_capstone:!0},{branch_id:3,name:"Focused Mind",description:"+1 focus stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"focus": 1}',is_capstone:!1},{branch_id:3,name:"Deep Concentration",description:"+10% focus session XP",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:7,effect_type:"focus_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:3,name:"Zen Master",description:"+3 focus, +2 willpower",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:8,effect_type:"stat_bonus",effect_value:'{"focus": 3, "willpower": 2}',is_capstone:!0},{branch_id:4,name:"Charismatic",description:"+1 charisma stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"charisma": 1}',is_capstone:!1},{branch_id:4,name:"Streak Guardian",description:"Streaks last 1 extra day",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:10,effect_type:"streak_extension",effect_value:'{"days": 1}',is_capstone:!1},{branch_id:4,name:"Social Champion",description:"+3 charisma, +10% streak XP",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:11,effect_type:"combined",effect_value:'{"charisma": 3, "streak_xp_bonus": 10}',is_capstone:!0}],QE="skill_tree_migration_v1";async function iw(){if(localStorage.getItem(QE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS skill_branches (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        color TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS skill_nodes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        branch_id INTEGER NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        tier INTEGER NOT NULL DEFAULT 1,
        position INTEGER NOT NULL DEFAULT 0,
        xp_cost INTEGER NOT NULL DEFAULT 100,
        prerequisite_node_id INTEGER,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        is_capstone INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (branch_id) REFERENCES skill_branches(id) ON DELETE CASCADE,
        FOREIGN KEY (prerequisite_node_id) REFERENCES skill_nodes(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS unlocked_skills (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        node_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (node_id) REFERENCES skill_nodes(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_skill_nodes_branch ON skill_nodes(branch_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_unlocked_skills_node ON unlocked_skills(node_id)");for(const e of nw)s.run(`INSERT INTO skill_branches (name, description, icon, color, sort_order)
         VALUES (?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.color,e.sort_order]);for(const e of sw)s.run(`INSERT INTO skill_nodes (branch_id, name, description, icon, tier, position, xp_cost, prerequisite_node_id, effect_type, effect_value, is_capstone)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.branch_id,e.name,e.description,e.icon,e.tier,e.position,e.xp_cost,e.prerequisite_node_id,e.effect_type,e.effect_value,e.is_capstone?1:0]);await ye(),localStorage.setItem(QE,"true"),console.log("Skill tree migration completed successfully")}catch(e){throw console.error("Failed to run skill tree migration:",e),e}}const aw=[{key:"warrior",name:"Warrior",description:"Masters of physical challenges and quest completion",icon:"",primary_stat:"stamina",stat_bonuses:'{"stamina": 3, "health": 2}',xp_bonus_type:"quest",xp_bonus_percent:10,special_ability:"Battlecry",special_ability_desc:"Once per day, complete a quest step instantly"},{key:"mage",name:"Mage",description:"Experts in habits and mental discipline",icon:"",primary_stat:"focus",stat_bonuses:'{"focus": 3, "willpower": 2}',xp_bonus_type:"buff",xp_bonus_percent:10,special_ability:"Arcane Focus",special_ability_desc:"Focus sessions grant 20% more XP"},{key:"ranger",name:"Ranger",description:"Specialists in maintaining streaks and consistency",icon:"",primary_stat:"willpower",stat_bonuses:'{"willpower": 3, "stamina": 1, "focus": 1}',xp_bonus_type:"streak",xp_bonus_percent:10,special_ability:"Tracking",special_ability_desc:"Streaks are protected for 1 extra day"},{key:"paladin",name:"Paladin",description:"Champions of boss battles and weekly challenges",icon:"",primary_stat:"health",stat_bonuses:'{"health": 2, "willpower": 2, "charisma": 1}',xp_bonus_type:"boss",xp_bonus_percent:10,special_ability:"Divine Shield",special_ability_desc:"Deal 25% more damage to weekly bosses"}],KE=3,WE="character_class_migration_v1";async function rw(){if(localStorage.getItem(WE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS character_classes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        primary_stat TEXT NOT NULL,
        stat_bonuses TEXT NOT NULL DEFAULT '{}',
        xp_bonus_type TEXT NOT NULL,
        xp_bonus_percent INTEGER NOT NULL DEFAULT 0,
        special_ability TEXT NOT NULL,
        special_ability_desc TEXT NOT NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS character_class_selection (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        class_id INTEGER,
        selected_at TEXT,
        last_changed_at TEXT,
        changes_remaining INTEGER NOT NULL DEFAULT ${KE},
        FOREIGN KEY (class_id) REFERENCES character_classes(id) ON DELETE SET NULL
      )
    `),s.exec("SELECT COUNT(*) FROM character_class_selection")[0].values[0][0]===0&&s.run(`INSERT INTO character_class_selection (id, changes_remaining) VALUES (1, ${KE})`);for(const n of aw)s.run(`INSERT INTO character_classes (key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[n.key,n.name,n.description,n.icon,n.primary_stat,n.stat_bonuses,n.xp_bonus_type,n.xp_bonus_percent,n.special_ability,n.special_ability_desc]);await ye(),localStorage.setItem(WE,"true"),console.log("Character class migration completed successfully")}catch(e){throw console.error("Failed to run character class migration:",e),e}}const ow=[{name:"The Awakening Glade",description:"Where every journey begins. A peaceful clearing filled with morning light.",icon:"",unlock_level:1,background_color:"#22c55e",position_x:50,position_y:80,connected_to:"[2]",challenges:'["Complete your first quest", "Activate 5 buffs", "Reach level 3"]',rewards:'{"xp": 100, "title": "Awakened"}'},{name:"Habit Highlands",description:"Rocky terrain where only consistent habits lead to the summit.",icon:"",unlock_level:5,background_color:"#a3a3a3",position_x:30,position_y:60,connected_to:"[1, 3]",challenges:'["Maintain a 7-day streak", "Complete 10 quests", "Defeat your first boss"]',rewards:'{"xp": 250, "title": "Highland Wanderer"}'},{name:"Focus Forest",description:"Dense woods where only the focused can find their way.",icon:"",unlock_level:10,background_color:"#166534",position_x:70,position_y:50,connected_to:"[2, 4]",challenges:'["Complete 10 focus sessions", "Reach level 15", "Unlock 3 skill nodes"]',rewards:'{"xp": 400, "title": "Forest Pathfinder"}'},{name:"Productivity Plains",description:"Vast open fields where goals are achieved and dreams realized.",icon:"",unlock_level:15,background_color:"#eab308",position_x:50,position_y:35,connected_to:"[3, 5]",challenges:'["Complete 5 goals", "Earn 5000 total XP", "Defeat 5 bosses"]',rewards:'{"xp": 600, "title": "Plains Champion"}'},{name:"Summit of Mastery",description:"The peak where only true masters stand. Your journey culminates here.",icon:"",unlock_level:25,background_color:"#7c3aed",position_x:50,position_y:15,connected_to:"[4]",challenges:'["Reach level 30", "Unlock all capstone skills", "Complete 50 quests"]',rewards:'{"xp": 1000, "title": "Summit Master"}'}],JE="territory_migration_v1";async function lw(){if(localStorage.getItem(JE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS territories (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        unlock_level INTEGER NOT NULL DEFAULT 1,
        background_color TEXT NOT NULL DEFAULT '#333333',
        position_x INTEGER NOT NULL DEFAULT 50,
        position_y INTEGER NOT NULL DEFAULT 50,
        connected_to TEXT NOT NULL DEFAULT '[]',
        challenges TEXT NOT NULL DEFAULT '[]',
        rewards TEXT NOT NULL DEFAULT '{}'
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS territory_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        territory_id INTEGER NOT NULL UNIQUE,
        discovered_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        challenges_completed TEXT NOT NULL DEFAULT '[]',
        is_current INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (territory_id) REFERENCES territories(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_territory_progress_territory ON territory_progress(territory_id)");for(const e of ow)s.run(`INSERT INTO territories (name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.unlock_level,e.background_color,e.position_x,e.position_y,e.connected_to,e.challenges,e.rewards]);s.run("INSERT INTO territory_progress (territory_id, is_current) VALUES (1, 1)"),await ye(),localStorage.setItem(JE,"true"),console.log("Territory migration completed successfully")}catch(e){throw console.error("Failed to run territory migration:",e),e}}const cw=[{name:"Wooden Sword",description:"A basic training sword",icon:"",type:"equipment",slot:"weapon",rarity:"common",stat_effects:'{"stamina": 1}',special_effect:"",stack_limit:1},{name:"Iron Blade",description:"A sturdy iron sword",icon:"",type:"equipment",slot:"weapon",rarity:"uncommon",stat_effects:'{"stamina": 2, "willpower": 1}',special_effect:"",stack_limit:1},{name:"Focus Staff",description:"A staff that enhances concentration",icon:"",type:"equipment",slot:"weapon",rarity:"rare",stat_effects:'{"focus": 3, "willpower": 2}',special_effect:"+5% focus session XP",stack_limit:1},{name:"Dragon Slayer",description:"Legendary weapon forged from dragon scales",icon:"",type:"equipment",slot:"weapon",rarity:"legendary",stat_effects:'{"stamina": 5, "willpower": 3, "health": 2}',special_effect:"+25% boss damage",stack_limit:1},{name:"Leather Vest",description:"Basic protection",icon:"",type:"equipment",slot:"armor",rarity:"common",stat_effects:'{"health": 1}',special_effect:"",stack_limit:1},{name:"Chain Mail",description:"Linked metal rings for defense",icon:"",type:"equipment",slot:"armor",rarity:"uncommon",stat_effects:'{"health": 2, "stamina": 1}',special_effect:"",stack_limit:1},{name:"Mage Robes",description:"Enchanted robes of wisdom",icon:"",type:"equipment",slot:"armor",rarity:"rare",stat_effects:'{"willpower": 3, "focus": 2}',special_effect:"+10% buff duration",stack_limit:1},{name:"Lucky Charm",description:"Brings good fortune",icon:"",type:"equipment",slot:"accessory",rarity:"common",stat_effects:'{"charisma": 1}',special_effect:"",stack_limit:1},{name:"Ring of Focus",description:"Enhances mental clarity",icon:"",type:"equipment",slot:"accessory",rarity:"uncommon",stat_effects:'{"focus": 2}',special_effect:"",stack_limit:1},{name:"Amulet of Persistence",description:"Grants unwavering determination",icon:"",type:"equipment",slot:"accessory",rarity:"rare",stat_effects:'{"willpower": 3, "stamina": 1}',special_effect:"Streaks protected for +1 day",stack_limit:1},{name:"Energy Potion",description:"Restores 25 energy",icon:"",type:"consumable",slot:null,rarity:"common",stat_effects:"{}",special_effect:"restore_energy:25",stack_limit:10},{name:"XP Elixir",description:"Grants 50 bonus XP",icon:"",type:"consumable",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"grant_xp:50",stack_limit:5},{name:"Streak Shield Scroll",description:"Adds a streak shield",icon:"",type:"consumable",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"add_shield:1",stack_limit:3},{name:"First Blood Trophy",description:"Awarded for defeating your first boss",icon:"",type:"trophy",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Streak Champion Medal",description:"Awarded for a 30-day streak",icon:"",type:"trophy",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Mastery Crown",description:"Awarded for reaching level 50",icon:"",type:"trophy",slot:null,rarity:"legendary",stat_effects:"{}",special_effect:"",stack_limit:1}],ZE="inventory_migration_v1";async function uw(){if(localStorage.getItem(ZE))return;const s=ae();try{s.run(`
      CREATE TABLE IF NOT EXISTS item_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        type TEXT NOT NULL,
        slot TEXT,
        rarity TEXT NOT NULL DEFAULT 'common',
        stat_effects TEXT NOT NULL DEFAULT '{}',
        special_effect TEXT NOT NULL DEFAULT '',
        stack_limit INTEGER NOT NULL DEFAULT 1
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS inventory (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        item_id INTEGER NOT NULL,
        quantity INTEGER NOT NULL DEFAULT 1,
        acquired_at TEXT NOT NULL DEFAULT (datetime('now')),
        source TEXT NOT NULL DEFAULT 'unknown',
        FOREIGN KEY (item_id) REFERENCES item_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS equipped_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        slot TEXT NOT NULL UNIQUE,
        inventory_id INTEGER NOT NULL,
        equipped_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (inventory_id) REFERENCES inventory(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_inventory_item ON inventory(item_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_equipped_items_slot ON equipped_items(slot)");for(const e of cw)s.run(`INSERT INTO item_definitions (name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.type,e.slot,e.rarity,e.stat_effects,e.special_effect,e.stack_limit]);s.run("INSERT INTO inventory (item_id, source) VALUES (1, 'starter')"),s.run("INSERT INTO inventory (item_id, source) VALUES (5, 'starter')"),s.run("INSERT INTO inventory (item_id, quantity, source) VALUES (12, 3, 'starter')"),await ye(),localStorage.setItem(ZE,"true"),console.log("Inventory migration completed successfully")}catch(e){throw console.error("Failed to run inventory migration:",e),e}}function dw(){const[s,e]=L.useState(!1),[n,a]=L.useState(null);return L.useEffect(()=>{IN().then(async()=>{await kN(),await LN(),await DN(),await ON(),await jN(),await MN(),await BN(),await FN(),await XN(),await YN(),await KN(),await WN(),await tw(),await iw(),await rw(),await lw(),await uw(),e(!0)}).catch(o=>a(o.message))},[]),{ready:s,error:n}}function ev(){const e=ae().exec("SELECT id, name, total_xp, level, title, created_at FROM character WHERE id = 1");if(!e.length)throw new Error("Character not found");const n=e[0].values[0];return{id:n[0],name:n[1],total_xp:n[2],level:n[3],title:n[4],created_at:n[5]}}async function fw(s){ae().run("UPDATE character SET name = ? WHERE id = 1",[s]),await ye()}function tv(s=50){const n=ae().exec(`SELECT id, amount, reason, source_type, source_id, created_at
     FROM xp_log ORDER BY created_at DESC LIMIT ?`,[s]);return n.length?n[0].values.map(a=>({id:a[0],amount:a[1],reason:a[2],source_type:a[3],source_id:a[4],created_at:a[5]})):[]}const FT=["stamina","willpower","health","focus","charisma"],lr=["Novice","Apprentice","Journeyman","Adept","Expert","Master","Legend","Dragonborn"],hw={normal:10,important:15,legendary:20},mw=50,pw=200,_w=5,gw=25,yw=1.8,Ew=50;function up(s){return Math.floor(Ew*Math.pow(s,yw))}function vw(s){let e=0;for(let n=1;n<s;n++)e+=up(n);return e}function zT(s){let e=1,n=0;for(;;){if(n+=up(e),s<n)return e;if(e++,e>100)return 100}}function GT(s){const e=zT(s),n=vw(e),a=s-n,o=up(e);return{current:a,needed:o,percentage:Math.min(a/o*100,100)}}function Tw(s){return s>=50?lr[7]:s>=40?lr[6]:s>=30?lr[5]:s>=22?lr[4]:s>=15?lr[3]:s>=10?lr[2]:s>=5?lr[1]:lr[0]}async function bw(s,e,n,a=null){const o=ae(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],v=h+s,_=zT(v),S=Tw(_),A=_>g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[v,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[s,e,n,a]),await ye(),{amount:s,newTotal:v,leveledUp:A,newLevel:_,newTitle:S}}function Sw(){const[s,e]=L.useState(()=>ev()),[n,a]=L.useState(()=>tv()),[o,u]=L.useState(null),[h,g]=L.useState([]),v=L.useCallback(()=>{e(ev()),a(tv())},[]),_=L.useCallback(async(C,B,z,F)=>{const U=await bw(C,B,z,F??null);U.leveledUp&&u({level:U.newLevel,title:U.newTitle});const G=Date.now();return g(Y=>[...Y,{id:G,amount:C}]),setTimeout(()=>g(Y=>Y.filter(se=>se.id!==G)),1500),v(),U},[v]),S=L.useCallback(()=>u(null),[]),A=L.useCallback(async C=>{await fw(C),v()},[v]);return{character:s,xpLog:n,levelUpInfo:o,xpFloats:h,grantXP:_,dismissLevelUp:S,setName:A,refresh:v}}function HT(){const e=ae().exec("SELECT id, name, icon, color FROM domains ORDER BY id");return e.length?e[0].values.map(n=>({id:n[0],name:n[1],icon:n[2],color:n[3]})):[]}function Nw(s,e){const n=ae();let a="SELECT id, domain_id, title, description, status, created_at, completed_at FROM goals WHERE 1=1";const o=[];s&&(a+=" AND domain_id = ?",o.push(s)),e&&(a+=" AND status = ?",o.push(e)),a+=" ORDER BY created_at DESC";const u=n.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],domain_id:h[1],title:h[2],description:h[3],status:h[4],created_at:h[5],completed_at:h[6]})):[]}async function ww(s,e,n=""){const a=ae();a.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[s,e,n]);const o=a.exec("SELECT last_insert_rowid()");return await ye(),o[0].values[0][0]}async function Aw(s,e){const n=ae(),a=new Date().toISOString();n.run("UPDATE goals SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await ye()}function dp(s,e){const n=ae();let a="SELECT id, goal_id, title, description, priority, status, created_at, completed_at FROM quests WHERE 1=1";const o=[];s&&(a+=" AND goal_id = ?",o.push(s)),a+=" ORDER BY created_at DESC";const u=n.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],goal_id:h[1],title:h[2],description:h[3],priority:h[4],status:h[5],created_at:h[6],completed_at:h[7]})):[]}async function Rw(s,e,n="",a="normal"){const o=ae();o.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[s,e,n,a]);const u=o.exec("SELECT last_insert_rowid()");return await ye(),u[0].values[0][0]}async function xw(s,e){const n=ae(),a=new Date().toISOString();n.run("UPDATE quests SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await ye()}function fp(s){const n=ae().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at FROM steps WHERE quest_id = ? ORDER BY sort_order, id",[s]);return n.length?n[0].values.map(a=>({id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6]})):[]}async function Cw(s,e,n="normal"){const a=ae(),u=a.exec("SELECT COALESCE(MAX(sort_order), 0) FROM steps WHERE quest_id = ?",[s])[0].values[0][0]+1;a.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[s,e,n,u]);const h=a.exec("SELECT last_insert_rowid()");return await ye(),h[0].values[0][0]}async function Iw(s){ae().run("UPDATE steps SET status = 'completed', completed_at = datetime('now') WHERE id = ?",[s]),await ye()}async function kw(s){ae().run("UPDATE steps SET status = 'pending', completed_at = NULL WHERE id = ?",[s]),await ye()}async function Lw(s){ae().run("DELETE FROM steps WHERE id = ?",[s]),await ye()}async function Dw(s){const e=ae();e.run("DELETE FROM steps WHERE quest_id = ?",[s]),e.run("DELETE FROM quests WHERE id = ?",[s]),await ye()}async function Ow(s){const e=ae(),n=dp(s);for(const a of n)e.run("DELETE FROM steps WHERE quest_id = ?",[a.id]);e.run("DELETE FROM quests WHERE goal_id = ?",[s]),e.run("DELETE FROM goals WHERE id = ?",[s]),await ye()}function jw(s){const n=ae().exec(`SELECT q.id, q.goal_id, q.title, q.description, q.priority, q.status, q.created_at, q.completed_at,
            d.name as domain_name, d.icon as domain_icon, d.color as domain_color, g.title as goal_title
     FROM quests q
     JOIN goals g ON q.goal_id = g.id
     JOIN domains d ON g.domain_id = d.id
     WHERE q.id = ?`,[s]);if(!n.length)return null;const a=n[0].values[0];return{id:a[0],goal_id:a[1],title:a[2],description:a[3],priority:a[4],status:a[5],created_at:a[6],completed_at:a[7],domain_name:a[8],domain_icon:a[9],domain_color:a[10],goal_title:a[11],steps:fp(s)}}function Mw(s,e){const n=Nw(s,e),a=HT(),o=new Map(a.map(u=>[u.id,u]));return n.map(u=>{const h=o.get(u.domain_id),g=dp(u.id).map(v=>({...v,steps:fp(v.id),domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color,goal_title:u.title}));return{...u,quests:g,domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color}})}function Uw({grantXP:s,onStepComplete:e,onQuestComplete:n,onGoalComplete:a}){const[o,u]=L.useState([]),[h]=L.useState(()=>HT()),[g,v]=L.useState(void 0),[_,S]=L.useState("active"),A=L.useCallback(()=>{u(Mw(g,_))},[g,_]);L.useEffect(()=>{A()},[A]);const C=L.useCallback(async(re,_e,ve)=>{await ww(re,_e,ve),A()},[A]),B=L.useCallback(async(re,_e,ve,j)=>{await Rw(re,_e,ve,j),A()},[A]),z=L.useCallback(async(re,_e,ve)=>{await Cw(re,_e,ve),A()},[A]),F=L.useCallback(async(re,_e,ve)=>{await Iw(re);const j=hw[ve]||10;await s(j,"Completed step","step",re),e&&e();const D=fp(_e);if(D.every(V=>V.status==="completed")&&D.length>0){await xw(_e,"completed"),await s(mw,"Completed quest","quest",_e),n&&n();const V=jw(_e);V&&dp(V.goal_id).every(k=>k.status==="completed")&&(await Aw(V.goal_id,"completed"),await s(pw,"Completed goal","goal",V.goal_id),a&&a())}A()},[A,s,e,n,a]),U=L.useCallback(async re=>{await kw(re),A()},[A]),G=L.useCallback(async re=>{await Lw(re),A()},[A]),Y=L.useCallback(async re=>{await Dw(re),A()},[A]),se=L.useCallback(async re=>{await Ow(re),A()},[A]);return{goals:o,domains:h,filterDomain:g,filterStatus:_,setFilterDomain:v,setFilterStatus:S,refresh:A,createGoal:C,createQuest:B,createStep:z,completeStep:F,uncompleteStep:U,deleteStep:G,deleteQuest:Y,deleteGoal:se}}function Vw(s){const e=ae();let n="SELECT id, name, description, type, icon, duration_hours, stat_effects, created_at FROM buff_definitions";const a=[];n+=" ORDER BY name";const o=e.exec(n,a);return o.length?o[0].values.map(u=>({id:u[0],name:u[1],description:u[2],type:u[3],icon:u[4],duration_hours:u[5],stat_effects:u[6],created_at:u[7]})):[]}async function qw(s,e,n,a,o,u){const h=ae();h.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[s,e,n,a,o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ye(),g[0].values[0][0]}async function Bw(s){const e=ae();e.run("DELETE FROM buff_log WHERE definition_id = ?",[s]),e.run("DELETE FROM buff_definitions WHERE id = ?",[s]),await ye()}async function Pw(s){const e=ae(),n=e.exec("SELECT duration_hours FROM buff_definitions WHERE id = ?",[s]);if(!n.length)throw new Error("Buff definition not found");const a=n[0].values[0][0],o=e.exec(`SELECT id, expires_at FROM buff_log
     WHERE definition_id = ? AND is_active = 1 AND expires_at > datetime('now')
     ORDER BY expires_at DESC LIMIT 1`,[s]);if(o.length&&o[0].values.length){const _=o[0].values[0][0];e.run(`UPDATE buff_log SET expires_at = datetime(expires_at, '+' || ? || ' hours')
       WHERE id = ?`,[a,_]);const A=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[_])[0].values[0][0];return await ye(),{logId:_,isStacked:!0,newExpiresAt:A}}e.run(`INSERT INTO buff_log (definition_id, expires_at)
     VALUES (?, datetime('now', '+' || ? || ' hours'))`,[s,a]);const h=e.exec("SELECT last_insert_rowid()")[0].values[0][0],v=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[h])[0].values[0][0];return await ye(),{logId:h,isStacked:!1,newExpiresAt:v}}async function Fw(s){ae().run("UPDATE buff_log SET is_active = 0 WHERE id = ?",[s]),await ye()}function zw(s){const n=ae().exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-30 days')
     ORDER BY d DESC`,[s]);if(!n.length)return 0;let a=0;const o=new Date().toISOString().split("T")[0],u=n[0].values.map(v=>v[0]),h=new Date(Date.now()-864e5).toISOString().split("T")[0];if(!u.includes(o)&&!u.includes(h))return 0;let g=u.includes(o)?o:h;for(const v of u)if(v===g){a++;const _=new Date(g+"T00:00:00");_.setDate(_.getDate()-1),g=_.toISOString().split("T")[0]}return a}function Ld(s){try{return JSON.parse(s)}catch{return{}}}async function Gw(){ae().run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1 AND expires_at <= datetime('now')"),await ye()}function Hw(){const e=ae().exec(`
    SELECT bl.id, bl.definition_id, bl.activated_at, bl.expires_at, bl.is_active,
           bd.name, bd.description, bd.type, bd.icon, bd.stat_effects
    FROM buff_log bl
    JOIN buff_definitions bd ON bl.definition_id = bd.id
    WHERE bl.is_active = 1 AND bl.expires_at > datetime('now')
    ORDER BY bl.activated_at DESC
  `);return e.length?e[0].values.map(n=>({id:n[0],definition_id:n[1],activated_at:n[2],expires_at:n[3],is_active:!!n[4],name:n[5],description:n[6],type:n[7],icon:n[8],stat_effects:n[9]})):[]}function Xw(s){const e={stamina:10,willpower:10,health:10,focus:10,charisma:10};for(const n of s){const a=Ld(n.stat_effects);for(const[o,u]of Object.entries(a))o in e&&(e[o]+=u)}return e}function Yw({grantXP:s,scheduleBuffExpiry:e,cancelBuffExpiry:n,onBuffActivated:a}){const[o,u]=L.useState([]),[h,g]=L.useState([]),[v,_]=L.useState({stamina:10,willpower:10,health:10,focus:10,charisma:10}),S=L.useCallback(async()=>{await Gw(),u(Vw());const F=Hw();g(F),_(Xw(F))},[]);L.useEffect(()=>{const F=setInterval(S,6e4);return()=>clearInterval(F)},[S]);const A=L.useCallback(async(F,U,G,Y,se,re)=>{await qw(F,U,G,Y,se,re),S()},[S]),C=L.useCallback(async F=>{await Bw(F),S()},[S]),B=L.useCallback(async F=>{const U=await Pw(F),G=o.find(se=>se.id===F),Y=G&&G.stat_effects&&G.stat_effects!=="{}"&&(()=>{try{const se=JSON.parse(G.stat_effects);return Object.values(se).some(re=>re!==0)}catch{return!1}})();if(G&&G.type==="buff"&&!U.isStacked&&Y){await s(_w,`Activated buff: ${G.name}`,"buff",U.logId);const se=zw(F);se>0&&se%7===0&&await s(gw,`7-day streak: ${G.name}`,"streak",F)}G&&a&&Y&&a(G.type),G&&e&&(U.isStacked&&n&&await n(U.logId),await e(U.logId,G.name,G.type,U.newExpiresAt)),S()},[S,o,s,e,n,a]),z=L.useCallback(async F=>{n&&await n(F),await Fw(F),S()},[S,n]);return{definitions:o,activeBuffs:h,stats:v,refresh:S,createDefinition:A,deleteDefinition:C,activateBuff:B,deactivateBuff:z}}const $w=1440*60*1e3,XT="Goal Game Backup",Bc="github_gist_token",Ea="github_gist_id",Dd="github_last_backup";function Qw(){return!!localStorage.getItem(Bc)}function YT(){return!!localStorage.getItem(Bc)}function Od(){return localStorage.getItem(Bc)}function Kw(s){localStorage.setItem(Bc,s)}function Ww(){localStorage.removeItem(Bc),localStorage.removeItem(Ea),localStorage.removeItem(Dd)}function Jw(){const s=localStorage.getItem(Dd);return s?Date.now()-Number(s)>$w:!0}function $T(){const s=localStorage.getItem(Dd);return s?new Date(Number(s)):null}function Zw(s){let e="";for(let n=0;n<s.length;n++)e+=String.fromCharCode(s[n]);return btoa(e)}function eA(s){const e=atob(s),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n}async function QT(s){try{const e=await fetch("https://api.github.com/gists?per_page=100",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!e.ok)return null;const n=await e.json();for(const a of n)if(a.description===XT)return a.id;return null}catch{return null}}async function tA(s){const e=localStorage.getItem(Ea);if(e){if((await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok)return e;localStorage.removeItem(Ea)}const n=await QT(s);if(n)return localStorage.setItem(Ea,n),n;const a=await fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({description:XT,public:!1,files:{"README.md":{content:`# Goal Game Backups

This gist contains automatic backups of your Goal Game data.

Backups are stored as base64-encoded database files.`}}})});if(!a.ok)throw new Error("Failed to create backup gist");const o=await a.json();return localStorage.setItem(Ea,o.id),o.id}async function KT(s){const e=Od();if(!e)return{success:!1,error:"Not authenticated"};try{const n=await tA(e),o=`backup-${new Date().toISOString().replace(/[:.]/g,"-")}.db.b64`,u=Zw(s),h=await fetch(`https://api.github.com/gists/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:{[o]:{content:u}}})});return h.ok?(localStorage.setItem(Dd,String(Date.now())),{success:!0,fileName:o}):{success:!1,error:(await h.json()).message||"Upload failed"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function WT(){const s=Od();if(!s)return[];let e=localStorage.getItem(Ea);if(!e)if(e=await QT(s),e)localStorage.setItem(Ea,e);else return[];try{const n=await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!n.ok)return[];const a=await n.json(),o=[];for(const[u,h]of Object.entries(a.files))u.endsWith(".db.b64")&&o.push({fileName:u,size:h.size});return o.sort((u,h)=>h.fileName.localeCompare(u.fileName))}catch{return[]}}async function nA(s){const e=Od();if(!e)return null;const n=localStorage.getItem(Ea);if(!n)return null;try{const a=await fetch(`https://api.github.com/gists/${n}`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json"}});if(!a.ok)return null;const u=(await a.json()).files[s];if(!u)return null;let h;return u.truncated?h=await(await fetch(u.raw_url,{headers:{Authorization:`Bearer ${e}`}})).text():h=u.content,eA(h)}catch{return null}}async function sA(s){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok}catch{return!1}}async function JT(s=7){const e=Od();if(!e)return;const n=localStorage.getItem(Ea);if(n)try{const a=await WT();if(a.length<=s)return;const o=a.slice(s),u={};for(const h of o)u[h.fileName]=null;await fetch(`https://api.github.com/gists/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:u})})}catch{}}function iA(){const[s,e]=L.useState("idle"),[n,a]=L.useState(null),[o,u]=L.useState(""),h=L.useRef(!1);return L.useEffect(()=>{if(h.current)return;h.current=!0;const v=setTimeout(async()=>{if(Qw()&&YT()){if(!Jw()){a($T());return}e("backing-up"),u("Auto-backing up to GitHub...");try{const _=await cp(),S=await KT(_);S.success?(e("success"),u("Auto-backup complete!"),a(new Date),await JT(7),setTimeout(()=>{e("idle"),u("")},5e3)):(e("error"),u(`Auto-backup failed: ${S.error}`))}catch(_){e("error"),u(`Auto-backup failed: ${_ instanceof Error?_.message:"Unknown error"}`)}}},3e3);return()=>clearTimeout(v)},[]),{status:s,lastBackup:n,message:o}}const aA=()=>{};var nv={};const ZT=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},rA=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],g=s[n++],v=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const u=s[n++],h=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,v=o+2<s.length,_=v?s[o+2]:0,S=u>>2,A=(u&3)<<4|g>>4;let C=(g&15)<<2|_>>6,B=_&63;v||(B=64,h||(C=64)),a.push(n[S],n[A],n[C],n[B])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ZT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):rA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const A=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||_==null||A==null)throw new oA;const C=u<<2|g>>4;if(a.push(C),_!==64){const B=g<<4&240|_>>2;if(a.push(B),A!==64){const z=_<<6&192|A;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(s){const e=ZT(s);return eb.encodeByteArray(e,!0)},dd=function(s){return lA(s).replace(/\./g,"")},cA=function(s){try{return eb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const dA=()=>uA().__FIREBASE_DEFAULTS__,fA=()=>{if(typeof process>"u"||typeof nv>"u")return;const s=nv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&cA(s[1]);return e&&JSON.parse(e)},hp=()=>{try{return aA()||dA()||fA()||hA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},mA=s=>hp()?.emulatorHosts?.[s],pA=s=>{const e=mA(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},tb=()=>hp()?.config;class _A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function mp(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gA(s){return(await fetch(s,{credentials:"include"})).ok}function yA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[dd(JSON.stringify(n)),dd(JSON.stringify(h)),""].join(".")}const Ac={};function EA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?s.emulator.push(e):s.prod.push(e);return s}function vA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let sv=!1;function TA(s,e){if(typeof window>"u"||typeof document>"u"||!mp(window.location.host)||Ac[s]===e||Ac[s]||sv)return;Ac[s]=e;function n(C){return`__firebase__banner__${C}`}const a="__firebase__banner",u=EA().prod.length>0;function h(){const C=document.getElementById(a);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function v(C,B){C.setAttribute("width","24"),C.setAttribute("id",B),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{sv=!0,h()},C}function S(C,B){C.setAttribute("id",B),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function A(){const C=vA(a),B=n("text"),z=document.getElementById(B)||document.createElement("span"),F=n("learnmore"),U=document.getElementById(F)||document.createElement("a"),G=n("preprendIcon"),Y=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const se=C.element;g(se),S(U,F);const re=_();v(Y,G),se.append(Y,z,U,re),document.body.appendChild(se)}u?(z.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function bA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SA(){const s=hp()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NA(){return!SA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function sb(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function wA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const AA="FirebaseError";class oo extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=AA,Object.setPrototypeOf(this,oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jd.prototype.create)}}class jd{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?RA(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new oo(o,g,a)}}function RA(s,e){return s.replace(xA,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const xA=/\{\$([^}]+)}/g;function fd(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],h=e[o];if(iv(u)&&iv(h)){if(!fd(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function iv(s){return s!==null&&typeof s=="object"}function Sa(s){return s&&s._delegate?s._delegate:s}class Na{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zr="[DEFAULT]";class CA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new _A;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kA(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:IA(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(s){return s===Zr?void 0:s}function kA(s){return s.instantiationMode==="EAGER"}class LA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Et;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Et||(Et={}));const DA={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},OA=Et.INFO,jA={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},MA=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=jA[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ib{constructor(e){this.name=e,this._logLevel=OA,this._logHandler=MA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const UA=(s,e)=>e.some(n=>s instanceof n);let av,rv;function VA(){return av||(av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qA(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ab=new WeakMap,jm=new WeakMap,rb=new WeakMap,um=new WeakMap,pp=new WeakMap;function BA(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Ta(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&ab.set(n,s)}).catch(()=>{}),pp.set(e,s),e}function PA(s){if(jm.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});jm.set(s,e)}let Mm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return jm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||rb.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ta(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function FA(s){Mm=s(Mm)}function zA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(dm(this),e,...n);return rb.set(a,e.sort?e.sort():[e]),Ta(a)}:qA().includes(s)?function(...e){return s.apply(dm(this),e),Ta(ab.get(this))}:function(...e){return Ta(s.apply(dm(this),e))}}function GA(s){return typeof s=="function"?zA(s):(s instanceof IDBTransaction&&PA(s),UA(s,VA())?new Proxy(s,Mm):s)}function Ta(s){if(s instanceof IDBRequest)return BA(s);if(um.has(s))return um.get(s);const e=GA(s);return e!==s&&(um.set(s,e),pp.set(e,s)),e}const dm=s=>pp.get(s);function Md(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=Ta(h);return a&&h.addEventListener("upgradeneeded",v=>{a(Ta(h.result),v.oldVersion,v.newVersion,Ta(h.transaction),v)}),n&&h.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{u&&v.addEventListener("close",()=>u()),o&&v.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}function fm(s,{blocked:e}={}){const n=indexedDB.deleteDatabase(s);return e&&n.addEventListener("blocked",a=>e(a.oldVersion,a)),Ta(n).then(()=>{})}const HA=["get","getKey","getAll","getAllKeys","count"],XA=["put","add","delete","clear"],hm=new Map;function ov(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=XA.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||HA.includes(n)))return;const u=async function(h,...g){const v=this.transaction(h,o?"readwrite":"readonly");let _=v.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),o&&v.done]))[0]};return hm.set(e,u),u}FA(s=>({...s,get:(e,n,a)=>ov(e,n)||s.get(e,n,a),has:(e,n)=>!!ov(e,n)||s.has(e,n)}));class YA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($A(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function $A(s){return s.getComponent()?.type==="VERSION"}const Um="@firebase/app",lv="0.14.7";const wa=new ib("@firebase/app"),QA="@firebase/app-compat",KA="@firebase/analytics-compat",WA="@firebase/analytics",JA="@firebase/app-check-compat",ZA="@firebase/app-check",eR="@firebase/auth",tR="@firebase/auth-compat",nR="@firebase/database",sR="@firebase/data-connect",iR="@firebase/database-compat",aR="@firebase/functions",rR="@firebase/functions-compat",oR="@firebase/installations",lR="@firebase/installations-compat",cR="@firebase/messaging",uR="@firebase/messaging-compat",dR="@firebase/performance",fR="@firebase/performance-compat",hR="@firebase/remote-config",mR="@firebase/remote-config-compat",pR="@firebase/storage",_R="@firebase/storage-compat",gR="@firebase/firestore",yR="@firebase/ai",ER="@firebase/firestore-compat",vR="firebase",TR="12.8.0";const Vm="[DEFAULT]",bR={[Um]:"fire-core",[QA]:"fire-core-compat",[WA]:"fire-analytics",[KA]:"fire-analytics-compat",[ZA]:"fire-app-check",[JA]:"fire-app-check-compat",[eR]:"fire-auth",[tR]:"fire-auth-compat",[nR]:"fire-rtdb",[sR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[aR]:"fire-fn",[rR]:"fire-fn-compat",[oR]:"fire-iid",[lR]:"fire-iid-compat",[cR]:"fire-fcm",[uR]:"fire-fcm-compat",[dR]:"fire-perf",[fR]:"fire-perf-compat",[hR]:"fire-rc",[mR]:"fire-rc-compat",[pR]:"fire-gcs",[_R]:"fire-gcs-compat",[gR]:"fire-fst",[ER]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[vR]:"fire-js-all"};const hd=new Map,SR=new Map,qm=new Map;function cv(s,e){try{s.container.addComponent(e)}catch(n){wa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function pr(s){const e=s.name;if(qm.has(e))return wa.debug(`There were multiple attempts to register component ${e}.`),!1;qm.set(e,s);for(const n of hd.values())cv(n,s);for(const n of SR.values())cv(n,s);return!0}function Ud(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function NR(s){return s==null?!1:s.settings!==void 0}const wR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new jd("app","Firebase",wR);class AR{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}const RR=TR;function ob(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Vm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw dr.create("bad-app-name",{appName:String(o)});if(n||(n=tb()),!n)throw dr.create("no-options");const u=hd.get(o);if(u){if(fd(n,u.options)&&fd(a,u.config))return u;throw dr.create("duplicate-app",{appName:o})}const h=new LA(o);for(const v of qm.values())h.addComponent(v);const g=new AR(n,a,h);return hd.set(o,g),g}function lb(s=Vm){const e=hd.get(s);if(!e&&s===Vm&&tb())return ob();if(!e)throw dr.create("no-app",{appName:s});return e}function Vi(s,e,n){let a=bR[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wa.warn(h.join(" "));return}pr(new Na(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const xR="firebase-heartbeat-database",CR=1,kc="firebase-heartbeat-store";let mm=null;function cb(){return mm||(mm=Md(xR,CR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(kc)}catch(n){console.warn(n)}}}}).catch(s=>{throw dr.create("idb-open",{originalErrorMessage:s.message})})),mm}async function IR(s){try{const n=(await cb()).transaction(kc),a=await n.objectStore(kc).get(ub(s));return await n.done,a}catch(e){if(e instanceof oo)wa.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e?.message});wa.warn(n.message)}}}async function uv(s,e){try{const a=(await cb()).transaction(kc,"readwrite");await a.objectStore(kc).put(e,ub(s)),await a.done}catch(n){if(n instanceof oo)wa.warn(n.message);else{const a=dr.create("idb-set",{originalErrorMessage:n?.message});wa.warn(a.message)}}}function ub(s){return`${s.name}!${s.options.appId}`}const kR=1024,LR=30;class DR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jR(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=dv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>LR){const o=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dv(),{heartbeatsToSend:n,unsentEntries:a}=OR(this._heartbeatsCache.heartbeats),o=dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wa.warn(e),""}}}function dv(){return new Date().toISOString().substring(0,10)}function OR(s,e=kR){const n=[];let a=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),fv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),fv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class jR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?sb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return uv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return uv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function fv(s){return dd(JSON.stringify({version:2,heartbeats:s})).length}function MR(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function UR(s){pr(new Na("platform-logger",e=>new YA(e),"PRIVATE")),pr(new Na("heartbeat",e=>new DR(e),"PRIVATE")),Vi(Um,lv,s),Vi(Um,lv,"esm2020"),Vi("fire-js","")}UR("");var VR="firebase",qR="12.8.0";Vi(VR,qR,"app");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fr,db;(function(){var s;function e(j,D){function M(){}M.prototype=D.prototype,j.F=D.prototype,j.prototype=new M,j.prototype.constructor=j,j.D=function(V,w,O){for(var k=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)k[Ce-2]=arguments[Ce];return D.prototype[w].apply(V,k)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,D,M){M||(M=0);const V=Array(16);if(typeof D=="string")for(var w=0;w<16;++w)V[w]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(w=0;w<16;++w)V[w]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=j.g[0],M=j.g[1],w=j.g[2];let O=j.g[3],k;k=D+(O^M&(w^O))+V[0]+3614090360&4294967295,D=M+(k<<7&4294967295|k>>>25),k=O+(w^D&(M^w))+V[1]+3905402710&4294967295,O=D+(k<<12&4294967295|k>>>20),k=w+(M^O&(D^M))+V[2]+606105819&4294967295,w=O+(k<<17&4294967295|k>>>15),k=M+(D^w&(O^D))+V[3]+3250441966&4294967295,M=w+(k<<22&4294967295|k>>>10),k=D+(O^M&(w^O))+V[4]+4118548399&4294967295,D=M+(k<<7&4294967295|k>>>25),k=O+(w^D&(M^w))+V[5]+1200080426&4294967295,O=D+(k<<12&4294967295|k>>>20),k=w+(M^O&(D^M))+V[6]+2821735955&4294967295,w=O+(k<<17&4294967295|k>>>15),k=M+(D^w&(O^D))+V[7]+4249261313&4294967295,M=w+(k<<22&4294967295|k>>>10),k=D+(O^M&(w^O))+V[8]+1770035416&4294967295,D=M+(k<<7&4294967295|k>>>25),k=O+(w^D&(M^w))+V[9]+2336552879&4294967295,O=D+(k<<12&4294967295|k>>>20),k=w+(M^O&(D^M))+V[10]+4294925233&4294967295,w=O+(k<<17&4294967295|k>>>15),k=M+(D^w&(O^D))+V[11]+2304563134&4294967295,M=w+(k<<22&4294967295|k>>>10),k=D+(O^M&(w^O))+V[12]+1804603682&4294967295,D=M+(k<<7&4294967295|k>>>25),k=O+(w^D&(M^w))+V[13]+4254626195&4294967295,O=D+(k<<12&4294967295|k>>>20),k=w+(M^O&(D^M))+V[14]+2792965006&4294967295,w=O+(k<<17&4294967295|k>>>15),k=M+(D^w&(O^D))+V[15]+1236535329&4294967295,M=w+(k<<22&4294967295|k>>>10),k=D+(w^O&(M^w))+V[1]+4129170786&4294967295,D=M+(k<<5&4294967295|k>>>27),k=O+(M^w&(D^M))+V[6]+3225465664&4294967295,O=D+(k<<9&4294967295|k>>>23),k=w+(D^M&(O^D))+V[11]+643717713&4294967295,w=O+(k<<14&4294967295|k>>>18),k=M+(O^D&(w^O))+V[0]+3921069994&4294967295,M=w+(k<<20&4294967295|k>>>12),k=D+(w^O&(M^w))+V[5]+3593408605&4294967295,D=M+(k<<5&4294967295|k>>>27),k=O+(M^w&(D^M))+V[10]+38016083&4294967295,O=D+(k<<9&4294967295|k>>>23),k=w+(D^M&(O^D))+V[15]+3634488961&4294967295,w=O+(k<<14&4294967295|k>>>18),k=M+(O^D&(w^O))+V[4]+3889429448&4294967295,M=w+(k<<20&4294967295|k>>>12),k=D+(w^O&(M^w))+V[9]+568446438&4294967295,D=M+(k<<5&4294967295|k>>>27),k=O+(M^w&(D^M))+V[14]+3275163606&4294967295,O=D+(k<<9&4294967295|k>>>23),k=w+(D^M&(O^D))+V[3]+4107603335&4294967295,w=O+(k<<14&4294967295|k>>>18),k=M+(O^D&(w^O))+V[8]+1163531501&4294967295,M=w+(k<<20&4294967295|k>>>12),k=D+(w^O&(M^w))+V[13]+2850285829&4294967295,D=M+(k<<5&4294967295|k>>>27),k=O+(M^w&(D^M))+V[2]+4243563512&4294967295,O=D+(k<<9&4294967295|k>>>23),k=w+(D^M&(O^D))+V[7]+1735328473&4294967295,w=O+(k<<14&4294967295|k>>>18),k=M+(O^D&(w^O))+V[12]+2368359562&4294967295,M=w+(k<<20&4294967295|k>>>12),k=D+(M^w^O)+V[5]+4294588738&4294967295,D=M+(k<<4&4294967295|k>>>28),k=O+(D^M^w)+V[8]+2272392833&4294967295,O=D+(k<<11&4294967295|k>>>21),k=w+(O^D^M)+V[11]+1839030562&4294967295,w=O+(k<<16&4294967295|k>>>16),k=M+(w^O^D)+V[14]+4259657740&4294967295,M=w+(k<<23&4294967295|k>>>9),k=D+(M^w^O)+V[1]+2763975236&4294967295,D=M+(k<<4&4294967295|k>>>28),k=O+(D^M^w)+V[4]+1272893353&4294967295,O=D+(k<<11&4294967295|k>>>21),k=w+(O^D^M)+V[7]+4139469664&4294967295,w=O+(k<<16&4294967295|k>>>16),k=M+(w^O^D)+V[10]+3200236656&4294967295,M=w+(k<<23&4294967295|k>>>9),k=D+(M^w^O)+V[13]+681279174&4294967295,D=M+(k<<4&4294967295|k>>>28),k=O+(D^M^w)+V[0]+3936430074&4294967295,O=D+(k<<11&4294967295|k>>>21),k=w+(O^D^M)+V[3]+3572445317&4294967295,w=O+(k<<16&4294967295|k>>>16),k=M+(w^O^D)+V[6]+76029189&4294967295,M=w+(k<<23&4294967295|k>>>9),k=D+(M^w^O)+V[9]+3654602809&4294967295,D=M+(k<<4&4294967295|k>>>28),k=O+(D^M^w)+V[12]+3873151461&4294967295,O=D+(k<<11&4294967295|k>>>21),k=w+(O^D^M)+V[15]+530742520&4294967295,w=O+(k<<16&4294967295|k>>>16),k=M+(w^O^D)+V[2]+3299628645&4294967295,M=w+(k<<23&4294967295|k>>>9),k=D+(w^(M|~O))+V[0]+4096336452&4294967295,D=M+(k<<6&4294967295|k>>>26),k=O+(M^(D|~w))+V[7]+1126891415&4294967295,O=D+(k<<10&4294967295|k>>>22),k=w+(D^(O|~M))+V[14]+2878612391&4294967295,w=O+(k<<15&4294967295|k>>>17),k=M+(O^(w|~D))+V[5]+4237533241&4294967295,M=w+(k<<21&4294967295|k>>>11),k=D+(w^(M|~O))+V[12]+1700485571&4294967295,D=M+(k<<6&4294967295|k>>>26),k=O+(M^(D|~w))+V[3]+2399980690&4294967295,O=D+(k<<10&4294967295|k>>>22),k=w+(D^(O|~M))+V[10]+4293915773&4294967295,w=O+(k<<15&4294967295|k>>>17),k=M+(O^(w|~D))+V[1]+2240044497&4294967295,M=w+(k<<21&4294967295|k>>>11),k=D+(w^(M|~O))+V[8]+1873313359&4294967295,D=M+(k<<6&4294967295|k>>>26),k=O+(M^(D|~w))+V[15]+4264355552&4294967295,O=D+(k<<10&4294967295|k>>>22),k=w+(D^(O|~M))+V[6]+2734768916&4294967295,w=O+(k<<15&4294967295|k>>>17),k=M+(O^(w|~D))+V[13]+1309151649&4294967295,M=w+(k<<21&4294967295|k>>>11),k=D+(w^(M|~O))+V[4]+4149444226&4294967295,D=M+(k<<6&4294967295|k>>>26),k=O+(M^(D|~w))+V[11]+3174756917&4294967295,O=D+(k<<10&4294967295|k>>>22),k=w+(D^(O|~M))+V[2]+718787259&4294967295,w=O+(k<<15&4294967295|k>>>17),k=M+(O^(w|~D))+V[9]+3951481745&4294967295,j.g[0]=j.g[0]+D&4294967295,j.g[1]=j.g[1]+(w+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+w&4294967295,j.g[3]=j.g[3]+O&4294967295}a.prototype.v=function(j,D){D===void 0&&(D=j.length);const M=D-this.blockSize,V=this.C;let w=this.h,O=0;for(;O<D;){if(w==0)for(;O<=M;)o(this,j,O),O+=this.blockSize;if(typeof j=="string"){for(;O<D;)if(V[w++]=j.charCodeAt(O++),w==this.blockSize){o(this,V),w=0;break}}else for(;O<D;)if(V[w++]=j[O++],w==this.blockSize){o(this,V),w=0;break}}this.h=w,this.o+=D},a.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var D=1;D<j.length-8;++D)j[D]=0;D=this.o*8;for(var M=j.length-8;M<j.length;++M)j[M]=D&255,D/=256;for(this.v(j),j=Array(16),D=0,M=0;M<4;++M)for(let V=0;V<32;V+=8)j[D++]=this.g[M]>>>V&255;return j};function u(j,D){var M=g;return Object.prototype.hasOwnProperty.call(M,j)?M[j]:M[j]=D(j)}function h(j,D){this.h=D;const M=[];let V=!0;for(let w=j.length-1;w>=0;w--){const O=j[w]|0;V&&O==D||(M[w]=O,V=!1)}this.g=M}var g={};function v(j){return-128<=j&&j<128?u(j,function(D){return new h([D|0],D<0?-1:0)}):new h([j|0],j<0?-1:0)}function _(j){if(isNaN(j)||!isFinite(j))return A;if(j<0)return U(_(-j));const D=[];let M=1;for(let V=0;j>=M;V++)D[V]=j/M|0,M*=4294967296;return new h(D,0)}function S(j,D){if(j.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(j.charAt(0)=="-")return U(S(j.substring(1),D));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=_(Math.pow(D,8));let V=A;for(let O=0;O<j.length;O+=8){var w=Math.min(8,j.length-O);const k=parseInt(j.substring(O,O+w),D);w<8?(w=_(Math.pow(D,w)),V=V.j(w).add(_(k))):(V=V.j(M),V=V.add(_(k)))}return V}var A=v(0),C=v(1),B=v(16777216);s=h.prototype,s.m=function(){if(F(this))return-U(this).m();let j=0,D=1;for(let M=0;M<this.g.length;M++){const V=this.i(M);j+=(V>=0?V:4294967296+V)*D,D*=4294967296}return j},s.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(z(this))return"0";if(F(this))return"-"+U(this).toString(j);const D=_(Math.pow(j,6));var M=this;let V="";for(;;){const w=re(M,D).g;M=G(M,w.j(D));let O=((M.g.length>0?M.g[0]:M.h)>>>0).toString(j);if(M=w,z(M))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},s.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function z(j){if(j.h!=0)return!1;for(let D=0;D<j.g.length;D++)if(j.g[D]!=0)return!1;return!0}function F(j){return j.h==-1}s.l=function(j){return j=G(this,j),F(j)?-1:z(j)?0:1};function U(j){const D=j.g.length,M=[];for(let V=0;V<D;V++)M[V]=~j.g[V];return new h(M,~j.h).add(C)}s.abs=function(){return F(this)?U(this):this},s.add=function(j){const D=Math.max(this.g.length,j.g.length),M=[];let V=0;for(let w=0;w<=D;w++){let O=V+(this.i(w)&65535)+(j.i(w)&65535),k=(O>>>16)+(this.i(w)>>>16)+(j.i(w)>>>16);V=k>>>16,O&=65535,k&=65535,M[w]=k<<16|O}return new h(M,M[M.length-1]&-2147483648?-1:0)};function G(j,D){return j.add(U(D))}s.j=function(j){if(z(this)||z(j))return A;if(F(this))return F(j)?U(this).j(U(j)):U(U(this).j(j));if(F(j))return U(this.j(U(j)));if(this.l(B)<0&&j.l(B)<0)return _(this.m()*j.m());const D=this.g.length+j.g.length,M=[];for(var V=0;V<2*D;V++)M[V]=0;for(V=0;V<this.g.length;V++)for(let w=0;w<j.g.length;w++){const O=this.i(V)>>>16,k=this.i(V)&65535,Ce=j.i(w)>>>16,mt=j.i(w)&65535;M[2*V+2*w]+=k*mt,Y(M,2*V+2*w),M[2*V+2*w+1]+=O*mt,Y(M,2*V+2*w+1),M[2*V+2*w+1]+=k*Ce,Y(M,2*V+2*w+1),M[2*V+2*w+2]+=O*Ce,Y(M,2*V+2*w+2)}for(j=0;j<D;j++)M[j]=M[2*j+1]<<16|M[2*j];for(j=D;j<2*D;j++)M[j]=0;return new h(M,0)};function Y(j,D){for(;(j[D]&65535)!=j[D];)j[D+1]+=j[D]>>>16,j[D]&=65535,D++}function se(j,D){this.g=j,this.h=D}function re(j,D){if(z(D))throw Error("division by zero");if(z(j))return new se(A,A);if(F(j))return D=re(U(j),D),new se(U(D.g),U(D.h));if(F(D))return D=re(j,U(D)),new se(U(D.g),D.h);if(j.g.length>30){if(F(j)||F(D))throw Error("slowDivide_ only works with positive integers.");for(var M=C,V=D;V.l(j)<=0;)M=_e(M),V=_e(V);var w=ve(M,1),O=ve(V,1);for(V=ve(V,2),M=ve(M,2);!z(V);){var k=O.add(V);k.l(j)<=0&&(w=w.add(M),O=k),V=ve(V,1),M=ve(M,1)}return D=G(j,w.j(D)),new se(w,D)}for(w=A;j.l(D)>=0;){for(M=Math.max(1,Math.floor(j.m()/D.m())),V=Math.ceil(Math.log(M)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=_(M),k=O.j(D);F(k)||k.l(j)>0;)M-=V,O=_(M),k=O.j(D);z(O)&&(O=C),w=w.add(O),j=G(j,k)}return new se(w,j)}s.B=function(j){return re(this,j).h},s.and=function(j){const D=Math.max(this.g.length,j.g.length),M=[];for(let V=0;V<D;V++)M[V]=this.i(V)&j.i(V);return new h(M,this.h&j.h)},s.or=function(j){const D=Math.max(this.g.length,j.g.length),M=[];for(let V=0;V<D;V++)M[V]=this.i(V)|j.i(V);return new h(M,this.h|j.h)},s.xor=function(j){const D=Math.max(this.g.length,j.g.length),M=[];for(let V=0;V<D;V++)M[V]=this.i(V)^j.i(V);return new h(M,this.h^j.h)};function _e(j){const D=j.g.length+1,M=[];for(let V=0;V<D;V++)M[V]=j.i(V)<<1|j.i(V-1)>>>31;return new h(M,j.h)}function ve(j,D){const M=D>>5;D%=32;const V=j.g.length-M,w=[];for(let O=0;O<V;O++)w[O]=D>0?j.i(O+M)>>>D|j.i(O+M+1)<<32-D:j.i(O+M);return new h(w,j.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,db=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=S,fr=h}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fb,Sc,hb,id,Bm,mb,pb,_b;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var E=0;E<d.length;++E){var b=d[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=n(this);function o(d,E){if(E)e:{var b=a;d=d.split(".");for(var I=0;I<d.length-1;I++){var J=d[I];if(!(J in b))break e;b=b[J]}d=d[d.length-1],I=b[d],E=E(I),E!=I&&E!=null&&e(b,d,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(E){var b=[],I;for(I in E)Object.prototype.hasOwnProperty.call(E,I)&&b.push([I,E[I]]);return b}});var u=u||{},h=this||self;function g(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function v(d,E,b){return d.call.apply(d.bind,arguments)}function _(d,E,b){return _=v,_.apply(null,arguments)}function S(d,E){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function A(d,E){function b(){}b.prototype=E.prototype,d.Z=E.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(I,J,ie){for(var Ee=Array(arguments.length-2),He=2;He<arguments.length;He++)Ee[He-2]=arguments[He];return E.prototype[J].apply(I,Ee)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function B(d){const E=d.length;if(E>0){const b=Array(E);for(let I=0;I<E;I++)b[I]=d[I];return b}return[]}function z(d,E){for(let I=1;I<arguments.length;I++){const J=arguments[I];var b=typeof J;if(b=b!="object"?b:J?Array.isArray(J)?"array":b:"null",b=="array"||b=="object"&&typeof J.length=="number"){b=d.length||0;const ie=J.length||0;d.length=b+ie;for(let Ee=0;Ee<ie;Ee++)d[b+Ee]=J[Ee]}else d.push(J)}}class F{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function U(d){h.setTimeout(()=>{throw d},0)}function G(){var d=j;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class Y{constructor(){this.h=this.g=null}add(E,b){const I=se.get();I.set(E,b),this.h?this.h.next=I:this.g=I,this.h=I}}var se=new F(()=>new re,d=>d.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,ve=!1,j=new Y,D=()=>{const d=Promise.resolve(void 0);_e=()=>{d.then(M)}};function M(){for(var d;d=G();){try{d.h.call(d.g)}catch(b){U(b)}var E=se;E.j(d),E.h<100&&(E.h++,d.next=E.g,E.g=d)}ve=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,E),h.removeEventListener("test",b,E)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function Ce(d,E){w.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,E)}A(Ce,w),Ce.prototype.init=function(d,E){const b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget,E||(b=="mouseover"?E=d.fromElement:b=="mouseout"&&(E=d.toElement)),this.relatedTarget=E,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),$=0;function ne(d,E,b,I,J){this.listener=d,this.proxy=null,this.src=E,this.type=b,this.capture=!!I,this.ha=J,this.key=++$,this.da=this.fa=!1}function Te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function tt(d,E,b){for(const I in d)E.call(b,d[I],I,d)}function Ze(d,E){for(const b in d)E.call(void 0,d[b],b,d)}function H(d){const E={};for(const b in d)E[b]=d[b];return E}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(d,E){let b,I;for(let J=1;J<arguments.length;J++){I=arguments[J];for(b in I)d[b]=I[b];for(let ie=0;ie<ue.length;ie++)b=ue[ie],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,E,b,I,J){const ie=d.toString();d=this.g[ie],d||(d=this.g[ie]=[],this.h++);const Ee=et(d,E,I,J);return Ee>-1?(E=d[Ee],b||(E.fa=!1)):(E=new ne(E,this.src,ie,!!I,J),E.fa=b,d.push(E)),E};function Ge(d,E){const b=E.type;if(b in d.g){var I=d.g[b],J=Array.prototype.indexOf.call(I,E,void 0),ie;(ie=J>=0)&&Array.prototype.splice.call(I,J,1),ie&&(Te(E),d.g[b].length==0&&(delete d.g[b],d.h--))}}function et(d,E,b,I){for(let J=0;J<d.length;++J){const ie=d[J];if(!ie.da&&ie.listener==E&&ie.capture==!!b&&ie.ha==I)return J}return-1}var at="closure_lm_"+(Math.random()*1e6|0),nn={};function Ut(d,E,b,I,J){if(Array.isArray(E)){for(let ie=0;ie<E.length;ie++)Ut(d,E[ie],b,I,J);return null}return b=ka(b),d&&d[mt]?d.J(E,b,g(I)?!!I.capture:!1,J):Ti(d,E,b,!1,I,J)}function Ti(d,E,b,I,J,ie){if(!E)throw Error("Invalid event type");const Ee=g(J)?!!J.capture:!!J;let He=At(d);if(He||(d[at]=He=new Ne(d)),b=He.add(E,b,I,Ee,ie),b.proxy)return b;if(I=Ca(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)O||(J=Ee),J===void 0&&(J=!1),d.addEventListener(E.toString(),I,J);else if(d.attachEvent)d.attachEvent(Yn(E.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Ca(){function d(b){return E.call(d.src,d.listener,b)}const E=Ia;return d}function Xn(d,E,b,I,J){if(Array.isArray(E))for(var ie=0;ie<E.length;ie++)Xn(d,E[ie],b,I,J);else I=g(I)?!!I.capture:!!I,b=ka(b),d&&d[mt]?(d=d.i,ie=String(E).toString(),ie in d.g&&(E=d.g[ie],b=et(E,b,I,J),b>-1&&(Te(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete d.g[ie],d.h--)))):d&&(d=At(d))&&(E=d.g[E.toString()],d=-1,E&&(d=et(E,b,I,J)),(b=d>-1?E[d]:null)&&bi(b))}function bi(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[mt])Ge(E.i,d);else{var b=d.type,I=d.proxy;E.removeEventListener?E.removeEventListener(b,I,d.capture):E.detachEvent?E.detachEvent(Yn(b),I):E.addListener&&E.removeListener&&E.removeListener(I),(b=At(E))?(Ge(b,d),b.h==0&&(b.src=null,E[at]=null)):Te(d)}}}function Yn(d){return d in nn?nn[d]:nn[d]="on"+d}function Ia(d,E){if(d.da)d=!0;else{E=new Ce(E,this);const b=d.listener,I=d.ha||d.src;d.fa&&bi(d),d=b.call(I,E)}return d}function At(d){return d=d[at],d instanceof Ne?d:null}var Xi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ka(d){return typeof d=="function"?d:(d[Xi]||(d[Xi]=function(E){return d.handleEvent(E)}),d[Xi])}function $t(){V.call(this),this.i=new Ne(this),this.M=this,this.G=null}A($t,V),$t.prototype[mt]=!0,$t.prototype.removeEventListener=function(d,E,b,I){Xn(this,d,E,b,I)};function sn(d,E){var b,I=d.G;if(I)for(b=[];I;I=I.G)b.push(I);if(d=d.M,I=E.type||E,typeof E=="string")E=new w(E,d);else if(E instanceof w)E.target=E.target||d;else{var J=E;E=new w(I,d),be(E,J)}J=!0;let ie,Ee;if(b)for(Ee=b.length-1;Ee>=0;Ee--)ie=E.g=b[Ee],J=As(ie,I,!0,E)&&J;if(ie=E.g=d,J=As(ie,I,!0,E)&&J,J=As(ie,I,!1,E)&&J,b)for(Ee=0;Ee<b.length;Ee++)ie=E.g=b[Ee],J=As(ie,I,!1,E)&&J}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var d=this.i;for(const E in d.g){const b=d.g[E];for(let I=0;I<b.length;I++)Te(b[I]);delete d.g[E],d.h--}}this.G=null},$t.prototype.J=function(d,E,b,I){return this.i.add(String(d),E,!1,b,I)},$t.prototype.K=function(d,E,b,I){return this.i.add(String(d),E,!0,b,I)};function As(d,E,b,I){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();let J=!0;for(let ie=0;ie<E.length;++ie){const Ee=E[ie];if(Ee&&!Ee.da&&Ee.capture==b){const He=Ee.listener,Qt=Ee.ha||Ee.src;Ee.fa&&Ge(d.i,Ee),J=He.call(Qt,I)!==!1&&J}}return J&&!I.defaultPrevented}function Ol(d,E){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:h.setTimeout(d,E||0)}function br(d){d.g=Ol(()=>{d.g=null,d.i&&(d.i=!1,br(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class Dn extends V{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(d){V.call(this),this.h=d,this.g={}}A(li,V);var ci=[];function ss(d){tt(d.g,function(E,b){this.g.hasOwnProperty(b)&&bi(E)},d),d.g={}}li.prototype.N=function(){li.Z.N.call(this),ss(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=h.JSON.stringify,po=h.JSON.parse,Sr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function _o(){}function go(){}var Rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function je(){w.call(this,"d")}A(je,w);function is(){w.call(this,"c")}A(is,w);var Gt={},Nr=null;function xs(){return Nr=Nr||new $t}Gt.Ia="serverreachability";function yo(d){w.call(this,Gt.Ia,d)}A(yo,w);function Tn(d){const E=xs();sn(E,new yo(E))}Gt.STAT_EVENT="statevent";function Si(d,E){w.call(this,Gt.STAT_EVENT,d),this.stat=E}A(Si,w);function Jt(d){const E=xs();sn(E,new Si(E,d))}Gt.Ja="timingevent";function Cs(d,E){w.call(this,Gt.Ja,d),this.size=E}A(Cs,w);function ge(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},E)}function Is(){this.g=!0}Is.prototype.ua=function(){this.g=!1};function jl(d,E,b,I,J,ie){d.info(function(){if(d.g)if(ie){var Ee="",He=ie.split("&");for(let gt=0;gt<He.length;gt++){var Qt=He[gt].split("=");if(Qt.length>1){const Vt=Qt[0];Qt=Qt[1];const K=Vt.split("_");Ee=K.length>=2&&K[1]=="type"?Ee+(Vt+"="+Qt+"&"):Ee+(Vt+"=redacted&")}}}else Ee=null;else Ee=ie;return"XMLHTTP REQ ("+I+") [attempt "+J+"]: "+E+`
`+b+`
`+Ee})}function On(d,E,b,I,J,ie,Ee){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+J+"]: "+E+`
`+b+`
`+ie+" "+Ee})}function ms(d,E,b,I){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+wr(d,b)+(I?" "+I:"")})}function di(d,E){d.info(function(){return"TIMEOUT: "+E})}Is.prototype.info=function(){};function wr(d,E){if(!d.g)return E;if(!E)return null;try{const ie=JSON.parse(E);if(ie){for(d=0;d<ie.length;d++)if(Array.isArray(ie[d])){var b=ie[d];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var J=I[0];if(J!="noop"&&J!="stop"&&J!="close")for(let Ee=1;Ee<I.length;Ee++)I[Ee]=""}}}}return ui(ie)}catch{return E}}var as={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},La={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fn;function Ni(){}A(Ni,_o),Ni.prototype.g=function(){return new XMLHttpRequest},fn=new Ni;function $n(d){return encodeURIComponent(String(d))}function Ar(d){var E=1;d=d.split(":");const b=[];for(;E>0&&d.length;)b.push(d.shift()),E--;return d.length&&b.push(d.join(":")),b}function ps(d,E,b,I){this.j=d,this.i=E,this.l=b,this.S=I||1,this.V=new li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var lt={},on={};function Fs(d,E,b){d.M=1,d.A=Gs(Ct(E)),d.u=b,d.R=!0,wi(d,null)}function wi(d,E){d.F=Date.now(),rs(d),d.B=Ct(d.A);var b=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),gs(b.i,"t",I),d.C=0,b=d.j.L,d.h=new Qn,d.g=Ao(d.j,b?E:null,!d.u),d.P>0&&(d.O=new Dn(_(d.Y,d,d.g),d.P)),E=d.V,b=d.g,I=d.ba;var J="readystatechange";Array.isArray(J)||(J&&(ci[0]=J.toString()),J=ci);for(let ie=0;ie<J.length;ie++){const Ee=Ut(b,J[ie],I||E.handleEvent,!1,E.h||E);if(!Ee)break;E.g[Ee.key]=Ee}E=d.J?H(d.J):{},d.u?(d.v||(d.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,E)):(d.v="GET",d.g.ea(d.B,d.v,null,E)),Tn(),jl(d.i,d.v,d.B,d.l,d.S,d.u)}ps.prototype.ba=function(d){d=d.target;const E=this.O;E&&Ie(d)==3?E.j():this.Y(d)},ps.prototype.Y=function(d){try{if(d==this.g)e:{const He=Ie(this.g),Qt=this.g.ya(),gt=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Me(this.g)))){this.K||He!=4||Qt==7||(Qt==8||gt<=0?Tn(3):Tn(2)),ln(this);var E=this.g.ca();this.X=E;var b=Ml(this);if(this.o=E==200,On(this.i,this.v,this.B,this.l,this.S,He,E),this.o){if(this.U&&!this.L){t:{if(this.g){var I,J=this.g;if((I=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var ie=I;break t}}ie=null}if(d=ie)ms(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ks(this,d);else{this.o=!1,this.m=3,Jt(12),Mn(this),jn(this);break e}}if(this.R){d=!0;let Vt;for(;!this.K&&this.C<b.length;)if(Vt=Rr(this,b),Vt==on){He==4&&(this.m=4,Jt(14),d=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==lt){this.m=4,Jt(15),ms(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else ms(this.i,this.l,Vt,null),ks(this,Vt);if(Da(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||b.length!=0||this.h.h||(this.m=1,Jt(16),d=!1),this.o=this.o&&d,!d)ms(this.i,this.l,b,"[Invalid Chunked Response]"),Mn(this),jn(this);else if(b.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Or(Ee),Ee.P=!0,Jt(11))}}else ms(this.i,this.l,b,null),ks(this,b);He==4&&Mn(this),this.o&&!this.K&&(He==4?jr(this.j,this):(this.o=!1,rs(this)))}else Pe(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Mn(this),jn(this)}}}catch{}};function Ml(d){if(!Da(d))return d.g.la();const E=Me(d.g);if(E==="")return"";let b="";const I=E.length,J=Ie(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Mn(d),jn(d),"";d.h.i=new h.TextDecoder}for(let ie=0;ie<I;ie++)d.h.h=!0,b+=d.h.i.decode(E[ie],{stream:!(J&&ie==I-1)});return E.length=0,d.h.g+=b,d.C=0,d.h.g}function Da(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Rr(d,E){var b=d.C,I=E.indexOf(`
`,b);return I==-1?on:(b=Number(E.substring(b,I)),isNaN(b)?lt:(I+=1,I+b>E.length?on:(E=E.slice(I,I+b),d.C=I+b,E)))}ps.prototype.cancel=function(){this.K=!0,Mn(this)};function rs(d){d.T=Date.now()+d.H,Oa(d,d.H)}function Oa(d,E){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ge(_(d.aa,d),E)}function ln(d){d.D&&(h.clearTimeout(d.D),d.D=null)}ps.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(di(this.i,this.B),this.M!=2&&(Tn(),Jt(17)),Mn(this),this.m=2,jn(this)):Oa(this,this.T-d)};function jn(d){d.j.I==0||d.K||jr(d.j,d)}function Mn(d){ln(d);var E=d.O;E&&typeof E.dispose=="function"&&E.dispose(),d.O=null,ss(d.V),d.g&&(E=d.g,d.g=null,E.abort(),E.dispose())}function ks(d,E){try{var b=d.j;if(b.I!=0&&(b.g==d||Ls(b.h,d))){if(!d.L&&Ls(b.h,d)&&b.I==3){try{var I=b.Ba.g.parse(E)}catch{I=null}if(Array.isArray(I)&&I.length==3){var J=I;if(J[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)qa(b),Ii(b);else break e;ea(b),Jt(18)}}else b.xa=J[1],0<b.xa-b.K&&J[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ge(_(b.Va,b),6e3));os(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ks(b,11)}else if((d.L||b.g==d)&&qa(b),!k(E))for(J=b.Ba.g.parse(E),E=0;E<J.length;E++){let gt=J[E];const Vt=gt[0];if(!(Vt<=b.K))if(b.K=Vt,gt=gt[1],b.I==2)if(gt[0]=="c"){b.M=gt[1],b.ba=gt[2];const K=gt[3];K!=null&&(b.ka=K,b.j.info("VER="+b.ka));const fe=gt[4];fe!=null&&(b.za=fe,b.j.info("SVER="+b.za));const Se=gt[5];Se!=null&&typeof Se=="number"&&Se>0&&(I=1.5*Se,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const Le=d.g;if(Le){const qe=Le.g?Le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qe){var ie=I.h;ie.g||qe.indexOf("spdy")==-1&&qe.indexOf("quic")==-1&&qe.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(zs(ie,ie.h),ie.h=null))}if(I.G){const ct=Le.g?Le.g.getResponseHeader("X-HTTP-Session-Id"):null;ct&&(I.wa=ct,_t(I.J,I.G,ct))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var Ee=d;if(I.na=wo(I,I.L?I.ba:null,I.W),Ee.L){Yi(I.h,Ee);var He=Ee,Qt=I.O;Qt&&(He.H=Qt),He.D&&(ln(He),rs(He)),I.g=Ee}else To(I);b.i.length>0&&Qs(b)}else gt[0]!="stop"&&gt[0]!="close"||Ks(b,7);else b.I==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Ks(b,7):Va(b):gt[0]!="noop"&&b.l&&b.l.qa(gt),b.A=0)}}Tn(4)}catch{}}var Zt=class{constructor(d,E){this.g=d,this.map=E}};function fi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ja(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function os(d){return d.h?1:d.g?d.g.size:0}function Ls(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function zs(d,E){d.g?d.g.add(E):d.h=E}function Yi(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}fi.prototype.cancel=function(){if(this.i=Ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ma(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const b of d.g.values())E=E.concat(b.G);return E}return B(d.i)}var xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $i(d,E){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const I=d[b].indexOf("=");let J,ie=null;I>=0?(J=d[b].substring(0,I),ie=d[b].substring(I+1)):J=d[b],E(J,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function ls(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;d instanceof ls?(this.l=d.l,Qe(this,d.j),this.o=d.o,this.g=d.g,Kn(this,d.u),this.h=d.h,Ai(this,Ua(d.i)),this.m=d.m):d&&(E=String(d).match(xr))?(this.l=!1,Qe(this,E[1]||"",!0),this.o=_s(E[2]||""),this.g=_s(E[3]||"",!0),Kn(this,E[4]),this.h=_s(E[5]||"",!0),Ai(this,E[6]||"",!0),this.m=_s(E[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}ls.prototype.toString=function(){const d=[];var E=this.j;E&&d.push(Qi(E,Hs,!0),":");var b=this.g;return(b||E=="file")&&(d.push("//"),(E=this.o)&&d.push(Qi(E,Hs,!0),"@"),d.push($n(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qi(b,b.charAt(0)=="/"?Ir:Cr,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qi(b,kr)),d.join("")},ls.prototype.resolve=function(d){const E=Ct(this);let b=!!d.j;b?Qe(E,d.j):b=!!d.o,b?E.o=d.o:b=!!d.g,b?E.g=d.g:b=d.u!=null;var I=d.h;if(b)Kn(E,d.u);else if(b=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var J=E.h.lastIndexOf("/");J!=-1&&(I=E.h.slice(0,J+1)+I)}if(J=I,J==".."||J==".")I="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){I=J.lastIndexOf("/",0)==0,J=J.split("/");const ie=[];for(let Ee=0;Ee<J.length;){const He=J[Ee++];He=="."?I&&Ee==J.length&&ie.push(""):He==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),I&&Ee==J.length&&ie.push("")):(ie.push(He),I=!0)}I=ie.join("/")}else I=J}return b?E.h=I:b=d.i.toString()!=="",b?Ai(E,Ua(d.i)):b=!!d.m,b&&(E.m=d.m),E};function Ct(d){return new ls(d)}function Qe(d,E,b){d.j=b?_s(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Kn(d,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);d.u=E}else d.u=null}function Ai(d,E,b){E instanceof Ys?(d.i=E,cs(d.i,d.l)):(b||(E=Qi(E,Xs)),d.i=new Ys(E,d.l))}function _t(d,E,b){d.i.set(E,b)}function Gs(d){return _t(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function _s(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qi(d,E,b){return typeof d=="string"?(d=encodeURI(d).replace(E,Wn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Hs=/[#\/\?@]/g,Cr=/[#\?:]/g,Ir=/[#\?]/g,Xs=/[#\?@]/g,kr=/#/g;function Ys(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function wn(d){d.g||(d.g=new Map,d.h=0,d.i&&$i(d.i,function(E,b){d.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}s=Ys.prototype,s.add=function(d,E){wn(this),this.i=null,d=An(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(E),this.h+=1,this};function Eo(d,E){wn(d),E=An(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function Ri(d,E){return wn(d),E=An(d,E),d.g.has(E)}s.forEach=function(d,E){wn(this),this.g.forEach(function(b,I){b.forEach(function(J){d.call(E,J,I,this)},this)},this)};function xi(d,E){wn(d);let b=[];if(typeof E=="string")Ri(d,E)&&(b=b.concat(d.g.get(An(d,E))));else for(d=Array.from(d.g.values()),E=0;E<d.length;E++)b=b.concat(d[E]);return b}s.set=function(d,E){return wn(this),this.i=null,d=An(this,d),Ri(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},s.get=function(d,E){return d?(d=xi(this,d),d.length>0?String(d[0]):E):E};function gs(d,E,b){Eo(d,E),b.length>0&&(d.i=null,d.g.set(An(d,E),B(b)),d.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(let I=0;I<E.length;I++){var b=E[I];const J=$n(b);b=xi(this,b);for(let ie=0;ie<b.length;ie++){let Ee=J;b[ie]!==""&&(Ee+="="+$n(b[ie])),d.push(Ee)}}return this.i=d.join("&")};function Ua(d){const E=new Ys;return E.i=d.i,d.g&&(E.g=new Map(d.g),E.h=d.h),E}function An(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function cs(d,E){E&&!d.j&&(wn(d),d.i=null,d.g.forEach(function(b,I){const J=I.toLowerCase();I!=J&&(Eo(this,I),gs(this,J,b))},d)),d.j=E}function Un(d,E){const b=new Is;if(h.Image){const I=new Image;I.onload=S(we,b,"TestLoadImage: loaded",!0,E,I),I.onerror=S(we,b,"TestLoadImage: error",!1,E,I),I.onabort=S(we,b,"TestLoadImage: abort",!1,E,I),I.ontimeout=S(we,b,"TestLoadImage: timeout",!1,E,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else E(!1)}function Lr(d,E){const b=new Is,I=new AbortController,J=setTimeout(()=>{I.abort(),we(b,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:I.signal}).then(ie=>{clearTimeout(J),ie.ok?we(b,"TestPingServer: ok",!0,E):we(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),we(b,"TestPingServer: error",!1,E)})}function we(d,E,b,I,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),I(b)}catch{}}function $s(){this.g=new Sr}function us(d){this.i=d.Sb||null,this.h=d.ab||!1}A(us,_o),us.prototype.g=function(){return new Ci(this.i,this.h)};function Ci(d,E){$t.call(this),this.H=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Ci,$t),s=Ci.prototype,s.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=E,this.readyState=1,hn(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(E.body=d),(this.H||h).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,hn(this)),this.g&&(this.readyState=3,hn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ki(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ki(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?ys(this):hn(this),this.readyState==3&&Ki(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,ys(this))},s.Na=function(d){this.g&&(this.response=d,ys(this))},s.ga=function(){this.g&&ys(this)};function ys(d){d.readyState=4,d.l=null,d.j=null,d.B=null,hn(d)}s.setRequestHeader=function(d,E){this.A.append(d,E)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=E.next();return d.join(`\r
`)};function hn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Rn(d){let E="";return tt(d,function(b,I){E+=I,E+=":",E+=b,E+=`\r
`}),E}function hi(d,E,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Rn(b),typeof d=="string"?b!=null&&$n(b):_t(d,E,b))}function m(d){$t.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(m,$t);var y=/^https?$/i,N=["POST","PUT"];s=m.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,E,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fn.g(),this.g.onreadystatechange=C(_(this.Ca,this));try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(ie){x(this,ie);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var J in I)b.set(J,I[J]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ie of I.keys())b.set(ie,I.get(ie));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(N,E,void 0)>=0)||I||J||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ee]of b)this.g.setRequestHeader(ie,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ie){x(this,ie)}};function x(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.o=5,P(d),le(d)}function P(d){d.A||(d.A=!0,sn(d,"complete"),sn(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,sn(this,"complete"),sn(this,"abort"),le(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),le(this,!0)),m.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?W(this):this.Xa())},s.Xa=function(){W(this)};function W(d){if(d.h&&typeof u<"u"){if(d.v&&Ie(d)==4)setTimeout(d.Ca.bind(d),0);else if(sn(d,"readystatechange"),Ie(d)==4){d.h=!1;try{const ie=d.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var I;if(I=ie===0){let Ee=String(d.D).match(xr)[1]||null;!Ee&&h.self&&h.self.location&&(Ee=h.self.location.protocol.slice(0,-1)),I=!y.test(Ee?Ee.toLowerCase():"")}b=I}if(b)sn(d,"complete"),sn(d,"success");else{d.o=6;try{var J=Ie(d)>2?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.ca()+"]",P(d)}}finally{le(d)}}}}function le(d,E){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,E||sn(d,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ie(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Ie(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),po(E)}};function Me(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Pe(d){const E={};d=(d.g&&Ie(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(k(d[I]))continue;var b=Ar(d[I]);const J=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const ie=E[J]||[];E[J]=ie,ie.push(b)}Ze(E,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vt(d,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||E}function en(d){this.za=0,this.i=[],this.j=new Is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vt("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vt("baseRetryDelayMs",5e3,d),this.Za=vt("retryDelaySeedMs",1e4,d),this.Ta=vt("forwardChannelMaxRetries",2,d),this.va=vt("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new fi(d&&d.concurrentRequestLimit),this.Ba=new $s,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=en.prototype,s.ka=8,s.I=1,s.connect=function(d,E,b,I){Jt(0),this.W=d,this.H=E||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=wo(this,null,this.W),Qs(this)};function Va(d){if(Wi(d),d.I==3){var E=d.V++,b=Ct(d.J);if(_t(b,"SID",d.M),_t(b,"RID",E),_t(b,"TYPE","terminate"),Zi(d,b),E=new ps(d,d.j,E),E.M=2,E.A=Gs(Ct(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=E.A,b=!0),b||(E.g=Ao(E.j,null),E.g.ea(E.A)),E.F=Date.now(),rs(E)}No(d)}function Ii(d){d.g&&(Or(d),d.g.cancel(),d.g=null)}function Wi(d){Ii(d),d.v&&(h.clearTimeout(d.v),d.v=null),qa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Qs(d){if(!ja(d.h)&&!d.m){d.m=!0;var E=d.Ea;_e||D(),ve||(_e(),ve=!0),j.add(E,d),d.D=0}}function Ji(d,E){return os(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=E.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ge(_(d.Ea,d,E),So(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const J=new ps(this,this.j,d);let ie=this.o;if(this.U&&(ie?(ie=H(ie),be(ie,this.U)):ie=this.U),this.u!==null||this.R||(J.J=ie,ie=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(E+=I,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=vo(this,J,E),b=Ct(this.J),_t(b,"RID",d),_t(b,"CVER",22),this.G&&_t(b,"X-HTTP-Session-Id",this.G),Zi(this,b),ie&&(this.R?E="headers="+$n(Rn(ie))+"&"+E:this.u&&hi(b,this.u,ie)),zs(this.h,J),this.Ra&&_t(b,"TYPE","init"),this.S?(_t(b,"$req",E),_t(b,"SID","null"),J.U=!0,Fs(J,b,null)):Fs(J,b,E),this.I=2}}else this.I==3&&(d?Dr(this,d):this.i.length==0||ja(this.h)||Dr(this))};function Dr(d,E){var b;E?b=E.l:b=d.V++;const I=Ct(d.J);_t(I,"SID",d.M),_t(I,"RID",b),_t(I,"AID",d.K),Zi(d,I),d.u&&d.o&&hi(I,d.u,d.o),b=new ps(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),E&&(d.i=E.G.concat(d.i)),E=vo(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),zs(d.h,b),Fs(b,I,E)}function Zi(d,E){d.H&&tt(d.H,function(b,I){_t(E,I,b)}),d.l&&tt({},function(b,I){_t(E,I,b)})}function vo(d,E,b){b=Math.min(d.i.length,b);const I=d.l?_(d.l.Ka,d.l,d):null;e:{var J=d.i;let He=-1;for(;;){const Qt=["count="+b];He==-1?b>0?(He=J[0].g,Qt.push("ofs="+He)):He=0:Qt.push("ofs="+He);let gt=!0;for(let Vt=0;Vt<b;Vt++){var ie=J[Vt].g;const K=J[Vt].map;if(ie-=He,ie<0)He=Math.max(0,J[Vt].g-100),gt=!1;else try{ie="req"+ie+"_"||"";try{var Ee=K instanceof Map?K:Object.entries(K);for(const[fe,Se]of Ee){let Le=Se;g(Se)&&(Le=ui(Se)),Qt.push(ie+fe+"="+encodeURIComponent(Le))}}catch(fe){throw Qt.push(ie+"type="+encodeURIComponent("_badmap")),fe}}catch{I&&I(K)}}if(gt){Ee=Qt.join("&");break e}}Ee=void 0}return d=d.i.splice(0,b),E.G=d,Ee}function To(d){if(!d.g&&!d.v){d.Y=1;var E=d.Da;_e||D(),ve||(_e(),ve=!0),j.add(E,d),d.A=0}}function ea(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ge(_(d.Da,d),So(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,bo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ge(_(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Ii(this),bo(this))};function Or(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function bo(d){d.g=new ps(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var E=Ct(d.na);_t(E,"RID","rpc"),_t(E,"SID",d.M),_t(E,"AID",d.K),_t(E,"CI",d.F?"0":"1"),!d.F&&d.ia&&_t(E,"TO",d.ia),_t(E,"TYPE","xmlhttp"),Zi(d,E),d.u&&d.o&&hi(E,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Gs(Ct(E)),b.u=null,b.R=!0,wi(b,d)}s.Va=function(){this.C!=null&&(this.C=null,Ii(this),ea(this),Jt(19))};function qa(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function jr(d,E){var b=null;if(d.g==E){qa(d),Or(d),d.g=null;var I=2}else if(Ls(d.h,E))b=E.G,Yi(d.h,E),I=1;else return;if(d.I!=0){if(E.o)if(I==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var J=d.D;I=xs(),sn(I,new Cs(I,b)),Qs(d)}else To(d);else if(J=E.m,J==3||J==0&&E.X>0||!(I==1&&Ji(d,E)||I==2&&ea(d)))switch(b&&b.length>0&&(E=d.h,E.i=E.i.concat(b)),J){case 1:Ks(d,5);break;case 4:Ks(d,10);break;case 3:Ks(d,6);break;default:Ks(d,2)}}}function So(d,E){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*E}function Ks(d,E){if(d.j.info("Error code "+E),E==2){var b=_(d.bb,d),I=d.Ua;const J=!I;I=new ls(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qe(I,"https"),Gs(I),J?Un(I.toString(),b):Lr(I.toString(),b)}else Jt(2);d.I=0,d.l&&d.l.pa(E),No(d),Wi(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function No(d){if(d.I=0,d.ja=[],d.l){const E=Ma(d.h);(E.length!=0||d.i.length!=0)&&(z(d.ja,E),z(d.ja,d.i),d.h.i.length=0,B(d.i),d.i.length=0),d.l.oa()}}function wo(d,E,b){var I=b instanceof ls?Ct(b):new ls(b);if(I.g!="")E&&(I.g=E+"."+I.g),Kn(I,I.u);else{var J=h.location;I=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;const ie=new ls(null);I&&Qe(ie,I),E&&(ie.g=E),J&&Kn(ie,J),b&&(ie.h=b),I=ie}return b=d.G,E=d.wa,b&&E&&_t(I,b,E),_t(I,"VER",d.ka),Zi(d,I),I}function Ao(d,E,b){if(E&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Aa&&!d.ma?new m(new us({ab:b})):new m(d.ma),E.Fa(d.L),E}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}s=Ro.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ki(){}ki.prototype.g=function(d,E){return new xn(d,E)};function xn(d,E){$t.call(this),this.g=new en(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(d?d["X-WebChannel-Client-Profile"]=E.sa:d={"X-WebChannel-Client-Profile":E.sa}),this.g.U=d,(d=E&&E.Qb)&&!k(d)&&(this.g.u=d),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!k(E)&&(this.g.G=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new mi(this)}A(xn,$t),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Va(this.g)},xn.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=ui(d),d=b);E.i.push(new Zt(E.Ya++,d)),E.I==3&&Qs(E)},xn.prototype.N=function(){this.g.l=null,delete this.j,Va(this.g),delete this.g,xn.Z.N.call(this)};function xo(d){je.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const b in E){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}A(xo,je);function Co(){is.call(this),this.status=1}A(Co,is);function mi(d){this.g=d}A(mi,Ro),mi.prototype.ra=function(){sn(this.g,"a")},mi.prototype.qa=function(d){sn(this.g,new xo(d))},mi.prototype.pa=function(d){sn(this.g,new Co)},mi.prototype.oa=function(){sn(this.g,"b")},ki.prototype.createWebChannel=ki.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,_b=function(){return new ki},pb=function(){return xs()},mb=Gt,Bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,id=as,La.COMPLETE="complete",hb=La,go.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",$t.prototype.listen=$t.prototype.J,Sc=go,m.prototype.listenOnce=m.prototype.K,m.prototype.getLastError=m.prototype.Ha,m.prototype.getLastErrorCode=m.prototype.ya,m.prototype.getStatus=m.prototype.ca,m.prototype.getResponseJson=m.prototype.La,m.prototype.getResponseText=m.prototype.la,m.prototype.send=m.prototype.ea,m.prototype.setWithCredentials=m.prototype.Fa,fb=m}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});class es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let xl="12.8.0";function BR(s){xl=s}const no=new ib("@firebase/firestore");function ol(){return no.logLevel}function Re(s,...e){if(no.logLevel<=Et.DEBUG){const n=e.map(_p);no.debug(`Firestore (${xl}): ${s}`,...n)}}function Aa(s,...e){if(no.logLevel<=Et.ERROR){const n=e.map(_p);no.error(`Firestore (${xl}): ${s}`,...n)}}function yl(s,...e){if(no.logLevel<=Et.WARN){const n=e.map(_p);no.warn(`Firestore (${xl}): ${s}`,...n)}}function _p(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function ze(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,gb(s,a,n)}function gb(s,e,n){let a=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Aa(a),new Error(a)}function xt(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||gb(e,o,a)}function Je(s,e){return s}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends oo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class yb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(es.UNAUTHENTICATED)))}shutdown(){}}class FR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zR{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xt(this.o===void 0,42304);let a=this.i;const o=v=>this.i!==a?(a=this.i,n(v)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const v=u;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},g=v=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(xt(typeof a.accessToken=="string",31837,{l:a}),new yb(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new es(e)}}class GR{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=es.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class HR{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new GR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,NR(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xt(this.o===void 0,3512);const a=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=YR(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function ft(s,e){return s<e?-1:s>e?1:0}function Pm(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return pm(o)===pm(u)?ft(o,u):pm(o)?1:-1}return ft(s.length,e.length)}const $R=55296,QR=57343;function pm(s){const e=s.charCodeAt(0);return e>=$R&&e<=QR}function El(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}const pv="__name__";class Ui{constructor(e,n,a){n===void 0?n=0:n>e.length&&ze(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&ze(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ui?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=Ui.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ft(e.length,n.length)}static compareSegments(e,n){const a=Ui.isNumericId(e),o=Ui.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Ui.extractNumericId(e).compare(Ui.extractNumericId(n)):Pm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}}class zt extends Ui{construct(e,n,a){return new zt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new xe(me.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new zt(n)}static emptyPath(){return new zt([])}}const KR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Ui{construct(e,n,a){return new Gn(e,n,a)}static isValidIdentifier(e){return KR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new Gn([pv])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new xe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new xe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new xe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(zt.fromString(e))}static fromName(e){return new Ve(zt.fromString(e).popFirst(5))}static empty(){return new Ve(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new zt(e.slice()))}}function Eb(s,e,n){if(!n)throw new xe(me.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function WR(s,e,n,a){if(e===!0&&a===!0)throw new xe(me.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function _v(s){if(!Ve.isDocumentKey(s))throw new xe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function gv(s){if(Ve.isDocumentKey(s))throw new xe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Vd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ze(12329,{type:typeof s})}function vl(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new xe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vd(s);throw new xe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function vn(s,e){const n={typeString:s};return e&&(n.value=e),n}function Pc(s,e){if(!vb(s))throw new xe(me.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new xe(me.INVALID_ARGUMENT,n);return!0}const yv=-62135596800,Ev=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Ev);return new Yt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yv)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ev}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pc(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:vn("string",Yt._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Yt(0,0))}static max(){return new $e(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Lc=-1;function JR(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=$e.fromTimestamp(a===1e9?new Yt(n+1,0):new Yt(n,a));return new _r(o,Ve.empty(),e)}function ZR(s){return new _r(s.readTime,s.key,Lc)}class _r{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new _r($e.min(),Ve.empty(),Lc)}static max(){return new _r($e.max(),Ve.empty(),Lc)}}function ex(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ve.comparator(s.documentKey,e.documentKey),n!==0?n:ft(s.largestBatchId,e.largestBatchId))}const tx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Cl(s){if(s.code!==me.FAILED_PRECONDITION||s.message!==tx)throw s;Re("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,a)=>{n(e)}))}static reject(e){return new pe(((n,a)=>{a(e)}))}static waitFor(e){return new pe(((n,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(v=>a(v)))})),h=!0,u===o&&n()}))}static or(e){let n=pe.resolve(!1);for(const a of e)n=n.next((o=>o?pe.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new pe(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let v=0;v<u;v++){const _=v;n(e[_]).next((S=>{h[_]=S,++g,g===u&&a(h)}),(S=>o(S)))}}))}static doWhile(e,n){return new pe(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function sx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Il(s){return s.name==="IndexedDbTransactionError"}class qd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qd.ce=-1;const yp=-1;function Bd(s){return s==null}function md(s){return s===0&&1/s==-1/0}function ix(s){return typeof s=="number"&&Number.isInteger(s)&&!md(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Tb="";function ax(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=vv(e)),e=rx(s.get(n),e);return vv(e)}function rx(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case Tb:n+="";break;default:n+=u}}return n}function vv(s){return s+Tb+""}function Tv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function lo(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function bb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class tn{constructor(e,n){this.comparator=e,this.root=n||zn.EMPTY}insert(e,n){return new tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??zn.RED,this.left=o??zn.EMPTY,this.right=u??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new zn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return zn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(e){return new bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nn(this.comparator);return n.data=e,n}}class bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yi{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new yi([])}unionWith(e){let n=new Nn(Gn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new yi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class Sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Sb("Invalid base64 string: "+u):u}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const ox=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(s){if(xt(!!s,39018),typeof s=="string"){let e=0;const n=ox.exec(s);if(xt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:dn(s.seconds),nanos:dn(s.nanos)}}function dn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?Hn.fromBase64String(s):Hn.fromUint8Array(s)}const Nb="server_timestamp",wb="__type__",Ab="__previous_value__",Rb="__local_write_time__";function Ep(s){return(s?.mapValue?.fields||{})[wb]?.stringValue===Nb}function Pd(s){const e=s.mapValue.fields[Ab];return Ep(e)?Pd(e):e}function Dc(s){const e=gr(s.mapValue.fields[Rb].timestampValue);return new Yt(e.seconds,e.nanos)}class lx{constructor(e,n,a,o,u,h,g,v,_,S,A){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=_,this.isUsingEmulator=S,this.apiKey=A}}const pd="(default)";class Oc{constructor(e,n){this.projectId=e,this.database=n||pd}static empty(){return new Oc("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}function cx(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new xe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(s.options.projectId,e)}const xb="__type__",ux="__max__",Ju={mapValue:{}},Cb="__vector__",_d="value";function Er(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ep(s)?4:fx(s)?9007199254740991:dx(s)?10:11:ze(28295,{value:s})}function zi(s,e){if(s===e)return!0;const n=Er(s);if(n!==Er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Dc(s).isEqual(Dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=gr(o.timestampValue),g=gr(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return yr(o.bytesValue).isEqual(yr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return dn(o.geoPointValue.latitude)===dn(u.geoPointValue.latitude)&&dn(o.geoPointValue.longitude)===dn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return dn(o.integerValue)===dn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=dn(o.doubleValue),g=dn(u.doubleValue);return h===g?md(h)===md(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return El(s.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(Tv(h)!==Tv(g))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(g[v]===void 0||!zi(h[v],g[v])))return!1;return!0})(s,e);default:return ze(52216,{left:s})}}function jc(s,e){return(s.values||[]).find((n=>zi(n,e)))!==void 0}function Tl(s,e){if(s===e)return 0;const n=Er(s),a=Er(e);if(n!==a)return ft(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return ft(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=dn(u.integerValue||u.doubleValue),v=dn(h.integerValue||h.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return Sv(s.timestampValue,e.timestampValue);case 4:return Sv(Dc(s),Dc(e));case 5:return Pm(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=yr(u),v=yr(h);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),v=h.split("/");for(let _=0;_<g.length&&_<v.length;_++){const S=ft(g[_],v[_]);if(S!==0)return S}return ft(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=ft(dn(u.latitude),dn(h.latitude));return g!==0?g:ft(dn(u.longitude),dn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Nv(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},v=h.fields||{},_=g[_d]?.arrayValue,S=v[_d]?.arrayValue,A=ft(_?.values?.length||0,S?.values?.length||0);return A!==0?A:Nv(_,S)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Ju.mapValue&&h===Ju.mapValue)return 0;if(u===Ju.mapValue)return 1;if(h===Ju.mapValue)return-1;const g=u.fields||{},v=Object.keys(g),_=h.fields||{},S=Object.keys(_);v.sort(),S.sort();for(let A=0;A<v.length&&A<S.length;++A){const C=Pm(v[A],S[A]);if(C!==0)return C;const B=Tl(g[v[A]],_[S[A]]);if(B!==0)return B}return ft(v.length,S.length)})(s.mapValue,e.mapValue);default:throw ze(23264,{he:n})}}function Sv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ft(s,e);const n=gr(s),a=gr(e),o=ft(n.seconds,a.seconds);return o!==0?o:ft(n.nanos,a.nanos)}function Nv(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Tl(n[o],a[o]);if(u)return u}return ft(n.length,a.length)}function bl(s){return Fm(s)}function Fm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=gr(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ve.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=Fm(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${Fm(n.fields[h])}`;return o+"}"})(s.mapValue):ze(61005,{value:s})}function ad(s){switch(Er(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(s);return e?16+ad(e):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+ad(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return lo(a.fields,((u,h)=>{o+=u.length+ad(h)})),o})(s.mapValue);default:throw ze(13486,{value:s})}}function wv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function zm(s){return!!s&&"integerValue"in s}function vp(s){return!!s&&"arrayValue"in s}function Av(s){return!!s&&"nullValue"in s}function Rv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function rd(s){return!!s&&"mapValue"in s}function dx(s){return(s?.mapValue?.fields||{})[xb]?.stringValue===Cb}function Rc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return lo(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Rc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rc(s.arrayValue.values[n]);return e}return{...s}}function fx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===ux}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(n)}setAll(e){let n=Gn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,a,o),a={},o=[],n=g.popLast()}h?a[g.lastSegment()]=Rc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){lo(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new ri(Rc(this.value))}}function Ib(s){const e=[];return lo(s.fields,((n,a)=>{const o=new Gn([n]);if(rd(a)){const u=Ib(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new yi(e)}class ts{constructor(e,n,a,o,u,h,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new ts(e,0,$e.min(),$e.min(),$e.min(),ri.empty(),0)}static newFoundDocument(e,n,a,o){return new ts(e,1,n,$e.min(),a,o,0)}static newNoDocument(e,n){return new ts(e,2,n,$e.min(),$e.min(),ri.empty(),0)}static newUnknownDocument(e,n){return new ts(e,3,n,$e.min(),$e.min(),ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gd{constructor(e,n){this.position=e,this.inclusive=n}}function xv(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?a=Ve.comparator(Ve.fromName(h.referenceValue),n.key):a=Tl(h,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Cv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!zi(s.position[n],e.position[n]))return!1;return!0}class yd{constructor(e,n="asc"){this.field=e,this.dir=n}}function hx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class kb{}class En extends kb{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new px(e,n,a):n==="array-contains"?new yx(e,a):n==="in"?new Ex(e,a):n==="not-in"?new vx(e,a):n==="array-contains-any"?new Tx(e,a):new En(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new _x(e,a):new gx(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&Er(this.value)===Er(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends kb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vi(e,n)}matches(e){return Lb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lb(s){return s.op==="and"}function Db(s){return mx(s)&&Lb(s)}function mx(s){for(const e of s.filters)if(e instanceof vi)return!1;return!0}function Gm(s){if(s instanceof En)return s.field.canonicalString()+s.op.toString()+bl(s.value);if(Db(s))return s.filters.map((e=>Gm(e))).join(",");{const e=s.filters.map((n=>Gm(n))).join(",");return`${s.op}(${e})`}}function Ob(s,e){return s instanceof En?(function(a,o){return o instanceof En&&a.op===o.op&&a.field.isEqual(o.field)&&zi(a.value,o.value)})(s,e):s instanceof vi?(function(a,o){return o instanceof vi&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&Ob(h,o.filters[g])),!0):!1})(s,e):void ze(19439)}function jb(s){return s instanceof En?(function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`})(s):s instanceof vi?(function(n){return n.op.toString()+" {"+n.getFilters().map(jb).join(" ,")+"}"})(s):"Filter"}class px extends En{constructor(e,n,a){super(e,n,a),this.key=Ve.fromName(a.referenceValue)}matches(e){const n=Ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class _x extends En{constructor(e,n){super(e,"in",n),this.keys=Mb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gx extends En{constructor(e,n){super(e,"not-in",n),this.keys=Mb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Mb(s,e){return(e.arrayValue?.values||[]).map((n=>Ve.fromName(n.referenceValue)))}class yx extends En{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vp(n)&&jc(n.arrayValue,this.value)}}class Ex extends En{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jc(this.value.arrayValue,n)}}class vx extends En{constructor(e,n){super(e,"not-in",n)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jc(this.value.arrayValue,n)}}class Tx extends En{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>jc(this.value.arrayValue,a)))}}class bx{constructor(e,n=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function Iv(s,e=null,n=[],a=[],o=null,u=null,h=null){return new bx(s,e,n,a,o,u,h)}function Tp(s){const e=Je(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Gm(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>bl(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>bl(a))).join(",")),e.Te=n}return e.Te}function bp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!hx(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Ob(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Cv(s.startAt,e.startAt)&&Cv(s.endAt,e.endAt)}function Hm(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Fc{constructor(e,n=null,a=[],o=[],u=null,h="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=v,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Sx(s,e,n,a,o,u,h,g){return new Fc(s,e,n,a,o,u,h,g)}function Ub(s){return new Fc(s)}function kv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Nx(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Vb(s){return s.collectionGroup!==null}function xc(s){const e=Je(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Nn(Gn.comparator);return h.filters.forEach((v=>{v.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new yd(u,a))})),n.has(Gn.keyField().canonicalString())||e.Ie.push(new yd(Gn.keyField(),a))}return e.Ie}function qi(s){const e=Je(s);return e.Ee||(e.Ee=wx(e,xc(s))),e.Ee}function wx(s,e){if(s.limitType==="F")return Iv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new yd(o.field,u)}));const n=s.endAt?new gd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new gd(s.startAt.position,s.startAt.inclusive):null;return Iv(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Xm(s,e){const n=s.filters.concat([e]);return new Fc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Ym(s,e,n){return new Fc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Fd(s,e){return bp(qi(s),qi(e))&&s.limitType===e.limitType}function qb(s){return`${Tp(qi(s))}|lt:${s.limitType}`}function ll(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>jb(o))).join(", ")}]`),Bd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>bl(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>bl(o))).join(",")),`Target(${a})`})(qi(s))}; limitType=${s.limitType})`}function zd(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Ve.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of xc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,v){const _=xv(h,g,v);return h.inclusive?_<=0:_<0})(a.startAt,xc(a),o)||a.endAt&&!(function(h,g,v){const _=xv(h,g,v);return h.inclusive?_>=0:_>0})(a.endAt,xc(a),o))})(s,e)}function Ax(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Bb(s){return(e,n)=>{let a=!1;for(const o of xc(s)){const u=Rx(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function Rx(s,e,n){const a=s.field.isKeyField()?Ve.comparator(e.key,n.key):(function(u,h,g){const v=h.data.field(u),_=g.data.field(u);return v!==null&&_!==null?Tl(v,_):ze(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ze(19790,{direction:s.dir})}}class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return bb(this.inner)}size(){return this.innerSize}}const xx=new tn(Ve.comparator);function Ra(){return xx}const Pb=new tn(Ve.comparator);function Nc(...s){let e=Pb;for(const n of s)e=e.insert(n.key,n);return e}function Fb(s){let e=Pb;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function eo(){return Cc()}function zb(){return Cc()}function Cc(){return new co((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Cx=new tn(Ve.comparator),Ix=new Nn(Ve.comparator);function ht(...s){let e=Ix;for(const n of s)e=e.add(n);return e}const kx=new Nn(ft);function Lx(){return kx}function Sp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function Gb(s){return{integerValue:""+s}}function Dx(s,e){return ix(e)?Gb(e):Sp(s,e)}class Gd{constructor(){this._=void 0}}function Ox(s,e,n){return s instanceof Ed?(function(o,u){const h={fields:{[wb]:{stringValue:Nb},[Rb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ep(u)&&(u=Pd(u)),u&&(h.fields[Ab]=u),{mapValue:h}})(n,e):s instanceof Mc?Xb(s,e):s instanceof Uc?Yb(s,e):(function(o,u){const h=Hb(o,u),g=Lv(h)+Lv(o.Ae);return zm(h)&&zm(o.Ae)?Gb(g):Sp(o.serializer,g)})(s,e)}function jx(s,e,n){return s instanceof Mc?Xb(s,e):s instanceof Uc?Yb(s,e):n}function Hb(s,e){return s instanceof vd?(function(a){return zm(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Ed extends Gd{}class Mc extends Gd{constructor(e){super(),this.elements=e}}function Xb(s,e){const n=$b(e);for(const a of s.elements)n.some((o=>zi(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Uc extends Gd{constructor(e){super(),this.elements=e}}function Yb(s,e){let n=$b(e);for(const a of s.elements)n=n.filter((o=>!zi(o,a)));return{arrayValue:{values:n}}}class vd extends Gd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Lv(s){return dn(s.integerValue||s.doubleValue)}function $b(s){return vp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Mx(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Mc&&o instanceof Mc||a instanceof Uc&&o instanceof Uc?El(a.elements,o.elements,zi):a instanceof vd&&o instanceof vd?zi(a.Ae,o.Ae):a instanceof Ed&&o instanceof Ed})(s.transform,e.transform)}class Ux{constructor(e,n){this.version=e,this.transformResults=n}}class Bi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function od(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Hd{}function Qb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Np(s.key,Bi.none()):new zc(s.key,s.data,Bi.none());{const n=s.data,a=ri.empty();let o=new Nn(Gn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new uo(s.key,a,new yi(o.toArray()),Bi.none())}}function Vx(s,e,n){s instanceof zc?(function(o,u,h){const g=o.value.clone(),v=Ov(o.fieldTransforms,u,h.transformResults);g.setAll(v),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof uo?(function(o,u,h){if(!od(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=Ov(o.fieldTransforms,u,h.transformResults),v=u.data;v.setAll(Kb(o)),v.setAll(g),u.convertToFoundDocument(h.version,v).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Ic(s,e,n,a){return s instanceof zc?(function(u,h,g,v){if(!od(u.precondition,h))return g;const _=u.value.clone(),S=jv(u.fieldTransforms,v,h);return _.setAll(S),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,n,a):s instanceof uo?(function(u,h,g,v){if(!od(u.precondition,h))return g;const _=jv(u.fieldTransforms,v,h),S=h.data;return S.setAll(Kb(u)),S.setAll(_),h.convertToFoundDocument(h.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,e,n,a):(function(u,h,g){return od(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function qx(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=Hb(a.transform,o||null);u!=null&&(n===null&&(n=ri.empty()),n.set(a.field,u))}return n||null}function Dv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&El(a,o,((u,h)=>Mx(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class zc extends Hd{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uo extends Hd{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Kb(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function Ov(s,e,n){const a=new Map;xt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,jx(h,g,n[o]))}return a}function jv(s,e,n){const a=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);a.set(o.field,Ox(u,h,e))}return a}class Np extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bx extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Px{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Vx(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Ic(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Ic(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=zb();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const v=Qb(h,g);v!==null&&a.set(o.key,v),h.isValidDocument()||h.convertToNoDocument($e.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ht())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,a)=>Dv(n,a)))&&El(this.baseMutations,e.baseMutations,((n,a)=>Dv(n,a)))}}class wp{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){xt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return Cx})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new wp(e,n,a,o)}}class Fx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class zx{constructor(e,n){this.count=e,this.unchangedNames=n}}var yn,yt;function Gx(s){switch(s){case me.OK:return ze(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return ze(15467,{code:s})}}function Wb(s){if(s===void 0)return Aa("GRPC error has no .code"),me.UNKNOWN;switch(s){case yn.OK:return me.OK;case yn.CANCELLED:return me.CANCELLED;case yn.UNKNOWN:return me.UNKNOWN;case yn.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case yn.INTERNAL:return me.INTERNAL;case yn.UNAVAILABLE:return me.UNAVAILABLE;case yn.UNAUTHENTICATED:return me.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case yn.NOT_FOUND:return me.NOT_FOUND;case yn.ALREADY_EXISTS:return me.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return me.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case yn.ABORTED:return me.ABORTED;case yn.OUT_OF_RANGE:return me.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return me.UNIMPLEMENTED;case yn.DATA_LOSS:return me.DATA_LOSS;default:return ze(39323,{code:s})}}(yt=yn||(yn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function Hx(){return new TextEncoder}const Xx=new fr([4294967295,4294967295],0);function Mv(s){const e=Hx().encode(s),n=new db;return n.update(e),new Uint8Array(n.digest())}function Uv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fr([n,a],0),new fr([o,u],0)]}class Ap{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new wc(`Invalid padding: ${n}`);if(a<0)throw new wc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fr.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(fr.fromNumber(a)));return o.compare(Xx)===1&&(o=new fr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mv(e),[a,o]=Uv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Ap(u,o,n);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=Mv(e),[a,o]=Uv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.be(h)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xd{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Xd($e.min(),o,new tn(ft),Ra(),ht())}}class Gc{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Gc(a,n,ht(),ht(),ht())}}class ld{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class Jb{constructor(e,n){this.targetId=e,this.Ce=n}}class Zb{constructor(e,n,a=Hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class Vv{constructor(){this.ve=0,this.Fe=qv(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),n=ht(),a=ht();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:ze(38017,{changeType:u})}})),new Gc(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=qv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Yx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ra(),this.He=Zu(),this.Je=Zu(),this.Ze=new tn(ft)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Hm(u))if(a===0){const h=new Ve(u.path);this.et(n,h,ts.newNoDocument(h,$e.min()))}else xt(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const g=this.ut(e),v=g?this.ct(g,e,h):1;if(v!==0){this.it(n);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=yr(a).toUint8Array()}catch(v){if(v instanceof Sb)return yl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Ap(h,o,u)}catch(v){return yl(v instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Hm(g.target)){const v=new Ve(g.target.path);this.It(v).has(h)||this.Et(h,v)||this.et(h,v,ts.newNoDocument(v,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let a=ht();this.Je.forEach(((u,h)=>{let g=!0;h.forEachWhile((v=>{const _=this.ot(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Xd(e,n,this.Ze,this.je,a);return this.je=Ra(),this.He=Zu(),this.Je=Zu(),this.Ze=new tn(ft),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Vv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Nn(ft),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Nn(ft),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zu(){return new tn(Ve.comparator)}function qv(){return new tn(Ve.comparator)}const $x={asc:"ASCENDING",desc:"DESCENDING"},Qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kx={and:"AND",or:"OR"};class Wx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $m(s,e){return s.useProto3Json||Bd(e)?e:{value:e}}function Td(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e0(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Jx(s,e){return Td(s,e.toTimestamp())}function Pi(s){return xt(!!s,49232),$e.fromTimestamp((function(n){const a=gr(n);return new Yt(a.seconds,a.nanos)})(s))}function Rp(s,e){return Qm(s,e).canonicalString()}function Qm(s,e){const n=(function(o){return new zt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function t0(s){const e=zt.fromString(s);return xt(r0(e),10190,{key:e.toString()}),e}function Km(s,e){return Rp(s.databaseId,e.path)}function _m(s,e){const n=t0(e);if(n.get(1)!==s.databaseId.projectId)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ve(s0(n))}function n0(s,e){return Rp(s.databaseId,e)}function Zx(s){const e=t0(s);return e.length===4?zt.emptyPath():s0(e)}function Wm(s){return new zt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function s0(s){return xt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Bv(s,e,n){return{name:Km(s,e),fields:n.value.mapValue.fields}}function e2(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ze(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,S){return _.useProto3Json?(xt(S===void 0||typeof S=="string",58123),Hn.fromBase64String(S||"")):(xt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Hn.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(_){const S=_.code===void 0?me.UNKNOWN:Wb(_.code);return new xe(S,_.message||"")})(h);n=new Zb(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=_m(s,a.document.name),u=Pi(a.document.updateTime),h=a.document.createTime?Pi(a.document.createTime):$e.min(),g=new ri({mapValue:{fields:a.document.fields}}),v=ts.newFoundDocument(o,u,h,g),_=a.targetIds||[],S=a.removedTargetIds||[];n=new ld(_,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=_m(s,a.document),u=a.readTime?Pi(a.readTime):$e.min(),h=ts.newNoDocument(o,u),g=a.removedTargetIds||[];n=new ld([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=_m(s,a.document),u=a.removedTargetIds||[];n=new ld([],u,o,null)}else{if(!("filter"in e))return ze(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new zx(o,u),g=a.targetId;n=new Jb(g,h)}}return n}function t2(s,e){let n;if(e instanceof zc)n={update:Bv(s,e.key,e.value)};else if(e instanceof Np)n={delete:Km(s,e.key)};else if(e instanceof uo)n={update:Bv(s,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof Bx))return ze(16599,{dt:e.type});n={verify:Km(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof Ed)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Mc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Uc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof vd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw ze(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:Jx(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ze(27497)})(s,e.precondition)),n}function n2(s,e){return s&&s.length>0?(xt(e!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?Pi(o.updateTime):Pi(u);return h.isEqual($e.min())&&(h=Pi(u)),new Ux(h,o.transformResults||[])})(n,e)))):[]}function s2(s,e){return{documents:[n0(s,e.path)]}}function i2(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=n0(s,o);const u=(function(_){if(_.length!==0)return a0(vi.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((S=>(function(C){return{field:cl(C.field),direction:o2(C.dir)}})(S)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=$m(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function a2(s){let e=Zx(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){xt(a===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];n.where&&(u=(function(A){const C=i0(A);return C instanceof vi&&Db(C)?C.getFilters():[C]})(n.where));let h=[];n.orderBy&&(h=(function(A){return A.map((C=>(function(z){return new yd(ul(z.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(C)))})(n.orderBy));let g=null;n.limit&&(g=(function(A){let C;return C=typeof A=="object"?A.value:A,Bd(C)?null:C})(n.limit));let v=null;n.startAt&&(v=(function(A){const C=!!A.before,B=A.values||[];return new gd(B,C)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const C=!A.before,B=A.values||[];return new gd(B,C)})(n.endAt)),Sx(e,o,h,u,g,"F",v,_)}function r2(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function i0(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=ul(n.unaryFilter.field);return En.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=ul(n.unaryFilter.field);return En.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ul(n.unaryFilter.field);return En.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=ul(n.unaryFilter.field);return En.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(s):s.fieldFilter!==void 0?(function(n){return En.create(ul(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return vi.create(n.compositeFilter.filters.map((a=>i0(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(n.compositeFilter.op))})(s):ze(30097,{filter:s})}function o2(s){return $x[s]}function l2(s){return Qx[s]}function c2(s){return Kx[s]}function cl(s){return{fieldPath:s.canonicalString()}}function ul(s){return Gn.fromServerFormat(s.fieldPath)}function a0(s){return s instanceof En?(function(n){if(n.op==="=="){if(Rv(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(Av(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rv(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(Av(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:l2(n.op),value:n.value}}})(s):s instanceof vi?(function(n){const a=n.getFilters().map((o=>a0(o)));return a.length===1?a[0]:{compositeFilter:{op:c2(n.op),filters:a}}})(s):ze(54877,{filter:s})}function u2(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function r0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function o0(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ur{constructor(e,n,a,o,u=$e.min(),h=$e.min(),g=Hn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class d2{constructor(e){this.yt=e}}function f2(s){const e=a2({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ym(e,e.limit,"L"):e}class h2{constructor(){this.Sn=new m2}addToCollectionParentIndex(e,n){return this.Sn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(_r.min())}updateCollectionGroup(e,n,a){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class m2{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new Nn(zt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Nn(zt.comparator)).toArray()}}const Pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},l0=41943040;class ws{static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(l0,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);class Sl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Sl(0)}static ar(){return new Sl(-1)}}const Fv="LruGarbageCollector",p2=1048576;function zv([s,e],[n,a]){const o=ft(s,n);return o===0?ft(e,a):o}class _2{constructor(e){this.Pr=e,this.buffer=new Nn(zv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();zv(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g2{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(Fv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Il(n)?Re(Fv,"Ignoring IndexedDB error during garbage collection: ",n):await Cl(n)}await this.Ar(3e5)}))}}class y2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(qd.ce);const a=new _2(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Pv)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,h,g,v,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(a=A,g=Date.now(),this.removeTargets(e,a,n)))).next((A=>(u=A,v=Date.now(),this.removeOrphanedDocuments(e,a)))).next((A=>(_=Date.now(),ol()<=Et.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-S}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(v-g)+`ms
	Removed ${A} documents in `+(_-v)+`ms
Total Duration: ${_-S}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function E2(s,e){return new y2(s,e)}class v2{constructor(){this.changes=new co((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ts.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?pe.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class T2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class b2{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Ic(a.mutation,o,yi.empty(),Yt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,ht()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=ht()){const o=eo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let h=Nc();return u.forEach(((g,v)=>{h=h.insert(g,v.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=eo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,ht())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,a,o){let u=Ra();const h=Cc(),g=(function(){return Cc()})();return n.forEach(((v,_)=>{const S=a.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof uo)?u=u.insert(_.key,_):S!==void 0?(h.set(_.key,S.mutation.getFieldMask()),Ic(S.mutation,_,S.mutation.getFieldMask(),Yt.now())):h.set(_.key,yi.empty())})),this.recalculateAndSaveOverlays(e,u).next((v=>(v.forEach(((_,S)=>h.set(_,S))),n.forEach(((_,S)=>g.set(_,new T2(S,h.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Cc();let o=new tn(((h,g)=>h-g)),u=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((v=>{const _=n.get(v);if(_===null)return;let S=a.get(v)||yi.empty();S=g.applyToLocalView(_,S),a.set(v,S);const A=(o.get(g.batchId)||ht()).add(v);o=o.insert(g.batchId,A)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),_=v.key,S=v.value,A=zb();S.forEach((C=>{if(!u.has(C)){const B=Qb(n.get(C),a.get(C));B!==null&&A.set(C,B),u=u.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,A))}return pe.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return Nx(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):pe.resolve(eo());let g=Lc,v=u;return h.next((_=>pe.forEach(_,((S,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),u.get(S)?pe.resolve():this.remoteDocumentCache.getEntry(e,S).next((C=>{v=v.insert(S,C)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,v,_,ht()))).next((S=>({batchId:g,changes:Fb(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ve(n)).next((a=>{let o=Nc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let h=Nc();return this.indexManager.getCollectionParents(e,u).next((g=>pe.forEach(g,(v=>{const _=(function(A,C){return new Fc(C,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((S=>{S.forEach(((A,C)=>{h=h.insert(A,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((h=>{u.forEach(((v,_)=>{const S=_.getKey();h.get(S)===null&&(h=h.insert(S,ts.newInvalidDocument(S)))}));let g=Nc();return h.forEach(((v,_)=>{const S=u.get(v);S!==void 0&&Ic(S.mutation,_,yi.empty(),Yt.now()),zd(n,_)&&(g=g.insert(v,_))})),g}))}}class S2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return pe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:f2(o.bundledQuery),readTime:Pi(o.readTime)}})(n)),pe.resolve()}}class N2{constructor(){this.overlays=new tn(Ve.comparator),this.Lr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const a=eo();return pe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),pe.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),pe.resolve()}getOverlaysForCollection(e,n,a){const o=eo(),u=n.length+1,h=new Ve(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const v=g.getNext().value,_=v.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&v.largestBatchId>a&&o.set(v.getKey(),v)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new tn(((_,S)=>_-S));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>a){let S=u.get(_.largestBatchId);S===null&&(S=eo(),u=u.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=eo(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=o)););return pe.resolve(g)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new Fx(n,a));let u=this.Lr.get(n);u===void 0&&(u=ht(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class w2{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}class xp{constructor(){this.kr=new Nn(kn.Kr),this.qr=new Nn(kn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new kn(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new kn(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new Ve(new zt([])),a=new kn(n,e),o=new kn(n,e+1),u=[];return this.qr.forEachInRange([a,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ve(new zt([])),a=new kn(n,e),o=new kn(n,e+1);let u=ht();return this.qr.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new kn(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class kn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ve.comparator(e.key,n.key)||ft(e.Hr,n.Hr)}static Ur(e,n){return ft(e.Hr,n.Hr)||Ve.comparator(e.key,n.key)}}class A2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Nn(kn.Kr)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Px(u,n,a,o);this.mutationQueue.push(h);for(const g of o)this.Jr=this.Jr.add(new kn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return pe.resolve(h)}lookupMutationBatch(e,n){return pe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return pe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?yp:this.Yn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new kn(n,0),o=new kn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(h=>{const g=this.Zr(h.Hr);u.push(g)})),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Nn(ft);return n.forEach((o=>{const u=new kn(o,0),h=new kn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(g=>{a=a.add(g.Hr)}))})),pe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Ve.isDocumentKey(u)||(u=u.child(""));const h=new kn(new Ve(u),0);let g=new Nn(ft);return this.Jr.forEachWhile((v=>{const _=v.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(g=g.add(v.Hr)),!0)}),h),pe.resolve(this.Yr(g))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){xt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return pe.forEach(n.mutations,(o=>{const u=new kn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new kn(n,0),o=this.Jr.firstAfterOrEqual(a);return pe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class R2{constructor(e){this.ti=e,this.docs=(function(){return new tn(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return pe.resolve(a?a.document.mutableCopy():ts.newInvalidDocument(n))}getEntries(e,n){let a=Ra();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():ts.newInvalidDocument(o))})),pe.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Ra();const h=n.path,g=new Ve(h.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:_,value:{document:S}}=v.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||ex(ZR(S),a)<=0||(o.has(S.key)||zd(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return pe.resolve(u)}getAllFromCollectionGroup(e,n,a,o){ze(9500)}ni(e,n){return pe.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new x2(this)}getSize(e){return pe.resolve(this.size)}}class x2 extends v2{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),pe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class C2{constructor(e){this.persistence=e,this.ri=new co((n=>Tp(n)),bp),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new xp,this.targetCount=0,this.oi=Sl._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),pe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Sl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.lr(n),pe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((h,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),pe.waitFor(u).next((()=>o))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return pe.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),pe.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),pe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return pe.resolve(a)}containsKey(e,n){return pe.resolve(this.si.containsKey(n))}}class c0{constructor(e,n){this._i={},this.overlays={},this.ai=new qd(0),this.ui=!1,this.ui=!0,this.ci=new w2,this.referenceDelegate=e(this),this.li=new C2(this),this.indexManager=new h2,this.remoteDocumentCache=(function(o){return new R2(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new d2(n),this.Pi=new S2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new A2(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){Re("MemoryPersistence","Starting transaction:",e);const o=new I2(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return pe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class I2 extends nx{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ri=new xp,this.Ai=null}static Vi(e){return new Cp(e)}get di(){if(this.Ai)return this.Ai;throw ze(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),pe.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,(a=>{const o=Ve.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,$e.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class bd{constructor(e,n){this.persistence=e,this.fi=new co((a=>ax(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=E2(this,n)}static Vi(e,n){return new bd(e,n)}Ti(){}Ii(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return pe.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?pe.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((g=>{g||(a++,u.removeEntry(h,$e.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),pe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ad(e.data.value)),n}wr(e,n,a){return pe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return pe.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ip{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=ht(),o=ht();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ip(e,n.fromCache,a,o)}}class k2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class L2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return NA()?8:sx(bA())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new k2;return this.ys(e,n,h).next((g=>{if(u.result=g,this.As)return this.ws(e,n,h,g.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(ol()<=Et.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pe.resolve()):(ol()<=Et.DEBUG&&Re("QueryEngine","Query:",ll(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(ol()<=Et.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(n))):pe.resolve())}gs(e,n){if(kv(n))return pe.resolve(null);let a=qi(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Ym(n,null,"F"),a=qi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=ht(...u);return this.fs.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((v=>{const _=this.bs(n,g);return this.Ss(n,_,h,v.readTime)?this.gs(e,Ym(n,null,"F")):this.Ds(e,_,n,v)}))))})))))}ps(e,n,a,o){return kv(n)||o.isEqual($e.min())?pe.resolve(null):this.fs.getDocuments(e,a).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,a,o)?pe.resolve(null):(ol()<=Et.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ll(n)),this.Ds(e,h,n,JR(o,Lc)).next((g=>g)))}))}bs(e,n){let a=new Nn(Bb(e));return n.forEach(((o,u)=>{zd(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return ol()<=Et.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",ll(n)),this.fs.getDocumentsMatchingQuery(e,n,_r.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const kp="LocalStore",D2=3e8;class O2{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new tn(ft),this.Fs=new co((u=>Tp(u)),bp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function j2(s,e,n,a){return new O2(s,e,n,a)}async function u0(s,e){const n=Je(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let v=ht();for(const _ of o){h.push(_.batchId);for(const S of _.mutations)v=v.add(S.key)}for(const _ of u){g.push(_.batchId);for(const S of _.mutations)v=v.add(S.key)}return n.localDocuments.getDocuments(a,v).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:g})))}))}))}function M2(s,e){const n=Je(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(g,v,_,S){const A=_.batch,C=A.keys();let B=pe.resolve();return C.forEach((z=>{B=B.next((()=>S.getEntry(v,z))).next((F=>{const U=_.docVersions.get(z);xt(U!==null,48541),F.version.compareTo(U)<0&&(A.applyToRemoteDocument(F,_),F.isValidDocument()&&(F.setReadTime(_.commitVersion),S.addEntry(F)))}))})),B.next((()=>g.mutationQueue.removeMutationBatch(v,A)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let v=ht();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(v=v.add(g.batch.mutations[_].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function d0(s){const e=Je(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function U2(s,e){const n=Je(s),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const g=[];e.targetChanges.forEach(((S,A)=>{const C=o.get(A);if(!C)return;g.push(n.li.removeMatchingKeys(u,S.removedDocuments,A).next((()=>n.li.addMatchingKeys(u,S.addedDocuments,A))));let B=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?B=B.withResumeToken(Hn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):S.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(S.resumeToken,a)),o=o.insert(A,B),(function(F,U,G){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=D2?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(C,B,S)&&g.push(n.li.updateTargetData(u,B))}));let v=Ra(),_=ht();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))})),g.push(V2(u,h,e.documentUpdates).next((S=>{v=S.Bs,_=S.Ls}))),!a.isEqual($e.min())){const S=n.li.getLastRemoteSnapshotVersion(u).next((A=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(S)}return pe.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,v,_))).next((()=>v))})).then((u=>(n.vs=o,u)))}function V2(s,e,n){let a=ht(),o=ht();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let h=Ra();return n.forEach(((g,v)=>{const _=u.get(g);v.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual($e.min())?(e.removeEntry(g,v.readTime),h=h.insert(g,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),h=h.insert(g,v)):Re(kp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",v.version)})),{Bs:h,Ls:o}}))}function q2(s,e){const n=Je(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=yp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function B2(s,e){const n=Je(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,pe.resolve(o)):n.li.allocateTargetId(a).next((h=>(o=new ur(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function Jm(s,e,n){const a=Je(s),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Il(h))throw h;Re(kp,`Failed to update sequence numbers for target ${e}: ${h}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function Gv(s,e,n){const a=Je(s);let o=$e.min(),u=ht();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(v,_,S){const A=Je(v),C=A.Fs.get(S);return C!==void 0?pe.resolve(A.vs.get(C)):A.li.getTargetData(_,S)})(a,h,qi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(h,g.targetId).next((v=>{u=v}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,n?o:$e.min(),n?u:ht()))).next((g=>(P2(a,Ax(e),g),{documents:g,ks:u})))))}function P2(s,e,n){let a=s.Ms.get(e)||$e.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class Hv{constructor(){this.activeTargetIds=Lx()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F2{constructor(){this.vo=new Hv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Hv,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class z2{Mo(e){}shutdown(){}}const Xv="ConnectivityMonitor";class Yv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(Xv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(Xv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ed=null;function Zm(){return ed===null?ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():ed++,"0x"+ed.toString(16)}const gm="RestConnection",G2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class H2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===pd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const h=Zm(),g=this.Qo(e,n.toUriEncodedString());Re(gm,`Sending RPC '${e}' ${h}:`,g,a);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(v,o,u);const{host:_}=new URL(g),S=mp(_);return this.zo(e,g,v,a,S).then((A=>(Re(gm,`Received RPC '${e}' ${h}: `,A),A)),(A=>{throw yl(gm,`RPC '${e}' ${h} failed with error: `,A,"url: ",g,"request:",a),A}))}jo(e,n,a,o,u,h){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=G2[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class X2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Zn="WebChannelConnection",vc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class hl extends H2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!hl.c_){const e=pb();vc(e,mb.STAT_EVENT,(n=>{n.stat===Bm.PROXY?Re(Zn,"STAT_EVENT: detected buffering proxy"):n.stat===Bm.NOPROXY&&Re(Zn,"STAT_EVENT: detected no buffering proxy")})),hl.c_=!0}}zo(e,n,a,o,u){const h=Zm();return new Promise(((g,v)=>{const _=new fb;_.setWithCredentials(!0),_.listenOnce(hb.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case id.NO_ERROR:const A=_.getResponseJson();Re(Zn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(A)),g(A);break;case id.TIMEOUT:Re(Zn,`RPC '${e}' ${h} timed out`),v(new xe(me.DEADLINE_EXCEEDED,"Request time out"));break;case id.HTTP_ERROR:const C=_.getStatus();if(Re(Zn,`RPC '${e}' ${h} failed with status:`,C,"response text:",_.getResponseText()),C>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const z=B?.error;if(z&&z.status&&z.message){const F=(function(G){const Y=G.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(Y)>=0?Y:me.UNKNOWN})(z.status);v(new xe(F,z.message))}else v(new xe(me.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new xe(me.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Re(Zn,`RPC '${e}' ${h} completed.`)}}));const S=JSON.stringify(o);Re(Zn,`RPC '${e}' ${h} sending request:`,o),_.send(n,"POST",S,a,15)}))}T_(e,n,a){const o=Zm(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,n,a),g.encodeInitMessageHeaders=!0;const _=u.join("");Re(Zn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const S=h.createWebChannel(_,g);this.I_(S);let A=!1,C=!1;const B=new X2({Ho:z=>{C?Re(Zn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(Re(Zn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),Re(Zn,`RPC '${e}' stream ${o} sending:`,z),S.send(z))},Jo:()=>S.close()});return vc(S,Sc.EventType.OPEN,(()=>{C||(Re(Zn,`RPC '${e}' stream ${o} transport opened.`),B.i_())})),vc(S,Sc.EventType.CLOSE,(()=>{C||(C=!0,Re(Zn,`RPC '${e}' stream ${o} transport closed`),B.o_(),this.E_(S))})),vc(S,Sc.EventType.ERROR,(z=>{C||(C=!0,yl(Zn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),B.o_(new xe(me.UNAVAILABLE,"The operation could not be completed")))})),vc(S,Sc.EventType.MESSAGE,(z=>{if(!C){const F=z.data[0];xt(!!F,16349);const U=F,G=U?.error||U[0]?.error;if(G){Re(Zn,`RPC '${e}' stream ${o} received error:`,G);const Y=G.status;let se=(function(ve){const j=yn[ve];if(j!==void 0)return Wb(j)})(Y),re=G.message;se===void 0&&(se=me.INTERNAL,re="Unknown error status: "+Y+" with message "+G.message),C=!0,B.o_(new xe(se,re)),S.close()}else Re(Zn,`RPC '${e}' stream ${o} received:`,F),B.__(F)}})),hl.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _b()}}function Y2(s){return new hl(s)}function ym(){return typeof document<"u"?document:null}function Yd(s){return new Wx(s,!0)}hl.c_=!1;class f0{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const $v="PersistentStream";class h0{constructor(e,n,a,o,u,h,g,v){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(Aa(n.toString()),Aa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new xe(me.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re($v,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Re($v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $2 extends h0{constructor(e,n,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=e2(this.serializer,e),a=(function(u){if(!("targetChange"in u))return $e.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?$e.min():h.readTime?Pi(h.readTime):$e.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=Wm(this.serializer),n.addTarget=(function(u,h){let g;const v=h.target;if(g=Hm(v)?{documents:s2(u,v)}:{query:i2(u,v).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=e0(u,h.resumeToken);const _=$m(u,h.expectedCount);_!==null&&(g.expectedCount=_)}else if(h.snapshotVersion.compareTo($e.min())>0){g.readTime=Td(u,h.snapshotVersion.toTimestamp());const _=$m(u,h.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const a=r2(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.K_(n)}}class Q2 extends h0{constructor(e,n,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=n2(e.writeResults,e.commitTime),a=Pi(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Wm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>t2(this.serializer,a)))};this.K_(n)}}class K2{}class W2 extends K2{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,Qm(n,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(me.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.jo(e,Qm(n,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new xe(me.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function J2(s,e,n,a){return new W2(s,e,n,a)}class Z2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Aa(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const so="RemoteStore";class eC{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{a.enqueueAndForget((async()=>{fo(this)&&(Re(so,"Restarting streams for network reachability change."),await(async function(v){const _=Je(v);_.Ea.add(4),await Hc(_),_.Va.set("Unknown"),_.Ea.delete(4),await $d(_)})(this))}))})),this.Va=new Z2(a,o)}}async function $d(s){if(fo(s))for(const e of s.Ra)await e(!0)}async function Hc(s){for(const e of s.Ra)await e(!1)}function m0(s,e){const n=Je(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jp(n)?Op(n):kl(n).O_()&&Dp(n,e))}function Lp(s,e){const n=Je(s),a=kl(n);n.Ia.delete(e),a.O_()&&p0(n,e),n.Ia.size===0&&(a.O_()?a.L_():fo(n)&&n.Va.set("Unknown"))}function Dp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kl(s).Z_(e)}function p0(s,e){s.da.$e(e),kl(s).X_(e)}function Op(s){s.da=new Yx({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),kl(s).start(),s.Va.ua()}function jp(s){return fo(s)&&!kl(s).x_()&&s.Ia.size>0}function fo(s){return Je(s).Ea.size===0}function _0(s){s.da=void 0}async function tC(s){s.Va.set("Online")}async function nC(s){s.Ia.forEach(((e,n)=>{Dp(s,e)}))}async function sC(s,e){_0(s),jp(s)?(s.Va.ha(e),Op(s)):s.Va.set("Unknown")}async function iC(s,e,n){if(s.Va.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.da.removeTarget(g))})(s,e)}catch(a){Re(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Sd(s,a)}else if(e instanceof ld?s.da.Xe(e):e instanceof Jb?s.da.st(e):s.da.tt(e),!n.isEqual($e.min()))try{const a=await d0(s.localStore);n.compareTo(a)>=0&&await(function(u,h){const g=u.da.Tt(h);return g.targetChanges.forEach(((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const S=u.Ia.get(_);S&&u.Ia.set(_,S.withResumeToken(v.resumeToken,h))}})),g.targetMismatches.forEach(((v,_)=>{const S=u.Ia.get(v);if(!S)return;u.Ia.set(v,S.withResumeToken(Hn.EMPTY_BYTE_STRING,S.snapshotVersion)),p0(u,v);const A=new ur(S.target,v,_,S.sequenceNumber);Dp(u,A)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){Re(so,"Failed to raise snapshot:",a),await Sd(s,a)}}async function Sd(s,e,n){if(!Il(e))throw e;s.Ea.add(1),await Hc(s),s.Va.set("Offline"),n||(n=()=>d0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Re(so,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await $d(s)}))}function g0(s,e){return e().catch((n=>Sd(s,n,e)))}async function Qd(s){const e=Je(s),n=vr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yp;for(;aC(e);)try{const o=await q2(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,rC(e,o)}catch(o){await Sd(e,o)}y0(e)&&E0(e)}function aC(s){return fo(s)&&s.Ta.length<10}function rC(s,e){s.Ta.push(e);const n=vr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function y0(s){return fo(s)&&!vr(s).x_()&&s.Ta.length>0}function E0(s){vr(s).start()}async function oC(s){vr(s).ra()}async function lC(s){const e=vr(s);for(const n of s.Ta)e.ea(n.mutations)}async function cC(s,e,n){const a=s.Ta.shift(),o=wp.from(a,e,n);await g0(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Qd(s)}async function uC(s,e){e&&vr(s).Y_&&await(async function(a,o){if((function(h){return Gx(h)&&h!==me.ABORTED})(o.code)){const u=a.Ta.shift();vr(a).B_(),await g0(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Qd(a)}})(s,e),y0(s)&&E0(s)}async function Qv(s,e){const n=Je(s);n.asyncQueue.verifyOperationInProgress(),Re(so,"RemoteStore received new credentials");const a=fo(n);n.Ea.add(3),await Hc(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $d(n)}async function dC(s,e){const n=Je(s);e?(n.Ea.delete(2),await $d(n)):e||(n.Ea.add(2),await Hc(n),n.Va.set("Unknown"))}function kl(s){return s.ma||(s.ma=(function(n,a,o){const u=Je(n);return u.sa(),new $2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:tC.bind(null,s),Yo:nC.bind(null,s),t_:sC.bind(null,s),J_:iC.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),jp(s)?Op(s):s.Va.set("Unknown")):(await s.ma.stop(),_0(s))}))),s.ma}function vr(s){return s.fa||(s.fa=(function(n,a,o){const u=Je(n);return u.sa(),new Q2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:oC.bind(null,s),t_:uC.bind(null,s),ta:lC.bind(null,s),na:cC.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Qd(s)):(await s.fa.stop(),s.Ta.length>0&&(Re(so,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Mp{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const h=Date.now()+a,g=new Mp(e,n,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(s,e){if(Aa("AsyncQueue",`${e}: ${s}`),Il(s))return new xe(me.UNAVAILABLE,`${e}: ${s}`);throw s}class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Ve.comparator(n.key,a.key):(n,a)=>Ve.comparator(n.key,a.key),this.keyedMap=Nc(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new ml;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class Kv{constructor(){this.ga=new tn(Ve.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ze(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Nl{constructor(e,n,a,o,u,h,g,v,_){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,n,a,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new Nl(e,n,ml.emptySet(n),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}class fC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class hC{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Je(n),u=o.queries;o.queries=Wv(),u.forEach(((h,g)=>{for(const v of g.ba)v.onError(a)}))})(this,new xe(me.ABORTED,"Firestore shutting down"))}}function Wv(){return new co((s=>qb(s)),Fd)}async function mC(s,e){const n=Je(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new fC,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Up(h,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Vp(n)}async function pC(s,e){const n=Je(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function _C(s,e){const n=Je(s);let a=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.ba)g.Fa(o)&&(a=!0);h.wa=o}}a&&Vp(n)}function gC(s,e,n){const a=Je(s),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function Vp(s){s.Ca.forEach((e=>{e.next()}))}var ep,Jv;(Jv=ep||(ep={})).Ma="default",Jv.Cache="cache";class yC{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Nl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}class v0{constructor(e){this.key=e}}class T0{constructor(e){this.key=e}}class EC{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ht(),this.mutatedKeys=ht(),this.eu=Bb(e),this.tu=new ml(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new Kv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,A)=>{const C=o.get(S),B=zd(this.query,A)?A:null,z=!!C&&this.mutatedKeys.has(C.key),F=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let U=!1;C&&B?C.data.isEqual(B.data)?z!==F&&(a.track({type:3,doc:B}),U=!0):this.su(C,B)||(a.track({type:2,doc:B}),U=!0,(v&&this.eu(B,v)>0||_&&this.eu(B,_)<0)&&(g=!0)):!C&&B?(a.track({type:0,doc:B}),U=!0):C&&!B&&(a.track({type:1,doc:C}),U=!0,(v||_)&&(g=!0)),U&&(B?(h=h.add(B),u=F?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const S=this.query.limitType==="F"?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),a.track({type:1,doc:S})}return{tu:h,iu:a,Ss:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((S,A)=>(function(B,z){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Vt:U})}};return F(B)-F(z)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],v=this.Ya.size===0&&this.current&&!o?1:0,_=v!==this.Xa;return this.Xa=v,h.length!==0||_?{snapshot:new Nl(this.query,e.tu,u,h,e.mutatedKeys,v===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ht(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new T0(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new v0(a))})),n}cu(e){this.Za=e.ks,this.Ya=ht();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const qp="SyncEngine";class vC{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class TC{constructor(e){this.key=e,this.hu=!1}}class bC{constructor(e,n,a,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new co((g=>qb(g)),Fd),this.Iu=new Map,this.Eu=new Set,this.Ru=new tn(Ve.comparator),this.Au=new Map,this.Vu=new xp,this.du={},this.mu=new Map,this.fu=Sl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SC(s,e,n=!0){const a=R0(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await b0(a,e,n,!0),o}async function NC(s,e){const n=R0(s);await b0(n,e,!0,!1)}async function b0(s,e,n,a){const o=await B2(s.localStore,qi(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let g;return a&&(g=await wC(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&m0(s.remoteStore,o),g}async function wC(s,e,n,a,o){s.pu=(A,C,B)=>(async function(F,U,G,Y){let se=U.view.ru(G);se.Ss&&(se=await Gv(F.localStore,U.query,!1).then((({documents:j})=>U.view.ru(j,se))));const re=Y&&Y.targetChanges.get(U.targetId),_e=Y&&Y.targetMismatches.get(U.targetId)!=null,ve=U.view.applyChanges(se,F.isPrimaryClient,re,_e);return eT(F,U.targetId,ve.au),ve.snapshot})(s,A,C,B);const u=await Gv(s.localStore,e,!0),h=new EC(e,u.ks),g=h.ru(u.documents),v=Gc.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),_=h.applyChanges(g,s.isPrimaryClient,v);eT(s,n,_.au);const S=new vC(e,n,h);return s.Tu.set(e,S),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function AC(s,e,n){const a=Je(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!Fd(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Jm(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&Lp(a.remoteStore,o.targetId),tp(a,o.targetId)})).catch(Cl)):(tp(a,o.targetId),await Jm(a.localStore,o.targetId,!0))}async function RC(s,e){const n=Je(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Lp(n.remoteStore,a.targetId))}async function xC(s,e,n){const a=jC(s);try{const o=await(function(h,g){const v=Je(h),_=Yt.now(),S=g.reduce(((B,z)=>B.add(z.key)),ht());let A,C;return v.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let z=Ra(),F=ht();return v.xs.getEntries(B,S).next((U=>{z=U,z.forEach(((G,Y)=>{Y.isValidDocument()||(F=F.add(G))}))})).next((()=>v.localDocuments.getOverlayedDocuments(B,z))).next((U=>{A=U;const G=[];for(const Y of g){const se=qx(Y,A.get(Y.key).overlayedDocument);se!=null&&G.push(new uo(Y.key,se,Ib(se.value.mapValue),Bi.exists(!0)))}return v.mutationQueue.addMutationBatch(B,_,G,g)})).next((U=>{C=U;const G=U.applyToLocalDocumentSet(A,F);return v.documentOverlayCache.saveOverlays(B,U.batchId,G)}))})).then((()=>({batchId:C.batchId,changes:Fb(A)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,v){let _=h.du[h.currentUser.toKey()];_||(_=new tn(ft)),_=_.insert(g,v),h.du[h.currentUser.toKey()]=_})(a,o.batchId,n),await Xc(a,o.changes),await Qd(a.remoteStore)}catch(o){const u=Up(o,"Failed to persist write");n.reject(u)}}async function S0(s,e){const n=Je(s);try{const a=await U2(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(xt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?xt(h.hu,14607):o.removedDocuments.size>0&&(xt(h.hu,42227),h.hu=!1))})),await Xc(n,a,e)}catch(a){await Cl(a)}}function Zv(s,e,n){const a=Je(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const v=Je(h);v.onlineState=g;let _=!1;v.queries.forEach(((S,A)=>{for(const C of A.ba)C.va(g)&&(_=!0)})),_&&Vp(v)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function CC(s,e,n){const a=Je(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new tn(Ve.comparator);h=h.insert(u,ts.newNoDocument(u,$e.min()));const g=ht().add(u),v=new Xd($e.min(),new Map,new tn(ft),h,g);await S0(a,v),a.Ru=a.Ru.remove(u),a.Au.delete(e),Bp(a)}else await Jm(a.localStore,e,!1).then((()=>tp(a,e,n))).catch(Cl)}async function IC(s,e){const n=Je(s),a=e.batch.batchId;try{const o=await M2(n.localStore,e);w0(n,a,null),N0(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Xc(n,o)}catch(o){await Cl(o)}}async function kC(s,e,n){const a=Je(s);try{const o=await(function(h,g){const v=Je(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return v.mutationQueue.lookupMutationBatch(_,g).next((A=>(xt(A!==null,37113),S=A.keys(),v.mutationQueue.removeMutationBatch(_,A)))).next((()=>v.mutationQueue.performConsistencyCheck(_))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>v.localDocuments.getDocuments(_,S)))}))})(a.localStore,e);w0(a,e,n),N0(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Xc(a,o)}catch(o){await Cl(o)}}function N0(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function w0(s,e,n){const a=Je(s);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function tp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||A0(s,a)}))}function A0(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Lp(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Bp(s))}function eT(s,e,n){for(const a of n)a instanceof v0?(s.Vu.addReference(a.key,e),LC(s,a)):a instanceof T0?(Re(qp,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||A0(s,a.key)):ze(19791,{wu:a})}function LC(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(Re(qp,"New document in limbo: "+n),s.Eu.add(a),Bp(s))}function Bp(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ve(zt.fromString(e)),a=s.fu.next();s.Au.set(a,new TC(n)),s.Ru=s.Ru.insert(n,a),m0(s.remoteStore,new ur(qi(Ub(n.path)),a,"TargetPurposeLimboResolution",qd.ce))}}async function Xc(s,e,n){const a=Je(s),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,v)=>{h.push(a.pu(v,e,n).then((_=>{if((_||n)&&a.isPrimaryClient){const S=_?!_.fromCache:n?.targetChanges.get(v.targetId)?.current;a.sharedClientState.updateQueryState(v.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Ip.Es(v.targetId,_);u.push(S)}})))})),await Promise.all(h),a.Pu.J_(o),await(async function(v,_){const S=Je(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>pe.forEach(_,(C=>pe.forEach(C.Ts,(B=>S.persistence.referenceDelegate.addReference(A,C.targetId,B))).next((()=>pe.forEach(C.Is,(B=>S.persistence.referenceDelegate.removeReference(A,C.targetId,B)))))))))}catch(A){if(!Il(A))throw A;Re(kp,"Failed to update sequence numbers: "+A)}for(const A of _){const C=A.targetId;if(!A.fromCache){const B=S.vs.get(C),z=B.snapshotVersion,F=B.withLastLimboFreeSnapshotVersion(z);S.vs=S.vs.insert(C,F)}}})(a.localStore,u))}async function DC(s,e){const n=Je(s);if(!n.currentUser.isEqual(e)){Re(qp,"User change. New user:",e.toKey());const a=await u0(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((v=>{v.reject(new xe(me.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Xc(n,a.Ns)}}function OC(s,e){const n=Je(s),a=n.Au.get(e);if(a&&a.hu)return ht().add(a.key);{let o=ht();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function R0(s){const e=Je(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=S0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CC.bind(null,e),e.Pu.J_=_C.bind(null,e.eventManager),e.Pu.yu=gC.bind(null,e.eventManager),e}function jC(s){const e=Je(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kC.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return j2(this.persistence,new L2,e.initialUser,this.serializer)}Cu(e){return new c0(Cp.Vi,this.serializer)}Du(e){return new F2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class MC extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xt(this.persistence.referenceDelegate instanceof bd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new g2(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new c0((a=>bd.Vi(a,n)),this.serializer)}}class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Zv(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=DC.bind(null,this.syncEngine),await dC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hC})()}createDatastore(e){const n=Yd(e.databaseInfo.databaseId),a=Y2(e.databaseInfo);return J2(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,h,g){return new eC(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Zv(this.syncEngine,n,0)),(function(){return Yv.v()?new Yv:new z2})())}createSyncEngine(e,n){return(function(o,u,h,g,v,_,S){const A=new bC(o,u,h,g,v,_);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Je(n);Re(so,"RemoteStore shutting down."),a.Ea.add(5),await Hc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}np.provider={build:()=>new np};class UC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Aa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Tr="FirestoreClient";class VC{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=es.UNAUTHENTICATED,this.clientId=gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{Re(Tr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(Re(Tr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Up(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Em(s,e){s.asyncQueue.verifyOperationInProgress(),Re(Tr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await u0(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function tT(s,e){s.asyncQueue.verifyOperationInProgress();const n=await qC(s);Re(Tr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>Qv(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>Qv(e.remoteStore,o))),s._onlineComponents=e}async function qC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Re(Tr,"Using user provided OfflineComponentProvider");try{await Em(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===me.FAILED_PRECONDITION||o.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;yl("Error using user provided cache. Falling back to memory cache: "+n),await Em(s,new Nd)}}else Re(Tr,"Using default OfflineComponentProvider"),await Em(s,new MC(void 0));return s._offlineComponents}async function x0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Re(Tr,"Using user provided OnlineComponentProvider"),await tT(s,s._uninitializedComponentsProvider._online)):(Re(Tr,"Using default OnlineComponentProvider"),await tT(s,new np))),s._onlineComponents}function BC(s){return x0(s).then((e=>e.syncEngine))}async function PC(s){const e=await x0(s),n=e.eventManager;return n.onListen=SC.bind(null,e.syncEngine),n.onUnlisten=AC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RC.bind(null,e.syncEngine),n}function FC(s,e,n={}){const a=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,v,_){const S=new UC({next:C=>{S.Nu(),h.enqueueAndForget((()=>pC(u,A))),C.fromCache&&v.source==="server"?_.reject(new xe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),A=new yC(g,S,{includeMetadataChanges:!0,Ka:!0});return mC(u,A)})(await PC(s),s.asyncQueue,e,n,a))),a.promise}function zC(s,e){const n=new hr;return s.asyncQueue.enqueueAndForget((async()=>xC(await BC(s),e,n))),n.promise}function C0(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const GC="ComponentProvider",nT=new Map;function HC(s,e,n,a,o){return new lx(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,C0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const I0="firestore.googleapis.com",sT=!0;class iT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I0,this.ssl=sT}else this.host=e.host,this.ssl=e.ssl??sT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=l0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p2)throw new xe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new PR;switch(a.type){case"firstParty":return new HR(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new xe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=nT.get(n);a&&(Re(GC,"Removing Datastore"),nT.delete(n),a.terminate())})(this),Promise.resolve()}}function XC(s,e,n,a={}){s=vl(s,Kd);const o=mp(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(gA(`https://${g}`),TA("Firestore",!0)),u.host!==I0&&u.host!==g&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:g,ssl:o,emulatorOptions:a};if(!fd(v,h)&&(s._setSettings(v),a.mockUserToken)){let _,S;if(typeof a.mockUserToken=="string")_=a.mockUserToken,S=es.MOCK_USER;else{_=yA(a.mockUserToken,s._app?.options.projectId);const A=a.mockUserToken.sub||a.mockUserToken.user_id;if(!A)throw new xe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new es(A)}s._authCredentials=new FR(new yb(_,S))}}class Ll{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ll(this.firestore,e,this._query)}}class Sn{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}toJSON(){return{type:Sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Pc(n,Sn._jsonSchema))return new Sn(e,a||null,new Ve(zt.fromString(n.referencePath)))}}Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:vn("string",Sn._jsonSchemaVersion),referencePath:vn("string")};class mr extends Ll{constructor(e,n,a){super(e,n,Ub(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Ve(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function YC(s,e,...n){if(s=Sa(s),Eb("collection","path",e),s instanceof Kd){const a=zt.fromString(e,...n);return gv(a),new mr(s,null,a)}{if(!(s instanceof Sn||s instanceof mr))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(zt.fromString(e,...n));return gv(a),new mr(s.firestore,null,a)}}function ho(s,e,...n){if(s=Sa(s),arguments.length===1&&(e=gp.newId()),Eb("doc","path",e),s instanceof Kd){const a=zt.fromString(e,...n);return _v(a),new Sn(s,null,new Ve(a))}{if(!(s instanceof Sn||s instanceof mr))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(zt.fromString(e,...n));return _v(a),new Sn(s.firestore,s instanceof mr?s.converter:null,new Ve(a))}}const aT="AsyncQueue";class rT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f0(this,"async_queue_retry"),this._c=()=>{const a=ym();a&&Re(aT,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;Re(aT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Aa("INTERNAL UNHANDLED ERROR: ",oT(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Mp.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ze(47125,{Pc:oT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function oT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Wd extends Kd{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new rT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rT(e),this._firestoreClient=void 0,await e}}}function $C(s,e){const n=typeof s=="object"?s:lb(),a=typeof s=="string"?s:pd,o=Ud(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=pA("firestore");u&&XC(o,...u)}return o}function k0(s){if(s._terminated)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||QC(s),s._firestoreClient}function QC(s){const e=s._freezeSettings(),n=HC(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new VC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(Hn.fromBase64String(e))}catch(n){throw new xe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oi(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pc(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:vn("string",oi._jsonSchemaVersion),bytes:vn("string")};class L0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class D0{constructor(e){this._methodName=e}}class Fi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Pc(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:vn("string",Fi._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};class Ei{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pc(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ei(e.vectorValues);throw new xe(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:vn("string",Ei._jsonSchemaVersion),vectorValues:vn("object")};const KC=/^__.*__$/;class WC{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}function O0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{dataSource:s})}}class Pp{constructor(e,n,a,o,u,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(O0(this.dataSource)&&KC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JC{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Yd(e)}createContext(e,n,a,o=!1){return new Pp({dataSource:e,methodName:n,targetDoc:a,path:Gn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j0(s){const e=s._freezeSettings(),n=Yd(s._databaseId);return new JC(s._databaseId,!!e.ignoreUndefinedProperties,n)}function ZC(s,e,n,a,o,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);V0("Data must be an object, but it was:",h,a);const g=M0(a,h);let v,_;if(u.merge)v=new yi(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const A of u.mergeFields){const C=Jd(e,A,n);if(!h.contains(C))throw new xe(me.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);sI(S,C)||S.push(C)}v=new yi(S),_=h.fieldTransforms.filter((A=>v.covers(A.field)))}else v=null,_=h.fieldTransforms;return new WC(new ri(g),v,_)}function eI(s,e,n,a=!1){return Fp(n,s.createContext(a?4:3,e))}function Fp(s,e){if(U0(s=Sa(s)))return V0("Unsupported field value:",e,s),M0(s,e);if(s instanceof D0)return(function(a,o){if(!O0(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let v=Fp(g,o.childContextForArray(h));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),h++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=Sa(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Dx(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Yt.fromDate(a);return{timestampValue:Td(o.serializer,u)}}if(a instanceof Yt){const u=new Yt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Td(o.serializer,u)}}if(a instanceof Fi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof oi)return{bytesValue:e0(o.serializer,a._byteString)};if(a instanceof Sn){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Rp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Ei)return(function(h,g){const v=h instanceof Ei?h.toArray():h;return{mapValue:{fields:{[xb]:{stringValue:Cb},[_d]:{arrayValue:{values:v.map((S=>{if(typeof S!="number")throw g.createError("VectorValues must only contain numeric values.");return Sp(g.serializer,S)}))}}}}}})(a,o);if(o0(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Vd(a)}`)})(s,e)}function M0(s,e){const n={};return bb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(s,((a,o)=>{const u=Fp(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function U0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Yt||s instanceof Fi||s instanceof oi||s instanceof Sn||s instanceof D0||s instanceof Ei||o0(s))}function V0(s,e,n){if(!U0(n)||!vb(n)){const a=Vd(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function Jd(s,e,n){if((e=Sa(e))instanceof L0)return e._internalPath;if(typeof e=="string")return nI(s,e);throw wd("Field path arguments must be of type string or ",s,!1,void 0,n)}const tI=new RegExp("[~\\*/\\[\\]]");function nI(s,e,n){if(e.search(tI)>=0)throw wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new L0(...e.split("."))._internalPath}catch{throw wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function wd(s,e,n,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||h)&&(v+=" (found",u&&(v+=` in field ${a}`),h&&(v+=` in document ${o}`),v+=")"),new xe(me.INVALID_ARGUMENT,g+s+v)}function sI(s,e){return s.some((n=>n.isEqual(e)))}class iI{convertValue(e,n="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return lo(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[_d].arrayValue?.values?.map((a=>dn(a.doubleValue)));return new Ei(n)}convertGeoPoint(e){return new Fi(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Pd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=zt.fromString(e);xt(r0(a),9688,{name:e});const o=new Oc(a.get(1),a.get(3)),u=new Ve(a.popFirst(5));return o.isEqual(n)||Aa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class aI extends iI{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}const lT="@firebase/firestore",cT="4.10.0";class q0{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Jd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rI extends q0{data(){return super.data()}}function oI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new xe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class lI extends zp{}function cI(s,e,...n){let a=[];e instanceof zp&&a.push(e),a=a.concat(n),(function(u){const h=u.filter((v=>v instanceof Gp)).length,g=u.filter((v=>v instanceof Zd)).length;if(h>1||h>0&&g>0)throw new xe(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Zd extends lI{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Zd(e,n,a)}_apply(e){const n=this._parse(e);return B0(e._query,n),new Ll(e.firestore,e.converter,Xm(e._query,n))}_parse(e){const n=j0(e.firestore);return(function(u,h,g,v,_,S,A){let C;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new xe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){fT(A,S);const z=[];for(const F of A)z.push(dT(v,u,F));C={arrayValue:{values:z}}}else C=dT(v,u,A)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||fT(A,S),C=eI(g,h,A,S==="in"||S==="not-in");return En.create(_,S,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uT(s,e,n){const a=e,o=Jd("where",s);return Zd._create(o,a,n)}class Gp extends zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gp(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const v of g)B0(h,v),h=Xm(h,v)})(e._query,n),new Ll(e.firestore,e.converter,Xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dT(s,e,n){if(typeof(n=Sa(n))=="string"){if(n==="")throw new xe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vb(e)&&n.indexOf("/")!==-1)throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(zt.fromString(n));if(!Ve.isDocumentKey(a))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return wv(s,new Ve(a))}if(n instanceof Sn)return wv(s,n._key);throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vd(n)}.`)}function fT(s,e){if(!Array.isArray(s)||s.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B0(s,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function uI(s,e,n){let a;return a=s?s.toFirestore(e):e,a}class td{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pl extends q0{constructor(e,n,a,o,u,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Jd("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pl._jsonSchemaVersion="firestore/documentSnapshot/1.0",pl._jsonSchema={type:vn("string",pl._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class cd extends pl{data(e={}){return super.data(e)}}class _l{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new td(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new cd(this._firestore,this._userDataWriter,a.key,a,new td(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const v=new cd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new td(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const v=new cd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new td(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return g.type!==0&&(_=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),S=h.indexOf(g.doc.key)),{type:dI(g.type),doc:v,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:s})}}_l._jsonSchemaVersion="firestore/querySnapshot/1.0",_l._jsonSchema={type:vn("string",_l._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};function fI(s){s=vl(s,Ll);const e=vl(s.firestore,Wd),n=k0(e),a=new aI(e);return oI(s._query),FC(n,s._query).then((o=>new _l(e,a,s,o)))}function Hp(s,e,n){s=vl(s,Sn);const a=vl(s.firestore,Wd),o=uI(s.converter,e),u=j0(a);return P0(a,[ZC(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Bi.none())])}function ef(s){return P0(vl(s.firestore,Wd),[new Np(s._key,Bi.none())])}function P0(s,e){const n=k0(s);return zC(n,e)}(function(e,n=!0){BR(RR),pr(new Na("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new Wd(new zR(a.getProvider("auth-internal")),new XR(h,a.getProvider("app-check-internal")),cx(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Vi(lT,cT,e),Vi(lT,cT,"esm2020")})();const F0="@firebase/installations",Xp="0.6.19";const z0=1e4,G0=`w:${Xp}`,H0="FIS_v2",hI="https://firebaseinstallations.googleapis.com/v1",mI=3600*1e3,pI="installations",_I="Installations";const gI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},io=new jd(pI,_I,gI);function X0(s){return s instanceof oo&&s.code.includes("request-failed")}function Y0({projectId:s}){return`${hI}/projects/${s}/installations`}function $0(s){return{token:s.token,requestStatus:2,expiresIn:EI(s.expiresIn),creationTime:Date.now()}}async function Q0(s,e){const a=(await e.json()).error;return io.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function K0({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function yI(s,{refreshToken:e}){const n=K0(s);return n.append("Authorization",vI(e)),n}async function W0(s){const e=await s();return e.status>=500&&e.status<600?s():e}function EI(s){return Number(s.replace("s","000"))}function vI(s){return`${H0} ${s}`}async function TI({appConfig:s,heartbeatServiceProvider:e},{fid:n}){const a=Y0(s),o=K0(s),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={fid:n,authVersion:H0,appId:s.appId,sdkVersion:G0},g={method:"POST",headers:o,body:JSON.stringify(h)},v=await W0(()=>fetch(a,g));if(v.ok){const _=await v.json();return{fid:_.fid||n,registrationStatus:2,refreshToken:_.refreshToken,authToken:$0(_.authToken)}}else throw await Q0("Create Installation",v)}function J0(s){return new Promise(e=>{setTimeout(e,s)})}function bI(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const SI=/^[cdef][\w-]{21}$/,sp="";function NI(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=wI(s);return SI.test(n)?n:sp}catch{return sp}}function wI(s){return bI(s).substr(0,22)}function tf(s){return`${s.appName}!${s.appId}`}const Z0=new Map;function e1(s,e){const n=tf(s);t1(n,e),AI(n,e)}function t1(s,e){const n=Z0.get(s);if(n)for(const a of n)a(e)}function AI(s,e){const n=RI();n&&n.postMessage({key:s,fid:e}),xI()}let to=null;function RI(){return!to&&"BroadcastChannel"in self&&(to=new BroadcastChannel("[Firebase] FID Change"),to.onmessage=s=>{t1(s.data.key,s.data.fid)}),to}function xI(){Z0.size===0&&to&&(to.close(),to=null)}const CI="firebase-installations-database",II=1,ao="firebase-installations-store";let vm=null;function Yp(){return vm||(vm=Md(CI,II,{upgrade:(s,e)=>{e===0&&s.createObjectStore(ao)}})),vm}async function Ad(s,e){const n=tf(s),o=(await Yp()).transaction(ao,"readwrite"),u=o.objectStore(ao),h=await u.get(n);return await u.put(e,n),await o.done,(!h||h.fid!==e.fid)&&e1(s,e.fid),e}async function n1(s){const e=tf(s),a=(await Yp()).transaction(ao,"readwrite");await a.objectStore(ao).delete(e),await a.done}async function nf(s,e){const n=tf(s),o=(await Yp()).transaction(ao,"readwrite"),u=o.objectStore(ao),h=await u.get(n),g=e(h);return g===void 0?await u.delete(n):await u.put(g,n),await o.done,g&&(!h||h.fid!==g.fid)&&e1(s,g.fid),g}async function $p(s){let e;const n=await nf(s.appConfig,a=>{const o=kI(a),u=LI(s,o);return e=u.registrationPromise,u.installationEntry});return n.fid===sp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function kI(s){const e=s||{fid:NI(),registrationStatus:0};return s1(e)}function LI(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(io.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=DI(s,n);return{installationEntry:n,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OI(s)}:{installationEntry:e}}async function DI(s,e){try{const n=await TI(s,e);return Ad(s.appConfig,n)}catch(n){throw X0(n)&&n.customData.serverCode===409?await n1(s.appConfig):await Ad(s.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function OI(s){let e=await hT(s.appConfig);for(;e.registrationStatus===1;)await J0(100),e=await hT(s.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:a}=await $p(s);return a||n}return e}function hT(s){return nf(s,e=>{if(!e)throw io.create("installation-not-found");return s1(e)})}function s1(s){return jI(s)?{fid:s.fid,registrationStatus:0}:s}function jI(s){return s.registrationStatus===1&&s.registrationTime+z0<Date.now()}async function MI({appConfig:s,heartbeatServiceProvider:e},n){const a=UI(s,n),o=yI(s,n),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={installation:{sdkVersion:G0,appId:s.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},v=await W0(()=>fetch(a,g));if(v.ok){const _=await v.json();return $0(_)}else throw await Q0("Generate Auth Token",v)}function UI(s,{fid:e}){return`${Y0(s)}/${e}/authTokens:generate`}async function Qp(s,e=!1){let n;const a=await nf(s.appConfig,u=>{if(!i1(u))throw io.create("not-registered");const h=u.authToken;if(!e&&BI(h))return u;if(h.requestStatus===1)return n=VI(s,e),u;{if(!navigator.onLine)throw io.create("app-offline");const g=FI(u);return n=qI(s,g),g}});return n?await n:a.authToken}async function VI(s,e){let n=await mT(s.appConfig);for(;n.authToken.requestStatus===1;)await J0(100),n=await mT(s.appConfig);const a=n.authToken;return a.requestStatus===0?Qp(s,e):a}function mT(s){return nf(s,e=>{if(!i1(e))throw io.create("not-registered");const n=e.authToken;return zI(n)?{...e,authToken:{requestStatus:0}}:e})}async function qI(s,e){try{const n=await MI(s,e),a={...e,authToken:n};return await Ad(s.appConfig,a),n}catch(n){if(X0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await n1(s.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Ad(s.appConfig,a)}throw n}}function i1(s){return s!==void 0&&s.registrationStatus===2}function BI(s){return s.requestStatus===2&&!PI(s)}function PI(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+mI}function FI(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function zI(s){return s.requestStatus===1&&s.requestTime+z0<Date.now()}async function GI(s){const e=s,{installationEntry:n,registrationPromise:a}=await $p(e);return a?a.catch(console.error):Qp(e).catch(console.error),n.fid}async function HI(s,e=!1){const n=s;return await XI(n),(await Qp(n,e)).token}async function XI(s){const{registrationPromise:e}=await $p(s);e&&await e}function YI(s){if(!s||!s.options)throw Tm("App Configuration");if(!s.name)throw Tm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!s.options[n])throw Tm(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Tm(s){return io.create("missing-app-config-values",{valueName:s})}const a1="installations",$I="installations-internal",QI=s=>{const e=s.getProvider("app").getImmediate(),n=YI(e),a=Ud(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},KI=s=>{const e=s.getProvider("app").getImmediate(),n=Ud(e,a1).getImmediate();return{getId:()=>GI(n),getToken:o=>HI(n,o)}};function WI(){pr(new Na(a1,QI,"PUBLIC")),pr(new Na($I,KI,"PRIVATE"))}WI();Vi(F0,Xp);Vi(F0,Xp,"esm2020");const JI="/firebase-messaging-sw.js",ZI="/firebase-cloud-messaging-push-scope",r1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ek="https://fcmregistrations.googleapis.com/v1",o1="google.c.a.c_id",tk="google.c.a.c_l",nk="google.c.a.ts",sk="google.c.a.e",pT=1e4;var _T;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(_T||(_T={}));var Vc;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Vc||(Vc={}));function ga(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ik(s){const e="=".repeat((4-s.length%4)%4),n=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(n),o=new Uint8Array(a.length);for(let u=0;u<a.length;++u)o[u]=a.charCodeAt(u);return o}const bm="fcm_token_details_db",ak=5,gT="fcm_token_object_Store";async function rk(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(bm))return null;let e=null;return(await Md(bm,ak,{upgrade:async(a,o,u,h)=>{if(o<2||!a.objectStoreNames.contains(gT))return;const g=h.objectStore(gT),v=await g.index("fcmSenderId").get(s);if(await g.clear(),!!v){if(o===2){const _=v;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:_.createTime??Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:ga(_.vapidKey)}}}else if(o===3){const _=v;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:ga(_.auth),p256dh:ga(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:ga(_.vapidKey)}}}else if(o===4){const _=v;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:ga(_.auth),p256dh:ga(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:ga(_.vapidKey)}}}}}})).close(),await fm(bm),await fm("fcm_vapid_details_db"),await fm("undefined"),ok(e)?e:null}function ok(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const lk="firebase-messaging-database",ck=1,qc="firebase-messaging-store";let Sm=null;function l1(){return Sm||(Sm=Md(lk,ck,{upgrade:(s,e)=>{e===0&&s.createObjectStore(qc)}})),Sm}async function uk(s){const e=c1(s),a=await(await l1()).transaction(qc).objectStore(qc).get(e);if(a)return a;{const o=await rk(s.appConfig.senderId);if(o)return await Kp(s,o),o}}async function Kp(s,e){const n=c1(s),o=(await l1()).transaction(qc,"readwrite");return await o.objectStore(qc).put(e,n),await o.done,e}function c1({appConfig:s}){return s.appId}const dk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ns=new jd("messaging","Messaging",dk);async function fk(s,e){const n=await Jp(s),a=u1(e),o={method:"POST",headers:n,body:JSON.stringify(a)};let u;try{u=await(await fetch(Wp(s.appConfig),o)).json()}catch(h){throw ns.create("token-subscribe-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ns.create("token-subscribe-failed",{errorInfo:h})}if(!u.token)throw ns.create("token-subscribe-no-token");return u.token}async function hk(s,e){const n=await Jp(s),a=u1(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(a)};let u;try{u=await(await fetch(`${Wp(s.appConfig)}/${e.token}`,o)).json()}catch(h){throw ns.create("token-update-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ns.create("token-update-failed",{errorInfo:h})}if(!u.token)throw ns.create("token-update-no-token");return u.token}async function mk(s,e){const a={method:"DELETE",headers:await Jp(s)};try{const u=await(await fetch(`${Wp(s.appConfig)}/${e}`,a)).json();if(u.error){const h=u.error.message;throw ns.create("token-unsubscribe-failed",{errorInfo:h})}}catch(o){throw ns.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}}function Wp({projectId:s}){return`${ek}/projects/${s}/registrations`}async function Jp({appConfig:s,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function u1({p256dh:s,auth:e,endpoint:n,vapidKey:a}){const o={web:{endpoint:n,auth:e,p256dh:s}};return a!==r1&&(o.web.applicationPubKey=a),o}const pk=10080*60*1e3;async function _k(s){const e=await yk(s.swRegistration,s.vapidKey),n={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:ga(e.getKey("auth")),p256dh:ga(e.getKey("p256dh"))},a=await uk(s.firebaseDependencies);if(a){if(Ek(a.subscriptionOptions,n))return Date.now()>=a.createTime+pk?gk(s,{token:a.token,createTime:Date.now(),subscriptionOptions:n}):a.token;try{await mk(s.firebaseDependencies,a.token)}catch(o){console.warn(o)}return yT(s.firebaseDependencies,n)}else return yT(s.firebaseDependencies,n)}async function gk(s,e){try{const n=await hk(s.firebaseDependencies,e),a={...e,token:n,createTime:Date.now()};return await Kp(s.firebaseDependencies,a),n}catch(n){throw n}}async function yT(s,e){const a={token:await fk(s,e),createTime:Date.now(),subscriptionOptions:e};return await Kp(s,a),a.token}async function yk(s,e){const n=await s.pushManager.getSubscription();return n||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ik(e)})}function Ek(s,e){const n=e.vapidKey===s.vapidKey,a=e.endpoint===s.endpoint,o=e.auth===s.auth,u=e.p256dh===s.p256dh;return n&&a&&o&&u}function ET(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return vk(e,s),Tk(e,s),bk(e,s),e}function vk(s,e){if(!e.notification)return;s.notification={};const n=e.notification.title;n&&(s.notification.title=n);const a=e.notification.body;a&&(s.notification.body=a);const o=e.notification.image;o&&(s.notification.image=o);const u=e.notification.icon;u&&(s.notification.icon=u)}function Tk(s,e){e.data&&(s.data=e.data)}function bk(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const n=e.fcmOptions?.link??e.notification?.click_action;n&&(s.fcmOptions.link=n);const a=e.fcmOptions?.analytics_label;a&&(s.fcmOptions.analyticsLabel=a)}function Sk(s){return typeof s=="object"&&!!s&&o1 in s}function Nk(s){if(!s||!s.options)throw Nm("App Configuration Object");if(!s.name)throw Nm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=s;for(const a of e)if(!n[a])throw Nm(a);return{appName:s.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Nm(s){return ns.create("missing-app-config-values",{valueName:s})}class wk{constructor(e,n,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=Nk(e);this.firebaseDependencies={app:e,appConfig:o,installations:n,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function Ak(s){try{s.swRegistration=await navigator.serviceWorker.register(JI,{scope:ZI}),s.swRegistration.update().catch(()=>{}),await Rk(s.swRegistration)}catch(e){throw ns.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function Rk(s){return new Promise((e,n)=>{const a=setTimeout(()=>n(new Error(`Service worker not registered after ${pT} ms`)),pT),o=s.installing||s.waiting;s.active?(clearTimeout(a),e()):o?o.onstatechange=u=>{u.target?.state==="activated"&&(o.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),n(new Error("No incoming service worker found.")))})}async function xk(s,e){if(!e&&!s.swRegistration&&await Ak(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ns.create("invalid-sw-registration");s.swRegistration=e}}async function Ck(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=r1)}async function d1(s,e){if(!navigator)throw ns.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ns.create("permission-blocked");return await Ck(s,e?.vapidKey),await xk(s,e?.serviceWorkerRegistration),_k(s)}async function Ik(s,e,n){const a=kk(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:n[o1],message_name:n[tk],message_time:n[nk],message_device_time:Math.floor(Date.now()/1e3)})}function kk(s){switch(s){case Vc.NOTIFICATION_CLICKED:return"notification_open";case Vc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function Lk(s,e){const n=e.data;if(!n.isFirebaseMessaging)return;s.onMessageHandler&&n.messageType===Vc.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(ET(n)):s.onMessageHandler.next(ET(n)));const a=n.data;Sk(a)&&a[sk]==="1"&&await Ik(s,n.messageType,a)}const vT="@firebase/messaging",TT="0.12.23";const Dk=s=>{const e=new wk(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Lk(e,n)),e},Ok=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:a=>d1(e,a)}};function jk(){pr(new Na("messaging",Dk,"PUBLIC")),pr(new Na("messaging-internal",Ok,"PRIVATE")),Vi(vT,TT),Vi(vT,TT,"esm2020")}async function f1(){try{await sb()}catch{return!1}return typeof window<"u"&&nb()&&wA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Mk(s,e){if(!navigator)throw ns.create("only-available-in-window");return s.onMessageHandler=e,()=>{s.onMessageHandler=null}}function Uk(s=lb()){return f1().then(e=>{if(!e)throw ns.create("unsupported-browser")},e=>{throw ns.create("indexed-db-unsupported")}),Ud(Sa(s),"messaging").getImmediate()}async function Vk(s,e){return s=Sa(s),d1(s,e)}function qk(s,e){return s=Sa(s),Mk(s,e)}jk();const ud={apiKey:"AIzaSyA3dJLU8Xw6vcqXtOhVbuI5aO_ImdT8upg",authDomain:"goal-game-7ad53.firebaseapp.com",projectId:"goal-game-7ad53",storageBucket:"goal-game-7ad53.firebasestorage.app",messagingSenderId:"86507800050",appId:"1:86507800050:web:f7674a55bc2291686f976b"},h1="BLD2XB0Bh-Y2EwwHU1YimB6-tzKQNrGh-bzoZHXbSWlvQt1mg6K5c7EJWfBIDrGY0cQJXO4LNrKD9MjlZhMsb3c";let wm=null,Am=null,nd=null;function Hi(){return!!(ud.apiKey&&ud.projectId&&ud.messagingSenderId&&h1)}function m1(){if(!wm){if(!Hi())throw new Error("Firebase is not configured. Please add your Firebase config to .env file.");wm=ob(ud)}return wm}function mo(){return Am||(Am=$C(m1())),Am}async function p1(){return nd||(await f1()?(nd=Uk(m1()),nd):(console.warn("Firebase Messaging is not supported in this browser"),null))}function xa(){let s=localStorage.getItem("goal-game-device-id");return s||(s=crypto.randomUUID(),localStorage.setItem("goal-game-device-id",s)),s}const wl="scheduled_notifications",_1="fcm_tokens";async function Bk(s,e,n,a,o,u){if(!Hi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const h=mo(),g=xa(),v=new Date(`${n}T${a}`),_=new Date(v.getTime()-o*60*1e3);if(_<=new Date)return console.warn("Notification trigger time is in the past, skipping"),null;const S=`${g}_event_${s}`,A={id:S,eventId:s,eventTitle:e,eventDate:n,eventTime:a,triggerAt:_.toISOString(),fcmToken:u,deviceId:g,status:"pending",createdAt:new Date().toISOString(),notificationType:"event"};try{return await Hp(ho(h,wl,S),A),S}catch(C){return console.error("Failed to schedule notification:",C),null}}async function Pk(s,e,n,a,o){if(!Hi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const u=mo(),h=xa(),g=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z",v=new Date(g);if(v<=new Date)return console.warn("Buff expiry time is in the past, skipping notification"),null;const _=`${h}_buff_${s}`,S={id:_,buffLogId:s,buffName:e,buffType:n,triggerAt:v.toISOString(),fcmToken:o,deviceId:h,status:"pending",createdAt:new Date().toISOString(),notificationType:"buff_expiry"};try{return await Hp(ho(u,wl,_),S),_}catch(A){return console.error("Failed to schedule buff expiry notification:",A),null}}async function Fk(s){if(!Hi())return;const e=mo(),a=`${xa()}_buff_${s}`;try{await ef(ho(e,wl,a))}catch(o){console.error("Failed to cancel buff expiry notification:",o)}}async function zk(s){if(!Hi())return;const e=mo(),a=`${xa()}_event_${s}`;try{await ef(ho(e,wl,a))}catch(o){console.error("Failed to cancel notification:",o)}}async function Gk(){if(!Hi())return;const s=mo(),e=xa();try{const n=cI(YC(s,wl),uT("deviceId","==",e),uT("status","==","pending")),o=(await fI(n)).docs.map(u=>ef(ho(s,wl,u.id)));await Promise.all(o)}catch(n){console.error("Failed to cancel all notifications:",n)}}async function Hk(s){if(!Hi())return;const e=mo(),n=xa();try{await Hp(ho(e,_1,n),{token:s,deviceId:n,updatedAt:new Date().toISOString(),platform:navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?"ios":navigator.userAgent.includes("Android")?"android":"web"})}catch(a){console.error("Failed to save FCM token:",a)}}async function Xk(){if(!Hi())return;const s=mo(),e=xa();try{await ef(ho(s,_1,e))}catch(n){console.error("Failed to delete FCM token:",n)}}function Yk(){return"Notification"in window?Notification.permission:"unsupported"}function Zp(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function e_(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}function t_(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function $k(){return e_()&&!t_()?!1:Zp()}async function Qk(){if(!Hi())return{success:!1,token:null,error:"Firebase is not configured"};if(!Zp())return{success:!1,token:null,error:"Notifications are not supported in this browser"};if(e_()&&!t_())return{success:!1,token:null,error:"On iOS, you must add this app to your home screen first, then enable notifications"};try{if(await Notification.requestPermission()!=="granted")return{success:!1,token:null,error:"Notification permission was denied"};const e=await p1();if(!e)return{success:!1,token:null,error:"Failed to initialize Firebase Messaging"};const n=await navigator.serviceWorker.ready,a=await Vk(e,{vapidKey:h1,serviceWorkerRegistration:n});return a?(await Hk(a),{success:!0,token:a}):{success:!1,token:null,error:"Failed to get FCM token"}}catch(s){return console.error("Error requesting notification permission:",s),{success:!1,token:null,error:s instanceof Error?s.message:"Unknown error occurred"}}}async function Kk(){try{await Xk(),await Gk()}catch(s){console.error("Error disabling notifications:",s)}}function Wk(s){let e=null;return p1().then(n=>{n&&(e=qk(n,a=>{if(console.log("Foreground message received:",a),s(a),a.notification){const{title:o,body:u}=a.notification;o&&new Notification(o,{body:u||"",icon:"/goal-game/icons/icon-192.png",badge:"/goal-game/icons/icon-192.png",tag:a.data?.eventId||"goal-game-notification"})}}))}),()=>{e&&e()}}function g1(){const s=ae(),e=xa(),n=s.exec("SELECT enabled, default_reminder_minutes, fcm_token, device_id FROM notification_settings WHERE id = 1");if(n.length===0||n[0].values.length===0)return s.run("INSERT OR REPLACE INTO notification_settings (id, enabled, default_reminder_minutes, fcm_token, device_id) VALUES (1, 0, 15, NULL, ?)",[e]),{enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:e};const a=n[0].values[0];return{enabled:!!a[0],defaultReminderMinutes:a[1],fcmToken:a[2],deviceId:a[3]}}async function Rm(s){const e=ae(),n=xa(),o={...g1(),...s};e.run(`UPDATE notification_settings SET
      enabled = ?,
      default_reminder_minutes = ?,
      fcm_token = ?,
      device_id = ?,
      updated_at = datetime('now')
    WHERE id = 1`,[o.enabled?1:0,o.defaultReminderMinutes,o.fcmToken,n]),await ye()}function y1(){const[s,e]=L.useState({enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:""}),[n,a]=L.useState("default"),[o,u]=L.useState(!1),[h,g]=L.useState(null),v=Zp(),_=Hi(),S=$k(),A=e_(),C=t_();L.useEffect(()=>{try{const re=g1();e(re),a(Yk())}catch(re){console.error("Failed to load notification settings:",re)}},[]),L.useEffect(()=>!s.enabled||!s.fcmToken?void 0:Wk(_e=>{console.log("Notification received in foreground:",_e)}),[s.enabled,s.fcmToken]);const B=L.useCallback(async()=>{u(!0),g(null);try{const re=await Qk();return re.success?(await Rm({enabled:!0,fcmToken:re.token}),e(_e=>({..._e,enabled:!0,fcmToken:re.token})),a("granted"),!0):(g(re.error||"Failed to enable notifications"),!1)}catch(re){const _e=re instanceof Error?re.message:"Unknown error";return g(_e),!1}finally{u(!1)}},[]),z=L.useCallback(async()=>{u(!0),g(null);try{await Kk(),await Rm({enabled:!1,fcmToken:null}),e(re=>({...re,enabled:!1,fcmToken:null}))}catch(re){const _e=re instanceof Error?re.message:"Unknown error";g(_e)}finally{u(!1)}},[]),F=L.useCallback(async re=>{await Rm({defaultReminderMinutes:re}),e(_e=>({..._e,defaultReminderMinutes:re}))},[]),U=L.useCallback(async(re,_e,ve,j,D)=>{!s.enabled||!s.fcmToken||await Bk(re,_e,ve,j,D,s.fcmToken)},[s.enabled,s.fcmToken]),G=L.useCallback(async re=>{await zk(re)},[]),Y=L.useCallback(async(re,_e,ve,j)=>{!s.enabled||!s.fcmToken||await Pk(re,_e,ve,j,s.fcmToken)},[s.enabled,s.fcmToken]),se=L.useCallback(async re=>{await Fk(re)},[]);return{settings:s,permissionState:n,isSupported:v,isConfigured:_,canEnable:S,isIOS:A,isStandalone:C,loading:o,error:h,enableNotifications:B,disableNotificationsHandler:z,setDefaultReminderMinutes:F,scheduleEventReminder:U,cancelEventReminder:G,scheduleBuffExpiry:Y,cancelBuffExpiry:se}}const Jk=[{type:"activate_buffs",title:"Habit Builder",description:"Activate {target} buff(s) today",targetRange:[2,4],xpReward:25},{type:"complete_steps",title:"Step by Step",description:"Complete {target} quest step(s) today",targetRange:[3,7],xpReward:30},{type:"no_debuffs",title:"Clean Slate",description:"Avoid activating any debuffs today",targetRange:[1,1],xpReward:40},{type:"gym_session",title:"Iron Warrior",description:"Complete a gym workout today",targetRange:[1,1],xpReward:35},{type:"early_start",title:"Early Bird",description:"Complete a habit before 8 AM",targetRange:[1,1],xpReward:30},{type:"activate_specific",title:"Wellness Warrior",description:"Activate a health-related buff",targetRange:[1,1],xpReward:20}],bT=50;function Dl(){return new Date().toISOString().split("T")[0]}function ST(s){const e=ae(),n=s||Dl(),a=e.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE date = ? ORDER BY id`,[n]);return a.length?a[0].values.map(o=>({id:o[0],date:o[1],quest_type:o[2],title:o[3],description:o[4],target_value:o[5],current_value:o[6],xp_reward:o[7],is_completed:!!o[8],completed_at:o[9]})):[]}function Zk(s){const e=ae(),n=Dl(),a=e.exec("SELECT id FROM daily_quest_bonus WHERE date = ?",[n]);return a.length>0&&a[0].values.length>0}async function eL(s){const e=ae(),n=Dl();e.run("INSERT OR IGNORE INTO daily_quest_bonus (date, claimed_at) VALUES (?, datetime('now'))",[n]),await ye()}async function tL(){const s=ae(),e=Dl(),n=ST(e);if(n.length>0)return n;const o=[...Jk].sort(()=>Math.random()-.5).slice(0,3);for(const u of o){const h=u.targetRange[0]===u.targetRange[1]?u.targetRange[0]:Math.floor(Math.random()*(u.targetRange[1]-u.targetRange[0]+1))+u.targetRange[0],g=u.description.replace("{target}",h.toString());s.run(`INSERT INTO daily_quests (date, quest_type, title, description, target_value, xp_reward)
       VALUES (?, ?, ?, ?, ?, ?)`,[e,u.type,u.title,g,h,u.xpReward])}return await ye(),ST(e)}async function E1(s,e=1,n){const a=ae(),o=n||Dl(),u=a.exec(`SELECT id, current_value, target_value, is_completed FROM daily_quests
     WHERE date = ? AND quest_type = ? AND is_completed = 0`,[o,s]);if(!u.length||!u[0].values.length)return null;const h=u[0].values[0][0],g=u[0].values[0][1],v=u[0].values[0][2],_=g+e,S=_>=v;a.run(`UPDATE daily_quests SET current_value = ?, is_completed = ?, completed_at = ?
     WHERE id = ?`,[_,S?1:0,S?new Date().toISOString():null,h]),await ye();const A=a.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE id = ?`,[h]);if(!A.length)return null;const C=A[0].values[0];return{id:C[0],date:C[1],quest_type:C[2],title:C[3],description:C[4],target_value:C[5],current_value:C[6],xp_reward:C[7],is_completed:!!C[8],completed_at:C[9]}}async function nL(s){const e=ae(),n=Dl();(e.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) = ?`,[n])[0]?.values[0]?.[0]||0)===0&&await E1("no_debuffs",1,n)}function sL({grantXP:s}){const[e,n]=L.useState([]),[a,o]=L.useState(!1),[u,h]=L.useState(!0),g=L.useCallback(async()=>{const z=await tL();n(z),o(Zk()),h(!1)},[]);L.useEffect(()=>{g()},[g]),L.useEffect(()=>{const F=setInterval(()=>{const U=new Date().toISOString().split("T")[0];e.length>0&&e[0].date!==U&&g()},6e4);return()=>clearInterval(F)},[e,g]);const v=L.useCallback(async(z,F=1)=>{const U=await E1(z,F);return U?.is_completed&&await s(U.xp_reward,`Daily Quest: ${U.title}`,"daily_quest",U.id),await g(),U},[s,g]),_=L.useCallback(async()=>!e.every(F=>F.is_completed)||a?!1:(await eL(),await s(bT,"Daily Quest Bonus: All quests completed!","daily_quest_bonus"),o(!0),!0),[e,a,s]),S=L.useCallback(async()=>{await nL(),await g()},[g]),A=e.every(z=>z.is_completed),C=e.filter(z=>z.is_completed).length,B=e.filter(z=>z.is_completed).reduce((z,F)=>z+F.xp_reward,0);return{quests:e,loading:u,allCompleted:A,completedCount:C,bonusClaimed:a,bonusXp:bT,totalXpEarned:B,refresh:g,updateProgress:v,claimBonus:_,checkNoDebuffs:S}}const v1=[{days:3,title:"Getting Started",bonusXp:15,icon:""},{days:7,title:"One Week Strong",bonusXp:50,icon:""},{days:14,title:"Two Week Warrior",bonusXp:75,icon:""},{days:21,title:"Habit Forming",bonusXp:100,icon:""},{days:30,title:"Monthly Master",bonusXp:150,icon:""},{days:60,title:"Two Month Champion",bonusXp:250,icon:""},{days:90,title:"Quarterly Legend",bonusXp:400,icon:""},{days:180,title:"Half Year Hero",bonusXp:750,icon:""},{days:365,title:"Annual Achiever",bonusXp:1500,icon:""}];function iL(s){return v1.filter(e=>e.days<=s)}function aL(s){const e=iL(s);return e.length>0?e[e.length-1]:null}function T1(){return new Date().toISOString().split("T")[0]}function rL(){const s=new Date;return s.setDate(s.getDate()-1),s.toISOString().split("T")[0]}function b1(s){const e=ae(),n=T1(),a=rL(),o=e.exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-400 days')
     ORDER BY d DESC`,[s]),u=o.length?o[0].values.map(U=>U[0]):[],h=e.exec(`SELECT freeze_date FROM streak_freezes
     WHERE buff_definition_id = ? AND freeze_date >= date('now', '-400 days')`,[s]),g=h.length?h[0].values.map(U=>U[0]):[],v=e.exec(`SELECT used_date FROM streak_shield_uses
     WHERE buff_definition_id = ? AND used_date >= date('now', '-400 days')`,[s]),_=v.length?v[0].values.map(U=>U[0]):[];let S=0;const A=new Set([...u,...g,..._]);let C=n;if(!A.has(n))if(A.has(a))C=a;else if(g.includes(n))C=n;else return{buffDefinitionId:s,currentStreak:0,longestStreak:NT(s),lastActivatedDate:u[0]||null,isAtRisk:u.length>0&&u[0]===a,shieldActive:!1};for(;A.has(C);){S++;const U=new Date(C+"T12:00:00");U.setDate(U.getDate()-1),C=U.toISOString().split("T")[0]}const B=!u.includes(n)&&!g.includes(n)&&u.includes(a),z=_.includes(n),F=NT(s);return S>F&&oL(s,S),{buffDefinitionId:s,currentStreak:S,longestStreak:Math.max(S,F),lastActivatedDate:u[0]||null,isAtRisk:B,shieldActive:z}}function NT(s){const n=ae().exec("SELECT longest_streak FROM streak_records WHERE buff_definition_id = ?",[s]);return n.length&&n[0].values.length?n[0].values[0][0]:0}async function oL(s,e){ae().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, updated_at)
     VALUES (?, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       longest_streak = MAX(longest_streak, excluded.longest_streak),
       updated_at = datetime('now')`,[s,e]),await ye()}function S1(){const e=ae().exec("SELECT SUM(quantity) FROM streak_shields");return e.length&&e[0].values.length&&e[0].values[0][0]||0}async function lL(s){ae().run("INSERT INTO streak_shields (quantity) VALUES (?)",[s]),await ye()}async function cL(s){const e=ae(),n=T1();if(S1()<=0)return!1;const o=e.exec("SELECT id FROM streak_shield_uses WHERE buff_definition_id = ? AND used_date = ?",[s,n]);if(o.length&&o[0].values.length)return!1;const u=b1(s);return e.run(`UPDATE streak_shields SET quantity = quantity - 1
     WHERE id = (SELECT id FROM streak_shields WHERE quantity > 0 ORDER BY earned_at LIMIT 1)`),e.run(`INSERT INTO streak_shield_uses (buff_definition_id, used_date, streak_saved)
     VALUES (?, ?, ?)`,[s,n,u.currentStreak]),e.run("DELETE FROM streak_shields WHERE quantity <= 0"),await ye(),!0}function uL(s){const n=ae().exec(`SELECT id, buff_definition_id, freeze_date, reason, created_at
     FROM streak_freezes WHERE buff_definition_id = ? AND freeze_date >= date('now')
     ORDER BY freeze_date`,[s]);return n.length?n[0].values.map(a=>({id:a[0],buff_definition_id:a[1],freeze_date:a[2],reason:a[3],created_at:a[4]})):[]}async function dL(s,e,n){ae().run(`INSERT OR IGNORE INTO streak_freezes (buff_definition_id, freeze_date, reason)
     VALUES (?, ?, ?)`,[s,e,n||null]),await ye()}async function fL(s){ae().run("DELETE FROM streak_freezes WHERE id = ?",[s]),await ye()}function hL(s){const n=ae().exec("SELECT last_milestone_claimed FROM streak_records WHERE buff_definition_id = ?",[s]);return n.length&&n[0].values.length?n[0].values[0][0]:0}async function mL(s,e){ae().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, last_milestone_claimed, updated_at)
     VALUES (?, 0, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       last_milestone_claimed = ?,
       updated_at = datetime('now')`,[s,e,e]),await ye()}function wT(s,e){const n=hL(s);return v1.filter(a=>a.days<=e&&a.days>n)}function pL(){const e=ae().exec("SELECT DISTINCT definition_id FROM buff_log WHERE definition_id IN (SELECT id FROM buff_definitions WHERE type = ?)",["buff"]),n=new Map;if(!e.length)return n;for(const a of e[0].values){const o=a[0];n.set(o,b1(o))}return n}function _L({grantXP:s}){const[e,n]=L.useState(new Map),[a,o]=L.useState(0),[u,h]=L.useState(!0),g=L.useCallback(()=>{n(pL()),o(S1()),h(!1)},[]);L.useEffect(()=>{g()},[g]);const v=L.useCallback(U=>e.get(U)||{buffDefinitionId:U,currentStreak:0,longestStreak:0,lastActivatedDate:null,isAtRisk:!1,shieldActive:!1},[e]),_=L.useCallback(async U=>{const G=await cL(U);return G&&g(),G},[g]),S=L.useCallback(async(U,G,Y)=>{await dL(U,G,Y),g()},[g]),A=L.useCallback(async U=>{await fL(U),g()},[g]),C=L.useCallback(U=>uL(U),[]),B=L.useCallback(async U=>{const G=v(U),Y=wT(U,G.currentStreak);for(const se of Y)await s(se.bonusXp,`Streak Milestone: ${se.title} (${se.days} days)`,"streak_milestone",U),await mL(U,se.days);return g(),Y},[v,s,g]),z=L.useCallback(U=>{const G=v(U);return wT(U,G.currentStreak)},[v]),F=L.useCallback(async U=>{await lL(U),g()},[g]);return{streakInfos:e,shieldCount:a,loading:u,refresh:g,getStreakForBuff:v,useShield:_,addFreeze:S,removeFreeze:A,getFreezes:C,claimMilestones:B,getUnclaimedMilestones:z,addShields:F}}const AT=[{type:"procrastination_dragon",name:"Procrastination Dragon",description:"A lazy beast that feeds on delayed tasks and broken promises.",icon:"",hpRange:[400,500],xpReward:200,bonusShields:1,difficulty:"medium"},{type:"distraction_demon",name:"Distraction Demon",description:"A cunning fiend that lures you away from your goals with endless diversions.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"},{type:"sloth_specter",name:"Sloth Specter",description:"A ghostly presence that drains your energy and willpower.",icon:"",hpRange:[300,400],xpReward:150,bonusShields:0,difficulty:"easy"},{type:"chaos_chimera",name:"Chaos Chimera",description:"A multi-headed monster representing disorganization and scattered focus.",icon:"",hpRange:[500,600],xpReward:250,bonusShields:2,difficulty:"hard"},{type:"anxiety_wyrm",name:"Anxiety Wyrm",description:"A serpentine creature that coils around your mind with worry and doubt.",icon:"",hpRange:[450,550],xpReward:225,bonusShields:1,difficulty:"hard"},{type:"comfort_zone_golem",name:"Comfort Zone Golem",description:"A stubborn construct that blocks the path to growth and change.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"}],dl={step_completed:10,buff_activated:25,quest_completed:50,goal_completed:100,daily_quest_completed:15,focus_session:20,routine_completed:30};function Rd(s=new Date){const e=new Date(s),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function gL(s){const e=new Date(s+"T12:00:00");return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}function RT(){const s=ae(),e=Rd(),n=s.exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE week_start = ?`,[e]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return N1(a)}function yL(s){const n=ae().exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE id = ?`,[s]);return!n.length||!n[0].values.length?null:N1(n[0].values[0])}async function EL(){const s=ae(),e=Rd(),n=RT();if(n)return n;const a=AT[Math.floor(Math.random()*AT.length)],o=Math.floor(Math.random()*(a.hpRange[1]-a.hpRange[0]+1))+a.hpRange[0];return s.run(`INSERT INTO weekly_boss (week_start, boss_type, name, description, icon, max_hp, current_hp, xp_reward, bonus_shields)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,a.type,a.name,a.description,a.icon,o,o,a.xpReward,a.bonusShields]),await ye(),RT()}async function vL(s,e,n,a){const o=ae(),u=yL(s);if(!u||u.is_defeated)return{newHp:u?.current_hp||0,isDefeated:u?.is_defeated||!1};const h=Math.max(0,u.current_hp-n),g=h===0;return o.run(`UPDATE weekly_boss SET current_hp = ?, is_defeated = ?, defeated_at = ?
     WHERE id = ?`,[h,g?1:0,g?new Date().toISOString():null,s]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[s,e,n,a||null]),await ye(),{newHp:h,isDefeated:g}}function TL(){const e=ae().exec("SELECT COUNT(*) FROM weekly_boss WHERE is_defeated = 1");return e.length&&e[0].values.length?e[0].values[0][0]:0}function N1(s){return{id:s[0],week_start:s[1],boss_type:s[2],name:s[3],description:s[4],icon:s[5],max_hp:s[6],current_hp:s[7],is_defeated:!!s[8],defeated_at:s[9],xp_reward:s[10],bonus_shields:s[11],created_at:s[12]}}function bL({grantXP:s,addShields:e}){const[n,a]=L.useState(null),[o,u]=L.useState(!0),[h,g]=L.useState(!1),v=L.useCallback(async()=>{const U=await EL();a(U),u(!1)},[]);L.useEffect(()=>{v()},[v]),L.useEffect(()=>{const G=setInterval(()=>{const Y=Rd();n&&n.week_start!==Y&&v()},6e4);return()=>clearInterval(G)},[n,v]);const _=L.useCallback(async(U,G)=>{if(!n||n.is_defeated)return;const Y=dl[U],se=await vL(n.id,U,Y,G);return a(re=>re?{...re,current_hp:se.newHp,is_defeated:se.isDefeated}:null),se.isDefeated&&!n.is_defeated&&(g(!0),await s(n.xp_reward,`Defeated ${n.name}!`,"boss",n.id),n.bonus_shields>0&&e&&await e(n.bonus_shields)),se},[n,s,e]),S=L.useCallback(()=>{g(!1)},[]),A=n?.week_start||Rd(),C=gL(A),B=n?Math.round(n.current_hp/n.max_hp*100):100,z=n?n.max_hp-n.current_hp:0,F=TL();return{boss:n,loading:o,justDefeated:h,weekStart:A,weekEnd:C,hpPercentage:B,damageDealt:z,totalDefeated:F,refresh:v,dealDamage:_,dismissDefeatNotification:S}}function SL(){const n=ae().exec(`
    SELECT
      ad.id, ad.key, ad.name, ad.description, ad.category, ad.icon, ad.xp_reward,
      ad.requirement_type, ad.requirement_value, ad.requirement_source, ad.sort_order, ad.is_hidden,
      au.unlocked_at,
      COALESCE(ap.current_value, 0) as current_value
    FROM achievement_definitions ad
    LEFT JOIN achievement_unlocks au ON ad.id = au.definition_id
    LEFT JOIN achievement_progress ap ON ad.id = ap.definition_id
    ORDER BY ad.category, ad.sort_order
  `);return n.length?n[0].values.map(a=>{const o=a[8],u=a[13],h=a[12];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:o,requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11],unlocked:h!==null,unlocked_at:h,current_value:u,progress_percent:Math.min(100,Math.round(u/o*100))}}):[]}async function NL(s,e=1){const n=ae(),a=n.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ?`,[s]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],v=n.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);if(v.length&&v[0].values.length)continue;const _=n.exec("SELECT current_value FROM achievement_progress WHERE definition_id = ?",[h]),A=(_.length&&_[0].values.length?_[0].values[0][0]:0)+e;n.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,A]),A>=g&&o.push(h)}return await ye(),o}async function wL(s,e){const n=ae(),a=n.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ? AND requirement_type = 'threshold'`,[s]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],v=n.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);v.length&&v[0].values.length||(n.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,e]),e>=g&&o.push(h))}return await ye(),o}async function AL(s){const e=ae(),n=e.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[s]);return n.length&&n[0].values.length?!1:(e.run("INSERT INTO achievement_unlocks (definition_id, unlocked_at) VALUES (?, datetime('now'))",[s]),await ye(),!0)}function RL(s){const n=ae().exec(`SELECT id, key, name, description, category, icon, xp_reward,
     requirement_type, requirement_value, requirement_source, sort_order, is_hidden
     FROM achievement_definitions WHERE id = ?`,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:a[8],requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11]}}function xL(){const s=ae(),e=s.exec("SELECT COUNT(*), SUM(xp_reward) FROM achievement_definitions"),n=e.length?e[0].values[0][0]:0,a=e.length&&e[0].values[0][1]||0,o=s.exec(`
    SELECT COUNT(*), COALESCE(SUM(ad.xp_reward), 0)
    FROM achievement_unlocks au
    JOIN achievement_definitions ad ON au.definition_id = ad.id
  `),u=o.length?o[0].values[0][0]:0,h=o.length?o[0].values[0][1]:0;return{total:n,unlocked:u,totalXp:a,earnedXp:h}}function CL({grantXP:s}){const[e,n]=L.useState([]),[a,o]=L.useState({total:0,unlocked:0,totalXp:0,earnedXp:0}),[u,h]=L.useState([]),[g,v]=L.useState(!0),_=L.useCallback(()=>{n(SL()),o(xL()),v(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async U=>{const G=[];for(const Y of U)if(await AL(Y)){const re=RL(Y);re&&(await s(re.xp_reward,`Achievement: ${re.name}`,"achievement",Y),G.push({achievement:re,xpAwarded:re.xp_reward}))}return G.length>0&&(h(Y=>[...Y,...G]),_()),G},[s,_]),A=L.useCallback(async(U,G=1)=>{const Y=await NL(U,G);Y.length>0&&await S(Y),_()},[S,_]),C=L.useCallback(async(U,G)=>{const Y=await wL(U,G);Y.length>0&&await S(Y),_()},[S,_]),B=L.useCallback(U=>{h(G=>G.filter((Y,se)=>se!==U))},[]),z=L.useCallback(()=>{h([])},[]),F=L.useCallback(U=>e.filter(G=>G.category===U),[e]);return{achievements:e,stats:a,loading:g,pendingUnlocks:u,refresh:_,incrementProgress:A,checkThreshold:C,dismissUnlock:B,dismissAllUnlocks:z,getAchievementsByCategory:F}}function ro(){const e=ae().exec("SELECT id, current_energy, max_energy, last_regen_at, bonus_energy FROM energy_state WHERE id = 1");if(!e.length||!e[0].values.length)return{id:1,current_energy:fl,max_energy:fl,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19),bonus_energy:0};const n=e[0].values[0];return{id:n[0],current_energy:n[1],max_energy:n[2],last_regen_at:n[3],bonus_energy:n[4]}}async function sf(s,e,n,a=null){const o=ae(),u=ro(),h=u.current_energy,g=u.max_energy+u.bonus_energy,v=Math.max(0,Math.min(g,u.current_energy+s));return o.run("UPDATE energy_state SET current_energy = ?, last_regen_at = datetime('now') WHERE id = 1",[v]),o.run(`INSERT INTO energy_log (amount, reason, source_type, source_id, energy_before, energy_after)
     VALUES (?, ?, ?, ?, ?, ?)`,[s,e,n,a,h,v]),await ye(),{...u,current_energy:v,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19)}}async function IL(s,e=null){const n=n_(s),a=ro();return a.current_energy<n?{success:!1,newState:a,cost:n}:{success:!0,newState:await sf(-n,`Spent on ${s.replace(/_/g," ")}`,s,e),cost:n}}function kL(s){const e=n_(s);return ro().current_energy>=e}function n_(s){const n=ae().exec("SELECT base_cost FROM energy_costs WHERE action_type = ?",[s]);return!n.length||!n[0].values.length?0:n[0].values[0][0]}async function LL(){const s=ae(),e=ro(),n=e.max_energy+e.bonus_energy;if(e.current_energy>=n)return s.run("UPDATE energy_state SET last_regen_at = datetime('now') WHERE id = 1"),await ye(),{regenerated:0,newState:e};const a=new Date(e.last_regen_at+"Z"),u=(new Date().getTime()-a.getTime())/(1e3*60*60),h=Math.floor(u*PT);if(h<=0)return{regenerated:0,newState:e};const v=Math.min(n,e.current_energy+h)-e.current_energy;if(v>0){const _=await sf(v,"Natural regeneration","regen");return{regenerated:v,newState:_}}return{regenerated:0,newState:e}}async function DL(){const s=ro(),n=s.max_energy+s.bonus_energy-s.current_energy;return n>0?await sf(n,"Full energy restore","restore"):s}function OL(){const[s,e]=L.useState(()=>ro()),[n,a]=L.useState(!0),o=L.useCallback(()=>{e(ro()),a(!1)},[]);L.useEffect(()=>{o()},[o]),L.useEffect(()=>{const F=async()=>{const{regenerated:G,newState:Y}=await LL();G>0&&e(Y)};F();const U=setInterval(F,6e4);return()=>clearInterval(U)},[]);const u=L.useCallback(async(F,U=null)=>{const G=await IL(F,U);return G.success&&e(G.newState),G},[]),h=L.useCallback(async(F,U)=>{const G=await sf(F,U,"bonus");return e(G),G},[]),g=L.useCallback(async()=>{const F=await DL();return e(F),F},[]),v=L.useCallback(F=>kL(F),[]),_=L.useCallback(F=>n_(F),[]),S=L.useCallback(()=>{const F=[];return s.current_energy<=Om?F.push({active:!0,name:cm.name,icon:cm.icon,effects:cm.effects}):s.current_energy<=Dm&&F.push({active:!0,name:lm.name,icon:lm.icon,effects:lm.effects}),F},[s.current_energy]),A=L.useCallback(()=>{const F=S(),U={};for(const G of F)for(const[Y,se]of Object.entries(G.effects))U[Y]=(U[Y]||0)+se;return U},[S]),C=Math.round(s.current_energy/(s.max_energy+s.bonus_energy)*100),B=s.current_energy<=Dm,z=s.current_energy<=Om;return{state:s,loading:n,refresh:o,spendEnergy:u,addEnergy:h,restoreFullEnergy:g,canAfford:v,getActionCost:_,getEnergyDebuffs:S,getEnergyStatPenalties:A,percentage:C,isLow:B,isEmpty:z}}function ip(){const e=ae().exec(`
    SELECT id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled
    FROM focus_settings WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,...Ps};const n=e[0].values[0];return{id:n[0],work_duration:n[1],short_break:n[2],long_break:n[3],sessions_before_long_break:n[4],auto_start_breaks:!!n[5],sound_enabled:!!n[6]}}async function jL(s){const e=ae(),a={...ip(),...s};return e.run(`
    UPDATE focus_settings SET
      work_duration = ?,
      short_break = ?,
      long_break = ?,
      sessions_before_long_break = ?,
      auto_start_breaks = ?,
      sound_enabled = ?
    WHERE id = 1
  `,[a.work_duration,a.short_break,a.long_break,a.sessions_before_long_break,a.auto_start_breaks?1:0,a.sound_enabled?1:0]),await ye(),a}function ap(){const e=ae().exec(`
    SELECT id, total_sessions, total_minutes, longest_streak, current_streak, today_sessions, today_date
    FROM focus_stats WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,total_sessions:0,total_minutes:0,longest_streak:0,current_streak:0,today_sessions:0,today_date:new Date().toISOString().split("T")[0]};const n=e[0].values[0];return{id:n[0],total_sessions:n[1],total_minutes:n[2],longest_streak:n[3],current_streak:n[4],today_sessions:n[5],today_date:n[6]}}async function ML(s,e=null,n=null){const a=ae();a.run(`
    INSERT INTO focus_sessions (duration_minutes, linked_step_id, linked_quest_id, status)
    VALUES (?, ?, ?, 'active')
  `,[s,e,n]);const u=a.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ye(),s_(u)}async function UL(s,e,n=""){ae().run(`
    UPDATE focus_sessions SET
      status = 'completed',
      completed_at = datetime('now'),
      xp_earned = ?,
      notes = ?
    WHERE id = ? AND status = 'active'
  `,[e,n,s]);const o=s_(s);return o&&await BL(o.duration_minutes),await ye(),o}async function VL(s){ae().run("UPDATE focus_sessions SET status = 'cancelled', completed_at = datetime('now') WHERE id = ?",[s]),await ye()}function s_(s){const n=ae().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE id = ?
  `,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return i_(a)}function xT(){const e=ae().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE status = 'active' ORDER BY started_at DESC LIMIT 1
  `);return!e.length||!e[0].values.length?null:i_(e[0].values[0])}function qL(s=10){const n=ae().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions ORDER BY started_at DESC LIMIT ?
  `,[s]);return n.length?n[0].values.map(i_):[]}async function BL(s){const e=ae(),n=ap(),a=new Date().toISOString().split("T")[0],u=n.today_date===a?n.today_sessions+1:1,h=n.current_streak+1,g=Math.max(n.longest_streak,h);e.run(`
    UPDATE focus_stats SET
      total_sessions = total_sessions + 1,
      total_minutes = total_minutes + ?,
      current_streak = ?,
      longest_streak = ?,
      today_sessions = ?,
      today_date = ?
    WHERE id = 1
  `,[s,h,g,u,a]),await ye()}function i_(s){return{id:s[0],duration_minutes:s[1],started_at:s[2],completed_at:s[3],status:s[4],xp_earned:s[5],linked_step_id:s[6],linked_quest_id:s[7],break_taken:!!s[8],notes:s[9]}}function PL({grantXP:s,onSessionComplete:e}){const[n,a]=L.useState(()=>ip()),[o,u]=L.useState(()=>ap()),[h,g]=L.useState(()=>xT()),[v,_]=L.useState([]),[S,A]=L.useState({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:0}),C=L.useRef(null),B=L.useRef(h?.id||null),z=L.useCallback(()=>{a(ip()),u(ap()),g(xT()),_(qL(10))},[]);L.useEffect(()=>{z()},[z]),L.useEffect(()=>{if(S.isRunning&&S.timeRemaining>0)return C.current=setInterval(()=>{A(D=>({...D,timeRemaining:Math.max(0,D.timeRemaining-1)}))},1e3),()=>{C.current&&clearInterval(C.current)}},[S.isRunning]),L.useEffect(()=>{S.timeRemaining===0&&S.isRunning&&F()},[S.timeRemaining,S.isRunning]);const F=async()=>{if(S.phase==="work"&&B.current){const D=s_(B.current);let M=zN;D?.linked_step_id&&(M+=GN);const V=S.sessionsCompleted+1;V%4===0&&(M+=HN),await UL(B.current,M),await s(M,"Focus session completed","focus",B.current),e?.(),n.sound_enabled&&CT();const w=V%n.sessions_before_long_break===0,O=w?"long_break":"short_break",k=w?n.long_break:n.short_break;A({phase:n.auto_start_breaks?O:"idle",timeRemaining:k*60,isRunning:n.auto_start_breaks,sessionsCompleted:V}),B.current=null,z()}else(S.phase==="short_break"||S.phase==="long_break")&&(n.sound_enabled&&CT(),A({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}))},U=L.useCallback(async(D=null,M=null)=>{const V=await ML(n.work_duration,D,M);B.current=V.id,g(V),A({phase:"work",timeRemaining:n.work_duration*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[n.work_duration,S.sessionsCompleted]),G=L.useCallback((D=!1)=>{const M=D?n.long_break:n.short_break;A({phase:D?"long_break":"short_break",timeRemaining:M*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[n.short_break,n.long_break,S.sessionsCompleted]),Y=L.useCallback(()=>{A(D=>({...D,isRunning:!1}))},[]),se=L.useCallback(()=>{A(D=>({...D,isRunning:!0}))},[]),re=L.useCallback(async()=>{C.current&&clearInterval(C.current),B.current&&S.phase==="work"&&await VL(B.current),B.current=null,g(null),A({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}),z()},[n.work_duration,S.phase,S.sessionsCompleted,z]),_e=L.useCallback(()=>{(S.phase==="short_break"||S.phase==="long_break")&&A({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted})},[n.work_duration,S.phase,S.sessionsCompleted]),ve=L.useCallback(async D=>{const M=await jL(D);a(M),S.phase==="idle"&&A(V=>({...V,timeRemaining:(D.work_duration||V.timeRemaining/60)*60}))},[S.phase]);return{settings:n,stats:o,timerState:S,currentSession:h,recentSessions:v,refresh:z,startWork:U,startBreak:G,pause:Y,resume:se,stop:re,skipBreak:_e,updateSettings:ve,formatTime:D=>{const M=Math.floor(D/60),V=D%60;return`${M.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`}}}function CT(){try{const s=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdGCdqIyYY19lf6O3qJyAa3B1gqKvpZNyYW50iaS7s5yBaWx3g6C4t5uGc2l0gJy0t5qGcWl0gJyzrZOAbWp0gJyzrZaEc2p2gJixsJmGeWt3gJivsJmGd2x3gZitq5OAbWp0f5asrJaAdmp1f5aqq5aAdmp1f5aqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZOAdGlzfpKppZKAc2hyfpCmpZCAbGZxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY6kpJCAa2RvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoyjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI4=");s.volume=.5,s.play().catch(()=>{})}catch{}}const FL=25,IT=10;function zL(){const e=ae().exec(`
    SELECT id, name, type, description, bonus_xp, is_active, created_at
    FROM routine_definitions WHERE is_active = 1 ORDER BY type, name
  `);return e.length?e[0].values.map(ZL):[]}function GL(){return zL().map(e=>{const n=a_(e.id),a=xd(e.id),o=Cd(e.id);return{...e,steps:n,streak:a||void 0,todayLog:o||void 0}})}function a_(s){const n=ae().exec(`
    SELECT id, routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional
    FROM routine_steps WHERE routine_id = ? ORDER BY sort_order
  `,[s]);return n.length?n[0].values.map(eD):[]}function xd(s){const n=ae().exec(`
    SELECT id, routine_id, current_streak, longest_streak, last_completed_date
    FROM routine_streaks WHERE routine_id = ?
  `,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],routine_id:a[1],current_streak:a[2],longest_streak:a[3],last_completed_date:a[4]}}function Cd(s){const n=ae().exec(`
    SELECT id, routine_id, date, started_at, completed_at, is_completed, steps_completed, total_steps, xp_earned
    FROM routine_logs WHERE routine_id = ? AND date = date('now')
  `,[s]);return!n.length||!n[0].values.length?null:tD(n[0].values[0])}function HL(s){const n=ae().exec(`
    SELECT id, routine_log_id, step_id, completed_at, is_completed, skipped
    FROM routine_step_logs WHERE routine_log_id = ?
  `,[s]);return n.length?n[0].values.map(a=>({id:a[0],routine_log_id:a[1],step_id:a[2],completed_at:a[3],is_completed:!!a[4],skipped:!!a[5]})):[]}function w1(s){const e=a_(s),n=Cd(s);if(!n)return e.map(u=>({...u,is_completed:!1,skipped:!1,completed_at:null}));const a=HL(n.id),o=new Map(a.map(u=>[u.step_id,u]));return e.map(u=>{const h=o.get(u.id);return{...u,is_completed:h?.is_completed||!1,skipped:h?.skipped||!1,completed_at:h?.completed_at||null}})}async function XL(s,e,n,a){const o=ae();o.run("INSERT INTO routine_definitions (name, type, description, bonus_xp) VALUES (?, ?, ?, ?)",[s,e,n,a]);const h=o.exec("SELECT last_insert_rowid()")[0].values[0][0];return o.run("INSERT INTO routine_streaks (routine_id) VALUES (?)",[h]),await ye(),h}async function YL(s,e,n,a,o,u){const h=ae(),v=h.exec("SELECT COALESCE(MAX(sort_order), -1) + 1 FROM routine_steps WHERE routine_id = ?",[s])[0].values[0][0];h.run(`INSERT INTO routine_steps (routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional)
     VALUES (?, ?, ?, ?, ?, ?, ?)`,[s,e,n,a,v,o,u?1:0]);const _=h.exec("SELECT last_insert_rowid()");return await ye(),_[0].values[0][0]}async function $L(s){ae().run("DELETE FROM routine_steps WHERE id = ?",[s]),await ye()}async function QL(s){ae().run("DELETE FROM routine_definitions WHERE id = ?",[s]),await ye()}async function KL(s){const e=ae(),n=a_(s);let a=Cd(s);if(!a){e.run(`INSERT INTO routine_logs (routine_id, date, started_at, total_steps)
       VALUES (?, date('now'), datetime('now'), ?)`,[s,n.length]);const u=e.exec("SELECT last_insert_rowid()")[0].values[0][0];for(const h of n)e.run("INSERT INTO routine_step_logs (routine_log_id, step_id) VALUES (?, ?)",[u,h.id]);await ye(),a=Cd(s)}return a}async function WL(s,e){const n=ae();n.run(`UPDATE routine_step_logs SET is_completed = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[s,e]);const o=n.exec("SELECT COUNT(*) FROM routine_step_logs WHERE routine_log_id = ? AND is_completed = 1",[s])[0].values[0][0];n.run("UPDATE routine_logs SET steps_completed = ? WHERE id = ?",[o,s]),await ye()}async function JL(s,e){ae().run(`UPDATE routine_step_logs SET skipped = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[s,e]),await ye()}async function kT(s,e){const n=ae(),a=new Date().toISOString().split("T")[0];n.run(`UPDATE routine_logs SET is_completed = 1, completed_at = datetime('now'), xp_earned = ?
     WHERE routine_id = ? AND date = date('now')`,[e,s]);const o=xd(s);if(o){const u=new Date(Date.now()-864e5).toISOString().split("T")[0],g=o.last_completed_date===u?o.current_streak+1:1,v=Math.max(o.longest_streak,g);n.run(`UPDATE routine_streaks SET current_streak = ?, longest_streak = ?, last_completed_date = ?
       WHERE routine_id = ?`,[g,v,a,s])}await ye()}function LT(s){return w1(s).filter(a=>!a.is_optional).every(a=>a.is_completed||a.skipped)}function ZL(s){return{id:s[0],name:s[1],type:s[2],description:s[3],bonus_xp:s[4],is_active:!!s[5],created_at:s[6]}}function eD(s){return{id:s[0],routine_id:s[1],title:s[2],description:s[3],linked_buff_id:s[4],sort_order:s[5],duration_minutes:s[6],is_optional:!!s[7]}}function tD(s){return{id:s[0],routine_id:s[1],date:s[2],started_at:s[3],completed_at:s[4],is_completed:!!s[5],steps_completed:s[6],total_steps:s[7],xp_earned:s[8]}}function nD({grantXP:s,onRoutineComplete:e}){const[n,a]=L.useState([]),[o,u]=L.useState(!0),h=L.useCallback(()=>{a(GL()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async(Y,se,re,_e=FL)=>{await XL(Y,se,re,_e),h()},[h]),v=L.useCallback(async(Y,se,re,_e,ve,j)=>{await YL(Y,se,re,_e,ve,j),h()},[h]),_=L.useCallback(async Y=>{await $L(Y),h()},[h]),S=L.useCallback(async Y=>{await QL(Y),h()},[h]),A=L.useCallback(async Y=>{await KL(Y),h()},[h]),C=L.useCallback(async(Y,se)=>{const re=n.find(_e=>_e.id===Y);if(re?.todayLog){if(await WL(re.todayLog.id,se),LT(Y)){let _e=re.bonus_xp;const ve=xd(Y);ve&&ve.current_streak>0&&ve.current_streak%7===0&&(_e+=IT),await kT(Y,_e),await s(_e,`Completed routine: ${re.name}`,"routine",Y),e?.(Y)}h()}},[n,s,e,h]),B=L.useCallback(async(Y,se)=>{const re=n.find(_e=>_e.id===Y);if(re?.todayLog){if(await JL(re.todayLog.id,se),LT(Y)){let _e=re.bonus_xp;const ve=xd(Y);ve&&ve.current_streak>0&&ve.current_streak%7===0&&(_e+=IT),await kT(Y,_e),await s(_e,`Completed routine: ${re.name}`,"routine",Y),e?.(Y)}h()}},[n,s,e,h]),z=L.useCallback(Y=>w1(Y),[]),F=L.useCallback(()=>n.filter(Y=>Y.type==="morning"),[n]),U=L.useCallback(()=>n.filter(Y=>Y.type==="evening"),[n]),G=L.useCallback(()=>n.filter(Y=>Y.type==="custom"),[n]);return{routines:n,loading:o,refresh:h,createRoutine:g,addStep:v,deleteStep:_,deleteRoutine:S,startRoutine:A,completeStep:C,skipStep:B,getStepsWithStatus:z,getMorningRoutines:F,getEveningRoutines:U,getCustomRoutines:G}}function sD(){const e=ae().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE is_active = 1 ORDER BY name
  `);return e.length?e[0].values.map(R1):[]}function iD(s){const n=ae().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:R1(n[0].values[0])}function A1(){const s=ae();return sD().map(n=>{const a=JSON.parse(n.required_buffs),o=s.exec(`SELECT name FROM buff_definitions WHERE id IN (${a.join(",")||"0"})`),u=o.length?o[0].values.map(z=>z[0]):[],h=s.exec(`SELECT DISTINCT definition_id FROM buff_log
       WHERE is_active = 1
       AND definition_id IN (${a.join(",")||"0"})
       AND activated_at >= datetime('now', '-${n.time_window_hours} hours')`),g=h.length?h[0].values.map(z=>z[0]):[],v=s.exec(`SELECT activated_at FROM combo_activations
       WHERE combo_id = ? ORDER BY activated_at DESC LIMIT 1`,[n.id]),_=v.length&&v[0].values.length?v[0].values[0][0]:null,S=s.exec(`SELECT 1 FROM combo_activations
       WHERE combo_id = ? AND date(activated_at) = date('now')`,[n.id]),A=S.length&&S[0].values.length>0,C=a.length>0?Math.round(g.length/a.length*100):0,B=g.length===a.length&&!A;return{...n,required_buff_names:u,active_buff_ids:g,progress:C,is_ready:B,last_activated:_}})}function aD(){return A1().filter(s=>s.is_ready)}async function DT(s,e){const n=ae();if(!iD(s))return null;n.run("INSERT INTO combo_activations (combo_id, buffs_used) VALUES (?, ?)",[s,JSON.stringify(e)]);const u=n.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ye(),rD(u)}function rD(s){const n=ae().exec("SELECT id, combo_id, activated_at, buffs_used FROM combo_activations WHERE id = ?",[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],combo_id:a[1],activated_at:a[2],buffs_used:a[3]}}async function oD(s,e,n,a,o,u){const h=ae();h.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp)
     VALUES (?, ?, ?, ?, ?, ?)`,[s,e,n,JSON.stringify(a),o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ye(),g[0].values[0][0]}async function lD(s){ae().run("DELETE FROM combo_definitions WHERE id = ?",[s]),await ye()}function R1(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],required_buffs:s[4],time_window_hours:s[5],bonus_xp:s[6],is_active:!!s[7]}}function cD({grantXP:s,onComboActivated:e}){const[n,a]=L.useState([]),[o,u]=L.useState(!0),h=L.useCallback(()=>{a(A1()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async()=>{const B=aD(),z=[];for(const F of B)await DT(F.id,F.active_buff_ids),await s(F.bonus_xp,`Combo activated: ${F.name}`,"combo",F.id),z.push(F),e?.(F);return z.length>0&&h(),z},[s,e,h]),v=L.useCallback(async B=>{const z=n.find(F=>F.id===B);return!z||!z.is_ready?null:(await DT(B,z.active_buff_ids),await s(z.bonus_xp,`Combo activated: ${z.name}`,"combo",B),e?.(z),h(),z)},[n,s,e,h]),_=L.useCallback(async(B,z,F,U,G,Y)=>{await oD(B,z,F,U,G,Y),h()},[h]),S=L.useCallback(async B=>{await lD(B),h()},[h]),A=L.useCallback(()=>n.filter(B=>B.is_ready),[n]),C=L.useCallback(()=>n.filter(B=>B.progress>0&&B.progress<100&&!B.is_ready),[n]);return{combos:n,loading:o,refresh:h,checkAndActivateCombos:g,claimCombo:v,createCombo:_,deleteCombo:S,getReadyCombos:A,getInProgressCombos:C}}const Id=100,uD={steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0};function af(s=new Date){const e=new Date(s),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function rp(){const s=ae(),e=af(),n=s.exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews WHERE week_start = ?`,[e]);return!n.length||!n[0].values.length?null:x1(n[0].values[0])}function dD(s=10){const n=ae().exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews ORDER BY week_start DESC LIMIT ?`,[s]);return n.length?n[0].values.map(x1):[]}async function fD(){const s=ae(),e=af(),n=new Date(e);n.setDate(n.getDate()+7);const a=n.toISOString().split("T")[0],o={...uD},u=s.exec(`SELECT COUNT(*) FROM steps WHERE completed_at IS NOT NULL
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.steps_completed=u.length?u[0].values[0][0]:0;const h=s.exec(`SELECT COUNT(*) FROM quests WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.quests_completed=h.length?h[0].values[0][0]:0;const g=s.exec(`SELECT COUNT(*) FROM goals WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.goals_completed=g.length?g[0].values[0][0]:0;const v=s.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'buff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.buffs_activated=v.length?v[0].values[0][0]:0;const _=s.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.debuffs_activated=_.length?_[0].values[0][0]:0;const S=s.exec(`SELECT COALESCE(SUM(amount), 0) FROM xp_log
     WHERE date(created_at) >= ? AND date(created_at) < ?`,[e,a]);o.xp_earned=S.length?S[0].values[0][0]:0;try{const A=s.exec(`SELECT COALESCE(SUM(damage), 0), MAX(CASE WHEN is_defeated = 1 THEN 1 ELSE 0 END)
       FROM weekly_boss WHERE week_start = ?`,[e]);A.length&&A[0].values.length&&(o.boss_damage_dealt=A[0].values[0][0],o.boss_defeated=!!A[0].values[0][1])}catch{}try{const A=s.exec(`SELECT COUNT(*), COALESCE(SUM(duration_minutes), 0) FROM focus_sessions
       WHERE status = 'completed' AND date(started_at) >= ? AND date(started_at) < ?`,[e,a]);A.length&&A[0].values.length&&(o.focus_sessions=A[0].values[0][0],o.focus_minutes=A[0].values[0][1])}catch{}try{const A=s.exec(`SELECT COUNT(*) FROM routine_logs
       WHERE is_completed = 1 AND date >= ? AND date < ?`,[e,a]);o.routines_completed=A.length?A[0].values[0][0]:0}catch{}try{const A=s.exec(`SELECT COUNT(*) FROM combo_activations
       WHERE date(activated_at) >= ? AND date(activated_at) < ?`,[e,a]);o.combos_activated=A.length?A[0].values[0][0]:0}catch{}try{const A=s.exec(`SELECT COUNT(*) FROM achievement_unlocks
       WHERE date(unlocked_at) >= ? AND date(unlocked_at) < ?`,[e,a]);o.achievements_unlocked=A.length?A[0].values[0][0]:0}catch{}return o}async function hD(s){const e=ae(),n=af(),a=JSON.stringify(s),o=rp();return o?e.run("UPDATE weekly_reviews SET summary_data = ?, generated_at = datetime('now') WHERE id = ?",[a,o.id]):e.run("INSERT INTO weekly_reviews (week_start, summary_data) VALUES (?, ?)",[n,a]),await ye(),rp()}async function mD(s,e,n,a,o){ae().run("UPDATE weekly_reviews SET wins = ?, challenges = ?, priorities = ?, notes = ? WHERE id = ?",[e,n,JSON.stringify(a),o,s]),await ye()}async function pD(s,e){ae().run("UPDATE weekly_reviews SET is_completed = 1, completed_at = datetime('now'), xp_earned = ? WHERE id = ?",[e,s]),await ye()}function x1(s){return{id:s[0],week_start:s[1],generated_at:s[2],completed_at:s[3],is_completed:!!s[4],summary_data:s[5],wins:s[6],challenges:s[7],priorities:s[8],notes:s[9],xp_earned:s[10]}}function _D({grantXP:s}){const[e,n]=L.useState(null),[a,o]=L.useState(null),[u,h]=L.useState([]),[g,v]=L.useState(!0),_=L.useCallback(async()=>{n(rp()),h(dD(10)),v(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async()=>{const U=await fD();o(U);const G=await hD(U);return n(G),{summary:U,review:G}},[]),A=L.useCallback(async(U,G,Y,se)=>{e&&(await mD(e.id,U,G,Y,se),_())},[e,_]),C=L.useCallback(async()=>{!e||e.is_completed||(await pD(e.id,Id),await s(Id,"Completed weekly review","weekly_review",e.id),_())},[e,s,_]),B=L.useCallback(()=>af(),[]),z=L.useCallback(U=>{try{return JSON.parse(U.summary_data)}catch{return{steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0}}},[]),F=L.useCallback(U=>{try{return JSON.parse(U.priorities)}catch{return[]}},[]);return{currentReview:e,summaryData:a,recentReviews:u,loading:g,refresh:_,generateSummary:S,updateContent:A,completeReview:C,getWeekStart:B,getSummaryFromReview:z,getPrioritiesFromReview:F}}function gD(){const e=ae().exec(`
    SELECT id, name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight
    FROM event_templates ORDER BY rarity, name
  `);return e.length?e[0].values.map(TD):[]}function r_(){const e=ae().exec(`
    SELECT ae.id, ae.template_id, ae.started_at, ae.expires_at, ae.is_claimed, ae.claimed_at,
           et.id, et.name, et.description, et.type, et.icon, et.duration_hours, et.effect_type, et.effect_value, et.rarity, et.weight
    FROM active_events ae
    JOIN event_templates et ON ae.template_id = et.id
    WHERE ae.expires_at > datetime('now') OR (ae.is_claimed = 0 AND et.duration_hours = 0)
    ORDER BY ae.started_at DESC
  `);if(!e.length)return[];const n=Date.now();return e[0].values.map(a=>{const o=new Date(a[3]+"Z").getTime();return{id:a[0],template_id:a[1],started_at:a[2],expires_at:a[3],is_claimed:!!a[4],claimed_at:a[5],template:{id:a[6],name:a[7],description:a[8],type:a[9],icon:a[10],duration_hours:a[11],effect_type:a[12],effect_value:a[13],rarity:a[14],weight:a[15]},time_remaining:Math.max(0,Math.floor((o-n)/1e3))}})}async function yD(){const s=ae(),e=gD();if(e.length===0)return null;const n=e.reduce((g,v)=>g+v.weight,0);let a=Math.random()*n,o=null;for(const g of e)if(a-=g.weight,a<=0){o=g;break}o||(o=e[0]);const u=o.duration_hours>0?`datetime('now', '+${o.duration_hours} hours')`:"datetime('now', '+24 hours')";return s.run(`INSERT INTO active_events (template_id, expires_at) VALUES (?, ${u})`,[o.id]),await ye(),r_().find(g=>g.template_id===o.id)||null}async function ED(s){const e=ae(),a=r_().find(o=>o.id===s);if(!a||a.is_claimed)return{success:!1,effectValue:{}};e.run("UPDATE active_events SET is_claimed = 1, claimed_at = datetime('now') WHERE id = ?",[s]),e.run(`INSERT INTO event_history (template_id, event_name, result, xp_earned)
     VALUES (?, ?, 'claimed', 0)`,[a.template_id,a.template.name]),await ye();try{return{success:!0,effectValue:JSON.parse(a.template.effect_value)}}catch{return{success:!0,effectValue:{}}}}async function vD(){ae().run(`
    DELETE FROM active_events
    WHERE expires_at <= datetime('now') AND is_claimed = 0
  `),await ye()}function TD(s){return{id:s[0],name:s[1],description:s[2],type:s[3],icon:s[4],duration_hours:s[5],effect_type:s[6],effect_value:s[7],rarity:s[8],weight:s[9]}}const OT="last_event_check";function bD({grantXP:s,addEnergy:e,addShields:n,onEventTriggered:a}){const[o,u]=L.useState([]),[h,g]=L.useState(!0),[v,_]=L.useState(null),S=L.useCallback(async()=>{await vD(),u(r_()),g(!1)},[]);L.useEffect(()=>{S()},[S]),L.useEffect(()=>{(async()=>{const Y=localStorage.getItem(OT),se=Date.now();if(!(Y&&(se-parseInt(Y,10))/36e5<ew)){if(Math.random()<ZN){const re=await yD();re&&(_(re),a?.(re),S())}localStorage.setItem(OT,se.toString())}})()},[a,S]);const A=L.useCallback(async G=>{const{success:Y,effectValue:se}=await ED(G);if(!Y)return null;const re=o.find(_e=>_e.id===G);if(!re)return null;switch(re.template.effect_type){case"xp_bonus":se.amount&&await s(se.amount,`Event: ${re.template.name}`,"event",G);break;case"energy_restore":se.amount&&e&&await e(se.amount,`Event: ${re.template.name}`);break;case"streak_shield":se.shields&&n&&await n(se.shields);break}return S(),re},[o,s,e,n,S]),C=L.useCallback(()=>{_(null)},[]),B=L.useCallback(()=>o.filter(G=>!G.is_claimed),[o]),z=L.useCallback(()=>o.filter(G=>G.is_claimed&&G.template.type==="modifier"&&G.time_remaining>0),[o]),F=L.useCallback(()=>o.some(G=>G.is_claimed&&G.template.effect_type==="xp_multiplier"&&G.time_remaining>0),[o]),U=L.useCallback(()=>{const G=o.find(Y=>Y.is_claimed&&Y.template.effect_type==="xp_multiplier"&&Y.time_remaining>0);if(!G)return 1;try{return JSON.parse(G.template.effect_value).multiplier||1}catch{return 1}},[o]);return{activeEvents:o,loading:h,pendingEvent:v,refresh:S,claimEvent:A,dismissPendingEvent:C,getUnclaimedEvents:B,getActiveModifiers:z,hasActiveXpMultiplier:F,getXpMultiplier:U}}function SD(){const e=ae().exec("SELECT id, name, description, icon, color, sort_order FROM skill_branches ORDER BY sort_order");return e.length?e[0].values.map(n=>({id:n[0],name:n[1],description:n[2],icon:n[3],color:n[4],sort_order:n[5]})):[]}function ND(){const e=ae().exec("SELECT id, node_id, unlocked_at FROM unlocked_skills");return e.length?e[0].values.map(n=>({id:n[0],node_id:n[1],unlocked_at:n[2]})):[]}function wD(){const e=ae().exec(`
    SELECT sn.id, sn.branch_id, sn.name, sn.description, sn.icon, sn.tier, sn.position, sn.xp_cost,
           sn.prerequisite_node_id, sn.effect_type, sn.effect_value, sn.is_capstone,
           us.unlocked_at, sb.name as branch_name, sb.color as branch_color
    FROM skill_nodes sn
    LEFT JOIN unlocked_skills us ON sn.id = us.node_id
    JOIN skill_branches sb ON sn.branch_id = sb.id
    ORDER BY sb.sort_order, sn.tier, sn.position
  `);if(!e.length)return[];const n=new Set(ND().map(a=>a.node_id));return e[0].values.map(a=>{const o=a[0],u=a[8],h=a[12]!==null,g=!h&&(u===null||n.has(u));return{id:o,branch_id:a[1],name:a[2],description:a[3],icon:a[4],tier:a[5],position:a[6],xp_cost:a[7],prerequisite_node_id:u,effect_type:a[9],effect_value:a[10],is_capstone:!!a[11],unlocked:h,unlocked_at:a[12],can_unlock:g,branch_name:a[13],branch_color:a[14]}})}async function AD(s){const e=ae(),n=e.exec("SELECT 1 FROM unlocked_skills WHERE node_id = ?",[s]);return n.length&&n[0].values.length?!1:(e.run("INSERT INTO unlocked_skills (node_id) VALUES (?)",[s]),await ye(),!0)}function RD(){const e=ae().exec(`
    SELECT sn.effect_value FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
    WHERE sn.effect_type IN ('stat_bonus', 'combined')
  `);if(!e.length)return{};const n={};for(const a of e[0].values)try{const o=JSON.parse(a[0]);for(const[u,h]of Object.entries(o))typeof h=="number"&&!u.includes("_bonus")&&(n[u]=(n[u]||0)+h)}catch{}return n}function xm(){const e=ae().exec(`
    SELECT COALESCE(SUM(sn.xp_cost), 0) FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
  `);return e.length?e[0].values[0][0]:0}function xD({totalXP:s}){const[e,n]=L.useState([]),[a,o]=L.useState([]),[u,h]=L.useState(!0),g=L.useCallback(()=>{n(SD()),o(wD()),h(!1)},[]);L.useEffect(()=>{g()},[g]);const v=L.useCallback(async F=>{const U=a.find(re=>re.id===F);if(!U||U.unlocked||!U.can_unlock)return!1;const G=xm();if(s-G<U.xp_cost)return!1;const se=await AD(F);return se&&g(),se},[a,s,g]),_=L.useCallback(F=>a.filter(U=>U.branch_id===F),[a]),S=L.useCallback(()=>a.filter(F=>F.unlocked).length,[a]),A=L.useCallback(()=>a.length,[a]),C=L.useCallback(()=>RD(),[]),B=L.useCallback(()=>{const F=xm();return s-F},[s]),z=L.useCallback(()=>xm(),[]);return{branches:e,nodes:a,loading:u,refresh:g,unlockSkill:v,getNodesByBranch:_,getUnlockedCount:S,getTotalNodes:A,getStatBonuses:C,getAvailableXp:B,getXpSpent:z}}function CD(){const e=ae().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes ORDER BY name
  `);return e.length?e[0].values.map(I1):[]}function ID(s){const n=ae().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:I1(n[0].values[0])}function rf(){const e=ae().exec(`
    SELECT id, class_id, selected_at, last_changed_at, changes_remaining
    FROM character_class_selection WHERE id = 1
  `);if(!e.length||!e[0].values.length)return null;const n=e[0].values[0];return{id:n[0],class_id:n[1],selected_at:n[2],last_changed_at:n[3],changes_remaining:n[4]}}function C1(){const s=rf();return!s||!s.class_id?null:ID(s.class_id)}function kD(){const s=CD(),e=rf();return s.map(n=>({...n,is_selected:e?.class_id===n.id}))}async function LD(s){const e=ae(),n=rf();if(n?.class_id&&n.changes_remaining<=0)return!1;const a=n?.class_id?n.changes_remaining-1:n?.changes_remaining||3;return e.run("UPDATE character_class_selection SET class_id = ?, selected_at = COALESCE(selected_at, datetime('now')), last_changed_at = datetime('now'), changes_remaining = ? WHERE id = 1",[s,a]),await ye(),!0}function DD(){const s=C1();if(!s)return{};try{return JSON.parse(s.stat_bonuses)}catch{return{}}}function OD(s){const e=C1();return e&&e.xp_bonus_type===s?e.xp_bonus_percent:0}function I1(s){return{id:s[0],key:s[1],name:s[2],description:s[3],icon:s[4],primary_stat:s[5],stat_bonuses:s[6],xp_bonus_type:s[7],xp_bonus_percent:s[8],special_ability:s[9],special_ability_desc:s[10]}}function jD(){const[s,e]=L.useState([]),[n,a]=L.useState(null),[o,u]=L.useState(!0),h=L.useCallback(()=>{e(kD()),a(rf()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async C=>{const B=await LD(C);return B&&h(),B},[h]),v=L.useCallback(()=>s.find(C=>C.is_selected)||null,[s]),_=L.useCallback(()=>DD(),[]),S=L.useCallback(C=>OD(C),[]),A=L.useCallback(()=>!n||!n.class_id?!0:n.changes_remaining>0,[n]);return{classes:s,selection:n,loading:o,refresh:h,selectClass:g,getSelectedClass:v,getStatBonuses:_,getXpBonus:S,canChangeClass:A}}function k1(){const e=ae().exec(`
    SELECT id, name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards
    FROM territories ORDER BY unlock_level
  `);return e.length?e[0].values.map(FD):[]}function MD(s){const e=ae(),n=k1(),a=e.exec(`
    SELECT id, territory_id, discovered_at, completed_at, challenges_completed, is_current
    FROM territory_progress
  `),o=new Map;if(a.length)for(const u of a[0].values)o.set(u[1],{id:u[0],territory_id:u[1],discovered_at:u[2],completed_at:u[3],challenges_completed:u[4],is_current:!!u[5]});return n.map(u=>{const h=o.get(u.id);return{...u,discovered:!!h,discovered_at:h?.discovered_at||null,completed:!!h?.completed_at,completed_at:h?.completed_at||null,is_current:h?.is_current||!1,is_locked:u.unlock_level>s,challenges_completed:h?JSON.parse(h.challenges_completed):[]}})}function UD(){const e=ae().exec(`
    SELECT t.id, t.name, t.description, t.icon, t.unlock_level, t.background_color, t.position_x, t.position_y, t.connected_to, t.challenges, t.rewards,
           tp.id, tp.discovered_at, tp.completed_at, tp.challenges_completed, tp.is_current
    FROM territories t
    JOIN territory_progress tp ON t.id = tp.territory_id
    WHERE tp.is_current = 1
  `);if(!e.length||!e[0].values.length)return null;const n=e[0].values[0];return{id:n[0],name:n[1],description:n[2],icon:n[3],unlock_level:n[4],background_color:n[5],position_x:n[6],position_y:n[7],connected_to:n[8],challenges:n[9],rewards:n[10],discovered:!0,discovered_at:n[12],completed:n[13]!==null,completed_at:n[13],is_current:!0,is_locked:!1,challenges_completed:JSON.parse(n[14])}}async function VD(s){const e=ae(),n=e.exec("SELECT 1 FROM territory_progress WHERE territory_id = ?",[s]);n.length&&n[0].values.length||(e.run("INSERT INTO territory_progress (territory_id) VALUES (?)",[s]),await ye())}async function qD(s){const e=ae();e.run("UPDATE territory_progress SET is_current = 0"),e.run("UPDATE territory_progress SET is_current = 1 WHERE territory_id = ?",[s]),await ye()}async function BD(s,e){const n=ae(),a=n.exec("SELECT challenges_completed FROM territory_progress WHERE territory_id = ?",[s]);if(!a.length||!a[0].values.length)return;const o=JSON.parse(a[0].values[0][0]);o.includes(e)||(o.push(e),n.run("UPDATE territory_progress SET challenges_completed = ? WHERE territory_id = ?",[JSON.stringify(o),s]),await ye())}async function PD(s){ae().run("UPDATE territory_progress SET completed_at = datetime('now') WHERE territory_id = ?",[s]),await ye()}function FD(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],unlock_level:s[4],background_color:s[5],position_x:s[6],position_y:s[7],connected_to:s[8],challenges:s[9],rewards:s[10]}}function zD({characterLevel:s,grantXP:e}){const[n,a]=L.useState([]),[o,u]=L.useState(null),[h,g]=L.useState(!0),v=L.useCallback(()=>{a(MD(s)),u(UD()),g(!1)},[s]);L.useEffect(()=>{v()},[v]),L.useEffect(()=>{(async()=>{const F=k1();for(const U of F)U.unlock_level<=s&&(n.find(Y=>Y.id===U.id)?.discovered||await VD(U.id));v()})()},[s,n,v]);const _=L.useCallback(async z=>{const F=n.find(U=>U.id===z);return!F||F.is_locked||!F.discovered?!1:(await qD(z),v(),!0)},[n,v]),S=L.useCallback(async(z,F)=>{await BD(z,F),v()},[v]),A=L.useCallback(async z=>{const F=n.find(U=>U.id===z);if(!(!F||F.completed)){await PD(z);try{const U=JSON.parse(F.rewards);U.xp&&await e(U.xp,`Completed territory: ${F.name}`,"territory",z)}catch{}v()}},[n,e,v]),C=L.useCallback(()=>n.filter(z=>z.discovered),[n]),B=L.useCallback(()=>n.filter(z=>z.completed),[n]);return{territories:n,currentTerritory:o,loading:h,refresh:v,travelTo:_,completeChallenge:S,completeTerritory:A,getDiscoveredTerritories:C,getCompletedTerritories:B}}function GD(s){const n=ae().exec(`
    SELECT id, name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit
    FROM item_definitions WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:QD(n[0].values[0])}function L1(){const e=ae().exec(`
    SELECT i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM inventory i
    JOIN item_definitions d ON i.item_id = d.id
    ORDER BY d.type, d.rarity DESC, d.name
  `);return e.length?e[0].values.map(n=>({id:n[0],item_id:n[1],quantity:n[2],acquired_at:n[3],source:n[4],definition:{id:n[5],name:n[6],description:n[7],icon:n[8],type:n[9],slot:n[10],rarity:n[11],stat_effects:n[12],special_effect:n[13],stack_limit:n[14]}})):[]}function D1(){const e=ae().exec(`
    SELECT e.id, e.slot, e.inventory_id, e.equipped_at,
           i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM equipped_items e
    JOIN inventory i ON e.inventory_id = i.id
    JOIN item_definitions d ON i.item_id = d.id
  `);return e.length?e[0].values.map(n=>({id:n[0],slot:n[1],inventory_id:n[2],equipped_at:n[3],item:{id:n[4],item_id:n[5],quantity:n[6],acquired_at:n[7],source:n[8],definition:{id:n[9],name:n[10],description:n[11],icon:n[12],type:n[13],slot:n[14],rarity:n[15],stat_effects:n[16],special_effect:n[17],stack_limit:n[18]}}})):[]}async function HD(s,e=1,n="unknown"){const a=ae(),o=GD(s);if(!o)throw new Error("Item not found");if(o.stack_limit>1){const h=a.exec("SELECT id, quantity FROM inventory WHERE item_id = ?",[s]);if(h.length&&h[0].values.length){const g=h[0].values[0][0],v=h[0].values[0][1],_=Math.min(v+e,o.stack_limit);return a.run("UPDATE inventory SET quantity = ? WHERE id = ?",[_,g]),await ye(),{id:g,item_id:s,quantity:_,acquired_at:"",source:n}}}a.run("INSERT INTO inventory (item_id, quantity, source) VALUES (?, ?, ?)",[s,e,n]);const u=a.exec("SELECT last_insert_rowid()");return await ye(),{id:u[0].values[0][0],item_id:s,quantity:e,acquired_at:"",source:n}}async function jT(s,e=1){const n=ae(),a=n.exec("SELECT quantity FROM inventory WHERE id = ?",[s]);if(!a.length||!a[0].values.length)return;a[0].values[0][0]<=e?n.run("DELETE FROM inventory WHERE id = ?",[s]):n.run("UPDATE inventory SET quantity = quantity - ? WHERE id = ?",[e,s]),await ye()}async function XD(s){const e=ae(),n=L1().find(a=>a.id===s);!n||!n.definition.slot||(e.run("DELETE FROM equipped_items WHERE slot = ?",[n.definition.slot]),e.run("INSERT INTO equipped_items (slot, inventory_id) VALUES (?, ?)",[n.definition.slot,s]),await ye())}async function YD(s){ae().run("DELETE FROM equipped_items WHERE slot = ?",[s]),await ye()}function $D(){const s=D1(),e={};for(const n of s)try{const a=JSON.parse(n.item.definition.stat_effects);for(const[o,u]of Object.entries(a))typeof u=="number"&&(e[o]=(e[o]||0)+u)}catch{}return e}function QD(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],type:s[4],slot:s[5],rarity:s[6],stat_effects:s[7],special_effect:s[8],stack_limit:s[9]}}function KD({grantXP:s,addEnergy:e,addShields:n}={}){const[a,o]=L.useState([]),[u,h]=L.useState([]),[g,v]=L.useState(!0),_=L.useCallback(()=>{o(L1()),h(D1()),v(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async(Y,se=1,re="reward")=>{await HD(Y,se,re),_()},[_]),A=L.useCallback(async(Y,se=1)=>{await jT(Y,se),_()},[_]),C=L.useCallback(async Y=>{await XD(Y),_()},[_]),B=L.useCallback(async Y=>{await YD(Y),_()},[_]),z=L.useCallback(async Y=>{const se=a.find(D=>D.id===Y);if(!se||se.definition.type!=="consumable")return!1;const re=se.definition.special_effect;if(!re)return!1;const[_e,ve]=re.split(":"),j=parseInt(ve,10);switch(_e){case"restore_energy":e&&await e(j,`Used ${se.definition.name}`);break;case"grant_xp":s&&await s(j,`Used ${se.definition.name}`,"consumable",Y);break;case"add_shield":n&&await n(j);break;default:return!1}return await jT(Y,1),_(),!0},[a,s,e,n,_]),F=L.useCallback(()=>$D(),[]),U=L.useCallback(Y=>u.find(se=>se.slot===Y)||null,[u]),G=L.useCallback(Y=>a.filter(se=>se.definition.type===Y),[a]);return{inventory:a,equipped:u,loading:g,refresh:_,addItem:S,removeItem:A,equipItem:C,unequipItem:B,useConsumable:z,getStatBonuses:F,getEquipmentBySlot:U,getInventoryByType:G}}const WD="_appShell_w38qa_1",JD="_sidebar_w38qa_13",ZD="_sidebarLogo_w38qa_41",eO="_logoTitle_w38qa_51",tO="_logoSubtitle_w38qa_67",nO="_sidebarNav_w38qa_81",sO="_navItem_w38qa_97",iO="_navItemActive_w38qa_147",aO="_navIcon_w38qa_179",rO="_header_w38qa_193",oO="_headerLeft_w38qa_227",lO="_characterName_w38qa_239",cO="_levelBadge_w38qa_253",uO="_headerXP_w38qa_283",dO="_headerEnergy_w38qa_291",fO="_headerRight_w38qa_299",hO="_main_w38qa_313",mO="_xpFloat_w38qa_331",Ln={appShell:WD,sidebar:JD,sidebarLogo:ZD,logoTitle:eO,logoSubtitle:tO,sidebarNav:nO,navItem:sO,navItemActive:iO,navIcon:aO,header:rO,headerLeft:oO,characterName:lO,levelBadge:cO,headerXP:uO,headerEnergy:dO,headerRight:fO,main:hO,xpFloat:mO},pO=[{id:"character",label:"Character",icon:""},{id:"quests",label:"Quest Log",icon:""},{id:"buffs",label:"Buffs",icon:""},{id:"focus",label:"Focus Timer",icon:""},{id:"skills",label:"Skills",icon:""},{id:"inventory",label:"Inventory",icon:""}];function _O({activeTab:s,onTabChange:e}){return c.jsxs("aside",{className:Ln.sidebar,children:[c.jsxs("div",{className:Ln.sidebarLogo,children:[c.jsx("div",{className:Ln.logoTitle,children:"GOAL GAME"}),c.jsx("div",{className:Ln.logoSubtitle,children:"Life Management RPG"})]}),c.jsx("nav",{className:Ln.sidebarNav,children:pO.map(n=>c.jsxs("button",{className:`${Ln.navItem} ${s===n.id?Ln.navItemActive:""}`,onClick:()=>e(n.id),children:[c.jsx("span",{className:Ln.navIcon,children:n.icon}),n.label]},n.id))})]})}const gO="_progressContainer_1jr5p_1",yO="_progressLabel_1jr5p_9",EO="_track_1jr5p_33",vO="_fill_1jr5p_53",TO="_fillGold_1jr5p_67",bO="_fillGreen_1jr5p_77",SO="_fillBlue_1jr5p_85",NO="_shimmer_1jr5p_93",wO="_trackLarge_1jr5p_117",_a={progressContainer:gO,progressLabel:yO,track:EO,fill:vO,fillGold:TO,fillGreen:bO,fillBlue:SO,shimmer:NO,trackLarge:wO};function op({value:s,max:e,label:n,showValue:a=!0,color:o="gold",size:u="normal",shimmer:h=!1,className:g}){const v=e>0?Math.min(s/e*100,100):0,_=o==="gold"?_a.fillGold:o==="green"?_a.fillGreen:_a.fillBlue,S=[_a.track,u==="large"&&_a.trackLarge].filter(Boolean).join(" ");return c.jsxs("div",{className:`${_a.progressContainer} ${g||""}`,children:[(n||a)&&c.jsxs("div",{className:_a.progressLabel,children:[n&&c.jsx("span",{children:n}),a&&c.jsxs("span",{children:[s," / ",e]})]}),c.jsx("div",{className:S,children:c.jsx("div",{className:[_,_a.fill,h&&_a.shimmer].filter(Boolean).join(" "),style:{width:`${v}%`}})})]})}const AO="_energyContainer_1u07x_1",RO="_energyBar_1u07x_13",xO="_energyIcon_1u07x_33",CO="_energyTrack_1u07x_41",IO="_energyFill_1u07x_59",kO="_low_1u07x_73",LO="_empty_1u07x_81",DO="_energyText_1u07x_91",OO="_energyBarCompact_1u07x_125",jO="_energyDebuff_1u07x_175",MO="_exhausted_1u07x_199",UO="_debuffIcon_1u07x_207",VO="_energyTooltip_1u07x_217",qO="_tooltipRow_1u07x_251",BO="_tooltipLabel_1u07x_273",PO="_tooltipValue_1u07x_281",Bt={energyContainer:AO,energyBar:RO,energyIcon:xO,energyTrack:CO,energyFill:IO,low:kO,empty:LO,energyText:DO,energyBarCompact:OO,energyDebuff:jO,exhausted:MO,debuffIcon:UO,energyTooltip:VO,tooltipRow:qO,tooltipLabel:BO,tooltipValue:PO};function FO({state:s,percentage:e,isLow:n,isEmpty:a,debuffs:o=[],compact:u=!1}){const[h,g]=L.useState(!1),v=s.max_energy+s.bonus_energy,_=u?Bt.energyBarCompact:Bt.energyBar,S=`${Bt.energyFill} ${a?Bt.empty:n?Bt.low:""}`,A=`${Bt.energyText} ${a?Bt.empty:n?Bt.low:""}`;return c.jsxs("div",{className:Bt.energyContainer,children:[c.jsxs("div",{className:_,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{position:"relative"},children:[c.jsx("span",{className:Bt.energyIcon,children:""}),c.jsx("div",{className:Bt.energyTrack,children:c.jsx("div",{className:S,style:{width:`${e}%`}})}),c.jsxs("span",{className:A,children:[s.current_energy,"/",v]}),h&&c.jsxs("div",{className:Bt.energyTooltip,children:[c.jsxs("div",{className:Bt.tooltipRow,children:[c.jsx("span",{className:Bt.tooltipLabel,children:"Current"}),c.jsx("span",{className:Bt.tooltipValue,children:s.current_energy})]}),c.jsxs("div",{className:Bt.tooltipRow,children:[c.jsx("span",{className:Bt.tooltipLabel,children:"Max"}),c.jsx("span",{className:Bt.tooltipValue,children:s.max_energy})]}),s.bonus_energy>0&&c.jsxs("div",{className:Bt.tooltipRow,children:[c.jsx("span",{className:Bt.tooltipLabel,children:"Bonus"}),c.jsxs("span",{className:Bt.tooltipValue,children:["+",s.bonus_energy]})]}),c.jsxs("div",{className:Bt.tooltipRow,children:[c.jsx("span",{className:Bt.tooltipLabel,children:"Regen"}),c.jsxs("span",{className:Bt.tooltipValue,children:[PT,"/hr"]})]})]})]}),o.map((C,B)=>c.jsxs("div",{className:`${Bt.energyDebuff} ${C.name==="Exhausted"?Bt.exhausted:""}`,children:[c.jsx("span",{className:Bt.debuffIcon,children:C.icon}),C.name]},B))]})}function zO({character:s,energyState:e}){const n=GT(s.total_xp),a=e?e.current_energy/(e.max_energy+e.bonus_energy)*100:0,o=e?e.current_energy<=Dm:!1,u=e?e.current_energy<=Om:!1;return c.jsxs("header",{className:Ln.header,children:[c.jsxs("div",{className:Ln.headerLeft,children:[c.jsx("span",{className:Ln.characterName,children:s.name}),c.jsxs("span",{className:Ln.levelBadge,children:["Lv. ",s.level,"  ",s.title]})]}),c.jsxs("div",{className:Ln.headerRight,children:[e&&c.jsx("div",{className:Ln.headerEnergy,children:c.jsx(FO,{state:e,percentage:a,isLow:o,isEmpty:u,compact:!0})}),c.jsx("div",{className:Ln.headerXP,children:c.jsx(op,{value:n.current,max:n.needed,label:"XP",shimmer:!0})})]})]})}const GO="_levelUpOverlay_dig0a_1",HO="_levelUpContent_dig0a_23",XO="_levelUpIcon_dig0a_33",YO="_levelUpTitle_dig0a_47",$O="_levelUpLevel_dig0a_65",QO="_levelUpTitleName_dig0a_79",KO="_dismissText_dig0a_95",Jr={levelUpOverlay:GO,levelUpContent:HO,levelUpIcon:XO,levelUpTitle:YO,levelUpLevel:$O,levelUpTitleName:QO,dismissText:KO};function WO({level:s,title:e,onDismiss:n}){return L.useEffect(()=>{const a=setTimeout(n,5e3),o=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&n()};return window.addEventListener("keydown",o),()=>{clearTimeout(a),window.removeEventListener("keydown",o)}},[n]),c.jsx("div",{className:Jr.levelUpOverlay,onClick:n,children:c.jsxs("div",{className:Jr.levelUpContent,children:[c.jsx("span",{className:Jr.levelUpIcon,children:""}),c.jsx("div",{className:Jr.levelUpTitle,children:"LEVEL UP"}),c.jsxs("div",{className:Jr.levelUpLevel,children:["Level ",s]}),c.jsx("div",{className:Jr.levelUpTitleName,children:e}),c.jsx("div",{className:Jr.dismissText,children:"Click or press any key to continue"})]})})}const JO="_panel_zw35t_1",ZO="_panelHeader_zw35t_69",ej="_panelGlow_zw35t_93",Cm={panel:JO,panelHeader:ZO,panelGlow:ej};function St({children:s,header:e,glow:n,className:a,style:o}){const u=[Cm.panel,n&&Cm.panelGlow,a].filter(Boolean).join(" ");return c.jsxs("div",{className:u,style:o,children:[e&&c.jsx("div",{className:Cm.panelHeader,children:e}),s]})}const tj="_button_vi3e3_1",nj="_primary_vi3e3_61",sj="_danger_vi3e3_83",ij="_small_vi3e3_103",aj="_ghost_vi3e3_113",rj="_fullWidth_vi3e3_133",sd={button:tj,primary:nj,danger:sj,small:ij,ghost:aj,fullWidth:rj};function Oe({variant:s="default",size:e="normal",fullWidth:n,children:a,className:o,...u}){const h=[sd.button,s!=="default"&&sd[s],e==="small"&&sd.small,n&&sd.fullWidth,o].filter(Boolean).join(" ");return c.jsx("button",{className:h,...u,children:a})}const oj="_inputGroup_1helv_1",lj="_label_1helv_13",cj="_input_1helv_1",uj="_select_1helv_31",dj="_textarea_1helv_31",ba={inputGroup:oj,label:lj,input:cj,select:uj,textarea:dj};function Gi({label:s,className:e,...n}){return c.jsxs("div",{className:ba.inputGroup,children:[s&&c.jsx("label",{className:ba.label,children:s}),c.jsx("input",{className:`${ba.input} ${e||""}`,...n})]})}function va({label:s,children:e,className:n,...a}){return c.jsxs("div",{className:ba.inputGroup,children:[s&&c.jsx("label",{className:ba.label,children:s}),c.jsx("select",{className:`${ba.select} ${n||""}`,...a,children:e})]})}function kd({label:s,className:e,...n}){return c.jsxs("div",{className:ba.inputGroup,children:[s&&c.jsx("label",{className:ba.label,children:s}),c.jsx("textarea",{className:`${ba.textarea} ${e||""}`,...n})]})}const fj=[{minLevel:50,tier:7},{minLevel:40,tier:6},{minLevel:30,tier:5},{minLevel:22,tier:4},{minLevel:15,tier:3},{minLevel:10,tier:2},{minLevel:5,tier:1},{minLevel:1,tier:0}];function hj(s){for(const{minLevel:e,tier:n}of fj)if(s>=e)return n;return 0}function Tc(s){if(s<5)return 0;const a=(s-5)/25;return Math.min(Math.pow(a,.7),1)}const bc={stamina:"#2ecc71",willpower:"#9b59b6",health:"#e74c3c",focus:"#3498db",charisma:"#e67e22"},O1={0:{primary:"#8b7355",secondary:"#6b5344",accent:"#a08060",skin:"#e8c4a0",hair:"#4a3728"},1:{primary:"#8b4513",secondary:"#654321",accent:"#cd853f",skin:"#e8c4a0",hair:"#4a3728"},2:{primary:"#708090",secondary:"#4a5568",accent:"#a0aec0",skin:"#e8c4a0",hair:"#4a3728"},3:{primary:"#5a6672",secondary:"#3d4852",accent:"#8892a0",skin:"#e8c4a0",hair:"#4a3728"},4:{primary:"#b8860b",secondary:"#8b6914",accent:"#daa520",skin:"#e8c4a0",hair:"#4a3728"},5:{primary:"#ffd700",secondary:"#b8860b",accent:"#ffed4a",skin:"#e8c4a0",hair:"#4a3728",glow:"#ffd700"},6:{primary:"#e6e6fa",secondary:"#9370db",accent:"#dda0dd",skin:"#e8c4a0",hair:"#4a3728",glow:"#9370db"},7:{primary:"#8b0000",secondary:"#4a0000",accent:"#ff4500",skin:"#e8c4a0",hair:"#ffd700",glow:"#ff4500",crown:"#ffd700"}},Al=64;function ya(s,e,n,a,o=1){s.fillStyle=a,s.fillRect(e,n,o,o)}function Dt(s,e,n,a,o,u){s.fillStyle=u,s.fillRect(e,n,a,o)}function mj({ctx:s,palette:e}){Dt(s,27,7,10,4,e.hair),Dt(s,28,8,8,8,e.skin),Dt(s,28,7,8,2,e.hair),ya(s,30,11,"#2c3e50"),ya(s,33,11,"#2c3e50")}function pj({ctx:s,palette:e,tier:n}){Dt(s,26,16,12,16,e.primary),Dt(s,31,18,2,12,e.secondary),n>=2&&(Dt(s,24,16,3,4,e.accent),Dt(s,37,16,3,4,e.accent)),n>=1&&(Dt(s,26,28,12,2,e.secondary),ya(s,31,28,e.accent,2)),n>=3&&(Dt(s,28,18,8,6,e.accent),Dt(s,30,19,4,4,e.secondary))}function _j({ctx:s,palette:e,tier:n}){Dt(s,22,18,4,12,e.primary),Dt(s,22,30,4,3,e.skin),Dt(s,38,18,4,12,e.primary),Dt(s,38,30,4,3,e.skin),n>=2&&(Dt(s,22,18,4,3,e.accent),Dt(s,38,18,4,3,e.accent)),n>=4&&(Dt(s,21,28,5,5,e.accent),Dt(s,38,28,5,5,e.accent))}function gj({ctx:s,palette:e,tier:n}){Dt(s,27,32,5,14,n>=3?e.secondary:e.primary),Dt(s,26,46,6,4,e.secondary),Dt(s,32,32,5,14,n>=3?e.secondary:e.primary),Dt(s,32,46,6,4,e.secondary),n>=2&&(Dt(s,26,46,6,2,e.accent),Dt(s,32,46,6,2,e.accent))}function yj({ctx:s,palette:e,tier:n}){if(n<3)return;const o={3:"#8b0000",4:"#4a0082",5:"#1a1a2e",6:"#4a0082",7:"#8b0000"}[n]||e.secondary;s.fillStyle=o,s.beginPath(),s.moveTo(24,16),s.lineTo(40,16),s.lineTo(42,48),s.lineTo(22,48),s.closePath(),s.fill(),s.fillStyle=e.accent,s.fillRect(22,16,2,32),s.fillRect(40,16,2,32)}function Ej({ctx:s,palette:e,tier:n}){if(n<2)return;const a=28,o=8;n===2?Dt(s,a-1,o-2,10,3,e.secondary):n>=3&&n<7&&(Dt(s,a-2,o-3,12,5,e.accent),Dt(s,a,o+2,8,2,"#1a1a2e"),n>=4&&Dt(s,a+3,o-6,2,4,"#e74c3c"))}function vj({ctx:s,palette:e}){const n="crown"in e?e.crown:"#ffd700",a=28,o=8;Dt(s,a-2,o-4,12,3,n),ya(s,a-1,o-6,n,2),ya(s,a+3,o-7,n,2),ya(s,a+7,o-6,n,2),ya(s,a,o-5,"#e74c3c"),ya(s,a+4,o-6,"#3498db"),ya(s,a+8,o-5,"#2ecc71")}function Tj({ctx:s}){const e="#8b0000",n="#ff4500";s.fillStyle=e,s.beginPath(),s.moveTo(22,20),s.lineTo(8,10),s.lineTo(6,16),s.lineTo(10,24),s.lineTo(14,32),s.lineTo(20,36),s.lineTo(22,28),s.closePath(),s.fill(),s.fillStyle=n,s.beginPath(),s.moveTo(20,22),s.lineTo(12,14),s.lineTo(12,20),s.lineTo(16,28),s.closePath(),s.fill(),s.fillStyle=e,s.beginPath(),s.moveTo(42,20),s.lineTo(56,10),s.lineTo(58,16),s.lineTo(54,24),s.lineTo(50,32),s.lineTo(44,36),s.lineTo(42,28),s.closePath(),s.fill(),s.fillStyle=n,s.beginPath(),s.moveTo(44,22),s.lineTo(52,14),s.lineTo(52,20),s.lineTo(48,28),s.closePath(),s.fill()}function bj(s,e){if(e<5)return;const n=O1[e],a="glow"in n?n.glow:"#ffd700",o=s.createRadialGradient(32,32,10,32,32,40);o.addColorStop(0,`${a}40`),o.addColorStop(.5,`${a}20`),o.addColorStop(1,`${a}00`),s.fillStyle=o,s.fillRect(0,0,Al,Al)}function Sj(s,e){const n=Math.max(0,Math.min(7,e)),a=O1[n];s.clearRect(0,0,Al,Al),s.imageSmoothingEnabled=!1;const o={ctx:s,palette:a,tier:n};bj(s,n),n>=7&&Tj(o),n>=3&&yj(o),gj(o),pj(o),_j(o),mj(o),n>=7?vj(o):n>=2&&Ej(o)}const Nj="_spriteContainer_1vkdq_3",wj="_spriteCanvas_1vkdq_25",Aj="_auraStamina_1vkdq_79",Rj="_auraWillpower_1vkdq_81",xj="_auraHealth_1vkdq_83",Cj="_auraFocus_1vkdq_85",Ij="_auraCharisma_1vkdq_87",kj="_auraLayer_1vkdq_99",ai={spriteContainer:Nj,spriteCanvas:wj,auraStamina:Aj,auraWillpower:Rj,auraHealth:xj,auraFocus:Cj,auraCharisma:Ij,auraLayer:kj};function Lj({level:s,stats:e}){const n=L.useRef(null),a=hj(s);L.useEffect(()=>{const h=n.current;if(!h)return;const g=h.getContext("2d");g&&Sj(g,a)},[a]);const o={stamina:Tc(e.stamina),willpower:Tc(e.willpower),health:Tc(e.health),focus:Tc(e.focus),charisma:Tc(e.charisma)},u={"--aura-stamina-intensity":o.stamina,"--aura-stamina-color":bc.stamina,"--aura-willpower-intensity":o.willpower,"--aura-willpower-color":bc.willpower,"--aura-health-intensity":o.health,"--aura-health-color":bc.health,"--aura-focus-intensity":o.focus,"--aura-focus-color":bc.focus,"--aura-charisma-intensity":o.charisma,"--aura-charisma-color":bc.charisma};return c.jsxs("div",{className:ai.spriteContainer,style:u,children:[o.stamina>0&&c.jsx("div",{className:`${ai.auraLayer} ${ai.auraStamina}`}),o.willpower>0&&c.jsx("div",{className:`${ai.auraLayer} ${ai.auraWillpower}`}),o.health>0&&c.jsx("div",{className:`${ai.auraLayer} ${ai.auraHealth}`}),o.focus>0&&c.jsx("div",{className:`${ai.auraLayer} ${ai.auraFocus}`}),o.charisma>0&&c.jsx("div",{className:`${ai.auraLayer} ${ai.auraCharisma}`}),c.jsx("canvas",{ref:n,width:Al,height:Al,className:ai.spriteCanvas})]})}const Dj="_characterGrid_1vnpd_1",Oj="_characterMain_1vnpd_13",jj="_characterSide_1vnpd_25",Mj="_profileSection_1vnpd_37",Uj="_characterNameDisplay_1vnpd_61",Vj="_characterTitleDisplay_1vnpd_75",qj="_xpSection_1vnpd_89",Bj="_totalXP_1vnpd_97",Pj="_statsGrid_1vnpd_113",Fj="_statRow_1vnpd_125",zj="_statName_1vnpd_137",Gj="_statBar_1vnpd_157",Hj="_statValue_1vnpd_165",Xj="_buffsList_1vnpd_185",Yj="_activeBuff_1vnpd_197",$j="_buffType_1vnpd_219",Qj="_debuffType_1vnpd_229",Kj="_buffIcon_1vnpd_239",Wj="_buffInfo_1vnpd_247",Jj="_buffName_1vnpd_255",Zj="_buffTimer_1vnpd_265",e3="_emptyState_1vnpd_275",t3="_nameEditRow_1vnpd_291",n3="_xpLogList_1vnpd_307",s3="_xpLogEntry_1vnpd_323",i3="_xpLogReason_1vnpd_343",a3="_xpLogAmount_1vnpd_351",r3="_negative_1vnpd_363",Lt={characterGrid:Dj,characterMain:Oj,characterSide:jj,profileSection:Mj,characterNameDisplay:Uj,characterTitleDisplay:Vj,xpSection:qj,totalXP:Bj,statsGrid:Pj,statRow:Fj,statName:zj,statBar:Gj,statValue:Hj,buffsList:Xj,activeBuff:Yj,buffType:$j,debuffType:Qj,buffIcon:Kj,buffInfo:Wj,buffName:Jj,buffTimer:Zj,emptyState:e3,nameEditRow:t3,xpLogList:n3,xpLogEntry:s3,xpLogReason:i3,xpLogAmount:a3,negative:r3},o3={stamina:"green",willpower:"blue",health:"gold",focus:"blue",charisma:"gold"};function l3({character:s,stats:e,activeBuffs:n,xpLog:a,onNameChange:o}){const u=GT(s.total_xp),[h,g]=L.useState(!1),[v,_]=L.useState(s.name),[S,A]=L.useState(!1),C=()=>{v.trim()&&(o(v.trim()),g(!1))};function B(z){const F=new Date,G=new Date(z+"Z").getTime()-F.getTime();if(G<=0)return"Expired";const Y=Math.floor(G/36e5),se=Math.floor(G%36e5/6e4);return Y>0?`${Y}h ${se}m remaining`:`${se}m remaining`}return c.jsxs("div",{className:Lt.characterGrid,children:[c.jsxs("div",{className:Lt.characterMain,children:[c.jsx(St,{children:c.jsxs("div",{className:Lt.profileSection,children:[c.jsx(Lj,{level:s.level,stats:e}),h?c.jsxs("div",{className:Lt.nameEditRow,children:[c.jsx(Gi,{value:v,onChange:z=>_(z.target.value),onKeyDown:z=>z.key==="Enter"&&C(),autoFocus:!0}),c.jsx(Oe,{size:"small",variant:"primary",onClick:C,children:"Save"}),c.jsx(Oe,{size:"small",onClick:()=>g(!1),children:"Cancel"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:Lt.characterNameDisplay,children:s.name}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:()=>g(!0),children:"Rename"})]}),c.jsxs("div",{className:Lt.characterTitleDisplay,children:["Level ",s.level,"  ",s.title]}),c.jsxs("div",{className:Lt.xpSection,children:[c.jsx(op,{value:u.current,max:u.needed,label:"Experience",size:"large",shimmer:!0}),c.jsxs("div",{className:Lt.totalXP,children:[s.total_xp," Total XP"]})]})]})}),c.jsx(St,{header:"Stats",children:c.jsx("div",{className:Lt.statsGrid,children:FT.map(z=>c.jsxs("div",{className:Lt.statRow,children:[c.jsx("span",{className:Lt.statName,children:z}),c.jsx("div",{className:Lt.statBar,children:c.jsx(op,{value:e[z],max:30,showValue:!1,color:o3[z]||"gold"})}),c.jsx("span",{className:Lt.statValue,children:e[z]})]},z))})})]}),c.jsxs("div",{className:Lt.characterSide,children:[c.jsx(St,{header:"Active Effects",children:n.length===0?c.jsx("div",{className:Lt.emptyState,children:"No active buffs or debuffs"}):c.jsx("div",{className:Lt.buffsList,children:n.map(z=>{const F=Ld(z.stat_effects),U=Object.entries(F).map(([G,Y])=>`${Y>0?"+":""}${Y} ${G}`).join(", ");return c.jsxs("div",{className:`${Lt.activeBuff} ${z.type==="buff"?Lt.buffType:Lt.debuffType}`,children:[c.jsx("span",{className:Lt.buffIcon,children:z.icon}),c.jsxs("div",{className:Lt.buffInfo,children:[c.jsx("div",{className:Lt.buffName,children:z.name}),c.jsxs("div",{className:Lt.buffTimer,children:[B(z.expires_at),U&&`  ${U}`]})]})]},z.id)})})}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:()=>A(!S),style:{width:"100%",marginTop:8},children:S?"Hide XP History":"Show XP History"}),S&&c.jsx(St,{header:"XP History",style:{marginTop:8},children:a.length===0?c.jsx("div",{className:Lt.emptyState,children:"No XP earned yet. Complete steps to earn XP!"}):c.jsx("div",{className:Lt.xpLogList,children:a.slice(0,20).map(z=>c.jsxs("div",{className:Lt.xpLogEntry,children:[c.jsx("span",{className:Lt.xpLogReason,children:z.reason}),c.jsxs("span",{className:`${Lt.xpLogAmount} ${z.amount<0?Lt.negative:""}`,children:[z.amount>0?"+":"",z.amount," XP"]})]},z.id))})})]})]})}const c3="_overlay_15bjw_1",u3="_modal_15bjw_25",d3="_modalHeader_15bjw_97",f3="_modalTitle_15bjw_111",h3="_closeButton_15bjw_123",m3="_modalActions_15bjw_153",al={overlay:c3,modal:u3,modalHeader:d3,modalTitle:f3,closeButton:h3,modalActions:m3};function Rl({open:s,onClose:e,title:n,children:a,actions:o}){return L.useEffect(()=>{if(!s)return;const u=h=>{h.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[s,e]),s?c.jsx("div",{className:al.overlay,onClick:e,children:c.jsxs("div",{className:al.modal,onClick:u=>u.stopPropagation(),children:[n&&c.jsxs("div",{className:al.modalHeader,children:[c.jsx("h3",{className:al.modalTitle,children:n}),c.jsx("button",{className:al.closeButton,onClick:e,children:""})]}),a,o&&c.jsx("div",{className:al.modalActions,children:o})]})}):null}const p3="_checkbox_543u2_1",_3="_box_543u2_17",g3="_checked_543u2_53",y3="_checkmark_543u2_63",E3="_checkboxLabel_543u2_75",v3="_hidden_543u2_99",rl={checkbox:p3,box:_3,checked:g3,checkmark:y3,checkboxLabel:E3,hidden:v3};function T3({checked:s,onChange:e,label:n,className:a}){const o=[rl.checkbox,s&&rl.checked,a].filter(Boolean).join(" ");return c.jsxs("label",{className:o,onClick:u=>u.stopPropagation(),children:[c.jsx("input",{type:"checkbox",className:rl.hidden,checked:s,onChange:u=>e(u.target.checked)}),c.jsx("span",{className:rl.box,children:s&&c.jsx("span",{className:rl.checkmark,children:""})}),n&&c.jsx("span",{className:rl.checkboxLabel,children:n})]})}const b3="_questLog_1dd70_1",S3="_questToolbar_1dd70_13",N3="_questFilters_1dd70_27",w3="_goalSection_1dd70_39",A3="_goalHeader_1dd70_47",R3="_goalDomainIcon_1dd70_61",x3="_goalTitle_1dd70_69",C3="_goalDomain_1dd70_61",I3="_questsList_1dd70_99",k3="_questCard_1dd70_115",L3="_questCardHeader_1dd70_139",D3="_questPriority_1dd70_157",O3="_normal_1dd70_171",j3="_important_1dd70_173",M3="_legendary_1dd70_175",U3="_questTitle_1dd70_179",V3="_questCompleted_1dd70_191",q3="_questMeta_1dd70_201",B3="_questStepCount_1dd70_217",P3="_expandIcon_1dd70_233",F3="_expanded_1dd70_245",z3="_stepsSection_1dd70_255",G3="_stepsList_1dd70_265",H3="_stepItem_1dd70_279",X3="_stepPriorityDot_1dd70_305",Y3="_stepTitle_1dd70_319",$3="_stepActions_1dd70_329",Q3="_addStepRow_1dd70_347",K3="_addStepInput_1dd70_359",W3="_formGrid_1dd70_369",J3="_formRow_1dd70_381",Z3="_emptyState_1dd70_399",Rt={questLog:b3,questToolbar:S3,questFilters:N3,goalSection:w3,goalHeader:A3,goalDomainIcon:R3,goalTitle:x3,goalDomain:C3,questsList:I3,questCard:k3,questCardHeader:L3,questPriority:D3,normal:O3,important:j3,legendary:M3,questTitle:U3,questCompleted:V3,questMeta:q3,questStepCount:B3,expandIcon:P3,expanded:F3,stepsSection:z3,stepsList:G3,stepItem:H3,stepPriorityDot:X3,stepTitle:Y3,stepActions:$3,addStepRow:Q3,addStepInput:K3,formGrid:W3,formRow:J3,emptyState:Z3};function e4({quest:s,onCreateStep:e,onCompleteStep:n,onUncompleteStep:a,onDeleteStep:o,onDeleteQuest:u}){const[h,g]=L.useState(!1),[v,_]=L.useState(""),[S,A]=L.useState("normal"),C=s.steps.filter(G=>G.status==="completed").length,B=s.steps.length,z=s.status==="completed",F=()=>{v.trim()&&(e(s.id,v.trim(),S),_(""),A("normal"))},U=G=>G==="legendary"?"var(--priority-legendary)":G==="important"?"var(--priority-important)":"var(--priority-normal)";return c.jsxs("div",{className:`${Rt.questCard} ${z?Rt.questCompleted:""}`,children:[c.jsxs("div",{className:Rt.questCardHeader,onClick:()=>g(!h),children:[c.jsx("div",{className:`${Rt.questPriority} ${Rt[s.priority]}`}),c.jsx("span",{className:Rt.questTitle,children:s.title}),c.jsxs("span",{className:Rt.questMeta,children:[c.jsxs("span",{className:Rt.questStepCount,children:[C,"/",B]}),c.jsx(Oe,{size:"small",variant:"danger",onClick:G=>{G.stopPropagation(),u(s.id)},children:""})]}),c.jsx("span",{className:`${Rt.expandIcon} ${h?Rt.expanded:""}`,children:""})]}),h&&c.jsxs("div",{className:Rt.stepsSection,children:[c.jsx("div",{className:Rt.stepsList,children:s.steps.map(G=>c.jsxs("div",{className:Rt.stepItem,children:[c.jsx("div",{className:Rt.stepPriorityDot,style:{background:U(G.priority)}}),c.jsx(T3,{checked:G.status==="completed",onChange:Y=>{Y?n(G.id,s.id,G.priority):a(G.id)},label:G.title}),c.jsx("div",{className:Rt.stepActions,children:c.jsx(Oe,{size:"small",variant:"danger",onClick:()=>o(G.id),children:""})})]},G.id))}),!z&&c.jsxs("div",{className:Rt.addStepRow,children:[c.jsx("div",{className:Rt.addStepInput,children:c.jsx(Gi,{value:v,onChange:G=>_(G.target.value),placeholder:"Add a step...",onKeyDown:G=>G.key==="Enter"&&F()})}),c.jsxs(va,{value:S,onChange:G=>A(G.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important"}),c.jsx("option",{value:"legendary",children:"Legendary"})]}),c.jsx(Oe,{variant:"primary",onClick:F,children:"Add"})]})]})]})}function t4({goals:s,domains:e,filterDomain:n,filterStatus:a,onFilterDomain:o,onFilterStatus:u,onCreateGoal:h,onCreateQuest:g,onCreateStep:v,onCompleteStep:_,onUncompleteStep:S,onDeleteStep:A,onDeleteQuest:C,onDeleteGoal:B}){const[z,F]=L.useState(!1),[U,G]=L.useState(null),[Y,se]=L.useState(""),[re,_e]=L.useState(""),[ve,j]=L.useState(1),[D,M]=L.useState(""),[V,w]=L.useState(""),[O,k]=L.useState("normal"),Ce=()=>{Y.trim()&&(h(ve,Y.trim(),re.trim()),se(""),_e(""),F(!1))},mt=()=>{!D.trim()||U===null||(g(U,D.trim(),V.trim(),O),M(""),w(""),k("normal"),G(null))};return c.jsxs("div",{className:Rt.questLog,children:[c.jsxs("div",{className:Rt.questToolbar,children:[c.jsxs("div",{className:Rt.questFilters,children:[c.jsxs(va,{value:n??"",onChange:$=>o($.target.value?Number($.target.value):void 0),children:[c.jsx("option",{value:"",children:"All Domains"}),e.map($=>c.jsxs("option",{value:$.id,children:[$.icon," ",$.name]},$.id))]}),c.jsxs(va,{value:a??"",onChange:$=>u($.target.value||void 0),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]})]}),c.jsx(Oe,{variant:"primary",onClick:()=>F(!0),children:"+ New Goal"})]}),s.length===0?c.jsx(St,{children:c.jsx("div",{className:Rt.emptyState,children:"No goals yet. Create your first goal to begin your adventure!"})}):s.map($=>c.jsx(St,{children:c.jsxs("div",{className:Rt.goalSection,children:[c.jsxs("div",{className:Rt.goalHeader,children:[c.jsx("span",{className:Rt.goalDomainIcon,children:$.domain_icon}),c.jsx("span",{className:Rt.goalTitle,children:$.title}),c.jsx("span",{className:Rt.goalDomain,children:$.domain_name}),c.jsx(Oe,{size:"small",variant:"primary",onClick:()=>G($.id),children:"+ Quest"}),c.jsx(Oe,{size:"small",variant:"danger",onClick:()=>B($.id),children:""})]}),$.quests.length===0?c.jsx("div",{className:Rt.emptyState,children:"No quests yet. Add a quest to this goal."}):c.jsx("div",{className:Rt.questsList,children:$.quests.map(ne=>c.jsx(e4,{quest:ne,onCreateStep:v,onCompleteStep:_,onUncompleteStep:S,onDeleteStep:A,onDeleteQuest:C},ne.id))})]})},$.id)),c.jsx(Rl,{open:z,onClose:()=>F(!1),title:"New Goal",actions:c.jsxs(c.Fragment,{children:[c.jsx(Oe,{onClick:()=>F(!1),children:"Cancel"}),c.jsx(Oe,{variant:"primary",onClick:Ce,children:"Create Goal"})]}),children:c.jsxs("div",{className:Rt.formGrid,children:[c.jsx(va,{label:"Domain",value:ve,onChange:$=>j(Number($.target.value)),children:e.map($=>c.jsxs("option",{value:$.id,children:[$.icon," ",$.name]},$.id))}),c.jsx(Gi,{label:"Goal Title",value:Y,onChange:$=>se($.target.value),placeholder:"e.g., Get in shape",onKeyDown:$=>$.key==="Enter"&&Ce()}),c.jsx(kd,{label:"Description (optional)",value:re,onChange:$=>_e($.target.value),placeholder:"Describe your goal..."})]})}),c.jsx(Rl,{open:U!==null,onClose:()=>G(null),title:"New Quest",actions:c.jsxs(c.Fragment,{children:[c.jsx(Oe,{onClick:()=>G(null),children:"Cancel"}),c.jsx(Oe,{variant:"primary",onClick:mt,children:"Create Quest"})]}),children:c.jsxs("div",{className:Rt.formGrid,children:[c.jsx(Gi,{label:"Quest Title",value:D,onChange:$=>M($.target.value),placeholder:"e.g., Run 5K",onKeyDown:$=>$.key==="Enter"&&mt()}),c.jsx(kd,{label:"Description (optional)",value:V,onChange:$=>w($.target.value),placeholder:"Describe this quest..."}),c.jsxs(va,{label:"Priority",value:O,onChange:$=>k($.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important (1.5x XP)"}),c.jsx("option",{value:"legendary",children:"Legendary (2x XP)"})]})]})})]})}const n4="_buffTracker_10dzk_1",s4="_buffToolbar_10dzk_13",i4="_buffGrid_10dzk_33",a4="_buffSection_10dzk_45",r4="_buffCard_10dzk_59",o4="_buffCardIcon_10dzk_89",l4="_buffCardInfo_10dzk_99",c4="_buffCardName_10dzk_107",u4="_buffCardDesc_10dzk_119",d4="_buffCardMeta_10dzk_131",f4="_buffCardActions_10dzk_141",h4="_buffTypeBadge_10dzk_155",m4="_buffTypeBuff_10dzk_175",p4="_buffTypeDebuff_10dzk_187",_4="_activeSection_10dzk_201",g4="_activeBuffItem_10dzk_213",y4="_isBuff_10dzk_229",E4="_isDebuff_10dzk_241",v4="_activeBuffIcon_10dzk_253",T4="_activeBuffInfo_10dzk_261",b4="_activeBuffName_10dzk_269",S4="_activeBuffTimer_10dzk_277",N4="_activeBuffEffects_10dzk_287",w4="_formGrid_10dzk_299",A4="_formRow_10dzk_311",R4="_statEffectRow_10dzk_329",x4="_statEffectLabel_10dzk_341",C4="_statEffectInput_10dzk_355",I4="_divider_10dzk_363",k4="_emptyState_10dzk_375",L4="_streakBadge_10dzk_391",D4="_atRisk_10dzk_421",O4="_shieldActive_10dzk_435",j4="_streakIcon_10dzk_447",M4="_streakCount_10dzk_455",U4="_streakLabel_10dzk_463",V4="_shieldInventory_10dzk_483",q4="_shieldIcon_10dzk_505",B4="_shieldInfo_10dzk_513",P4="_shieldTitle_10dzk_521",F4="_shieldDesc_10dzk_533",z4="_shieldCount_10dzk_543",G4="_milestoneBadge_10dzk_563",H4="_milestoneIcon_10dzk_589",X4="_claimMilestone_10dzk_619",Fe={buffTracker:n4,buffToolbar:s4,buffGrid:i4,buffSection:a4,buffCard:r4,buffCardIcon:o4,buffCardInfo:l4,buffCardName:c4,buffCardDesc:u4,buffCardMeta:d4,buffCardActions:f4,buffTypeBadge:h4,buffTypeBuff:m4,buffTypeDebuff:p4,activeSection:_4,activeBuffItem:g4,isBuff:y4,isDebuff:E4,activeBuffIcon:v4,activeBuffInfo:T4,activeBuffName:b4,activeBuffTimer:S4,activeBuffEffects:N4,formGrid:w4,formRow:A4,statEffectRow:R4,statEffectLabel:x4,statEffectInput:C4,divider:I4,emptyState:k4,streakBadge:L4,atRisk:D4,shieldActive:O4,streakIcon:j4,streakCount:M4,streakLabel:U4,shieldInventory:V4,shieldIcon:q4,shieldInfo:B4,shieldTitle:P4,shieldDesc:F4,shieldCount:z4,milestoneBadge:G4,milestoneIcon:H4,claimMilestone:X4},Im=[{name:"Morning Exercise",description:"Worked out in the morning",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2,willpower:1}},{name:"Cardio / Running",description:"Ran, cycled, swam, or did sustained cardio",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2}},{name:"Strength Training",description:"Lifted weights or did resistance training",type:"buff",icon:"",duration:24,stats:{stamina:2,health:1,willpower:2}},{name:"Yoga / Stretching",description:"Did yoga, stretching, or mobility work",type:"buff",icon:"",duration:24,stats:{health:2,focus:1,willpower:1}},{name:"8 Hours Sleep",description:"Got a full night of quality sleep",type:"buff",icon:"",duration:24,stats:{health:2,focus:2,stamina:1,willpower:1}},{name:"Meditation",description:"Practiced mindfulness or meditation",type:"buff",icon:"",duration:24,stats:{willpower:3,focus:2}},{name:"Healthy Meal",description:"Ate a balanced, nutritious meal",type:"buff",icon:"",duration:24,stats:{health:3,stamina:1}},{name:"Drank Enough Water",description:"Hit daily water intake goal",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Read 30+ Minutes",description:"Read a book, article, or educational material",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:1}},{name:"Studied / Learned",description:"Studied a course, skill, or new subject",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2}},{name:"Deep Work Session",description:"Focused work with no distractions for 90+ min",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2,stamina:1}},{name:"Journaling",description:"Wrote in journal or reflected on the day",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Cold Shower",description:"Took a cold shower or ice bath",type:"buff",icon:"",duration:24,stats:{willpower:3,stamina:1}},{name:"No Phone First Hour",description:"Avoided phone for first hour after waking",type:"buff",icon:"",duration:24,stats:{focus:2,willpower:2}},{name:"Socialised",description:"Had meaningful social interaction",type:"buff",icon:"",duration:24,stats:{charisma:3,willpower:1}},{name:"Helped Someone",description:"Did something kind or helpful for another person",type:"buff",icon:"",duration:24,stats:{charisma:2,willpower:1}},{name:"Creative Time",description:"Spent time on a creative pursuit",type:"buff",icon:"",duration:24,stats:{focus:2,charisma:1,willpower:1}},{name:"Sunlight / Nature",description:"Spent 20+ minutes outdoors in natural light",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Gratitude Practice",description:"Practiced gratitude  wrote or reflected on 3+",type:"buff",icon:"",duration:24,stats:{willpower:2,charisma:1}},{name:"Meal Prep",description:"Prepared healthy meals in advance",type:"buff",icon:"",duration:48,stats:{health:2,willpower:1,stamina:1}},{name:"Cleaned / Organised",description:"Cleaned home, desk, or organised belongings",type:"buff",icon:"",duration:24,stats:{focus:1,willpower:2}},{name:"Financial Check-In",description:"Reviewed budget, tracked expenses, or saved",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Junk Food",description:"Ate fast food, excessive sugar, or processed food",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-1}},{name:"Skipped Exercise",description:"Had planned to exercise but didn't",type:"debuff",icon:"",duration:24,stats:{stamina:-2,willpower:-2}},{name:"Poor Sleep",description:"Got less than 6 hours or very poor quality",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,stamina:-1,willpower:-1}},{name:"Doomscrolling",description:"Mindlessly scrolled social media for 30+ min",type:"debuff",icon:"",duration:24,stats:{focus:-3,willpower:-2}},{name:"Excessive Gaming",description:"Played video games for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-2,stamina:-1}},{name:"Binge Watching",description:"Watched TV/streaming for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-1,stamina:-1}},{name:"Alcohol",description:"Drank alcohol",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,willpower:-1}},{name:"Smoking / Vaping",description:"Smoked cigarettes or vaped",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-2}},{name:"Excessive Caffeine",description:"Had too much coffee or energy drinks",type:"debuff",icon:"",duration:24,stats:{health:-1,focus:-1,stamina:-1}},{name:"Procrastinated",description:"Avoided important tasks most of the day",type:"debuff",icon:"",duration:24,stats:{willpower:-3,focus:-2}},{name:"Skipped Meals",description:"Skipped a meal or barely ate",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-2,focus:-1}},{name:"Stayed Up Too Late",description:"Went to bed much later than planned",type:"debuff",icon:"",duration:24,stats:{health:-1,willpower:-2,stamina:-1}},{name:"Impulse Spending",description:"Made unnecessary or impulse purchases",type:"debuff",icon:"",duration:24,stats:{willpower:-2}},{name:"Negative Self-Talk",description:"Caught in self-criticism or negative thought loops",type:"debuff",icon:"",duration:24,stats:{willpower:-2,charisma:-2}},{name:"Social Isolation",description:"Avoided people or cancelled social plans",type:"debuff",icon:"",duration:24,stats:{charisma:-3,willpower:-1}},{name:"Sugary Drinks",description:"Had soda, energy drinks, or sugary beverages",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-1}},{name:"Lost Temper",description:"Got angry or had an emotional outburst",type:"debuff",icon:"",duration:24,stats:{charisma:-2,willpower:-2}}],Y4=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function $4(s){const e=Math.round(s*60);if(e<60)return`${e}m`;const n=Math.floor(e/60),a=e%60;return a===0?`${n}h`:`${n}h ${a}m`}function Q4({definitions:s,activeBuffs:e,onCreateDefinition:n,onDeleteDefinition:a,onActivateBuff:o,onDeactivateBuff:u,streakInfos:h,shieldCount:g=0,onUseShield:v,getUnclaimedMilestones:_,onClaimMilestones:S}){const[A,C]=L.useState(!1),[B,z]=L.useState(""),[F,U]=L.useState(""),[G,Y]=L.useState("buff"),[se,re]=L.useState(""),[_e,ve]=L.useState(1440),[j,D]=L.useState({}),M=ne=>{if(ne==="")return;const Te=Im[Number(ne)];Te&&(z(Te.name),U(Te.description),Y(Te.type),re(Te.icon),ve(Te.duration*60),D({...Te.stats}))},V=()=>{z(""),U(""),Y("buff"),re(""),ve(1440),D({})},w=()=>{if(!B.trim())return;const ne=Object.fromEntries(Object.entries(j).filter(([,tt])=>tt!==0)),Te=_e/60;n(B.trim(),F.trim(),G,se,Te,JSON.stringify(ne)),V(),C(!1)};function O(ne){const Te=new Date,Ze=new Date(ne+"Z").getTime()-Te.getTime();if(Ze<=0)return"Expired";const H=Math.floor(Ze/36e5),ue=Math.floor(Ze%36e5/6e4);return H>0?`${H}h ${ue}m`:`${ue}m`}const k=s.filter(ne=>ne.type==="buff"),Ce=s.filter(ne=>ne.type==="debuff"),mt=Im.map((ne,Te)=>({...ne,index:Te})).filter(ne=>ne.type==="buff"),$=Im.map((ne,Te)=>({...ne,index:Te})).filter(ne=>ne.type==="debuff");return c.jsxs("div",{className:Fe.buffTracker,children:[c.jsxs("div",{className:Fe.buffToolbar,children:[c.jsx("div",{}),c.jsx(Oe,{variant:"primary",onClick:()=>{V(),C(!0)},children:"+ New Buff/Debuff"})]}),c.jsxs("div",{className:Fe.shieldInventory,children:[c.jsx("span",{className:Fe.shieldIcon,children:""}),c.jsxs("div",{className:Fe.shieldInfo,children:[c.jsx("div",{className:Fe.shieldTitle,children:"Streak Shields"}),c.jsx("div",{className:Fe.shieldDesc,children:"Protects a streak if you miss a day"})]}),c.jsx("span",{className:Fe.shieldCount,children:g})]}),e.length>0&&c.jsx(St,{header:"Active Effects",glow:!0,children:c.jsx("div",{className:Fe.activeSection,children:e.map(ne=>{const Te=Ld(ne.stat_effects),tt=Object.entries(Te).map(([Ze,H])=>`${H>0?"+":""}${H} ${Ze}`).join(", ");return c.jsxs("div",{className:`${Fe.activeBuffItem} ${ne.type==="buff"?Fe.isBuff:Fe.isDebuff}`,children:[c.jsx("span",{className:Fe.activeBuffIcon,children:ne.icon}),c.jsxs("div",{className:Fe.activeBuffInfo,children:[c.jsx("div",{className:Fe.activeBuffName,children:ne.name}),c.jsxs("div",{className:Fe.activeBuffTimer,children:[O(ne.expires_at)," remaining"]}),tt&&c.jsx("div",{className:Fe.activeBuffEffects,children:tt})]}),c.jsx(Oe,{size:"small",variant:"danger",onClick:()=>u(ne.id),children:"Remove"})]},ne.id)})})}),c.jsxs("div",{className:Fe.buffGrid,children:[c.jsx(St,{header:"Buffs (Positive Habits)",children:k.length===0?c.jsx("div",{className:Fe.emptyState,children:"No buffs defined yet"}):c.jsx("div",{className:Fe.buffSection,children:k.map(ne=>c.jsx(MT,{definition:ne,onActivate:o,onDelete:a,streakInfo:h?.get(ne.id),shieldCount:g,onUseShield:v,unclaimedMilestones:_?.(ne.id)||[],onClaimMilestones:S},ne.id))})}),c.jsx(St,{header:"Debuffs (Negative Habits)",children:Ce.length===0?c.jsx("div",{className:Fe.emptyState,children:"No debuffs defined yet"}):c.jsx("div",{className:Fe.buffSection,children:Ce.map(ne=>c.jsx(MT,{definition:ne,onActivate:o,onDelete:a},ne.id))})})]}),c.jsx(Rl,{open:A,onClose:()=>C(!1),title:"New Buff / Debuff",actions:c.jsxs(c.Fragment,{children:[c.jsx(Oe,{onClick:()=>C(!1),children:"Cancel"}),c.jsx(Oe,{variant:"primary",onClick:w,children:"Create"})]}),children:c.jsxs("div",{className:Fe.formGrid,children:[c.jsxs(va,{label:"Quick Select  Common Habits",value:"",onChange:ne=>M(ne.target.value),children:[c.jsx("option",{value:"",children:" Choose a preset to auto-fill "}),c.jsx("optgroup",{label:"Buffs (Positive Habits)",children:mt.map(ne=>c.jsxs("option",{value:ne.index,children:[ne.icon," ",ne.name]},ne.index))}),c.jsx("optgroup",{label:"Debuffs (Negative Habits)",children:$.map(ne=>c.jsxs("option",{value:ne.index,children:[ne.icon," ",ne.name]},ne.index))})]}),c.jsx("div",{className:Fe.divider}),c.jsxs("div",{className:Fe.formRow,children:[c.jsx(Gi,{label:"Name",value:B,onChange:ne=>z(ne.target.value),placeholder:"e.g., Morning Exercise"}),c.jsxs(va,{label:"Type",value:G,onChange:ne=>Y(ne.target.value),children:[c.jsx("option",{value:"buff",children:"Buff (Positive)"}),c.jsx("option",{value:"debuff",children:"Debuff (Negative)"})]})]}),c.jsx(kd,{label:"Description",value:F,onChange:ne=>U(ne.target.value),placeholder:"Describe this habit..."}),c.jsxs("div",{className:Fe.formRow,children:[c.jsx(va,{label:"Icon",value:se,onChange:ne=>re(ne.target.value),children:Y4.map(ne=>c.jsx("option",{value:ne,children:ne},ne))}),c.jsx(Gi,{label:"Duration (minutes)",type:"number",value:_e,onChange:ne=>ve(Number(ne.target.value)),min:1,max:10080})]}),c.jsxs("div",{children:[c.jsx("label",{className:Fe.statEffectLabel,style:{display:"block",marginBottom:8,fontFamily:"var(--font-heading)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-secondary)"},children:"Stat Effects"}),FT.map(ne=>c.jsxs("div",{className:Fe.statEffectRow,children:[c.jsx("span",{className:Fe.statEffectLabel,children:ne}),c.jsx("input",{type:"number",className:Fe.statEffectInput,value:j[ne]||0,onChange:Te=>D({...j,[ne]:Number(Te.target.value)}),style:{padding:"4px 8px",background:"var(--bg-dark)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontFamily:"var(--font-body)"}})]},ne))]})]})})]})}function MT({definition:s,onActivate:e,onDelete:n,streakInfo:a,shieldCount:o=0,onUseShield:u,unclaimedMilestones:h=[],onClaimMilestones:g}){const v=Ld(s.stat_effects),_=Object.entries(v).map(([U,G])=>`${G>0?"+":""}${G} ${U}`).join(", "),S=a?aL(a.currentStreak):null,A=a&&a.currentStreak>0,C=a?.isAtRisk&&!a?.shieldActive,B=a?.shieldActive,z=async()=>{u&&a&&await u(s.id)},F=async()=>{g&&await g(s.id)};return c.jsxs("div",{className:Fe.buffCard,children:[c.jsx("span",{className:Fe.buffCardIcon,children:s.icon}),c.jsxs("div",{className:Fe.buffCardInfo,children:[c.jsxs("div",{className:Fe.buffCardName,children:[s.name,S&&c.jsxs("span",{className:Fe.milestoneBadge,children:[c.jsx("span",{className:Fe.milestoneIcon,children:S.icon}),S.title]})]}),s.description&&c.jsx("div",{className:Fe.buffCardDesc,children:s.description}),c.jsxs("div",{className:Fe.buffCardMeta,children:[c.jsx("span",{className:`${Fe.buffTypeBadge} ${s.type==="buff"?Fe.buffTypeBuff:Fe.buffTypeDebuff}`,children:s.type})," ",$4(s.duration_hours),_&&`  ${_}`]}),s.type==="buff"&&A&&c.jsxs("div",{className:`${Fe.streakBadge} ${C?Fe.atRisk:""} ${B?Fe.shieldActive:""}`,children:[c.jsx("span",{className:Fe.streakIcon,children:B?"":""}),c.jsx("span",{className:Fe.streakCount,children:a.currentStreak}),c.jsxs("span",{className:Fe.streakLabel,children:["day streak",C&&" (at risk!)",B&&" (protected)"]})]}),C&&o>0&&u&&c.jsx(Oe,{size:"small",variant:"ghost",onClick:z,style:{marginTop:6},children:" Use Shield"}),h.length>0&&g&&c.jsxs(Oe,{size:"small",variant:"primary",onClick:F,className:Fe.claimMilestone,children:[" Claim ",h.length," Milestone",h.length>1?"s":"","!"]})]}),c.jsxs("div",{className:Fe.buffCardActions,children:[c.jsx(Oe,{size:"small",variant:"primary",onClick:()=>e(s.id),children:"Activate"}),c.jsx(Oe,{size:"small",variant:"danger",onClick:()=>n(s.id),children:"Delete"})]})]})}const K4="_container_e9q7r_1",W4="_title_e9q7r_17",J4="_status_e9q7r_33",Z4="_indicator_e9q7r_49",e5="_connected_e9q7r_61",t5="_disconnected_e9q7r_71",n5="_lastBackup_e9q7r_79",s5="_statusMessage_e9q7r_91",i5="_actions_e9q7r_121",a5="_button_e9q7r_135",r5="_buttonSecondary_e9q7r_167 _button_e9q7r_135",o5="_buttonDanger_e9q7r_187 _button_e9q7r_135",l5="_backupList_e9q7r_209",c5="_backupItem_e9q7r_233",u5="_backupName_e9q7r_255",d5="_backupDate_e9q7r_269",f5="_restoreButton_e9q7r_279",h5="_noBackups_e9q7r_307",m5="_tokenInputContainer_e9q7r_321",p5="_tokenHelp_e9q7r_329",_5="_tokenInput_e9q7r_321",g5="_tokenActions_e9q7r_393",wt={container:K4,title:W4,status:J4,indicator:Z4,connected:e5,disconnected:t5,lastBackup:n5,statusMessage:s5,actions:i5,button:a5,buttonSecondary:r5,buttonDanger:o5,backupList:l5,backupItem:c5,backupName:u5,backupDate:d5,restoreButton:f5,noBackups:h5,tokenInputContainer:m5,tokenHelp:p5,tokenInput:_5,tokenActions:g5};function y5(){const[s,e]=L.useState(!1),[n,a]=L.useState(!0),[o,u]=L.useState(null),[h,g]=L.useState(""),[v,_]=L.useState([]),[S,A]=L.useState(!1),[C,B]=L.useState(""),[z,F]=L.useState(!1),[U,G]=L.useState(!1),[Y,se]=L.useState(""),re=L.useCallback(()=>{e(YT()),u($T())},[]);L.useEffect(()=>{re(),a(!1)},[re]);const _e=async()=>{if(!C.trim()){g("Please enter a GitHub token");return}g("Verifying token..."),await sA(C.trim())?(Kw(C.trim()),e(!0),F(!1),B(""),g("Connected to GitHub!")):g("Invalid token. Please check and try again.")},ve=()=>{Ww(),e(!1),u(null),g("Disconnected"),_([])},j=async()=>{g("Backing up...");try{const O=await cp(),k=await KT(O);k.success?(g(`Backup saved: ${k.fileName}`),u(new Date),await JT(7)):g(`Backup failed: ${k.error}`)}catch(O){g(`Backup failed: ${O instanceof Error?O.message:"Unknown error"}`)}},D=async()=>{if(A(!S),!S){g("Loading backups...");const O=await WT();_(O),g("")}},M=()=>{const O=Y.trim();if(!O){g("Please enter a gist ID");return}const k=O.match(/([a-f0-9]{32})/i);k?(localStorage.setItem("github_gist_id",k[1]),g('Gist ID set! Click "Restore from Backup" to see backups.'),G(!1),se("")):g("Invalid gist ID. Paste the gist URL or ID.")},V=async O=>{if(confirm(`Restore from "${O}"? This will replace all current data.`)){g("Restoring...");try{const k=await nA(O);k?(await BT(k),g("Restored successfully! Refreshing..."),setTimeout(()=>window.location.reload(),1500)):g("Failed to download backup")}catch(k){g(`Restore failed: ${k instanceof Error?k.message:"Unknown error"}`)}}},w=O=>{const k=O.match(/backup-(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})/);if(k){const[,Ce,mt,$,ne,Te]=k;return`${Ce}-${mt}-${$} ${ne}:${Te}`}return O};return n?c.jsx("div",{className:wt.container,children:"Loading..."}):c.jsxs("div",{className:wt.container,children:[c.jsx("h3",{className:wt.title,children:"Cloud Backup (GitHub)"}),c.jsxs("div",{className:wt.status,children:[c.jsx("span",{className:`${wt.indicator} ${s?wt.connected:wt.disconnected}`}),c.jsx("span",{children:s?"Connected to GitHub":"Not connected"})]}),o&&c.jsxs("p",{className:wt.lastBackup,children:["Last backup: ",o.toLocaleString()]}),h&&c.jsx("p",{className:wt.statusMessage,children:h}),c.jsx("div",{className:wt.actions,children:s?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:j,className:wt.button,children:"Backup Now"}),c.jsx("button",{onClick:D,className:wt.buttonSecondary,children:S?"Hide Backups":"Restore from Backup"}),c.jsx("button",{onClick:()=>G(!U),className:wt.buttonSecondary,children:U?"Cancel":"Link Existing Gist"}),c.jsx("button",{onClick:ve,className:wt.buttonDanger,children:"Disconnect"}),U&&c.jsxs("div",{className:wt.tokenInputContainer,children:[c.jsx("p",{className:wt.tokenHelp,children:"Paste your gist URL or ID to restore from an existing backup:"}),c.jsx("input",{type:"text",value:Y,onChange:O=>se(O.target.value),placeholder:"https://gist.github.com/user/abc123... or just abc123...",className:wt.tokenInput}),c.jsx("button",{onClick:M,className:wt.button,children:"Link Gist"})]})]}):c.jsx(c.Fragment,{children:z?c.jsxs("div",{className:wt.tokenInputContainer,children:[c.jsxs("p",{className:wt.tokenHelp,children:["Create a token at ",c.jsx("a",{href:"https://github.com/settings/tokens/new?description=Goal%20Game%20Backup&scopes=gist",target:"_blank",rel:"noopener noreferrer",children:"GitHub Settings"})," with ",c.jsx("strong",{children:"gist"})," scope."]}),c.jsx("input",{type:"password",value:C,onChange:O=>B(O.target.value),placeholder:"Paste your GitHub token",className:wt.tokenInput}),c.jsxs("div",{className:wt.tokenActions,children:[c.jsx("button",{onClick:_e,className:wt.button,children:"Save Token"}),c.jsx("button",{onClick:()=>{F(!1),B("")},className:wt.buttonSecondary,children:"Cancel"})]})]}):c.jsx("button",{onClick:()=>F(!0),className:wt.button,children:"Connect GitHub"})})}),S&&v.length>0&&c.jsxs("div",{className:wt.backupList,children:[c.jsx("h4",{children:"Available Backups (Last 7 kept)"}),v.map(O=>c.jsxs("div",{className:wt.backupItem,children:[c.jsx("span",{className:wt.backupName,children:w(O.fileName)}),c.jsxs("span",{className:wt.backupDate,children:[Math.round(O.size/1024)," KB"]}),c.jsx("button",{onClick:()=>V(O.fileName),className:wt.restoreButton,children:"Restore"})]},O.fileName))]}),S&&v.length===0&&c.jsx("p",{className:wt.noBackups,children:"No backups found"})]})}const E5=[{value:null,label:"No reminder"},{value:0,label:"At event time"},{value:5,label:"5 minutes before"},{value:10,label:"10 minutes before"},{value:15,label:"15 minutes before"},{value:30,label:"30 minutes before"},{value:60,label:"1 hour before"}],v5="_settingsPanel_zjhn0_1",T5="_settingsTitle_zjhn0_9",b5="_settingsDescription_zjhn0_23",S5="_settingRow_zjhn0_35",N5="_settingLabel_zjhn0_59",w5="_iosInstructions_zjhn0_71",A5="_iosTitle_zjhn0_87",R5="_iosText_zjhn0_99",x5="_iosList_zjhn0_111",C5="_deniedMessage_zjhn0_135",I5="_errorMessage_zjhn0_137",k5="_statusIndicator_zjhn0_169",L5="_statusDot_zjhn0_187",D5="_reminderSelect_zjhn0_251",O5="_debugInfo_zjhn0_317",j5="_debugLabel_zjhn0_335",M5="_debugToken_zjhn0_349",U5="_debugError_zjhn0_363",Pt={settingsPanel:v5,settingsTitle:T5,settingsDescription:b5,settingRow:S5,settingLabel:N5,iosInstructions:w5,iosTitle:A5,iosText:R5,iosList:x5,deniedMessage:C5,errorMessage:I5,statusIndicator:k5,statusDot:L5,reminderSelect:D5,debugInfo:O5,debugLabel:j5,debugToken:M5,debugError:U5};function V5(){const{settings:s,permissionState:e,isSupported:n,isConfigured:a,canEnable:o,isIOS:u,isStandalone:h,loading:g,error:v,enableNotifications:_,disableNotificationsHandler:S,setDefaultReminderMinutes:A}=y1();return a?n?c.jsxs(St,{className:Pt.settingsPanel,children:[c.jsx("h3",{className:Pt.settingsTitle,children:"Push Notifications"}),u&&!h&&c.jsxs("div",{className:Pt.iosInstructions,children:[c.jsx("p",{className:Pt.iosTitle,children:"iOS Setup Required"}),c.jsx("p",{className:Pt.iosText,children:"To receive push notifications on iOS, you need to add this app to your home screen first:"}),c.jsxs("ol",{className:Pt.iosList,children:[c.jsx("li",{children:"Tap the Share button in Safari"}),c.jsx("li",{children:'Select "Add to Home Screen"'}),c.jsx("li",{children:"Open the app from your home screen"}),c.jsx("li",{children:"Then enable notifications here"})]})]}),e==="denied"&&c.jsx("div",{className:Pt.deniedMessage,children:c.jsx("p",{children:"Notifications are blocked. Please enable them in your browser settings."})}),v&&c.jsx("div",{className:Pt.errorMessage,children:c.jsx("p",{children:v})}),c.jsxs("div",{className:Pt.settingRow,children:[c.jsx("span",{className:Pt.settingLabel,children:"Event Reminders"}),s.enabled?c.jsx(Oe,{variant:"danger",size:"small",onClick:S,disabled:g,children:g?"Disabling...":"Disable"}):c.jsx(Oe,{variant:"primary",size:"small",onClick:_,disabled:g||!o||e==="denied",children:g?"Enabling...":"Enable"})]}),s.enabled&&c.jsxs("div",{className:Pt.settingRow,children:[c.jsx("span",{className:Pt.settingLabel,children:"Default Reminder"}),c.jsx("select",{className:Pt.reminderSelect,value:s.defaultReminderMinutes,onChange:C=>A(Number(C.target.value)),children:E5.filter(C=>C.value!==null).map(C=>c.jsx("option",{value:C.value,children:C.label},C.value))})]}),s.enabled&&c.jsxs("div",{className:Pt.statusIndicator,children:[c.jsx("span",{className:Pt.statusDot}),"Notifications enabled"]}),s.enabled&&c.jsxs("div",{className:Pt.debugInfo,children:[c.jsx("p",{className:Pt.debugLabel,children:"Token Status:"}),s.fcmToken?c.jsxs("p",{className:Pt.debugToken,children:[s.fcmToken.substring(0,20),"...",s.fcmToken.substring(s.fcmToken.length-10)]}):c.jsx("p",{className:Pt.debugError,children:"No token - notifications will not work!"}),c.jsxs("p",{className:Pt.debugLabel,children:["Device ID: ",s.deviceId.substring(0,8),"..."]})]}),s.enabled&&!s.fcmToken&&c.jsx("div",{className:Pt.errorMessage,children:c.jsx("p",{children:"Token missing! Try: Disable  Wait 5 sec  Re-enable"})})]}):c.jsxs(St,{className:Pt.settingsPanel,children:[c.jsx("h3",{className:Pt.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Pt.settingsDescription,children:"Push notifications are not supported in this browser."})]}):c.jsxs(St,{className:Pt.settingsPanel,children:[c.jsx("h3",{className:Pt.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Pt.settingsDescription,children:"Push notifications are not configured. To enable them, add your Firebase configuration to the .env file."})]})}const q5="_dailyQuestsPanel_rygmp_1",B5="_questsList_rygmp_55",P5="_questItem_rygmp_67",F5="_completed_rygmp_89",z5="_questItemHeader_rygmp_99",G5="_questCheckbox_rygmp_111",H5="_questInfo_rygmp_149",X5="_questTitleRow_rygmp_159",Y5="_questName_rygmp_173",$5="_questXp_rygmp_193",Q5="_questDescription_rygmp_223",K5="_progressContainer_rygmp_235",W5="_progressBar_rygmp_247",J5="_progressFill_rygmp_263",Z5="_progressText_rygmp_285",eM="_bonusSection_rygmp_303",tM="_available_rygmp_321",nM="_claimed_rygmp_329",sM="_bonusTitle_rygmp_349",iM="_bonusDescription_rygmp_371",aM="_bonusXp_rygmp_383",rM="_claimButton_rygmp_403",oM="_loading_rygmp_413",lM="_emptyState_rygmp_429",Wt={dailyQuestsPanel:q5,questsList:B5,questItem:P5,completed:F5,questItemHeader:z5,questCheckbox:G5,questInfo:H5,questTitleRow:X5,questName:Y5,questXp:$5,questDescription:Q5,progressContainer:K5,progressBar:W5,progressFill:J5,progressText:Z5,bonusSection:eM,available:tM,claimed:nM,bonusTitle:sM,bonusDescription:iM,bonusXp:aM,claimButton:rM,loading:oM,emptyState:lM};function cM({quests:s,loading:e,allCompleted:n,completedCount:a,bonusClaimed:o,bonusXp:u,onClaimBonus:h}){const[g,v]=L.useState(!1),_=e?"Daily Quests (Loading...)":`Daily Quests (${a}/${s.length})${n&&!o?" - Bonus Ready!":""}`;return c.jsxs("div",{className:Wt.dailyQuestsPanel,children:[c.jsx(Oe,{size:"small",variant:n&&!o?"primary":void 0,onClick:()=>v(!g),style:{width:"100%",marginBottom:g?8:0},children:g?"Hide Daily Quests":_}),g&&c.jsx(St,{glow:n&&!o,children:e?c.jsx("div",{className:Wt.loading,children:"Loading daily quests..."}):s.length===0?c.jsx("div",{className:Wt.emptyState,children:"No daily quests available"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:Wt.questsList,children:s.map(S=>c.jsx(uM,{quest:S},S.id))}),c.jsxs("div",{className:`${Wt.bonusSection} ${n&&!o?Wt.available:o?Wt.claimed:""}`,children:[c.jsx("div",{className:Wt.bonusTitle,children:o?"Bonus Claimed!":"Complete All Quests"}),c.jsx("div",{className:Wt.bonusDescription,children:o?"Great work! See you tomorrow.":"Finish all 3 quests to earn a bonus"}),c.jsxs("div",{className:Wt.bonusXp,children:["+",u," XP"]}),n&&!o&&c.jsx(Oe,{className:Wt.claimButton,size:"small",onClick:h,children:"Claim Bonus"})]})]})})]})}function uM({quest:s}){const e=Math.min(s.current_value/s.target_value*100,100);return c.jsxs("div",{className:`${Wt.questItem} ${s.is_completed?Wt.completed:""}`,children:[c.jsxs("div",{className:Wt.questItemHeader,children:[c.jsx("div",{className:Wt.questCheckbox,children:s.is_completed&&c.jsx("span",{children:""})}),c.jsxs("div",{className:Wt.questInfo,children:[c.jsxs("div",{className:Wt.questTitleRow,children:[c.jsx("span",{className:Wt.questName,children:s.title}),c.jsxs("span",{className:Wt.questXp,children:["+",s.xp_reward," XP"]})]}),c.jsx("div",{className:Wt.questDescription,children:s.description})]})]}),c.jsxs("div",{className:Wt.progressContainer,children:[c.jsx("div",{className:Wt.progressBar,children:c.jsx("div",{className:Wt.progressFill,style:{width:`${e}%`}})}),c.jsxs("span",{className:Wt.progressText,children:[s.current_value,"/",s.target_value]})]})]})}const dM="_bossPanel_la2se_1",fM="_bossButton_la2se_9",hM="_bossContent_la2se_17",mM="_bossHeader_la2se_25",pM="_bossIcon_la2se_39",_M="_defeated_la2se_49",gM="_bossInfo_la2se_57",yM="_bossName_la2se_65",EM="_bossDescription_la2se_89",vM="_bossStatus_la2se_101",TM="_bossReward_la2se_109",bM="_hpSection_la2se_135",SM="_hpLabel_la2se_143",NM="_hpTitle_la2se_157",wM="_hpValue_la2se_171",AM="_hpBar_la2se_181",RM="_hpFill_la2se_199",xM="_low_la2se_237",CM="_damageStats_la2se_255",IM="_damageStat_la2se_255",kM="_damageStatValue_la2se_283",LM="_damageStatLabel_la2se_295",DM="_damageGuide_la2se_309",OM="_damageGuideTitle_la2se_323",jM="_damageGuideList_la2se_339",MM="_damageGuideItem_la2se_353",UM="_damageGuideAmount_la2se_365",VM="_defeatedBanner_la2se_377",qM="_defeatedTitle_la2se_395",BM="_defeatedText_la2se_409",PM="_defeatedRewards_la2se_419",FM="_weekInfo_la2se_433",zM="_loading_la2se_449",Xe={bossPanel:dM,bossButton:fM,bossContent:hM,bossHeader:mM,bossIcon:pM,defeated:_M,bossInfo:gM,bossName:yM,bossDescription:EM,bossStatus:vM,bossReward:TM,hpSection:bM,hpLabel:SM,hpTitle:NM,hpValue:wM,hpBar:AM,hpFill:RM,low:xM,damageStats:CM,damageStat:IM,damageStatValue:kM,damageStatLabel:LM,damageGuide:DM,damageGuideTitle:OM,damageGuideList:jM,damageGuideItem:MM,damageGuideAmount:UM,defeatedBanner:VM,defeatedTitle:qM,defeatedText:BM,defeatedRewards:PM,weekInfo:FM,loading:zM};function GM({boss:s,loading:e,weekStart:n,weekEnd:a,hpPercentage:o,damageDealt:u,totalDefeated:h}){const[g,v]=L.useState(!1),_=A=>new Date(A+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}),S=e?"Weekly Boss (Loading...)":s?.is_defeated?`Weekly Boss - ${s.name} DEFEATED!`:`Weekly Boss - ${s?.name} (${s?.current_hp}/${s?.max_hp} HP)`;return c.jsxs("div",{className:Xe.bossPanel,children:[c.jsx(Oe,{size:"small",variant:s?.is_defeated?"primary":void 0,onClick:()=>v(!g),className:Xe.bossButton,children:g?"Hide Weekly Boss":S}),g&&c.jsx(St,{className:Xe.bossContent,glow:s?.is_defeated,children:e?c.jsx("div",{className:Xe.loading,children:"Summoning this week's boss..."}):s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:Xe.bossHeader,children:[c.jsx("span",{className:`${Xe.bossIcon} ${s.is_defeated?Xe.defeated:""}`,children:s.icon}),c.jsxs("div",{className:Xe.bossInfo,children:[c.jsx("div",{className:`${Xe.bossName} ${s.is_defeated?Xe.defeated:""}`,children:s.name}),c.jsx("div",{className:Xe.bossDescription,children:s.description})]}),c.jsxs("div",{className:Xe.bossStatus,children:[c.jsxs("div",{className:Xe.bossReward,children:["+",s.xp_reward," XP"]}),s.bonus_shields>0&&c.jsxs("div",{className:Xe.bossReward,children:["+",s.bonus_shields," Shield",s.bonus_shields>1?"s":""]})]})]}),s.is_defeated&&c.jsxs("div",{className:Xe.defeatedBanner,children:[c.jsx("div",{className:Xe.defeatedTitle,children:"Victory!"}),c.jsxs("div",{className:Xe.defeatedText,children:["You defeated ",s.name," this week!"]}),c.jsxs("div",{className:Xe.defeatedRewards,children:["Rewards: +",s.xp_reward," XP",s.bonus_shields>0&&`, +${s.bonus_shields} Streak Shield${s.bonus_shields>1?"s":""}`]})]}),!s.is_defeated&&c.jsxs("div",{className:Xe.hpSection,children:[c.jsxs("div",{className:Xe.hpLabel,children:[c.jsx("span",{className:Xe.hpTitle,children:"Boss HP"}),c.jsxs("span",{className:Xe.hpValue,children:[s.current_hp," / ",s.max_hp]})]}),c.jsx("div",{className:Xe.hpBar,children:c.jsx("div",{className:`${Xe.hpFill} ${o<30?Xe.low:""}`,style:{width:`${o}%`}})})]}),c.jsxs("div",{className:Xe.damageStats,children:[c.jsxs("div",{className:Xe.damageStat,children:[c.jsx("div",{className:Xe.damageStatValue,children:u}),c.jsx("div",{className:Xe.damageStatLabel,children:"Damage Dealt"})]}),c.jsxs("div",{className:Xe.damageStat,children:[c.jsx("div",{className:Xe.damageStatValue,children:h}),c.jsx("div",{className:Xe.damageStatLabel,children:"Bosses Defeated"})]})]}),!s.is_defeated&&c.jsxs("div",{className:Xe.damageGuide,children:[c.jsx("div",{className:Xe.damageGuideTitle,children:"How to Deal Damage"}),c.jsxs("div",{className:Xe.damageGuideList,children:[c.jsxs("div",{className:Xe.damageGuideItem,children:[c.jsx("span",{children:"Complete Step"}),c.jsxs("span",{className:Xe.damageGuideAmount,children:["-",dl.step_completed," HP"]})]}),c.jsxs("div",{className:Xe.damageGuideItem,children:[c.jsx("span",{children:"Activate Buff"}),c.jsxs("span",{className:Xe.damageGuideAmount,children:["-",dl.buff_activated," HP"]})]}),c.jsxs("div",{className:Xe.damageGuideItem,children:[c.jsx("span",{children:"Complete Quest"}),c.jsxs("span",{className:Xe.damageGuideAmount,children:["-",dl.quest_completed," HP"]})]}),c.jsxs("div",{className:Xe.damageGuideItem,children:[c.jsx("span",{children:"Complete Goal"}),c.jsxs("span",{className:Xe.damageGuideAmount,children:["-",dl.goal_completed," HP"]})]}),c.jsxs("div",{className:Xe.damageGuideItem,children:[c.jsx("span",{children:"Daily Quest"}),c.jsxs("span",{className:Xe.damageGuideAmount,children:["-",dl.daily_quest_completed," HP"]})]})]})]}),c.jsxs("div",{className:Xe.weekInfo,children:["Week of ",_(n)," - ",_(a)]})]}):c.jsx("div",{className:Xe.loading,children:"No boss found"})})]})}const HM="_achievementPanel_13bl3_1",XM="_statsBar_13bl3_13",YM="_statItem_13bl3_33",$M="_statValue_13bl3_47",QM="_statLabel_13bl3_59",KM="_progressBarContainer_13bl3_73",WM="_progressLabel_13bl3_85",JM="_progressTrack_13bl3_99",ZM="_progressFill_13bl3_115",e6="_categoryTabs_13bl3_129",t6="_categoryTab_13bl3_129",n6="_active_13bl3_183",s6="_categoryIcon_13bl3_195",i6="_categoryCount_13bl3_203",a6="_achievementGrid_13bl3_219",r6="_achievementCard_13bl3_231",o6="_unlocked_13bl3_261",l6="_locked_13bl3_271",c6="_hidden_13bl3_279",u6="_achievementIcon_13bl3_287",d6="_achievementInfo_13bl3_335",f6="_achievementName_13bl3_345",h6="_achievementDesc_13bl3_367",m6="_achievementMeta_13bl3_379",p6="_achievementXp_13bl3_393",_6="_achievementProgress_13bl3_409",g6="_achievementProgressTrack_13bl3_423",y6="_achievementProgressFill_13bl3_441",E6="_achievementProgressText_13bl3_455",v6="_achievementUnlockDate_13bl3_469",T6="_emptyState_13bl3_479",b6="_unlockModal_13bl3_531",S6="_unlockIcon_13bl3_539",N6="_unlockTitle_13bl3_551",w6="_unlockDesc_13bl3_565",A6="_unlockReward_13bl3_577",We={achievementPanel:HM,statsBar:XM,statItem:YM,statValue:$M,statLabel:QM,progressBarContainer:KM,progressLabel:WM,progressTrack:JM,progressFill:ZM,categoryTabs:e6,categoryTab:t6,active:n6,categoryIcon:s6,categoryCount:i6,achievementGrid:a6,achievementCard:r6,unlocked:o6,locked:l6,hidden:c6,achievementIcon:u6,achievementInfo:d6,achievementName:f6,achievementDesc:h6,achievementMeta:m6,achievementXp:p6,achievementProgress:_6,achievementProgressTrack:g6,achievementProgressFill:y6,achievementProgressText:E6,achievementUnlockDate:v6,emptyState:T6,unlockModal:b6,unlockIcon:S6,unlockTitle:N6,unlockDesc:w6,unlockReward:A6},R6=["quests","buffs","streaks","boss","levels","special"];function x6({achievements:s,stats:e,loading:n}){const[a,o]=L.useState("all"),u=a==="all"?s:s.filter(v=>v.category===a),h=v=>{const _=s.filter(A=>A.category===v);return{unlocked:_.filter(A=>A.unlocked).length,total:_.length}},g=e.total>0?Math.round(e.unlocked/e.total*100):0;return n?c.jsx(St,{header:"Achievements",children:c.jsx("div",{className:We.emptyState,children:"Loading achievements..."})}):c.jsx(St,{header:"Achievements",glow:!0,children:c.jsxs("div",{className:We.achievementPanel,children:[c.jsxs("div",{className:We.statsBar,children:[c.jsxs("div",{className:We.statItem,children:[c.jsx("span",{className:We.statValue,children:e.unlocked}),c.jsx("span",{className:We.statLabel,children:"Unlocked"})]}),c.jsxs("div",{className:We.progressBarContainer,children:[c.jsxs("div",{className:We.progressLabel,children:[g,"% Complete"]}),c.jsx("div",{className:We.progressTrack,children:c.jsx("div",{className:We.progressFill,style:{width:`${g}%`}})})]}),c.jsxs("div",{className:We.statItem,children:[c.jsx("span",{className:We.statValue,children:e.earnedXp}),c.jsx("span",{className:We.statLabel,children:"XP Earned"})]})]}),c.jsxs("div",{className:We.categoryTabs,children:[c.jsxs("button",{className:`${We.categoryTab} ${a==="all"?We.active:""}`,onClick:()=>o("all"),children:[c.jsx("span",{className:We.categoryIcon,children:""}),"All",c.jsxs("span",{className:We.categoryCount,children:[e.unlocked,"/",e.total]})]}),R6.map(v=>{const _=h(v);return _.total===0?null:c.jsxs("button",{className:`${We.categoryTab} ${a===v?We.active:""}`,onClick:()=>o(v),children:[c.jsx("span",{className:We.categoryIcon,children:VN[v]}),UN[v],c.jsxs("span",{className:We.categoryCount,children:[_.unlocked,"/",_.total]})]},v)})]}),u.length===0?c.jsx("div",{className:We.emptyState,children:"No achievements in this category yet"}):c.jsx("div",{className:We.achievementGrid,children:u.map(v=>c.jsx(C6,{achievement:v},v.id))})]})})}function C6({achievement:s}){const e=`${We.achievementCard} ${s.unlocked?We.unlocked:We.locked} ${s.is_hidden&&!s.unlocked?We.hidden:""}`,n=a=>new Date(a+"Z").toLocaleDateString();return c.jsxs("div",{className:e,children:[c.jsx("div",{className:We.achievementIcon,children:s.icon}),c.jsxs("div",{className:We.achievementInfo,children:[c.jsx("div",{className:We.achievementName,children:s.is_hidden&&!s.unlocked?"???":s.name}),c.jsx("div",{className:We.achievementDesc,children:s.is_hidden&&!s.unlocked?"Hidden achievement":s.description}),c.jsxs("div",{className:We.achievementMeta,children:[c.jsxs("span",{className:We.achievementXp,children:["+",s.xp_reward," XP"]}),s.unlocked?c.jsxs("span",{className:We.achievementUnlockDate,children:["Unlocked ",n(s.unlocked_at)]}):c.jsxs("div",{className:We.achievementProgress,children:[c.jsx("div",{className:We.achievementProgressTrack,children:c.jsx("div",{className:We.achievementProgressFill,style:{width:`${s.progress_percent}%`}})}),c.jsxs("span",{className:We.achievementProgressText,children:[s.current_value,"/",s.requirement_value]})]})]})]})]})}function I6({unlock:s,onDismiss:e}){return s?c.jsx(Rl,{open:!0,onClose:e,title:"Achievement Unlocked!",actions:c.jsx(Oe,{variant:"primary",onClick:e,children:"Awesome!"}),children:c.jsxs("div",{className:We.unlockModal,children:[c.jsx("div",{className:We.unlockIcon,children:s.achievement.icon}),c.jsx("div",{className:We.unlockTitle,children:s.achievement.name}),c.jsx("div",{className:We.unlockDesc,children:s.achievement.description}),c.jsxs("div",{className:We.unlockReward,children:["+",s.xpAwarded," XP"]})]})}):null}const k6="_focusTimerPanel_clj8g_1",L6="_timerContainer_clj8g_13",D6="_timerCircleWrapper_clj8g_33",O6="_timerCircle_clj8g_33",j6="_timerCircleBg_clj8g_55",M6="_timerCircleProgress_clj8g_67",U6="_work_clj8g_81",V6="_shortBreak_clj8g_89",q6="_longBreak_clj8g_97",B6="_idle_clj8g_105",P6="_timerDisplay_clj8g_113",F6="_timerTime_clj8g_129",z6="_timerPhase_clj8g_143",G6="_timerControls_clj8g_181",H6="_sessionCount_clj8g_191",X6="_sessionDot_clj8g_209",Y6="_completed_clj8g_225",$6="_active_clj8g_235",Q6="_statsGrid_clj8g_247",K6="_statCard_clj8g_259",W6="_statIcon_clj8g_279",J6="_statValue_clj8g_289",Z6="_statLabel_clj8g_301",eU="_settingsGrid_clj8g_319",tU="_settingItem_clj8g_331",nU="_settingLabel_clj8g_343",sU="_settingInput_clj8g_353",iU="_toggleRow_clj8g_383",aU="_toggleLabel_clj8g_407",rU="_toggle_clj8g_383",oU="_toggleKnob_clj8g_449",lU="_sessionList_clj8g_483",cU="_sessionItem_clj8g_495",uU="_cancelled_clj8g_523",dU="_sessionTime_clj8g_533",fU="_sessionInfo_clj8g_547",hU="_sessionXp_clj8g_559",Ae={focusTimerPanel:k6,timerContainer:L6,timerCircleWrapper:D6,timerCircle:O6,timerCircleBg:j6,timerCircleProgress:M6,work:U6,shortBreak:V6,longBreak:q6,idle:B6,timerDisplay:P6,timerTime:F6,timerPhase:z6,timerControls:G6,sessionCount:H6,sessionDot:X6,completed:Y6,active:$6,statsGrid:Q6,statCard:K6,statIcon:W6,statValue:J6,statLabel:Z6,settingsGrid:eU,settingItem:tU,settingLabel:nU,settingInput:sU,toggleRow:iU,toggleLabel:aU,toggle:rU,toggleKnob:oU,sessionList:lU,sessionItem:cU,cancelled:uU,sessionTime:dU,sessionInfo:fU,sessionXp:hU};function mU({timeRemaining:s,totalTime:e,phase:n,formattedTime:a}){const g=192*Math.PI,v=e>0?s/e:1,_=g*(1-v),S={work:"Focus",short_break:"Short Break",long_break:"Long Break",idle:"Ready"}[n];return c.jsxs("div",{className:Ae.timerCircleWrapper,children:[c.jsxs("svg",{className:Ae.timerCircle,width:200,height:200,children:[c.jsx("circle",{className:Ae.timerCircleBg,cx:200/2,cy:200/2,r:96}),c.jsx("circle",{className:`${Ae.timerCircleProgress} ${n==="work"?Ae.work:n==="short_break"?Ae.shortBreak:n==="long_break"?Ae.longBreak:Ae.idle}`,cx:200/2,cy:200/2,r:96,strokeDasharray:g,strokeDashoffset:_})]}),c.jsxs("div",{className:Ae.timerDisplay,children:[c.jsx("div",{className:Ae.timerTime,children:a}),c.jsx("div",{className:`${Ae.timerPhase} ${n==="work"?Ae.work:n==="short_break"?Ae.shortBreak:n==="long_break"?Ae.longBreak:""}`,children:S})]})]})}function pU({settings:s,onUpdateSettings:e}){return c.jsxs(St,{header:"Timer Settings",children:[c.jsxs("div",{className:Ae.settingsGrid,children:[c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Work Duration (min)"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:s.work_duration,onChange:n=>e({work_duration:Number(n.target.value)}),min:1,max:120})]}),c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Short Break (min)"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:s.short_break,onChange:n=>e({short_break:Number(n.target.value)}),min:1,max:30})]}),c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Long Break (min)"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:s.long_break,onChange:n=>e({long_break:Number(n.target.value)}),min:1,max:60})]}),c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Sessions Before Long Break"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:s.sessions_before_long_break,onChange:n=>e({sessions_before_long_break:Number(n.target.value)}),min:1,max:10})]})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{className:Ae.toggleRow,children:[c.jsx("span",{className:Ae.toggleLabel,children:"Auto-start breaks"}),c.jsx("div",{className:`${Ae.toggle} ${s.auto_start_breaks?Ae.active:""}`,onClick:()=>e({auto_start_breaks:!s.auto_start_breaks}),children:c.jsx("div",{className:Ae.toggleKnob})})]}),c.jsxs("div",{className:Ae.toggleRow,children:[c.jsx("span",{className:Ae.toggleLabel,children:"Sound notifications"}),c.jsx("div",{className:`${Ae.toggle} ${s.sound_enabled?Ae.active:""}`,onClick:()=>e({sound_enabled:!s.sound_enabled}),children:c.jsx("div",{className:Ae.toggleKnob})})]})]})]})}function _U({settings:s,stats:e,timerState:n,recentSessions:a,onStartWork:o,onStartBreak:u,onPause:h,onResume:g,onStop:v,onSkipBreak:_,onUpdateSettings:S,formatTime:A}){const[C,B]=L.useState(!1),z=()=>{switch(n.phase){case"work":return s.work_duration*60;case"short_break":return s.short_break*60;case"long_break":return s.long_break*60;default:return s.work_duration*60}},F=s.sessions_before_long_break-n.sessionsCompleted%s.sessions_before_long_break;return c.jsxs("div",{className:Ae.focusTimerPanel,children:[c.jsx(St,{header:"Focus Timer",glow:!0,children:c.jsxs("div",{className:Ae.timerContainer,children:[c.jsx(mU,{timeRemaining:n.timeRemaining,totalTime:z(),phase:n.phase,formattedTime:A(n.timeRemaining)}),c.jsxs("div",{className:Ae.timerControls,children:[n.phase==="idle"&&c.jsx(Oe,{variant:"primary",onClick:()=>o(),children:"Start Focus"}),n.phase==="work"&&n.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Oe,{variant:"ghost",onClick:h,children:"Pause"}),c.jsx(Oe,{variant:"danger",onClick:v,children:"Stop"})]}),n.phase==="work"&&!n.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Oe,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Oe,{variant:"danger",onClick:v,children:"Stop"})]}),(n.phase==="short_break"||n.phase==="long_break")&&c.jsxs(c.Fragment,{children:[n.isRunning?c.jsx(Oe,{variant:"ghost",onClick:h,children:"Pause"}):c.jsx(Oe,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Oe,{variant:"ghost",onClick:_,children:"Skip Break"})]})]}),c.jsxs("div",{className:Ae.sessionCount,children:[Array.from({length:s.sessions_before_long_break}).map((U,G)=>c.jsx("div",{className:`${Ae.sessionDot} ${G<n.sessionsCompleted%s.sessions_before_long_break?Ae.completed:""} ${G===n.sessionsCompleted%s.sessions_before_long_break&&n.phase==="work"?Ae.active:""}`},G)),c.jsxs("span",{style:{marginLeft:8},children:[F," until long break"]})]})]})}),c.jsxs("div",{className:Ae.statsGrid,children:[c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsx("span",{className:Ae.statValue,children:e.total_sessions}),c.jsx("span",{className:Ae.statLabel,children:"Total Sessions"})]}),c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsxs("span",{className:Ae.statValue,children:[Math.round(e.total_minutes/60),"h"]}),c.jsx("span",{className:Ae.statLabel,children:"Total Focus"})]}),c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsx("span",{className:Ae.statValue,children:e.current_streak}),c.jsx("span",{className:Ae.statLabel,children:"Current Streak"})]}),c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsx("span",{className:Ae.statValue,children:e.today_sessions}),c.jsx("span",{className:Ae.statLabel,children:"Today"})]})]}),c.jsx(Oe,{variant:"ghost",size:"small",onClick:()=>B(!C),children:C?"Hide Settings":"Timer Settings"}),C&&c.jsx(pU,{settings:s,onUpdateSettings:S}),a.length>0&&c.jsx(St,{header:"Recent Sessions",children:c.jsx("div",{className:Ae.sessionList,children:a.slice(0,5).map(U=>c.jsxs("div",{className:`${Ae.sessionItem} ${U.status==="completed"?Ae.completed:Ae.cancelled}`,children:[c.jsxs("span",{className:Ae.sessionTime,children:[U.duration_minutes,"m"]}),c.jsx("span",{className:Ae.sessionInfo,children:new Date(U.started_at+"Z").toLocaleString()}),U.status==="completed"&&U.xp_earned>0&&c.jsxs("span",{className:Ae.sessionXp,children:["+",U.xp_earned," XP"]})]},U.id))})})]})}const gU="_routinePanel_1b2ro_1",yU="_routineGrid_1b2ro_13",EU="_routineCard_1b2ro_25",vU="_morning_1b2ro_53",TU="_evening_1b2ro_61",bU="_custom_1b2ro_69",SU="_completed_1b2ro_77",NU="_routineHeader_1b2ro_87",wU="_routineInfo_1b2ro_101",AU="_routineName_1b2ro_109",RU="_routineType_1b2ro_123",xU="_routineStreak_1b2ro_177",CU="_routineDesc_1b2ro_201",IU="_routineProgress_1b2ro_213",kU="_progressTrack_1b2ro_227",LU="_progressFill_1b2ro_243",DU="_progressText_1b2ro_257",OU="_stepsList_1b2ro_271",jU="_stepItem_1b2ro_283",MU="_skipped_1b2ro_313",UU="_optional_1b2ro_323",VU="_stepCheckbox_1b2ro_331",qU="_checked_1b2ro_365",BU="_stepInfo_1b2ro_377",PU="_stepTitle_1b2ro_385",FU="_stepMeta_1b2ro_395",zU="_stepDuration_1b2ro_411",GU="_optionalBadge_1b2ro_423",HU="_stepActions_1b2ro_439",XU="_routineActions_1b2ro_449",YU="_formSection_1b2ro_467",$U="_formRow_1b2ro_487",QU="_emptyState_1b2ro_505",Ye={routinePanel:gU,routineGrid:yU,routineCard:EU,morning:vU,evening:TU,custom:bU,completed:SU,routineHeader:NU,routineInfo:wU,routineName:AU,routineType:RU,routineStreak:xU,routineDesc:CU,routineProgress:IU,progressTrack:kU,progressFill:LU,progressText:DU,stepsList:OU,stepItem:jU,skipped:MU,optional:UU,stepCheckbox:VU,checked:qU,stepInfo:BU,stepTitle:PU,stepMeta:FU,stepDuration:zU,optionalBadge:GU,stepActions:HU,routineActions:XU,formSection:YU,formRow:$U,emptyState:QU};function KU({routines:s,loading:e,onCreateRoutine:n,onDeleteRoutine:a,onStartRoutine:o,onCompleteStep:u,onSkipStep:h,onAddStep:g,onDeleteStep:v,getStepsWithStatus:_}){const[S,A]=L.useState(!1),[C,B]=L.useState(null),[z,F]=L.useState(""),[U,G]=L.useState("morning"),[Y,se]=L.useState(""),[re,_e]=L.useState(25),ve=()=>{F(""),G("morning"),se(""),_e(25)},j=()=>{z.trim()&&(n(z.trim(),U,Y.trim(),re),ve(),A(!1))},D=s.filter(w=>w.type==="morning"),M=s.filter(w=>w.type==="evening"),V=s.filter(w=>w.type==="custom");return e?c.jsx(St,{header:"Routines",children:c.jsx("div",{className:Ye.emptyState,children:"Loading routines..."})}):c.jsxs("div",{className:Ye.routinePanel,children:[c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:c.jsx(Oe,{variant:"primary",onClick:()=>{ve(),A(!0)},children:"+ New Routine"})}),s.length===0?c.jsx(St,{header:"Routines",children:c.jsx("div",{className:Ye.emptyState,children:"No routines yet. Create your first morning or evening routine!"})}):c.jsxs(c.Fragment,{children:[D.length>0&&c.jsx(St,{header:"Morning Routines",children:c.jsx("div",{className:Ye.routineGrid,children:D.map(w=>c.jsx(km,{routine:w,stepsWithStatus:_(w.id),onStart:()=>o(w.id),onCompleteStep:O=>u(w.id,O),onSkipStep:O=>h(w.id,O),onEdit:()=>B(w.id),onDelete:()=>a(w.id)},w.id))})}),M.length>0&&c.jsx(St,{header:"Evening Routines",children:c.jsx("div",{className:Ye.routineGrid,children:M.map(w=>c.jsx(km,{routine:w,stepsWithStatus:_(w.id),onStart:()=>o(w.id),onCompleteStep:O=>u(w.id,O),onSkipStep:O=>h(w.id,O),onEdit:()=>B(w.id),onDelete:()=>a(w.id)},w.id))})}),V.length>0&&c.jsx(St,{header:"Custom Routines",children:c.jsx("div",{className:Ye.routineGrid,children:V.map(w=>c.jsx(km,{routine:w,stepsWithStatus:_(w.id),onStart:()=>o(w.id),onCompleteStep:O=>u(w.id,O),onSkipStep:O=>h(w.id,O),onEdit:()=>B(w.id),onDelete:()=>a(w.id)},w.id))})})]}),c.jsx(Rl,{open:S,onClose:()=>A(!1),title:"Create Routine",actions:c.jsxs(c.Fragment,{children:[c.jsx(Oe,{onClick:()=>A(!1),children:"Cancel"}),c.jsx(Oe,{variant:"primary",onClick:j,children:"Create"})]}),children:c.jsxs("div",{className:Ye.formSection,children:[c.jsx(Gi,{label:"Name",value:z,onChange:w=>F(w.target.value),placeholder:"e.g., Morning Power-Up"}),c.jsxs("div",{className:Ye.formRow,children:[c.jsxs(va,{label:"Type",value:U,onChange:w=>G(w.target.value),children:[c.jsx("option",{value:"morning",children:"Morning"}),c.jsx("option",{value:"evening",children:"Evening"}),c.jsx("option",{value:"custom",children:"Custom"})]}),c.jsx(Gi,{label:"Bonus XP",type:"number",value:re,onChange:w=>_e(Number(w.target.value)),min:0,max:200})]}),c.jsx(kd,{label:"Description",value:Y,onChange:w=>se(w.target.value),placeholder:"Describe this routine..."})]})}),C&&c.jsx(WU,{routine:s.find(w=>w.id===C),onClose:()=>B(null),onAddStep:g,onDeleteStep:v})]})}function km({routine:s,stepsWithStatus:e,onStart:n,onCompleteStep:a,onSkipStep:o,onEdit:u,onDelete:h}){const g=s.todayLog!==void 0,v=s.todayLog?.is_completed||!1,_=e.filter(C=>C.is_completed).length,S=e.length,A=S>0?Math.round(_/S*100):0;return c.jsxs("div",{className:`${Ye.routineCard} ${Ye[s.type]} ${v?Ye.completed:""}`,children:[c.jsxs("div",{className:Ye.routineHeader,children:[c.jsxs("div",{className:Ye.routineInfo,children:[c.jsx("div",{className:Ye.routineName,children:s.name}),c.jsxs("span",{className:`${Ye.routineType} ${Ye[s.type]}`,children:[s.type==="morning"?"":s.type==="evening"?"":""," ",s.type]})]}),s.streak&&s.streak.current_streak>0&&c.jsxs("div",{className:Ye.routineStreak,children:[" ",s.streak.current_streak," day",s.streak.current_streak!==1?"s":""]})]}),s.description&&c.jsx("div",{className:Ye.routineDesc,children:s.description}),g&&c.jsxs("div",{className:Ye.routineProgress,children:[c.jsx("div",{className:Ye.progressTrack,children:c.jsx("div",{className:Ye.progressFill,style:{width:`${A}%`}})}),c.jsxs("span",{className:Ye.progressText,children:[_,"/",S]})]}),g&&e.length>0&&c.jsx("div",{className:Ye.stepsList,children:e.map(C=>c.jsxs("div",{className:`${Ye.stepItem} ${C.is_completed?Ye.completed:""} ${C.skipped?Ye.skipped:""} ${C.is_optional?Ye.optional:""}`,children:[c.jsx("div",{className:`${Ye.stepCheckbox} ${C.is_completed?Ye.checked:""}`,onClick:()=>!C.is_completed&&!C.skipped&&!v&&a(C.id),children:C.is_completed&&""}),c.jsxs("div",{className:Ye.stepInfo,children:[c.jsx("div",{className:Ye.stepTitle,children:C.title}),c.jsxs("div",{className:Ye.stepMeta,children:[c.jsxs("span",{className:Ye.stepDuration,children:[" ",C.duration_minutes,"m"]}),C.is_optional&&c.jsx("span",{className:Ye.optionalBadge,children:"Optional"})]})]}),!C.is_completed&&!C.skipped&&!v&&C.is_optional&&c.jsx(Oe,{size:"small",variant:"ghost",onClick:()=>o(C.id),children:"Skip"})]},C.id))}),c.jsxs("div",{className:Ye.routineActions,children:[!g&&s.steps.length>0&&c.jsx(Oe,{variant:"primary",onClick:n,children:"Start Routine"}),v&&c.jsxs("span",{style:{color:"var(--buff-color)",fontFamily:"var(--font-heading)"},children:[" Completed Today (+",s.todayLog?.xp_earned||s.bonus_xp," XP)"]}),c.jsx("div",{style:{flex:1}}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:u,children:"Edit"}),c.jsx(Oe,{size:"small",variant:"danger",onClick:h,children:"Delete"})]})]})}function WU({routine:s,onClose:e,onAddStep:n,onDeleteStep:a}){const[o,u]=L.useState(""),[h,g]=L.useState(""),[v,_]=L.useState(5),[S,A]=L.useState(!1),C=()=>{o.trim()&&(n(s.id,o.trim(),h.trim(),null,v,S),u(""),g(""),_(5),A(!1))};return c.jsx(Rl,{open:!0,onClose:e,title:`Edit: ${s.name}`,actions:c.jsx(Oe,{onClick:e,children:"Done"}),children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[c.jsxs("div",{className:Ye.formSection,children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Add Step"}),c.jsx(Gi,{label:"Step Title",value:o,onChange:B=>u(B.target.value),placeholder:"e.g., Drink water"}),c.jsxs("div",{className:Ye.formRow,children:[c.jsx(Gi,{label:"Duration (min)",type:"number",value:v,onChange:B=>_(Number(B.target.value)),min:1,max:120}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,paddingTop:20},children:[c.jsx("input",{type:"checkbox",checked:S,onChange:B=>A(B.target.checked)}),c.jsx("label",{children:"Optional"})]})]}),c.jsx(Oe,{variant:"primary",onClick:C,children:"Add Step"})]}),s.steps.length>0&&c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Current Steps"}),c.jsx("div",{className:Ye.stepsList,children:s.steps.map((B,z)=>c.jsxs("div",{className:`${Ye.stepItem} ${B.is_optional?Ye.optional:""}`,children:[c.jsxs("span",{style:{color:"var(--text-dim)",minWidth:24},children:[z+1,"."]}),c.jsxs("div",{className:Ye.stepInfo,children:[c.jsx("div",{className:Ye.stepTitle,children:B.title}),c.jsxs("div",{className:Ye.stepMeta,children:[c.jsxs("span",{className:Ye.stepDuration,children:[" ",B.duration_minutes,"m"]}),B.is_optional&&c.jsx("span",{className:Ye.optionalBadge,children:"Optional"})]})]}),c.jsx(Oe,{size:"small",variant:"danger",onClick:()=>a(B.id),children:"Remove"})]},B.id))})]})]})})}const JU="_comboPanel_1yu75_1",ZU="_comboGrid_1yu75_13",e9="_comboCard_1yu75_25",t9="_ready_1yu75_53",n9="_inProgress_1yu75_65",s9="_comboHeader_1yu75_73",i9="_comboIcon_1yu75_87",a9="_comboInfo_1yu75_95",r9="_comboName_1yu75_103",o9="_comboXp_1yu75_115",l9="_comboDesc_1yu75_127",c9="_comboBuffs_1yu75_139",u9="_comboBuff_1yu75_139",d9="_active_1yu75_177",f9="_missing_1yu75_189",h9="_buffCheck_1yu75_197",m9="_comboProgress_1yu75_205",p9="_progressTrack_1yu75_219",_9="_progressFill_1yu75_235",g9="_complete_1yu75_249",y9="_progressText_1yu75_257",E9="_comboActions_1yu75_271",v9="_emptyState_1yu75_313",Ft={comboPanel:JU,comboGrid:ZU,comboCard:e9,ready:t9,inProgress:n9,comboHeader:s9,comboIcon:i9,comboInfo:a9,comboName:r9,comboXp:o9,comboDesc:l9,comboBuffs:c9,comboBuff:u9,active:d9,missing:f9,buffCheck:h9,comboProgress:m9,progressTrack:p9,progressFill:_9,complete:g9,progressText:y9,comboActions:E9,emptyState:v9};function T9({combos:s,loading:e,onClaimCombo:n}){const a=s.filter(h=>h.is_ready),o=s.filter(h=>h.progress>0&&!h.is_ready),u=s.filter(h=>h.progress===0);return e?c.jsx(St,{header:"Habit Combos",children:c.jsx("div",{className:Ft.emptyState,children:"Loading combos..."})}):s.length===0?c.jsx(St,{header:"Habit Combos",children:c.jsx("div",{className:Ft.emptyState,children:"No combos available. Create buff definitions to unlock combos!"})}):c.jsxs("div",{className:Ft.comboPanel,children:[a.length>0&&c.jsx(St,{header:"Ready to Claim!",glow:!0,children:c.jsx("div",{className:Ft.comboGrid,children:a.map(h=>c.jsx(Lm,{combo:h,onClaim:()=>n(h.id)},h.id))})}),o.length>0&&c.jsx(St,{header:"In Progress",children:c.jsx("div",{className:Ft.comboGrid,children:o.map(h=>c.jsx(Lm,{combo:h},h.id))})}),u.length>0&&c.jsx(St,{header:"Available Combos",children:c.jsx("div",{className:Ft.comboGrid,children:u.map(h=>c.jsx(Lm,{combo:h},h.id))})})]})}function Lm({combo:s,onClaim:e}){const n=JSON.parse(s.required_buffs);return c.jsxs("div",{className:`${Ft.comboCard} ${s.is_ready?Ft.ready:s.progress>0?Ft.inProgress:""}`,children:[c.jsxs("div",{className:Ft.comboHeader,children:[c.jsx("span",{className:Ft.comboIcon,children:s.icon}),c.jsxs("div",{className:Ft.comboInfo,children:[c.jsx("div",{className:Ft.comboName,children:s.name}),c.jsxs("div",{className:Ft.comboXp,children:["+",s.bonus_xp," XP"]})]})]}),c.jsx("div",{className:Ft.comboDesc,children:s.description}),c.jsx("div",{className:Ft.comboBuffs,children:s.required_buff_names.map((a,o)=>{const u=n[o],h=s.active_buff_ids.includes(u);return c.jsxs("div",{className:`${Ft.comboBuff} ${h?Ft.active:Ft.missing}`,children:[c.jsx("span",{className:Ft.buffCheck,children:h?"":""}),a]},o)})}),c.jsxs("div",{className:Ft.comboProgress,children:[c.jsx("div",{className:Ft.progressTrack,children:c.jsx("div",{className:`${Ft.progressFill} ${s.progress===100?Ft.complete:""}`,style:{width:`${s.progress}%`}})}),c.jsxs("span",{className:Ft.progressText,children:[s.progress,"%"]})]}),s.is_ready&&e&&c.jsx("div",{className:Ft.comboActions,children:c.jsx(Oe,{variant:"primary",onClick:e,style:{width:"100%"},children:"Claim Combo!"})}),s.last_activated&&!s.is_ready&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textAlign:"center"},children:["Last claimed: ",new Date(s.last_activated+"Z").toLocaleDateString()]})]})}const b9="_weeklyReviewPanel_9obgq_1",S9="_weekHeader_9obgq_13",N9="_weekTitle_9obgq_27",w9="_weekDates_9obgq_39",A9="_summaryGrid_9obgq_49",R9="_summaryCard_9obgq_61",x9="_summaryIcon_9obgq_83",C9="_summaryValue_9obgq_93",I9="_summaryLabel_9obgq_105",k9="_highlight_9obgq_121",L9="_reflectionSection_9obgq_131",D9="_reflectionField_9obgq_143",O9="_reflectionLabel_9obgq_155",j9="_reflectionIcon_9obgq_173",M9="_reflectionTextarea_9obgq_181",U9="_prioritiesSection_9obgq_223",V9="_priorityInput_9obgq_235",q9="_priorityList_9obgq_277",B9="_priorityItem_9obgq_289",P9="_priorityNumber_9obgq_309",F9="_priorityText_9obgq_321",z9="_removeBtn_9obgq_331",G9="_completedBanner_9obgq_357",H9="_completedIcon_9obgq_385",X9="_actions_9obgq_393",Y9="_emptyState_9obgq_497",st={weeklyReviewPanel:b9,weekHeader:S9,weekTitle:N9,weekDates:w9,summaryGrid:A9,summaryCard:R9,summaryIcon:x9,summaryValue:C9,summaryLabel:I9,highlight:k9,reflectionSection:L9,reflectionField:D9,reflectionLabel:O9,reflectionIcon:j9,reflectionTextarea:M9,prioritiesSection:U9,priorityInput:V9,priorityList:q9,priorityItem:B9,priorityNumber:P9,priorityText:F9,removeBtn:z9,completedBanner:G9,completedIcon:H9,actions:X9,emptyState:Y9};function $9({currentReview:s,loading:e,onGenerateSummary:n,onUpdateContent:a,onCompleteReview:o,getSummaryFromReview:u,getPrioritiesFromReview:h,getWeekStart:g}){const[v,_]=L.useState(""),[S,A]=L.useState(""),[C,B]=L.useState([]),[z,F]=L.useState(""),[U,G]=L.useState(""),[Y,se]=L.useState(null),[re,_e]=L.useState(!1);L.useEffect(()=>{s&&(_(s.wins),A(s.challenges),B(h(s)),F(s.notes),se(u(s)))},[s,u,h]);const ve=async()=>{_e(!0);const{summary:k}=await n();se(k),_e(!1)},j=()=>{if(!U.trim()||C.length>=5)return;const k=[...C,U.trim()];B(k),G(""),a(v,S,k,z)},D=k=>{const Ce=C.filter((mt,$)=>$!==k);B(Ce),a(v,S,Ce,z)},M=()=>{a(v,S,C,z)},V=()=>{M(),o()},w=k=>{const Ce=new Date(k),mt=new Date(k);return mt.setDate(mt.getDate()+6),`${Ce.toLocaleDateString()} - ${mt.toLocaleDateString()}`};if(e)return c.jsx(St,{header:"Weekly Review",children:c.jsx("div",{className:st.emptyState,children:"Loading..."})});if(!s&&!Y)return c.jsx(St,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:st.weeklyReviewPanel,children:[c.jsxs("div",{className:st.weekHeader,children:[c.jsx("span",{className:st.weekTitle,children:"This Week's Review"}),c.jsx("span",{className:st.weekDates,children:w(g())})]}),c.jsxs("div",{className:st.emptyState,children:[c.jsx("p",{children:"Generate your weekly summary to review your progress!"}),c.jsx(Oe,{variant:"primary",onClick:ve,disabled:re,style:{marginTop:16},children:re?"Generating...":"Generate Summary"})]})]})});const O=s?.is_completed;return c.jsx(St,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:st.weeklyReviewPanel,children:[c.jsxs("div",{className:st.weekHeader,children:[c.jsxs("span",{className:st.weekTitle,children:["Week of ",s?.week_start||g()]}),c.jsx("span",{className:st.weekDates,children:w(s?.week_start||g())})]}),O&&c.jsxs("div",{className:st.completedBanner,children:[c.jsx("span",{className:st.completedIcon,children:""}),"Review Completed (+",s?.xp_earned||Id," XP)"]}),Y&&c.jsxs("div",{className:st.summaryGrid,children:[c.jsx(cr,{icon:"",value:Y.steps_completed,label:"Steps"}),c.jsx(cr,{icon:"",value:Y.quests_completed,label:"Quests"}),c.jsx(cr,{icon:"",value:Y.goals_completed,label:"Goals",highlight:!0}),c.jsx(cr,{icon:"",value:Y.buffs_activated,label:"Buffs"}),c.jsx(cr,{icon:"",value:Y.xp_earned,label:"XP Earned",highlight:!0}),c.jsx(cr,{icon:"",value:Y.boss_damage_dealt,label:"Boss Dmg"}),c.jsx(cr,{icon:"",value:Y.focus_sessions,label:"Focus"}),c.jsx(cr,{icon:"",value:Y.routines_completed,label:"Routines"})]}),c.jsxs("div",{className:st.reflectionSection,children:[c.jsxs("div",{className:st.reflectionField,children:[c.jsxs("label",{className:st.reflectionLabel,children:[c.jsx("span",{className:st.reflectionIcon,children:""}),"Wins This Week"]}),c.jsx("textarea",{className:st.reflectionTextarea,value:v,onChange:k=>_(k.target.value),onBlur:M,placeholder:"What went well? What are you proud of?",disabled:O})]}),c.jsxs("div",{className:st.reflectionField,children:[c.jsxs("label",{className:st.reflectionLabel,children:[c.jsx("span",{className:st.reflectionIcon,children:""}),"Challenges & Learnings"]}),c.jsx("textarea",{className:st.reflectionTextarea,value:S,onChange:k=>A(k.target.value),onBlur:M,placeholder:"What was difficult? What did you learn?",disabled:O})]}),c.jsxs("div",{className:st.reflectionField,children:[c.jsxs("label",{className:st.reflectionLabel,children:[c.jsx("span",{className:st.reflectionIcon,children:""}),"Priorities for Next Week (up to 5)"]}),c.jsxs("div",{className:st.prioritiesSection,children:[!O&&C.length<5&&c.jsxs("div",{className:st.priorityInput,children:[c.jsx("input",{type:"text",value:U,onChange:k=>G(k.target.value),placeholder:"Add a priority...",onKeyDown:k=>k.key==="Enter"&&j()}),c.jsx(Oe,{size:"small",onClick:j,children:"Add"})]}),C.length>0&&c.jsx("div",{className:st.priorityList,children:C.map((k,Ce)=>c.jsxs("div",{className:st.priorityItem,children:[c.jsxs("span",{className:st.priorityNumber,children:[Ce+1,"."]}),c.jsx("span",{className:st.priorityText,children:k}),!O&&c.jsx("button",{className:st.removeBtn,onClick:()=>D(Ce),children:""})]},Ce))})]})]}),c.jsxs("div",{className:st.reflectionField,children:[c.jsxs("label",{className:st.reflectionLabel,children:[c.jsx("span",{className:st.reflectionIcon,children:""}),"Additional Notes"]}),c.jsx("textarea",{className:st.reflectionTextarea,value:z,onChange:k=>F(k.target.value),onBlur:M,placeholder:"Any other thoughts or notes...",disabled:O})]})]}),!O&&c.jsxs("div",{className:st.actions,children:[c.jsx(Oe,{variant:"ghost",onClick:ve,disabled:re,children:"Refresh Summary"}),c.jsxs(Oe,{variant:"primary",onClick:V,children:["Complete Review (+",Id," XP)"]})]})]})})}function cr({icon:s,value:e,label:n,highlight:a}){return c.jsxs("div",{className:`${st.summaryCard} ${a?st.highlight:""}`,children:[c.jsx("span",{className:st.summaryIcon,children:s}),c.jsx("span",{className:st.summaryValue,children:e}),c.jsx("span",{className:st.summaryLabel,children:n})]})}const Q9="_guideButton_1u1py_1",K9="_guideOverlay_1u1py_71",W9="_guideContainer_1u1py_95",J9="_guideHeader_1u1py_159",Z9="_guideTitle_1u1py_177",eV="_closeButton_1u1py_191",tV="_guideContent_1u1py_229",nV="_table_1u1py_335",sV="_tocList_1u1py_393",iV="_tocItem_1u1py_411",Fn={guideButton:Q9,guideOverlay:K9,guideContainer:W9,guideHeader:J9,guideTitle:Z9,closeButton:eV,guideContent:tV,table:nV,tocList:sV,tocItem:iV};function aV(){const[s,e]=L.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:Fn.guideButton,onClick:()=>e(!0),title:"Open Guide",children:"?"}),s&&c.jsx(rV,{onClose:()=>e(!1)})]})}function rV({onClose:s}){const e=L.useRef(null);L.useEffect(()=>{const a=o=>{o.key==="Escape"&&s()};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=""}},[s]);const n=a=>{e.current?.querySelector(`#${a}`)?.scrollIntoView({behavior:"smooth"})};return c.jsx("div",{className:Fn.guideOverlay,onClick:s,children:c.jsxs("div",{className:Fn.guideContainer,onClick:a=>a.stopPropagation(),ref:e,children:[c.jsxs("div",{className:Fn.guideHeader,children:[c.jsx("span",{className:Fn.guideTitle,children:"Adventurer's Guide"}),c.jsx("button",{className:Fn.closeButton,onClick:s,children:"Close"})]}),c.jsx("ul",{className:Fn.tocList,children:["overview","character","quests","buffs","achievements","energy","focus","routines","combos","review","events","skills","classes","territory","inventory","xp","levels","stats","tips","data"].map(a=>c.jsx("li",{className:Fn.tocItem,onClick:()=>n(`guide-${a}`),children:{xp:"XP System",data:"Save Data",achievements:"Achievements",energy:"Energy",focus:"Focus Timer",routines:"Routines",combos:"Habit Combos",review:"Weekly Review",events:"Random Events",skills:"Skill Trees",classes:"Classes",territory:"Territory Map",inventory:"Inventory"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},a))}),c.jsxs("div",{className:Fn.guideContent,children:[c.jsx("h2",{id:"guide-overview",children:"Overview"}),c.jsxs("p",{children:["Goal Game turns your real-life goals into an RPG adventure. You create ",c.jsx("strong",{children:"Goals"})," (big-picture ambitions), break them into ",c.jsx("strong",{children:"Quests"})," (projects), and then into ",c.jsx("strong",{children:"Steps"})," (individual tasks). Completing steps earns ",c.jsx("strong",{children:"XP"}),", which levels up your character."]}),c.jsxs("p",{children:["Track daily habits as ",c.jsx("strong",{children:"Buffs"})," (positive) and ",c.jsx("strong",{children:"Debuffs"})," (negative) that affect your character's stats."]}),c.jsx("h2",{id:"guide-character",children:"Character Screen"}),c.jsx("p",{children:"Your character screen shows your current progress at a glance."}),c.jsx("h3",{children:"What you'll see"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Name"}),`  Tap "Rename" to change your character's name.`]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Level & Title"}),'  Your current level and rank title (e.g., "Novice", "Adept"). Titles change automatically as you level up.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP Bar"}),"  Shows progress toward your next level. The numbers show current XP in this level / XP needed for next level."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Total XP"}),"  Your lifetime XP earned across all activities."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Stats"}),"  Five attributes (Stamina, Willpower, Health, Focus, Charisma) that start at 10 and change based on your active buffs/debuffs."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Effects"}),"  Currently active buffs (green pulse) and debuffs (red throb) with time remaining."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP History"}),"  A log of your most recent XP gains showing what you earned and why."]})]}),c.jsx("h2",{id:"guide-quests",children:"Quest Log"}),c.jsx("p",{children:"This is where you organize everything you want to accomplish."}),c.jsx("h3",{children:"Hierarchy"}),c.jsx("p",{children:"Life is organized in three layers:"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Goals"}),'  Big-picture ambitions tied to a life domain. Example: "Get fit" in the Health domain.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),'  Specific projects within a goal. Example: "Run a 5K" under "Get fit".']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Steps"}),'  Individual actionable tasks within a quest. Example: "Run 1 mile without stopping" inside "Run a 5K".']})]}),c.jsx("h3",{children:"Domains"}),c.jsx("p",{children:"Every goal belongs to one of eight life domains:"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Icon"}),c.jsx("th",{children:"Domain"}),c.jsx("th",{children:"Examples"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Fitness, diet, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Career"}),c.jsx("td",{children:"Work projects, promotions, skills"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Learning"}),c.jsx("td",{children:"Courses, reading, certifications"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Social"}),c.jsx("td",{children:"Relationships, networking, community"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Finance"}),c.jsx("td",{children:"Saving, investing, budgeting"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Creative"}),c.jsx("td",{children:"Art, music, writing, hobbies"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Spiritual"}),c.jsx("td",{children:"Meditation, mindfulness, gratitude"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Home"}),c.jsx("td",{children:"Cleaning, organizing, repairs"})]})]})]}),c.jsx("h3",{children:"Priority Levels"}),c.jsx("p",{children:"Quests and steps can have a priority that affects XP rewards:"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Priority"}),c.jsx("th",{children:"Color"}),c.jsx("th",{children:"Step XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Normal"}),c.jsx("td",{children:"Gray"}),c.jsx("td",{children:"10 XP"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Important"}),c.jsx("td",{children:"Gold"}),c.jsx("td",{children:"15 XP (1.5x)"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Legendary"}),c.jsx("td",{children:"Orange"}),c.jsx("td",{children:"20 XP (2x)"})]})]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Goal"}),"  pick a domain, give it a title."]}),c.jsxs("li",{children:["Inside a goal, tap ",c.jsx("strong",{children:"+ Quest"}),"  name the project, choose priority."]}),c.jsx("li",{children:'Tap a quest to expand it, then type steps in the "Add a step" field at the bottom.'}),c.jsx("li",{children:"Check off steps to earn XP. When all steps are done, the quest auto-completes for bonus XP. When all quests in a goal are done, the goal auto-completes for even more bonus XP."})]}),c.jsx("h3",{children:"Filters"}),c.jsx("p",{children:"Use the dropdowns at the top to filter by domain or status (Active / Completed / All)."}),c.jsx("h2",{id:"guide-buffs",children:"Buffs & Debuffs"}),c.jsx("p",{children:"Buffs and debuffs represent daily habits that affect your character."}),c.jsx("h3",{children:"Buffs (Positive Habits)"}),c.jsxs("p",{children:["Things you ",c.jsx("em",{children:"want"})," to do every day. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Morning Exercise  +2 Stamina, +1 Health"}),c.jsx("li",{children:" Meditation  +2 Willpower, +1 Focus"}),c.jsx("li",{children:" 8 Hours Sleep  +1 Health, +1 Focus, +1 Stamina"}),c.jsx("li",{children:" Read 30 Minutes  +2 Focus"})]}),c.jsxs("p",{children:["Activating a buff earns ",c.jsx("strong",{children:"5 XP"})," and applies its stat effects for the duration you set (e.g., 24 hours). After that, the buff expires and you need to activate it again the next day."]}),c.jsx("h3",{children:"Debuffs (Negative Habits)"}),c.jsxs("p",{children:["Things you want to be ",c.jsx("em",{children:"honest about tracking"}),". There is no XP penalty  this is for self-awareness. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Junk Food  -1 Health, -1 Stamina"}),c.jsx("li",{children:" Doomscrolling  -2 Focus, -1 Willpower"}),c.jsx("li",{children:" Alcohol  -1 Health, -1 Focus"})]}),c.jsx("p",{children:"Debuffs still affect your stats while active, shown as red on your character screen."}),c.jsx("h3",{children:"Streaks"}),c.jsxs("p",{children:["Activate the same buff on consecutive days to build a streak. Every ",c.jsx("strong",{children:"7-day streak"})," earns a bonus ",c.jsx("strong",{children:"25 XP"}),"."]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Buff/Debuff"})," to define a habit template."]}),c.jsx("li",{children:"Choose a name, type (buff or debuff), icon, duration in hours, and stat effects (positive numbers for buffs, negative for debuffs)."}),c.jsxs("li",{children:["Once created, it appears in the Buffs or Debuffs column. Tap ",c.jsx("strong",{children:"Activate"})," each day you do the habit."]}),c.jsx("li",{children:"Active effects appear at the top with a countdown timer and are reflected on your Character screen stats."})]}),c.jsx("h3",{children:"Expiry"}),c.jsxs("p",{children:["Buffs and debuffs expire automatically after their duration. The app checks every 60 seconds. You can also manually remove an active effect by tapping ",c.jsx("strong",{children:"Remove"}),"."]}),c.jsx("h2",{id:"guide-achievements",children:"Achievements"}),c.jsx("p",{children:"Unlock achievements by reaching milestones. Each achievement rewards XP when unlocked."}),c.jsx("h3",{children:"Categories"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),"  Complete steps, quests, and goals"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Buffs"}),"  Activate habits regularly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Streaks"}),"  Maintain consecutive day streaks"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Boss"}),"  Defeat weekly bosses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Levels"}),"  Reach level milestones (5, 10, 25, 50)"]})]}),c.jsx("p",{children:"View your progress in the Achievements panel. Some achievements are hidden until unlocked!"}),c.jsx("h2",{id:"guide-energy",children:"Energy System"}),c.jsx("p",{children:"Energy represents your daily capacity for action."}),c.jsx("h3",{children:"Mechanics"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Max Energy"}),"  Starts at 100"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Regeneration"}),"  Recovers 10 energy per hour automatically"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Costs"}),"  Some actions cost energy (completing steps: 5, activating buffs: 3)"]})]}),c.jsx("h3",{children:"Energy Debuffs"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Threshold"}),c.jsx("th",{children:"Debuff"}),c.jsx("th",{children:"Effects"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Below 20"}),c.jsx("td",{children:"Fatigued"}),c.jsx("td",{children:"-2 Focus, -2 Willpower"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Below 5"}),c.jsx("td",{children:"Exhausted"}),c.jsx("td",{children:"-3 Stamina, -3 Willpower, -3 Focus, -1 Health"})]})]})]}),c.jsx("p",{children:"Keep your energy up to avoid stat penalties!"}),c.jsx("h2",{id:"guide-focus",children:"Focus Timer"}),c.jsx("p",{children:"A Pomodoro-style timer to boost productivity."}),c.jsx("h3",{children:"How it works"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Work sessions"}),"  Default 25 minutes of focused work"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Short breaks"}),"  5 minutes after each session"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Long breaks"}),"  15 minutes after 4 sessions"]})]}),c.jsx("h3",{children:"XP Rewards"}),c.jsxs("ul",{children:[c.jsx("li",{children:"+15 XP per completed focus session"}),c.jsx("li",{children:"+5 XP bonus if linked to a quest step"}),c.jsx("li",{children:"+10 XP bonus every 4 consecutive sessions"})]}),c.jsx("p",{children:"Customize timer durations in Settings."}),c.jsx("h2",{id:"guide-routines",children:"Morning/Evening Routines"}),c.jsx("p",{children:"Create routine chains to build powerful habits."}),c.jsx("h3",{children:"Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Morning"}),"  Start your day right"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Evening"}),"  Wind down properly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Custom"}),"  Any time routines"]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsx("li",{children:"Create a routine with a name and bonus XP reward"}),c.jsx("li",{children:"Add steps to the routine (can be linked to buffs)"}),c.jsx("li",{children:"Start the routine each day and complete steps in order"}),c.jsx("li",{children:"Complete all required steps to earn the bonus XP"})]}),c.jsx("p",{children:"Routine streaks earn extra XP every 7 days!"}),c.jsx("h2",{id:"guide-combos",children:"Habit Combos"}),c.jsx("p",{children:"Activate specific buff combinations for bonus XP."}),c.jsx("h3",{children:"Example Combos"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wellness Warrior"}),"  Meditation + Exercise + Healthy Meal = +30 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Master"}),"  No Phone + Deep Work + Reading = +25 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Early Bird"}),"  Morning Exercise + 8 Hours Sleep + No Phone First Hour = +35 XP"]})]}),c.jsx("p",{children:"Combos can only be claimed once per day. Activate all required buffs within 24 hours to qualify."}),c.jsx("h2",{id:"guide-review",children:"Weekly Review"}),c.jsx("p",{children:"Reflect on your progress every week."}),c.jsx("h3",{children:"Summary Data"}),c.jsx("p",{children:"Auto-generated stats include: steps completed, quests completed, buffs activated, XP earned, boss damage dealt, focus sessions, and more."}),c.jsx("h3",{children:"Reflection Prompts"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wins"}),"  What went well this week?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenges"}),"  What was difficult?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Priorities"}),"  Set up to 5 priorities for next week"]})]}),c.jsxs("p",{children:["Completing your weekly review earns ",c.jsx("strong",{children:"100 XP"}),"."]}),c.jsx("h2",{id:"guide-events",children:"Random Events"}),c.jsx("p",{children:"Special limited-time opportunities that appear randomly."}),c.jsx("h3",{children:"Event Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Bonus"}),"  Instant rewards (XP, energy, shields)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenge"}),"  Complete objectives for rewards"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Modifier"}),"  Temporary boosts (double XP, stat increases)"]})]}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Events have different rarities: Common, Uncommon, Rare, Epic. Rarer events have better rewards!"}),c.jsx("p",{children:"Events have a 15% chance to trigger and a 4-hour cooldown between checks."}),c.jsx("h2",{id:"guide-skills",children:"Skill Trees"}),c.jsx("p",{children:"Spend XP to unlock permanent passive bonuses."}),c.jsx("h3",{children:"Branches"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity"})," (Blue)  Quest and step XP bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Health"})," (Red)  Energy and stamina bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus"})," (Purple)  Timer and concentration bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Social"})," (Orange)  Streak and charisma bonuses"]})]}),c.jsx("h3",{children:"How to unlock"}),c.jsx("p",{children:"Skills cost XP to unlock (100-500 XP per node). You must unlock prerequisite skills first. Capstone skills at the end of each branch provide the biggest bonuses."}),c.jsx("h2",{id:"guide-classes",children:"Character Classes"}),c.jsx("p",{children:"Choose a class to specialize your character."}),c.jsx("h3",{children:"Available Classes"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Class"}),c.jsx("th",{children:"Stat Bonuses"}),c.jsx("th",{children:"XP Bonus"}),c.jsx("th",{children:"Special"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Warrior"}),c.jsx("td",{children:"+3 Stamina, +2 Health"}),c.jsx("td",{children:"+10% Quest XP"}),c.jsx("td",{children:"Battlecry"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Mage"}),c.jsx("td",{children:"+3 Focus, +2 Willpower"}),c.jsx("td",{children:"+10% Buff XP"}),c.jsx("td",{children:"Arcane Focus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Ranger"}),c.jsx("td",{children:"+3 Willpower, +1 Stamina, +1 Focus"}),c.jsx("td",{children:"+10% Streak XP"}),c.jsx("td",{children:"Tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Paladin"}),c.jsx("td",{children:"+2 Health, +2 Willpower, +1 Charisma"}),c.jsx("td",{children:"+10% Boss XP"}),c.jsx("td",{children:"Divine Shield"})]})]})]}),c.jsx("p",{children:"You can change your class up to 3 times total."}),c.jsx("h2",{id:"guide-territory",children:"Territory Map"}),c.jsx("p",{children:"Explore regions as you level up."}),c.jsx("h3",{children:"Territories"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"The Awakening Glade"})," (Level 1)  Where every journey begins"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Habit Highlands"})," (Level 5)  Rocky terrain for consistent habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Forest"})," (Level 10)  Dense woods for the focused"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity Plains"})," (Level 15)  Vast fields for goal achievers"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Summit of Mastery"})," (Level 25)  The peak for true masters"]})]}),c.jsx("p",{children:"Complete territory challenges to unlock rewards and earn special titles!"}),c.jsx("h2",{id:"guide-inventory",children:"Inventory & Items"}),c.jsx("p",{children:"Collect and equip items for stat bonuses."}),c.jsx("h3",{children:"Item Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Equipment"}),"  Weapons, armor, accessories with stat bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Consumables"}),"  One-time use items (energy potions, XP elixirs)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Trophies"}),"  Special commemorative items from achievements"]})]}),c.jsx("h3",{children:"Equipment Slots"}),c.jsx("p",{children:"You can equip one item in each slot: Weapon, Armor, Accessory."}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Items come in 5 rarities: Common (gray), Uncommon (green), Rare (blue), Epic (purple), Legendary (orange)."}),c.jsx("p",{children:"Items drop from achievements, boss defeats, and random events."}),c.jsx("h2",{id:"guide-xp",children:"XP System"}),c.jsx("p",{children:"Everything you do earns experience points:"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Action"}),c.jsx("th",{children:"XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a normal step"}),c.jsx("td",{children:"+10"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete an important step"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a legendary step"}),c.jsx("td",{children:"+20"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a quest (all steps done)"}),c.jsx("td",{children:"+50 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a goal (all quests done)"}),c.jsx("td",{children:"+200 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a buff (daily habit)"}),c.jsx("td",{children:"+5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"7-day streak on any buff"}),c.jsx("td",{children:"+25 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a focus session"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a routine"}),c.jsx("td",{children:"+25"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a habit combo"}),c.jsx("td",{children:"+25-35"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete weekly review"}),c.jsx("td",{children:"+100"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Unlock an achievement"}),c.jsx("td",{children:"+25-500"})]})]})]}),c.jsx("h2",{id:"guide-levels",children:"Levels & Titles"}),c.jsxs("p",{children:["XP needed per level increases as you grow. The formula is ",c.jsx("code",{children:"50  level^1.8"}),"."]}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Level"}),c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Approx. Timeline"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"14"}),c.jsx("td",{children:"Novice"}),c.jsx("td",{children:"Starting out"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"59"}),c.jsx("td",{children:"Apprentice"}),c.jsx("td",{children:"~12 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1014"}),c.jsx("td",{children:"Journeyman"}),c.jsx("td",{children:"~34 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1521"}),c.jsx("td",{children:"Adept"}),c.jsx("td",{children:"~12 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2229"}),c.jsx("td",{children:"Expert"}),c.jsx("td",{children:"~24 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3039"}),c.jsx("td",{children:"Master"}),c.jsx("td",{children:"~48 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"4049"}),c.jsx("td",{children:"Legend"}),c.jsx("td",{children:"~812 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"50+"}),c.jsx("td",{children:"Dragonborn"}),c.jsx("td",{children:"~1 year+"})]})]})]}),c.jsx("p",{children:"When you level up, a golden overlay appears announcing your new level and title."}),c.jsx("h2",{id:"guide-stats",children:"Stats"}),c.jsxs("p",{children:["Your character has five stats, all starting at ",c.jsx("strong",{children:"10"}),":"]}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Stat"}),c.jsx("th",{children:"Represents"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Stamina"}),c.jsx("td",{children:"Physical energy, endurance, exercise habits"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Willpower"}),c.jsx("td",{children:"Discipline, self-control, mental toughness"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Physical wellbeing, nutrition, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Focus"}),c.jsx("td",{children:"Concentration, productivity, mental clarity"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Charisma"}),c.jsx("td",{children:"Social skills, confidence, communication"})]})]})]}),c.jsx("h3",{children:"Stat Sources"}),c.jsx("p",{children:"Your final stats are calculated from multiple sources:"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Base"}),"  10 in each stat"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Buffs/Debuffs"}),"  Temporary effects from habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Equipped Items"}),"  Bonuses from weapons, armor, accessories"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Skill Tree"}),"  Permanent passive bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Character Class"}),"  Class-specific bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Energy Debuffs"}),"  Penalties when energy is low"]})]}),c.jsx("p",{children:"Stats serve as a mirror of your current lifestyle  high Focus means you've been studying and avoiding distractions; low Health means you've been eating junk food or skipping sleep."}),c.jsx("h2",{id:"guide-tips",children:"Tips"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Start small."})," Create one goal with one quest and a few steps. Don't overload yourself on day one."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Be honest with debuffs."})," There's no punishment  tracking negative habits helps you see patterns."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Use priorities wisely."}),' Reserve "Legendary" for truly difficult or impactful tasks.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Build streaks."})," The 7-day streak bonus compounds  maintaining 3 daily buffs earns 75 bonus XP per week on top of the daily 5 XP each."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Check your character screen daily."})," Your stats tell you how balanced your life is."]})]}),c.jsx("h2",{id:"guide-data",children:"Saving & Data"}),c.jsx("p",{children:"All your data is stored locally on this device in the browser's database. It persists across sessions  closing and reopening the app keeps everything."}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Export Save"}),"  Downloads your entire database as a .db file. Use this for backups."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Import Save"}),"  Loads a previously exported .db file, replacing all current data. Use this to restore a backup or transfer data between devices."]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Important:"})," Clearing your browser/app data will erase your progress. Export a backup regularly."]}),c.jsx("h3",{children:"Keyboard Shortcuts (Desktop)"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Key"}),c.jsx("th",{children:"Action"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"1"}),c.jsx("td",{children:"Character screen"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2"}),c.jsx("td",{children:"Quest Log"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3"}),c.jsx("td",{children:"Buffs"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Esc"}),c.jsx("td",{children:"Close any open modal/popup"})]})]})]})]})]})})}function oV(){const{ready:s,error:e}=dw(),[n,a]=L.useState("character");return s?c.jsx(lV,{activeTab:n,setActiveTab:a}):c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a0f",color:"#c8a84e",fontFamily:"Cinzel, serif",fontSize:"1.2rem"},children:e?`Error: ${e}`:"Loading database..."})}function lV({activeTab:s,setActiveTab:e}){const n=Sw(),a=_L({grantXP:n.grantXP}),o=bL({grantXP:n.grantXP,addShields:a.addShields}),u=sL({grantXP:n.grantXP}),h=OL(),g=CL({grantXP:n.grantXP}),v=xD({totalXP:n.character.total_xp}),_=jD(),S=zD({characterLevel:n.character.level,grantXP:n.grantXP}),A=KD({grantXP:n.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),C=PL({grantXP:n.grantXP,onSessionComplete:()=>{g.incrementProgress("focus_sessions_completed",1),o.dealDamage("focus_session","Focus session completed")}}),B=nD({grantXP:n.grantXP,onRoutineComplete:w=>{g.incrementProgress("routines_completed",1),o.dealDamage("routine_completed","Routine completed")}}),z=cD({grantXP:n.grantXP}),F=_D({grantXP:n.grantXP}),U=bD({grantXP:n.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),G=Uw({grantXP:n.grantXP,onStepComplete:()=>{u.updateProgress("complete_steps",1),o.dealDamage("step_completed","Completed a step"),g.incrementProgress("steps_completed",1)},onQuestComplete:()=>{o.dealDamage("quest_completed","Completed a quest"),g.incrementProgress("quests_completed",1)},onGoalComplete:()=>{o.dealDamage("goal_completed","Completed a goal"),g.incrementProgress("goals_completed",1)}}),Y=y1(),se=Yw({grantXP:n.grantXP,scheduleBuffExpiry:Y.scheduleBuffExpiry,cancelBuffExpiry:Y.cancelBuffExpiry,onBuffActivated:w=>{u.updateProgress("activate_buffs",1),new Date().getHours()<8&&u.updateProgress("early_start",1),w==="buff"&&(u.updateProgress("activate_specific",1),o.dealDamage("buff_activated","Activated a buff"),g.incrementProgress("buffs_activated",1)),a.refresh(),z.checkAndActivateCombos()}}),re=iA(),[_e,ve]=L.useState(!1),[j,D]=L.useState(!1);L.useEffect(()=>{n.refresh(),s==="quests"&&G.refresh(),s==="buffs"&&(se.refresh(),a.refresh(),z.refresh()),s==="focus"&&C.refresh(),s==="skills"&&(v.refresh(),_.refresh(),S.refresh()),s==="inventory"&&A.refresh()},[s]),L.useEffect(()=>{G.refresh(),se.refresh(),a.refresh(),h.refresh(),g.refresh(),u.checkNoDebuffs()},[]),L.useEffect(()=>{g.checkThreshold("character_level",n.character.level)},[n.character.level]),L.useEffect(()=>{const w=O=>{O.target instanceof HTMLInputElement||O.target instanceof HTMLTextAreaElement||O.target instanceof HTMLSelectElement||(O.key==="1"&&e("character"),O.key==="2"&&e("quests"),O.key==="3"&&e("buffs"),O.key==="4"&&e("focus"),O.key==="5"&&e("skills"),O.key==="6"&&e("inventory"))};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[e]);const M=L.useCallback(async()=>{const w=await cp(),O=new Blob([new Uint8Array(w)],{type:"application/octet-stream"}),k=URL.createObjectURL(O),Ce=document.createElement("a");Ce.href=k,Ce.download=`goal-game-backup-${new Date().toISOString().split("T")[0]}.db`,Ce.click(),URL.revokeObjectURL(k)},[]),V=L.useCallback(async()=>{const w=document.createElement("input");w.type="file",w.accept=".db",w.onchange=async()=>{const O=w.files?.[0];if(!O)return;const k=await O.arrayBuffer();await BT(new Uint8Array(k)),window.location.reload()},w.click()},[]);return c.jsxs("div",{className:Ln.appShell,children:[c.jsx(_O,{activeTab:s,onTabChange:e}),c.jsx(zO,{character:n.character,energyState:h.state}),c.jsxs("main",{className:Ln.main,children:[s==="character"&&c.jsxs(c.Fragment,{children:[U.activeEvents.length>0&&c.jsx("div",{style:{marginBottom:20},children:U.activeEvents.map(w=>c.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(200,168,78,0.2), rgba(200,168,78,0.1))",border:"1px solid var(--border-gold)",borderRadius:8,padding:"12px 16px",marginBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsx("span",{style:{fontSize:"1.2rem",marginRight:8},children:w.template.icon}),c.jsx("strong",{style:{color:"var(--gold)"},children:w.template.name}),c.jsx("span",{style:{marginLeft:8,color:"var(--text-secondary)"},children:w.template.description})]}),!w.is_claimed&&c.jsx(Oe,{size:"small",onClick:()=>U.claimEvent(w.id),children:"Claim"})]},w.id))}),c.jsx(cM,{quests:u.quests,loading:u.loading,allCompleted:u.allCompleted,completedCount:u.completedCount,bonusClaimed:u.bonusClaimed,bonusXp:u.bonusXp,totalXpEarned:u.totalXpEarned,onClaimBonus:async()=>{await u.claimBonus();for(const w of u.quests)w.is_completed&&o.dealDamage("daily_quest_completed",`Daily Quest: ${w.title}`)}}),c.jsx(KU,{routines:B.routines,loading:B.loading,onCreateRoutine:B.createRoutine,onDeleteRoutine:B.deleteRoutine,onStartRoutine:B.startRoutine,onCompleteStep:B.completeStep,onSkipStep:B.skipStep,onAddStep:B.addStep,onDeleteStep:B.deleteStep,getStepsWithStatus:B.getStepsWithStatus}),c.jsx(T9,{combos:z.combos,loading:z.loading,onClaimCombo:z.claimCombo}),c.jsx(GM,{boss:o.boss,loading:o.loading,weekStart:o.weekStart,weekEnd:o.weekEnd,hpPercentage:o.hpPercentage,damageDealt:o.damageDealt,totalDefeated:o.totalDefeated}),c.jsx($9,{currentReview:F.currentReview,loading:F.loading,onGenerateSummary:F.generateSummary,onUpdateContent:F.updateContent,onCompleteReview:F.completeReview,getSummaryFromReview:F.getSummaryFromReview,getPrioritiesFromReview:F.getPrioritiesFromReview,getWeekStart:F.getWeekStart}),c.jsx(l3,{character:n.character,stats:se.stats,activeBuffs:se.activeBuffs,xpLog:n.xpLog,onNameChange:n.setName}),c.jsx(x6,{achievements:g.achievements,stats:g.stats,loading:g.loading})]}),s==="quests"&&c.jsx(t4,{goals:G.goals,domains:G.domains,filterDomain:G.filterDomain,filterStatus:G.filterStatus,onFilterDomain:w=>{G.setFilterDomain(w)},onFilterStatus:w=>{G.setFilterStatus(w)},onCreateGoal:G.createGoal,onCreateQuest:G.createQuest,onCreateStep:G.createStep,onCompleteStep:G.completeStep,onUncompleteStep:G.uncompleteStep,onDeleteStep:G.deleteStep,onDeleteQuest:G.deleteQuest,onDeleteGoal:G.deleteGoal}),s==="buffs"&&c.jsx(Q4,{definitions:se.definitions,activeBuffs:se.activeBuffs,onCreateDefinition:se.createDefinition,onDeleteDefinition:se.deleteDefinition,onActivateBuff:se.activateBuff,onDeactivateBuff:se.deactivateBuff,streakInfos:a.streakInfos,shieldCount:a.shieldCount,onUseShield:a.useShield,getUnclaimedMilestones:a.getUnclaimedMilestones,onClaimMilestones:a.claimMilestones}),s==="focus"&&c.jsx(_U,{timerState:C.timerState,settings:C.settings,stats:C.stats,recentSessions:C.recentSessions,onStartWork:C.startWork,onStartBreak:C.startBreak,onPause:C.pause,onResume:C.resume,onStop:C.stop,onSkipBreak:C.skipBreak,onUpdateSettings:C.updateSettings,formatTime:C.formatTime}),s==="skills"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Character Class"}),_.getSelectedClass()?c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[c.jsx("span",{style:{fontSize:"2rem"},children:_.getSelectedClass()?.icon}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--text-primary)",margin:0},children:_.getSelectedClass()?.name}),c.jsx("p",{style:{color:"var(--text-secondary)",margin:"4px 0 0 0"},children:_.getSelectedClass()?.description}),c.jsx("p",{style:{color:"var(--gold)",fontSize:"0.85rem",marginTop:8},children:_.getSelectedClass()?.special_ability_desc})]})]}):c.jsxs("div",{children:[c.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"Choose your class to gain unique bonuses:"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},children:_.classes.map(w=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,cursor:"pointer",transition:"all 0.2s"},onClick:()=>_.selectClass(w.id),onMouseEnter:O=>{O.currentTarget.style.borderColor="var(--border-gold)"},onMouseLeave:O=>{O.currentTarget.style.borderColor="var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:8},children:w.icon}),c.jsx("h4",{style:{color:"var(--gold)",margin:"0 0 4px 0"},children:w.name}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",margin:0},children:w.description})]},w.id))})]})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Skill Trees"}),c.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:["Spend XP to unlock passive bonuses. Total XP available: ",n.character.total_xp]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:16},children:v.branches.map(w=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${w.color}40`,borderRadius:8,padding:16},children:[c.jsxs("h3",{style:{color:w.color,marginBottom:12},children:[w.icon," ",w.name]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:v.nodes.filter(O=>O.branch_id===w.id).sort((O,k)=>O.tier-k.tier).map(O=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:O.unlocked?`${w.color}20`:"var(--bg-dark)",border:`1px solid ${O.unlocked?w.color:"var(--border-color)"}`,borderRadius:6,opacity:O.can_unlock||O.unlocked?1:.5},children:[c.jsxs("div",{children:[c.jsx("span",{style:{marginRight:8},children:O.icon}),c.jsx("span",{style:{color:O.unlocked?w.color:"var(--text-primary)"},children:O.name})]}),O.unlocked?c.jsx("span",{style:{color:"var(--success)",fontSize:"0.85rem"},children:"Unlocked"}):O.can_unlock?c.jsxs(Oe,{size:"small",onClick:()=>v.unlockSkill(O.id),children:[O.xp_cost," XP"]}):c.jsxs("span",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:[O.xp_cost," XP"]})]},O.id))})]},w.id))})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Territory Map"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:S.territories.map(w=>c.jsxs("div",{style:{flex:"1 1 200px",maxWidth:250,background:w.is_current?`${w.background_color}30`:"var(--bg-medium)",border:`2px solid ${w.is_current?w.background_color:w.discovered?"var(--border-gold)":"var(--border-color)"}`,borderRadius:8,padding:16,opacity:w.is_locked?.5:1,cursor:w.discovered&&!w.is_current?"pointer":"default"},onClick:()=>{w.discovered&&!w.is_current&&S.travelTo(w.id)},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:8},children:w.icon}),c.jsx("h4",{style:{color:w.is_current?w.background_color:"var(--text-primary)",margin:"0 0 4px 0"},children:w.name}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",margin:0},children:w.is_locked?`Unlocks at Level ${w.unlock_level}`:w.description}),w.is_current&&c.jsx("span",{style:{display:"inline-block",marginTop:8,padding:"2px 8px",background:w.background_color,color:"#000",borderRadius:4,fontSize:"0.75rem",fontWeight:600},children:"Current"})]},w.id))})]})]}),s==="inventory"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Equipment"}),c.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:["weapon","armor","accessory"].map(w=>{const O=A.getEquipmentBySlot(w);return c.jsxs("div",{style:{flex:"1 1 150px",maxWidth:200,background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textTransform:"uppercase",marginBottom:8},children:w}),O?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:O.item.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",marginBottom:4},children:O.item.definition.name}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:()=>A.unequipItem(w),children:"Unequip"})]}):c.jsx("div",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:"Empty"})]},w)})})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Inventory"}),A.inventory.length===0?c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Your inventory is empty. Complete achievements and defeat bosses to earn items!"}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:12},children:A.inventory.map(w=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${w.definition.rarity==="legendary"?"#ff9800":w.definition.rarity==="epic"?"#9c27b0":w.definition.rarity==="rare"?"#2196f3":w.definition.rarity==="uncommon"?"#4caf50":"var(--border-color)"}`,borderRadius:8,padding:12,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:w.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.85rem",marginBottom:4},children:w.definition.name}),w.quantity>1&&c.jsxs("div",{style:{color:"var(--text-dim)",fontSize:"0.75rem",marginBottom:4},children:["x",w.quantity]}),w.definition.type==="equipment"&&c.jsx(Oe,{size:"small",onClick:()=>A.equipItem(w.id),children:"Equip"}),w.definition.type==="consumable"&&c.jsx(Oe,{size:"small",onClick:()=>A.useConsumable(w.id),children:"Use"})]},w.id))})]})]}),c.jsxs("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:[j&&c.jsx(V5,{}),_e&&c.jsx(y5,{}),c.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(Oe,{size:"small",variant:"ghost",onClick:()=>D(!j),children:j?"Hide Notifications":"Notifications"}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:()=>ve(!_e),children:_e?"Hide Cloud Backup":"Cloud Backup"}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:M,children:"Export Save"}),c.jsx(Oe,{size:"small",variant:"ghost",onClick:V,children:"Import Save"})]})]})]}),n.xpFloats.map(w=>c.jsxs("div",{className:Ln.xpFloat,children:["+",w.amount," XP"]},w.id)),n.levelUpInfo&&c.jsx(WO,{level:n.levelUpInfo.level,title:n.levelUpInfo.title,onDismiss:n.dismissLevelUp}),c.jsx(I6,{unlock:g.pendingUnlocks.length>0?g.pendingUnlocks[0]:null,onDismiss:()=>g.dismissUnlock(0)}),c.jsx(aV,{}),re.message&&c.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 20px",background:re.status==="error"?"rgba(231, 76, 60, 0.9)":"rgba(46, 204, 113, 0.9)",color:"#fff",borderRadius:8,fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:re.message})]})}EN.createRoot(document.getElementById("root")).render(c.jsx(L.StrictMode,{children:c.jsx(oV,{})}));
