(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function SN(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function NN(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var n=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var o=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return s[a]}})}),n}var im={exports:{}},Ec={};var DE;function xN(){if(DE)return Ec;DE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:u}}return Ec.Fragment=e,Ec.jsx=n,Ec.jsxs=n,Ec}var OE;function wN(){return OE||(OE=1,im.exports=xN()),im.exports}var c=wN(),am={exports:{}},nt={};var ME;function AN(){if(ME)return nt;ME=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function B(X){return X===null||typeof X!="object"?null:(X=w&&X[w]||X["@@iterator"],typeof X=="function"?X:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function z(X,de,le){this.props=X,this.context=de,this.refs=q,this.updater=le||G}z.prototype.isReactComponent={},z.prototype.setState=function(X,de){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,de,"setState")},z.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function H(){}H.prototype=z.prototype;function K(X,de,le){this.props=X,this.context=de,this.refs=q,this.updater=le||G}var ie=K.prototype=new H;ie.constructor=K,U(ie,z.prototype),ie.isPureReactComponent=!0;var Ee=Array.isArray;function ge(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function j(X,de,le){var be=le.ref;return{$$typeof:s,type:X,key:de,ref:be!==void 0?be:null,props:le}}function V(X,de){return j(X.type,de,X.props)}function M(X){return typeof X=="object"&&X!==null&&X.$$typeof===s}function O(X){var de={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(le){return de[le]})}var k=/\/+/g;function Ae(X,de){return typeof X=="object"&&X!==null&&X.key!=null?O(""+X.key):de.toString(36)}function Je(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(ge,ge):(X.status="pending",X.then(function(de){X.status==="pending"&&(X.status="fulfilled",X.value=de)},function(de){X.status==="pending"&&(X.status="rejected",X.reason=de)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function se(X,de,le,be,ae){var we=typeof X;(we==="undefined"||we==="boolean")&&(X=null);var Pe=!1;if(X===null)Pe=!0;else switch(we){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(X.$$typeof){case s:case e:Pe=!0;break;case S:return Pe=X._init,se(Pe(X._payload),de,le,be,ae)}}if(Pe)return ae=ae(X),Pe=be===""?"."+Ae(X,0):be,Ee(ae)?(le="",Pe!=null&&(le=Pe.replace(k,"$&/")+"/"),se(ae,de,le,"",function(rn){return rn})):ae!=null&&(M(ae)&&(ae=V(ae,le+(ae.key==null||X&&X.key===ae.key?"":(""+ae.key).replace(k,"$&/")+"/")+Pe)),de.push(ae)),1;Pe=0;var wt=be===""?".":be+":";if(Ee(X))for(var yt=0;yt<X.length;yt++)be=X[yt],we=wt+Ae(be,yt),Pe+=se(be,de,le,we,ae);else if(yt=B(X),typeof yt=="function")for(X=yt.call(X),yt=0;!(be=X.next()).done;)be=be.value,we=wt+Ae(be,yt++),Pe+=se(be,de,le,we,ae);else if(we==="object"){if(typeof X.then=="function")return se(Je(X),de,le,be,ae);throw de=String(X),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function Te(X,de,le){if(X==null)return X;var be=[],ae=0;return se(X,be,"","",function(we){return de.call(le,we,ae++)}),be}function Ce(X){if(X._status===-1){var de=X._result;de=de(),de.then(function(le){(X._status===0||X._status===-1)&&(X._status=1,X._result=le)},function(le){(X._status===0||X._status===-1)&&(X._status=2,X._result=le)}),X._status===-1&&(X._status=0,X._result=de)}if(X._status===1)return X._result.default;throw X._result}var rt=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},at={map:Te,forEach:function(X,de,le){Te(X,function(){de.apply(this,arguments)},le)},count:function(X){var de=0;return Te(X,function(){de++}),de},toArray:function(X){return Te(X,function(de){return de})||[]},only:function(X){if(!M(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return nt.Activity=x,nt.Children=at,nt.Component=z,nt.Fragment=n,nt.Profiler=o,nt.PureComponent=K,nt.StrictMode=a,nt.Suspense=E,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,nt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return D.H.useMemoCache(X)}},nt.cache=function(X){return function(){return X.apply(null,arguments)}},nt.cacheSignal=function(){return null},nt.cloneElement=function(X,de,le){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var be=U({},X.props),ae=X.key;if(de!=null)for(we in de.key!==void 0&&(ae=""+de.key),de)!A.call(de,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&de.ref===void 0||(be[we]=de[we]);var we=arguments.length-2;if(we===1)be.children=le;else if(1<we){for(var Pe=Array(we),wt=0;wt<we;wt++)Pe[wt]=arguments[wt+2];be.children=Pe}return j(X.type,ae,be)},nt.createContext=function(X){return X={$$typeof:h,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:u,_context:X},X},nt.createElement=function(X,de,le){var be,ae={},we=null;if(de!=null)for(be in de.key!==void 0&&(we=""+de.key),de)A.call(de,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(ae[be]=de[be]);var Pe=arguments.length-2;if(Pe===1)ae.children=le;else if(1<Pe){for(var wt=Array(Pe),yt=0;yt<Pe;yt++)wt[yt]=arguments[yt+2];ae.children=wt}if(X&&X.defaultProps)for(be in Pe=X.defaultProps,Pe)ae[be]===void 0&&(ae[be]=Pe[be]);return j(X,we,ae)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(X){return{$$typeof:g,render:X}},nt.isValidElement=M,nt.lazy=function(X){return{$$typeof:S,_payload:{_status:-1,_result:X},_init:Ce}},nt.memo=function(X,de){return{$$typeof:_,type:X,compare:de===void 0?null:de}},nt.startTransition=function(X){var de=D.T,le={};D.T=le;try{var be=X(),ae=D.S;ae!==null&&ae(le,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(ge,rt)}catch(we){rt(we)}finally{de!==null&&le.types!==null&&(de.types=le.types),D.T=de}},nt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},nt.use=function(X){return D.H.use(X)},nt.useActionState=function(X,de,le){return D.H.useActionState(X,de,le)},nt.useCallback=function(X,de){return D.H.useCallback(X,de)},nt.useContext=function(X){return D.H.useContext(X)},nt.useDebugValue=function(){},nt.useDeferredValue=function(X,de){return D.H.useDeferredValue(X,de)},nt.useEffect=function(X,de){return D.H.useEffect(X,de)},nt.useEffectEvent=function(X){return D.H.useEffectEvent(X)},nt.useId=function(){return D.H.useId()},nt.useImperativeHandle=function(X,de,le){return D.H.useImperativeHandle(X,de,le)},nt.useInsertionEffect=function(X,de){return D.H.useInsertionEffect(X,de)},nt.useLayoutEffect=function(X,de){return D.H.useLayoutEffect(X,de)},nt.useMemo=function(X,de){return D.H.useMemo(X,de)},nt.useOptimistic=function(X,de){return D.H.useOptimistic(X,de)},nt.useReducer=function(X,de,le){return D.H.useReducer(X,de,le)},nt.useRef=function(X){return D.H.useRef(X)},nt.useState=function(X){return D.H.useState(X)},nt.useSyncExternalStore=function(X,de,le){return D.H.useSyncExternalStore(X,de,le)},nt.useTransition=function(){return D.H.useTransition()},nt.version="19.2.4",nt}var UE;function pp(){return UE||(UE=1,am.exports=AN()),am.exports}var L=pp(),rm={exports:{}},vc={},om={exports:{}},lm={};var VE;function RN(){return VE||(VE=1,(function(s){function e(se,Te){var Ce=se.length;se.push(Te);e:for(;0<Ce;){var rt=Ce-1>>>1,at=se[rt];if(0<o(at,Te))se[rt]=Te,se[Ce]=at,Ce=rt;else break e}}function n(se){return se.length===0?null:se[0]}function a(se){if(se.length===0)return null;var Te=se[0],Ce=se.pop();if(Ce!==Te){se[0]=Ce;e:for(var rt=0,at=se.length,X=at>>>1;rt<X;){var de=2*(rt+1)-1,le=se[de],be=de+1,ae=se[be];if(0>o(le,Ce))be<at&&0>o(ae,le)?(se[rt]=ae,se[be]=Ce,rt=be):(se[rt]=le,se[de]=Ce,rt=de);else if(be<at&&0>o(ae,Ce))se[rt]=ae,se[be]=Ce,rt=be;else break e}}return Te}function o(se,Te){var Ce=se.sortIndex-Te.sortIndex;return Ce!==0?Ce:se.id-Te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var E=[],_=[],S=1,x=null,w=3,B=!1,G=!1,U=!1,q=!1,z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ie(se){for(var Te=n(_);Te!==null;){if(Te.callback===null)a(_);else if(Te.startTime<=se)a(_),Te.sortIndex=Te.expirationTime,e(E,Te);else break;Te=n(_)}}function Ee(se){if(U=!1,ie(se),!G)if(n(E)!==null)G=!0,ge||(ge=!0,O());else{var Te=n(_);Te!==null&&Je(Ee,Te.startTime-se)}}var ge=!1,D=-1,A=5,j=-1;function V(){return q?!0:!(s.unstable_now()-j<A)}function M(){if(q=!1,ge){var se=s.unstable_now();j=se;var Te=!0;try{e:{G=!1,U&&(U=!1,H(D),D=-1),B=!0;var Ce=w;try{t:{for(ie(se),x=n(E);x!==null&&!(x.expirationTime>se&&V());){var rt=x.callback;if(typeof rt=="function"){x.callback=null,w=x.priorityLevel;var at=rt(x.expirationTime<=se);if(se=s.unstable_now(),typeof at=="function"){x.callback=at,ie(se),Te=!0;break t}x===n(E)&&a(E),ie(se)}else a(E);x=n(E)}if(x!==null)Te=!0;else{var X=n(_);X!==null&&Je(Ee,X.startTime-se),Te=!1}}break e}finally{x=null,w=Ce,B=!1}Te=void 0}}finally{Te?O():ge=!1}}}var O;if(typeof K=="function")O=function(){K(M)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Ae=k.port2;k.port1.onmessage=M,O=function(){Ae.postMessage(null)}}else O=function(){z(M,0)};function Je(se,Te){D=z(function(){se(s.unstable_now())},Te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(se){se.callback=null},s.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<se?Math.floor(1e3/se):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(se){switch(w){case 1:case 2:case 3:var Te=3;break;default:Te=w}var Ce=w;w=Te;try{return se()}finally{w=Ce}},s.unstable_requestPaint=function(){q=!0},s.unstable_runWithPriority=function(se,Te){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ce=w;w=se;try{return Te()}finally{w=Ce}},s.unstable_scheduleCallback=function(se,Te,Ce){var rt=s.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?rt+Ce:rt):Ce=rt,se){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Ce+at,se={id:S++,callback:Te,priorityLevel:se,startTime:Ce,expirationTime:at,sortIndex:-1},Ce>rt?(se.sortIndex=Ce,e(_,se),n(E)===null&&se===n(_)&&(U?(H(D),D=-1):U=!0,Je(Ee,Ce-rt))):(se.sortIndex=at,e(E,se),G||B||(G=!0,ge||(ge=!0,O()))),se},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(se){var Te=w;return function(){var Ce=w;w=Te;try{return se.apply(this,arguments)}finally{w=Ce}}}})(lm)),lm}var qE;function CN(){return qE||(qE=1,om.exports=RN()),om.exports}var cm={exports:{}},Jn={};var BE;function IN(){if(BE)return Jn;BE=1;var s=pp();function e(E){var _="https://react.dev/errors/"+E;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+E+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(E,_,S){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:E,containerInfo:_,implementation:S}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(E,_){if(E==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Jn.createPortal=function(E,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(E,_,null,S)},Jn.flushSync=function(E){var _=h.T,S=a.p;try{if(h.T=null,a.p=2,E)return E()}finally{h.T=_,a.p=S,a.d.f()}},Jn.preconnect=function(E,_){typeof E=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(E,_))},Jn.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},Jn.preinit=function(E,_){if(typeof E=="string"&&_&&typeof _.as=="string"){var S=_.as,x=g(S,_.crossOrigin),w=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?a.d.S(E,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:B}):S==="script"&&a.d.X(E,{crossOrigin:x,integrity:w,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Jn.preinitModule=function(E,_){if(typeof E=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);a.d.M(E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(E)},Jn.preload=function(E,_){if(typeof E=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,x=g(S,_.crossOrigin);a.d.L(E,S,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Jn.preloadModule=function(E,_){if(typeof E=="string")if(_){var S=g(_.as,_.crossOrigin);a.d.m(E,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(E)},Jn.requestFormReset=function(E){a.d.r(E)},Jn.unstable_batchedUpdates=function(E,_){return E(_)},Jn.useFormState=function(E,_,S){return h.H.useFormState(E,_,S)},Jn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jn.version="19.2.4",Jn}var PE;function kN(){if(PE)return cm.exports;PE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cm.exports=IN(),cm.exports}var FE;function LN(){if(FE)return vc;FE=1;var s=CN(),e=pp(),n=kN();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function E(t){if(u(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,l=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return E(f),t;if(p===l)return E(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==l.return)r=f,l=p;else{for(var T=!1,R=f.child;R;){if(R===r){T=!0,r=f,l=p;break}if(R===l){T=!0,l=f,r=p;break}R=R.sibling}if(!T){for(R=p.child;R;){if(R===r){T=!0,r=p,l=f;break}if(R===l){T=!0,l=p,r=f;break}R=R.sibling}if(!T)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case z:return"Profiler";case q:return"StrictMode";case Ee:return"Suspense";case ge:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case K:return t.displayName||"Context";case H:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Ae(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Ae(t(i))}catch{}}return null}var Je=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},rt=[],at=-1;function X(t){return{current:t}}function de(t){0>at||(t.current=rt[at],rt[at]=null,at--)}function le(t,i){at++,rt[at]=t.current,t.current=i}var be=X(null),ae=X(null),we=X(null),Pe=X(null);function wt(t,i){switch(le(we,i),le(ae,t),le(be,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?sE(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=sE(i),t=iE(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}de(be),le(be,t)}function yt(){de(be),de(ae),de(we)}function rn(t){t.memoizedState!==null&&le(Pe,t);var i=be.current,r=iE(i,t.type);i!==r&&(le(ae,t),le(be,r))}function ms(t){ae.current===t&&(de(be),de(ae)),Pe.current===t&&(de(Pe),pc._currentValue=Ce)}var fn,Ni;function $n(t){if(fn===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);fn=i&&i[1]||"",Ni=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+t+Ni}var Ia=!1;function kt(t,i){if(!t||Ia)return"";Ia=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(oe){var ne=oe}Reflect.construct(t,[],me)}else{try{me.call()}catch(oe){ne=oe}t.call(me.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(me=t())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],R=p[1];if(T&&R){var P=T.split(`
`),ee=R.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===ee.length)for(l=P.length-1,f=ee.length-1;1<=l&&0<=f&&P[l]!==ee[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==ee[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==ee[f]){var ue=`
`+P[l].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=l&&0<=f);break}}}finally{Ia=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?$n(r):""}function Yi(t,i){switch(t.tag){case 26:case 27:case 5:return $n(t.type);case 16:return $n("Lazy");case 13:return t.child!==i&&i!==null?$n("Suspense Fallback"):$n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return kt(t.type,!1);case 11:return kt(t.type.render,!1);case 1:return kt(t.type,!0);case 31:return $n("Activity");default:return""}}function ka(t){try{var i="",r=null;do i+=Yi(t,r),r=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Qt=Object.prototype.hasOwnProperty,nn=s.unstable_scheduleCallback,Rs=s.unstable_cancelCallback,Ol=s.unstable_shouldYield,Sr=s.unstable_requestPaint,Dn=s.unstable_now,di=s.unstable_getCurrentPriorityLevel,fi=s.unstable_ImmediatePriority,ss=s.unstable_UserBlockingPriority,hi=s.unstable_NormalPriority,_o=s.unstable_LowPriority,Nr=s.unstable_IdlePriority,go=s.log,yo=s.unstable_setDisableYieldValue,Cs=null,qe=null;function is(t){if(typeof go=="function"&&yo(t),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Cs,t)}catch{}}var zt=Math.clz32?Math.clz32:Eo,xr=Math.log,Is=Math.LN2;function Eo(t){return t>>>=0,t===0?32:31-(xr(t)/Is|0)|0}var bn=256,xi=262144,Jt=4194304;function ks(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Se(t,i,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var R=l&134217727;return R!==0?(l=R&~p,l!==0?f=ks(l):(T&=R,T!==0?f=ks(T):r||(r=R&~t,r!==0&&(f=ks(r))))):(R=l&~p,R!==0?f=ks(R):T!==0?f=ks(T):r||(r=l&~t,r!==0&&(f=ks(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function Ls(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ml(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function On(){var t=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),t}function ps(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function mi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wr(t,i,r,l,f,p){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var R=t.entanglements,P=t.expirationTimes,ee=t.hiddenUpdates;for(r=T&~r;0<r;){var ue=31-zt(r),me=1<<ue;R[ue]=0,P[ue]=-1;var ne=ee[ue];if(ne!==null)for(ee[ue]=null,ue=0;ue<ne.length;ue++){var oe=ne[ue];oe!==null&&(oe.lane&=-536870913)}r&=~me}l!==0&&as(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~i))}function as(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-zt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function La(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var l=31-zt(r),f=1<<l;f&i|t[l]&i&&(t[l]|=i),r&=~f}}function hn(t,i){var r=i&-i;return r=(r&42)!==0?1:wi(r),(r&(t.suspendedLanes|i))!==0?0:r}function wi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ar(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:AE(t.type))}function _s(t,i){var r=Te.p;try{return Te.p=t,i()}finally{Te.p=r}}var Qn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Qn,on="__reactProps$"+Qn,Xs="__reactContainer$"+Qn,Ai="__reactEvents$"+Qn,Ul="__reactListeners$"+Qn,ja="__reactHandles$"+Qn,Rr="__reactResources$"+Qn,rs="__reactMarker$"+Qn;function Da(t){delete t[ft],delete t[on],delete t[Ai],delete t[Ul],delete t[ja]}function ln(t){var i=t[ft];if(i)return i;for(var r=t.parentNode;r;){if(i=r[Xs]||r[ft]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=dE(t);t!==null;){if(r=t[ft])return r;t=dE(t)}return i}t=r,r=t.parentNode}return null}function Mn(t){if(t=t[ft]||t[Xs]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Un(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function js(t){var i=t[Rr];return i||(i=t[Rr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Zt(t){t[rs]=!0}var pi=new Set,Oa={};function os(t,i){Ds(t,i),Ds(t+"Capture",i)}function Ds(t,i){for(Oa[t]=i,t=0;t<i.length;t++)pi.add(i[t])}var $s=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qi={},Ma={};function Cr(t){return Qt.call(Ma,t)?!0:Qt.call(Qi,t)?!1:$s.test(t)?Ma[t]=!0:(Qi[t]=!0,!1)}function Ki(t,i,r){if(Cr(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function ls(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function jt(t,i,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+l)}}function tt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kn(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ri(t,i,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){r=""+T,p.call(this,T)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function vt(t){if(!t._valueTracker){var i=Kn(t)?"checked":"value";t._valueTracker=Ri(t,i,""+t[i])}}function Ys(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),l="";return t&&(l=Kn(t)?t.checked?"true":"false":t.value),t=l,t!==r?(i.setValue(t),!0):!1}function gs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Wi=/[\n"\\]/g;function Wn(t){return t.replace(Wi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Qs(t,i,r,l,f,p,T,R){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+tt(i)):t.value!==""+tt(i)&&(t.value=""+tt(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?kr(t,T,tt(i)):r!=null?kr(t,T,tt(r)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+tt(R):t.removeAttribute("name")}function Ir(t,i,r,l,f,p,T,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){vt(t);return}r=r!=null?""+tt(r):"",i=i!=null?""+tt(i):r,R||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=R?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),vt(t)}function kr(t,i,r){i==="number"&&gs(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ks(t,i,r,l){if(t=t.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=i.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+tt(r),i=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Lr(t,i,r){if(i!=null&&(i=""+tt(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+tt(r):""}function Ws(t,i,r,l){if(i==null){if(l!=null){if(r!=null)throw Error(a(92));if(Je(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),i=r}r=tt(i),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),vt(t)}function wn(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ci(t,i,r){var l=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,r):typeof r!="number"||r===0||vo.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function Ii(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&r[f]!==l&&Ci(t,f,l)}else for(var p in i)i.hasOwnProperty(p)&&Ci(t,p,i[p])}function ys(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),An=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cs(t){return An.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Vn(){}var jr=null;function Ie(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Js=null,us=null;function ki(t){var i=Mn(t);if(i&&(t=i.stateNode)){var r=t[on]||null;e:switch(t=i.stateNode,i.type){case"input":if(Qs(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Wn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var l=r[i];if(l!==t&&l.form===t.form){var f=l[on]||null;if(!f)throw Error(a(90));Qs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)l=r[i],l.form===t.form&&Ys(l)}break e;case"textarea":Lr(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Ks(t,!!r.multiple,i,!1)}}}var Ji=!1;function Es(t,i,r){if(Ji)return t(i,r);Ji=!0;try{var l=t(i);return l}finally{if(Ji=!1,(Js!==null||us!==null)&&(ku(),Js&&(i=Js,t=us,us=Js=null,ki(i),t)))for(i=0;i<t.length;i++)ki(t[i])}}function mn(t,i){var r=t.stateNode;if(r===null)return null;var l=r[on]||null;if(l===null)return null;r=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=!1;if(Rn)try{var m={};Object.defineProperty(m,"passive",{get:function(){_i=!0}}),window.addEventListener("test",m,m),window.removeEventListener("test",m,m)}catch{_i=!1}var y=null,N=null,C=null;function F(){if(C)return C;var t,i=N,r=i.length,l,f="value"in y?y.value:y.textContent,p=f.length;for(t=0;t<r&&i[t]===f[t];t++);var T=r-t;for(l=1;l<=T&&i[r-l]===f[p-l];l++);return C=f.slice(t,1<l?1-l:void 0)}function W(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ce(){return!0}function De(){return!1}function Fe(t){function i(r,l,f,p,T){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(r=t[R],this[R]=r?r(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ce:De,this.isPropagationStopped=De,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ce)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ce)},persist:function(){},isPersistent:ce}),i}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nt=Fe(Ye),en=x({},Ye,{view:0,detail:0}),Va=Fe(en),Li,Zi,Zs,ea=x({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zs&&(Zs&&t.type==="mousemove"?(Li=t.screenX-Zs.screenX,Zi=t.screenY-Zs.screenY):Zi=Li=0,Zs=t),Li)},movementY:function(t){return"movementY"in t?t.movementY:Zi}}),Dr=Fe(ea),ta=x({},ea,{dataTransfer:0}),To=Fe(ta),bo=x({},en,{relatedTarget:0}),na=Fe(bo),Or=x({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),So=Fe(Or),qa=x({},Ye,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mr=Fe(qa),No=x({},Ye,{data:0}),ei=Fe(No),xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ao={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ao[t])?!!i[t]:!1}function ji(){return Ro}var Cn=x({},en,{key:function(t){if(t.key){var i=xo[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=W(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(t){return t.type==="keypress"?W(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Co=Fe(Cn),Io=x({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gi=Fe(Io),d=x({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),v=Fe(d),b=x({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Fe(b),J=x({},ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Fe(J),xe=x({},Ye,{newState:0,oldState:0}),We=Fe(xe),Kt=[9,13,27,32],Tt=Rn&&"CompositionEvent"in window,qt=null;Rn&&"documentMode"in document&&(qt=document.documentMode);var Q=Rn&&"TextEvent"in window&&!qt,he=Rn&&(!Tt||qt&&8<qt&&11>=qt),Re=" ",Me=!1;function Xe(t,i){switch(t){case"keyup":return Kt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var In=!1;function vs(t,i){switch(t){case"compositionend":return ht(i);case"keypress":return i.which!==32?null:(Me=!0,Re);case"textInput":return t=i.data,t===Re&&Me?null:t;default:return null}}function ds(t,i){if(In)return t==="compositionend"||!Tt&&Xe(t,i)?(t=F(),C=N=y=null,In=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return he&&i.locale!=="ko"?null:i.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ko(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Os[t.type]:i==="textarea"}function Di(t,i,r,l){Js?us?us.push(l):us=[l]:Js=l,i=Vu(i,"onChange"),0<i.length&&(r=new Nt("onChange","change",null,r,l),t.push({event:r,listeners:i}))}var Ur=null,Vl=null;function K1(t){Wy(t,0)}function Kc(t){var i=Un(t);if(Ys(i))return t}function __(t,i){if(t==="change")return i}var g_=!1;if(Rn){var df;if(Rn){var ff="oninput"in document;if(!ff){var y_=document.createElement("div");y_.setAttribute("oninput","return;"),ff=typeof y_.oninput=="function"}df=ff}else df=!1;g_=df&&(!document.documentMode||9<document.documentMode)}function E_(){Ur&&(Ur.detachEvent("onpropertychange",v_),Vl=Ur=null)}function v_(t){if(t.propertyName==="value"&&Kc(Vl)){var i=[];Di(i,Vl,t,Ie(t)),Es(K1,i)}}function W1(t,i,r){t==="focusin"?(E_(),Ur=i,Vl=r,Ur.attachEvent("onpropertychange",v_)):t==="focusout"&&E_()}function J1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kc(Vl)}function Z1(t,i){if(t==="click")return Kc(i)}function eS(t,i){if(t==="input"||t==="change")return Kc(i)}function tS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Ms=typeof Object.is=="function"?Object.is:tS;function ql(t,i){if(Ms(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),l=Object.keys(i);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!Qt.call(i,f)||!Ms(t[f],i[f]))return!1}return!0}function T_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b_(t,i){var r=T_(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=i&&l>=i)return{node:r,offset:i-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=T_(r)}}function S_(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?S_(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function N_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=gs(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=gs(t.document)}return i}function hf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var nS=Rn&&"documentMode"in document&&11>=document.documentMode,Lo=null,mf=null,Bl=null,pf=!1;function x_(t,i,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pf||Lo==null||Lo!==gs(l)||(l=Lo,"selectionStart"in l&&hf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Bl&&ql(Bl,l)||(Bl=l,l=Vu(mf,"onSelect"),0<l.length&&(i=new Nt("onSelect","select",null,i,r),t.push({event:i,listeners:l}),i.target=Lo)))}function Vr(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var jo={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},_f={},w_={};Rn&&(w_=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function qr(t){if(_f[t])return _f[t];if(!jo[t])return t;var i=jo[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in w_)return _f[t]=i[r];return t}var A_=qr("animationend"),R_=qr("animationiteration"),C_=qr("animationstart"),sS=qr("transitionrun"),iS=qr("transitionstart"),aS=qr("transitioncancel"),I_=qr("transitionend"),k_=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function yi(t,i){k_.set(t,i),os(i,[t])}var Wc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ti=[],Do=0,yf=0;function Jc(){for(var t=Do,i=yf=Do=0;i<t;){var r=ti[i];ti[i++]=null;var l=ti[i];ti[i++]=null;var f=ti[i];ti[i++]=null;var p=ti[i];if(ti[i++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&L_(r,f,p)}}function Zc(t,i,r,l){ti[Do++]=t,ti[Do++]=i,ti[Do++]=r,ti[Do++]=l,yf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ef(t,i,r,l){return Zc(t,i,r,l),eu(t)}function Br(t,i){return Zc(t,null,null,i),eu(t)}function L_(t,i,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&i!==null&&(f=31-zt(r),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=r|536870912),p):null}function eu(t){if(50<lc)throw lc=0,Rh=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Oo={};function rS(t,i,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(t,i,r,l){return new rS(t,i,r,l)}function vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sa(t,i){var r=t.alternate;return r===null?(r=Us(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function j_(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function tu(t,i,r,l,f,p){var T=0;if(l=t,typeof t=="function")vf(t)&&(T=1);else if(typeof t=="string")T=dN(t,r,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Us(31,r,i,f),t.elementType=j,t.lanes=p,t;case U:return Pr(r.children,f,p,i);case q:T=8,f|=24;break;case z:return t=Us(12,r,i,f|2),t.elementType=z,t.lanes=p,t;case Ee:return t=Us(13,r,i,f),t.elementType=Ee,t.lanes=p,t;case ge:return t=Us(19,r,i,f),t.elementType=ge,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:T=10;break e;case H:T=9;break e;case ie:T=11;break e;case D:T=14;break e;case A:T=16,l=null;break e}T=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=Us(T,r,i,f),i.elementType=t,i.type=l,i.lanes=p,i}function Pr(t,i,r,l){return t=Us(7,t,l,i),t.lanes=r,t}function Tf(t,i,r){return t=Us(6,t,null,i),t.lanes=r,t}function D_(t){var i=Us(18,null,null,0);return i.stateNode=t,i}function bf(t,i,r){return i=Us(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var O_=new WeakMap;function ni(t,i){if(typeof t=="object"&&t!==null){var r=O_.get(t);return r!==void 0?r:(i={value:t,source:i,stack:ka(i)},O_.set(t,i),i)}return{value:t,source:i,stack:ka(i)}}var Mo=[],Uo=0,nu=null,Pl=0,si=[],ii=0,Ba=null,Oi=1,Mi="";function ia(t,i){Mo[Uo++]=Pl,Mo[Uo++]=nu,nu=t,Pl=i}function M_(t,i,r){si[ii++]=Oi,si[ii++]=Mi,si[ii++]=Ba,Ba=t;var l=Oi;t=Mi;var f=32-zt(l)-1;l&=~(1<<f),r+=1;var p=32-zt(i)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,Oi=1<<32-zt(i)+f|r<<f|l,Mi=p+t}else Oi=1<<p|r<<f|l,Mi=t}function Sf(t){t.return!==null&&(ia(t,1),M_(t,1,0))}function Nf(t){for(;t===nu;)nu=Mo[--Uo],Mo[Uo]=null,Pl=Mo[--Uo],Mo[Uo]=null;for(;t===Ba;)Ba=si[--ii],si[ii]=null,Mi=si[--ii],si[ii]=null,Oi=si[--ii],si[ii]=null}function U_(t,i){si[ii++]=Oi,si[ii++]=Mi,si[ii++]=Ba,Oi=i.id,Mi=i.overflow,Ba=t}var qn=null,Xt=null,Et=!1,Pa=null,ai=!1,xf=Error(a(519));function Fa(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fl(ni(i,t)),xf}function V_(t){var i=t.stateNode,r=t.type,l=t.memoizedProps;switch(i[ft]=t,i[on]=l,r){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(r=0;r<uc.length;r++)ut(uc[r],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":ut("invalid",i),Ir(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ut("invalid",i);break;case"textarea":ut("invalid",i),Ws(i,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||l.suppressHydrationWarning===!0||tE(i.textContent,r)?(l.popover!=null&&(ut("beforetoggle",i),ut("toggle",i)),l.onScroll!=null&&ut("scroll",i),l.onScrollEnd!=null&&ut("scrollend",i),l.onClick!=null&&(i.onclick=Vn),i=!0):i=!1,i||Fa(t,!0)}function q_(t){for(qn=t.return;qn;)switch(qn.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:qn=qn.return}}function Vo(t){if(t!==qn)return!1;if(!Et)return q_(t),Et=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Gh(t.type,t.memoizedProps)),r=!r),r&&Xt&&Fa(t),q_(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Xt=uE(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Xt=uE(t)}else i===27?(i=Xt,nr(t.type)?(t=Yh,Yh=null,Xt=t):Xt=i):Xt=qn?oi(t.stateNode.nextSibling):null;return!0}function Fr(){Xt=qn=null,Et=!1}function wf(){var t=Pa;return t!==null&&(Ns===null?Ns=t:Ns.push.apply(Ns,t),Pa=null),t}function Fl(t){Pa===null?Pa=[t]:Pa.push(t)}var Af=X(null),Gr=null,aa=null;function Ga(t,i,r){le(Af,i._currentValue),i._currentValue=r}function ra(t){t._currentValue=Af.current,de(Af)}function Rf(t,i,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===r)break;t=t.return}}function Cf(t,i,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var R=p;p=f;for(var P=0;P<i.length;P++)if(R.context===i[P]){p.lanes|=r,R=p.alternate,R!==null&&(R.lanes|=r),Rf(p.return,r,t),l||(T=null);break e}p=R.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(a(341));T.lanes|=r,p=T.alternate,p!==null&&(p.lanes|=r),Rf(T,r,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function qo(t,i,r,l){t=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var R=f.type;Ms(f.pendingProps.value,T.value)||(t!==null?t.push(R):t=[R])}}else if(f===Pe.current){if(T=f.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(pc):t=[pc])}f=f.return}t!==null&&Cf(i,t,r,l),i.flags|=262144}function su(t){for(t=t.firstContext;t!==null;){if(!Ms(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hr(t){Gr=t,aa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bn(t){return B_(Gr,t)}function iu(t,i){return Gr===null&&Hr(t),B_(t,i)}function B_(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},aa===null){if(t===null)throw Error(a(308));aa=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else aa=aa.next=i;return r}var oS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},lS=s.unstable_scheduleCallback,cS=s.unstable_NormalPriority,pn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new oS,data:new Map,refCount:0}}function Gl(t){t.refCount--,t.refCount===0&&lS(cS,function(){t.controller.abort()})}var Hl=null,kf=0,Bo=0,Po=null;function uS(t,i){if(Hl===null){var r=Hl=[];kf=0,Bo=Dh(),Po={status:"pending",value:void 0,then:function(l){r.push(l)}}}return kf++,i.then(P_,P_),i}function P_(){if(--kf===0&&Hl!==null){Po!==null&&(Po.status="fulfilled");var t=Hl;Hl=null,Bo=0,Po=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function dS(t,i){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var F_=se.S;se.S=function(t,i){xy=Dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&uS(t,i),F_!==null&&F_(t,i)};var zr=X(null);function Lf(){var t=zr.current;return t!==null?t:Bt.pooledCache}function au(t,i){i===null?le(zr,zr.current):le(zr,i.pool)}function G_(){var t=Lf();return t===null?null:{parent:pn._currentValue,pool:t}}var Fo=Error(a(460)),jf=Error(a(474)),ru=Error(a(542)),ou={then:function(){}};function H_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function z_(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(Vn,Vn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$_(t),t;default:if(typeof i.status=="string")i.then(Vn,Vn);else{if(t=Bt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$_(t),t}throw $r=i,Fo}}function Xr(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?($r=r,Fo):r}}var $r=null;function X_(){if($r===null)throw Error(a(459));var t=$r;return $r=null,t}function $_(t){if(t===Fo||t===ru)throw Error(a(483))}var Go=null,zl=0;function lu(t){var i=zl;return zl+=1,Go===null&&(Go=[]),z_(Go,t,i)}function Xl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function cu(t,i){throw i.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Y_(t){function i(Y,$){if(t){var Z=Y.deletions;Z===null?(Y.deletions=[$],Y.flags|=16):Z.push($)}}function r(Y,$){if(!t)return null;for(;$!==null;)i(Y,$),$=$.sibling;return null}function l(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function f(Y,$){return Y=sa(Y,$),Y.index=0,Y.sibling=null,Y}function p(Y,$,Z){return Y.index=Z,t?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<$?(Y.flags|=67108866,$):Z):(Y.flags|=67108866,$)):(Y.flags|=1048576,$)}function T(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function R(Y,$,Z,fe){return $===null||$.tag!==6?($=Tf(Z,Y.mode,fe),$.return=Y,$):($=f($,Z),$.return=Y,$)}function P(Y,$,Z,fe){var Ge=Z.type;return Ge===U?ue(Y,$,Z.props.children,fe,Z.key):$!==null&&($.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===A&&Xr(Ge)===$.type)?($=f($,Z.props),Xl($,Z),$.return=Y,$):($=tu(Z.type,Z.key,Z.props,null,Y.mode,fe),Xl($,Z),$.return=Y,$)}function ee(Y,$,Z,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=bf(Z,Y.mode,fe),$.return=Y,$):($=f($,Z.children||[]),$.return=Y,$)}function ue(Y,$,Z,fe,Ge){return $===null||$.tag!==7?($=Pr(Z,Y.mode,fe,Ge),$.return=Y,$):($=f($,Z),$.return=Y,$)}function me(Y,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Tf(""+$,Y.mode,Z),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case B:return Z=tu($.type,$.key,$.props,null,Y.mode,Z),Xl(Z,$),Z.return=Y,Z;case G:return $=bf($,Y.mode,Z),$.return=Y,$;case A:return $=Xr($),me(Y,$,Z)}if(Je($)||O($))return $=Pr($,Y.mode,Z,null),$.return=Y,$;if(typeof $.then=="function")return me(Y,lu($),Z);if($.$$typeof===K)return me(Y,iu(Y,$),Z);cu(Y,$)}return null}function ne(Y,$,Z,fe){var Ge=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ge!==null?null:R(Y,$,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:return Z.key===Ge?P(Y,$,Z,fe):null;case G:return Z.key===Ge?ee(Y,$,Z,fe):null;case A:return Z=Xr(Z),ne(Y,$,Z,fe)}if(Je(Z)||O(Z))return Ge!==null?null:ue(Y,$,Z,fe,null);if(typeof Z.then=="function")return ne(Y,$,lu(Z),fe);if(Z.$$typeof===K)return ne(Y,$,iu(Y,Z),fe);cu(Y,Z)}return null}function oe(Y,$,Z,fe,Ge){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(Z)||null,R($,Y,""+fe,Ge);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return Y=Y.get(fe.key===null?Z:fe.key)||null,P($,Y,fe,Ge);case G:return Y=Y.get(fe.key===null?Z:fe.key)||null,ee($,Y,fe,Ge);case A:return fe=Xr(fe),oe(Y,$,Z,fe,Ge)}if(Je(fe)||O(fe))return Y=Y.get(Z)||null,ue($,Y,fe,Ge,null);if(typeof fe.then=="function")return oe(Y,$,Z,lu(fe),Ge);if(fe.$$typeof===K)return oe(Y,$,Z,iu($,fe),Ge);cu($,fe)}return null}function Oe(Y,$,Z,fe){for(var Ge=null,At=null,Ue=$,lt=$=0,pt=null;Ue!==null&&lt<Z.length;lt++){Ue.index>lt?(pt=Ue,Ue=null):pt=Ue.sibling;var Rt=ne(Y,Ue,Z[lt],fe);if(Rt===null){Ue===null&&(Ue=pt);break}t&&Ue&&Rt.alternate===null&&i(Y,Ue),$=p(Rt,$,lt),At===null?Ge=Rt:At.sibling=Rt,At=Rt,Ue=pt}if(lt===Z.length)return r(Y,Ue),Et&&ia(Y,lt),Ge;if(Ue===null){for(;lt<Z.length;lt++)Ue=me(Y,Z[lt],fe),Ue!==null&&($=p(Ue,$,lt),At===null?Ge=Ue:At.sibling=Ue,At=Ue);return Et&&ia(Y,lt),Ge}for(Ue=l(Ue);lt<Z.length;lt++)pt=oe(Ue,Y,lt,Z[lt],fe),pt!==null&&(t&&pt.alternate!==null&&Ue.delete(pt.key===null?lt:pt.key),$=p(pt,$,lt),At===null?Ge=pt:At.sibling=pt,At=pt);return t&&Ue.forEach(function(or){return i(Y,or)}),Et&&ia(Y,lt),Ge}function $e(Y,$,Z,fe){if(Z==null)throw Error(a(151));for(var Ge=null,At=null,Ue=$,lt=$=0,pt=null,Rt=Z.next();Ue!==null&&!Rt.done;lt++,Rt=Z.next()){Ue.index>lt?(pt=Ue,Ue=null):pt=Ue.sibling;var or=ne(Y,Ue,Rt.value,fe);if(or===null){Ue===null&&(Ue=pt);break}t&&Ue&&or.alternate===null&&i(Y,Ue),$=p(or,$,lt),At===null?Ge=or:At.sibling=or,At=or,Ue=pt}if(Rt.done)return r(Y,Ue),Et&&ia(Y,lt),Ge;if(Ue===null){for(;!Rt.done;lt++,Rt=Z.next())Rt=me(Y,Rt.value,fe),Rt!==null&&($=p(Rt,$,lt),At===null?Ge=Rt:At.sibling=Rt,At=Rt);return Et&&ia(Y,lt),Ge}for(Ue=l(Ue);!Rt.done;lt++,Rt=Z.next())Rt=oe(Ue,Y,lt,Rt.value,fe),Rt!==null&&(t&&Rt.alternate!==null&&Ue.delete(Rt.key===null?lt:Rt.key),$=p(Rt,$,lt),At===null?Ge=Rt:At.sibling=Rt,At=Rt);return t&&Ue.forEach(function(bN){return i(Y,bN)}),Et&&ia(Y,lt),Ge}function Vt(Y,$,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===U&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:e:{for(var Ge=Z.key;$!==null;){if($.key===Ge){if(Ge=Z.type,Ge===U){if($.tag===7){r(Y,$.sibling),fe=f($,Z.props.children),fe.return=Y,Y=fe;break e}}else if($.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===A&&Xr(Ge)===$.type){r(Y,$.sibling),fe=f($,Z.props),Xl(fe,Z),fe.return=Y,Y=fe;break e}r(Y,$);break}else i(Y,$);$=$.sibling}Z.type===U?(fe=Pr(Z.props.children,Y.mode,fe,Z.key),fe.return=Y,Y=fe):(fe=tu(Z.type,Z.key,Z.props,null,Y.mode,fe),Xl(fe,Z),fe.return=Y,Y=fe)}return T(Y);case G:e:{for(Ge=Z.key;$!==null;){if($.key===Ge)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){r(Y,$.sibling),fe=f($,Z.children||[]),fe.return=Y,Y=fe;break e}else{r(Y,$);break}else i(Y,$);$=$.sibling}fe=bf(Z,Y.mode,fe),fe.return=Y,Y=fe}return T(Y);case A:return Z=Xr(Z),Vt(Y,$,Z,fe)}if(Je(Z))return Oe(Y,$,Z,fe);if(O(Z)){if(Ge=O(Z),typeof Ge!="function")throw Error(a(150));return Z=Ge.call(Z),$e(Y,$,Z,fe)}if(typeof Z.then=="function")return Vt(Y,$,lu(Z),fe);if(Z.$$typeof===K)return Vt(Y,$,iu(Y,Z),fe);cu(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(r(Y,$.sibling),fe=f($,Z),fe.return=Y,Y=fe):(r(Y,$),fe=Tf(Z,Y.mode,fe),fe.return=Y,Y=fe),T(Y)):r(Y,$)}return function(Y,$,Z,fe){try{zl=0;var Ge=Vt(Y,$,Z,fe);return Go=null,Ge}catch(Ue){if(Ue===Fo||Ue===ru)throw Ue;var At=Us(29,Ue,null,Y.mode);return At.lanes=fe,At.return=Y,At}}}var Yr=Y_(!0),Q_=Y_(!1),Ha=!1;function Df(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function za(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(t,i,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ct&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=eu(t),L_(t,null,r),i}return Zc(t,l,i,r),eu(t)}function $l(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,La(t,r)}}function Mf(t,i){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Uf=!1;function Yl(){if(Uf){var t=Po;if(t!==null)throw t}}function Ql(t,i,r,l){Uf=!1;var f=t.updateQueue;Ha=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var P=R,ee=P.next;P.next=null,T===null?p=ee:T.next=ee,T=P;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,R=ue.lastBaseUpdate,R!==T&&(R===null?ue.firstBaseUpdate=ee:R.next=ee,ue.lastBaseUpdate=P))}if(p!==null){var me=f.baseState;T=0,ue=ee=P=null,R=p;do{var ne=R.lane&-536870913,oe=ne!==R.lane;if(oe?(mt&ne)===ne:(l&ne)===ne){ne!==0&&ne===Bo&&(Uf=!0),ue!==null&&(ue=ue.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Oe=t,$e=R;ne=i;var Vt=r;switch($e.tag){case 1:if(Oe=$e.payload,typeof Oe=="function"){me=Oe.call(Vt,me,ne);break e}me=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=$e.payload,ne=typeof Oe=="function"?Oe.call(Vt,me,ne):Oe,ne==null)break e;me=x({},me,ne);break e;case 2:Ha=!0}}ne=R.callback,ne!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ue===null?(ee=ue=oe,P=me):ue=ue.next=oe,T|=ne;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);ue===null&&(P=me),f.baseState=P,f.firstBaseUpdate=ee,f.lastBaseUpdate=ue,p===null&&(f.shared.lanes=0),Wa|=T,t.lanes=T,t.memoizedState=me}}function K_(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function W_(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)K_(r[t],i)}var Ho=X(null),uu=X(0);function J_(t,i){t=pa,le(uu,t),le(Ho,i),pa=t|i.baseLanes}function Vf(){le(uu,pa),le(Ho,Ho.current)}function qf(){pa=uu.current,de(Ho),de(uu)}var Vs=X(null),ri=null;function $a(t){var i=t.alternate;le(cn,cn.current&1),le(Vs,t),ri===null&&(i===null||Ho.current!==null||i.memoizedState!==null)&&(ri=t)}function Bf(t){le(cn,cn.current),le(Vs,t),ri===null&&(ri=t)}function Z_(t){t.tag===22?(le(cn,cn.current),le(Vs,t),ri===null&&(ri=t)):Ya()}function Ya(){le(cn,cn.current),le(Vs,Vs.current)}function qs(t){de(Vs),ri===t&&(ri=null),de(cn)}var cn=X(0);function du(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Xh(r)||$h(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oa=0,ot=null,Mt=null,_n=null,fu=!1,zo=!1,Qr=!1,hu=0,Kl=0,Xo=null,fS=0;function sn(){throw Error(a(321))}function Pf(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Ms(t[r],i[r]))return!1;return!0}function Ff(t,i,r,l,f,p){return oa=p,ot=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,se.H=t===null||t.memoizedState===null?Mg:sh,Qr=!1,p=r(l,f),Qr=!1,zo&&(p=tg(i,r,l,f)),eg(t),p}function eg(t){se.H=Zl;var i=Mt!==null&&Mt.next!==null;if(oa=0,_n=Mt=ot=null,fu=!1,Kl=0,Xo=null,i)throw Error(a(300));t===null||gn||(t=t.dependencies,t!==null&&su(t)&&(gn=!0))}function tg(t,i,r,l){ot=t;var f=0;do{if(zo&&(Xo=null),Kl=0,zo=!1,25<=f)throw Error(a(301));if(f+=1,_n=Mt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}se.H=Ug,p=i(r,l)}while(zo);return p}function hS(){var t=se.H,i=t.useState()[0];return i=typeof i.then=="function"?Wl(i):i,t=t.useState()[0],(Mt!==null?Mt.memoizedState:null)!==t&&(ot.flags|=1024),i}function Gf(){var t=hu!==0;return hu=0,t}function Hf(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function zf(t){if(fu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}fu=!1}oa=0,_n=Mt=ot=null,zo=!1,Kl=hu=0,Xo=null}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?ot.memoizedState=_n=t:_n=_n.next=t,_n}function un(){if(Mt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var i=_n===null?ot.memoizedState:_n.next;if(i!==null)_n=i,Mt=t;else{if(t===null)throw ot.alternate===null?Error(a(467)):Error(a(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},_n===null?ot.memoizedState=_n=t:_n=_n.next=t}return _n}function mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(t){var i=Kl;return Kl+=1,Xo===null&&(Xo=[]),t=z_(Xo,t,i),i=ot,(_n===null?i.memoizedState:_n.next)===null&&(i=i.alternate,se.H=i===null||i.memoizedState===null?Mg:sh),t}function pu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wl(t);if(t.$$typeof===K)return Bn(t)}throw Error(a(438,String(t)))}function Xf(t){var i=null,r=ot.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var l=ot.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=mu(),ot.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),l=0;l<t;l++)r[l]=V;return i.index++,r}function la(t,i){return typeof i=="function"?i(t):i}function _u(t){var i=un();return $f(i,Mt,t)}function $f(t,i,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{i=f.next;var R=T=null,P=null,ee=i,ue=!1;do{var me=ee.lane&-536870913;if(me!==ee.lane?(mt&me)===me:(oa&me)===me){var ne=ee.revertLane;if(ne===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),me===Bo&&(ue=!0);else if((oa&ne)===ne){ee=ee.next,ne===Bo&&(ue=!0);continue}else me={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},P===null?(R=P=me,T=p):P=P.next=me,ot.lanes|=ne,Wa|=ne;me=ee.action,Qr&&r(p,me),p=ee.hasEagerState?ee.eagerState:r(p,me)}else ne={lane:me,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},P===null?(R=P=ne,T=p):P=P.next=ne,ot.lanes|=me,Wa|=me;ee=ee.next}while(ee!==null&&ee!==i);if(P===null?T=p:P.next=R,!Ms(p,t.memoizedState)&&(gn=!0,ue&&(r=Po,r!==null)))throw r;t.memoizedState=p,t.baseState=T,t.baseQueue=P,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Yf(t){var i=un(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var T=f=f.next;do p=t(p,T.action),T=T.next;while(T!==f);Ms(p,i.memoizedState)||(gn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,l]}function ng(t,i,r){var l=ot,f=un(),p=Et;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var T=!Ms((Mt||f).memoizedState,r);if(T&&(f.memoizedState=r,gn=!0),f=f.queue,Wf(ag.bind(null,l,f,t),[t]),f.getSnapshot!==i||T||_n!==null&&_n.memoizedState.tag&1){if(l.flags|=2048,$o(9,{destroy:void 0},ig.bind(null,l,f,r,i),null),Bt===null)throw Error(a(349));p||(oa&127)!==0||sg(l,i,r)}return r}function sg(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=ot.updateQueue,i===null?(i=mu(),ot.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function ig(t,i,r,l){i.value=r,i.getSnapshot=l,rg(i)&&og(t)}function ag(t,i,r){return r(function(){rg(i)&&og(t)})}function rg(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Ms(t,r)}catch{return!0}}function og(t){var i=Br(t,2);i!==null&&xs(i,t,2)}function Qf(t){var i=fs();if(typeof t=="function"){var r=t;if(t=r(),Qr){is(!0);try{r()}finally{is(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},i}function lg(t,i,r,l){return t.baseState=r,$f(t,Mt,typeof l=="function"?l:la)}function mS(t,i,r,l,f){if(Eu(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};se.T!==null?r(!0):p.isTransition=!1,l(p),r=i.pending,r===null?(p.next=i.pending=p,cg(i,p)):(p.next=r.next,i.pending=r.next=p)}}function cg(t,i){var r=i.action,l=i.payload,f=t.state;if(i.isTransition){var p=se.T,T={};se.T=T;try{var R=r(f,l),P=se.S;P!==null&&P(T,R),ug(t,i,R)}catch(ee){Kf(t,i,ee)}finally{p!==null&&T.types!==null&&(p.types=T.types),se.T=p}}else try{p=r(f,l),ug(t,i,p)}catch(ee){Kf(t,i,ee)}}function ug(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){dg(t,i,l)},function(l){return Kf(t,i,l)}):dg(t,i,r)}function dg(t,i,r){i.status="fulfilled",i.value=r,fg(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,cg(t,r)))}function Kf(t,i,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=r,fg(i),i=i.next;while(i!==l)}t.action=null}function fg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function hg(t,i){return i}function mg(t,i){if(Et){var r=Bt.formState;if(r!==null){e:{var l=ot;if(Et){if(Xt){t:{for(var f=Xt,p=ai;f.nodeType!==8;){if(!p){f=null;break t}if(f=oi(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Xt=oi(f.nextSibling),l=f.data==="F!";break e}}Fa(l)}l=!1}l&&(i=r[0])}}return r=fs(),r.memoizedState=r.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hg,lastRenderedState:i},r.queue=l,r=jg.bind(null,ot,l),l.dispatch=r,l=Qf(!1),p=nh.bind(null,ot,!1,l.queue),l=fs(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,r=mS.bind(null,ot,f,p,r),f.dispatch=r,l.memoizedState=t,[i,r,!1]}function pg(t){var i=un();return _g(i,Mt,t)}function _g(t,i,r){if(i=$f(t,i,hg)[0],t=_u(la)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Wl(i)}catch(T){throw T===Fo?ru:T}else l=i;i=un();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&(ot.flags|=2048,$o(9,{destroy:void 0},pS.bind(null,f,r),null)),[l,p,t]}function pS(t,i){t.action=i}function gg(t){var i=un(),r=Mt;if(r!==null)return _g(i,r,t);un(),i=i.memoizedState,r=un();var l=r.queue.dispatch;return r.memoizedState=t,[i,l,!1]}function $o(t,i,r,l){return t={tag:t,create:r,deps:l,inst:i,next:null},i=ot.updateQueue,i===null&&(i=mu(),ot.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,i.lastEffect=t),t}function yg(){return un().memoizedState}function gu(t,i,r,l){var f=fs();ot.flags|=t,f.memoizedState=$o(1|i,{destroy:void 0},r,l===void 0?null:l)}function yu(t,i,r,l){var f=un();l=l===void 0?null:l;var p=f.memoizedState.inst;Mt!==null&&l!==null&&Pf(l,Mt.memoizedState.deps)?f.memoizedState=$o(i,p,r,l):(ot.flags|=t,f.memoizedState=$o(1|i,p,r,l))}function Eg(t,i){gu(8390656,8,t,i)}function Wf(t,i){yu(2048,8,t,i)}function _S(t){ot.flags|=4;var i=ot.updateQueue;if(i===null)i=mu(),ot.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function vg(t){var i=un().memoizedState;return _S({ref:i,nextImpl:t}),function(){if((Ct&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Tg(t,i){return yu(4,2,t,i)}function bg(t,i){return yu(4,4,t,i)}function Sg(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ng(t,i,r){r=r!=null?r.concat([t]):null,yu(4,4,Sg.bind(null,i,t),r)}function Jf(){}function xg(t,i){var r=un();i=i===void 0?null:i;var l=r.memoizedState;return i!==null&&Pf(i,l[1])?l[0]:(r.memoizedState=[t,i],t)}function wg(t,i){var r=un();i=i===void 0?null:i;var l=r.memoizedState;if(i!==null&&Pf(i,l[1]))return l[0];if(l=t(),Qr){is(!0);try{t()}finally{is(!1)}}return r.memoizedState=[l,i],l}function Zf(t,i,r){return r===void 0||(oa&1073741824)!==0&&(mt&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=Ay(),ot.lanes|=t,Wa|=t,r)}function Ag(t,i,r,l){return Ms(r,i)?r:Ho.current!==null?(t=Zf(t,r,l),Ms(t,i)||(gn=!0),t):(oa&42)===0||(oa&1073741824)!==0&&(mt&261930)===0?(gn=!0,t.memoizedState=r):(t=Ay(),ot.lanes|=t,Wa|=t,i)}function Rg(t,i,r,l,f){var p=Te.p;Te.p=p!==0&&8>p?p:8;var T=se.T,R={};se.T=R,nh(t,!1,i,r);try{var P=f(),ee=se.S;if(ee!==null&&ee(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ue=dS(P,l);Jl(t,i,ue,Fs(t))}else Jl(t,i,l,Fs(t))}catch(me){Jl(t,i,{then:function(){},status:"rejected",reason:me},Fs())}finally{Te.p=p,T!==null&&R.types!==null&&(T.types=R.types),se.T=T}}function gS(){}function eh(t,i,r,l){if(t.tag!==5)throw Error(a(476));var f=Cg(t).queue;Rg(t,f,i,Ce,r===null?gS:function(){return Ig(t),r(l)})}function Cg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:Ce},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ig(t){var i=Cg(t);i.next===null&&(i=t.alternate.memoizedState),Jl(t,i.next.queue,{},Fs())}function th(){return Bn(pc)}function kg(){return un().memoizedState}function Lg(){return un().memoizedState}function yS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=Fs();t=za(r);var l=Xa(i,t,r);l!==null&&(xs(l,i,r),$l(l,i,r)),i={cache:If()},t.payload=i;return}i=i.return}}function ES(t,i,r){var l=Fs();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Eu(t)?Dg(i,r):(r=Ef(t,i,r,l),r!==null&&(xs(r,t,l),Og(r,i,l)))}function jg(t,i,r){var l=Fs();Jl(t,i,r,l)}function Jl(t,i,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))Dg(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,R=p(T,r);if(f.hasEagerState=!0,f.eagerState=R,Ms(R,T))return Zc(t,i,f,0),Bt===null&&Jc(),!1}catch{}if(r=Ef(t,i,f,l),r!==null)return xs(r,t,l),Og(r,i,l),!0}return!1}function nh(t,i,r,l){if(l={lane:2,revertLane:Dh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(i)throw Error(a(479))}else i=Ef(t,r,l,2),i!==null&&xs(i,t,2)}function Eu(t){var i=t.alternate;return t===ot||i!==null&&i===ot}function Dg(t,i){zo=fu=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function Og(t,i,r){if((r&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,La(t,r)}}var Zl={readContext:Bn,use:pu,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};Zl.useEffectEvent=sn;var Mg={readContext:Bn,use:pu,useCallback:function(t,i){return fs().memoizedState=[t,i===void 0?null:i],t},useContext:Bn,useEffect:Eg,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,gu(4194308,4,Sg.bind(null,i,t),r)},useLayoutEffect:function(t,i){return gu(4194308,4,t,i)},useInsertionEffect:function(t,i){gu(4,2,t,i)},useMemo:function(t,i){var r=fs();i=i===void 0?null:i;var l=t();if(Qr){is(!0);try{t()}finally{is(!1)}}return r.memoizedState=[l,i],l},useReducer:function(t,i,r){var l=fs();if(r!==void 0){var f=r(i);if(Qr){is(!0);try{r(i)}finally{is(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=ES.bind(null,ot,t),[l.memoizedState,t]},useRef:function(t){var i=fs();return t={current:t},i.memoizedState=t},useState:function(t){t=Qf(t);var i=t.queue,r=jg.bind(null,ot,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:Jf,useDeferredValue:function(t,i){var r=fs();return Zf(r,t,i)},useTransition:function(){var t=Qf(!1);return t=Rg.bind(null,ot,t.queue,!0,!1),fs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var l=ot,f=fs();if(Et){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),Bt===null)throw Error(a(349));(mt&127)!==0||sg(l,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,Eg(ag.bind(null,l,p,t),[t]),l.flags|=2048,$o(9,{destroy:void 0},ig.bind(null,l,p,r,i),null),r},useId:function(){var t=fs(),i=Bt.identifierPrefix;if(Et){var r=Mi,l=Oi;r=(l&~(1<<32-zt(l)-1)).toString(32)+r,i="_"+i+"R_"+r,r=hu++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=fS++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:th,useFormState:mg,useActionState:mg,useOptimistic:function(t){var i=fs();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=nh.bind(null,ot,!0,r),r.dispatch=i,[t,i]},useMemoCache:Xf,useCacheRefresh:function(){return fs().memoizedState=yS.bind(null,ot)},useEffectEvent:function(t){var i=fs(),r={impl:t};return i.memoizedState=r,function(){if((Ct&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},sh={readContext:Bn,use:pu,useCallback:xg,useContext:Bn,useEffect:Wf,useImperativeHandle:Ng,useInsertionEffect:Tg,useLayoutEffect:bg,useMemo:wg,useReducer:_u,useRef:yg,useState:function(){return _u(la)},useDebugValue:Jf,useDeferredValue:function(t,i){var r=un();return Ag(r,Mt.memoizedState,t,i)},useTransition:function(){var t=_u(la)[0],i=un().memoizedState;return[typeof t=="boolean"?t:Wl(t),i]},useSyncExternalStore:ng,useId:kg,useHostTransitionStatus:th,useFormState:pg,useActionState:pg,useOptimistic:function(t,i){var r=un();return lg(r,Mt,t,i)},useMemoCache:Xf,useCacheRefresh:Lg};sh.useEffectEvent=vg;var Ug={readContext:Bn,use:pu,useCallback:xg,useContext:Bn,useEffect:Wf,useImperativeHandle:Ng,useInsertionEffect:Tg,useLayoutEffect:bg,useMemo:wg,useReducer:Yf,useRef:yg,useState:function(){return Yf(la)},useDebugValue:Jf,useDeferredValue:function(t,i){var r=un();return Mt===null?Zf(r,t,i):Ag(r,Mt.memoizedState,t,i)},useTransition:function(){var t=Yf(la)[0],i=un().memoizedState;return[typeof t=="boolean"?t:Wl(t),i]},useSyncExternalStore:ng,useId:kg,useHostTransitionStatus:th,useFormState:gg,useActionState:gg,useOptimistic:function(t,i){var r=un();return Mt!==null?lg(r,Mt,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Xf,useCacheRefresh:Lg};Ug.useEffectEvent=vg;function ih(t,i,r,l){i=t.memoizedState,r=r(l,i),r=r==null?i:x({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ah={enqueueSetState:function(t,i,r){t=t._reactInternals;var l=Fs(),f=za(l);f.payload=i,r!=null&&(f.callback=r),i=Xa(t,f,l),i!==null&&(xs(i,t,l),$l(i,t,l))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var l=Fs(),f=za(l);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=Xa(t,f,l),i!==null&&(xs(i,t,l),$l(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=Fs(),l=za(r);l.tag=2,i!=null&&(l.callback=i),i=Xa(t,l,r),i!==null&&(xs(i,t,r),$l(i,t,r))}};function Vg(t,i,r,l,f,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,T):i.prototype&&i.prototype.isPureReactComponent?!ql(r,l)||!ql(f,p):!0}function qg(t,i,r,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,l),i.state!==t&&ah.enqueueReplaceState(i,i.state,null)}function Kr(t,i){var r=i;if("ref"in i){r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}if(t=t.defaultProps){r===i&&(r=x({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function Bg(t){Wc(t)}function Pg(t){console.error(t)}function Fg(t){Wc(t)}function vu(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Gg(t,i,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function rh(t,i,r){return r=za(r),r.tag=3,r.payload={element:null},r.callback=function(){vu(t,i)},r}function Hg(t){return t=za(t),t.tag=3,t}function zg(t,i,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Gg(i,r,l)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Gg(i,r,l),typeof f!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})})}function vS(t,i,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=r.alternate,i!==null&&qo(i,r,f,!0),r=Vs.current,r!==null){switch(r.tag){case 31:case 13:return ri===null?Lu():r.alternate===null&&an===0&&(an=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===ou?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([l]):i.add(l),kh(t,l,f)),!1;case 22:return r.flags|=65536,l===ou?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([l]):r.add(l)),kh(t,l,f)),!1}throw Error(a(435,r.tag))}return kh(t,l,f),Lu(),!1}if(Et)return i=Vs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==xf&&(t=Error(a(422),{cause:l}),Fl(ni(t,r)))):(l!==xf&&(i=Error(a(423),{cause:l}),Fl(ni(i,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ni(l,r),f=rh(t.stateNode,l,f),Mf(t,f),an!==4&&(an=2)),!1;var p=Error(a(520),{cause:l});if(p=ni(p,r),oc===null?oc=[p]:oc.push(p),an!==4&&(an=2),i===null)return!0;l=ni(l,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=rh(r.stateNode,l,t),Mf(r,t),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Hg(f),zg(f,t,r,l),Mf(r,f),!1}r=r.return}while(r!==null);return!1}var oh=Error(a(461)),gn=!1;function Pn(t,i,r,l){i.child=t===null?Q_(i,null,r,l):Yr(i,t.child,r,l)}function Xg(t,i,r,l,f){r=r.render;var p=i.ref;if("ref"in l){var T={};for(var R in l)R!=="ref"&&(T[R]=l[R])}else T=l;return Hr(i),l=Ff(t,i,r,T,p,f),R=Gf(),t!==null&&!gn?(Hf(t,i,f),ca(t,i,f)):(Et&&R&&Sf(i),i.flags|=1,Pn(t,i,l,f),i.child)}function $g(t,i,r,l,f){if(t===null){var p=r.type;return typeof p=="function"&&!vf(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,Yg(t,i,p,l,f)):(t=tu(r.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!ph(t,f)){var T=p.memoizedProps;if(r=r.compare,r=r!==null?r:ql,r(T,l)&&t.ref===i.ref)return ca(t,i,f)}return i.flags|=1,t=sa(p,l),t.ref=i.ref,t.return=i,i.child=t}function Yg(t,i,r,l,f){if(t!==null){var p=t.memoizedProps;if(ql(p,l)&&t.ref===i.ref)if(gn=!1,i.pendingProps=l=p,ph(t,f))(t.flags&131072)!==0&&(gn=!0);else return i.lanes=t.lanes,ca(t,i,f)}return lh(t,i,r,l,f)}function Qg(t,i,r,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,i.child=null;return Kg(t,i,p,r,l)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&au(i,p!==null?p.cachePool:null),p!==null?J_(i,p):Vf(),Z_(i);else return l=i.lanes=536870912,Kg(t,i,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(au(i,p.cachePool),J_(i,p),Ya(),i.memoizedState=null):(t!==null&&au(i,null),Vf(),Ya());return Pn(t,i,f,r),i.child}function ec(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Kg(t,i,r,l,f){var p=Lf();return p=p===null?null:{parent:pn._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},t!==null&&au(i,null),Vf(),Z_(i),t!==null&&qo(t,i,l,!0),i.childLanes=f,null}function Tu(t,i){return i=Su({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Wg(t,i,r){return Yr(i,t.child,null,r),t=Tu(i,i.pendingProps),t.flags|=2,qs(i),i.memoizedState=null,t}function TS(t,i,r){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Et){if(l.mode==="hidden")return t=Tu(i,l),i.lanes=536870912,ec(null,t);if(Bf(i),(t=Xt)?(t=cE(t,ai),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},r=D_(t),r.return=i,i.child=r,qn=i,Xt=null)):t=null,t===null)throw Fa(i);return i.lanes=536870912,null}return Tu(i,l)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(Bf(i),f)if(i.flags&256)i.flags&=-257,i=Wg(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(gn||qo(t,i,r,!1),f=(r&t.childLanes)!==0,gn||f){if(l=Bt,l!==null&&(T=hn(l,r),T!==0&&T!==p.retryLane))throw p.retryLane=T,Br(t,T),xs(l,t,T),oh;Lu(),i=Wg(t,i,r)}else t=p.treeContext,Xt=oi(T.nextSibling),qn=i,Et=!0,Pa=null,ai=!1,t!==null&&U_(i,t),i=Tu(i,l),i.flags|=4096;return i}return t=sa(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function bu(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function lh(t,i,r,l,f){return Hr(i),r=Ff(t,i,r,l,void 0,f),l=Gf(),t!==null&&!gn?(Hf(t,i,f),ca(t,i,f)):(Et&&l&&Sf(i),i.flags|=1,Pn(t,i,r,f),i.child)}function Jg(t,i,r,l,f,p){return Hr(i),i.updateQueue=null,r=tg(i,l,r,f),eg(t),l=Gf(),t!==null&&!gn?(Hf(t,i,p),ca(t,i,p)):(Et&&l&&Sf(i),i.flags|=1,Pn(t,i,r,p),i.child)}function Zg(t,i,r,l,f){if(Hr(i),i.stateNode===null){var p=Oo,T=r.contextType;typeof T=="object"&&T!==null&&(p=Bn(T)),p=new r(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ah,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Df(i),T=r.contextType,p.context=typeof T=="object"&&T!==null?Bn(T):Oo,p.state=i.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(ih(i,r,T,l),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&ah.enqueueReplaceState(p,p.state,null),Ql(i,l,p,f),Yl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){p=i.stateNode;var R=i.memoizedProps,P=Kr(r,R);p.props=P;var ee=p.context,ue=r.contextType;T=Oo,typeof ue=="object"&&ue!==null&&(T=Bn(ue));var me=r.getDerivedStateFromProps;ue=typeof me=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,ue||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||ee!==T)&&qg(i,p,l,T),Ha=!1;var ne=i.memoizedState;p.state=ne,Ql(i,l,p,f),Yl(),ee=i.memoizedState,R||ne!==ee||Ha?(typeof me=="function"&&(ih(i,r,me,l),ee=i.memoizedState),(P=Ha||Vg(i,r,P,l,ne,ee,T))?(ue||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=ee),p.props=l,p.state=ee,p.context=T,l=P):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Of(t,i),T=i.memoizedProps,ue=Kr(r,T),p.props=ue,me=i.pendingProps,ne=p.context,ee=r.contextType,P=Oo,typeof ee=="object"&&ee!==null&&(P=Bn(ee)),R=r.getDerivedStateFromProps,(ee=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==me||ne!==P)&&qg(i,p,l,P),Ha=!1,ne=i.memoizedState,p.state=ne,Ql(i,l,p,f),Yl();var oe=i.memoizedState;T!==me||ne!==oe||Ha||t!==null&&t.dependencies!==null&&su(t.dependencies)?(typeof R=="function"&&(ih(i,r,R,l),oe=i.memoizedState),(ue=Ha||Vg(i,r,ue,l,ne,oe,P)||t!==null&&t.dependencies!==null&&su(t.dependencies))?(ee||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,oe,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,oe,P)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=oe),p.props=l,p.state=oe,p.context=P,l=ue):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(i.flags|=1024),l=!1)}return p=l,bu(t,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&l?(i.child=Yr(i,t.child,null,f),i.child=Yr(i,null,r,f)):Pn(t,i,r,f),i.memoizedState=p.state,t=i.child):t=ca(t,i,f),t}function ey(t,i,r,l){return Fr(),i.flags|=256,Pn(t,i,r,l),i.child}var ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uh(t){return{baseLanes:t,cachePool:G_()}}function dh(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=Ps),t}function ty(t,i,r){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(cn.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(Et){if(f?$a(i):Ya(),(t=Xt)?(t=cE(t,ai),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},r=D_(t),r.return=i,i.child=r,qn=i,Xt=null)):t=null,t===null)throw Fa(i);return $h(t)?i.lanes=32:i.lanes=536870912,null}var R=l.children;return l=l.fallback,f?(Ya(),f=i.mode,R=Su({mode:"hidden",children:R},f),l=Pr(l,f,r,null),R.return=i,l.return=i,R.sibling=l,i.child=R,l=i.child,l.memoizedState=uh(r),l.childLanes=dh(t,T,r),i.memoizedState=ch,ec(null,l)):($a(i),fh(i,R))}var P=t.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(p)i.flags&256?($a(i),i.flags&=-257,i=hh(t,i,r)):i.memoizedState!==null?(Ya(),i.child=t.child,i.flags|=128,i=null):(Ya(),R=l.fallback,f=i.mode,l=Su({mode:"visible",children:l.children},f),R=Pr(R,f,r,null),R.flags|=2,l.return=i,R.return=i,l.sibling=R,i.child=l,Yr(i,t.child,null,r),l=i.child,l.memoizedState=uh(r),l.childLanes=dh(t,T,r),i.memoizedState=ch,i=ec(null,l));else if($a(i),$h(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var ee=T.dgst;T=ee,l=Error(a(419)),l.stack="",l.digest=T,Fl({value:l,source:null,stack:null}),i=hh(t,i,r)}else if(gn||qo(t,i,r,!1),T=(r&t.childLanes)!==0,gn||T){if(T=Bt,T!==null&&(l=hn(T,r),l!==0&&l!==P.retryLane))throw P.retryLane=l,Br(t,l),xs(T,t,l),oh;Xh(R)||Lu(),i=hh(t,i,r)}else Xh(R)?(i.flags|=192,i.child=t.child,i=null):(t=P.treeContext,Xt=oi(R.nextSibling),qn=i,Et=!0,Pa=null,ai=!1,t!==null&&U_(i,t),i=fh(i,l.children),i.flags|=4096);return i}return f?(Ya(),R=l.fallback,f=i.mode,P=t.child,ee=P.sibling,l=sa(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,ee!==null?R=sa(ee,R):(R=Pr(R,f,r,null),R.flags|=2),R.return=i,l.return=i,l.sibling=R,i.child=l,ec(null,l),l=i.child,R=t.child.memoizedState,R===null?R=uh(r):(f=R.cachePool,f!==null?(P=pn._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=G_(),R={baseLanes:R.baseLanes|r,cachePool:f}),l.memoizedState=R,l.childLanes=dh(t,T,r),i.memoizedState=ch,ec(t.child,l)):($a(i),r=t.child,t=r.sibling,r=sa(r,{mode:"visible",children:l.children}),r.return=i,r.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=r,i.memoizedState=null,r)}function fh(t,i){return i=Su({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Su(t,i){return t=Us(22,t,null,i),t.lanes=0,t}function hh(t,i,r){return Yr(i,t.child,null,r),t=fh(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ny(t,i,r){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Rf(t.return,i,r)}function mh(t,i,r,l,f,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:p}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=r,T.tailMode=f,T.treeForkCount=p)}function sy(t,i,r){var l=i.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var T=cn.current,R=(T&2)!==0;if(R?(T=T&1|2,i.flags|=128):T&=1,le(cn,T),Pn(t,i,l,r),l=Et?Pl:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ny(t,r,i);else if(t.tag===19)ny(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)t=r.alternate,t!==null&&du(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),mh(i,!1,f,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&du(t)===null){i.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}mh(i,!0,r,null,p,l);break;case"together":mh(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ca(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),Wa|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(qo(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=sa(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=sa(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function ph(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&su(t)))}function bS(t,i,r){switch(i.tag){case 3:wt(i,i.stateNode.containerInfo),Ga(i,pn,t.memoizedState.cache),Fr();break;case 27:case 5:rn(i);break;case 4:wt(i,i.stateNode.containerInfo);break;case 10:Ga(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Bf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?($a(i),i.flags|=128,null):(r&i.child.childLanes)!==0?ty(t,i,r):($a(i),t=ca(t,i,r),t!==null?t.sibling:null);$a(i);break;case 19:var f=(t.flags&128)!==0;if(l=(r&i.childLanes)!==0,l||(qo(t,i,r,!1),l=(r&i.childLanes)!==0),f){if(l)return sy(t,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(cn,cn.current),l)break;return null;case 22:return i.lanes=0,Qg(t,i,r,i.pendingProps);case 24:Ga(i,pn,t.memoizedState.cache)}return ca(t,i,r)}function iy(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)gn=!0;else{if(!ph(t,r)&&(i.flags&128)===0)return gn=!1,bS(t,i,r);gn=(t.flags&131072)!==0}else gn=!1,Et&&(i.flags&1048576)!==0&&M_(i,Pl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Xr(i.elementType),i.type=t,typeof t=="function")vf(t)?(l=Kr(t,l),i.tag=1,i=Zg(null,i,t,l,r)):(i.tag=0,i=lh(null,i,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===ie){i.tag=11,i=Xg(null,i,t,l,r);break e}else if(f===D){i.tag=14,i=$g(null,i,t,l,r);break e}}throw i=Ae(t)||t,Error(a(306,i,""))}}return i;case 0:return lh(t,i,i.type,i.pendingProps,r);case 1:return l=i.type,f=Kr(l,i.pendingProps),Zg(t,i,l,f,r);case 3:e:{if(wt(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,Of(t,i),Ql(i,l,null,r);var T=i.memoizedState;if(l=T.cache,Ga(i,pn,l),l!==p.cache&&Cf(i,[pn],r,!0),Yl(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=ey(t,i,l,r);break e}else if(l!==f){f=ni(Error(a(424)),i),Fl(f),i=ey(t,i,l,r);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Xt=oi(t.firstChild),qn=i,Et=!0,Pa=null,ai=!0,r=Q_(i,null,l,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fr(),l===f){i=ca(t,i,r);break e}Pn(t,i,l,r)}i=i.child}return i;case 26:return bu(t,i),t===null?(r=pE(i.type,null,i.pendingProps,null))?i.memoizedState=r:Et||(r=i.type,t=i.pendingProps,l=qu(we.current).createElement(r),l[ft]=i,l[on]=t,Fn(l,r,t),Zt(l),i.stateNode=l):i.memoizedState=pE(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return rn(i),t===null&&Et&&(l=i.stateNode=fE(i.type,i.pendingProps,we.current),qn=i,ai=!0,f=Xt,nr(i.type)?(Yh=f,Xt=oi(l.firstChild)):Xt=f),Pn(t,i,i.pendingProps.children,r),bu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Et&&((f=l=Xt)&&(l=JS(l,i.type,i.pendingProps,ai),l!==null?(i.stateNode=l,qn=i,Xt=oi(l.firstChild),ai=!1,f=!0):f=!1),f||Fa(i)),rn(i),f=i.type,p=i.pendingProps,T=t!==null?t.memoizedProps:null,l=p.children,Gh(f,p)?l=null:T!==null&&Gh(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=Ff(t,i,hS,null,null,r),pc._currentValue=f),bu(t,i),Pn(t,i,l,r),i.child;case 6:return t===null&&Et&&((t=r=Xt)&&(r=ZS(r,i.pendingProps,ai),r!==null?(i.stateNode=r,qn=i,Xt=null,t=!0):t=!1),t||Fa(i)),null;case 13:return ty(t,i,r);case 4:return wt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Yr(i,null,l,r):Pn(t,i,l,r),i.child;case 11:return Xg(t,i,i.type,i.pendingProps,r);case 7:return Pn(t,i,i.pendingProps,r),i.child;case 8:return Pn(t,i,i.pendingProps.children,r),i.child;case 12:return Pn(t,i,i.pendingProps.children,r),i.child;case 10:return l=i.pendingProps,Ga(i,i.type,l.value),Pn(t,i,l.children,r),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Hr(i),f=Bn(f),l=l(f),i.flags|=1,Pn(t,i,l,r),i.child;case 14:return $g(t,i,i.type,i.pendingProps,r);case 15:return Yg(t,i,i.type,i.pendingProps,r);case 19:return sy(t,i,r);case 31:return TS(t,i,r);case 22:return Qg(t,i,r,i.pendingProps);case 24:return Hr(i),l=Bn(pn),t===null?(f=Lf(),f===null&&(f=Bt,p=If(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:l,cache:f},Df(i),Ga(i,pn,f)):((t.lanes&r)!==0&&(Of(t,i),Ql(i,null,null,r),Yl()),f=t.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ga(i,pn,l)):(l=p.cache,Ga(i,pn,l),l!==f.cache&&Cf(i,[pn],r,!0))),Pn(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ua(t){t.flags|=4}function _h(t,i,r,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(ky())t.flags|=8192;else throw $r=ou,jf}else t.flags&=-16777217}function ay(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!vE(i))if(ky())t.flags|=8192;else throw $r=ou,jf}function Nu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?On():536870912,t.lanes|=i,Wo|=i)}function tc(t,i){if(!Et)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function $t(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(i)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,i}function SS(t,i,r){var l=i.pendingProps;switch(Nf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return $t(i),null;case 3:return r=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ra(pn),yt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vo(i)?ua(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wf())),$t(i),null;case 26:var f=i.type,p=i.memoizedState;return t===null?(ua(i),p!==null?($t(i),ay(i,p)):($t(i),_h(i,f,null,l,r))):p?p!==t.memoizedState?(ua(i),$t(i),ay(i,p)):($t(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ua(i),$t(i),_h(i,f,t,l,r)),null;case 27:if(ms(i),r=we.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ua(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return $t(i),null}t=be.current,Vo(i)?V_(i):(t=fE(f,l,r),i.stateNode=t,ua(i))}return $t(i),null;case 5:if(ms(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ua(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return $t(i),null}if(p=be.current,Vo(i))V_(i);else{var T=qu(we.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}p[ft]=i,p[on]=l;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=p;e:switch(Fn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ua(i)}}return $t(i),_h(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ua(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=we.current,Vo(i)){if(t=i.stateNode,r=i.memoizedProps,l=null,f=qn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[ft]=i,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||tE(t.nodeValue,r)),t||Fa(i,!0)}else t=qu(t).createTextNode(l),t[ft]=i,i.stateNode=t}return $t(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(l=Vo(i),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[ft]=i}else Fr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),t=!1}else r=wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(qs(i),i):(qs(i),null);if((i.flags&128)!==0)throw Error(a(558))}return $t(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Vo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[ft]=i}else Fr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),f=!1}else f=wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(qs(i),i):(qs(i),null)}return qs(i),(i.flags&128)!==0?(i.lanes=r,i):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),Nu(i,i.updateQueue),$t(i),null);case 4:return yt(),t===null&&Vh(i.stateNode.containerInfo),$t(i),null;case 10:return ra(i.type),$t(i),null;case 19:if(de(cn),l=i.memoizedState,l===null)return $t(i),null;if(f=(i.flags&128)!==0,p=l.rendering,p===null)if(f)tc(l,!1);else{if(an!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=du(t),p!==null){for(i.flags|=128,tc(l,!1),t=p.updateQueue,i.updateQueue=t,Nu(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)j_(r,t),r=r.sibling;return le(cn,cn.current&1|2),Et&&ia(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Dn()>Cu&&(i.flags|=128,f=!0,tc(l,!1),i.lanes=4194304)}else{if(!f)if(t=du(p),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Nu(i,t),tc(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Et)return $t(i),null}else 2*Dn()-l.renderingStartTime>Cu&&r!==536870912&&(i.flags|=128,f=!0,tc(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(t=l.last,t!==null?t.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Dn(),t.sibling=null,r=cn.current,le(cn,f?r&1|2:r&1),Et&&ia(i,l.treeForkCount),t):($t(i),null);case 22:case 23:return qs(i),qf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(r&536870912)!==0&&(i.flags&128)===0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),r=i.updateQueue,r!==null&&Nu(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048),t!==null&&de(zr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),ra(pn),$t(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function NS(t,i){switch(Nf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ra(pn),yt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ms(i),null;case 31:if(i.memoizedState!==null){if(qs(i),i.alternate===null)throw Error(a(340));Fr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(qs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Fr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return de(cn),null;case 4:return yt(),null;case 10:return ra(i.type),null;case 22:case 23:return qs(i),qf(),t!==null&&de(zr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ra(pn),null;case 25:return null;default:return null}}function ry(t,i){switch(Nf(i),i.tag){case 3:ra(pn),yt();break;case 26:case 27:case 5:ms(i);break;case 4:yt();break;case 31:i.memoizedState!==null&&qs(i);break;case 13:qs(i);break;case 19:de(cn);break;case 10:ra(i.type);break;case 22:case 23:qs(i),qf(),t!==null&&de(zr);break;case 24:ra(pn)}}function nc(t,i){try{var r=i.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var p=r.create,T=r.inst;l=p(),T.destroy=l}r=r.next}while(r!==f)}}catch(R){Ot(i,i.return,R)}}function Qa(t,i,r){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var T=l.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,f=i;var P=r,ee=R;try{ee()}catch(ue){Ot(f,P,ue)}}}l=l.next}while(l!==p)}}catch(ue){Ot(i,i.return,ue)}}function oy(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{W_(i,r)}catch(l){Ot(t,t.return,l)}}}function ly(t,i,r){r.props=Kr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Ot(t,i,l)}}function sc(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){Ot(t,i,f)}}function Ui(t,i){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){Ot(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ot(t,i,f)}else r.current=null}function cy(t){var i=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){Ot(t,t.return,f)}}function gh(t,i,r){try{var l=t.stateNode;XS(l,t.type,r,i),l[on]=i}catch(f){Ot(t,t.return,f)}}function uy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&nr(t.type)||t.tag===4}function yh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&nr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eh(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Vn));else if(l!==4&&(l===27&&nr(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(Eh(t,i,r),t=t.sibling;t!==null;)Eh(t,i,r),t=t.sibling}function xu(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(l!==4&&(l===27&&nr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(xu(t,i,r),t=t.sibling;t!==null;)xu(t,i,r),t=t.sibling}function dy(t){var i=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Fn(i,l,r),i[ft]=t,i[on]=r}catch(p){Ot(t,t.return,p)}}var da=!1,yn=!1,vh=!1,fy=typeof WeakSet=="function"?WeakSet:Set,kn=null;function xS(t,i){if(t=t.containerInfo,Ph=Xu,t=N_(t),hf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var T=0,R=-1,P=-1,ee=0,ue=0,me=t,ne=null;t:for(;;){for(var oe;me!==r||f!==0&&me.nodeType!==3||(R=T+f),me!==p||l!==0&&me.nodeType!==3||(P=T+l),me.nodeType===3&&(T+=me.nodeValue.length),(oe=me.firstChild)!==null;)ne=me,me=oe;for(;;){if(me===t)break t;if(ne===r&&++ee===f&&(R=T),ne===p&&++ue===l&&(P=T),(oe=me.nextSibling)!==null)break;me=ne,ne=me.parentNode}me=oe}r=R===-1||P===-1?null:{start:R,end:P}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fh={focusedElem:t,selectionRange:r},Xu=!1,kn=i;kn!==null;)if(i=kn,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,kn=t;else for(;kn!==null;){switch(i=kn,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var Oe=Kr(r.type,f);t=l.getSnapshotBeforeUpdate(Oe,p),l.__reactInternalSnapshotBeforeUpdate=t}catch($e){Ot(r,r.return,$e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)zh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":zh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,kn=t;break}kn=i.return}}function hy(t,i,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ha(t,r),l&4&&nc(5,r);break;case 1:if(ha(t,r),l&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(T){Ot(r,r.return,T)}else{var f=Kr(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ot(r,r.return,T)}}l&64&&oy(r),l&512&&sc(r,r.return);break;case 3:if(ha(t,r),l&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{W_(t,i)}catch(T){Ot(r,r.return,T)}}break;case 27:i===null&&l&4&&dy(r);case 26:case 5:ha(t,r),i===null&&l&4&&cy(r),l&512&&sc(r,r.return);break;case 12:ha(t,r);break;case 31:ha(t,r),l&4&&_y(t,r);break;case 13:ha(t,r),l&4&&gy(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=DS.bind(null,r),eN(t,r))));break;case 22:if(l=r.memoizedState!==null||da,!l){i=i!==null&&i.memoizedState!==null||yn,f=da;var p=yn;da=l,(yn=i)&&!p?ma(t,r,(r.subtreeFlags&8772)!==0):ha(t,r),da=f,yn=p}break;case 30:break;default:ha(t,r)}}function my(t){var i=t.alternate;i!==null&&(t.alternate=null,my(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Da(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Wt=null,Ts=!1;function fa(t,i,r){for(r=r.child;r!==null;)py(t,i,r),r=r.sibling}function py(t,i,r){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Cs,r)}catch{}switch(r.tag){case 26:yn||Ui(r,i),fa(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:yn||Ui(r,i);var l=Wt,f=Ts;nr(r.type)&&(Wt=r.stateNode,Ts=!1),fa(t,i,r),fc(r.stateNode),Wt=l,Ts=f;break;case 5:yn||Ui(r,i);case 6:if(l=Wt,f=Ts,Wt=null,fa(t,i,r),Wt=l,Ts=f,Wt!==null)if(Ts)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(r.stateNode)}catch(p){Ot(r,i,p)}else try{Wt.removeChild(r.stateNode)}catch(p){Ot(r,i,p)}break;case 18:Wt!==null&&(Ts?(t=Wt,oE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),al(t)):oE(Wt,r.stateNode));break;case 4:l=Wt,f=Ts,Wt=r.stateNode.containerInfo,Ts=!0,fa(t,i,r),Wt=l,Ts=f;break;case 0:case 11:case 14:case 15:Qa(2,r,i),yn||Qa(4,r,i),fa(t,i,r);break;case 1:yn||(Ui(r,i),l=r.stateNode,typeof l.componentWillUnmount=="function"&&ly(r,i,l)),fa(t,i,r);break;case 21:fa(t,i,r);break;case 22:yn=(l=yn)||r.memoizedState!==null,fa(t,i,r),yn=l;break;default:fa(t,i,r)}}function _y(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{al(t)}catch(r){Ot(i,i.return,r)}}}function gy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{al(t)}catch(r){Ot(i,i.return,r)}}function wS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new fy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new fy),i;default:throw Error(a(435,t.tag))}}function wu(t,i){var r=wS(t);i.forEach(function(l){if(!r.has(l)){r.add(l);var f=OS.bind(null,t,l);l.then(f,f)}})}function bs(t,i){var r=i.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],p=t,T=i,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(nr(R.type)){Wt=R.stateNode,Ts=!1;break e}break;case 5:Wt=R.stateNode,Ts=!1;break e;case 3:case 4:Wt=R.stateNode.containerInfo,Ts=!0;break e}R=R.return}if(Wt===null)throw Error(a(160));py(p,T,f),Wt=null,Ts=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)yy(i,t),i=i.sibling}var Ei=null;function yy(t,i){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bs(i,t),Ss(t),l&4&&(Qa(3,t,t.return),nc(3,t),Qa(5,t,t.return));break;case 1:bs(i,t),Ss(t),l&512&&(yn||r===null||Ui(r,r.return)),l&64&&da&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=Ei;if(bs(i,t),Ss(t),l&512&&(yn||r===null||Ui(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[rs]||p[ft]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Fn(p,l,r),p[ft]=t,Zt(p),l=p;break e;case"link":var T=yE("link","href",f).get(l+(r.href||""));if(T){for(var R=0;R<T.length;R++)if(p=T[R],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(R,1);break t}}p=f.createElement(l),Fn(p,l,r),f.head.appendChild(p);break;case"meta":if(T=yE("meta","content",f).get(l+(r.content||""))){for(R=0;R<T.length;R++)if(p=T[R],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(R,1);break t}}p=f.createElement(l),Fn(p,l,r),f.head.appendChild(p);break;default:throw Error(a(468,l))}p[ft]=t,Zt(p),l=p}t.stateNode=l}else EE(f,t.type,t.stateNode);else t.stateNode=gE(f,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?EE(f,t.type,t.stateNode):gE(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gh(t,t.memoizedProps,r.memoizedProps)}break;case 27:bs(i,t),Ss(t),l&512&&(yn||r===null||Ui(r,r.return)),r!==null&&l&4&&gh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(bs(i,t),Ss(t),l&512&&(yn||r===null||Ui(r,r.return)),t.flags&32){f=t.stateNode;try{wn(f,"")}catch(Oe){Ot(t,t.return,Oe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,gh(t,f,r!==null?r.memoizedProps:f)),l&1024&&(vh=!0);break;case 6:if(bs(i,t),Ss(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Oe){Ot(t,t.return,Oe)}}break;case 3:if(Fu=null,f=Ei,Ei=Bu(i.containerInfo),bs(i,t),Ei=f,Ss(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{al(i.containerInfo)}catch(Oe){Ot(t,t.return,Oe)}vh&&(vh=!1,Ey(t));break;case 4:l=Ei,Ei=Bu(t.stateNode.containerInfo),bs(i,t),Ss(t),Ei=l;break;case 12:bs(i,t),Ss(t);break;case 31:bs(i,t),Ss(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,wu(t,l)));break;case 13:bs(i,t),Ss(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Ru=Dn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,wu(t,l)));break;case 22:f=t.memoizedState!==null;var P=r!==null&&r.memoizedState!==null,ee=da,ue=yn;if(da=ee||f,yn=ue||P,bs(i,t),yn=ue,da=ee,Ss(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||P||da||yn||Wr(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){P=r=i;try{if(p=P.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=P.stateNode;var me=P.memoizedProps.style,ne=me!=null&&me.hasOwnProperty("display")?me.display:null;R.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Oe){Ot(P,P.return,Oe)}}}else if(i.tag===6){if(r===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Oe){Ot(P,P.return,Oe)}}}else if(i.tag===18){if(r===null){P=i;try{var oe=P.stateNode;f?lE(oe,!0):lE(P.stateNode,!1)}catch(Oe){Ot(P,P.return,Oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,wu(t,r))));break;case 19:bs(i,t),Ss(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,wu(t,l)));break;case 30:break;case 21:break;default:bs(i,t),Ss(t)}}function Ss(t){var i=t.flags;if(i&2){try{for(var r,l=t.return;l!==null;){if(uy(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=yh(t);xu(t,p,f);break;case 5:var T=r.stateNode;r.flags&32&&(wn(T,""),r.flags&=-33);var R=yh(t);xu(t,R,T);break;case 3:case 4:var P=r.stateNode.containerInfo,ee=yh(t);Eh(t,ee,P);break;default:throw Error(a(161))}}catch(ue){Ot(t,t.return,ue)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ey(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ey(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ha(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hy(t,i.alternate,i),i=i.sibling}function Wr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Qa(4,i,i.return),Wr(i);break;case 1:Ui(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&ly(i,i.return,r),Wr(i);break;case 27:fc(i.stateNode);case 26:case 5:Ui(i,i.return),Wr(i);break;case 22:i.memoizedState===null&&Wr(i);break;case 30:Wr(i);break;default:Wr(i)}t=t.sibling}}function ma(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:ma(f,p,r),nc(4,p);break;case 1:if(ma(f,p,r),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Ot(l,l.return,ee)}if(l=p,f=l.updateQueue,f!==null){var R=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)K_(P[f],R)}catch(ee){Ot(l,l.return,ee)}}r&&T&64&&oy(p),sc(p,p.return);break;case 27:dy(p);case 26:case 5:ma(f,p,r),r&&l===null&&T&4&&cy(p),sc(p,p.return);break;case 12:ma(f,p,r);break;case 31:ma(f,p,r),r&&T&4&&_y(f,p);break;case 13:ma(f,p,r),r&&T&4&&gy(f,p);break;case 22:p.memoizedState===null&&ma(f,p,r),sc(p,p.return);break;case 30:break;default:ma(f,p,r)}i=i.sibling}}function Th(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Gl(r))}function bh(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Gl(t))}function vi(t,i,r,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vy(t,i,r,l),i=i.sibling}function vy(t,i,r,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:vi(t,i,r,l),f&2048&&nc(9,i);break;case 1:vi(t,i,r,l);break;case 3:vi(t,i,r,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Gl(t)));break;case 12:if(f&2048){vi(t,i,r,l),t=i.stateNode;try{var p=i.memoizedProps,T=p.id,R=p.onPostCommit;typeof R=="function"&&R(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Ot(i,i.return,P)}}else vi(t,i,r,l);break;case 31:vi(t,i,r,l);break;case 13:vi(t,i,r,l);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?vi(t,i,r,l):ic(t,i):p._visibility&2?vi(t,i,r,l):(p._visibility|=2,Yo(t,i,r,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Th(T,i);break;case 24:vi(t,i,r,l),f&2048&&bh(i.alternate,i);break;default:vi(t,i,r,l)}}function Yo(t,i,r,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,T=i,R=r,P=l,ee=T.flags;switch(T.tag){case 0:case 11:case 15:Yo(p,T,R,P,f),nc(8,T);break;case 23:break;case 22:var ue=T.stateNode;T.memoizedState!==null?ue._visibility&2?Yo(p,T,R,P,f):ic(p,T):(ue._visibility|=2,Yo(p,T,R,P,f)),f&&ee&2048&&Th(T.alternate,T);break;case 24:Yo(p,T,R,P,f),f&&ee&2048&&bh(T.alternate,T);break;default:Yo(p,T,R,P,f)}i=i.sibling}}function ic(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,l=i,f=l.flags;switch(l.tag){case 22:ic(r,l),f&2048&&Th(l.alternate,l);break;case 24:ic(r,l),f&2048&&bh(l.alternate,l);break;default:ic(r,l)}i=i.sibling}}var ac=8192;function Qo(t,i,r){if(t.subtreeFlags&ac)for(t=t.child;t!==null;)Ty(t,i,r),t=t.sibling}function Ty(t,i,r){switch(t.tag){case 26:Qo(t,i,r),t.flags&ac&&t.memoizedState!==null&&fN(r,Ei,t.memoizedState,t.memoizedProps);break;case 5:Qo(t,i,r);break;case 3:case 4:var l=Ei;Ei=Bu(t.stateNode.containerInfo),Qo(t,i,r),Ei=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ac,ac=16777216,Qo(t,i,r),ac=l):Qo(t,i,r));break;default:Qo(t,i,r)}}function by(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function rc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];kn=l,Ny(l,t)}by(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sy(t),t=t.sibling}function Sy(t){switch(t.tag){case 0:case 11:case 15:rc(t),t.flags&2048&&Qa(9,t,t.return);break;case 3:rc(t);break;case 12:rc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Au(t)):rc(t);break;default:rc(t)}}function Au(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];kn=l,Ny(l,t)}by(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Qa(8,i,i.return),Au(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Au(i));break;default:Au(i)}t=t.sibling}}function Ny(t,i){for(;kn!==null;){var r=kn;switch(r.tag){case 0:case 11:case 15:Qa(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Gl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,kn=l;else e:for(r=t;kn!==null;){l=kn;var f=l.sibling,p=l.return;if(my(l),l===r){kn=null;break e}if(f!==null){f.return=p,kn=f;break e}kn=p}}}var AS={getCacheForType:function(t){var i=Bn(pn),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return Bn(pn).controller.signal}},RS=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Bt=null,ct=null,mt=0,Dt=0,Bs=null,Ka=!1,Ko=!1,Sh=!1,pa=0,an=0,Wa=0,Jr=0,Nh=0,Ps=0,Wo=0,oc=null,Ns=null,xh=!1,Ru=0,xy=0,Cu=1/0,Iu=null,Ja=null,Sn=0,Za=null,Jo=null,_a=0,wh=0,Ah=null,wy=null,lc=0,Rh=null;function Fs(){return(Ct&2)!==0&&mt!==0?mt&-mt:se.T!==null?Dh():Ar()}function Ay(){if(Ps===0)if((mt&536870912)===0||Et){var t=xi;xi<<=1,(xi&3932160)===0&&(xi=262144),Ps=t}else Ps=536870912;return t=Vs.current,t!==null&&(t.flags|=32),Ps}function xs(t,i,r){(t===Bt&&(Dt===2||Dt===9)||t.cancelPendingCommit!==null)&&(Zo(t,0),er(t,mt,Ps,!1)),mi(t,r),((Ct&2)===0||t!==Bt)&&(t===Bt&&((Ct&2)===0&&(Jr|=r),an===4&&er(t,mt,Ps,!1)),Vi(t))}function Ry(t,i,r){if((Ct&6)!==0)throw Error(a(327));var l=!r&&(i&127)===0&&(i&t.expiredLanes)===0||Ls(t,i),f=l?kS(t,i):Ih(t,i,!0),p=l;do{if(f===0){Ko&&!l&&er(t,i,0,!1);break}else{if(r=t.current.alternate,p&&!CS(r)){f=Ih(t,i,!1),p=!1;continue}if(f===2){if(p=i,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var R=t;f=oc;var P=R.current.memoizedState.isDehydrated;if(P&&(Zo(R,T).flags|=256),T=Ih(R,T,!1),T!==2){if(Sh&&!P){R.errorRecoveryDisabledLanes|=p,Jr|=p,f=4;break e}p=Ns,Ns=f,p!==null&&(Ns===null?Ns=p:Ns.push.apply(Ns,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){Zo(t,0),er(t,i,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:er(l,i,Ps,!Ka);break e;case 2:Ns=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Ru+300-Dn(),10<f)){if(er(l,i,Ps,!Ka),Se(l,0,!0)!==0)break e;_a=i,l.timeoutHandle=aE(Cy.bind(null,l,r,Ns,Iu,xh,i,Ps,Jr,Wo,Ka,p,"Throttled",-0,0),f);break e}Cy(l,r,Ns,Iu,xh,i,Ps,Jr,Wo,Ka,p,null,-0,0)}}break}while(!0);Vi(t)}function Cy(t,i,r,l,f,p,T,R,P,ee,ue,me,ne,oe){if(t.timeoutHandle=-1,me=i.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},Ty(i,p,me);var Oe=(p&62914560)===p?Ru-Dn():(p&4194048)===p?xy-Dn():0;if(Oe=hN(me,Oe),Oe!==null){_a=p,t.cancelPendingCommit=Oe(Uy.bind(null,t,i,p,r,l,f,T,R,P,ue,me,null,ne,oe)),er(t,p,T,!ee);return}}Uy(t,i,p,r,l,f,T,R,P)}function CS(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],p=f.getSnapshot;f=f.value;try{if(!Ms(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function er(t,i,r,l){i&=~Nh,i&=~Jr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var p=31-zt(f),T=1<<p;l[p]=-1,f&=~T}r!==0&&as(t,r,i)}function ku(){return(Ct&6)===0?(cc(0),!1):!0}function Ch(){if(ct!==null){if(Dt===0)var t=ct.return;else t=ct,aa=Gr=null,zf(t),Go=null,zl=0,t=ct;for(;t!==null;)ry(t.alternate,t),t=t.return;ct=null}}function Zo(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,QS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),_a=0,Ch(),Bt=t,ct=r=sa(t.current,null),mt=i,Dt=0,Bs=null,Ka=!1,Ko=Ls(t,i),Sh=!1,Wo=Ps=Nh=Jr=Wa=an=0,Ns=oc=null,xh=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-zt(l),p=1<<f;i|=t[f],l&=~p}return pa=i,Jc(),r}function Iy(t,i){ot=null,se.H=Zl,i===Fo||i===ru?(i=X_(),Dt=3):i===jf?(i=X_(),Dt=4):Dt=i===oh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bs=i,ct===null&&(an=1,vu(t,ni(i,t.current)))}function ky(){var t=Vs.current;return t===null?!0:(mt&4194048)===mt?ri===null:(mt&62914560)===mt||(mt&536870912)!==0?t===ri:!1}function Ly(){var t=se.H;return se.H=Zl,t===null?Zl:t}function jy(){var t=se.A;return se.A=AS,t}function Lu(){an=4,Ka||(mt&4194048)!==mt&&Vs.current!==null||(Ko=!0),(Wa&134217727)===0&&(Jr&134217727)===0||Bt===null||er(Bt,mt,Ps,!1)}function Ih(t,i,r){var l=Ct;Ct|=2;var f=Ly(),p=jy();(Bt!==t||mt!==i)&&(Iu=null,Zo(t,i)),i=!1;var T=an;e:do try{if(Dt!==0&&ct!==null){var R=ct,P=Bs;switch(Dt){case 8:Ch(),T=6;break e;case 3:case 2:case 9:case 6:Vs.current===null&&(i=!0);var ee=Dt;if(Dt=0,Bs=null,el(t,R,P,ee),r&&Ko){T=0;break e}break;default:ee=Dt,Dt=0,Bs=null,el(t,R,P,ee)}}IS(),T=an;break}catch(ue){Iy(t,ue)}while(!0);return i&&t.shellSuspendCounter++,aa=Gr=null,Ct=l,se.H=f,se.A=p,ct===null&&(Bt=null,mt=0,Jc()),T}function IS(){for(;ct!==null;)Dy(ct)}function kS(t,i){var r=Ct;Ct|=2;var l=Ly(),f=jy();Bt!==t||mt!==i?(Iu=null,Cu=Dn()+500,Zo(t,i)):Ko=Ls(t,i);e:do try{if(Dt!==0&&ct!==null){i=ct;var p=Bs;t:switch(Dt){case 1:Dt=0,Bs=null,el(t,i,p,1);break;case 2:case 9:if(H_(p)){Dt=0,Bs=null,Oy(i);break}i=function(){Dt!==2&&Dt!==9||Bt!==t||(Dt=7),Vi(t)},p.then(i,i);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:H_(p)?(Dt=0,Bs=null,Oy(i)):(Dt=0,Bs=null,el(t,i,p,7));break;case 5:var T=null;switch(ct.tag){case 26:T=ct.memoizedState;case 5:case 27:var R=ct;if(T?vE(T):R.stateNode.complete){Dt=0,Bs=null;var P=R.sibling;if(P!==null)ct=P;else{var ee=R.return;ee!==null?(ct=ee,ju(ee)):ct=null}break t}}Dt=0,Bs=null,el(t,i,p,5);break;case 6:Dt=0,Bs=null,el(t,i,p,6);break;case 8:Ch(),an=6;break e;default:throw Error(a(462))}}LS();break}catch(ue){Iy(t,ue)}while(!0);return aa=Gr=null,se.H=l,se.A=f,Ct=r,ct!==null?0:(Bt=null,mt=0,Jc(),an)}function LS(){for(;ct!==null&&!Ol();)Dy(ct)}function Dy(t){var i=iy(t.alternate,t,pa);t.memoizedProps=t.pendingProps,i===null?ju(t):ct=i}function Oy(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=Jg(r,i,i.pendingProps,i.type,void 0,mt);break;case 11:i=Jg(r,i,i.pendingProps,i.type.render,i.ref,mt);break;case 5:zf(i);default:ry(r,i),i=ct=j_(i,pa),i=iy(r,i,pa)}t.memoizedProps=t.pendingProps,i===null?ju(t):ct=i}function el(t,i,r,l){aa=Gr=null,zf(i),Go=null,zl=0;var f=i.return;try{if(vS(t,f,i,r,mt)){an=1,vu(t,ni(r,t.current)),ct=null;return}}catch(p){if(f!==null)throw ct=f,p;an=1,vu(t,ni(r,t.current)),ct=null;return}i.flags&32768?(Et||l===1?t=!0:Ko||(mt&536870912)!==0?t=!1:(Ka=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vs.current,l!==null&&l.tag===13&&(l.flags|=16384))),My(i,t)):ju(i)}function ju(t){var i=t;do{if((i.flags&32768)!==0){My(i,Ka);return}t=i.return;var r=SS(i.alternate,i,pa);if(r!==null){ct=r;return}if(i=i.sibling,i!==null){ct=i;return}ct=i=t}while(i!==null);an===0&&(an=5)}function My(t,i){do{var r=NS(t.alternate,t);if(r!==null){r.flags&=32767,ct=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){ct=t;return}ct=t=r}while(t!==null);an=6,ct=null}function Uy(t,i,r,l,f,p,T,R,P){t.cancelPendingCommit=null;do Du();while(Sn!==0);if((Ct&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=yf,wr(t,r,p,T,R,P),t===Bt&&(ct=Bt=null,mt=0),Jo=i,Za=t,_a=r,wh=p,Ah=f,wy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,MS(hi,function(){return Fy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=se.T,se.T=null,f=Te.p,Te.p=2,T=Ct,Ct|=4;try{xS(t,i,r)}finally{Ct=T,Te.p=f,se.T=l}}Sn=1,Vy(),qy(),By()}}function Vy(){if(Sn===1){Sn=0;var t=Za,i=Jo,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=se.T,se.T=null;var l=Te.p;Te.p=2;var f=Ct;Ct|=4;try{yy(i,t);var p=Fh,T=N_(t.containerInfo),R=p.focusedElem,P=p.selectionRange;if(T!==R&&R&&R.ownerDocument&&S_(R.ownerDocument.documentElement,R)){if(P!==null&&hf(R)){var ee=P.start,ue=P.end;if(ue===void 0&&(ue=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(ue,R.value.length);else{var me=R.ownerDocument||document,ne=me&&me.defaultView||window;if(ne.getSelection){var oe=ne.getSelection(),Oe=R.textContent.length,$e=Math.min(P.start,Oe),Vt=P.end===void 0?$e:Math.min(P.end,Oe);!oe.extend&&$e>Vt&&(T=Vt,Vt=$e,$e=T);var Y=b_(R,$e),$=b_(R,Vt);if(Y&&$&&(oe.rangeCount!==1||oe.anchorNode!==Y.node||oe.anchorOffset!==Y.offset||oe.focusNode!==$.node||oe.focusOffset!==$.offset)){var Z=me.createRange();Z.setStart(Y.node,Y.offset),oe.removeAllRanges(),$e>Vt?(oe.addRange(Z),oe.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),oe.addRange(Z))}}}}for(me=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&me.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<me.length;R++){var fe=me[R];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Xu=!!Ph,Fh=Ph=null}finally{Ct=f,Te.p=l,se.T=r}}t.current=i,Sn=2}}function qy(){if(Sn===2){Sn=0;var t=Za,i=Jo,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=se.T,se.T=null;var l=Te.p;Te.p=2;var f=Ct;Ct|=4;try{hy(t,i.alternate,i)}finally{Ct=f,Te.p=l,se.T=r}}Sn=3}}function By(){if(Sn===4||Sn===3){Sn=0,Sr();var t=Za,i=Jo,r=_a,l=wy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Sn=5:(Sn=0,Jo=Za=null,Py(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ja=null),Yn(r),i=i.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Cs,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=se.T,f=Te.p,Te.p=2,se.T=null;try{for(var p=t.onRecoverableError,T=0;T<l.length;T++){var R=l[T];p(R.value,{componentStack:R.stack})}}finally{se.T=i,Te.p=f}}(_a&3)!==0&&Du(),Vi(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Rh?lc++:(lc=0,Rh=t):lc=0,cc(0)}}function Py(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Gl(i)))}function Du(){return Vy(),qy(),By(),Fy()}function Fy(){if(Sn!==5)return!1;var t=Za,i=wh;wh=0;var r=Yn(_a),l=se.T,f=Te.p;try{Te.p=32>r?32:r,se.T=null,r=Ah,Ah=null;var p=Za,T=_a;if(Sn=0,Jo=Za=null,_a=0,(Ct&6)!==0)throw Error(a(331));var R=Ct;if(Ct|=4,Sy(p.current),vy(p,p.current,T,r),Ct=R,cc(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Cs,p)}catch{}return!0}finally{Te.p=f,se.T=l,Py(t,i)}}function Gy(t,i,r){i=ni(r,i),i=rh(t.stateNode,i,2),t=Xa(t,i,2),t!==null&&(mi(t,2),Vi(t))}function Ot(t,i,r){if(t.tag===3)Gy(t,t,r);else for(;i!==null;){if(i.tag===3){Gy(i,t,r);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ja===null||!Ja.has(l))){t=ni(r,t),r=Hg(2),l=Xa(i,r,2),l!==null&&(zg(r,l,i,t),mi(l,2),Vi(l));break}}i=i.return}}function kh(t,i,r){var l=t.pingCache;if(l===null){l=t.pingCache=new RS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(r)||(Sh=!0,f.add(r),t=jS.bind(null,t,i,r),i.then(t,t))}function jS(t,i,r){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Bt===t&&(mt&r)===r&&(an===4||an===3&&(mt&62914560)===mt&&300>Dn()-Ru?(Ct&2)===0&&Zo(t,0):Nh|=r,Wo===mt&&(Wo=0)),Vi(t)}function Hy(t,i){i===0&&(i=On()),t=Br(t,i),t!==null&&(mi(t,i),Vi(t))}function DS(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),Hy(t,r)}function OS(t,i){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),Hy(t,r)}function MS(t,i){return nn(t,i)}var Ou=null,tl=null,Lh=!1,Mu=!1,jh=!1,tr=0;function Vi(t){t!==tl&&t.next===null&&(tl===null?Ou=tl=t:tl=tl.next=t),Mu=!0,Lh||(Lh=!0,VS())}function cc(t,i){if(!jh&&Mu){jh=!0;do for(var r=!1,l=Ou;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,R=l.pingedLanes;p=(1<<31-zt(42|t)+1)-1,p&=f&~(T&~R),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,Yy(l,p))}else p=mt,p=Se(l,l===Bt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Ls(l,p)||(r=!0,Yy(l,p));l=l.next}while(r);jh=!1}}function US(){zy()}function zy(){Mu=Lh=!1;var t=0;tr!==0&&YS()&&(t=tr);for(var i=Dn(),r=null,l=Ou;l!==null;){var f=l.next,p=Xy(l,i);p===0?(l.next=null,r===null?Ou=f:r.next=f,f===null&&(tl=r)):(r=l,(t!==0||(p&3)!==0)&&(Mu=!0)),l=f}Sn!==0&&Sn!==5||cc(t),tr!==0&&(tr=0)}function Xy(t,i){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-zt(p),R=1<<T,P=f[T];P===-1?((R&r)===0||(R&l)!==0)&&(f[T]=Ml(R,i)):P<=i&&(t.expiredLanes|=R),p&=~R}if(i=Bt,r=mt,r=Se(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===i&&(Dt===2||Dt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Rs(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Ls(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(l!==null&&Rs(l),Yn(r)){case 2:case 8:r=ss;break;case 32:r=hi;break;case 268435456:r=Nr;break;default:r=hi}return l=$y.bind(null,t),r=nn(r,l),t.callbackPriority=i,t.callbackNode=r,i}return l!==null&&l!==null&&Rs(l),t.callbackPriority=2,t.callbackNode=null,2}function $y(t,i){if(Sn!==0&&Sn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Du()&&t.callbackNode!==r)return null;var l=mt;return l=Se(t,t===Bt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ry(t,l,i),Xy(t,Dn()),t.callbackNode!=null&&t.callbackNode===r?$y.bind(null,t):null)}function Yy(t,i){if(Du())return null;Ry(t,i,!0)}function VS(){KS(function(){(Ct&6)!==0?nn(fi,US):zy()})}function Dh(){if(tr===0){var t=Bo;t===0&&(t=bn,bn<<=1,(bn&261888)===0&&(bn=256)),tr=t}return tr}function Qy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:cs(""+t)}function Ky(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function qS(t,i,r,l,f){if(i==="submit"&&r&&r.stateNode===f){var p=Qy((f[on]||null).action),T=l.submitter;T&&(i=(i=T[on]||null)?Qy(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var R=new Nt("action","action",null,l,f);t.push({event:R,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(tr!==0){var P=T?Ky(f,T):new FormData(f);eh(r,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(R.preventDefault(),P=T?Ky(f,T):new FormData(f),eh(r,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Oh=0;Oh<gf.length;Oh++){var Mh=gf[Oh],BS=Mh.toLowerCase(),PS=Mh[0].toUpperCase()+Mh.slice(1);yi(BS,"on"+PS)}yi(A_,"onAnimationEnd"),yi(R_,"onAnimationIteration"),yi(C_,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(sS,"onTransitionRun"),yi(iS,"onTransitionStart"),yi(aS,"onTransitionCancel"),yi(I_,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function Wy(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var T=l.length-1;0<=T;T--){var R=l[T],P=R.instance,ee=R.currentTarget;if(R=R.listener,P!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=ee;try{p(f)}catch(ue){Wc(ue)}f.currentTarget=null,p=P}else for(T=0;T<l.length;T++){if(R=l[T],P=R.instance,ee=R.currentTarget,R=R.listener,P!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=ee;try{p(f)}catch(ue){Wc(ue)}f.currentTarget=null,p=P}}}}function ut(t,i){var r=i[Ai];r===void 0&&(r=i[Ai]=new Set);var l=t+"__bubble";r.has(l)||(Jy(i,t,2,!1),r.add(l))}function Uh(t,i,r){var l=0;i&&(l|=4),Jy(r,t,l,i)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Vh(t){if(!t[Uu]){t[Uu]=!0,pi.forEach(function(r){r!=="selectionchange"&&(FS.has(r)||Uh(r,!1,t),Uh(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Uu]||(i[Uu]=!0,Uh("selectionchange",!1,i))}}function Jy(t,i,r,l){switch(AE(i)){case 2:var f=_N;break;case 8:f=gN;break;default:f=Zh}r=f.bind(null,i,r,t),f=void 0,!_i||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,r,{capture:!0,passive:f}):t.addEventListener(i,r,!0):f!==void 0?t.addEventListener(i,r,{passive:f}):t.addEventListener(i,r,!1)}function qh(t,i,r,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var R=l.stateNode.containerInfo;if(R===f)break;if(T===4)for(T=l.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;R!==null;){if(T=ln(R),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){l=p=T;continue e}R=R.parentNode}}l=l.return}Es(function(){var ee=p,ue=Ie(r),me=[];e:{var ne=k_.get(t);if(ne!==void 0){var oe=Nt,Oe=t;switch(t){case"keypress":if(W(r)===0)break e;case"keydown":case"keyup":oe=Co;break;case"focusin":Oe="focus",oe=na;break;case"focusout":Oe="blur",oe=na;break;case"beforeblur":case"afterblur":oe=na;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=To;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=v;break;case A_:case R_:case C_:oe=So;break;case I_:oe=I;break;case"scroll":case"scrollend":oe=Va;break;case"wheel":oe=re;break;case"copy":case"cut":case"paste":oe=Mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=gi;break;case"toggle":case"beforetoggle":oe=We}var $e=(i&4)!==0,Vt=!$e&&(t==="scroll"||t==="scrollend"),Y=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var $=ee,Z;$!==null;){var fe=$;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||Y===null||(fe=mn($,Y),fe!=null&&$e.push(dc($,fe,Z))),Vt)break;$=$.return}0<$e.length&&(ne=new oe(ne,Oe,null,r,ue),me.push({event:ne,listeners:$e}))}}if((i&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",ne&&r!==jr&&(Oe=r.relatedTarget||r.fromElement)&&(ln(Oe)||Oe[Xs]))break e;if((oe||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(Oe=r.relatedTarget||r.toElement,oe=ee,Oe=Oe?ln(Oe):null,Oe!==null&&(Vt=u(Oe),$e=Oe.tag,Oe!==Vt||$e!==5&&$e!==27&&$e!==6)&&(Oe=null)):(oe=null,Oe=ee),oe!==Oe)){if($e=Dr,fe="onMouseLeave",Y="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&($e=gi,fe="onPointerLeave",Y="onPointerEnter",$="pointer"),Vt=oe==null?ne:Un(oe),Z=Oe==null?ne:Un(Oe),ne=new $e(fe,$+"leave",oe,r,ue),ne.target=Vt,ne.relatedTarget=Z,fe=null,ln(ue)===ee&&($e=new $e(Y,$+"enter",Oe,r,ue),$e.target=Z,$e.relatedTarget=Vt,fe=$e),Vt=fe,oe&&Oe)t:{for($e=GS,Y=oe,$=Oe,Z=0,fe=Y;fe;fe=$e(fe))Z++;fe=0;for(var Ge=$;Ge;Ge=$e(Ge))fe++;for(;0<Z-fe;)Y=$e(Y),Z--;for(;0<fe-Z;)$=$e($),fe--;for(;Z--;){if(Y===$||$!==null&&Y===$.alternate){$e=Y;break t}Y=$e(Y),$=$e($)}$e=null}else $e=null;oe!==null&&Zy(me,ne,oe,$e,!1),Oe!==null&&Vt!==null&&Zy(me,Vt,Oe,$e,!0)}}e:{if(ne=ee?Un(ee):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var At=__;else if(ko(ne))if(g_)At=eS;else{At=J1;var Ue=W1}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&ys(ee.elementType)&&(At=__):At=Z1;if(At&&(At=At(t,ee))){Di(me,At,r,ue);break e}Ue&&Ue(t,ne,ee),t==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&kr(ne,"number",ne.value)}switch(Ue=ee?Un(ee):window,t){case"focusin":(ko(Ue)||Ue.contentEditable==="true")&&(Lo=Ue,mf=ee,Bl=null);break;case"focusout":Bl=mf=Lo=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,x_(me,r,ue);break;case"selectionchange":if(nS)break;case"keydown":case"keyup":x_(me,r,ue)}var lt;if(Tt)e:{switch(t){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else In?Xe(t,r)&&(pt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(he&&r.locale!=="ko"&&(In||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&In&&(lt=F()):(y=ue,N="value"in y?y.value:y.textContent,In=!0)),Ue=Vu(ee,pt),0<Ue.length&&(pt=new ei(pt,t,null,r,ue),me.push({event:pt,listeners:Ue}),lt?pt.data=lt:(lt=ht(r),lt!==null&&(pt.data=lt)))),(lt=Q?vs(t,r):ds(t,r))&&(pt=Vu(ee,"onBeforeInput"),0<pt.length&&(Ue=new ei("onBeforeInput","beforeinput",null,r,ue),me.push({event:Ue,listeners:pt}),Ue.data=lt)),qS(me,t,ee,r,ue)}Wy(me,i)})}function dc(t,i,r){return{instance:t,listener:i,currentTarget:r}}function Vu(t,i){for(var r=i+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=mn(t,r),f!=null&&l.unshift(dc(t,f,p)),f=mn(t,i),f!=null&&l.push(dc(t,f,p))),t.tag===3)return l;t=t.return}return[]}function GS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Zy(t,i,r,l,f){for(var p=i._reactName,T=[];r!==null&&r!==l;){var R=r,P=R.alternate,ee=R.stateNode;if(R=R.tag,P!==null&&P===l)break;R!==5&&R!==26&&R!==27||ee===null||(P=ee,f?(ee=mn(r,p),ee!=null&&T.unshift(dc(r,ee,P))):f||(ee=mn(r,p),ee!=null&&T.push(dc(r,ee,P)))),r=r.return}T.length!==0&&t.push({event:i,listeners:T})}var HS=/\r\n?/g,zS=/\u0000|\uFFFD/g;function eE(t){return(typeof t=="string"?t:""+t).replace(HS,`
`).replace(zS,"")}function tE(t,i){return i=eE(i),eE(t)===i}function Ut(t,i,r,l,f,p){switch(r){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&wn(t,""+l);break;case"className":ls(t,"class",l);break;case"tabIndex":ls(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(t,r,l);break;case"style":Ii(t,l,p);break;case"data":if(i!=="object"){ls(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=cs(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&Ut(t,i,"name",f.name,f,null),Ut(t,i,"formEncType",f.formEncType,f,null),Ut(t,i,"formMethod",f.formMethod,f,null),Ut(t,i,"formTarget",f.formTarget,f,null)):(Ut(t,i,"encType",f.encType,f,null),Ut(t,i,"method",f.method,f,null),Ut(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=cs(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Vn);break;case"onScroll":l!=null&&ut("scroll",t);break;case"onScrollEnd":l!=null&&ut("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=cs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":ut("beforetoggle",t),ut("toggle",t),Ki(t,"popover",l);break;case"xlinkActuate":jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ki(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ua.get(r)||r,Ki(t,r,l))}}function Bh(t,i,r,l,f,p){switch(r){case"style":Ii(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&ut("scroll",t);break;case"onScrollEnd":l!=null&&ut("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=t[on]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Ki(t,r,l)}}}function Fn(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",t),ut("load",t);var l=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var T=r[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ut(t,i,p,T,r,null)}}f&&Ut(t,i,"srcSet",r.srcSet,r,null),l&&Ut(t,i,"src",r.src,r,null);return;case"input":ut("invalid",t);var R=p=T=f=null,P=null,ee=null;for(l in r)if(r.hasOwnProperty(l)){var ue=r[l];if(ue!=null)switch(l){case"name":f=ue;break;case"type":T=ue;break;case"checked":P=ue;break;case"defaultChecked":ee=ue;break;case"value":p=ue;break;case"defaultValue":R=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,i));break;default:Ut(t,i,l,ue,r,null)}}Ir(t,p,R,P,ee,T,f,!1);return;case"select":ut("invalid",t),l=T=p=null;for(f in r)if(r.hasOwnProperty(f)&&(R=r[f],R!=null))switch(f){case"value":p=R;break;case"defaultValue":T=R;break;case"multiple":l=R;default:Ut(t,i,f,R,r,null)}i=p,r=T,t.multiple=!!l,i!=null?Ks(t,!!l,i,!1):r!=null&&Ks(t,!!l,r,!0);return;case"textarea":ut("invalid",t),p=f=l=null;for(T in r)if(r.hasOwnProperty(T)&&(R=r[T],R!=null))switch(T){case"value":l=R;break;case"defaultValue":f=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:Ut(t,i,T,R,r,null)}Ws(t,l,f,p);return;case"option":for(P in r)r.hasOwnProperty(P)&&(l=r[P],l!=null)&&(P==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Ut(t,i,P,l,r,null));return;case"dialog":ut("beforetoggle",t),ut("toggle",t),ut("cancel",t),ut("close",t);break;case"iframe":case"object":ut("load",t);break;case"video":case"audio":for(l=0;l<uc.length;l++)ut(uc[l],t);break;case"image":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"embed":case"source":case"link":ut("error",t),ut("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in r)if(r.hasOwnProperty(ee)&&(l=r[ee],l!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ut(t,i,ee,l,r,null)}return;default:if(ys(i)){for(ue in r)r.hasOwnProperty(ue)&&(l=r[ue],l!==void 0&&Bh(t,i,ue,l,r,void 0));return}}for(R in r)r.hasOwnProperty(R)&&(l=r[R],l!=null&&Ut(t,i,R,l,r,null))}function XS(t,i,r,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,R=null,P=null,ee=null,ue=null;for(oe in r){var me=r[oe];if(r.hasOwnProperty(oe)&&me!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":P=me;default:l.hasOwnProperty(oe)||Ut(t,i,oe,null,l,me)}}for(var ne in l){var oe=l[ne];if(me=r[ne],l.hasOwnProperty(ne)&&(oe!=null||me!=null))switch(ne){case"type":p=oe;break;case"name":f=oe;break;case"checked":ee=oe;break;case"defaultChecked":ue=oe;break;case"value":T=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:oe!==me&&Ut(t,i,ne,oe,l,me)}}Qs(t,T,R,P,ee,ue,p,f);return;case"select":oe=T=R=ne=null;for(p in r)if(P=r[p],r.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":oe=P;default:l.hasOwnProperty(p)||Ut(t,i,p,null,l,P)}for(f in l)if(p=l[f],P=r[f],l.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":ne=p;break;case"defaultValue":R=p;break;case"multiple":T=p;default:p!==P&&Ut(t,i,f,p,l,P)}i=R,r=T,l=oe,ne!=null?Ks(t,!!r,ne,!1):!!l!=!!r&&(i!=null?Ks(t,!!r,i,!0):Ks(t,!!r,r?[]:"",!1));return;case"textarea":oe=ne=null;for(R in r)if(f=r[R],r.hasOwnProperty(R)&&f!=null&&!l.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ut(t,i,R,null,l,f)}for(T in l)if(f=l[T],p=r[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":ne=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&Ut(t,i,T,f,l,p)}Lr(t,ne,oe);return;case"option":for(var Oe in r)ne=r[Oe],r.hasOwnProperty(Oe)&&ne!=null&&!l.hasOwnProperty(Oe)&&(Oe==="selected"?t.selected=!1:Ut(t,i,Oe,null,l,ne));for(P in l)ne=l[P],oe=r[P],l.hasOwnProperty(P)&&ne!==oe&&(ne!=null||oe!=null)&&(P==="selected"?t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":Ut(t,i,P,ne,l,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in r)ne=r[$e],r.hasOwnProperty($e)&&ne!=null&&!l.hasOwnProperty($e)&&Ut(t,i,$e,null,l,ne);for(ee in l)if(ne=l[ee],oe=r[ee],l.hasOwnProperty(ee)&&ne!==oe&&(ne!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:Ut(t,i,ee,ne,l,oe)}return;default:if(ys(i)){for(var Vt in r)ne=r[Vt],r.hasOwnProperty(Vt)&&ne!==void 0&&!l.hasOwnProperty(Vt)&&Bh(t,i,Vt,void 0,l,ne);for(ue in l)ne=l[ue],oe=r[ue],!l.hasOwnProperty(ue)||ne===oe||ne===void 0&&oe===void 0||Bh(t,i,ue,ne,l,oe);return}}for(var Y in r)ne=r[Y],r.hasOwnProperty(Y)&&ne!=null&&!l.hasOwnProperty(Y)&&Ut(t,i,Y,null,l,ne);for(me in l)ne=l[me],oe=r[me],!l.hasOwnProperty(me)||ne===oe||ne==null&&oe==null||Ut(t,i,me,ne,l,oe)}function nE(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $S(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],p=f.transferSize,T=f.initiatorType,R=f.duration;if(p&&R&&nE(T)){for(T=0,R=f.responseEnd,l+=1;l<r.length;l++){var P=r[l],ee=P.startTime;if(ee>R)break;var ue=P.transferSize,me=P.initiatorType;ue&&nE(me)&&(P=P.responseEnd,T+=ue*(P<R?1:(R-ee)/(P-ee)))}if(--l,i+=8*(p+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ph=null,Fh=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function sE(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iE(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Gh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hh=null;function YS(){var t=window.event;return t&&t.type==="popstate"?t===Hh?!1:(Hh=t,!0):(Hh=null,!1)}var aE=typeof setTimeout=="function"?setTimeout:void 0,QS=typeof clearTimeout=="function"?clearTimeout:void 0,rE=typeof Promise=="function"?Promise:void 0,KS=typeof queueMicrotask=="function"?queueMicrotask:typeof rE<"u"?function(t){return rE.resolve(null).then(t).catch(WS)}:aE;function WS(t){setTimeout(function(){throw t})}function nr(t){return t==="head"}function oE(t,i){var r=i,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),al(i);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")fc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,fc(r);for(var p=r.firstChild;p;){var T=p.nextSibling,R=p.nodeName;p[rs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=T}}else r==="body"&&fc(t.ownerDocument.body);r=f}while(r);al(i)}function lE(t,i){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function zh(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":zh(r),Da(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function JS(t,i,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[rs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=oi(t.nextSibling),t===null)break}return null}function ZS(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=oi(t.nextSibling),t===null))return null;return t}function cE(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=oi(t.nextSibling),t===null))return null;return t}function Xh(t){return t.data==="$?"||t.data==="$~"}function $h(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function eN(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var l=function(){i(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function oi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Yh=null;function uE(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return oi(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function dE(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function fE(t,i,r){switch(i=qu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function fc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Da(t)}var li=new Map,hE=new Set;function Bu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ga=Te.d;Te.d={f:tN,r:nN,D:sN,C:iN,L:aN,m:rN,X:lN,S:oN,M:cN};function tN(){var t=ga.f(),i=ku();return t||i}function nN(t){var i=Mn(t);i!==null&&i.tag===5&&i.type==="form"?Ig(i):ga.r(t)}var nl=typeof document>"u"?null:document;function mE(t,i,r){var l=nl;if(l&&typeof i=="string"&&i){var f=Wn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),hE.has(f)||(hE.add(f),t={rel:t,crossOrigin:r,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Fn(i,"link",t),Zt(i),l.head.appendChild(i)))}}function sN(t){ga.D(t),mE("dns-prefetch",t,null)}function iN(t,i){ga.C(t,i),mE("preconnect",t,i)}function aN(t,i,r){ga.L(t,i,r);var l=nl;if(l&&t&&i){var f='link[rel="preload"][as="'+Wn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Wn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Wn(r.imageSizes)+'"]')):f+='[href="'+Wn(t)+'"]';var p=f;switch(i){case"style":p=sl(t);break;case"script":p=il(t)}li.has(p)||(t=x({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),li.set(p,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(hc(p))||i==="script"&&l.querySelector(mc(p))||(i=l.createElement("link"),Fn(i,"link",t),Zt(i),l.head.appendChild(i)))}}function rN(t,i){ga.m(t,i);var r=nl;if(r&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Wn(l)+'"][href="'+Wn(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=il(t)}if(!li.has(p)&&(t=x({rel:"modulepreload",href:t},i),li.set(p,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(mc(p)))return}l=r.createElement("link"),Fn(l,"link",t),Zt(l),r.head.appendChild(l)}}}function oN(t,i,r){ga.S(t,i,r);var l=nl;if(l&&t){var f=js(l).hoistableStyles,p=sl(t);i=i||"default";var T=f.get(p);if(!T){var R={loading:0,preload:null};if(T=l.querySelector(hc(p)))R.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":i},r),(r=li.get(p))&&Qh(t,r);var P=T=l.createElement("link");Zt(P),Fn(P,"link",t),P._p=new Promise(function(ee,ue){P.onload=ee,P.onerror=ue}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Pu(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:R},f.set(p,T)}}}function lN(t,i){ga.X(t,i);var r=nl;if(r&&t){var l=js(r).hoistableScripts,f=il(t),p=l.get(f);p||(p=r.querySelector(mc(f)),p||(t=x({src:t,async:!0},i),(i=li.get(f))&&Kh(t,i),p=r.createElement("script"),Zt(p),Fn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function cN(t,i){ga.M(t,i);var r=nl;if(r&&t){var l=js(r).hoistableScripts,f=il(t),p=l.get(f);p||(p=r.querySelector(mc(f)),p||(t=x({src:t,async:!0,type:"module"},i),(i=li.get(f))&&Kh(t,i),p=r.createElement("script"),Zt(p),Fn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function pE(t,i,r,l){var f=(f=we.current)?Bu(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=sl(r.href),r=js(f).hoistableStyles,l=r.get(i),l||(l={type:"style",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=sl(r.href);var p=js(f).hoistableStyles,T=p.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=f.querySelector(hc(t)))&&!p._p&&(T.instance=p,T.state.loading=5),li.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},li.set(t,r),p||uN(f,t,r,T.state))),i&&l===null)throw Error(a(528,""));return T}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=il(r),r=js(f).hoistableScripts,l=r.get(i),l||(l={type:"script",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function sl(t){return'href="'+Wn(t)+'"'}function hc(t){return'link[rel="stylesheet"]['+t+"]"}function _E(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function uN(t,i,r,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Fn(i,"link",r),Zt(i),t.head.appendChild(i))}function il(t){return'[src="'+Wn(t)+'"]'}function mc(t){return"script[async]"+t}function gE(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Wn(r.href)+'"]');if(l)return i.instance=l,Zt(l),l;var f=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Zt(l),Fn(l,"style",f),Pu(l,r.precedence,t),i.instance=l;case"stylesheet":f=sl(r.href);var p=t.querySelector(hc(f));if(p)return i.state.loading|=4,i.instance=p,Zt(p),p;l=_E(r),(f=li.get(f))&&Qh(l,f),p=(t.ownerDocument||t).createElement("link"),Zt(p);var T=p;return T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),Fn(p,"link",l),i.state.loading|=4,Pu(p,r.precedence,t),i.instance=p;case"script":return p=il(r.src),(f=t.querySelector(mc(p)))?(i.instance=f,Zt(f),f):(l=r,(f=li.get(p))&&(l=x({},r),Kh(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Zt(f),Fn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Pu(l,r.precedence,t));return i.instance}function Pu(t,i,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var R=l[T];if(R.dataset.precedence===i)p=R;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Qh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Kh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Fu=null;function yE(t,i,r){if(Fu===null){var l=new Map,f=Fu=new Map;f.set(r,l)}else f=Fu,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var p=r[f];if(!(p[rs]||p[ft]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=t+T;var R=l.get(T);R?R.push(p):l.set(T,[p])}}return l}function EE(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function dN(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function vE(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function fN(t,i,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=sl(l.href),p=i.querySelector(hc(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Gu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=p,Zt(p);return}p=i.ownerDocument||i,l=_E(l),(f=li.get(f))&&Qh(l,f),p=p.createElement("link"),Zt(p);var T=p;T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),Fn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Gu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var Wh=0;function hN(t,i){return t.stylesheets&&t.count===0&&zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&zu(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&Wh===0&&(Wh=62500*$S());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&zu(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Wh?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hu=null;function zu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hu=new Map,i.forEach(mN,t),Hu=null,Gu.call(t))}function mN(t,i){if(!(i.state.loading&4)){var r=Hu.get(t);if(r)var l=r.get(null);else{r=new Map,Hu.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),l=T)}l&&r.set(null,l)}f=i.instance,T=f.getAttribute("data-precedence"),p=r.get(T)||l,p===l&&r.set(null,f),r.set(T,f),this.count++,l=Gu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var pc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function pN(t,i,r,l,f,p,T,R,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.hiddenUpdates=ps(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function TE(t,i,r,l,f,p,T,R,P,ee,ue,me){return t=new pN(t,i,r,T,P,ee,ue,me,R),i=1,p===!0&&(i|=24),p=Us(3,null,null,i),t.current=p,p.stateNode=t,i=If(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:i},Df(p),t}function bE(t){return t?(t=Oo,t):Oo}function SE(t,i,r,l,f,p){f=bE(f),l.context===null?l.context=f:l.pendingContext=f,l=za(i),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=Xa(t,l,i),r!==null&&(xs(r,t,i),$l(r,t,i))}function NE(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function Jh(t,i){NE(t,i),(t=t.alternate)&&NE(t,i)}function xE(t){if(t.tag===13||t.tag===31){var i=Br(t,67108864);i!==null&&xs(i,t,67108864),Jh(t,67108864)}}function wE(t){if(t.tag===13||t.tag===31){var i=Fs();i=wi(i);var r=Br(t,i);r!==null&&xs(r,t,i),Jh(t,i)}}var Xu=!0;function _N(t,i,r,l){var f=se.T;se.T=null;var p=Te.p;try{Te.p=2,Zh(t,i,r,l)}finally{Te.p=p,se.T=f}}function gN(t,i,r,l){var f=se.T;se.T=null;var p=Te.p;try{Te.p=8,Zh(t,i,r,l)}finally{Te.p=p,se.T=f}}function Zh(t,i,r,l){if(Xu){var f=em(l);if(f===null)qh(t,i,l,$u,r),RE(t,l);else if(EN(f,t,i,r,l))l.stopPropagation();else if(RE(t,l),i&4&&-1<yN.indexOf(t)){for(;f!==null;){var p=Mn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=ks(p.pendingLanes);if(T!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var P=1<<31-zt(T);R.entanglements[1]|=P,T&=~P}Vi(p),(Ct&6)===0&&(Cu=Dn()+500,cc(0))}}break;case 31:case 13:R=Br(p,2),R!==null&&xs(R,p,2),ku(),Jh(p,2)}if(p=em(l),p===null&&qh(t,i,l,$u,r),p===f)break;f=p}f!==null&&l.stopPropagation()}else qh(t,i,l,null,r)}}function em(t){return t=Ie(t),tm(t)}var $u=null;function tm(t){if($u=null,t=ln(t),t!==null){var i=u(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=h(i),t!==null)return t;t=null}else if(r===31){if(t=g(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return $u=t,null}function AE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(di()){case fi:return 2;case ss:return 8;case hi:case _o:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var nm=!1,sr=null,ir=null,ar=null,_c=new Map,gc=new Map,rr=[],yN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RE(t,i){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":_c.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(i.pointerId)}}function yc(t,i,r,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Mn(i),i!==null&&xE(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function EN(t,i,r,l,f){switch(i){case"focusin":return sr=yc(sr,t,i,r,l,f),!0;case"dragenter":return ir=yc(ir,t,i,r,l,f),!0;case"mouseover":return ar=yc(ar,t,i,r,l,f),!0;case"pointerover":var p=f.pointerId;return _c.set(p,yc(_c.get(p)||null,t,i,r,l,f)),!0;case"gotpointercapture":return p=f.pointerId,gc.set(p,yc(gc.get(p)||null,t,i,r,l,f)),!0}return!1}function CE(t){var i=ln(t.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=h(r),i!==null){t.blockedOn=i,_s(t.priority,function(){wE(r)});return}}else if(i===31){if(i=g(r),i!==null){t.blockedOn=i,_s(t.priority,function(){wE(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=em(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);jr=l,r.target.dispatchEvent(l),jr=null}else return i=Mn(r),i!==null&&xE(i),t.blockedOn=r,!1;i.shift()}return!0}function IE(t,i,r){Yu(t)&&r.delete(i)}function vN(){nm=!1,sr!==null&&Yu(sr)&&(sr=null),ir!==null&&Yu(ir)&&(ir=null),ar!==null&&Yu(ar)&&(ar=null),_c.forEach(IE),gc.forEach(IE)}function Qu(t,i){t.blockedOn===i&&(t.blockedOn=null,nm||(nm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,vN)))}var Ku=null;function kE(t){Ku!==t&&(Ku=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ku===t&&(Ku=null);for(var i=0;i<t.length;i+=3){var r=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(tm(l||r)===null)continue;break}var p=Mn(r);p!==null&&(t.splice(i,3),i-=3,eh(p,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function al(t){function i(P){return Qu(P,t)}sr!==null&&Qu(sr,t),ir!==null&&Qu(ir,t),ar!==null&&Qu(ar,t),_c.forEach(i),gc.forEach(i);for(var r=0;r<rr.length;r++){var l=rr[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<rr.length&&(r=rr[0],r.blockedOn===null);)CE(r),r.blockedOn===null&&rr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],p=r[l+1],T=f[on]||null;if(typeof p=="function")T||kE(r);else if(T){var R=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[on]||null)R=T.formAction;else if(tm(f)!==null)continue}else R=T.action;typeof R=="function"?r[l+1]=R:(r.splice(l,3),l-=3),kE(r)}}}function LE(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function sm(t){this._internalRoot=t}Wu.prototype.render=sm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,l=Fs();SE(r,l,t,i,null,null)},Wu.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;SE(t.current,2,null,t,null,null),ku(),i[Xs]=null}};function Wu(t){this._internalRoot=t}Wu.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ar();t={blockedOn:null,target:t,priority:i};for(var r=0;r<rr.length&&i!==0&&i<rr[r].priority;r++);rr.splice(r,0,t),r===0&&CE(t)}};var jE=e.version;if(jE!=="19.2.4")throw Error(a(527,jE,"19.2.4"));Te.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var TN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Cs=Ju.inject(TN),qe=Ju}catch{}}return vc.createRoot=function(t,i){if(!o(t))throw Error(a(299));var r=!1,l="",f=Bg,p=Pg,T=Fg;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=TE(t,1,!1,null,null,r,l,null,f,p,T,LE),t[Xs]=i.current,Vh(t),new sm(i)},vc.hydrateRoot=function(t,i,r){if(!o(t))throw Error(a(299));var l=!1,f="",p=Bg,T=Pg,R=Fg,P=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.formState!==void 0&&(P=r.formState)),i=TE(t,1,!0,i,r??null,l,f,P,p,T,R,LE),i.context=bE(null),r=i.current,l=Fs(),l=wi(l),f=za(l),f.callback=null,Xa(r,f,l),r=l,i.current.lanes=r,mi(i,r),Vi(i),t[Xs]=i.current,Vh(t),new Wu(i)},vc.version="19.2.4",vc}var GE;function jN(){if(GE)return rm.exports;GE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),rm.exports=LN(),rm.exports}var DN=jN(),um={exports:{}};const ON={},MN=Object.freeze(Object.defineProperty({__proto__:null,default:ON},Symbol.toStringTag,{value:"Module"})),HE=NN(MN);var zE;function UN(){return zE||(zE=1,(function(s,e){var n=void 0,a=function(o){return n||(n=new Promise(function(u,h){var g=typeof o<"u"?o:{},E=g.onAbort;g.onAbort=function(m){h(new Error(m)),E&&E(m)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),s=void 0;var _;_||=typeof g<"u"?g:{};var S=typeof window=="object",x=typeof WorkerGlobalScope<"u",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";_.onRuntimeInitialized=function(){function m(Q,he){switch(typeof he){case"boolean":xe(Q,he?1:0);break;case"number":b(Q,he);break;case"string":J(Q,he,-1,-1);break;case"object":if(he===null)I(Q);else if(he.length!=null){var Re=Ii(he,Ci);re(Q,Re,he.length,-1),us(Re)}else We(Q,"Wrong API use : tried to return a value of an unknown type ("+he+").",-1);break;default:I(Q)}}function y(Q,he){for(var Re=[],Me=0;Me<Q;Me+=1){var Xe=fn(he+4*Me,"i32"),ht=Co(Xe);if(ht===1||ht===2)Xe=v(Xe);else if(ht===3)Xe=gi(Xe);else if(ht===4){ht=Xe,Xe=Io(ht),ht=d(ht);for(var In=new Uint8Array(Xe),vs=0;vs<Xe;vs+=1)In[vs]=V[ht+vs];Xe=In}else Xe=null;Re.push(Xe)}return Re}function N(Q,he){this.Qa=Q,this.db=he,this.Oa=1,this.lb=[]}function C(Q,he){if(this.db=he,he=fi(Q)+1,this.eb=Js(he),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ss(Q,M,this.eb,he),this.kb=this.eb,this.Za=this.pb=null}function F(Q){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),Q!=null){var he=this.filename,Re="/",Me=he;if(Re&&(Re=typeof Re=="string"?Re:ps(Re),Me=he?Qt(Re+"/"+he):Re),he=is(!0,!0),Me=Da(Me,he),Q){if(typeof Q=="string"){Re=Array(Q.length);for(var Xe=0,ht=Q.length;Xe<ht;++Xe)Re[Xe]=Q.charCodeAt(Xe);Q=Re}os(Me,he|146),Re=$s(Me,577),Ki(Re,Q,0,Q.length,0),Qi(Re),os(Me,he)}}this.handleError(De(this.filename,W)),this.db=fn(W,"i32"),Tt(this.db),this.fb={},this.Sa={}}var W=mn(4),ce=_.cwrap,De=ce("sqlite3_open","number",["string","number"]),Fe=ce("sqlite3_close_v2","number",["number"]),Ye=ce("sqlite3_exec","number",["number","string","number","number","number"]),Nt=ce("sqlite3_changes","number",["number"]),en=ce("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Va=ce("sqlite3_sql","string",["number"]),Li=ce("sqlite3_normalized_sql","string",["number"]),Zi=ce("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Zs=ce("sqlite3_bind_text","number",["number","number","number","number","number"]),ea=ce("sqlite3_bind_blob","number",["number","number","number","number","number"]),Dr=ce("sqlite3_bind_double","number",["number","number","number"]),ta=ce("sqlite3_bind_int","number",["number","number","number"]),To=ce("sqlite3_bind_parameter_index","number",["number","string"]),bo=ce("sqlite3_step","number",["number"]),na=ce("sqlite3_errmsg","string",["number"]),Or=ce("sqlite3_column_count","number",["number"]),So=ce("sqlite3_data_count","number",["number"]),qa=ce("sqlite3_column_double","number",["number","number"]),Mr=ce("sqlite3_column_text","string",["number","number"]),No=ce("sqlite3_column_blob","number",["number","number"]),ei=ce("sqlite3_column_bytes","number",["number","number"]),xo=ce("sqlite3_column_type","number",["number","number"]),wo=ce("sqlite3_column_name","string",["number","number"]),Ao=ce("sqlite3_reset","number",["number"]),Ro=ce("sqlite3_clear_bindings","number",["number"]),ji=ce("sqlite3_finalize","number",["number"]),Cn=ce("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Co=ce("sqlite3_value_type","number",["number"]),Io=ce("sqlite3_value_bytes","number",["number"]),gi=ce("sqlite3_value_text","string",["number"]),d=ce("sqlite3_value_blob","number",["number"]),v=ce("sqlite3_value_double","number",["number"]),b=ce("sqlite3_result_double","",["number","number"]),I=ce("sqlite3_result_null","",["number"]),J=ce("sqlite3_result_text","",["number","string","number","number"]),re=ce("sqlite3_result_blob","",["number","number","number","number"]),xe=ce("sqlite3_result_int","",["number","number"]),We=ce("sqlite3_result_error","",["number","string","number"]),Kt=ce("sqlite3_aggregate_context","number",["number","number"]),Tt=ce("RegisterExtensionFunctions","number",["number"]),qt=ce("sqlite3_update_hook","number",["number","number","number"]);N.prototype.bind=function(Q){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(Q)?this.Cb(Q):Q!=null&&typeof Q=="object"?this.Db(Q):!0},N.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var Q=bo(this.Qa);switch(Q){case 100:return!0;case 101:return!1;default:throw this.db.handleError(Q)}},N.prototype.wb=function(Q){return Q==null&&(Q=this.Oa,this.Oa+=1),qa(this.Qa,Q)},N.prototype.Gb=function(Q){if(Q==null&&(Q=this.Oa,this.Oa+=1),Q=Mr(this.Qa,Q),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(Q)},N.prototype.Hb=function(Q){return Q==null&&(Q=this.Oa,this.Oa+=1),Mr(this.Qa,Q)},N.prototype.getBlob=function(Q){Q==null&&(Q=this.Oa,this.Oa+=1);var he=ei(this.Qa,Q);Q=No(this.Qa,Q);for(var Re=new Uint8Array(he),Me=0;Me<he;Me+=1)Re[Me]=V[Q+Me];return Re},N.prototype.get=function(Q,he){he=he||{},Q!=null&&this.bind(Q)&&this.step(),Q=[];for(var Re=So(this.Qa),Me=0;Me<Re;Me+=1)switch(xo(this.Qa,Me)){case 1:var Xe=he.useBigInt?this.Gb(Me):this.wb(Me);Q.push(Xe);break;case 2:Q.push(this.wb(Me));break;case 3:Q.push(this.Hb(Me));break;case 4:Q.push(this.getBlob(Me));break;default:Q.push(null)}return Q},N.prototype.getColumnNames=function(){for(var Q=[],he=Or(this.Qa),Re=0;Re<he;Re+=1)Q.push(wo(this.Qa,Re));return Q},N.prototype.getAsObject=function(Q,he){Q=this.get(Q,he),he=this.getColumnNames();for(var Re={},Me=0;Me<he.length;Me+=1)Re[he[Me]]=Q[Me];return Re},N.prototype.getSQL=function(){return Va(this.Qa)},N.prototype.getNormalizedSQL=function(){return Li(this.Qa)},N.prototype.run=function(Q){return Q!=null&&this.bind(Q),this.step(),this.reset()},N.prototype.sb=function(Q,he){he==null&&(he=this.Oa,this.Oa+=1),Q=hi(Q);var Re=Ii(Q,Ci);this.lb.push(Re),this.db.handleError(Zs(this.Qa,he,Re,Q.length-1,0))},N.prototype.Bb=function(Q,he){he==null&&(he=this.Oa,this.Oa+=1);var Re=Ii(Q,Ci);this.lb.push(Re),this.db.handleError(ea(this.Qa,he,Re,Q.length,0))},N.prototype.rb=function(Q,he){he==null&&(he=this.Oa,this.Oa+=1),this.db.handleError((Q===(Q|0)?ta:Dr)(this.Qa,he,Q))},N.prototype.Eb=function(Q){Q==null&&(Q=this.Oa,this.Oa+=1),ea(this.Qa,Q,0,0,0)},N.prototype.tb=function(Q,he){switch(he==null&&(he=this.Oa,this.Oa+=1),typeof Q){case"string":this.sb(Q,he);return;case"number":this.rb(Q,he);return;case"bigint":this.sb(Q.toString(),he);return;case"boolean":this.rb(Q+0,he);return;case"object":if(Q===null){this.Eb(he);return}if(Q.length!=null){this.Bb(Q,he);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+Q+")."},N.prototype.Db=function(Q){var he=this;return Object.keys(Q).forEach(function(Re){var Me=To(he.Qa,Re);Me!==0&&he.tb(Q[Re],Me)}),!0},N.prototype.Cb=function(Q){for(var he=0;he<Q.length;he+=1)this.tb(Q[he],he+1);return!0},N.prototype.reset=function(){return this.freemem(),Ro(this.Qa)===0&&Ao(this.Qa)===0},N.prototype.freemem=function(){for(var Q;(Q=this.lb.pop())!==void 0;)us(Q)},N.prototype.free=function(){this.freemem();var Q=ji(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,Q},C.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var Q=Rn(),he=mn(4);$n(W),$n(he);try{this.db.handleError(Zi(this.db.db,this.kb,-1,W,he)),this.kb=fn(he,"i32");var Re=fn(W,"i32");return Re===0?(this.mb(),{done:!0}):(this.Za=new N(Re,this.db),this.db.fb[Re]=this.Za,{value:this.Za,done:!1})}catch(Me){throw this.pb=Yi(this.kb),this.mb(),Me}finally{Es(Q)}},C.prototype.mb=function(){us(this.eb),this.eb=null},C.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Yi(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(C.prototype[Symbol.iterator]=function(){return this}),F.prototype.run=function(Q,he){if(!this.db)throw"Database closed";if(he){Q=this.prepare(Q,he);try{Q.step()}finally{Q.free()}}else this.handleError(Ye(this.db,Q,0,0,W));return this},F.prototype.exec=function(Q,he,Re){if(!this.db)throw"Database closed";var Me=Rn(),Xe=null;try{var ht=wn(Q),In=mn(4);for(Q=[];fn(ht,"i8")!==0;){$n(W),$n(In),this.handleError(Zi(this.db,ht,-1,W,In));var vs=fn(W,"i32");if(ht=fn(In,"i32"),vs!==0){var ds=null;for(Xe=new N(vs,this),he!=null&&Xe.bind(he);Xe.step();)ds===null&&(ds={columns:Xe.getColumnNames(),values:[]},Q.push(ds)),ds.values.push(Xe.get(null,Re));Xe.free()}}return Q}catch(Os){throw Xe&&Xe.free(),Os}finally{Es(Me)}},F.prototype.each=function(Q,he,Re,Me,Xe){typeof he=="function"&&(Me=Re,Re=he,he=void 0),Q=this.prepare(Q,he);try{for(;Q.step();)Re(Q.getAsObject(null,Xe))}finally{Q.free()}if(typeof Me=="function")return Me()},F.prototype.prepare=function(Q,he){if($n(W),this.handleError(en(this.db,Q,-1,W,0)),Q=fn(W,"i32"),Q===0)throw"Nothing to prepare";var Re=new N(Q,this);return he!=null&&Re.bind(he),this.fb[Q]=Re},F.prototype.iterateStatements=function(Q){return new C(Q,this)},F.prototype.export=function(){Object.values(this.fb).forEach(function(he){he.free()}),Object.values(this.Sa).forEach(cs),this.Sa={},this.handleError(Fe(this.db));var Q=ls(this.filename);return this.handleError(De(this.filename,W)),this.db=fn(W,"i32"),Tt(this.db),Q},F.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(Q){Q.free()}),Object.values(this.Sa).forEach(cs),this.Sa={},this.Ya&&(cs(this.Ya),this.Ya=void 0),this.handleError(Fe(this.db)),Zt("/"+this.filename),this.db=null)},F.prototype.handleError=function(Q){if(Q===0)return null;throw Q=na(this.db),Error(Q)},F.prototype.getRowsModified=function(){return Nt(this.db)},F.prototype.create_function=function(Q,he){Object.prototype.hasOwnProperty.call(this.Sa,Q)&&(cs(this.Sa[Q]),delete this.Sa[Q]);var Re=Vn(function(Me,Xe,ht){Xe=y(Xe,ht);try{var In=he.apply(null,Xe)}catch(vs){We(Me,vs,-1);return}m(Me,In)},"viii");return this.Sa[Q]=Re,this.handleError(Cn(this.db,Q,he.length,1,0,Re,0,0,0)),this},F.prototype.create_aggregate=function(Q,he){var Re=he.init||function(){return null},Me=he.finalize||function(ds){return ds},Xe=he.step;if(!Xe)throw"An aggregate function must have a step function in "+Q;var ht={};Object.hasOwnProperty.call(this.Sa,Q)&&(cs(this.Sa[Q]),delete this.Sa[Q]),he=Q+"__finalize",Object.hasOwnProperty.call(this.Sa,he)&&(cs(this.Sa[he]),delete this.Sa[he]);var In=Vn(function(ds,Os,ko){var Di=Kt(ds,1);Object.hasOwnProperty.call(ht,Di)||(ht[Di]=Re()),Os=y(Os,ko),Os=[ht[Di]].concat(Os);try{ht[Di]=Xe.apply(null,Os)}catch(Ur){delete ht[Di],We(ds,Ur,-1)}},"viii"),vs=Vn(function(ds){var Os=Kt(ds,1);try{var ko=Me(ht[Os])}catch(Di){delete ht[Os],We(ds,Di,-1);return}m(ds,ko),delete ht[Os]},"vi");return this.Sa[Q]=In,this.Sa[he]=vs,this.handleError(Cn(this.db,Q,Xe.length-1,1,0,0,In,vs,0)),this},F.prototype.updateHook=function(Q){this.Ya&&(qt(this.db,0,0),cs(this.Ya),this.Ya=void 0),Q&&(this.Ya=Vn(function(he,Re,Me,Xe,ht){switch(Re){case 18:he="insert";break;case 23:he="update";break;case 9:he="delete";break;default:throw"unknown operationCode in updateHook callback: "+Re}if(Me=Me?kt(M,Me):"",Xe=Xe?kt(M,Xe):"",ht>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";Q(he,Me,Xe,Number(ht))},"viiiij"),qt(this.db,this.Ya,0))},_.Database=F};var B={..._},G="./this.program",U=(m,y)=>{throw y},q="",z,H;if(w){var K=HE;q=__dirname+"/",H=m=>(m=Ce(m)?new URL(m):m,K.readFileSync(m)),z=async m=>(m=Ce(m)?new URL(m):m,K.readFileSync(m,void 0)),!_.thisProgram&&1<process.argv.length&&(G=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),s.exports=_,U=(m,y)=>{throw process.exitCode=m,y}}else(S||x)&&(x?q=self.location.href:typeof document<"u"&&document.currentScript&&(q=document.currentScript.src),q=q.startsWith("blob:")?"":q.slice(0,q.replace(/[?#].*/,"").lastIndexOf("/")+1),x&&(H=m=>{var y=new XMLHttpRequest;return y.open("GET",m,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),z=async m=>{if(Ce(m))return new Promise((N,C)=>{var F=new XMLHttpRequest;F.open("GET",m,!0),F.responseType="arraybuffer",F.onload=()=>{F.status==200||F.status==0&&F.response?N(F.response):C(F.status)},F.onerror=C,F.send(null)});var y=await fetch(m,{credentials:"same-origin"});if(y.ok)return y.arrayBuffer();throw Error(y.status+" : "+y.url)});var ie=_.print||console.log.bind(console),Ee=_.printErr||console.error.bind(console);Object.assign(_,B),B=null,_.thisProgram&&(G=_.thisProgram);var ge=_.wasmBinary,D,A=!1,j,V,M,O,k,Ae,Je,se,Te,Ce=m=>m.startsWith("file://");function rt(){var m=D.buffer;_.HEAP8=V=new Int8Array(m),_.HEAP16=O=new Int16Array(m),_.HEAPU8=M=new Uint8Array(m),_.HEAPU16=new Uint16Array(m),_.HEAP32=k=new Int32Array(m),_.HEAPU32=Ae=new Uint32Array(m),_.HEAPF32=Je=new Float32Array(m),_.HEAPF64=Te=new Float64Array(m),_.HEAP64=se=new BigInt64Array(m),_.HEAPU64=new BigUint64Array(m)}var at=0,X=null;function de(m){throw _.onAbort?.(m),m="Aborted("+m+")",Ee(m),A=!0,new WebAssembly.RuntimeError(m+". Build with -sASSERTIONS for more info.")}var le;async function be(m){if(!ge)try{var y=await z(m);return new Uint8Array(y)}catch{}if(m==le&&ge)m=new Uint8Array(ge);else if(H)m=H(m);else throw"both async and sync fetching of the wasm failed";return m}async function ae(m,y){try{var N=await be(m);return await WebAssembly.instantiate(N,y)}catch(C){Ee(`failed to asynchronously prepare wasm: ${C}`),de(C)}}async function we(m){var y=le;if(!ge&&typeof WebAssembly.instantiateStreaming=="function"&&!Ce(y)&&!w)try{var N=fetch(y,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(N,m)}catch(C){Ee(`wasm streaming compile failed: ${C}`),Ee("falling back to ArrayBuffer instantiation")}return ae(y,m)}class Pe{name="ExitStatus";constructor(y){this.message=`Program terminated with exit(${y})`,this.status=y}}var wt=m=>{for(;0<m.length;)m.shift()(_)},yt=[],rn=[],ms=()=>{var m=_.preRun.shift();rn.unshift(m)};function fn(m,y="i8"){switch(y.endsWith("*")&&(y="*"),y){case"i1":return V[m];case"i8":return V[m];case"i16":return O[m>>1];case"i32":return k[m>>2];case"i64":return se[m>>3];case"float":return Je[m>>2];case"double":return Te[m>>3];case"*":return Ae[m>>2];default:de(`invalid type for getValue: ${y}`)}}var Ni=_.noExitRuntime||!0;function $n(m){var y="i32";switch(y.endsWith("*")&&(y="*"),y){case"i1":V[m]=0;break;case"i8":V[m]=0;break;case"i16":O[m>>1]=0;break;case"i32":k[m>>2]=0;break;case"i64":se[m>>3]=BigInt(0);break;case"float":Je[m>>2]=0;break;case"double":Te[m>>3]=0;break;case"*":Ae[m>>2]=0;break;default:de(`invalid type for setValue: ${y}`)}}var Ia=typeof TextDecoder<"u"?new TextDecoder:void 0,kt=(m,y=0,N=NaN)=>{var C=y+N;for(N=y;m[N]&&!(N>=C);)++N;if(16<N-y&&m.buffer&&Ia)return Ia.decode(m.subarray(y,N));for(C="";y<N;){var F=m[y++];if(F&128){var W=m[y++]&63;if((F&224)==192)C+=String.fromCharCode((F&31)<<6|W);else{var ce=m[y++]&63;F=(F&240)==224?(F&15)<<12|W<<6|ce:(F&7)<<18|W<<12|ce<<6|m[y++]&63,65536>F?C+=String.fromCharCode(F):(F-=65536,C+=String.fromCharCode(55296|F>>10,56320|F&1023))}}else C+=String.fromCharCode(F)}return C},Yi=(m,y)=>m?kt(M,m,y):"",ka=(m,y)=>{for(var N=0,C=m.length-1;0<=C;C--){var F=m[C];F==="."?m.splice(C,1):F===".."?(m.splice(C,1),N++):N&&(m.splice(C,1),N--)}if(y)for(;N;N--)m.unshift("..");return m},Qt=m=>{var y=m.charAt(0)==="/",N=m.slice(-1)==="/";return(m=ka(m.split("/").filter(C=>!!C),!y).join("/"))||y||(m="."),m&&N&&(m+="/"),(y?"/":"")+m},nn=m=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(m).slice(1);return m=y[0],y=y[1],!m&&!y?".":(y&&=y.slice(0,-1),m+y)},Rs=m=>m&&m.match(/([^\/]+|\/)\/*$/)[1],Ol=()=>{if(w){var m=HE;return y=>m.randomFillSync(y)}return y=>crypto.getRandomValues(y)},Sr=m=>{(Sr=Ol())(m)},Dn=(...m)=>{for(var y="",N=!1,C=m.length-1;-1<=C&&!N;C--){if(N=0<=C?m[C]:"/",typeof N!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!N)return"";y=N+"/"+y,N=N.charAt(0)==="/"}return y=ka(y.split("/").filter(F=>!!F),!N).join("/"),(N?"/":"")+y||"."},di=[],fi=m=>{for(var y=0,N=0;N<m.length;++N){var C=m.charCodeAt(N);127>=C?y++:2047>=C?y+=2:55296<=C&&57343>=C?(y+=4,++N):y+=3}return y},ss=(m,y,N,C)=>{if(!(0<C))return 0;var F=N;C=N+C-1;for(var W=0;W<m.length;++W){var ce=m.charCodeAt(W);if(55296<=ce&&57343>=ce){var De=m.charCodeAt(++W);ce=65536+((ce&1023)<<10)|De&1023}if(127>=ce){if(N>=C)break;y[N++]=ce}else{if(2047>=ce){if(N+1>=C)break;y[N++]=192|ce>>6}else{if(65535>=ce){if(N+2>=C)break;y[N++]=224|ce>>12}else{if(N+3>=C)break;y[N++]=240|ce>>18,y[N++]=128|ce>>12&63}y[N++]=128|ce>>6&63}y[N++]=128|ce&63}}return y[N]=0,N-F},hi=(m,y)=>{var N=Array(fi(m)+1);return m=ss(m,N,0,N.length),y&&(N.length=m),N},_o=[];function Nr(m,y){_o[m]={input:[],output:[],cb:y},ja(m,go)}var go={open(m){var y=_o[m.node.rdev];if(!y)throw new Se(43);m.tty=y,m.seekable=!1},close(m){m.tty.cb.fsync(m.tty)},fsync(m){m.tty.cb.fsync(m.tty)},read(m,y,N,C){if(!m.tty||!m.tty.cb.xb)throw new Se(60);for(var F=0,W=0;W<C;W++){try{var ce=m.tty.cb.xb(m.tty)}catch{throw new Se(29)}if(ce===void 0&&F===0)throw new Se(6);if(ce==null)break;F++,y[N+W]=ce}return F&&(m.node.atime=Date.now()),F},write(m,y,N,C){if(!m.tty||!m.tty.cb.qb)throw new Se(60);try{for(var F=0;F<C;F++)m.tty.cb.qb(m.tty,y[N+F])}catch{throw new Se(29)}return C&&(m.node.mtime=m.node.ctime=Date.now()),F}},yo={xb(){e:{if(!di.length){var m=null;if(w){var y=Buffer.alloc(256),N=0,C=process.stdin.fd;try{N=K.readSync(C,y,0,256)}catch(F){if(F.toString().includes("EOF"))N=0;else throw F}0<N&&(m=y.slice(0,N).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(m=window.prompt("Input: "),m!==null&&(m+=`
`));if(!m){m=null;break e}di=hi(m,!0)}m=di.shift()}return m},qb(m,y){y===null||y===10?(ie(kt(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(ie(kt(m.output)),m.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Cs={qb(m,y){y===null||y===10?(Ee(kt(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(Ee(kt(m.output)),m.output=[])}},qe={Wa:null,Xa(){return qe.createNode(null,"/",16895,0)},createNode(m,y,N,C){if((N&61440)===24576||(N&61440)===4096)throw new Se(63);return qe.Wa||(qe.Wa={dir:{node:{Ta:qe.La.Ta,Ua:qe.La.Ua,lookup:qe.La.lookup,hb:qe.La.hb,rename:qe.La.rename,unlink:qe.La.unlink,rmdir:qe.La.rmdir,readdir:qe.La.readdir,symlink:qe.La.symlink},stream:{Va:qe.Ma.Va}},file:{node:{Ta:qe.La.Ta,Ua:qe.La.Ua},stream:{Va:qe.Ma.Va,read:qe.Ma.read,write:qe.Ma.write,ib:qe.Ma.ib,jb:qe.Ma.jb}},link:{node:{Ta:qe.La.Ta,Ua:qe.La.Ua,readlink:qe.La.readlink},stream:{}},ub:{node:{Ta:qe.La.Ta,Ua:qe.La.Ua},stream:Ul}}),N=La(m,y,N,C),hn(N.mode)?(N.La=qe.Wa.dir.node,N.Ma=qe.Wa.dir.stream,N.Na={}):(N.mode&61440)===32768?(N.La=qe.Wa.file.node,N.Ma=qe.Wa.file.stream,N.Ra=0,N.Na=null):(N.mode&61440)===40960?(N.La=qe.Wa.link.node,N.Ma=qe.Wa.link.stream):(N.mode&61440)===8192&&(N.La=qe.Wa.ub.node,N.Ma=qe.Wa.ub.stream),N.atime=N.mtime=N.ctime=Date.now(),m&&(m.Na[y]=N,m.atime=m.mtime=m.ctime=N.atime),N},Sb(m){return m.Na?m.Na.subarray?m.Na.subarray(0,m.Ra):new Uint8Array(m.Na):new Uint8Array(0)},La:{Ta(m){var y={};return y.dev=(m.mode&61440)===8192?m.id:1,y.ino=m.id,y.mode=m.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=m.rdev,hn(m.mode)?y.size=4096:(m.mode&61440)===32768?y.size=m.Ra:(m.mode&61440)===40960?y.size=m.link.length:y.size=0,y.atime=new Date(m.atime),y.mtime=new Date(m.mtime),y.ctime=new Date(m.ctime),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},Ua(m,y){for(var N of["mode","atime","mtime","ctime"])y[N]!=null&&(m[N]=y[N]);y.size!==void 0&&(y=y.size,m.Ra!=y&&(y==0?(m.Na=null,m.Ra=0):(N=m.Na,m.Na=new Uint8Array(y),N&&m.Na.set(N.subarray(0,Math.min(y,m.Ra))),m.Ra=y)))},lookup(){throw qe.vb},hb(m,y,N,C){return qe.createNode(m,y,N,C)},rename(m,y,N){try{var C=as(y,N)}catch{}if(C){if(hn(m.mode))for(var F in C.Na)throw new Se(55);wr(C)}delete m.parent.Na[m.name],y.Na[N]=m,m.name=N,y.ctime=y.mtime=m.parent.ctime=m.parent.mtime=Date.now()},unlink(m,y){delete m.Na[y],m.ctime=m.mtime=Date.now()},rmdir(m,y){var N=as(m,y),C;for(C in N.Na)throw new Se(55);delete m.Na[y],m.ctime=m.mtime=Date.now()},readdir(m){return[".","..",...Object.keys(m.Na)]},symlink(m,y,N){return m=qe.createNode(m,y,41471,0),m.link=N,m},readlink(m){if((m.mode&61440)!==40960)throw new Se(28);return m.link}},Ma:{read(m,y,N,C,F){var W=m.node.Na;if(F>=m.node.Ra)return 0;if(m=Math.min(m.node.Ra-F,C),8<m&&W.subarray)y.set(W.subarray(F,F+m),N);else for(C=0;C<m;C++)y[N+C]=W[F+C];return m},write(m,y,N,C,F,W){if(y.buffer===V.buffer&&(W=!1),!C)return 0;if(m=m.node,m.mtime=m.ctime=Date.now(),y.subarray&&(!m.Na||m.Na.subarray)){if(W)return m.Na=y.subarray(N,N+C),m.Ra=C;if(m.Ra===0&&F===0)return m.Na=y.slice(N,N+C),m.Ra=C;if(F+C<=m.Ra)return m.Na.set(y.subarray(N,N+C),F),C}W=F+C;var ce=m.Na?m.Na.length:0;if(ce>=W||(W=Math.max(W,ce*(1048576>ce?2:1.125)>>>0),ce!=0&&(W=Math.max(W,256)),ce=m.Na,m.Na=new Uint8Array(W),0<m.Ra&&m.Na.set(ce.subarray(0,m.Ra),0)),m.Na.subarray&&y.subarray)m.Na.set(y.subarray(N,N+C),F);else for(W=0;W<C;W++)m.Na[F+W]=y[N+W];return m.Ra=Math.max(m.Ra,F+C),C},Va(m,y,N){if(N===1?y+=m.position:N===2&&(m.node.mode&61440)===32768&&(y+=m.node.Ra),0>y)throw new Se(28);return y},ib(m,y,N,C,F){if((m.node.mode&61440)!==32768)throw new Se(43);if(m=m.node.Na,F&2||!m||m.buffer!==V.buffer){F=!0,C=65536*Math.ceil(y/65536);var W=ki(65536,C);if(W&&M.fill(0,W,W+C),C=W,!C)throw new Se(48);m&&((0<N||N+y<m.length)&&(m.subarray?m=m.subarray(N,N+y):m=Array.prototype.slice.call(m,N,N+y)),V.set(m,C))}else F=!1,C=m.byteOffset;return{Kb:C,Ab:F}},jb(m,y,N,C){return qe.Ma.write(m,y,0,C,N,!1),0}}},is=(m,y)=>{var N=0;return m&&(N|=365),y&&(N|=146),N},zt=null,xr={},Is=[],Eo=1,bn=null,xi=!1,Jt=!0,ks={},Se=class{name="ErrnoError";constructor(m){this.Pa=m}},Ls=class{gb={};node=null;get flags(){return this.gb.flags}set flags(m){this.gb.flags=m}get position(){return this.gb.position}set position(m){this.gb.position=m}},Ml=class{La={};Ma={};ab=null;constructor(m,y,N,C){m||=this,this.parent=m,this.Xa=m.Xa,this.id=Eo++,this.name=y,this.mode=N,this.rdev=C,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(m){m?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(m){m?this.mode|=146:this.mode&=-147}};function On(m,y={}){if(!m)throw new Se(44);y.nb??(y.nb=!0),m.charAt(0)==="/"||(m="//"+m);var N=0;e:for(;40>N;N++){m=m.split("/").filter(De=>!!De);for(var C=zt,F="/",W=0;W<m.length;W++){var ce=W===m.length-1;if(ce&&y.parent)break;if(m[W]!==".")if(m[W]==="..")F=nn(F),C=C.parent;else{F=Qt(F+"/"+m[W]);try{C=as(C,m[W])}catch(De){if(De?.Pa===44&&ce&&y.Jb)return{path:F};throw De}if(!C.ab||ce&&!y.nb||(C=C.ab.root),(C.mode&61440)===40960&&(!ce||y.$a)){if(!C.La.readlink)throw new Se(52);C=C.La.readlink(C),C.charAt(0)==="/"||(C=nn(F)+"/"+C),m=C+"/"+m.slice(W+1).join("/");continue e}}}return{path:F,node:C}}throw new Se(32)}function ps(m){for(var y;;){if(m===m.parent)return m=m.Xa.zb,y?m[m.length-1]!=="/"?`${m}/${y}`:m+y:m;y=y?`${m.name}/${y}`:m.name,m=m.parent}}function mi(m,y){for(var N=0,C=0;C<y.length;C++)N=(N<<5)-N+y.charCodeAt(C)|0;return(m+N>>>0)%bn.length}function wr(m){var y=mi(m.parent.id,m.name);if(bn[y]===m)bn[y]=m.bb;else for(y=bn[y];y;){if(y.bb===m){y.bb=m.bb;break}y=y.bb}}function as(m,y){var N=hn(m.mode)?(N=Yn(m,"x"))?N:m.La.lookup?0:2:54;if(N)throw new Se(N);for(N=bn[mi(m.id,y)];N;N=N.bb){var C=N.name;if(N.parent.id===m.id&&C===y)return N}return m.La.lookup(m,y)}function La(m,y,N,C){return m=new Ml(m,y,N,C),y=mi(m.parent.id,m.name),m.bb=bn[y],bn[y]=m}function hn(m){return(m&61440)===16384}function wi(m){var y=["r","w","rw"][m&3];return m&512&&(y+="w"),y}function Yn(m,y){if(Jt)return 0;if(!y.includes("r")||m.mode&292){if(y.includes("w")&&!(m.mode&146)||y.includes("x")&&!(m.mode&73))return 2}else return 2;return 0}function Ar(m,y){if(!hn(m.mode))return 54;try{return as(m,y),20}catch{}return Yn(m,"wx")}function _s(m,y,N){try{var C=as(m,y)}catch(F){return F.Pa}if(m=Yn(m,"wx"))return m;if(N){if(!hn(C.mode))return 54;if(C===C.parent||ps(C)==="/")return 10}else if(hn(C.mode))return 31;return 0}function Qn(m){if(!m)throw new Se(63);return m}function ft(m){if(m=Is[m],!m)throw new Se(8);return m}function on(m,y=-1){if(m=Object.assign(new Ls,m),y==-1)e:{for(y=0;4096>=y;y++)if(!Is[y])break e;throw new Se(33)}return m.fd=y,Is[y]=m}function Xs(m,y=-1){return m=on(m,y),m.Ma?.Rb?.(m),m}function Ai(m,y,N){var C=m?.Ma.Ua;m=C?m:y,C??=y.La.Ua,Qn(C),C(m,N)}var Ul={open(m){m.Ma=xr[m.node.rdev].Ma,m.Ma.open?.(m)},Va(){throw new Se(70)}};function ja(m,y){xr[m]={Ma:y}}function Rr(m,y){var N=y==="/";if(N&&zt)throw new Se(10);if(!N&&y){var C=On(y,{nb:!1});if(y=C.path,C=C.node,C.ab)throw new Se(10);if(!hn(C.mode))throw new Se(54)}y={type:m,Wb:{},zb:y,Ib:[]},m=m.Xa(y),m.Xa=y,y.root=m,N?zt=m:C&&(C.ab=y,C.Xa&&C.Xa.Ib.push(y))}function rs(m,y,N){var C=On(m,{parent:!0}).node;if(m=Rs(m),!m)throw new Se(28);if(m==="."||m==="..")throw new Se(20);var F=Ar(C,m);if(F)throw new Se(F);if(!C.La.hb)throw new Se(63);return C.La.hb(C,m,y,N)}function Da(m,y=438){return rs(m,y&4095|32768,0)}function ln(m,y=511){return rs(m,y&1023|16384,0)}function Mn(m,y,N){typeof N>"u"&&(N=y,y=438),rs(m,y|8192,N)}function Un(m,y){if(!Dn(m))throw new Se(44);var N=On(y,{parent:!0}).node;if(!N)throw new Se(44);y=Rs(y);var C=Ar(N,y);if(C)throw new Se(C);if(!N.La.symlink)throw new Se(63);N.La.symlink(N,y,m)}function js(m){var y=On(m,{parent:!0}).node;m=Rs(m);var N=as(y,m),C=_s(y,m,!0);if(C)throw new Se(C);if(!y.La.rmdir)throw new Se(63);if(N.ab)throw new Se(10);y.La.rmdir(y,m),wr(N)}function Zt(m){var y=On(m,{parent:!0}).node;if(!y)throw new Se(44);m=Rs(m);var N=as(y,m),C=_s(y,m,!1);if(C)throw new Se(C);if(!y.La.unlink)throw new Se(63);if(N.ab)throw new Se(10);y.La.unlink(y,m),wr(N)}function pi(m,y){return m=On(m,{$a:!y}).node,Qn(m.La.Ta)(m)}function Oa(m,y,N,C){Ai(m,y,{mode:N&4095|y.mode&-4096,ctime:Date.now(),Fb:C})}function os(m,y){m=typeof m=="string"?On(m,{$a:!0}).node:m,Oa(null,m,y)}function Ds(m,y,N){if(hn(y.mode))throw new Se(31);if((y.mode&61440)!==32768)throw new Se(28);var C=Yn(y,"w");if(C)throw new Se(C);Ai(m,y,{size:N,timestamp:Date.now()})}function $s(m,y,N=438){if(m==="")throw new Se(44);if(typeof y=="string"){var C={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[y];if(typeof C>"u")throw Error(`Unknown file open mode: ${y}`);y=C}if(N=y&64?N&4095|32768:0,typeof m=="object")C=m;else{var F=m.endsWith("/");m=On(m,{$a:!(y&131072),Jb:!0}),C=m.node,m=m.path}var W=!1;if(y&64)if(C){if(y&128)throw new Se(20)}else{if(F)throw new Se(31);C=rs(m,N|511,0),W=!0}if(!C)throw new Se(44);if((C.mode&61440)===8192&&(y&=-513),y&65536&&!hn(C.mode))throw new Se(54);if(!W&&(F=C?(C.mode&61440)===40960?32:hn(C.mode)&&(wi(y)!=="r"||y&576)?31:Yn(C,wi(y)):44))throw new Se(F);return y&512&&!W&&(F=C,F=typeof F=="string"?On(F,{$a:!0}).node:F,Ds(null,F,0)),y&=-131713,F=on({node:C,path:ps(C),flags:y,seekable:!0,position:0,Ma:C.Ma,Lb:[],error:!1}),F.Ma.open&&F.Ma.open(F),W&&os(C,N&511),!_.logReadFiles||y&1||m in ks||(ks[m]=1),F}function Qi(m){if(m.fd===null)throw new Se(8);m.ob&&(m.ob=null);try{m.Ma.close&&m.Ma.close(m)}catch(y){throw y}finally{Is[m.fd]=null}m.fd=null}function Ma(m,y,N){if(m.fd===null)throw new Se(8);if(!m.seekable||!m.Ma.Va)throw new Se(70);if(N!=0&&N!=1&&N!=2)throw new Se(28);m.position=m.Ma.Va(m,y,N),m.Lb=[]}function Cr(m,y,N,C,F){if(0>C||0>F)throw new Se(28);if(m.fd===null)throw new Se(8);if((m.flags&2097155)===1)throw new Se(8);if(hn(m.node.mode))throw new Se(31);if(!m.Ma.read)throw new Se(28);var W=typeof F<"u";if(!W)F=m.position;else if(!m.seekable)throw new Se(70);return y=m.Ma.read(m,y,N,C,F),W||(m.position+=y),y}function Ki(m,y,N,C,F){if(0>C||0>F)throw new Se(28);if(m.fd===null)throw new Se(8);if((m.flags&2097155)===0)throw new Se(8);if(hn(m.node.mode))throw new Se(31);if(!m.Ma.write)throw new Se(28);m.seekable&&m.flags&1024&&Ma(m,0,2);var W=typeof F<"u";if(!W)F=m.position;else if(!m.seekable)throw new Se(70);return y=m.Ma.write(m,y,N,C,F,void 0),W||(m.position+=y),y}function ls(m){var y,N=$s(m,N||0);m=pi(m).size;var C=new Uint8Array(m);return Cr(N,C,0,m,0),y=C,Qi(N),y}function jt(m,y,N){m=Qt("/dev/"+m);var C=is(!!y,!!N);jt.yb??(jt.yb=64);var F=jt.yb++<<8|0;ja(F,{open(W){W.seekable=!1},close(){N?.buffer?.length&&N(10)},read(W,ce,De,Fe){for(var Ye=0,Nt=0;Nt<Fe;Nt++){try{var en=y()}catch{throw new Se(29)}if(en===void 0&&Ye===0)throw new Se(6);if(en==null)break;Ye++,ce[De+Nt]=en}return Ye&&(W.node.atime=Date.now()),Ye},write(W,ce,De,Fe){for(var Ye=0;Ye<Fe;Ye++)try{N(ce[De+Ye])}catch{throw new Se(29)}return Fe&&(W.node.mtime=W.node.ctime=Date.now()),Ye}}),Mn(m,C,F)}var tt={};function Kn(m,y,N){if(y.charAt(0)==="/")return y;if(m=m===-100?"/":ft(m).path,y.length==0){if(!N)throw new Se(44);return m}return m+"/"+y}function Ri(m,y){k[m>>2]=y.dev,k[m+4>>2]=y.mode,Ae[m+8>>2]=y.nlink,k[m+12>>2]=y.uid,k[m+16>>2]=y.gid,k[m+20>>2]=y.rdev,se[m+24>>3]=BigInt(y.size),k[m+32>>2]=4096,k[m+36>>2]=y.blocks;var N=y.atime.getTime(),C=y.mtime.getTime(),F=y.ctime.getTime();return se[m+40>>3]=BigInt(Math.floor(N/1e3)),Ae[m+48>>2]=N%1e3*1e6,se[m+56>>3]=BigInt(Math.floor(C/1e3)),Ae[m+64>>2]=C%1e3*1e6,se[m+72>>3]=BigInt(Math.floor(F/1e3)),Ae[m+80>>2]=F%1e3*1e6,se[m+88>>3]=BigInt(y.ino),0}var vt=void 0,Ys=()=>{var m=k[+vt>>2];return vt+=4,m},gs=0,Wi=[0,31,60,91,121,152,182,213,244,274,305,335],Wn=[0,31,59,90,120,151,181,212,243,273,304,334],Qs={},Ir=m=>{j=m,Ni||0<gs||(_.onExit?.(m),A=!0),U(m,new Pe(m))},kr=m=>{if(!A)try{if(m(),!(Ni||0<gs))try{j=m=j,Ir(m)}catch(y){y instanceof Pe||y=="unwind"||U(1,y)}}catch(y){y instanceof Pe||y=="unwind"||U(1,y)}},Ks={},Lr=()=>{if(!Ws){var m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:G||"./this.program"},y;for(y in Ks)Ks[y]===void 0?delete m[y]:m[y]=Ks[y];var N=[];for(y in m)N.push(`${y}=${m[y]}`);Ws=N}return Ws},Ws,wn=m=>{var y=fi(m)+1,N=mn(y);return ss(m,M,N,y),N},vo=(m,y,N,C)=>{var F={string:Ye=>{var Nt=0;return Ye!=null&&Ye!==0&&(Nt=wn(Ye)),Nt},array:Ye=>{var Nt=mn(Ye.length);return V.set(Ye,Nt),Nt}};m=_["_"+m];var W=[],ce=0;if(C)for(var De=0;De<C.length;De++){var Fe=F[N[De]];Fe?(ce===0&&(ce=Rn()),W[De]=Fe(C[De])):W[De]=C[De]}return N=m(...W),N=(function(Ye){return ce!==0&&Es(ce),y==="string"?Ye?kt(M,Ye):"":y==="boolean"?!!Ye:Ye})(N)},Ci=0,Ii=(m,y)=>(y=y==1?mn(m.length):Js(m.length),m.subarray||m.slice||(m=new Uint8Array(m)),M.set(m,y),y),ys,Ua=[],An,cs=m=>{ys.delete(An.get(m)),An.set(m,null),Ua.push(m)},Vn=(m,y)=>{if(!ys){ys=new WeakMap;var N=An.length;if(ys)for(var C=0;C<0+N;C++){var F=An.get(C);F&&ys.set(F,C)}}if(N=ys.get(m)||0)return N;if(Ua.length)N=Ua.pop();else{try{An.grow(1)}catch(Fe){throw Fe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Fe}N=An.length-1}try{An.set(N,m)}catch(Fe){if(!(Fe instanceof TypeError))throw Fe;if(typeof WebAssembly.Function=="function"){var W=WebAssembly.Function;C={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},F={parameters:[],results:y[0]=="v"?[]:[C[y[0]]]};for(var ce=1;ce<y.length;++ce)F.parameters.push(C[y[ce]]);y=new W(F,m)}else{C=[1],F=y.slice(0,1),y=y.slice(1),ce={i:127,p:127,j:126,f:125,d:124,e:111},C.push(96);var De=y.length;128>De?C.push(De):C.push(De%128|128,De>>7);for(W of y)C.push(ce[W]);F=="v"?C.push(0):C.push(1,ce[F]),y=[0,97,115,109,1,0,0,0,1],W=C.length,128>W?y.push(W):y.push(W%128|128,W>>7),y.push(...C),y.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),y=new WebAssembly.Module(new Uint8Array(y)),y=new WebAssembly.Instance(y,{e:{f:m}}).exports.f}An.set(N,y)}return ys.set(m,N),N};bn=Array(4096),Rr(qe,"/"),ln("/tmp"),ln("/home"),ln("/home/web_user"),(function(){ln("/dev"),ja(259,{read:()=>0,write:(C,F,W,ce)=>ce,Va:()=>0}),Mn("/dev/null",259),Nr(1280,yo),Nr(1536,Cs),Mn("/dev/tty",1280),Mn("/dev/tty1",1536);var m=new Uint8Array(1024),y=0,N=()=>(y===0&&(Sr(m),y=m.byteLength),m[--y]);jt("random",N),jt("urandom",N),ln("/dev/shm"),ln("/dev/shm/tmp")})(),(function(){ln("/proc");var m=ln("/proc/self");ln("/proc/self/fd"),Rr({Xa(){var y=La(m,"fd",16895,73);return y.Ma={Va:qe.Ma.Va},y.La={lookup(N,C){N=+C;var F=ft(N);return N={parent:null,Xa:{zb:"fake"},La:{readlink:()=>F.path},id:N+1},N.parent=N},readdir(){return Array.from(Is.entries()).filter(([,N])=>N).map(([N])=>N.toString())}},y}},"/proc/self/fd")})(),qe.vb=new Se(44),qe.vb.stack="<generic error, no stack>";var jr={a:(m,y,N,C)=>de(`Assertion failed: ${m?kt(M,m):""}, at: `+[y?y?kt(M,y):"":"unknown filename",N,C?C?kt(M,C):"":"unknown function"]),i:function(m,y){try{return m=m?kt(M,m):"",os(m,y),0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},L:function(m,y,N){try{if(y=y?kt(M,y):"",y=Kn(m,y),N&-8)return-28;var C=On(y,{$a:!0}).node;return C?(m="",N&4&&(m+="r"),N&2&&(m+="w"),N&1&&(m+="x"),m&&Yn(C,m)?-2:0):-44}catch(F){if(typeof tt>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},j:function(m,y){try{var N=ft(m);return Oa(N,N.node,y,!1),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},h:function(m){try{var y=ft(m);return Ai(y,y.node,{timestamp:Date.now(),Fb:!1}),0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},b:function(m,y,N){vt=N;try{var C=ft(m);switch(y){case 0:var F=Ys();if(0>F)break;for(;Is[F];)F++;return Xs(C,F).fd;case 1:case 2:return 0;case 3:return C.flags;case 4:return F=Ys(),C.flags|=F,0;case 12:return F=Ys(),O[F+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},g:function(m,y){try{var N=ft(m),C=N.node,F=N.Ma.Ta;m=F?N:C,F??=C.La.Ta,Qn(F);var W=F(m);return Ri(y,W)}catch(ce){if(typeof tt>"u"||ce.name!=="ErrnoError")throw ce;return-ce.Pa}},H:function(m,y){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var N=ft(m);if(0>y||(N.flags&2097155)===0)throw new Se(28);return Ds(N,N.node,y),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},G:function(m,y){try{if(y===0)return-28;var N=fi("/")+1;return y<N?-68:(ss("/",M,m,y),N)}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},K:function(m,y){try{return m=m?kt(M,m):"",Ri(y,pi(m,!0))}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},C:function(m,y,N){try{return y=y?kt(M,y):"",y=Kn(m,y),ln(y,N),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},J:function(m,y,N,C){try{y=y?kt(M,y):"";var F=C&256;return y=Kn(m,y,C&4096),Ri(N,F?pi(y,!0):pi(y))}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},x:function(m,y,N,C){vt=C;try{y=y?kt(M,y):"",y=Kn(m,y);var F=C?Ys():0;return $s(y,N,F).fd}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},v:function(m,y,N,C){try{if(y=y?kt(M,y):"",y=Kn(m,y),0>=C)return-28;var F=On(y).node;if(!F)throw new Se(44);if(!F.La.readlink)throw new Se(28);var W=F.La.readlink(F),ce=Math.min(C,fi(W)),De=V[N+ce];return ss(W,M,N,C+1),V[N+ce]=De,ce}catch(Fe){if(typeof tt>"u"||Fe.name!=="ErrnoError")throw Fe;return-Fe.Pa}},u:function(m){try{return m=m?kt(M,m):"",js(m),0}catch(y){if(typeof tt>"u"||y.name!=="ErrnoError")throw y;return-y.Pa}},f:function(m,y){try{return m=m?kt(M,m):"",Ri(y,pi(m))}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},r:function(m,y,N){try{return y=y?kt(M,y):"",y=Kn(m,y),N===0?Zt(y):N===512?js(y):de("Invalid flags passed to unlinkat"),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},q:function(m,y,N){try{y=y?kt(M,y):"",y=Kn(m,y,!0);var C=Date.now(),F,W;if(N){var ce=Ae[N>>2]+4294967296*k[N+4>>2],De=k[N+8>>2];De==1073741823?F=C:De==1073741822?F=null:F=1e3*ce+De/1e6,N+=16,ce=Ae[N>>2]+4294967296*k[N+4>>2],De=k[N+8>>2],De==1073741823?W=C:De==1073741822?W=null:W=1e3*ce+De/1e6}else W=F=C;if((W??F)!==null){m=F;var Fe=On(y,{$a:!0}).node;Qn(Fe.La.Ua)(Fe,{atime:m,mtime:W})}return 0}catch(Ye){if(typeof tt>"u"||Ye.name!=="ErrnoError")throw Ye;return-Ye.Pa}},m:()=>de(""),l:()=>{Ni=!1,gs=0},A:function(m,y){m=-9007199254740992>m||9007199254740992<m?NaN:Number(m),m=new Date(1e3*m),k[y>>2]=m.getSeconds(),k[y+4>>2]=m.getMinutes(),k[y+8>>2]=m.getHours(),k[y+12>>2]=m.getDate(),k[y+16>>2]=m.getMonth(),k[y+20>>2]=m.getFullYear()-1900,k[y+24>>2]=m.getDay();var N=m.getFullYear();k[y+28>>2]=(N%4!==0||N%100===0&&N%400!==0?Wn:Wi)[m.getMonth()]+m.getDate()-1|0,k[y+36>>2]=-(60*m.getTimezoneOffset()),N=new Date(m.getFullYear(),6,1).getTimezoneOffset();var C=new Date(m.getFullYear(),0,1).getTimezoneOffset();k[y+32>>2]=(N!=C&&m.getTimezoneOffset()==Math.min(C,N))|0},y:function(m,y,N,C,F,W,ce){F=-9007199254740992>F||9007199254740992<F?NaN:Number(F);try{if(isNaN(F))return 61;var De=ft(C);if((y&2)!==0&&(N&2)===0&&(De.flags&2097155)!==2)throw new Se(2);if((De.flags&2097155)===1)throw new Se(2);if(!De.Ma.ib)throw new Se(43);if(!m)throw new Se(28);var Fe=De.Ma.ib(De,m,F,y,N),Ye=Fe.Kb;return k[W>>2]=Fe.Ab,Ae[ce>>2]=Ye,0}catch(Nt){if(typeof tt>"u"||Nt.name!=="ErrnoError")throw Nt;return-Nt.Pa}},z:function(m,y,N,C,F,W){W=-9007199254740992>W||9007199254740992<W?NaN:Number(W);try{var ce=ft(F);if(N&2){if(N=W,(ce.node.mode&61440)!==32768)throw new Se(43);if(!(C&2)){var De=M.slice(m,m+y);ce.Ma.jb&&ce.Ma.jb(ce,De,N,y,C)}}}catch(Fe){if(typeof tt>"u"||Fe.name!=="ErrnoError")throw Fe;return-Fe.Pa}},n:(m,y)=>{if(Qs[m]&&(clearTimeout(Qs[m].id),delete Qs[m]),!y)return 0;var N=setTimeout(()=>{delete Qs[m],kr(()=>Ji(m,performance.now()))},y);return Qs[m]={id:N,Xb:y},0},B:(m,y,N,C)=>{var F=new Date().getFullYear(),W=new Date(F,0,1).getTimezoneOffset();F=new Date(F,6,1).getTimezoneOffset(),Ae[m>>2]=60*Math.max(W,F),k[y>>2]=+(W!=F),y=ce=>{var De=Math.abs(ce);return`UTC${0<=ce?"-":"+"}${String(Math.floor(De/60)).padStart(2,"0")}${String(De%60).padStart(2,"0")}`},m=y(W),y=y(F),F<W?(ss(m,M,N,17),ss(y,M,C,17)):(ss(m,M,C,17),ss(y,M,N,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:m=>{var y=M.length;if(m>>>=0,2147483648<m)return!1;for(var N=1;4>=N;N*=2){var C=y*(1+.2/N);C=Math.min(C,m+100663296);e:{C=(Math.min(2147483648,65536*Math.ceil(Math.max(m,C)/65536))-D.buffer.byteLength+65535)/65536|0;try{D.grow(C),rt();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},E:(m,y)=>{var N=0;return Lr().forEach((C,F)=>{var W=y+N;for(F=Ae[m+4*F>>2]=W,W=0;W<C.length;++W)V[F++]=C.charCodeAt(W);V[F]=0,N+=C.length+1}),0},F:(m,y)=>{var N=Lr();Ae[m>>2]=N.length;var C=0;return N.forEach(F=>C+=F.length+1),Ae[y>>2]=C,0},e:function(m){try{var y=ft(m);return Qi(y),0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},p:function(m,y){try{var N=ft(m);return V[y]=N.tty?2:hn(N.mode)?3:(N.mode&61440)===40960?7:4,O[y+2>>1]=0,se[y+8>>3]=BigInt(0),se[y+16>>3]=BigInt(0),0}catch(C){if(typeof tt>"u"||C.name!=="ErrnoError")throw C;return C.Pa}},w:function(m,y,N,C){try{e:{var F=ft(m);m=y;for(var W,ce=y=0;ce<N;ce++){var De=Ae[m>>2],Fe=Ae[m+4>>2];m+=8;var Ye=Cr(F,V,De,Fe,W);if(0>Ye){var Nt=-1;break e}if(y+=Ye,Ye<Fe)break;typeof W<"u"&&(W+=Ye)}Nt=y}return Ae[C>>2]=Nt,0}catch(en){if(typeof tt>"u"||en.name!=="ErrnoError")throw en;return en.Pa}},D:function(m,y,N,C){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var F=ft(m);return Ma(F,y,N),se[C>>3]=BigInt(F.position),F.ob&&y===0&&N===0&&(F.ob=null),0}catch(W){if(typeof tt>"u"||W.name!=="ErrnoError")throw W;return W.Pa}},I:function(m){try{var y=ft(m);return y.Ma?.fsync?y.Ma.fsync(y):0}catch(N){if(typeof tt>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},t:function(m,y,N,C){try{e:{var F=ft(m);m=y;for(var W,ce=y=0;ce<N;ce++){var De=Ae[m>>2],Fe=Ae[m+4>>2];m+=8;var Ye=Ki(F,V,De,Fe,W);if(0>Ye){var Nt=-1;break e}if(y+=Ye,Ye<Fe)break;typeof W<"u"&&(W+=Ye)}Nt=y}return Ae[C>>2]=Nt,0}catch(en){if(typeof tt>"u"||en.name!=="ErrnoError")throw en;return en.Pa}},k:Ir},Ie;(async function(){function m(N){return Ie=N.exports,D=Ie.M,rt(),An=Ie.O,at--,_.monitorRunDependencies?.(at),at==0&&X&&(N=X,X=null,N()),Ie}at++,_.monitorRunDependencies?.(at);var y={a:jr};return _.instantiateWasm?new Promise(N=>{_.instantiateWasm(y,(C,F)=>{m(C),N(C.exports)})}):(le??=_.locateFile?_.locateFile("sql-wasm.wasm",q):q+"sql-wasm.wasm",m((await we(y)).instance))})(),_._sqlite3_free=m=>(_._sqlite3_free=Ie.P)(m),_._sqlite3_value_text=m=>(_._sqlite3_value_text=Ie.Q)(m),_._sqlite3_prepare_v2=(m,y,N,C,F)=>(_._sqlite3_prepare_v2=Ie.R)(m,y,N,C,F),_._sqlite3_step=m=>(_._sqlite3_step=Ie.S)(m),_._sqlite3_reset=m=>(_._sqlite3_reset=Ie.T)(m),_._sqlite3_exec=(m,y,N,C,F)=>(_._sqlite3_exec=Ie.U)(m,y,N,C,F),_._sqlite3_finalize=m=>(_._sqlite3_finalize=Ie.V)(m),_._sqlite3_column_name=(m,y)=>(_._sqlite3_column_name=Ie.W)(m,y),_._sqlite3_column_text=(m,y)=>(_._sqlite3_column_text=Ie.X)(m,y),_._sqlite3_column_type=(m,y)=>(_._sqlite3_column_type=Ie.Y)(m,y),_._sqlite3_errmsg=m=>(_._sqlite3_errmsg=Ie.Z)(m),_._sqlite3_clear_bindings=m=>(_._sqlite3_clear_bindings=Ie._)(m),_._sqlite3_value_blob=m=>(_._sqlite3_value_blob=Ie.$)(m),_._sqlite3_value_bytes=m=>(_._sqlite3_value_bytes=Ie.aa)(m),_._sqlite3_value_double=m=>(_._sqlite3_value_double=Ie.ba)(m),_._sqlite3_value_int=m=>(_._sqlite3_value_int=Ie.ca)(m),_._sqlite3_value_type=m=>(_._sqlite3_value_type=Ie.da)(m),_._sqlite3_result_blob=(m,y,N,C)=>(_._sqlite3_result_blob=Ie.ea)(m,y,N,C),_._sqlite3_result_double=(m,y)=>(_._sqlite3_result_double=Ie.fa)(m,y),_._sqlite3_result_error=(m,y,N)=>(_._sqlite3_result_error=Ie.ga)(m,y,N),_._sqlite3_result_int=(m,y)=>(_._sqlite3_result_int=Ie.ha)(m,y),_._sqlite3_result_int64=(m,y)=>(_._sqlite3_result_int64=Ie.ia)(m,y),_._sqlite3_result_null=m=>(_._sqlite3_result_null=Ie.ja)(m),_._sqlite3_result_text=(m,y,N,C)=>(_._sqlite3_result_text=Ie.ka)(m,y,N,C),_._sqlite3_aggregate_context=(m,y)=>(_._sqlite3_aggregate_context=Ie.la)(m,y),_._sqlite3_column_count=m=>(_._sqlite3_column_count=Ie.ma)(m),_._sqlite3_data_count=m=>(_._sqlite3_data_count=Ie.na)(m),_._sqlite3_column_blob=(m,y)=>(_._sqlite3_column_blob=Ie.oa)(m,y),_._sqlite3_column_bytes=(m,y)=>(_._sqlite3_column_bytes=Ie.pa)(m,y),_._sqlite3_column_double=(m,y)=>(_._sqlite3_column_double=Ie.qa)(m,y),_._sqlite3_bind_blob=(m,y,N,C,F)=>(_._sqlite3_bind_blob=Ie.ra)(m,y,N,C,F),_._sqlite3_bind_double=(m,y,N)=>(_._sqlite3_bind_double=Ie.sa)(m,y,N),_._sqlite3_bind_int=(m,y,N)=>(_._sqlite3_bind_int=Ie.ta)(m,y,N),_._sqlite3_bind_text=(m,y,N,C,F)=>(_._sqlite3_bind_text=Ie.ua)(m,y,N,C,F),_._sqlite3_bind_parameter_index=(m,y)=>(_._sqlite3_bind_parameter_index=Ie.va)(m,y),_._sqlite3_sql=m=>(_._sqlite3_sql=Ie.wa)(m),_._sqlite3_normalized_sql=m=>(_._sqlite3_normalized_sql=Ie.xa)(m),_._sqlite3_changes=m=>(_._sqlite3_changes=Ie.ya)(m),_._sqlite3_close_v2=m=>(_._sqlite3_close_v2=Ie.za)(m),_._sqlite3_create_function_v2=(m,y,N,C,F,W,ce,De,Fe)=>(_._sqlite3_create_function_v2=Ie.Aa)(m,y,N,C,F,W,ce,De,Fe),_._sqlite3_update_hook=(m,y,N)=>(_._sqlite3_update_hook=Ie.Ba)(m,y,N),_._sqlite3_open=(m,y)=>(_._sqlite3_open=Ie.Ca)(m,y);var Js=_._malloc=m=>(Js=_._malloc=Ie.Da)(m),us=_._free=m=>(us=_._free=Ie.Ea)(m);_._RegisterExtensionFunctions=m=>(_._RegisterExtensionFunctions=Ie.Fa)(m);var ki=(m,y)=>(ki=Ie.Ga)(m,y),Ji=(m,y)=>(Ji=Ie.Ha)(m,y),Es=m=>(Es=Ie.Ia)(m),mn=m=>(mn=Ie.Ja)(m),Rn=()=>(Rn=Ie.Ka)();_.stackSave=()=>Rn(),_.stackRestore=m=>Es(m),_.stackAlloc=m=>mn(m),_.cwrap=(m,y,N,C)=>{var F=!N||N.every(W=>W==="number"||W==="boolean");return y!=="string"&&F&&!C?_["_"+m]:(...W)=>vo(m,y,N,W)},_.addFunction=Vn,_.removeFunction=cs,_.UTF8ToString=Yi,_.ALLOC_NORMAL=Ci,_.allocate=Ii,_.allocateUTF8OnStack=wn;function _i(){function m(){if(_.calledRun=!0,!A){if(!_.noFSInit&&!xi){var y,N;xi=!0,C??=_.stdin,y??=_.stdout,N??=_.stderr,C?jt("stdin",C):Un("/dev/tty","/dev/stdin"),y?jt("stdout",null,y):Un("/dev/tty","/dev/stdout"),N?jt("stderr",null,N):Un("/dev/tty1","/dev/stderr"),$s("/dev/stdin",0),$s("/dev/stdout",1),$s("/dev/stderr",1)}if(Ie.N(),Jt=!1,_.onRuntimeInitialized?.(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var C=_.postRun.shift();yt.unshift(C)}wt(yt)}}if(0<at)X=_i;else{if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)ms();wt(rn),0<at?X=_i:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),m()},1)):m()}}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return _i(),g}),n)};s.exports=a,s.exports.default=a})(um)),um.exports}var VN=UN();const eb=SN(VN),qN=`
CREATE TABLE IF NOT EXISTS domains (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  color TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  domain_id INTEGER NOT NULL REFERENCES domains(id),
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS quests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  goal_id INTEGER NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS steps (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  quest_id INTEGER NOT NULL REFERENCES quests(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'pending',
  sort_order INTEGER NOT NULL DEFAULT 0,
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS buff_definitions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  type TEXT NOT NULL DEFAULT 'buff',
  icon TEXT NOT NULL DEFAULT '',
  duration_hours INTEGER NOT NULL DEFAULT 24,
  stat_effects TEXT NOT NULL DEFAULT '{}',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS buff_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  definition_id INTEGER NOT NULL REFERENCES buff_definitions(id) ON DELETE CASCADE,
  activated_at TEXT NOT NULL DEFAULT (datetime('now')),
  expires_at TEXT NOT NULL,
  is_active INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS character (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  name TEXT NOT NULL DEFAULT 'Adventurer',
  total_xp INTEGER NOT NULL DEFAULT 0,
  level INTEGER NOT NULL DEFAULT 1,
  title TEXT NOT NULL DEFAULT 'Novice',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS xp_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount INTEGER NOT NULL,
  reason TEXT NOT NULL,
  source_type TEXT NOT NULL,
  source_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS planner_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  date TEXT NOT NULL,
  start_time TEXT,
  end_time TEXT,
  quest_id INTEGER REFERENCES quests(id) ON DELETE SET NULL,
  step_id INTEGER REFERENCES steps(id) ON DELETE SET NULL,
  is_completed INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);
`,BN=`
INSERT OR IGNORE INTO domains (id, name, icon, color) VALUES
  (1, 'Health', '', '#e74c3c'),
  (2, 'Career', '', '#c8a84e'),
  (3, 'Learning', '', '#3498db'),
  (4, 'Social', '', '#e67e22'),
  (5, 'Finance', '', '#2ecc71'),
  (6, 'Creative', '', '#9b59b6'),
  (7, 'Spiritual', '', '#1abc9c'),
  (8, 'Home', '', '#95a5a6');
`,PN=`
INSERT OR IGNORE INTO character (id, name, total_xp, level, title)
VALUES (1, 'Adventurer', 0, 1, 'Novice');
`,FN="goal-game-db",El="database",tb="main";let hs=null;function nb(){return new Promise((s,e)=>{const n=indexedDB.open(FN,1);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(El)||a.createObjectStore(El)},n.onsuccess=()=>s(n.result),n.onerror=()=>e(n.error)})}async function GN(){const s=await nb();return new Promise((e,n)=>{const a=s.transaction(El,"readonly"),u=a.objectStore(El).get(tb);u.onsuccess=()=>e(u.result??null),u.onerror=()=>n(u.error),a.oncomplete=()=>s.close()})}async function HN(s){const e=await nb();return new Promise((n,a)=>{const o=e.transaction(El,"readwrite");o.objectStore(El).put(s,tb),o.oncomplete=()=>{e.close(),n()},o.onerror=()=>a(o.error)})}async function zN(){if(hs)return hs;const s=await eb({locateFile:()=>"/goal-game/sql-wasm.wasm"}),e=await GN();return e?hs=new s.Database(e):hs=new s.Database,hs.run(qN),hs.run(BN),hs.run(PN),await ve(),hs}async function ve(){if(!hs)return;const s=hs.export();await HN(s)}function te(){if(!hs)throw new Error("Database not initialized. Call getDatabase() first.");return hs}async function _p(){return te().export()}async function sb(s){const e=await eb({locateFile:()=>"/goal-game/sql-wasm.wasm"});hs&&hs.close(),hs=new e.Database(s),await ve()}const dm="migration_feb2026_billing_v1";async function XN(){if(localStorage.getItem(dm))return!1;const s=te(),e=s.exec("SELECT id FROM goals WHERE title = 'Bill 190 Hours - February 2026'");if(e.length>0&&e[0].values.length>0)return localStorage.setItem(dm,"true"),!1;s.run(`
    INSERT INTO goals (domain_id, title, description, status)
    VALUES (2, 'Bill 190 Hours - February 2026', 'Target: 8 hours on weekdays, ~4.5 hours on weekends. Started with 8 hours billed.', 'active')
  `);const a=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0],o=[{title:"Week 1: Feb 3-9",description:"First partial week. Target: ~41 hours (4 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-03",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-04",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-05",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-06",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-07",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-08",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 2: Feb 9-15",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-09",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-10",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-11",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-12",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-13",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-14",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-15",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 3: Feb 16-22",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-16",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-17",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-18",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-19",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-20",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-21",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-22",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 4: Feb 23-28",description:"Final partial week. Target: ~44.5 hours (5 weekdays  8 + 1 weekend day  4.5)",days:[{date:"2026-02-23",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-24",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-25",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-26",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-27",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-28",day:"Sat",hours:4.5,isWeekend:!0}]}];for(const u of o){s.run(`
      INSERT INTO quests (goal_id, title, description, priority, status)
      VALUES (?, ?, ?, 'high', 'active')
    `,[a,u.title,u.description]);const g=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(let E=0;E<u.days.length;E++){const _=u.days[E],S=`${_.day} ${_.date.slice(5)}: Bill ${_.hours} hours`;s.run(`
        INSERT INTO steps (quest_id, title, priority, status, sort_order)
        VALUES (?, ?, ?, 'pending', ?)
      `,[g,S,_.isWeekend?"low":"normal",E])}}return await ve(),localStorage.setItem(dm,"true"),!0}const XE="notifications_migration_v1";async function $N(){if(localStorage.getItem(XE))return;const s=te();try{(s.exec("PRAGMA table_info(planner_events)")[0]?.values.map(a=>a[1])||[]).includes("reminder_minutes")||s.run("ALTER TABLE planner_events ADD COLUMN reminder_minutes INTEGER DEFAULT NULL"),s.run(`
      CREATE TABLE IF NOT EXISTS notification_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        enabled INTEGER NOT NULL DEFAULT 0,
        default_reminder_minutes INTEGER NOT NULL DEFAULT 15,
        fcm_token TEXT,
        device_id TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await ve(),localStorage.setItem(XE,"true"),console.log("Notifications migration completed successfully")}catch(e){throw console.error("Failed to run notifications migration:",e),e}}const $E="body_fat_goal_seed_v4";async function YN(){if(localStorage.getItem($E))return;const s=te();try{const e=s.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(e.length&&e[0].values.length){const _=e[0].values[0][0],S=s.exec("SELECT id FROM quests WHERE goal_id = ?",[_]);if(S.length)for(const x of S[0].values)s.run("DELETE FROM steps WHERE quest_id = ?",[x[0]]);s.run("DELETE FROM quests WHERE goal_id = ?",[_]),s.run("DELETE FROM goals WHERE id = ?",[_])}s.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[1,"Achieve 12% Body Fat","12-week transformation program starting Feb 4, 2026. From 18-19% to 12% body fat through consistent training and nutrition."]);const a=s.exec("SELECT last_insert_rowid()")[0].values[0][0],o=new Date(2026,1,4,12,0,0),u=[{title:"Week 1 - Build Foundation",desc:"Establish daily habits and set your baseline."},{title:"Week 2 - Gain Momentum",desc:"Lock in the routine. Consistency is key."},{title:"Week 3 - Stay Disciplined",desc:"Push through early challenges. Trust the process."},{title:"Week 4 - Complete Month 1",desc:"First month done! Take measurements and assess progress."},{title:"Week 5 - Intensify",desc:"Increase intensity. Your body is adapting."},{title:"Week 6 - Push Through",desc:"Mental toughness week. No excuses."},{title:"Week 7 - Halfway Point",desc:"You're halfway there! Stay focused."},{title:"Week 8 - Stay Strong",desc:"Month 2 complete. Reassess and adjust if needed."},{title:"Week 9 - Final Month Begins",desc:"Last 4 weeks. Time to lock in."},{title:"Week 10 - Home Stretch",desc:"You can see the finish line. Don't let up."},{title:"Week 11 - Almost There",desc:"One more week after this. Give it everything."},{title:"Week 12 - Finish Strong",desc:"Final week! Complete the transformation."}],h=[{dayName:"Wed",workout:"Light Cardio (20-30 min)",isGym:!1},{dayName:"Thu",workout:"Gym - Legs (Quads/Hams/Glutes)",isGym:!0},{dayName:"Fri",workout:"Gym - Upper Body",isGym:!0},{dayName:"Sat",workout:"Gym - Lower Body / Deadlifts",isGym:!0},{dayName:"Sun",workout:"Rest + Weekly Check-in",isGym:!1},{dayName:"Mon",workout:"Gym - Push (Chest/Shoulders/Triceps)",isGym:!0},{dayName:"Tue",workout:"Gym - Pull (Back/Biceps)",isGym:!0}],g=_=>{const S=_.getMonth()+1,x=_.getDate();return`${S}/${x}`};let E=new Date(o);for(let _=0;_<u.length;_++){const S=u[_],x=g(E),w=g(new Date(E.getTime()+8640*60*1e3));s.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[a,`${S.title} (${x} - ${w})`,S.desc,"high"]);const G=s.exec("SELECT last_insert_rowid()")[0].values[0][0];let U=1;for(let q=0;q<7;q++){const z=h[q],H=g(E);s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[G,`${z.dayName} ${H}: ${z.workout}`,"normal",U++]),s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[G,`${z.dayName} ${H}: Hit protein goal`,"normal",U++]),E.setDate(E.getDate()+1)}}await ve(),localStorage.setItem($E,"true"),console.log("Body fat goal seeded successfully (v3 - starting Wed 2/4/2026)")}catch(e){throw console.error("Failed to seed body fat goal:",e),e}}const Zu="body_fat_steps_fix_v2";async function QN(){if(localStorage.getItem(Zu))return;const s=te();try{const e=s.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(!e.length||!e[0].values.length){console.log("Body fat goal not found, skipping step title fix"),localStorage.setItem(Zu,"true");return}const n=e[0].values[0][0],a=s.exec("SELECT id FROM quests WHERE goal_id = ? ORDER BY id",[n]);if(!a.length){console.log("No quests found for body fat goal"),localStorage.setItem(Zu,"true");return}const o=new Date(2026,1,4,12,0,0);let u=new Date(o);const h=E=>{const _=E.getMonth()+1,S=E.getDate();return`${_}/${S}`};let g=0;for(let E=0;E<a[0].values.length;E++){const _=a[0].values[E][0],S=s.exec("SELECT id, title, sort_order FROM steps WHERE quest_id = ? ORDER BY sort_order",[_]);if(S.length)for(let x=0;x<S[0].values.length;x++){const w=S[0].values[x][0],B=S[0].values[x][1],G=S[0].values[x][2],U=Math.floor((G-1)/2),q=new Date(u);q.setDate(o.getDate()+E*7+U);const z=h(q);let H;B.toLowerCase().includes("protein")||G%2===0?H=`${z}: hit 150g of protein`:H=`${z}: worked out`,s.run("UPDATE steps SET title = ? WHERE id = ?",[H,w]),g++}}await ve(),localStorage.setItem(Zu,"true"),console.log(`Fixed ${g} step titles in body fat goal with dates`)}catch(e){throw console.error("Failed to fix body fat step titles:",e),e}}const YE="miss_step_migration_v1";async function KN(){if(localStorage.getItem(YE))return;const s=te();try{const e=s.exec("PRAGMA table_info(steps)");e.length>0&&e[0].values.some(a=>a[1]==="missed_at")||s.run("ALTER TABLE steps ADD COLUMN missed_at TEXT"),s.run(`
      CREATE TABLE IF NOT EXISTS missed_steps_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        step_id INTEGER NOT NULL,
        missed_date TEXT NOT NULL,
        xp_penalty INTEGER DEFAULT 0,
        created_at TEXT DEFAULT (datetime('now')),
        FOREIGN KEY (step_id) REFERENCES steps(id)
      )
    `),s.run(`
      CREATE INDEX IF NOT EXISTS idx_missed_steps_date
      ON missed_steps_log(missed_date)
    `),await ve(),localStorage.setItem(YE,"true"),console.log("Miss step migration completed")}catch(e){throw console.error("Failed to run miss step migration:",e),e}}const QE="daily_quests_migration_v1";async function WN(){if(localStorage.getItem(QE))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS daily_quests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        quest_type TEXT NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        target_value INTEGER NOT NULL DEFAULT 1,
        current_value INTEGER NOT NULL DEFAULT 0,
        xp_reward INTEGER NOT NULL DEFAULT 25,
        is_completed INTEGER NOT NULL DEFAULT 0,
        completed_at TEXT
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS daily_quest_bonus (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL UNIQUE,
        claimed_at TEXT NOT NULL
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_daily_quests_date ON daily_quests(date)"),await ve(),localStorage.setItem(QE,"true"),console.log("Daily quests migration completed successfully")}catch(e){throw console.error("Failed to run daily quests migration:",e),e}}const KE="streak_migration_v1";async function JN(){if(localStorage.getItem(KE))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS streak_shields (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        quantity INTEGER NOT NULL DEFAULT 0,
        earned_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM streak_shields")[0].values[0][0]===0&&s.run("INSERT INTO streak_shields (quantity) VALUES (3)"),s.run(`
      CREATE TABLE IF NOT EXISTS streak_freezes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        freeze_date TEXT NOT NULL,
        reason TEXT,
        created_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE,
        UNIQUE(buff_definition_id, freeze_date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL UNIQUE,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_milestone_claimed INTEGER NOT NULL DEFAULT 0,
        updated_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_shield_uses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        used_date TEXT NOT NULL,
        streak_saved INTEGER NOT NULL,
        used_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_date ON streak_freezes(freeze_date)"),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_buff ON streak_freezes(buff_definition_id)"),await ve(),localStorage.setItem(KE,"true"),console.log("Streak migration completed successfully")}catch(e){throw console.error("Failed to run streak migration:",e),e}}const WE="weekly_boss_migration_v1";async function ZN(){if(localStorage.getItem(WE))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_boss (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        boss_type TEXT NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        max_hp INTEGER NOT NULL,
        current_hp INTEGER NOT NULL,
        is_defeated INTEGER NOT NULL DEFAULT 0,
        defeated_at TEXT,
        xp_reward INTEGER NOT NULL,
        bonus_shields INTEGER NOT NULL DEFAULT 0,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS boss_damage_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        boss_id INTEGER NOT NULL,
        damage_type TEXT NOT NULL,
        damage_amount INTEGER NOT NULL,
        source_description TEXT,
        dealt_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (boss_id) REFERENCES weekly_boss(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_boss_week ON weekly_boss(week_start)"),s.run("CREATE INDEX IF NOT EXISTS idx_boss_damage_log_boss ON boss_damage_log(boss_id)"),await ve(),localStorage.setItem(WE,"true"),console.log("Weekly boss migration completed successfully")}catch(e){throw console.error("Failed to run weekly boss migration:",e),e}}const ex={quests:"Quests & Goals",buffs:"Habits & Buffs",streaks:"Streaks",boss:"Boss Battles",levels:"Leveling",special:"Special"},tx={quests:"",buffs:"",streaks:"",boss:"",levels:"",special:""},nx=[{key:"first_step",name:"First Step",description:"Complete your first step",category:"quests",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"steps_completed",sort_order:1,is_hidden:!1},{key:"ten_steps",name:"On Your Way",description:"Complete 10 steps",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"steps_completed",sort_order:2,is_hidden:!1},{key:"hundred_steps",name:"Journey Master",description:"Complete 100 steps",category:"quests",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"steps_completed",sort_order:3,is_hidden:!1},{key:"first_quest",name:"Quest Beginner",description:"Complete your first quest",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:1,requirement_source:"quests_completed",sort_order:4,is_hidden:!1},{key:"ten_quests",name:"Quest Veteran",description:"Complete 10 quests",category:"quests",icon:"",xp_reward:150,requirement_type:"count",requirement_value:10,requirement_source:"quests_completed",sort_order:5,is_hidden:!1},{key:"first_goal",name:"Goal Getter",description:"Complete your first goal",category:"quests",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"goals_completed",sort_order:6,is_hidden:!1},{key:"first_buff",name:"Habit Former",description:"Activate your first buff",category:"buffs",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"buffs_activated",sort_order:1,is_hidden:!1},{key:"ten_buffs",name:"Habit Builder",description:"Activate 10 buffs",category:"buffs",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"buffs_activated",sort_order:2,is_hidden:!1},{key:"hundred_buffs",name:"Habit Master",description:"Activate 100 buffs",category:"buffs",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"buffs_activated",sort_order:3,is_hidden:!1},{key:"week_streak",name:"Week Warrior",description:"Maintain a 7-day streak",category:"streaks",icon:"",xp_reward:75,requirement_type:"threshold",requirement_value:7,requirement_source:"buff_streak",sort_order:1,is_hidden:!1},{key:"month_streak",name:"Monthly Champion",description:"Maintain a 30-day streak",category:"streaks",icon:"",xp_reward:300,requirement_type:"threshold",requirement_value:30,requirement_source:"buff_streak",sort_order:2,is_hidden:!1},{key:"first_boss",name:"Dragon Slayer",description:"Defeat your first weekly boss",category:"boss",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"bosses_defeated",sort_order:1,is_hidden:!1},{key:"five_bosses",name:"Boss Hunter",description:"Defeat 5 weekly bosses",category:"boss",icon:"",xp_reward:250,requirement_type:"count",requirement_value:5,requirement_source:"bosses_defeated",sort_order:2,is_hidden:!1},{key:"level_5",name:"Rising Star",description:"Reach level 5",category:"levels",icon:"",xp_reward:50,requirement_type:"threshold",requirement_value:5,requirement_source:"character_level",sort_order:1,is_hidden:!1},{key:"level_10",name:"Apprentice",description:"Reach level 10",category:"levels",icon:"",xp_reward:100,requirement_type:"threshold",requirement_value:10,requirement_source:"character_level",sort_order:2,is_hidden:!1},{key:"level_25",name:"Expert",description:"Reach level 25",category:"levels",icon:"",xp_reward:250,requirement_type:"threshold",requirement_value:25,requirement_source:"character_level",sort_order:3,is_hidden:!1},{key:"level_50",name:"Master",description:"Reach level 50",category:"levels",icon:"",xp_reward:500,requirement_type:"threshold",requirement_value:50,requirement_source:"character_level",sort_order:4,is_hidden:!1}],JE="achievement_migration_v1";async function sx(){if(localStorage.getItem(JE))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS achievement_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        category TEXT NOT NULL,
        icon TEXT NOT NULL,
        xp_reward INTEGER NOT NULL DEFAULT 0,
        requirement_type TEXT NOT NULL,
        requirement_value INTEGER NOT NULL,
        requirement_source TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0,
        is_hidden INTEGER NOT NULL DEFAULT 0
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS achievement_unlocks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS achievement_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        current_value INTEGER NOT NULL DEFAULT 0,
        last_updated TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_unlocks_def ON achievement_unlocks(definition_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_progress_def ON achievement_progress(definition_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_category ON achievement_definitions(category)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_source ON achievement_definitions(requirement_source)");for(const e of nx)s.run(`INSERT OR IGNORE INTO achievement_definitions
         (key, name, description, category, icon, xp_reward, requirement_type, requirement_value, requirement_source, sort_order, is_hidden)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.key,e.name,e.description,e.category,e.icon,e.xp_reward,e.requirement_type,e.requirement_value,e.requirement_source,e.sort_order,e.is_hidden?1:0]);await ve(),localStorage.setItem(JE,"true"),console.log("Achievement migration completed successfully")}catch(e){throw console.error("Failed to run achievement migration:",e),e}}const ib=10,fl=100,Um=20,Vm=5,ix={complete_step:5,activate_buff:3,start_focus_timer:10,deactivate_debuff:15},fm={name:"Fatigued",icon:"",effects:{focus:-2,willpower:-2}},hm={name:"Exhausted",icon:"",effects:{stamina:-3,willpower:-3,focus:-3,health:-1}},ZE="energy_migration_v1";async function ax(){if(localStorage.getItem(ZE))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS energy_state (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        current_energy INTEGER NOT NULL DEFAULT ${fl},
        max_energy INTEGER NOT NULL DEFAULT ${fl},
        last_regen_at TEXT NOT NULL DEFAULT (datetime('now')),
        bonus_energy INTEGER NOT NULL DEFAULT 0
      )
    `),s.exec("SELECT COUNT(*) FROM energy_state")[0].values[0][0]===0&&s.run(`INSERT INTO energy_state (id, current_energy, max_energy) VALUES (1, ${fl}, ${fl})`),s.run(`
      CREATE TABLE IF NOT EXISTS energy_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        amount INTEGER NOT NULL,
        reason TEXT NOT NULL,
        source_type TEXT NOT NULL,
        source_id INTEGER,
        energy_before INTEGER NOT NULL,
        energy_after INTEGER NOT NULL,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS energy_costs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        action_type TEXT NOT NULL UNIQUE,
        base_cost INTEGER NOT NULL,
        description TEXT NOT NULL DEFAULT ''
      )
    `);for(const[n,a]of Object.entries(ix))s.run(`INSERT OR IGNORE INTO energy_costs (action_type, base_cost, description)
         VALUES (?, ?, ?)`,[n,a,`Cost for ${n.replace(/_/g," ")}`]);s.run("CREATE INDEX IF NOT EXISTS idx_energy_log_created ON energy_log(created_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_energy_log_source ON energy_log(source_type)"),await ve(),localStorage.setItem(ZE,"true"),console.log("Energy migration completed successfully")}catch(e){throw console.error("Failed to run energy migration:",e),e}}const rx=15,ox=5,lx=10,zs={work_duration:25,short_break:5,long_break:15,sessions_before_long_break:4,auto_start_breaks:!1,sound_enabled:!0},ev="focus_timer_migration_v1";async function cx(){if(localStorage.getItem(ev))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS focus_sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        duration_minutes INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        status TEXT NOT NULL DEFAULT 'active',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        linked_step_id INTEGER,
        linked_quest_id INTEGER,
        break_taken INTEGER NOT NULL DEFAULT 0,
        notes TEXT NOT NULL DEFAULT '',
        FOREIGN KEY (linked_step_id) REFERENCES steps(id) ON DELETE SET NULL,
        FOREIGN KEY (linked_quest_id) REFERENCES quests(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS focus_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        work_duration INTEGER NOT NULL DEFAULT ${zs.work_duration},
        short_break INTEGER NOT NULL DEFAULT ${zs.short_break},
        long_break INTEGER NOT NULL DEFAULT ${zs.long_break},
        sessions_before_long_break INTEGER NOT NULL DEFAULT ${zs.sessions_before_long_break},
        auto_start_breaks INTEGER NOT NULL DEFAULT ${zs.auto_start_breaks?1:0},
        sound_enabled INTEGER NOT NULL DEFAULT ${zs.sound_enabled?1:0}
      )
    `),s.exec("SELECT COUNT(*) FROM focus_settings")[0].values[0][0]===0&&s.run(`
        INSERT INTO focus_settings (id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled)
        VALUES (1, ?, ?, ?, ?, ?, ?)
      `,[zs.work_duration,zs.short_break,zs.long_break,zs.sessions_before_long_break,zs.auto_start_breaks?1:0,zs.sound_enabled?1:0]),s.run(`
      CREATE TABLE IF NOT EXISTS focus_stats (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        total_sessions INTEGER NOT NULL DEFAULT 0,
        total_minutes INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        current_streak INTEGER NOT NULL DEFAULT 0,
        today_sessions INTEGER NOT NULL DEFAULT 0,
        today_date TEXT NOT NULL DEFAULT (date('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM focus_stats")[0].values[0][0]===0&&s.run("INSERT INTO focus_stats (id) VALUES (1)"),s.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_started ON focus_sessions(started_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_status ON focus_sessions(status)"),await ve(),localStorage.setItem(ev,"true"),console.log("Focus timer migration completed successfully")}catch(e){throw console.error("Failed to run focus timer migration:",e),e}}const tv="routine_migration_v1";async function ux(){if(localStorage.getItem(tv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS routine_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        type TEXT NOT NULL DEFAULT 'custom',
        description TEXT NOT NULL DEFAULT '',
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_steps (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        linked_buff_id INTEGER,
        sort_order INTEGER NOT NULL DEFAULT 0,
        duration_minutes INTEGER NOT NULL DEFAULT 5,
        is_optional INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        FOREIGN KEY (linked_buff_id) REFERENCES buff_definitions(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        started_at TEXT,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        steps_completed INTEGER NOT NULL DEFAULT 0,
        total_steps INTEGER NOT NULL DEFAULT 0,
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        UNIQUE(routine_id, date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_step_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_log_id INTEGER NOT NULL,
        step_id INTEGER NOT NULL,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        skipped INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_log_id) REFERENCES routine_logs(id) ON DELETE CASCADE,
        FOREIGN KEY (step_id) REFERENCES routine_steps(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_streaks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL UNIQUE,
        current_streak INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_completed_date TEXT,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_routine_steps_routine ON routine_steps(routine_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_date ON routine_logs(date)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_routine ON routine_logs(routine_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_step_logs_log ON routine_step_logs(routine_log_id)"),await ve(),localStorage.setItem(tv,"true"),console.log("Routine migration completed successfully")}catch(e){throw console.error("Failed to run routine migration:",e),e}}const dx=[{name:"Wellness Warrior",description:"Activate Meditation, Exercise, and Healthy Meal buffs",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0},{name:"Focus Master",description:"Activate No Phone First Hour, Deep Work Session, and Read 30+ Minutes",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Early Bird",description:"Activate Morning Exercise, 8 Hours Sleep, and No Phone First Hour",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:35,is_active:!0},{name:"Mind & Body",description:"Activate Meditation, Yoga/Stretching, and Journaling",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Social Champion",description:"Activate Socialised, Helped Someone, and Gratitude Practice",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0}],fx={"Wellness Warrior":["Meditation","Morning Exercise","Healthy Meal"],"Focus Master":["No Phone First Hour","Deep Work Session","Read 30+ Minutes"],"Early Bird":["Morning Exercise","8 Hours Sleep","No Phone First Hour"],"Mind & Body":["Meditation","Yoga / Stretching","Journaling"],"Social Champion":["Socialised","Helped Someone","Gratitude Practice"]},nv="combo_migration_v1";async function hx(){if(localStorage.getItem(nv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS combo_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        icon TEXT NOT NULL DEFAULT '',
        required_buffs TEXT NOT NULL DEFAULT '[]',
        time_window_hours INTEGER NOT NULL DEFAULT 24,
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS combo_activations (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        combo_id INTEGER NOT NULL,
        activated_at TEXT NOT NULL DEFAULT (datetime('now')),
        buffs_used TEXT NOT NULL DEFAULT '[]',
        FOREIGN KEY (combo_id) REFERENCES combo_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_combo ON combo_activations(combo_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_date ON combo_activations(activated_at)");for(const e of dx){const n=fx[e.name]||[],a=[];for(const o of n){const u=s.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = 'buff' LIMIT 1",[o]);u.length&&u[0].values.length&&a.push(u[0].values[0][0])}a.length>=2&&s.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active)
           VALUES (?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,JSON.stringify(a),e.time_window_hours,e.bonus_xp,e.is_active?1:0])}await ve(),localStorage.setItem(nv,"true"),console.log("Combo migration completed successfully")}catch(e){throw console.error("Failed to run combo migration:",e),e}}const sv="weekly_review_migration_v1";async function mx(){if(localStorage.getItem(sv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_reviews (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        generated_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        summary_data TEXT NOT NULL DEFAULT '{}',
        wins TEXT NOT NULL DEFAULT '',
        challenges TEXT NOT NULL DEFAULT '',
        priorities TEXT NOT NULL DEFAULT '[]',
        notes TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_reviews_week ON weekly_reviews(week_start)"),await ve(),localStorage.setItem(sv,"true"),console.log("Weekly review migration completed successfully")}catch(e){throw console.error("Failed to run weekly review migration:",e),e}}const px=[{name:"Double XP Hour",description:"All XP gains are doubled for the next hour!",type:"bonus",icon:"",duration_hours:1,effect_type:"xp_multiplier",effect_value:'{"multiplier": 2}',rarity:"rare",weight:10},{name:"Energy Surge",description:"Instantly restore 50 energy!",type:"bonus",icon:"",duration_hours:0,effect_type:"energy_restore",effect_value:'{"amount": 50}',rarity:"common",weight:30},{name:"Streak Shield Drop",description:"A free streak shield has appeared!",type:"bonus",icon:"",duration_hours:0,effect_type:"streak_shield",effect_value:'{"shields": 1}',rarity:"uncommon",weight:15},{name:"XP Bonus",description:"Receive a bonus of 25 XP!",type:"bonus",icon:"",duration_hours:0,effect_type:"xp_bonus",effect_value:'{"amount": 25}',rarity:"common",weight:25},{name:"Sprint Challenge",description:"Complete 5 steps in 2 hours for bonus XP!",type:"challenge",icon:"",duration_hours:2,effect_type:"step_challenge",effect_value:'{"target": 5, "reward_xp": 50}',rarity:"uncommon",weight:20},{name:"Habit Rush",description:"Activate 3 buffs in 4 hours for bonus XP!",type:"challenge",icon:"",duration_hours:4,effect_type:"buff_challenge",effect_value:'{"target": 3, "reward_xp": 40}',rarity:"common",weight:25},{name:"Focus Marathon",description:"Complete 2 focus sessions in 3 hours!",type:"challenge",icon:"",duration_hours:3,effect_type:"focus_challenge",effect_value:'{"target": 2, "reward_xp": 45}',rarity:"uncommon",weight:15},{name:"Stat Boost",description:"All stats increased by +2 for 6 hours!",type:"modifier",icon:"",duration_hours:6,effect_type:"stat_boost",effect_value:'{"all_stats": 2}',rarity:"rare",weight:10},{name:"Lucky Day",description:"Increased chance of rare events for 12 hours!",type:"modifier",icon:"",duration_hours:12,effect_type:"luck_boost",effect_value:'{"rare_chance_bonus": 0.5}',rarity:"epic",weight:5}],_x=.15,gx=4,iv="random_event_migration_v1";async function yx(){if(localStorage.getItem(iv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS event_templates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        type TEXT NOT NULL,
        icon TEXT NOT NULL,
        duration_hours INTEGER NOT NULL DEFAULT 0,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        rarity TEXT NOT NULL DEFAULT 'common',
        weight INTEGER NOT NULL DEFAULT 10
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS active_events (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        expires_at TEXT NOT NULL,
        is_claimed INTEGER NOT NULL DEFAULT 0,
        claimed_at TEXT,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS event_history (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        event_name TEXT NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        result TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_active_events_expires ON active_events(expires_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_event_history_started ON event_history(started_at)");for(const e of px)s.run(`INSERT INTO event_templates (name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.type,e.icon,e.duration_hours,e.effect_type,e.effect_value,e.rarity,e.weight]);await ve(),localStorage.setItem(iv,"true"),console.log("Random event migration completed successfully")}catch(e){throw console.error("Failed to run random event migration:",e),e}}const Ex=[{name:"Productivity",description:"Quest and step bonuses",icon:"",color:"#3b82f6",sort_order:1},{name:"Health",description:"Energy and stamina bonuses",icon:"",color:"#ef4444",sort_order:2},{name:"Focus",description:"Timer and concentration bonuses",icon:"",color:"#8b5cf6",sort_order:3},{name:"Social",description:"Streak and charisma bonuses",icon:"",color:"#f97316",sort_order:4}],vx=[{branch_id:1,name:"Quick Learner",description:"+5% XP from steps",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"step_xp_bonus",effect_value:'{"percent": 5}',is_capstone:!1},{branch_id:1,name:"Efficient Worker",description:"+10% XP from quests",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:1,effect_type:"quest_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:1,name:"Goal Master",description:"+15% XP from goals",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:2,effect_type:"goal_xp_bonus",effect_value:'{"percent": 15}',is_capstone:!0},{branch_id:2,name:"Energized",description:"+10 max energy",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"max_energy",effect_value:'{"amount": 10}',is_capstone:!1},{branch_id:2,name:"Quick Recovery",description:"+2 energy regen/hour",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:4,effect_type:"energy_regen",effect_value:'{"amount": 2}',is_capstone:!1},{branch_id:2,name:"Vitality Master",description:"+2 stamina, +2 health",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:5,effect_type:"stat_bonus",effect_value:'{"stamina": 2, "health": 2}',is_capstone:!0},{branch_id:3,name:"Focused Mind",description:"+1 focus stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"focus": 1}',is_capstone:!1},{branch_id:3,name:"Deep Concentration",description:"+10% focus session XP",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:7,effect_type:"focus_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:3,name:"Zen Master",description:"+3 focus, +2 willpower",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:8,effect_type:"stat_bonus",effect_value:'{"focus": 3, "willpower": 2}',is_capstone:!0},{branch_id:4,name:"Charismatic",description:"+1 charisma stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"charisma": 1}',is_capstone:!1},{branch_id:4,name:"Streak Guardian",description:"Streaks last 1 extra day",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:10,effect_type:"streak_extension",effect_value:'{"days": 1}',is_capstone:!1},{branch_id:4,name:"Social Champion",description:"+3 charisma, +10% streak XP",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:11,effect_type:"combined",effect_value:'{"charisma": 3, "streak_xp_bonus": 10}',is_capstone:!0}],av="skill_tree_migration_v1";async function Tx(){if(localStorage.getItem(av))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS skill_branches (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        color TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS skill_nodes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        branch_id INTEGER NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        tier INTEGER NOT NULL DEFAULT 1,
        position INTEGER NOT NULL DEFAULT 0,
        xp_cost INTEGER NOT NULL DEFAULT 100,
        prerequisite_node_id INTEGER,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        is_capstone INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (branch_id) REFERENCES skill_branches(id) ON DELETE CASCADE,
        FOREIGN KEY (prerequisite_node_id) REFERENCES skill_nodes(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS unlocked_skills (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        node_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (node_id) REFERENCES skill_nodes(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_skill_nodes_branch ON skill_nodes(branch_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_unlocked_skills_node ON unlocked_skills(node_id)");for(const e of Ex)s.run(`INSERT INTO skill_branches (name, description, icon, color, sort_order)
         VALUES (?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.color,e.sort_order]);for(const e of vx)s.run(`INSERT INTO skill_nodes (branch_id, name, description, icon, tier, position, xp_cost, prerequisite_node_id, effect_type, effect_value, is_capstone)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.branch_id,e.name,e.description,e.icon,e.tier,e.position,e.xp_cost,e.prerequisite_node_id,e.effect_type,e.effect_value,e.is_capstone?1:0]);await ve(),localStorage.setItem(av,"true"),console.log("Skill tree migration completed successfully")}catch(e){throw console.error("Failed to run skill tree migration:",e),e}}const bx=[{key:"warrior",name:"Warrior",description:"Masters of physical challenges and quest completion",icon:"",primary_stat:"stamina",stat_bonuses:'{"stamina": 3, "health": 2}',xp_bonus_type:"quest",xp_bonus_percent:10,special_ability:"Battlecry",special_ability_desc:"Once per day, complete a quest step instantly"},{key:"mage",name:"Mage",description:"Experts in habits and mental discipline",icon:"",primary_stat:"focus",stat_bonuses:'{"focus": 3, "willpower": 2}',xp_bonus_type:"buff",xp_bonus_percent:10,special_ability:"Arcane Focus",special_ability_desc:"Focus sessions grant 20% more XP"},{key:"ranger",name:"Ranger",description:"Specialists in maintaining streaks and consistency",icon:"",primary_stat:"willpower",stat_bonuses:'{"willpower": 3, "stamina": 1, "focus": 1}',xp_bonus_type:"streak",xp_bonus_percent:10,special_ability:"Tracking",special_ability_desc:"Streaks are protected for 1 extra day"},{key:"paladin",name:"Paladin",description:"Champions of boss battles and weekly challenges",icon:"",primary_stat:"health",stat_bonuses:'{"health": 2, "willpower": 2, "charisma": 1}',xp_bonus_type:"boss",xp_bonus_percent:10,special_ability:"Divine Shield",special_ability_desc:"Deal 25% more damage to weekly bosses"}],rv=3,ov="character_class_migration_v1";async function Sx(){if(localStorage.getItem(ov))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS character_classes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        primary_stat TEXT NOT NULL,
        stat_bonuses TEXT NOT NULL DEFAULT '{}',
        xp_bonus_type TEXT NOT NULL,
        xp_bonus_percent INTEGER NOT NULL DEFAULT 0,
        special_ability TEXT NOT NULL,
        special_ability_desc TEXT NOT NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS character_class_selection (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        class_id INTEGER,
        selected_at TEXT,
        last_changed_at TEXT,
        changes_remaining INTEGER NOT NULL DEFAULT ${rv},
        FOREIGN KEY (class_id) REFERENCES character_classes(id) ON DELETE SET NULL
      )
    `),s.exec("SELECT COUNT(*) FROM character_class_selection")[0].values[0][0]===0&&s.run(`INSERT INTO character_class_selection (id, changes_remaining) VALUES (1, ${rv})`);for(const n of bx)s.run(`INSERT INTO character_classes (key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[n.key,n.name,n.description,n.icon,n.primary_stat,n.stat_bonuses,n.xp_bonus_type,n.xp_bonus_percent,n.special_ability,n.special_ability_desc]);await ve(),localStorage.setItem(ov,"true"),console.log("Character class migration completed successfully")}catch(e){throw console.error("Failed to run character class migration:",e),e}}const Nx=[{name:"The Awakening Glade",description:"Where every journey begins. A peaceful clearing filled with morning light.",icon:"",unlock_level:1,background_color:"#22c55e",position_x:50,position_y:80,connected_to:"[2]",challenges:'["Complete your first quest", "Activate 5 buffs", "Reach level 3"]',rewards:'{"xp": 100, "title": "Awakened"}'},{name:"Habit Highlands",description:"Rocky terrain where only consistent habits lead to the summit.",icon:"",unlock_level:5,background_color:"#a3a3a3",position_x:30,position_y:60,connected_to:"[1, 3]",challenges:'["Maintain a 7-day streak", "Complete 10 quests", "Defeat your first boss"]',rewards:'{"xp": 250, "title": "Highland Wanderer"}'},{name:"Focus Forest",description:"Dense woods where only the focused can find their way.",icon:"",unlock_level:10,background_color:"#166534",position_x:70,position_y:50,connected_to:"[2, 4]",challenges:'["Complete 10 focus sessions", "Reach level 15", "Unlock 3 skill nodes"]',rewards:'{"xp": 400, "title": "Forest Pathfinder"}'},{name:"Productivity Plains",description:"Vast open fields where goals are achieved and dreams realized.",icon:"",unlock_level:15,background_color:"#eab308",position_x:50,position_y:35,connected_to:"[3, 5]",challenges:'["Complete 5 goals", "Earn 5000 total XP", "Defeat 5 bosses"]',rewards:'{"xp": 600, "title": "Plains Champion"}'},{name:"Summit of Mastery",description:"The peak where only true masters stand. Your journey culminates here.",icon:"",unlock_level:25,background_color:"#7c3aed",position_x:50,position_y:15,connected_to:"[4]",challenges:'["Reach level 30", "Unlock all capstone skills", "Complete 50 quests"]',rewards:'{"xp": 1000, "title": "Summit Master"}'}],lv="territory_migration_v1";async function xx(){if(localStorage.getItem(lv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS territories (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        unlock_level INTEGER NOT NULL DEFAULT 1,
        background_color TEXT NOT NULL DEFAULT '#333333',
        position_x INTEGER NOT NULL DEFAULT 50,
        position_y INTEGER NOT NULL DEFAULT 50,
        connected_to TEXT NOT NULL DEFAULT '[]',
        challenges TEXT NOT NULL DEFAULT '[]',
        rewards TEXT NOT NULL DEFAULT '{}'
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS territory_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        territory_id INTEGER NOT NULL UNIQUE,
        discovered_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        challenges_completed TEXT NOT NULL DEFAULT '[]',
        is_current INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (territory_id) REFERENCES territories(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_territory_progress_territory ON territory_progress(territory_id)");for(const e of Nx)s.run(`INSERT INTO territories (name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.unlock_level,e.background_color,e.position_x,e.position_y,e.connected_to,e.challenges,e.rewards]);s.run("INSERT INTO territory_progress (territory_id, is_current) VALUES (1, 1)"),await ve(),localStorage.setItem(lv,"true"),console.log("Territory migration completed successfully")}catch(e){throw console.error("Failed to run territory migration:",e),e}}const wx=[{name:"Wooden Sword",description:"A basic training sword",icon:"",type:"equipment",slot:"weapon",rarity:"common",stat_effects:'{"stamina": 1}',special_effect:"",stack_limit:1},{name:"Iron Blade",description:"A sturdy iron sword",icon:"",type:"equipment",slot:"weapon",rarity:"uncommon",stat_effects:'{"stamina": 2, "willpower": 1}',special_effect:"",stack_limit:1},{name:"Focus Staff",description:"A staff that enhances concentration",icon:"",type:"equipment",slot:"weapon",rarity:"rare",stat_effects:'{"focus": 3, "willpower": 2}',special_effect:"+5% focus session XP",stack_limit:1},{name:"Dragon Slayer",description:"Legendary weapon forged from dragon scales",icon:"",type:"equipment",slot:"weapon",rarity:"legendary",stat_effects:'{"stamina": 5, "willpower": 3, "health": 2}',special_effect:"+25% boss damage",stack_limit:1},{name:"Leather Vest",description:"Basic protection",icon:"",type:"equipment",slot:"armor",rarity:"common",stat_effects:'{"health": 1}',special_effect:"",stack_limit:1},{name:"Chain Mail",description:"Linked metal rings for defense",icon:"",type:"equipment",slot:"armor",rarity:"uncommon",stat_effects:'{"health": 2, "stamina": 1}',special_effect:"",stack_limit:1},{name:"Mage Robes",description:"Enchanted robes of wisdom",icon:"",type:"equipment",slot:"armor",rarity:"rare",stat_effects:'{"willpower": 3, "focus": 2}',special_effect:"+10% buff duration",stack_limit:1},{name:"Lucky Charm",description:"Brings good fortune",icon:"",type:"equipment",slot:"accessory",rarity:"common",stat_effects:'{"charisma": 1}',special_effect:"",stack_limit:1},{name:"Ring of Focus",description:"Enhances mental clarity",icon:"",type:"equipment",slot:"accessory",rarity:"uncommon",stat_effects:'{"focus": 2}',special_effect:"",stack_limit:1},{name:"Amulet of Persistence",description:"Grants unwavering determination",icon:"",type:"equipment",slot:"accessory",rarity:"rare",stat_effects:'{"willpower": 3, "stamina": 1}',special_effect:"Streaks protected for +1 day",stack_limit:1},{name:"Energy Potion",description:"Restores 25 energy",icon:"",type:"consumable",slot:null,rarity:"common",stat_effects:"{}",special_effect:"restore_energy:25",stack_limit:10},{name:"XP Elixir",description:"Grants 50 bonus XP",icon:"",type:"consumable",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"grant_xp:50",stack_limit:5},{name:"Streak Shield Scroll",description:"Adds a streak shield",icon:"",type:"consumable",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"add_shield:1",stack_limit:3},{name:"First Blood Trophy",description:"Awarded for defeating your first boss",icon:"",type:"trophy",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Streak Champion Medal",description:"Awarded for a 30-day streak",icon:"",type:"trophy",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Mastery Crown",description:"Awarded for reaching level 50",icon:"",type:"trophy",slot:null,rarity:"legendary",stat_effects:"{}",special_effect:"",stack_limit:1}],cv="inventory_migration_v1";async function Ax(){if(localStorage.getItem(cv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS item_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        type TEXT NOT NULL,
        slot TEXT,
        rarity TEXT NOT NULL DEFAULT 'common',
        stat_effects TEXT NOT NULL DEFAULT '{}',
        special_effect TEXT NOT NULL DEFAULT '',
        stack_limit INTEGER NOT NULL DEFAULT 1
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS inventory (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        item_id INTEGER NOT NULL,
        quantity INTEGER NOT NULL DEFAULT 1,
        acquired_at TEXT NOT NULL DEFAULT (datetime('now')),
        source TEXT NOT NULL DEFAULT 'unknown',
        FOREIGN KEY (item_id) REFERENCES item_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS equipped_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        slot TEXT NOT NULL UNIQUE,
        inventory_id INTEGER NOT NULL,
        equipped_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (inventory_id) REFERENCES inventory(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_inventory_item ON inventory(item_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_equipped_items_slot ON equipped_items(slot)");for(const e of wx)s.run(`INSERT INTO item_definitions (name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.type,e.slot,e.rarity,e.stat_effects,e.special_effect,e.stack_limit]);s.run("INSERT INTO inventory (item_id, source) VALUES (1, 'starter')"),s.run("INSERT INTO inventory (item_id, source) VALUES (5, 'starter')"),s.run("INSERT INTO inventory (item_id, quantity, source) VALUES (12, 3, 'starter')"),await ve(),localStorage.setItem(cv,"true"),console.log("Inventory migration completed successfully")}catch(e){throw console.error("Failed to run inventory migration:",e),e}}const uv="app_settings_migration_v1";async function Rx(){if(localStorage.getItem(uv))return;const s=te();try{s.run(`
      CREATE TABLE IF NOT EXISTS app_settings (
        key TEXT PRIMARY KEY,
        value TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await ve(),localStorage.setItem(uv,"true"),console.log("App settings migration completed successfully")}catch(e){throw console.error("Failed to run app settings migration:",e),e}}function Cx(){const[s,e]=L.useState(!1),[n,a]=L.useState(null);return L.useEffect(()=>{zN().then(async()=>{await XN(),await $N(),await YN(),await QN(),await KN(),await WN(),await JN(),await ZN(),await sx(),await ax(),await cx(),await ux(),await hx(),await mx(),await yx(),await Tx(),await Sx(),await xx(),await Ax(),await Rx(),e(!0)}).catch(o=>a(o.message))},[]),{ready:s,error:n}}function dv(){const e=te().exec("SELECT id, name, total_xp, level, title, created_at FROM character WHERE id = 1");if(!e.length)throw new Error("Character not found");const n=e[0].values[0];return{id:n[0],name:n[1],total_xp:n[2],level:n[3],title:n[4],created_at:n[5]}}async function Ix(s){te().run("UPDATE character SET name = ? WHERE id = 1",[s]),await ve()}function fv(s=50){const n=te().exec(`SELECT id, amount, reason, source_type, source_id, created_at
     FROM xp_log ORDER BY created_at DESC LIMIT ?`,[s]);return n.length?n[0].values.map(a=>({id:a[0],amount:a[1],reason:a[2],source_type:a[3],source_id:a[4],created_at:a[5]})):[]}const qm=["stamina","willpower","health","focus","charisma"],lr=["Novice","Apprentice","Journeyman","Adept","Expert","Master","Legend","Dragonborn"],hv={normal:10,important:15,legendary:20},kx=50,Lx=200,mv=5,jx=25,Dx=1.8,Ox=50;function gp(s){return Math.floor(Ox*Math.pow(s,Dx))}function Mx(s){let e=0;for(let n=1;n<s;n++)e+=gp(n);return e}function yp(s){let e=1,n=0;for(;;){if(n+=gp(e),s<n)return e;if(e++,e>100)return 100}}function Md(s){const e=yp(s),n=Mx(e),a=s-n,o=gp(e);return{current:a,needed:o,percentage:Math.min(a/o*100,100)}}function ab(s){return s>=50?lr[7]:s>=40?lr[6]:s>=30?lr[5]:s>=22?lr[4]:s>=15?lr[3]:s>=10?lr[2]:s>=5?lr[1]:lr[0]}async function Ux(s,e,n,a=null){const o=te(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],E=h+s,_=yp(E),S=ab(_),x=_>g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[s,e,n,a]),await ve(),{amount:s,newTotal:E,leveledUp:x,newLevel:_,newTitle:S}}async function Vx(s,e,n,a=null){const o=te(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],E=Math.max(0,h-s),_=yp(E),S=ab(_),x=_<g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[-s,e,n,a]),await ve(),{amount:s,newTotal:E,leveledDown:x,newLevel:_,newTitle:S}}function qx(){const[s,e]=L.useState(()=>dv()),[n,a]=L.useState(()=>fv()),[o,u]=L.useState(null),[h,g]=L.useState([]),E=L.useCallback(()=>{e(dv()),a(fv())},[]),_=L.useCallback(async(B,G,U,q)=>{const z=await Ux(B,G,U,q??null);z.leveledUp&&u({level:z.newLevel,title:z.newTitle});const H=Date.now();return g(K=>[...K,{id:H,amount:B}]),setTimeout(()=>g(K=>K.filter(ie=>ie.id!==H)),1500),E(),z},[E]),S=L.useCallback(async(B,G,U,q)=>{const z=await Vx(B,G,U,q??null),H=Date.now();return g(K=>[...K,{id:H,amount:-B}]),setTimeout(()=>g(K=>K.filter(ie=>ie.id!==H)),1500),E(),z},[E]),x=L.useCallback(()=>u(null),[]),w=L.useCallback(async B=>{await Ix(B),E()},[E]);return{character:s,xpLog:n,levelUpInfo:o,xpFloats:h,grantXP:_,deductXP:S,dismissLevelUp:x,setName:w,refresh:E}}function rb(){const e=te().exec("SELECT id, name, icon, color FROM domains ORDER BY id");return e.length?e[0].values.map(n=>({id:n[0],name:n[1],icon:n[2],color:n[3]})):[]}function Bx(s,e){const n=te();let a="SELECT id, domain_id, title, description, status, created_at, completed_at FROM goals WHERE 1=1";const o=[];s&&(a+=" AND domain_id = ?",o.push(s)),e&&(a+=" AND status = ?",o.push(e)),a+=" ORDER BY created_at DESC";const u=n.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],domain_id:h[1],title:h[2],description:h[3],status:h[4],created_at:h[5],completed_at:h[6]})):[]}async function Px(s,e,n=""){const a=te();a.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[s,e,n]);const o=a.exec("SELECT last_insert_rowid()");return await ve(),o[0].values[0][0]}async function Fx(s,e){const n=te(),a=new Date().toISOString();n.run("UPDATE goals SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await ve()}function Ep(s,e){const n=te();let a="SELECT id, goal_id, title, description, priority, status, created_at, completed_at FROM quests WHERE 1=1";const o=[];s&&(a+=" AND goal_id = ?",o.push(s)),a+=" ORDER BY created_at DESC";const u=n.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],goal_id:h[1],title:h[2],description:h[3],priority:h[4],status:h[5],created_at:h[6],completed_at:h[7]})):[]}async function Gx(s,e,n="",a="normal"){const o=te();o.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[s,e,n,a]);const u=o.exec("SELECT last_insert_rowid()");return await ve(),u[0].values[0][0]}async function Hx(s,e){const n=te(),a=new Date().toISOString();n.run("UPDATE quests SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await ve()}function zx(s){const n=te().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at, missed_at FROM steps WHERE id = ?",[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6],missed_at:a[7]}}function vp(s){const n=te().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at, missed_at FROM steps WHERE quest_id = ? ORDER BY sort_order, id",[s]);return n.length?n[0].values.map(a=>({id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6],missed_at:a[7]})):[]}async function Xx(s,e,n="normal"){const a=te(),u=a.exec("SELECT COALESCE(MAX(sort_order), 0) FROM steps WHERE quest_id = ?",[s])[0].values[0][0]+1;a.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[s,e,n,u]);const h=a.exec("SELECT last_insert_rowid()");return await ve(),h[0].values[0][0]}async function $x(s){te().run("UPDATE steps SET status = 'completed', completed_at = datetime('now') WHERE id = ?",[s]),await ve()}async function Yx(s){te().run("UPDATE steps SET status = 'pending', completed_at = NULL WHERE id = ?",[s]),await ve()}async function Qx(s){te().run("DELETE FROM steps WHERE id = ?",[s]),await ve()}async function Kx(s,e=10){const n=te(),a=new Date().toISOString().split("T")[0];n.run("UPDATE steps SET status = 'missed', missed_at = datetime('now') WHERE id = ?",[s]),n.run("INSERT INTO missed_steps_log (step_id, missed_date, xp_penalty) VALUES (?, ?, ?)",[s,a,e]),await ve()}function Wx(){const s=te(),e=new Date().toISOString().split("T")[0],n=s.exec("SELECT COUNT(*) FROM missed_steps_log WHERE missed_date = ?",[e]);return n.length?n[0].values[0][0]:0}async function Jx(s){te().run("UPDATE steps SET status = 'pending', missed_at = NULL WHERE id = ?",[s]),await ve()}async function Zx(s){const e=te();e.run("DELETE FROM steps WHERE quest_id = ?",[s]),e.run("DELETE FROM quests WHERE id = ?",[s]),await ve()}async function ew(s){const e=te(),n=Ep(s);for(const a of n)e.run("DELETE FROM steps WHERE quest_id = ?",[a.id]);e.run("DELETE FROM quests WHERE goal_id = ?",[s]),e.run("DELETE FROM goals WHERE id = ?",[s]),await ve()}function tw(s){const n=te().exec(`SELECT q.id, q.goal_id, q.title, q.description, q.priority, q.status, q.created_at, q.completed_at,
            d.name as domain_name, d.icon as domain_icon, d.color as domain_color, g.title as goal_title
     FROM quests q
     JOIN goals g ON q.goal_id = g.id
     JOIN domains d ON g.domain_id = d.id
     WHERE q.id = ?`,[s]);if(!n.length)return null;const a=n[0].values[0];return{id:a[0],goal_id:a[1],title:a[2],description:a[3],priority:a[4],status:a[5],created_at:a[6],completed_at:a[7],domain_name:a[8],domain_icon:a[9],domain_color:a[10],goal_title:a[11],steps:vp(s)}}function nw(s,e){const n=Bx(s,e),a=rb(),o=new Map(a.map(u=>[u.id,u]));return n.map(u=>{const h=o.get(u.domain_id),g=Ep(u.id).map(E=>({...E,steps:vp(E.id),domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color,goal_title:u.title}));return{...u,quests:g,domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color}})}const pv=10;function sw({grantXP:s,onStepComplete:e,onQuestComplete:n,onGoalComplete:a,onStepMissed:o}){const[u,h]=L.useState([]),[g]=L.useState(()=>rb()),[E,_]=L.useState(void 0),[S,x]=L.useState("active"),w=L.useCallback(()=>{h(nw(E,S))},[E,S]);L.useEffect(()=>{w()},[w]);const B=L.useCallback(async(D,A,j)=>{await Px(D,A,j),w()},[w]),G=L.useCallback(async(D,A,j,V)=>{await Gx(D,A,j,V),w()},[w]),U=L.useCallback(async(D,A,j)=>{await Xx(D,A,j),w()},[w]),q=L.useCallback(async(D,A,j)=>{await $x(D);const V=hv[j]||10;await s(V,"Completed step","step",D),e&&e();const M=vp(A);if(M.every(k=>k.status==="completed")&&M.length>0){await Hx(A,"completed"),await s(kx,"Completed quest","quest",A),n&&n();const k=tw(A);k&&Ep(k.goal_id).every(se=>se.status==="completed")&&(await Fx(k.goal_id,"completed"),await s(Lx,"Completed goal","goal",k.goal_id),a&&a())}w()},[w,s,e,n,a]),z=L.useCallback(async D=>{const A=zx(D);if(A){const j=hv[A.priority]||10;await s(-j,"Uncompleted step","step_uncomplete",D)}await Yx(D),w()},[w,s]),H=L.useCallback(async D=>{await Qx(D),w()},[w]),K=L.useCallback(async D=>{await Zx(D),w()},[w]),ie=L.useCallback(async D=>{await ew(D),w()},[w]),Ee=L.useCallback(async D=>{await Kx(D,pv),await s(-pv,"Missed step","step_missed",D);const A=Wx();o&&o(A),w()},[w,s,o]),ge=L.useCallback(async D=>{await Jx(D),w()},[w]);return{goals:u,domains:g,filterDomain:E,filterStatus:S,setFilterDomain:_,setFilterStatus:x,refresh:w,createGoal:B,createQuest:G,createStep:U,completeStep:q,uncompleteStep:z,missStep:Ee,unmissStep:ge,deleteStep:H,deleteQuest:K,deleteGoal:ie}}function iw(s){const e=te();let n="SELECT id, name, description, type, icon, duration_hours, stat_effects, created_at FROM buff_definitions";const a=[];n+=" ORDER BY name";const o=e.exec(n,a);return o.length?o[0].values.map(u=>({id:u[0],name:u[1],description:u[2],type:u[3],icon:u[4],duration_hours:u[5],stat_effects:u[6],created_at:u[7]})):[]}async function aw(s,e,n,a,o,u){const h=te();h.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[s,e,n,a,o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ve(),g[0].values[0][0]}async function rw(s){const e=te();e.run("DELETE FROM buff_log WHERE definition_id = ?",[s]),e.run("DELETE FROM buff_definitions WHERE id = ?",[s]),await ve()}async function Bm(s){const e=te(),n=e.exec("SELECT duration_hours FROM buff_definitions WHERE id = ?",[s]);if(!n.length)throw new Error("Buff definition not found");const a=n[0].values[0][0],o=e.exec(`SELECT id, expires_at FROM buff_log
     WHERE definition_id = ? AND is_active = 1 AND expires_at > datetime('now')
     ORDER BY expires_at DESC LIMIT 1`,[s]);if(o.length&&o[0].values.length){const _=o[0].values[0][0];e.run(`UPDATE buff_log SET expires_at = datetime(expires_at, '+' || ? || ' hours')
       WHERE id = ?`,[a,_]);const x=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[_])[0].values[0][0];return await ve(),{logId:_,isStacked:!0,newExpiresAt:x}}e.run(`INSERT INTO buff_log (definition_id, expires_at)
     VALUES (?, datetime('now', '+' || ? || ' hours'))`,[s,a]);const h=e.exec("SELECT last_insert_rowid()")[0].values[0][0],E=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[h])[0].values[0][0];return await ve(),{logId:h,isStacked:!1,newExpiresAt:E}}async function ow(s){const e=te(),n=e.exec(`SELECT bl.definition_id, bd.type, bd.name, bd.duration_hours, bl.expires_at, bl.activated_at
     FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bl.id = ?`,[s]);if(!n.length||!n[0].values.length)return null;const[a,o,u,h,g,E]=n[0].values[0],S=e.exec("SELECT datetime(?, '-' || ? || ' hours')",[g,h])[0].values[0][0];return e.exec("SELECT datetime('now') < datetime(?)",[S])[0].values[0][0]===1?(e.run("UPDATE buff_log SET expires_at = ? WHERE id = ?",[S,s]),await ve(),{definitionId:a,buffType:o,buffName:u,fullyDeactivated:!1,newExpiresAt:S}):(e.run("UPDATE buff_log SET is_active = 0 WHERE id = ?",[s]),await ve(),{definitionId:a,buffType:o,buffName:u,fullyDeactivated:!0,newExpiresAt:null})}function lw(s){const n=te().exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-30 days')
     ORDER BY d DESC`,[s]);if(!n.length)return 0;let a=0;const o=new Date().toISOString().split("T")[0],u=n[0].values.map(E=>E[0]),h=new Date(Date.now()-864e5).toISOString().split("T")[0];if(!u.includes(o)&&!u.includes(h))return 0;let g=u.includes(o)?o:h;for(const E of u)if(E===g){a++;const _=new Date(g+"T00:00:00");_.setDate(_.getDate()-1),g=_.toISOString().split("T")[0]}return a}const cw={GUILT:{name:"Guilt",description:"You missed a step. Focus and willpower reduced.",icon:"",duration_hours:4,stat_effects:'{"willpower": -1, "focus": -1}'},OFF_TRACK:{name:"Off Track",description:"You missed 3+ steps today. All stats reduced.",icon:"",duration_hours:24,stat_effects:'{"stamina": -2, "willpower": -2, "health": -2, "focus": -2, "charisma": -2}'}};async function _v(s){const e=te(),n=cw[s],a=e.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = ?",[n.name,"debuff"]);if(a.length&&a[0].values.length)return a[0].values[0][0];e.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[n.name,n.description,"debuff",n.icon,n.duration_hours,n.stat_effects]);const o=e.exec("SELECT last_insert_rowid()");return await ve(),o[0].values[0][0]}async function uw(s){const e=await _v("GUILT");if(await Bm(e),s>=3){const n=await _v("OFF_TRACK");await Bm(n)}}function dw(){const e=te().exec("SELECT value FROM app_settings WHERE key = 'last_buff_reset_date'");return!e.length||!e[0].values.length?null:e[0].values[0][0]}async function gv(s){te().run(`INSERT INTO app_settings (key, value) VALUES ('last_buff_reset_date', ?)
     ON CONFLICT(key) DO UPDATE SET value = ?`,[s,s]),await ve()}async function fw(){const s=te(),e=s.exec("SELECT COUNT(*) FROM buff_log WHERE is_active = 1"),n=e.length&&e[0].values.length?e[0].values[0][0]:0;return s.run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1"),await ve(),n}async function hw(){const s=new Date().toISOString().split("T")[0],e=dw();return e?e!==s?(await fw(),await gv(s),!0):!1:(await gv(s),!1)}function jc(s){try{return JSON.parse(s)}catch{return{}}}async function mw(){te().run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1 AND expires_at <= datetime('now')"),await ve()}function pw(){const e=te().exec(`
    SELECT bl.id, bl.definition_id, bl.activated_at, bl.expires_at, bl.is_active,
           bd.name, bd.description, bd.type, bd.icon, bd.stat_effects
    FROM buff_log bl
    JOIN buff_definitions bd ON bl.definition_id = bd.id
    WHERE bl.is_active = 1 AND bl.expires_at > datetime('now')
    ORDER BY bl.activated_at DESC
  `);return e.length?e[0].values.map(n=>({id:n[0],definition_id:n[1],activated_at:n[2],expires_at:n[3],is_active:!!n[4],name:n[5],description:n[6],type:n[7],icon:n[8],stat_effects:n[9]})):[]}function _w(s){const e={stamina:10,willpower:10,health:10,focus:10,charisma:10};for(const n of s){const a=jc(n.stat_effects);for(const[o,u]of Object.entries(a))o in e&&(e[o]+=u)}return e}function gw({grantXP:s,deductXP:e,scheduleBuffExpiry:n,cancelBuffExpiry:a,onBuffActivated:o,onDebuffActivated:u}){const[h,g]=L.useState([]),[E,_]=L.useState([]),[S,x]=L.useState({stamina:10,willpower:10,health:10,focus:10,charisma:10}),w=L.useCallback(async()=>{await mw(),g(iw());const z=pw();_(z),x(_w(z))},[]);L.useEffect(()=>{const z=setInterval(w,6e4);return()=>clearInterval(z)},[w]);const B=L.useCallback(async(z,H,K,ie,Ee,ge)=>{await aw(z,H,K,ie,Ee,ge),w()},[w]),G=L.useCallback(async z=>{await rw(z),w()},[w]),U=L.useCallback(async z=>{const H=await Bm(z),K=h.find(Ee=>Ee.id===z),ie=K&&K.stat_effects&&K.stat_effects!=="{}"&&(()=>{try{const Ee=JSON.parse(K.stat_effects);return Object.values(Ee).some(ge=>ge!==0)}catch{return!1}})();if(K&&K.type==="buff"&&ie&&(await s(mv,`Activated buff: ${K.name}`,"buff",H.logId),!H.isStacked)){const Ee=lw(z);Ee>0&&Ee%7===0&&await s(jx,`7-day streak: ${K.name}`,"streak",z)}K&&o&&ie&&o(K.type),K&&K.type==="debuff"&&u&&ie&&!H.isStacked&&u(K.name),K&&n&&(H.isStacked&&a&&await a(H.logId),await n(H.logId,K.name,K.type,H.newExpiresAt)),w()},[w,h,s,n,a,o,u]),q=L.useCallback(async z=>{const H=await ow(z);H&&(H.buffType==="buff"&&await e(mv,`Undo buff: ${H.buffName}`,"buff_undo",z),H.fullyDeactivated?a&&await a(z):n&&a&&H.newExpiresAt&&(await a(z),await n(z,H.buffName,H.buffType,H.newExpiresAt))),w()},[w,a,n,e]);return{definitions:h,activeBuffs:E,stats:S,refresh:w,createDefinition:B,deleteDefinition:G,activateBuff:U,deactivateBuff:q}}const yw=1440*60*1e3,ob="Goal Game Backup",Gc="github_gist_token",va="github_gist_id",Ud="github_last_backup";function Ew(){return!!localStorage.getItem(Gc)}function lb(){return!!localStorage.getItem(Gc)}function Vd(){return localStorage.getItem(Gc)}function vw(s){localStorage.setItem(Gc,s)}function Tw(){localStorage.removeItem(Gc),localStorage.removeItem(va),localStorage.removeItem(Ud)}function bw(){const s=localStorage.getItem(Ud);return s?Date.now()-Number(s)>yw:!0}function cb(){const s=localStorage.getItem(Ud);return s?new Date(Number(s)):null}function Sw(s){let e="";for(let n=0;n<s.length;n++)e+=String.fromCharCode(s[n]);return btoa(e)}function Nw(s){const e=atob(s),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n}async function ub(s){try{const e=await fetch("https://api.github.com/gists?per_page=100",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!e.ok)return null;const n=await e.json();for(const a of n)if(a.description===ob)return a.id;return null}catch{return null}}async function xw(s){const e=localStorage.getItem(va);if(e){if((await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok)return e;localStorage.removeItem(va)}const n=await ub(s);if(n)return localStorage.setItem(va,n),n;const a=await fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({description:ob,public:!1,files:{"README.md":{content:`# Goal Game Backups

This gist contains automatic backups of your Goal Game data.

Backups are stored as base64-encoded database files.`}}})});if(!a.ok)throw new Error("Failed to create backup gist");const o=await a.json();return localStorage.setItem(va,o.id),o.id}async function db(s){const e=Vd();if(!e)return{success:!1,error:"Not authenticated"};try{const n=await xw(e),o=`backup-${new Date().toISOString().replace(/[:.]/g,"-")}.db.b64`,u=Sw(s),h=await fetch(`https://api.github.com/gists/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:{[o]:{content:u}}})});return h.ok?(localStorage.setItem(Ud,String(Date.now())),{success:!0,fileName:o}):{success:!1,error:(await h.json()).message||"Upload failed"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function fb(){const s=Vd();if(!s)return[];let e=localStorage.getItem(va);if(!e)if(e=await ub(s),e)localStorage.setItem(va,e);else return[];try{const n=await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!n.ok)return[];const a=await n.json(),o=[];for(const[u,h]of Object.entries(a.files))u.endsWith(".db.b64")&&o.push({fileName:u,size:h.size});return o.sort((u,h)=>h.fileName.localeCompare(u.fileName))}catch{return[]}}async function ww(s){const e=Vd();if(!e)return null;const n=localStorage.getItem(va);if(!n)return null;try{const a=await fetch(`https://api.github.com/gists/${n}`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json"}});if(!a.ok)return null;const u=(await a.json()).files[s];if(!u)return null;let h;return u.truncated?h=await(await fetch(u.raw_url,{headers:{Authorization:`Bearer ${e}`}})).text():h=u.content,Nw(h)}catch{return null}}async function Aw(s){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok}catch{return!1}}async function hb(s=7){const e=Vd();if(!e)return;const n=localStorage.getItem(va);if(n)try{const a=await fb();if(a.length<=s)return;const o=a.slice(s),u={};for(const h of o)u[h.fileName]=null;await fetch(`https://api.github.com/gists/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:u})})}catch{}}function Rw(){const[s,e]=L.useState("idle"),[n,a]=L.useState(null),[o,u]=L.useState(""),h=L.useRef(!1);return L.useEffect(()=>{if(h.current)return;h.current=!0;const E=setTimeout(async()=>{if(Ew()&&lb()){if(!bw()){a(cb());return}e("backing-up"),u("Auto-backing up to GitHub...");try{const _=await _p(),S=await db(_);S.success?(e("success"),u("Auto-backup complete!"),a(new Date),await hb(7),setTimeout(()=>{e("idle"),u("")},5e3)):(e("error"),u(`Auto-backup failed: ${S.error}`))}catch(_){e("error"),u(`Auto-backup failed: ${_ instanceof Error?_.message:"Unknown error"}`)}}},3e3);return()=>clearTimeout(E)},[]),{status:s,lastBackup:n,message:o}}const Cw=()=>{};var yv={};const mb=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Iw=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],g=s[n++],E=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(E>>10)),e[a++]=String.fromCharCode(56320+(E&1023))}else{const u=s[n++],h=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,E=o+2<s.length,_=E?s[o+2]:0,S=u>>2,x=(u&3)<<4|g>>4;let w=(g&15)<<2|_>>6,B=_&63;E||(B=64,h||(w=64)),a.push(n[S],n[x],n[w],n[B])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(mb(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Iw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||_==null||x==null)throw new kw;const w=u<<2|g>>4;if(a.push(w),_!==64){const B=g<<4&240|_>>2;if(a.push(B),x!==64){const G=_<<6&192|x;a.push(G)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lw=function(s){const e=mb(s);return pb.encodeByteArray(e,!0)},_d=function(s){return Lw(s).replace(/\./g,"")},jw=function(s){try{return pb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ow=()=>Dw().__FIREBASE_DEFAULTS__,Mw=()=>{if(typeof process>"u"||typeof yv>"u")return;const s=yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Uw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&jw(s[1]);return e&&JSON.parse(e)},Tp=()=>{try{return Cw()||Ow()||Mw()||Uw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Vw=s=>Tp()?.emulatorHosts?.[s],qw=s=>{const e=Vw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},_b=()=>Tp()?.config;class Bw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function bp(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pw(s){return(await fetch(s,{credentials:"include"})).ok}function Fw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[_d(JSON.stringify(n)),_d(JSON.stringify(h)),""].join(".")}const Rc={};function Gw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?s.emulator.push(e):s.prod.push(e);return s}function Hw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Ev=!1;function zw(s,e){if(typeof window>"u"||typeof document>"u"||!bp(window.location.host)||Rc[s]===e||Rc[s]||Ev)return;Rc[s]=e;function n(w){return`__firebase__banner__${w}`}const a="__firebase__banner",u=Gw().prod.length>0;function h(){const w=document.getElementById(a);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function E(w,B){w.setAttribute("width","24"),w.setAttribute("id",B),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function _(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Ev=!0,h()},w}function S(w,B){w.setAttribute("id",B),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=Hw(a),B=n("text"),G=document.getElementById(B)||document.createElement("span"),U=n("learnmore"),q=document.getElementById(U)||document.createElement("a"),z=n("preprendIcon"),H=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;g(K),S(q,U);const ie=_();E(H,z),K.append(H,G,q,ie),document.body.appendChild(K)}u?(G.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function Xw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $w(){const s=Tp()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yw(){return!$w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gb(){try{return typeof indexedDB=="object"}catch{return!1}}function yb(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function Qw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Kw="FirebaseError";class lo extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=Kw,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qd.prototype.create)}}class qd{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Ww(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new lo(o,g,a)}}function Ww(s,e){return s.replace(Jw,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Jw=/\{\$([^}]+)}/g;function gd(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],h=e[o];if(vv(u)&&vv(h)){if(!gd(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function vv(s){return s!==null&&typeof s=="object"}function Na(s){return s&&s._delegate?s._delegate:s}class xa{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const eo="[DEFAULT]";class Zw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Bw;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tA(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:eA(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eA(s){return s===eo?void 0:s}function tA(s){return s.instantiationMode==="EAGER"}class nA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var St;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(St||(St={}));const sA={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},iA=St.INFO,aA={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},rA=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=aA[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eb{constructor(e){this.name=e,this._logLevel=iA,this._logHandler=rA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const oA=(s,e)=>e.some(n=>s instanceof n);let Tv,bv;function lA(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cA(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vb=new WeakMap,Pm=new WeakMap,Tb=new WeakMap,mm=new WeakMap,Sp=new WeakMap;function uA(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(ba(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,s)}).catch(()=>{}),Sp.set(e,s),e}function dA(s){if(Pm.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Pm.set(s,e)}let Fm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Pm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Tb.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ba(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function fA(s){Fm=s(Fm)}function hA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(pm(this),e,...n);return Tb.set(a,e.sort?e.sort():[e]),ba(a)}:cA().includes(s)?function(...e){return s.apply(pm(this),e),ba(vb.get(this))}:function(...e){return ba(s.apply(pm(this),e))}}function mA(s){return typeof s=="function"?hA(s):(s instanceof IDBTransaction&&dA(s),oA(s,lA())?new Proxy(s,Fm):s)}function ba(s){if(s instanceof IDBRequest)return uA(s);if(mm.has(s))return mm.get(s);const e=mA(s);return e!==s&&(mm.set(s,e),Sp.set(e,s)),e}const pm=s=>Sp.get(s);function Bd(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=ba(h);return a&&h.addEventListener("upgradeneeded",E=>{a(ba(h.result),E.oldVersion,E.newVersion,ba(h.transaction),E)}),n&&h.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),g.then(E=>{u&&E.addEventListener("close",()=>u()),o&&E.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}function _m(s,{blocked:e}={}){const n=indexedDB.deleteDatabase(s);return e&&n.addEventListener("blocked",a=>e(a.oldVersion,a)),ba(n).then(()=>{})}const pA=["get","getKey","getAll","getAllKeys","count"],_A=["put","add","delete","clear"],gm=new Map;function Sv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=_A.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||pA.includes(n)))return;const u=async function(h,...g){const E=this.transaction(h,o?"readwrite":"readonly");let _=E.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),o&&E.done]))[0]};return gm.set(e,u),u}fA(s=>({...s,get:(e,n,a)=>Sv(e,n)||s.get(e,n,a),has:(e,n)=>!!Sv(e,n)||s.has(e,n)}));class gA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yA(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function yA(s){return s.getComponent()?.type==="VERSION"}const Gm="@firebase/app",Nv="0.14.7";const wa=new Eb("@firebase/app"),EA="@firebase/app-compat",vA="@firebase/analytics-compat",TA="@firebase/analytics",bA="@firebase/app-check-compat",SA="@firebase/app-check",NA="@firebase/auth",xA="@firebase/auth-compat",wA="@firebase/database",AA="@firebase/data-connect",RA="@firebase/database-compat",CA="@firebase/functions",IA="@firebase/functions-compat",kA="@firebase/installations",LA="@firebase/installations-compat",jA="@firebase/messaging",DA="@firebase/messaging-compat",OA="@firebase/performance",MA="@firebase/performance-compat",UA="@firebase/remote-config",VA="@firebase/remote-config-compat",qA="@firebase/storage",BA="@firebase/storage-compat",PA="@firebase/firestore",FA="@firebase/ai",GA="@firebase/firestore-compat",HA="firebase",zA="12.8.0";const Hm="[DEFAULT]",XA={[Gm]:"fire-core",[EA]:"fire-core-compat",[TA]:"fire-analytics",[vA]:"fire-analytics-compat",[SA]:"fire-app-check",[bA]:"fire-app-check-compat",[NA]:"fire-auth",[xA]:"fire-auth-compat",[wA]:"fire-rtdb",[AA]:"fire-data-connect",[RA]:"fire-rtdb-compat",[CA]:"fire-fn",[IA]:"fire-fn-compat",[kA]:"fire-iid",[LA]:"fire-iid-compat",[jA]:"fire-fcm",[DA]:"fire-fcm-compat",[OA]:"fire-perf",[MA]:"fire-perf-compat",[UA]:"fire-rc",[VA]:"fire-rc-compat",[qA]:"fire-gcs",[BA]:"fire-gcs-compat",[PA]:"fire-fst",[GA]:"fire-fst-compat",[FA]:"fire-vertex","fire-js":"fire-js",[HA]:"fire-js-all"};const yd=new Map,$A=new Map,zm=new Map;function xv(s,e){try{s.container.addComponent(e)}catch(n){wa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function _r(s){const e=s.name;if(zm.has(e))return wa.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,s);for(const n of yd.values())xv(n,s);for(const n of $A.values())xv(n,s);return!0}function Pd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function YA(s){return s==null?!1:s.settings!==void 0}const QA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new qd("app","Firebase",QA);class KA{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const WA=zA;function bb(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Hm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw fr.create("bad-app-name",{appName:String(o)});if(n||(n=_b()),!n)throw fr.create("no-options");const u=yd.get(o);if(u){if(gd(n,u.options)&&gd(a,u.config))return u;throw fr.create("duplicate-app",{appName:o})}const h=new nA(o);for(const E of zm.values())h.addComponent(E);const g=new KA(n,a,h);return yd.set(o,g),g}function Sb(s=Hm){const e=yd.get(s);if(!e&&s===Hm&&_b())return bb();if(!e)throw fr.create("no-app",{appName:s});return e}function Bi(s,e,n){let a=XA[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wa.warn(h.join(" "));return}_r(new xa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const JA="firebase-heartbeat-database",ZA=1,Dc="firebase-heartbeat-store";let ym=null;function Nb(){return ym||(ym=Bd(JA,ZA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(s=>{throw fr.create("idb-open",{originalErrorMessage:s.message})})),ym}async function eR(s){try{const n=(await Nb()).transaction(Dc),a=await n.objectStore(Dc).get(xb(s));return await n.done,a}catch(e){if(e instanceof lo)wa.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e?.message});wa.warn(n.message)}}}async function wv(s,e){try{const a=(await Nb()).transaction(Dc,"readwrite");await a.objectStore(Dc).put(e,xb(s)),await a.done}catch(n){if(n instanceof lo)wa.warn(n.message);else{const a=fr.create("idb-set",{originalErrorMessage:n?.message});wa.warn(a.message)}}}function xb(s){return`${s.name}!${s.options.appId}`}const tR=1024,nR=30;class sR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aR(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Av();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>nR){const o=rR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Av(),{heartbeatsToSend:n,unsentEntries:a}=iR(this._heartbeatsCache.heartbeats),o=_d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wa.warn(e),""}}}function Av(){return new Date().toISOString().substring(0,10)}function iR(s,e=tR){const n=[];let a=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Rv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Rv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class aR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gb()?yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Rv(s){return _d(JSON.stringify({version:2,heartbeats:s})).length}function rR(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function oR(s){_r(new xa("platform-logger",e=>new gA(e),"PRIVATE")),_r(new xa("heartbeat",e=>new sR(e),"PRIVATE")),Bi(Gm,Nv,s),Bi(Gm,Nv,"esm2020"),Bi("fire-js","")}oR("");var lR="firebase",cR="12.8.0";Bi(lR,cR,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hr,wb;(function(){var s;function e(D,A){function j(){}j.prototype=A.prototype,D.F=A.prototype,D.prototype=new j,D.prototype.constructor=D,D.D=function(V,M,O){for(var k=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)k[Ae-2]=arguments[Ae];return A.prototype[M].apply(V,k)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,j){j||(j=0);const V=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)V[M]=A.charCodeAt(j++)|A.charCodeAt(j++)<<8|A.charCodeAt(j++)<<16|A.charCodeAt(j++)<<24;else for(M=0;M<16;++M)V[M]=A[j++]|A[j++]<<8|A[j++]<<16|A[j++]<<24;A=D.g[0],j=D.g[1],M=D.g[2];let O=D.g[3],k;k=A+(O^j&(M^O))+V[0]+3614090360&4294967295,A=j+(k<<7&4294967295|k>>>25),k=O+(M^A&(j^M))+V[1]+3905402710&4294967295,O=A+(k<<12&4294967295|k>>>20),k=M+(j^O&(A^j))+V[2]+606105819&4294967295,M=O+(k<<17&4294967295|k>>>15),k=j+(A^M&(O^A))+V[3]+3250441966&4294967295,j=M+(k<<22&4294967295|k>>>10),k=A+(O^j&(M^O))+V[4]+4118548399&4294967295,A=j+(k<<7&4294967295|k>>>25),k=O+(M^A&(j^M))+V[5]+1200080426&4294967295,O=A+(k<<12&4294967295|k>>>20),k=M+(j^O&(A^j))+V[6]+2821735955&4294967295,M=O+(k<<17&4294967295|k>>>15),k=j+(A^M&(O^A))+V[7]+4249261313&4294967295,j=M+(k<<22&4294967295|k>>>10),k=A+(O^j&(M^O))+V[8]+1770035416&4294967295,A=j+(k<<7&4294967295|k>>>25),k=O+(M^A&(j^M))+V[9]+2336552879&4294967295,O=A+(k<<12&4294967295|k>>>20),k=M+(j^O&(A^j))+V[10]+4294925233&4294967295,M=O+(k<<17&4294967295|k>>>15),k=j+(A^M&(O^A))+V[11]+2304563134&4294967295,j=M+(k<<22&4294967295|k>>>10),k=A+(O^j&(M^O))+V[12]+1804603682&4294967295,A=j+(k<<7&4294967295|k>>>25),k=O+(M^A&(j^M))+V[13]+4254626195&4294967295,O=A+(k<<12&4294967295|k>>>20),k=M+(j^O&(A^j))+V[14]+2792965006&4294967295,M=O+(k<<17&4294967295|k>>>15),k=j+(A^M&(O^A))+V[15]+1236535329&4294967295,j=M+(k<<22&4294967295|k>>>10),k=A+(M^O&(j^M))+V[1]+4129170786&4294967295,A=j+(k<<5&4294967295|k>>>27),k=O+(j^M&(A^j))+V[6]+3225465664&4294967295,O=A+(k<<9&4294967295|k>>>23),k=M+(A^j&(O^A))+V[11]+643717713&4294967295,M=O+(k<<14&4294967295|k>>>18),k=j+(O^A&(M^O))+V[0]+3921069994&4294967295,j=M+(k<<20&4294967295|k>>>12),k=A+(M^O&(j^M))+V[5]+3593408605&4294967295,A=j+(k<<5&4294967295|k>>>27),k=O+(j^M&(A^j))+V[10]+38016083&4294967295,O=A+(k<<9&4294967295|k>>>23),k=M+(A^j&(O^A))+V[15]+3634488961&4294967295,M=O+(k<<14&4294967295|k>>>18),k=j+(O^A&(M^O))+V[4]+3889429448&4294967295,j=M+(k<<20&4294967295|k>>>12),k=A+(M^O&(j^M))+V[9]+568446438&4294967295,A=j+(k<<5&4294967295|k>>>27),k=O+(j^M&(A^j))+V[14]+3275163606&4294967295,O=A+(k<<9&4294967295|k>>>23),k=M+(A^j&(O^A))+V[3]+4107603335&4294967295,M=O+(k<<14&4294967295|k>>>18),k=j+(O^A&(M^O))+V[8]+1163531501&4294967295,j=M+(k<<20&4294967295|k>>>12),k=A+(M^O&(j^M))+V[13]+2850285829&4294967295,A=j+(k<<5&4294967295|k>>>27),k=O+(j^M&(A^j))+V[2]+4243563512&4294967295,O=A+(k<<9&4294967295|k>>>23),k=M+(A^j&(O^A))+V[7]+1735328473&4294967295,M=O+(k<<14&4294967295|k>>>18),k=j+(O^A&(M^O))+V[12]+2368359562&4294967295,j=M+(k<<20&4294967295|k>>>12),k=A+(j^M^O)+V[5]+4294588738&4294967295,A=j+(k<<4&4294967295|k>>>28),k=O+(A^j^M)+V[8]+2272392833&4294967295,O=A+(k<<11&4294967295|k>>>21),k=M+(O^A^j)+V[11]+1839030562&4294967295,M=O+(k<<16&4294967295|k>>>16),k=j+(M^O^A)+V[14]+4259657740&4294967295,j=M+(k<<23&4294967295|k>>>9),k=A+(j^M^O)+V[1]+2763975236&4294967295,A=j+(k<<4&4294967295|k>>>28),k=O+(A^j^M)+V[4]+1272893353&4294967295,O=A+(k<<11&4294967295|k>>>21),k=M+(O^A^j)+V[7]+4139469664&4294967295,M=O+(k<<16&4294967295|k>>>16),k=j+(M^O^A)+V[10]+3200236656&4294967295,j=M+(k<<23&4294967295|k>>>9),k=A+(j^M^O)+V[13]+681279174&4294967295,A=j+(k<<4&4294967295|k>>>28),k=O+(A^j^M)+V[0]+3936430074&4294967295,O=A+(k<<11&4294967295|k>>>21),k=M+(O^A^j)+V[3]+3572445317&4294967295,M=O+(k<<16&4294967295|k>>>16),k=j+(M^O^A)+V[6]+76029189&4294967295,j=M+(k<<23&4294967295|k>>>9),k=A+(j^M^O)+V[9]+3654602809&4294967295,A=j+(k<<4&4294967295|k>>>28),k=O+(A^j^M)+V[12]+3873151461&4294967295,O=A+(k<<11&4294967295|k>>>21),k=M+(O^A^j)+V[15]+530742520&4294967295,M=O+(k<<16&4294967295|k>>>16),k=j+(M^O^A)+V[2]+3299628645&4294967295,j=M+(k<<23&4294967295|k>>>9),k=A+(M^(j|~O))+V[0]+4096336452&4294967295,A=j+(k<<6&4294967295|k>>>26),k=O+(j^(A|~M))+V[7]+1126891415&4294967295,O=A+(k<<10&4294967295|k>>>22),k=M+(A^(O|~j))+V[14]+2878612391&4294967295,M=O+(k<<15&4294967295|k>>>17),k=j+(O^(M|~A))+V[5]+4237533241&4294967295,j=M+(k<<21&4294967295|k>>>11),k=A+(M^(j|~O))+V[12]+1700485571&4294967295,A=j+(k<<6&4294967295|k>>>26),k=O+(j^(A|~M))+V[3]+2399980690&4294967295,O=A+(k<<10&4294967295|k>>>22),k=M+(A^(O|~j))+V[10]+4293915773&4294967295,M=O+(k<<15&4294967295|k>>>17),k=j+(O^(M|~A))+V[1]+2240044497&4294967295,j=M+(k<<21&4294967295|k>>>11),k=A+(M^(j|~O))+V[8]+1873313359&4294967295,A=j+(k<<6&4294967295|k>>>26),k=O+(j^(A|~M))+V[15]+4264355552&4294967295,O=A+(k<<10&4294967295|k>>>22),k=M+(A^(O|~j))+V[6]+2734768916&4294967295,M=O+(k<<15&4294967295|k>>>17),k=j+(O^(M|~A))+V[13]+1309151649&4294967295,j=M+(k<<21&4294967295|k>>>11),k=A+(M^(j|~O))+V[4]+4149444226&4294967295,A=j+(k<<6&4294967295|k>>>26),k=O+(j^(A|~M))+V[11]+3174756917&4294967295,O=A+(k<<10&4294967295|k>>>22),k=M+(A^(O|~j))+V[2]+718787259&4294967295,M=O+(k<<15&4294967295|k>>>17),k=j+(O^(M|~A))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+O&4294967295}a.prototype.v=function(D,A){A===void 0&&(A=D.length);const j=A-this.blockSize,V=this.C;let M=this.h,O=0;for(;O<A;){if(M==0)for(;O<=j;)o(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<A;)if(V[M++]=D.charCodeAt(O++),M==this.blockSize){o(this,V),M=0;break}}else for(;O<A;)if(V[M++]=D[O++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=A},a.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var j=D.length-8;j<D.length;++j)D[j]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,j=0;j<4;++j)for(let V=0;V<32;V+=8)D[A++]=this.g[j]>>>V&255;return D};function u(D,A){var j=g;return Object.prototype.hasOwnProperty.call(j,D)?j[D]:j[D]=A(D)}function h(D,A){this.h=A;const j=[];let V=!0;for(let M=D.length-1;M>=0;M--){const O=D[M]|0;V&&O==A||(j[M]=O,V=!1)}this.g=j}var g={};function E(D){return-128<=D&&D<128?u(D,function(A){return new h([A|0],A<0?-1:0)}):new h([D|0],D<0?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return x;if(D<0)return q(_(-D));const A=[];let j=1;for(let V=0;D>=j;V++)A[V]=D/j|0,j*=4294967296;return new h(A,0)}function S(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return q(S(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=_(Math.pow(A,8));let V=x;for(let O=0;O<D.length;O+=8){var M=Math.min(8,D.length-O);const k=parseInt(D.substring(O,O+M),A);M<8?(M=_(Math.pow(A,M)),V=V.j(M).add(_(k))):(V=V.j(j),V=V.add(_(k)))}return V}var x=E(0),w=E(1),B=E(16777216);s=h.prototype,s.m=function(){if(U(this))return-q(this).m();let D=0,A=1;for(let j=0;j<this.g.length;j++){const V=this.i(j);D+=(V>=0?V:4294967296+V)*A,A*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(G(this))return"0";if(U(this))return"-"+q(this).toString(D);const A=_(Math.pow(D,6));var j=this;let V="";for(;;){const M=ie(j,A).g;j=z(j,M.j(A));let O=((j.g.length>0?j.g[0]:j.h)>>>0).toString(D);if(j=M,G(j))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function G(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function U(D){return D.h==-1}s.l=function(D){return D=z(this,D),U(D)?-1:G(D)?0:1};function q(D){const A=D.g.length,j=[];for(let V=0;V<A;V++)j[V]=~D.g[V];return new h(j,~D.h).add(w)}s.abs=function(){return U(this)?q(this):this},s.add=function(D){const A=Math.max(this.g.length,D.g.length),j=[];let V=0;for(let M=0;M<=A;M++){let O=V+(this.i(M)&65535)+(D.i(M)&65535),k=(O>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);V=k>>>16,O&=65535,k&=65535,j[M]=k<<16|O}return new h(j,j[j.length-1]&-2147483648?-1:0)};function z(D,A){return D.add(q(A))}s.j=function(D){if(G(this)||G(D))return x;if(U(this))return U(D)?q(this).j(q(D)):q(q(this).j(D));if(U(D))return q(this.j(q(D)));if(this.l(B)<0&&D.l(B)<0)return _(this.m()*D.m());const A=this.g.length+D.g.length,j=[];for(var V=0;V<2*A;V++)j[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<D.g.length;M++){const O=this.i(V)>>>16,k=this.i(V)&65535,Ae=D.i(M)>>>16,Je=D.i(M)&65535;j[2*V+2*M]+=k*Je,H(j,2*V+2*M),j[2*V+2*M+1]+=O*Je,H(j,2*V+2*M+1),j[2*V+2*M+1]+=k*Ae,H(j,2*V+2*M+1),j[2*V+2*M+2]+=O*Ae,H(j,2*V+2*M+2)}for(D=0;D<A;D++)j[D]=j[2*D+1]<<16|j[2*D];for(D=A;D<2*A;D++)j[D]=0;return new h(j,0)};function H(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function K(D,A){this.g=D,this.h=A}function ie(D,A){if(G(A))throw Error("division by zero");if(G(D))return new K(x,x);if(U(D))return A=ie(q(D),A),new K(q(A.g),q(A.h));if(U(A))return A=ie(D,q(A)),new K(q(A.g),A.h);if(D.g.length>30){if(U(D)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var j=w,V=A;V.l(D)<=0;)j=Ee(j),V=Ee(V);var M=ge(j,1),O=ge(V,1);for(V=ge(V,2),j=ge(j,2);!G(V);){var k=O.add(V);k.l(D)<=0&&(M=M.add(j),O=k),V=ge(V,1),j=ge(j,1)}return A=z(D,M.j(A)),new K(M,A)}for(M=x;D.l(A)>=0;){for(j=Math.max(1,Math.floor(D.m()/A.m())),V=Math.ceil(Math.log(j)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=_(j),k=O.j(A);U(k)||k.l(D)>0;)j-=V,O=_(j),k=O.j(A);G(O)&&(O=w),M=M.add(O),D=z(D,k)}return new K(M,D)}s.B=function(D){return ie(this,D).h},s.and=function(D){const A=Math.max(this.g.length,D.g.length),j=[];for(let V=0;V<A;V++)j[V]=this.i(V)&D.i(V);return new h(j,this.h&D.h)},s.or=function(D){const A=Math.max(this.g.length,D.g.length),j=[];for(let V=0;V<A;V++)j[V]=this.i(V)|D.i(V);return new h(j,this.h|D.h)},s.xor=function(D){const A=Math.max(this.g.length,D.g.length),j=[];for(let V=0;V<A;V++)j[V]=this.i(V)^D.i(V);return new h(j,this.h^D.h)};function Ee(D){const A=D.g.length+1,j=[];for(let V=0;V<A;V++)j[V]=D.i(V)<<1|D.i(V-1)>>>31;return new h(j,D.h)}function ge(D,A){const j=A>>5;A%=32;const V=D.g.length-j,M=[];for(let O=0;O<V;O++)M[O]=A>0?D.i(O+j)>>>A|D.i(O+j+1)<<32-A:D.i(O+j);return new h(M,D.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,wb=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=S,hr=h}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ab,xc,Rb,cd,Xm,Cb,Ib,kb;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ed=="object"&&ed];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=n(this);function o(d,v){if(v)e:{var b=a;d=d.split(".");for(var I=0;I<d.length-1;I++){var J=d[I];if(!(J in b))break e;b=b[J]}d=d[d.length-1],I=b[d],v=v(I),v!=I&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var b=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&b.push([I,v[I]]);return b}});var u=u||{},h=this||self;function g(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function E(d,v,b){return d.call.apply(d.bind,arguments)}function _(d,v,b){return _=E,_.apply(null,arguments)}function S(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function x(d,v){function b(){}b.prototype=v.prototype,d.Z=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(I,J,re){for(var xe=Array(arguments.length-2),We=2;We<arguments.length;We++)xe[We-2]=arguments[We];return v.prototype[J].apply(I,xe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function B(d){const v=d.length;if(v>0){const b=Array(v);for(let I=0;I<v;I++)b[I]=d[I];return b}return[]}function G(d,v){for(let I=1;I<arguments.length;I++){const J=arguments[I];var b=typeof J;if(b=b!="object"?b:J?Array.isArray(J)?"array":b:"null",b=="array"||b=="object"&&typeof J.length=="number"){b=d.length||0;const re=J.length||0;d.length=b+re;for(let xe=0;xe<re;xe++)d[b+xe]=J[xe]}else d.push(J)}}class U{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function q(d){h.setTimeout(()=>{throw d},0)}function z(){var d=D;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class H{constructor(){this.h=this.g=null}add(v,b){const I=K.get();I.set(v,b),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new U(()=>new ie,d=>d.reset());class ie{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ge=!1,D=new H,A=()=>{const d=Promise.resolve(void 0);Ee=()=>{d.then(j)}};function j(){for(var d;d=z();){try{d.h.call(d.g)}catch(b){q(b)}var v=K;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}ge=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,v),h.removeEventListener("test",b,v)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function Ae(d,v){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}x(Ae,M),Ae.prototype.init=function(d,v){const b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),se=0;function Te(d,v,b,I,J){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!I,this.ha=J,this.key=++se,this.da=this.fa=!1}function Ce(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function rt(d,v,b){for(const I in d)v.call(b,d[I],I,d)}function at(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function X(d){const v={};for(const b in d)v[b]=d[b];return v}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(d,v){let b,I;for(let J=1;J<arguments.length;J++){I=arguments[J];for(b in I)d[b]=I[b];for(let re=0;re<de.length;re++)b=de[re],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function be(d){this.src=d,this.g={},this.h=0}be.prototype.add=function(d,v,b,I,J){const re=d.toString();d=this.g[re],d||(d=this.g[re]=[],this.h++);const xe=we(d,v,I,J);return xe>-1?(v=d[xe],b||(v.fa=!1)):(v=new Te(v,this.src,re,!!I,J),v.fa=b,d.push(v)),v};function ae(d,v){const b=v.type;if(b in d.g){var I=d.g[b],J=Array.prototype.indexOf.call(I,v,void 0),re;(re=J>=0)&&Array.prototype.splice.call(I,J,1),re&&(Ce(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function we(d,v,b,I){for(let J=0;J<d.length;++J){const re=d[J];if(!re.da&&re.listener==v&&re.capture==!!b&&re.ha==I)return J}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),wt={};function yt(d,v,b,I,J){if(Array.isArray(v)){for(let re=0;re<v.length;re++)yt(d,v[re],b,I,J);return null}return b=ka(b),d&&d[Je]?d.J(v,b,g(I)?!!I.capture:!1,J):rn(d,v,b,!1,I,J)}function rn(d,v,b,I,J,re){if(!v)throw Error("Invalid event type");const xe=g(J)?!!J.capture:!!J;let We=kt(d);if(We||(d[Pe]=We=new be(d)),b=We.add(v,b,I,xe,re),b.proxy)return b;if(I=ms(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)O||(J=xe),J===void 0&&(J=!1),d.addEventListener(v.toString(),I,J);else if(d.attachEvent)d.attachEvent($n(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ms(){function d(b){return v.call(d.src,d.listener,b)}const v=Ia;return d}function fn(d,v,b,I,J){if(Array.isArray(v))for(var re=0;re<v.length;re++)fn(d,v[re],b,I,J);else I=g(I)?!!I.capture:!!I,b=ka(b),d&&d[Je]?(d=d.i,re=String(v).toString(),re in d.g&&(v=d.g[re],b=we(v,b,I,J),b>-1&&(Ce(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete d.g[re],d.h--)))):d&&(d=kt(d))&&(v=d.g[v.toString()],d=-1,v&&(d=we(v,b,I,J)),(b=d>-1?v[d]:null)&&Ni(b))}function Ni(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Je])ae(v.i,d);else{var b=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(b,I,d.capture):v.detachEvent?v.detachEvent($n(b),I):v.addListener&&v.removeListener&&v.removeListener(I),(b=kt(v))?(ae(b,d),b.h==0&&(b.src=null,v[Pe]=null)):Ce(d)}}}function $n(d){return d in wt?wt[d]:wt[d]="on"+d}function Ia(d,v){if(d.da)d=!0;else{v=new Ae(v,this);const b=d.listener,I=d.ha||d.src;d.fa&&Ni(d),d=b.call(I,v)}return d}function kt(d){return d=d[Pe],d instanceof be?d:null}var Yi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ka(d){return typeof d=="function"?d:(d[Yi]||(d[Yi]=function(v){return d.handleEvent(v)}),d[Yi])}function Qt(){V.call(this),this.i=new be(this),this.M=this,this.G=null}x(Qt,V),Qt.prototype[Je]=!0,Qt.prototype.removeEventListener=function(d,v,b,I){fn(this,d,v,b,I)};function nn(d,v){var b,I=d.G;if(I)for(b=[];I;I=I.G)b.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new M(v,d);else if(v instanceof M)v.target=v.target||d;else{var J=v;v=new M(I,d),le(v,J)}J=!0;let re,xe;if(b)for(xe=b.length-1;xe>=0;xe--)re=v.g=b[xe],J=Rs(re,I,!0,v)&&J;if(re=v.g=d,J=Rs(re,I,!0,v)&&J,J=Rs(re,I,!1,v)&&J,b)for(xe=0;xe<b.length;xe++)re=v.g=b[xe],J=Rs(re,I,!1,v)&&J}Qt.prototype.N=function(){if(Qt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const b=d.g[v];for(let I=0;I<b.length;I++)Ce(b[I]);delete d.g[v],d.h--}}this.G=null},Qt.prototype.J=function(d,v,b,I){return this.i.add(String(d),v,!1,b,I)},Qt.prototype.K=function(d,v,b,I){return this.i.add(String(d),v,!0,b,I)};function Rs(d,v,b,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let J=!0;for(let re=0;re<v.length;++re){const xe=v[re];if(xe&&!xe.da&&xe.capture==b){const We=xe.listener,Kt=xe.ha||xe.src;xe.fa&&ae(d.i,xe),J=We.call(Kt,I)!==!1&&J}}return J&&!I.defaultPrevented}function Ol(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function Sr(d){d.g=Ol(()=>{d.g=null,d.i&&(d.i=!1,Sr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Dn extends V{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(d){V.call(this),this.h=d,this.g={}}x(di,V);var fi=[];function ss(d){rt(d.g,function(v,b){this.g.hasOwnProperty(b)&&Ni(v)},d),d.g={}}di.prototype.N=function(){di.Z.N.call(this),ss(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=h.JSON.stringify,_o=h.JSON.parse,Nr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function go(){}function yo(){}var Cs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){M.call(this,"d")}x(qe,M);function is(){M.call(this,"c")}x(is,M);var zt={},xr=null;function Is(){return xr=xr||new Qt}zt.Ia="serverreachability";function Eo(d){M.call(this,zt.Ia,d)}x(Eo,M);function bn(d){const v=Is();nn(v,new Eo(v))}zt.STAT_EVENT="statevent";function xi(d,v){M.call(this,zt.STAT_EVENT,d),this.stat=v}x(xi,M);function Jt(d){const v=Is();nn(v,new xi(v,d))}zt.Ja="timingevent";function ks(d,v){M.call(this,zt.Ja,d),this.size=v}x(ks,M);function Se(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function Ls(){this.g=!0}Ls.prototype.ua=function(){this.g=!1};function Ml(d,v,b,I,J,re){d.info(function(){if(d.g)if(re){var xe="",We=re.split("&");for(let Tt=0;Tt<We.length;Tt++){var Kt=We[Tt].split("=");if(Kt.length>1){const qt=Kt[0];Kt=Kt[1];const Q=qt.split("_");xe=Q.length>=2&&Q[1]=="type"?xe+(qt+"="+Kt+"&"):xe+(qt+"=redacted&")}}}else xe=null;else xe=re;return"XMLHTTP REQ ("+I+") [attempt "+J+"]: "+v+`
`+b+`
`+xe})}function On(d,v,b,I,J,re,xe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+J+"]: "+v+`
`+b+`
`+re+" "+xe})}function ps(d,v,b,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+wr(d,b)+(I?" "+I:"")})}function mi(d,v){d.info(function(){return"TIMEOUT: "+v})}Ls.prototype.info=function(){};function wr(d,v){if(!d.g)return v;if(!v)return null;try{const re=JSON.parse(v);if(re){for(d=0;d<re.length;d++)if(Array.isArray(re[d])){var b=re[d];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var J=I[0];if(J!="noop"&&J!="stop"&&J!="close")for(let xe=1;xe<I.length;xe++)I[xe]=""}}}}return hi(re)}catch{return v}}var as={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},La={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hn;function wi(){}x(wi,go),wi.prototype.g=function(){return new XMLHttpRequest},hn=new wi;function Yn(d){return encodeURIComponent(String(d))}function Ar(d){var v=1;d=d.split(":");const b=[];for(;v>0&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function _s(d,v,b,I){this.j=d,this.i=v,this.l=b,this.S=I||1,this.V=new di(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var ft={},on={};function Xs(d,v,b){d.M=1,d.A=Ys(jt(v)),d.u=b,d.R=!0,Ai(d,null)}function Ai(d,v){d.F=Date.now(),rs(d),d.B=jt(d.A);var b=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),ys(b.i,"t",I),d.C=0,b=d.j.L,d.h=new Qn,d.g=Ao(d.j,b?v:null,!d.u),d.P>0&&(d.O=new Dn(_(d.Y,d,d.g),d.P)),v=d.V,b=d.g,I=d.ba;var J="readystatechange";Array.isArray(J)||(J&&(fi[0]=J.toString()),J=fi);for(let re=0;re<J.length;re++){const xe=yt(b,J[re],I||v.handleEvent,!1,v.h||v);if(!xe)break;v.g[xe.key]=xe}v=d.J?X(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),bn(),Ml(d.i,d.v,d.B,d.l,d.S,d.u)}_s.prototype.ba=function(d){d=d.target;const v=this.O;v&&De(d)==3?v.j():this.Y(d)},_s.prototype.Y=function(d){try{if(d==this.g)e:{const We=De(this.g),Kt=this.g.ya(),Tt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Fe(this.g)))){this.K||We!=4||Kt==7||(Kt==8||Tt<=0?bn(3):bn(2)),ln(this);var v=this.g.ca();this.X=v;var b=Ul(this);if(this.o=v==200,On(this.i,this.v,this.B,this.l,this.S,We,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,J=this.g;if((I=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var re=I;break t}}re=null}if(d=re)ps(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,d);else{this.o=!1,this.m=3,Jt(12),Un(this),Mn(this);break e}}if(this.R){d=!0;let qt;for(;!this.K&&this.C<b.length;)if(qt=Rr(this,b),qt==on){We==4&&(this.m=4,Jt(14),d=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==ft){this.m=4,Jt(15),ps(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else ps(this.i,this.l,qt,null),js(this,qt);if(ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||b.length!=0||this.h.h||(this.m=1,Jt(16),d=!1),this.o=this.o&&d,!d)ps(this.i,this.l,b,"[Invalid Chunked Response]"),Un(this),Mn(this);else if(b.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Or(xe),xe.P=!0,Jt(11))}}else ps(this.i,this.l,b,null),js(this,b);We==4&&Un(this),this.o&&!this.K&&(We==4?Mr(this.j,this):(this.o=!1,rs(this)))}else Ye(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Un(this),Mn(this)}}}catch{}};function Ul(d){if(!ja(d))return d.g.la();const v=Fe(d.g);if(v==="")return"";let b="";const I=v.length,J=De(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Un(d),Mn(d),"";d.h.i=new h.TextDecoder}for(let re=0;re<I;re++)d.h.h=!0,b+=d.h.i.decode(v[re],{stream:!(J&&re==I-1)});return v.length=0,d.h.g+=b,d.C=0,d.h.g}function ja(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Rr(d,v){var b=d.C,I=v.indexOf(`
`,b);return I==-1?on:(b=Number(v.substring(b,I)),isNaN(b)?ft:(I+=1,I+b>v.length?on:(v=v.slice(I,I+b),d.C=I+b,v)))}_s.prototype.cancel=function(){this.K=!0,Un(this)};function rs(d){d.T=Date.now()+d.H,Da(d,d.H)}function Da(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Se(_(d.aa,d),v)}function ln(d){d.D&&(h.clearTimeout(d.D),d.D=null)}_s.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(mi(this.i,this.B),this.M!=2&&(bn(),Jt(17)),Un(this),this.m=2,Mn(this)):Da(this,this.T-d)};function Mn(d){d.j.I==0||d.K||Mr(d.j,d)}function Un(d){ln(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,ss(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function js(d,v){try{var b=d.j;if(b.I!=0&&(b.g==d||Ds(b.h,d))){if(!d.L&&Ds(b.h,d)&&b.I==3){try{var I=b.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var J=I;if(J[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)qa(b),Li(b);else break e;na(b),Jt(18)}}else b.xa=J[1],0<b.xa-b.K&&J[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Se(_(b.Va,b),6e3));os(b.h)<=1&&b.ta&&(b.ta=void 0)}else ei(b,11)}else if((d.L||b.g==d)&&qa(b),!k(v))for(J=b.Ba.g.parse(v),v=0;v<J.length;v++){let Tt=J[v];const qt=Tt[0];if(!(qt<=b.K))if(b.K=qt,Tt=Tt[1],b.I==2)if(Tt[0]=="c"){b.M=Tt[1],b.ba=Tt[2];const Q=Tt[3];Q!=null&&(b.ka=Q,b.j.info("VER="+b.ka));const he=Tt[4];he!=null&&(b.za=he,b.j.info("SVER="+b.za));const Re=Tt[5];Re!=null&&typeof Re=="number"&&Re>0&&(I=1.5*Re,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const Me=d.g;if(Me){const Xe=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xe){var re=I.h;re.g||Xe.indexOf("spdy")==-1&&Xe.indexOf("quic")==-1&&Xe.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&($s(re,re.h),re.h=null))}if(I.G){const ht=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;ht&&(I.wa=ht,vt(I.J,I.G,ht))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var xe=d;if(I.na=wo(I,I.L?I.ba:null,I.W),xe.L){Qi(I.h,xe);var We=xe,Kt=I.O;Kt&&(We.H=Kt),We.D&&(ln(We),rs(We)),I.g=xe}else bo(I);b.i.length>0&&Zs(b)}else Tt[0]!="stop"&&Tt[0]!="close"||ei(b,7);else b.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?ei(b,7):Va(b):Tt[0]!="noop"&&b.l&&b.l.qa(Tt),b.A=0)}}bn(4)}catch{}}var Zt=class{constructor(d,v){this.g=d,this.map=v}};function pi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function os(d){return d.h?1:d.g?d.g.size:0}function Ds(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function $s(d,v){d.g?d.g.add(v):d.h=v}function Qi(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}pi.prototype.cancel=function(){if(this.i=Ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ma(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.G);return v}return B(d.i)}var Cr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ki(d,v){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const I=d[b].indexOf("=");let J,re=null;I>=0?(J=d[b].substring(0,I),re=d[b].substring(I+1)):J=d[b],v(J,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function ls(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof ls?(this.l=d.l,tt(this,d.j),this.o=d.o,this.g=d.g,Kn(this,d.u),this.h=d.h,Ri(this,Ua(d.i)),this.m=d.m):d&&(v=String(d).match(Cr))?(this.l=!1,tt(this,v[1]||"",!0),this.o=gs(v[2]||""),this.g=gs(v[3]||"",!0),Kn(this,v[4]),this.h=gs(v[5]||"",!0),Ri(this,v[6]||"",!0),this.m=gs(v[7]||"")):(this.l=!1,this.i=new Ws(null,this.l))}ls.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Wi(v,Qs,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Wi(v,Qs,!0),"@"),d.push(Yn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Wi(b,b.charAt(0)=="/"?kr:Ir,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Wi(b,Lr)),d.join("")},ls.prototype.resolve=function(d){const v=jt(this);let b=!!d.j;b?tt(v,d.j):b=!!d.o,b?v.o=d.o:b=!!d.g,b?v.g=d.g:b=d.u!=null;var I=d.h;if(b)Kn(v,d.u);else if(b=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var J=v.h.lastIndexOf("/");J!=-1&&(I=v.h.slice(0,J+1)+I)}if(J=I,J==".."||J==".")I="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){I=J.lastIndexOf("/",0)==0,J=J.split("/");const re=[];for(let xe=0;xe<J.length;){const We=J[xe++];We=="."?I&&xe==J.length&&re.push(""):We==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),I&&xe==J.length&&re.push("")):(re.push(We),I=!0)}I=re.join("/")}else I=J}return b?v.h=I:b=d.i.toString()!=="",b?Ri(v,Ua(d.i)):b=!!d.m,b&&(v.m=d.m),v};function jt(d){return new ls(d)}function tt(d,v,b){d.j=b?gs(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Kn(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Ri(d,v,b){v instanceof Ws?(d.i=v,cs(d.i,d.l)):(b||(v=Wi(v,Ks)),d.i=new Ws(v,d.l))}function vt(d,v,b){d.i.set(v,b)}function Ys(d){return vt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function gs(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Wi(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,Wn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Qs=/[#\/\?@]/g,Ir=/[#\?:]/g,kr=/[#\?]/g,Ks=/[#\?@]/g,Lr=/#/g;function Ws(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function wn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ki(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=Ws.prototype,s.add=function(d,v){wn(this),this.i=null,d=An(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function vo(d,v){wn(d),v=An(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ci(d,v){return wn(d),v=An(d,v),d.g.has(v)}s.forEach=function(d,v){wn(this),this.g.forEach(function(b,I){b.forEach(function(J){d.call(v,J,I,this)},this)},this)};function Ii(d,v){wn(d);let b=[];if(typeof v=="string")Ci(d,v)&&(b=b.concat(d.g.get(An(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)b=b.concat(d[v]);return b}s.set=function(d,v){return wn(this),this.i=null,d=An(this,d),Ci(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Ii(this,d),d.length>0?String(d[0]):v):v};function ys(d,v,b){vo(d,v),b.length>0&&(d.i=null,d.g.set(An(d,v),B(b)),d.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var b=v[I];const J=Yn(b);b=Ii(this,b);for(let re=0;re<b.length;re++){let xe=J;b[re]!==""&&(xe+="="+Yn(b[re])),d.push(xe)}}return this.i=d.join("&")};function Ua(d){const v=new Ws;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function An(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function cs(d,v){v&&!d.j&&(wn(d),d.i=null,d.g.forEach(function(b,I){const J=I.toLowerCase();I!=J&&(vo(this,I),ys(this,J,b))},d)),d.j=v}function Vn(d,v){const b=new Ls;if(h.Image){const I=new Image;I.onload=S(Ie,b,"TestLoadImage: loaded",!0,v,I),I.onerror=S(Ie,b,"TestLoadImage: error",!1,v,I),I.onabort=S(Ie,b,"TestLoadImage: abort",!1,v,I),I.ontimeout=S(Ie,b,"TestLoadImage: timeout",!1,v,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function jr(d,v){const b=new Ls,I=new AbortController,J=setTimeout(()=>{I.abort(),Ie(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(re=>{clearTimeout(J),re.ok?Ie(b,"TestPingServer: ok",!0,v):Ie(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(J),Ie(b,"TestPingServer: error",!1,v)})}function Ie(d,v,b,I,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),I(b)}catch{}}function Js(){this.g=new Nr}function us(d){this.i=d.Sb||null,this.h=d.ab||!1}x(us,go),us.prototype.g=function(){return new ki(this.i,this.h)};function ki(d,v){Qt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(ki,Qt),s=ki.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,mn(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ji(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ji(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Es(this):mn(this),this.readyState==3&&Ji(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Es(this))},s.Na=function(d){this.g&&(this.response=d,Es(this))},s.ga=function(){this.g&&Es(this)};function Es(d){d.readyState=4,d.l=null,d.j=null,d.B=null,mn(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function mn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Rn(d){let v="";return rt(d,function(b,I){v+=I,v+=":",v+=b,v+=`\r
`}),v}function _i(d,v,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Rn(b),typeof d=="string"?b!=null&&Yn(b):vt(d,v,b))}function m(d){Qt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(m,Qt);var y=/^https?$/i,N=["POST","PUT"];s=m.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hn.g(),this.g.onreadystatechange=w(_(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(re){C(this,re);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var J in I)b.set(J,I[J]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const re of I.keys())b.set(re,I.get(re));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),J=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(N,v,void 0)>=0)||I||J||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,xe]of b)this.g.setRequestHeader(re,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(re){C(this,re)}};function C(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,F(d),ce(d)}function F(d){d.A||(d.A=!0,nn(d,"complete"),nn(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,nn(this,"complete"),nn(this,"abort"),ce(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ce(this,!0)),m.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?W(this):this.Xa())},s.Xa=function(){W(this)};function W(d){if(d.h&&typeof u<"u"){if(d.v&&De(d)==4)setTimeout(d.Ca.bind(d),0);else if(nn(d,"readystatechange"),De(d)==4){d.h=!1;try{const re=d.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var I;if(I=re===0){let xe=String(d.D).match(Cr)[1]||null;!xe&&h.self&&h.self.location&&(xe=h.self.location.protocol.slice(0,-1)),I=!y.test(xe?xe.toLowerCase():"")}b=I}if(b)nn(d,"complete"),nn(d,"success");else{d.o=6;try{var J=De(d)>2?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.ca()+"]",F(d)}}finally{ce(d)}}}}function ce(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,v||nn(d,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function De(d){return d.g?d.g.readyState:0}s.ca=function(){try{return De(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),_o(v)}};function Fe(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ye(d){const v={};d=(d.g&&De(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(k(d[I]))continue;var b=Ar(d[I]);const J=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=v[J]||[];v[J]=re,re.push(b)}at(v,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nt(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function en(d){this.za=0,this.i=[],this.j=new Ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nt("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nt("baseRetryDelayMs",5e3,d),this.Za=Nt("retryDelaySeedMs",1e4,d),this.Ta=Nt("forwardChannelMaxRetries",2,d),this.va=Nt("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new pi(d&&d.concurrentRequestLimit),this.Ba=new Js,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=en.prototype,s.ka=8,s.I=1,s.connect=function(d,v,b,I){Jt(0),this.W=d,this.H=v||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=wo(this,null,this.W),Zs(this)};function Va(d){if(Zi(d),d.I==3){var v=d.V++,b=jt(d.J);if(vt(b,"SID",d.M),vt(b,"RID",v),vt(b,"TYPE","terminate"),ta(d,b),v=new _s(d,d.j,v),v.M=2,v.A=Ys(jt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=v.A,b=!0),b||(v.g=Ao(v.j,null),v.g.ea(v.A)),v.F=Date.now(),rs(v)}xo(d)}function Li(d){d.g&&(Or(d),d.g.cancel(),d.g=null)}function Zi(d){Li(d),d.v&&(h.clearTimeout(d.v),d.v=null),qa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Zs(d){if(!Oa(d.h)&&!d.m){d.m=!0;var v=d.Ea;Ee||A(),ge||(Ee(),ge=!0),D.add(v,d),d.D=0}}function ea(d,v){return os(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Se(_(d.Ea,d,v),No(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const J=new _s(this,this.j,d);let re=this.o;if(this.U&&(re?(re=X(re),le(re,this.U)):re=this.U),this.u!==null||this.R||(J.J=re,re=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=To(this,J,v),b=jt(this.J),vt(b,"RID",d),vt(b,"CVER",22),this.G&&vt(b,"X-HTTP-Session-Id",this.G),ta(this,b),re&&(this.R?v="headers="+Yn(Rn(re))+"&"+v:this.u&&_i(b,this.u,re)),$s(this.h,J),this.Ra&&vt(b,"TYPE","init"),this.S?(vt(b,"$req",v),vt(b,"SID","null"),J.U=!0,Xs(J,b,null)):Xs(J,b,v),this.I=2}}else this.I==3&&(d?Dr(this,d):this.i.length==0||Oa(this.h)||Dr(this))};function Dr(d,v){var b;v?b=v.l:b=d.V++;const I=jt(d.J);vt(I,"SID",d.M),vt(I,"RID",b),vt(I,"AID",d.K),ta(d,I),d.u&&d.o&&_i(I,d.u,d.o),b=new _s(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),v&&(d.i=v.G.concat(d.i)),v=To(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),$s(d.h,b),Xs(b,I,v)}function ta(d,v){d.H&&rt(d.H,function(b,I){vt(v,I,b)}),d.l&&rt({},function(b,I){vt(v,I,b)})}function To(d,v,b){b=Math.min(d.i.length,b);const I=d.l?_(d.l.Ka,d.l,d):null;e:{var J=d.i;let We=-1;for(;;){const Kt=["count="+b];We==-1?b>0?(We=J[0].g,Kt.push("ofs="+We)):We=0:Kt.push("ofs="+We);let Tt=!0;for(let qt=0;qt<b;qt++){var re=J[qt].g;const Q=J[qt].map;if(re-=We,re<0)We=Math.max(0,J[qt].g-100),Tt=!1;else try{re="req"+re+"_"||"";try{var xe=Q instanceof Map?Q:Object.entries(Q);for(const[he,Re]of xe){let Me=Re;g(Re)&&(Me=hi(Re)),Kt.push(re+he+"="+encodeURIComponent(Me))}}catch(he){throw Kt.push(re+"type="+encodeURIComponent("_badmap")),he}}catch{I&&I(Q)}}if(Tt){xe=Kt.join("&");break e}}xe=void 0}return d=d.i.splice(0,b),v.G=d,xe}function bo(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Ee||A(),ge||(Ee(),ge=!0),D.add(v,d),d.A=0}}function na(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Se(_(d.Da,d),No(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,So(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Se(_(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Li(this),So(this))};function Or(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function So(d){d.g=new _s(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=jt(d.na);vt(v,"RID","rpc"),vt(v,"SID",d.M),vt(v,"AID",d.K),vt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&vt(v,"TO",d.ia),vt(v,"TYPE","xmlhttp"),ta(d,v),d.u&&d.o&&_i(v,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Ys(jt(v)),b.u=null,b.R=!0,Ai(b,d)}s.Va=function(){this.C!=null&&(this.C=null,Li(this),na(this),Jt(19))};function qa(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Mr(d,v){var b=null;if(d.g==v){qa(d),Or(d),d.g=null;var I=2}else if(Ds(d.h,v))b=v.G,Qi(d.h,v),I=1;else return;if(d.I!=0){if(v.o)if(I==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var J=d.D;I=Is(),nn(I,new ks(I,b)),Zs(d)}else bo(d);else if(J=v.m,J==3||J==0&&v.X>0||!(I==1&&ea(d,v)||I==2&&na(d)))switch(b&&b.length>0&&(v=d.h,v.i=v.i.concat(b)),J){case 1:ei(d,5);break;case 4:ei(d,10);break;case 3:ei(d,6);break;default:ei(d,2)}}}function No(d,v){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*v}function ei(d,v){if(d.j.info("Error code "+v),v==2){var b=_(d.bb,d),I=d.Ua;const J=!I;I=new ls(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||tt(I,"https"),Ys(I),J?Vn(I.toString(),b):jr(I.toString(),b)}else Jt(2);d.I=0,d.l&&d.l.pa(v),xo(d),Zi(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function xo(d){if(d.I=0,d.ja=[],d.l){const v=Ma(d.h);(v.length!=0||d.i.length!=0)&&(G(d.ja,v),G(d.ja,d.i),d.h.i.length=0,B(d.i),d.i.length=0),d.l.oa()}}function wo(d,v,b){var I=b instanceof ls?jt(b):new ls(b);if(I.g!="")v&&(I.g=v+"."+I.g),Kn(I,I.u);else{var J=h.location;I=J.protocol,v=v?v+"."+J.hostname:J.hostname,J=+J.port;const re=new ls(null);I&&tt(re,I),v&&(re.g=v),J&&Kn(re,J),b&&(re.h=b),I=re}return b=d.G,v=d.wa,b&&v&&vt(I,b,v),vt(I,"VER",d.ka),ta(d,I),I}function Ao(d,v,b){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new m(new us({ab:b})):new m(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}s=Ro.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ji(){}ji.prototype.g=function(d,v){return new Cn(d,v)};function Cn(d,v){Qt.call(this),this.g=new en(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!k(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new gi(this)}x(Cn,Qt),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Va(this.g)},Cn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=hi(d),d=b);v.i.push(new Zt(v.Ya++,d)),v.I==3&&Zs(v)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Va(this.g),delete this.g,Cn.Z.N.call(this)};function Co(d){qe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}x(Co,qe);function Io(){is.call(this),this.status=1}x(Io,is);function gi(d){this.g=d}x(gi,Ro),gi.prototype.ra=function(){nn(this.g,"a")},gi.prototype.qa=function(d){nn(this.g,new Co(d))},gi.prototype.pa=function(d){nn(this.g,new Io)},gi.prototype.oa=function(){nn(this.g,"b")},ji.prototype.createWebChannel=ji.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,kb=function(){return new ji},Ib=function(){return Is()},Cb=zt,Xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,cd=as,La.COMPLETE="complete",Rb=La,yo.EventType=Cs,Cs.OPEN="a",Cs.CLOSE="b",Cs.ERROR="c",Cs.MESSAGE="d",Qt.prototype.listen=Qt.prototype.J,xc=yo,m.prototype.listenOnce=m.prototype.K,m.prototype.getLastError=m.prototype.Ha,m.prototype.getLastErrorCode=m.prototype.ya,m.prototype.getStatus=m.prototype.ca,m.prototype.getResponseJson=m.prototype.La,m.prototype.getResponseText=m.prototype.la,m.prototype.send=m.prototype.ea,m.prototype.setWithCredentials=m.prototype.Fa,Ab=m}).apply(typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{});class es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let Cl="12.8.0";function uR(s){Cl=s}const so=new Eb("@firebase/firestore");function ll(){return so.logLevel}function Le(s,...e){if(so.logLevel<=St.DEBUG){const n=e.map(Np);so.debug(`Firestore (${Cl}): ${s}`,...n)}}function Aa(s,...e){if(so.logLevel<=St.ERROR){const n=e.map(Np);so.error(`Firestore (${Cl}): ${s}`,...n)}}function vl(s,...e){if(so.logLevel<=St.WARN){const n=e.map(Np);so.warn(`Firestore (${Cl}): ${s}`,...n)}}function Np(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ke(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Lb(s,a,n)}function Lb(s,e,n){let a=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Aa(a),new Error(a)}function Lt(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||Lb(e,o,a)}function it(s,e){return s}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends lo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class jb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(es.UNAUTHENTICATED)))}shutdown(){}}class fR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hR{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Lt(this.o===void 0,42304);let a=this.i;const o=E=>this.i!==a?(a=this.i,n(E)):Promise.resolve();let u=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new mr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const E=u;e.enqueueRetryable((async()=>{await E.promise,await o(this.currentUser)}))},g=E=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((E=>g(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?g(E):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new mr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Lt(typeof a.accessToken=="string",31837,{l:a}),new jb(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string",2055,{h:e}),new es(e)}}class mR{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=es.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class pR{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new mR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,YA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Lt(this.o===void 0,3512);const a=u=>{u.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=gR(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function _t(s,e){return s<e?-1:s>e?1:0}function $m(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return Em(o)===Em(u)?_t(o,u):Em(o)?1:-1}return _t(s.length,e.length)}const yR=55296,ER=57343;function Em(s){const e=s.charCodeAt(0);return e>=yR&&e<=ER}function Tl(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}const kv="__name__";class qi{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ke(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Ke(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=qi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return _t(e.length,n.length)}static compareSegments(e,n){const a=qi.isNumericId(e),o=qi.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?qi.extractNumericId(e).compare(qi.extractNumericId(n)):$m(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}}class Ht extends qi{construct(e,n,a){return new Ht(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new je(pe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new Ht(n)}static emptyPath(){return new Ht([])}}const vR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends qi{construct(e,n,a){return new zn(e,n,a)}static isValidIdentifier(e){return vR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new zn([kv])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new je(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new je(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new je(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=E,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new je(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(n)}static emptyPath(){return new zn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Ht.fromString(e))}static fromName(e){return new He(Ht.fromString(e).popFirst(5))}static empty(){return new He(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Ht(e.slice()))}}function Db(s,e,n){if(!n)throw new je(pe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function TR(s,e,n,a){if(e===!0&&a===!0)throw new je(pe.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Lv(s){if(!He.isDocumentKey(s))throw new je(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function jv(s){if(He.isDocumentKey(s))throw new je(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Ob(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Fd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ke(12329,{type:typeof s})}function bl(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new je(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fd(s);throw new je(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Tn(s,e){const n={typeString:s};return e&&(n.value=e),n}function Hc(s,e){if(!Ob(s))throw new je(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new je(pe.INVALID_ARGUMENT,n);return!0}const Dv=-62135596800,Ov=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Ov);return new Yt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new je(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new je(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dv)throw new je(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Tn("string",Yt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Yt(0,0))}static max(){return new et(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Oc=-1;function bR(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=et.fromTimestamp(a===1e9?new Yt(n+1,0):new Yt(n,a));return new gr(o,He.empty(),e)}function SR(s){return new gr(s.readTime,s.key,Oc)}class gr{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new gr(et.min(),He.empty(),Oc)}static max(){return new gr(et.max(),He.empty(),Oc)}}function NR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=He.comparator(s.documentKey,e.documentKey),n!==0?n:_t(s.largestBatchId,e.largestBatchId))}const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Il(s){if(s.code!==pe.FAILED_PRECONDITION||s.message!==xR)throw s;Le("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,a)=>{n(e)}))}static reject(e){return new _e(((n,a)=>{a(e)}))}static waitFor(e){return new _e(((n,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(E=>a(E)))})),h=!0,u===o&&n()}))}static or(e){let n=_e.resolve(!1);for(const a of e)n=n.next((o=>o?_e.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new _e(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let E=0;E<u;E++){const _=E;n(e[_]).next((S=>{h[_]=S,++g,g===u&&a(h)}),(S=>o(S)))}}))}static doWhile(e,n){return new _e(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function AR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kl(s){return s.name==="IndexedDbTransactionError"}class Gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gd.ce=-1;const wp=-1;function Hd(s){return s==null}function Ed(s){return s===0&&1/s==-1/0}function RR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ed(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Mb="";function CR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Mv(e)),e=IR(s.get(n),e);return Mv(e)}function IR(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case Mb:n+="";break;default:n+=u}}return n}function Mv(s){return s+Mb+""}function Uv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function co(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Ub(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class tn{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??Hn.RED,this.left=o??Hn.EMPTY,this.right=u??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new Hn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Hn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new xn(this.comparator);return n.data=e,n}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ti([])}unionWith(e){let n=new xn(zn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class Vb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Vb("Invalid base64 string: "+u):u}})(e);return new Xn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const kR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(s){if(Lt(!!s,39018),typeof s=="string"){let e=0;const n=kR.exec(s);if(Lt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:dn(s.seconds),nanos:dn(s.nanos)}}function dn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Er(s){return typeof s=="string"?Xn.fromBase64String(s):Xn.fromUint8Array(s)}const qb="server_timestamp",Bb="__type__",Pb="__previous_value__",Fb="__local_write_time__";function Ap(s){return(s?.mapValue?.fields||{})[Bb]?.stringValue===qb}function zd(s){const e=s.mapValue.fields[Pb];return Ap(e)?zd(e):e}function Mc(s){const e=yr(s.mapValue.fields[Fb].timestampValue);return new Yt(e.seconds,e.nanos)}class LR{constructor(e,n,a,o,u,h,g,E,_,S,x){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=E,this.useFetchStreams=_,this.isUsingEmulator=S,this.apiKey=x}}const vd="(default)";class Uc{constructor(e,n){this.projectId=e,this.database=n||vd}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===vd}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}function jR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new je(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(s.options.projectId,e)}const Gb="__type__",DR="__max__",nd={mapValue:{}},Hb="__vector__",Td="value";function vr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ap(s)?4:MR(s)?9007199254740991:OR(s)?10:11:Ke(28295,{value:s})}function zi(s,e){if(s===e)return!0;const n=vr(s);if(n!==vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Mc(s).isEqual(Mc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=yr(o.timestampValue),g=yr(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Er(o.bytesValue).isEqual(Er(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return dn(o.geoPointValue.latitude)===dn(u.geoPointValue.latitude)&&dn(o.geoPointValue.longitude)===dn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return dn(o.integerValue)===dn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=dn(o.doubleValue),g=dn(u.doubleValue);return h===g?Ed(h)===Ed(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return Tl(s.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(Uv(h)!==Uv(g))return!1;for(const E in h)if(h.hasOwnProperty(E)&&(g[E]===void 0||!zi(h[E],g[E])))return!1;return!0})(s,e);default:return Ke(52216,{left:s})}}function Vc(s,e){return(s.values||[]).find((n=>zi(n,e)))!==void 0}function Sl(s,e){if(s===e)return 0;const n=vr(s),a=vr(e);if(n!==a)return _t(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return _t(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=dn(u.integerValue||u.doubleValue),E=dn(h.integerValue||h.doubleValue);return g<E?-1:g>E?1:g===E?0:isNaN(g)?isNaN(E)?0:-1:1})(s,e);case 3:return qv(s.timestampValue,e.timestampValue);case 4:return qv(Mc(s),Mc(e));case 5:return $m(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=Er(u),E=Er(h);return g.compareTo(E)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),E=h.split("/");for(let _=0;_<g.length&&_<E.length;_++){const S=_t(g[_],E[_]);if(S!==0)return S}return _t(g.length,E.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=_t(dn(u.latitude),dn(h.latitude));return g!==0?g:_t(dn(u.longitude),dn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Bv(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},E=h.fields||{},_=g[Td]?.arrayValue,S=E[Td]?.arrayValue,x=_t(_?.values?.length||0,S?.values?.length||0);return x!==0?x:Bv(_,S)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===nd.mapValue&&h===nd.mapValue)return 0;if(u===nd.mapValue)return 1;if(h===nd.mapValue)return-1;const g=u.fields||{},E=Object.keys(g),_=h.fields||{},S=Object.keys(_);E.sort(),S.sort();for(let x=0;x<E.length&&x<S.length;++x){const w=$m(E[x],S[x]);if(w!==0)return w;const B=Sl(g[E[x]],_[S[x]]);if(B!==0)return B}return _t(E.length,S.length)})(s.mapValue,e.mapValue);default:throw Ke(23264,{he:n})}}function qv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return _t(s,e);const n=yr(s),a=yr(e),o=_t(n.seconds,a.seconds);return o!==0?o:_t(n.nanos,a.nanos)}function Bv(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Sl(n[o],a[o]);if(u)return u}return _t(n.length,a.length)}function Nl(s){return Ym(s)}function Ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=yr(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Er(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return He.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=Ym(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${Ym(n.fields[h])}`;return o+"}"})(s.mapValue):Ke(61005,{value:s})}function ud(s){switch(vr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zd(s);return e?16+ud(e):16;case 5:return 2*s.stringValue.length;case 6:return Er(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+ud(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return co(a.fields,((u,h)=>{o+=u.length+ud(h)})),o})(s.mapValue);default:throw Ke(13486,{value:s})}}function Pv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Qm(s){return!!s&&"integerValue"in s}function Rp(s){return!!s&&"arrayValue"in s}function Fv(s){return!!s&&"nullValue"in s}function Gv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function dd(s){return!!s&&"mapValue"in s}function OR(s){return(s?.mapValue?.fields||{})[Gb]?.stringValue===Hb}function Cc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return co(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Cc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cc(s.arrayValue.values[n]);return e}return{...s}}function MR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===DR}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!dd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(n)}setAll(e){let n=zn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const E=this.getFieldsMap(n);this.applyChanges(E,a,o),a={},o=[],n=g.popLast()}h?a[g.lastSegment()]=Cc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());dd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];dd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){co(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new ci(Cc(this.value))}}function zb(s){const e=[];return co(s.fields,((n,a)=>{const o=new zn([n]);if(dd(a)){const u=zb(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Ti(e)}class ts{constructor(e,n,a,o,u,h,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new ts(e,0,et.min(),et.min(),et.min(),ci.empty(),0)}static newFoundDocument(e,n,a,o){return new ts(e,1,n,et.min(),a,o,0)}static newNoDocument(e,n){return new ts(e,2,n,et.min(),et.min(),ci.empty(),0)}static newUnknownDocument(e,n){return new ts(e,3,n,et.min(),et.min(),ci.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bd{constructor(e,n){this.position=e,this.inclusive=n}}function Hv(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?a=He.comparator(He.fromName(h.referenceValue),n.key):a=Sl(h,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function zv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!zi(s.position[n],e.position[n]))return!1;return!0}class Sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function UR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Xb{}class vn extends Xb{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new qR(e,n,a):n==="array-contains"?new FR(e,a):n==="in"?new GR(e,a):n==="not-in"?new HR(e,a):n==="array-contains-any"?new zR(e,a):new vn(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new BR(e,a):new PR(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sl(n,this.value)):n!==null&&vr(this.value)===vr(n)&&this.matchesComparison(Sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends Xb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Si(e,n)}matches(e){return $b(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $b(s){return s.op==="and"}function Yb(s){return VR(s)&&$b(s)}function VR(s){for(const e of s.filters)if(e instanceof Si)return!1;return!0}function Km(s){if(s instanceof vn)return s.field.canonicalString()+s.op.toString()+Nl(s.value);if(Yb(s))return s.filters.map((e=>Km(e))).join(",");{const e=s.filters.map((n=>Km(n))).join(",");return`${s.op}(${e})`}}function Qb(s,e){return s instanceof vn?(function(a,o){return o instanceof vn&&a.op===o.op&&a.field.isEqual(o.field)&&zi(a.value,o.value)})(s,e):s instanceof Si?(function(a,o){return o instanceof Si&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&Qb(h,o.filters[g])),!0):!1})(s,e):void Ke(19439)}function Kb(s){return s instanceof vn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nl(n.value)}`})(s):s instanceof Si?(function(n){return n.op.toString()+" {"+n.getFilters().map(Kb).join(" ,")+"}"})(s):"Filter"}class qR extends vn{constructor(e,n,a){super(e,n,a),this.key=He.fromName(a.referenceValue)}matches(e){const n=He.comparator(e.key,this.key);return this.matchesComparison(n)}}class BR extends vn{constructor(e,n){super(e,"in",n),this.keys=Wb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class PR extends vn{constructor(e,n){super(e,"not-in",n),this.keys=Wb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Wb(s,e){return(e.arrayValue?.values||[]).map((n=>He.fromName(n.referenceValue)))}class FR extends vn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&Vc(n.arrayValue,this.value)}}class GR extends vn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class HR extends vn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vc(this.value.arrayValue,n)}}class zR extends vn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Vc(this.value.arrayValue,a)))}}class XR{constructor(e,n=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function Xv(s,e=null,n=[],a=[],o=null,u=null,h=null){return new XR(s,e,n,a,o,u,h)}function Cp(s){const e=it(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Km(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Nl(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Nl(a))).join(",")),e.Te=n}return e.Te}function Ip(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!UR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Qb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!zv(s.startAt,e.startAt)&&zv(s.endAt,e.endAt)}function Wm(s){return He.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class zc{constructor(e,n=null,a=[],o=[],u=null,h="F",g=null,E=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $R(s,e,n,a,o,u,h,g){return new zc(s,e,n,a,o,u,h,g)}function Jb(s){return new zc(s)}function $v(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function YR(s){return He.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Zb(s){return s.collectionGroup!==null}function Ic(s){const e=it(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new xn(zn.comparator);return h.filters.forEach((E=>{E.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Sd(u,a))})),n.has(zn.keyField().canonicalString())||e.Ie.push(new Sd(zn.keyField(),a))}return e.Ie}function Pi(s){const e=it(s);return e.Ee||(e.Ee=QR(e,Ic(s))),e.Ee}function QR(s,e){if(s.limitType==="F")return Xv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sd(o.field,u)}));const n=s.endAt?new bd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new bd(s.startAt.position,s.startAt.inclusive):null;return Xv(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Jm(s,e){const n=s.filters.concat([e]);return new zc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Zm(s,e,n){return new zc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Xd(s,e){return Ip(Pi(s),Pi(e))&&s.limitType===e.limitType}function e0(s){return`${Cp(Pi(s))}|lt:${s.limitType}`}function cl(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>Kb(o))).join(", ")}]`),Hd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>Nl(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>Nl(o))).join(",")),`Target(${a})`})(Pi(s))}; limitType=${s.limitType})`}function $d(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):He.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of Ic(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,E){const _=Hv(h,g,E);return h.inclusive?_<=0:_<0})(a.startAt,Ic(a),o)||a.endAt&&!(function(h,g,E){const _=Hv(h,g,E);return h.inclusive?_>=0:_>0})(a.endAt,Ic(a),o))})(s,e)}function KR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function t0(s){return(e,n)=>{let a=!1;for(const o of Ic(s)){const u=WR(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function WR(s,e,n){const a=s.field.isKeyField()?He.comparator(e.key,n.key):(function(u,h,g){const E=h.data.field(u),_=g.data.field(u);return E!==null&&_!==null?Sl(E,_):Ke(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ke(19790,{direction:s.dir})}}class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return Ub(this.inner)}size(){return this.innerSize}}const JR=new tn(He.comparator);function Ra(){return JR}const n0=new tn(He.comparator);function wc(...s){let e=n0;for(const n of s)e=e.insert(n.key,n);return e}function s0(s){let e=n0;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function to(){return kc()}function i0(){return kc()}function kc(){return new uo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const ZR=new tn(He.comparator),eC=new xn(He.comparator);function gt(...s){let e=eC;for(const n of s)e=e.add(n);return e}const tC=new xn(_t);function nC(){return tC}function kp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function a0(s){return{integerValue:""+s}}function sC(s,e){return RR(e)?a0(e):kp(s,e)}class Yd{constructor(){this._=void 0}}function iC(s,e,n){return s instanceof Nd?(function(o,u){const h={fields:{[Bb]:{stringValue:qb},[Fb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ap(u)&&(u=zd(u)),u&&(h.fields[Pb]=u),{mapValue:h}})(n,e):s instanceof qc?o0(s,e):s instanceof Bc?l0(s,e):(function(o,u){const h=r0(o,u),g=Yv(h)+Yv(o.Ae);return Qm(h)&&Qm(o.Ae)?a0(g):kp(o.serializer,g)})(s,e)}function aC(s,e,n){return s instanceof qc?o0(s,e):s instanceof Bc?l0(s,e):n}function r0(s,e){return s instanceof xd?(function(a){return Qm(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Nd extends Yd{}class qc extends Yd{constructor(e){super(),this.elements=e}}function o0(s,e){const n=c0(e);for(const a of s.elements)n.some((o=>zi(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Bc extends Yd{constructor(e){super(),this.elements=e}}function l0(s,e){let n=c0(e);for(const a of s.elements)n=n.filter((o=>!zi(o,a)));return{arrayValue:{values:n}}}class xd extends Yd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Yv(s){return dn(s.integerValue||s.doubleValue)}function c0(s){return Rp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function rC(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof qc&&o instanceof qc||a instanceof Bc&&o instanceof Bc?Tl(a.elements,o.elements,zi):a instanceof xd&&o instanceof xd?zi(a.Ae,o.Ae):a instanceof Nd&&o instanceof Nd})(s.transform,e.transform)}class oC{constructor(e,n){this.version=e,this.transformResults=n}}class Fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Qd{}function u0(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Lp(s.key,Fi.none()):new Xc(s.key,s.data,Fi.none());{const n=s.data,a=ci.empty();let o=new xn(zn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new fo(s.key,a,new Ti(o.toArray()),Fi.none())}}function lC(s,e,n){s instanceof Xc?(function(o,u,h){const g=o.value.clone(),E=Kv(o.fieldTransforms,u,h.transformResults);g.setAll(E),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof fo?(function(o,u,h){if(!fd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=Kv(o.fieldTransforms,u,h.transformResults),E=u.data;E.setAll(d0(o)),E.setAll(g),u.convertToFoundDocument(h.version,E).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Lc(s,e,n,a){return s instanceof Xc?(function(u,h,g,E){if(!fd(u.precondition,h))return g;const _=u.value.clone(),S=Wv(u.fieldTransforms,E,h);return _.setAll(S),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,n,a):s instanceof fo?(function(u,h,g,E){if(!fd(u.precondition,h))return g;const _=Wv(u.fieldTransforms,E,h),S=h.data;return S.setAll(d0(u)),S.setAll(_),h.convertToFoundDocument(h.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(s,e,n,a):(function(u,h,g){return fd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function cC(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=r0(a.transform,o||null);u!=null&&(n===null&&(n=ci.empty()),n.set(a.field,u))}return n||null}function Qv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Tl(a,o,((u,h)=>rC(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Xc extends Qd{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fo extends Qd{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function d0(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function Kv(s,e,n){const a=new Map;Lt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,aC(h,g,n[o]))}return a}function Wv(s,e,n){const a=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);a.set(o.field,iC(u,h,e))}return a}class Lp extends Qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uC extends Qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dC{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&lC(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Lc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Lc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=i0();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const E=u0(h,g);E!==null&&a.set(o.key,E),h.isValidDocument()||h.convertToNoDocument(et.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),gt())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,((n,a)=>Qv(n,a)))&&Tl(this.baseMutations,e.baseMutations,((n,a)=>Qv(n,a)))}}class jp{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){Lt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return ZR})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new jp(e,n,a,o)}}class fC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hC{constructor(e,n){this.count=e,this.unchangedNames=n}}var En,bt;function mC(s){switch(s){case pe.OK:return Ke(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ke(15467,{code:s})}}function f0(s){if(s===void 0)return Aa("GRPC error has no .code"),pe.UNKNOWN;switch(s){case En.OK:return pe.OK;case En.CANCELLED:return pe.CANCELLED;case En.UNKNOWN:return pe.UNKNOWN;case En.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case En.INTERNAL:return pe.INTERNAL;case En.UNAVAILABLE:return pe.UNAVAILABLE;case En.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case En.NOT_FOUND:return pe.NOT_FOUND;case En.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case En.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case En.ABORTED:return pe.ABORTED;case En.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case En.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case En.DATA_LOSS:return pe.DATA_LOSS;default:return Ke(39323,{code:s})}}(bt=En||(En={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function pC(){return new TextEncoder}const _C=new hr([4294967295,4294967295],0);function Jv(s){const e=pC().encode(s),n=new wb;return n.update(e),new Uint8Array(n.digest())}function Zv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new hr([n,a],0),new hr([o,u],0)]}class Dp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Ac(`Invalid padding: ${n}`);if(a<0)throw new Ac(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hr.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(hr.fromNumber(a)));return o.compare(_C)===1&&(o=new hr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jv(e),[a,o]=Zv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Dp(u,o,n);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=Jv(e),[a,o]=Zv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.be(h)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kd{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Kd(et.min(),o,new tn(_t),Ra(),gt())}}class $c{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new $c(a,n,gt(),gt(),gt())}}class hd{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class h0{constructor(e,n){this.targetId=e,this.Ce=n}}class m0{constructor(e,n,a=Xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class eT{constructor(){this.ve=0,this.Fe=tT(),this.Me=Xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),n=gt(),a=gt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Ke(38017,{changeType:u})}})),new $c(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=tT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class gC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ra(),this.He=sd(),this.Je=sd(),this.Ze=new tn(_t)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Wm(u))if(a===0){const h=new He(u.path);this.et(n,h,ts.newNoDocument(h,et.min()))}else Lt(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const g=this.ut(e),E=g?this.ct(g,e,h):1;if(E!==0){this.it(n);const _=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=Er(a).toUint8Array()}catch(E){if(E instanceof Vb)return vl("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{g=new Dp(h,o,u)}catch(E){return vl(E instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Wm(g.target)){const E=new He(g.target.path);this.It(E).has(h)||this.Et(h,E)||this.et(h,E,ts.newNoDocument(E,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let a=gt();this.Je.forEach(((u,h)=>{let g=!0;h.forEachWhile((E=>{const _=this.ot(E);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Kd(e,n,this.Ze,this.je,a);return this.je=Ra(),this.He=sd(),this.Je=sd(),this.Ze=new tn(_t),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new eT,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new xn(_t),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new xn(_t),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function sd(){return new tn(He.comparator)}function tT(){return new tn(He.comparator)}const yC={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vC={and:"AND",or:"OR"};class TC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(s,e){return s.useProto3Json||Hd(e)?e:{value:e}}function wd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p0(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function bC(s,e){return wd(s,e.toTimestamp())}function Gi(s){return Lt(!!s,49232),et.fromTimestamp((function(n){const a=yr(n);return new Yt(a.seconds,a.nanos)})(s))}function Op(s,e){return tp(s,e).canonicalString()}function tp(s,e){const n=(function(o){return new Ht(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function _0(s){const e=Ht.fromString(s);return Lt(T0(e),10190,{key:e.toString()}),e}function np(s,e){return Op(s.databaseId,e.path)}function vm(s,e){const n=_0(e);if(n.get(1)!==s.databaseId.projectId)throw new je(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new je(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new He(y0(n))}function g0(s,e){return Op(s.databaseId,e)}function SC(s){const e=_0(s);return e.length===4?Ht.emptyPath():y0(e)}function sp(s){return new Ht(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function y0(s){return Lt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function nT(s,e,n){return{name:np(s,e),fields:n.value.mapValue.fields}}function NC(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ke(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,S){return _.useProto3Json?(Lt(S===void 0||typeof S=="string",58123),Xn.fromBase64String(S||"")):(Lt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Xn.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(_){const S=_.code===void 0?pe.UNKNOWN:f0(_.code);return new je(S,_.message||"")})(h);n=new m0(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=vm(s,a.document.name),u=Gi(a.document.updateTime),h=a.document.createTime?Gi(a.document.createTime):et.min(),g=new ci({mapValue:{fields:a.document.fields}}),E=ts.newFoundDocument(o,u,h,g),_=a.targetIds||[],S=a.removedTargetIds||[];n=new hd(_,S,E.key,E)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=vm(s,a.document),u=a.readTime?Gi(a.readTime):et.min(),h=ts.newNoDocument(o,u),g=a.removedTargetIds||[];n=new hd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=vm(s,a.document),u=a.removedTargetIds||[];n=new hd([],u,o,null)}else{if(!("filter"in e))return Ke(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new hC(o,u),g=a.targetId;n=new h0(g,h)}}return n}function xC(s,e){let n;if(e instanceof Xc)n={update:nT(s,e.key,e.value)};else if(e instanceof Lp)n={delete:np(s,e.key)};else if(e instanceof fo)n={update:nT(s,e.key,e.data),updateMask:DC(e.fieldMask)};else{if(!(e instanceof uC))return Ke(16599,{dt:e.type});n={verify:np(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof Nd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof qc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Bc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof xd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Ke(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:bC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ke(27497)})(s,e.precondition)),n}function wC(s,e){return s&&s.length>0?(Lt(e!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?Gi(o.updateTime):Gi(u);return h.isEqual(et.min())&&(h=Gi(u)),new oC(h,o.transformResults||[])})(n,e)))):[]}function AC(s,e){return{documents:[g0(s,e.path)]}}function RC(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=g0(s,o);const u=(function(_){if(_.length!==0)return v0(Si.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((S=>(function(w){return{field:ul(w.field),direction:kC(w.dir)}})(S)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=ep(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function CC(s){let e=SC(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){Lt(a===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];n.where&&(u=(function(x){const w=E0(x);return w instanceof Si&&Yb(w)?w.getFilters():[w]})(n.where));let h=[];n.orderBy&&(h=(function(x){return x.map((w=>(function(G){return new Sd(dl(G.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(w)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let w;return w=typeof x=="object"?x.value:x,Hd(w)?null:w})(n.limit));let E=null;n.startAt&&(E=(function(x){const w=!!x.before,B=x.values||[];return new bd(B,w)})(n.startAt));let _=null;return n.endAt&&(_=(function(x){const w=!x.before,B=x.values||[];return new bd(B,w)})(n.endAt)),$R(e,o,h,u,g,"F",E,_)}function IC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E0(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=dl(n.unaryFilter.field);return vn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=dl(n.unaryFilter.field);return vn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=dl(n.unaryFilter.field);return vn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=dl(n.unaryFilter.field);return vn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(s):s.fieldFilter!==void 0?(function(n){return vn.create(dl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Si.create(n.compositeFilter.filters.map((a=>E0(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(n.compositeFilter.op))})(s):Ke(30097,{filter:s})}function kC(s){return yC[s]}function LC(s){return EC[s]}function jC(s){return vC[s]}function ul(s){return{fieldPath:s.canonicalString()}}function dl(s){return zn.fromServerFormat(s.fieldPath)}function v0(s){return s instanceof vn?(function(n){if(n.op==="=="){if(Gv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:LC(n.op),value:n.value}}})(s):s instanceof Si?(function(n){const a=n.getFilters().map((o=>v0(o)));return a.length===1?a[0]:{compositeFilter:{op:jC(n.op),filters:a}}})(s):Ke(54877,{filter:s})}function DC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function T0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function b0(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class dr{constructor(e,n,a,o,u=et.min(),h=et.min(),g=Xn.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=E}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OC{constructor(e){this.yt=e}}function MC(s){const e=CC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Zm(e,e.limit,"L"):e}class UC{constructor(){this.Sn=new VC}addToCollectionParentIndex(e,n){return this.Sn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(gr.min())}updateCollectionGroup(e,n,a){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class VC{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new xn(Ht.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new xn(Ht.comparator)).toArray()}}const sT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},S0=41943040;class As{static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(S0,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);class xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new xl(0)}static ar(){return new xl(-1)}}const iT="LruGarbageCollector",qC=1048576;function aT([s,e],[n,a]){const o=_t(s,n);return o===0?_t(e,a):o}class BC{constructor(e){this.Pr=e,this.buffer=new xn(aT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();aT(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PC{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Le(iT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kl(n)?Le(iT,"Ignoring IndexedDB error during garbage collection: ",n):await Il(n)}await this.Ar(3e5)}))}}class FC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(Gd.ce);const a=new BC(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(sT)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sT):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,h,g,E,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(a=x,g=Date.now(),this.removeTargets(e,a,n)))).next((x=>(u=x,E=Date.now(),this.removeOrphanedDocuments(e,a)))).next((x=>(_=Date.now(),ll()<=St.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-S}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(E-g)+`ms
	Removed ${x} documents in `+(_-E)+`ms
Total Duration: ${_-S}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function GC(s,e){return new FC(s,e)}class HC{constructor(){this.changes=new uo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ts.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?_e.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XC{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Lc(a.mutation,o,Ti.empty(),Yt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,gt()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=gt()){const o=to();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let h=wc();return u.forEach(((g,E)=>{h=h.insert(g,E.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=to();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,gt())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,a,o){let u=Ra();const h=kc(),g=(function(){return kc()})();return n.forEach(((E,_)=>{const S=a.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof fo)?u=u.insert(_.key,_):S!==void 0?(h.set(_.key,S.mutation.getFieldMask()),Lc(S.mutation,_,S.mutation.getFieldMask(),Yt.now())):h.set(_.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,u).next((E=>(E.forEach(((_,S)=>h.set(_,S))),n.forEach(((_,S)=>g.set(_,new zC(S,h.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=kc();let o=new tn(((h,g)=>h-g)),u=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((E=>{const _=n.get(E);if(_===null)return;let S=a.get(E)||Ti.empty();S=g.applyToLocalView(_,S),a.set(E,S);const x=(o.get(g.batchId)||gt()).add(E);o=o.insert(g.batchId,x)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const E=g.getNext(),_=E.key,S=E.value,x=i0();S.forEach((w=>{if(!u.has(w)){const B=u0(n.get(w),a.get(w));B!==null&&x.set(w,B),u=u.add(w)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,x))}return _e.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return YR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):_e.resolve(to());let g=Oc,E=u;return h.next((_=>_e.forEach(_,((S,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),u.get(S)?_e.resolve():this.remoteDocumentCache.getEntry(e,S).next((w=>{E=E.insert(S,w)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,E,_,gt()))).next((S=>({batchId:g,changes:s0(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new He(n)).next((a=>{let o=wc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let h=wc();return this.indexManager.getCollectionParents(e,u).next((g=>_e.forEach(g,(E=>{const _=(function(x,w){return new zc(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,E.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((S=>{S.forEach(((x,w)=>{h=h.insert(x,w)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((h=>{u.forEach(((E,_)=>{const S=_.getKey();h.get(S)===null&&(h=h.insert(S,ts.newInvalidDocument(S)))}));let g=wc();return h.forEach(((E,_)=>{const S=u.get(E);S!==void 0&&Lc(S.mutation,_,Ti.empty(),Yt.now()),$d(n,_)&&(g=g.insert(E,_))})),g}))}}class $C{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return _e.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Gi(o.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:MC(o.bundledQuery),readTime:Gi(o.readTime)}})(n)),_e.resolve()}}class YC{constructor(){this.overlays=new tn(He.comparator),this.Lr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const a=to();return _e.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),_e.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),_e.resolve()}getOverlaysForCollection(e,n,a){const o=to(),u=n.length+1,h=new He(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const E=g.getNext().value,_=E.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&E.largestBatchId>a&&o.set(E.getKey(),E)}return _e.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new tn(((_,S)=>_-S));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>a){let S=u.get(_.largestBatchId);S===null&&(S=to(),u=u.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=to(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=o)););return _e.resolve(g)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new fC(n,a));let u=this.Lr.get(n);u===void 0&&(u=gt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class QC{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}class Mp{constructor(){this.kr=new xn(Ln.Kr),this.qr=new xn(Ln.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new Ln(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new Ln(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new He(new Ht([])),a=new Ln(n,e),o=new Ln(n,e+1),u=[];return this.qr.forEachInRange([a,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new He(new Ht([])),a=new Ln(n,e),o=new Ln(n,e+1);let u=gt();return this.qr.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Ln(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Ln{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return He.comparator(e.key,n.key)||_t(e.Hr,n.Hr)}static Ur(e,n){return _t(e.Hr,n.Hr)||He.comparator(e.key,n.key)}}class KC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new xn(Ln.Kr)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new dC(u,n,a,o);this.mutationQueue.push(h);for(const g of o)this.Jr=this.Jr.add(new Ln(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return _e.resolve(h)}lookupMutationBatch(e,n){return _e.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return _e.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?wp:this.Yn-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Ln(n,0),o=new Ln(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(h=>{const g=this.Zr(h.Hr);u.push(g)})),_e.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new xn(_t);return n.forEach((o=>{const u=new Ln(o,0),h=new Ln(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(g=>{a=a.add(g.Hr)}))})),_e.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;He.isDocumentKey(u)||(u=u.child(""));const h=new Ln(new He(u),0);let g=new xn(_t);return this.Jr.forEachWhile((E=>{const _=E.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(g=g.add(E.Hr)),!0)}),h),_e.resolve(this.Yr(g))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Lt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return _e.forEach(n.mutations,(o=>{const u=new Ln(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new Ln(n,0),o=this.Jr.firstAfterOrEqual(a);return _e.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class WC{constructor(e){this.ti=e,this.docs=(function(){return new tn(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return _e.resolve(a?a.document.mutableCopy():ts.newInvalidDocument(n))}getEntries(e,n){let a=Ra();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():ts.newInvalidDocument(o))})),_e.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Ra();const h=n.path,g=new He(h.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(g);for(;E.hasNext();){const{key:_,value:{document:S}}=E.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||NR(SR(S),a)<=0||(o.has(S.key)||$d(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return _e.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Ke(9500)}ni(e,n){return _e.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new JC(this)}getSize(e){return _e.resolve(this.size)}}class JC extends HC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),_e.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class ZC{constructor(e){this.persistence=e,this.ri=new uo((n=>Cp(n)),Ip),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new Mp,this.targetCount=0,this.oi=xl._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),_e.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.lr(n),_e.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((h,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),_e.waitFor(u).next((()=>o))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return _e.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),_e.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),_e.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return _e.resolve(a)}containsKey(e,n){return _e.resolve(this.si.containsKey(n))}}class N0{constructor(e,n){this._i={},this.overlays={},this.ai=new Gd(0),this.ui=!1,this.ui=!0,this.ci=new QC,this.referenceDelegate=e(this),this.li=new ZC(this),this.indexManager=new UC,this.remoteDocumentCache=(function(o){return new WC(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new OC(n),this.Pi=new $C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new KC(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){Le("MemoryPersistence","Starting transaction:",e);const o=new eI(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return _e.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class eI extends wR{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new Mp,this.Ai=null}static Vi(e){return new Up(e)}get di(){if(this.Ai)return this.Ai;throw Ke(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),_e.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.di,(a=>{const o=He.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,et.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ad{constructor(e,n){this.persistence=e,this.fi=new uo((a=>CR(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=GC(this,n)}static Vi(e,n){return new Ad(e,n)}Ti(){}Ii(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return _e.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?_e.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((g=>{g||(a++,u.removeEntry(h,et.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),_e.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ud(e.data.value)),n}wr(e,n,a){return _e.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return _e.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vp{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=gt(),o=gt();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Vp(e,n.fromCache,a,o)}}class tI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class nI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Yw()?8:AR(Xw())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new tI;return this.ys(e,n,h).next((g=>{if(u.result=g,this.As)return this.ws(e,n,h,g.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(ll()<=St.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),_e.resolve()):(ll()<=St.DEBUG&&Le("QueryEngine","Query:",cl(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(ll()<=St.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(n))):_e.resolve())}gs(e,n){if($v(n))return _e.resolve(null);let a=Pi(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Zm(n,null,"F"),a=Pi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=gt(...u);return this.fs.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((E=>{const _=this.bs(n,g);return this.Ss(n,_,h,E.readTime)?this.gs(e,Zm(n,null,"F")):this.Ds(e,_,n,E)}))))})))))}ps(e,n,a,o){return $v(n)||o.isEqual(et.min())?_e.resolve(null):this.fs.getDocuments(e,a).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,a,o)?_e.resolve(null):(ll()<=St.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),cl(n)),this.Ds(e,h,n,bR(o,Oc)).next((g=>g)))}))}bs(e,n){let a=new xn(t0(e));return n.forEach(((o,u)=>{$d(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return ll()<=St.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",cl(n)),this.fs.getDocumentsMatchingQuery(e,n,gr.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const qp="LocalStore",sI=3e8;class iI{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new tn(_t),this.Fs=new uo((u=>Cp(u)),Ip),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function aI(s,e,n,a){return new iI(s,e,n,a)}async function x0(s,e){const n=it(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let E=gt();for(const _ of o){h.push(_.batchId);for(const S of _.mutations)E=E.add(S.key)}for(const _ of u){g.push(_.batchId);for(const S of _.mutations)E=E.add(S.key)}return n.localDocuments.getDocuments(a,E).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:g})))}))}))}function rI(s,e){const n=it(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(g,E,_,S){const x=_.batch,w=x.keys();let B=_e.resolve();return w.forEach((G=>{B=B.next((()=>S.getEntry(E,G))).next((U=>{const q=_.docVersions.get(G);Lt(q!==null,48541),U.version.compareTo(q)<0&&(x.applyToRemoteDocument(U,_),U.isValidDocument()&&(U.setReadTime(_.commitVersion),S.addEntry(U)))}))})),B.next((()=>g.mutationQueue.removeMutationBatch(E,x)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let E=gt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(E=E.add(g.batch.mutations[_].key));return E})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function w0(s){const e=it(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function oI(s,e){const n=it(s),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const g=[];e.targetChanges.forEach(((S,x)=>{const w=o.get(x);if(!w)return;g.push(n.li.removeMatchingKeys(u,S.removedDocuments,x).next((()=>n.li.addMatchingKeys(u,S.addedDocuments,x))));let B=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?B=B.withResumeToken(Xn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):S.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(S.resumeToken,a)),o=o.insert(x,B),(function(U,q,z){return U.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=sI?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(w,B,S)&&g.push(n.li.updateTargetData(u,B))}));let E=Ra(),_=gt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))})),g.push(lI(u,h,e.documentUpdates).next((S=>{E=S.Bs,_=S.Ls}))),!a.isEqual(et.min())){const S=n.li.getLastRemoteSnapshotVersion(u).next((x=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(S)}return _e.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,E,_))).next((()=>E))})).then((u=>(n.vs=o,u)))}function lI(s,e,n){let a=gt(),o=gt();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let h=Ra();return n.forEach(((g,E)=>{const _=u.get(g);E.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),E.isNoDocument()&&E.version.isEqual(et.min())?(e.removeEntry(g,E.readTime),h=h.insert(g,E)):!_.isValidDocument()||E.version.compareTo(_.version)>0||E.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(E),h=h.insert(g,E)):Le(qp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",E.version)})),{Bs:h,Ls:o}}))}function cI(s,e){const n=it(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=wp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function uI(s,e){const n=it(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,_e.resolve(o)):n.li.allocateTargetId(a).next((h=>(o=new dr(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function ip(s,e,n){const a=it(s),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!kl(h))throw h;Le(qp,`Failed to update sequence numbers for target ${e}: ${h}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function rT(s,e,n){const a=it(s);let o=et.min(),u=gt();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(E,_,S){const x=it(E),w=x.Fs.get(S);return w!==void 0?_e.resolve(x.vs.get(w)):x.li.getTargetData(_,S)})(a,h,Pi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(h,g.targetId).next((E=>{u=E}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,n?o:et.min(),n?u:gt()))).next((g=>(dI(a,KR(e),g),{documents:g,ks:u})))))}function dI(s,e,n){let a=s.Ms.get(e)||et.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class oT{constructor(){this.activeTargetIds=nC()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fI{constructor(){this.vo=new oT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new oT,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hI{Mo(e){}shutdown(){}}const lT="ConnectivityMonitor";class cT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Le(lT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Le(lT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let id=null;function ap(){return id===null?id=(function(){return 268435456+Math.round(2147483648*Math.random())})():id++,"0x"+id.toString(16)}const Tm="RestConnection",mI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class pI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===vd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const h=ap(),g=this.Qo(e,n.toUriEncodedString());Le(Tm,`Sending RPC '${e}' ${h}:`,g,a);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,o,u);const{host:_}=new URL(g),S=bp(_);return this.zo(e,g,E,a,S).then((x=>(Le(Tm,`Received RPC '${e}' ${h}: `,x),x)),(x=>{throw vl(Tm,`RPC '${e}' ${h} failed with error: `,x,"url: ",g,"request:",a),x}))}jo(e,n,a,o,u,h){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=mI[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class _I{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Zn="WebChannelConnection",Tc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ml extends pI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ml.c_){const e=Ib();Tc(e,Cb.STAT_EVENT,(n=>{n.stat===Xm.PROXY?Le(Zn,"STAT_EVENT: detected buffering proxy"):n.stat===Xm.NOPROXY&&Le(Zn,"STAT_EVENT: detected no buffering proxy")})),ml.c_=!0}}zo(e,n,a,o,u){const h=ap();return new Promise(((g,E)=>{const _=new Ab;_.setWithCredentials(!0),_.listenOnce(Rb.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case cd.NO_ERROR:const x=_.getResponseJson();Le(Zn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(x)),g(x);break;case cd.TIMEOUT:Le(Zn,`RPC '${e}' ${h} timed out`),E(new je(pe.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const w=_.getStatus();if(Le(Zn,`RPC '${e}' ${h} failed with status:`,w,"response text:",_.getResponseText()),w>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const G=B?.error;if(G&&G.status&&G.message){const U=(function(z){const H=z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(H)>=0?H:pe.UNKNOWN})(G.status);E(new je(U,G.message))}else E(new je(pe.UNKNOWN,"Server responded with status "+_.getStatus()))}else E(new je(pe.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Le(Zn,`RPC '${e}' ${h} completed.`)}}));const S=JSON.stringify(o);Le(Zn,`RPC '${e}' ${h} sending request:`,o),_.send(n,"POST",S,a,15)}))}T_(e,n,a){const o=ap(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(g.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,n,a),g.encodeInitMessageHeaders=!0;const _=u.join("");Le(Zn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const S=h.createWebChannel(_,g);this.I_(S);let x=!1,w=!1;const B=new _I({Ho:G=>{w?Le(Zn,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(x||(Le(Zn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),x=!0),Le(Zn,`RPC '${e}' stream ${o} sending:`,G),S.send(G))},Jo:()=>S.close()});return Tc(S,xc.EventType.OPEN,(()=>{w||(Le(Zn,`RPC '${e}' stream ${o} transport opened.`),B.i_())})),Tc(S,xc.EventType.CLOSE,(()=>{w||(w=!0,Le(Zn,`RPC '${e}' stream ${o} transport closed`),B.o_(),this.E_(S))})),Tc(S,xc.EventType.ERROR,(G=>{w||(w=!0,vl(Zn,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),B.o_(new je(pe.UNAVAILABLE,"The operation could not be completed")))})),Tc(S,xc.EventType.MESSAGE,(G=>{if(!w){const U=G.data[0];Lt(!!U,16349);const q=U,z=q?.error||q[0]?.error;if(z){Le(Zn,`RPC '${e}' stream ${o} received error:`,z);const H=z.status;let K=(function(ge){const D=En[ge];if(D!==void 0)return f0(D)})(H),ie=z.message;K===void 0&&(K=pe.INTERNAL,ie="Unknown error status: "+H+" with message "+z.message),w=!0,B.o_(new je(K,ie)),S.close()}else Le(Zn,`RPC '${e}' stream ${o} received:`,U),B.__(U)}})),ml.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return kb()}}function gI(s){return new ml(s)}function bm(){return typeof document<"u"?document:null}function Wd(s){return new TC(s,!0)}ml.c_=!1;class A0{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const uT="PersistentStream";class R0{constructor(e,n,a,o,u,h,g,E){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Aa(n.toString()),Aa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new je(pe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(uT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Le(uT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yI extends R0{constructor(e,n,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NC(this.serializer,e),a=(function(u){if(!("targetChange"in u))return et.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?et.min():h.readTime?Gi(h.readTime):et.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(u,h){let g;const E=h.target;if(g=Wm(E)?{documents:AC(u,E)}:{query:RC(u,E).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=p0(u,h.resumeToken);const _=ep(u,h.expectedCount);_!==null&&(g.expectedCount=_)}else if(h.snapshotVersion.compareTo(et.min())>0){g.readTime=wd(u,h.snapshotVersion.toTimestamp());const _=ep(u,h.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const a=IC(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.K_(n)}}class EI extends R0{constructor(e,n,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wC(e.writeResults,e.commitTime),a=Gi(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=sp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>xC(this.serializer,a)))};this.K_(n)}}class vI{}class TI extends vI{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new je(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,tp(n,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(pe.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.jo(e,tp(n,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new je(pe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function bI(s,e,n,a){return new TI(s,e,n,a)}class SI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Aa(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const io="RemoteStore";class NI{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{a.enqueueAndForget((async()=>{ho(this)&&(Le(io,"Restarting streams for network reachability change."),await(async function(E){const _=it(E);_.Ea.add(4),await Yc(_),_.Va.set("Unknown"),_.Ea.delete(4),await Jd(_)})(this))}))})),this.Va=new SI(a,o)}}async function Jd(s){if(ho(s))for(const e of s.Ra)await e(!0)}async function Yc(s){for(const e of s.Ra)await e(!1)}function C0(s,e){const n=it(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Fp(n):Ll(n).O_()&&Pp(n,e))}function Bp(s,e){const n=it(s),a=Ll(n);n.Ia.delete(e),a.O_()&&I0(n,e),n.Ia.size===0&&(a.O_()?a.L_():ho(n)&&n.Va.set("Unknown"))}function Pp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(s).Z_(e)}function I0(s,e){s.da.$e(e),Ll(s).X_(e)}function Fp(s){s.da=new gC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ll(s).start(),s.Va.ua()}function Gp(s){return ho(s)&&!Ll(s).x_()&&s.Ia.size>0}function ho(s){return it(s).Ea.size===0}function k0(s){s.da=void 0}async function xI(s){s.Va.set("Online")}async function wI(s){s.Ia.forEach(((e,n)=>{Pp(s,e)}))}async function AI(s,e){k0(s),Gp(s)?(s.Va.ha(e),Fp(s)):s.Va.set("Unknown")}async function RI(s,e,n){if(s.Va.set("Online"),e instanceof m0&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.da.removeTarget(g))})(s,e)}catch(a){Le(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Rd(s,a)}else if(e instanceof hd?s.da.Xe(e):e instanceof h0?s.da.st(e):s.da.tt(e),!n.isEqual(et.min()))try{const a=await w0(s.localStore);n.compareTo(a)>=0&&await(function(u,h){const g=u.da.Tt(h);return g.targetChanges.forEach(((E,_)=>{if(E.resumeToken.approximateByteSize()>0){const S=u.Ia.get(_);S&&u.Ia.set(_,S.withResumeToken(E.resumeToken,h))}})),g.targetMismatches.forEach(((E,_)=>{const S=u.Ia.get(E);if(!S)return;u.Ia.set(E,S.withResumeToken(Xn.EMPTY_BYTE_STRING,S.snapshotVersion)),I0(u,E);const x=new dr(S.target,E,_,S.sequenceNumber);Pp(u,x)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){Le(io,"Failed to raise snapshot:",a),await Rd(s,a)}}async function Rd(s,e,n){if(!kl(e))throw e;s.Ea.add(1),await Yc(s),s.Va.set("Offline"),n||(n=()=>w0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Le(io,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Jd(s)}))}function L0(s,e){return e().catch((n=>Rd(s,n,e)))}async function Zd(s){const e=it(s),n=Tr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wp;for(;CI(e);)try{const o=await cI(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,II(e,o)}catch(o){await Rd(e,o)}j0(e)&&D0(e)}function CI(s){return ho(s)&&s.Ta.length<10}function II(s,e){s.Ta.push(e);const n=Tr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function j0(s){return ho(s)&&!Tr(s).x_()&&s.Ta.length>0}function D0(s){Tr(s).start()}async function kI(s){Tr(s).ra()}async function LI(s){const e=Tr(s);for(const n of s.Ta)e.ea(n.mutations)}async function jI(s,e,n){const a=s.Ta.shift(),o=jp.from(a,e,n);await L0(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Zd(s)}async function DI(s,e){e&&Tr(s).Y_&&await(async function(a,o){if((function(h){return mC(h)&&h!==pe.ABORTED})(o.code)){const u=a.Ta.shift();Tr(a).B_(),await L0(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Zd(a)}})(s,e),j0(s)&&D0(s)}async function dT(s,e){const n=it(s);n.asyncQueue.verifyOperationInProgress(),Le(io,"RemoteStore received new credentials");const a=ho(n);n.Ea.add(3),await Yc(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jd(n)}async function OI(s,e){const n=it(s);e?(n.Ea.delete(2),await Jd(n)):e||(n.Ea.add(2),await Yc(n),n.Va.set("Unknown"))}function Ll(s){return s.ma||(s.ma=(function(n,a,o){const u=it(n);return u.sa(),new yI(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:xI.bind(null,s),Yo:wI.bind(null,s),t_:AI.bind(null,s),J_:RI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Gp(s)?Fp(s):s.Va.set("Unknown")):(await s.ma.stop(),k0(s))}))),s.ma}function Tr(s){return s.fa||(s.fa=(function(n,a,o){const u=it(n);return u.sa(),new EI(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:kI.bind(null,s),t_:DI.bind(null,s),ta:LI.bind(null,s),na:jI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Zd(s)):(await s.fa.stop(),s.Ta.length>0&&(Le(io,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Hp{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const h=Date.now()+a,g=new Hp(e,n,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(s,e){if(Aa("AsyncQueue",`${e}: ${s}`),kl(s))return new je(pe.UNAVAILABLE,`${e}: ${s}`);throw s}class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||He.comparator(n.key,a.key):(n,a)=>He.comparator(n.key,a.key),this.keyedMap=wc(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new pl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class fT{constructor(){this.ga=new tn(He.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ke(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class wl{constructor(e,n,a,o,u,h,g,E,_){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=E,this.hasCachedResults=_}static fromInitialDocuments(e,n,a,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new wl(e,n,pl.emptySet(n),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}class MI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class UI{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=it(n),u=o.queries;o.queries=hT(),u.forEach(((h,g)=>{for(const E of g.ba)E.onError(a)}))})(this,new je(pe.ABORTED,"Firestore shutting down"))}}function hT(){return new uo((s=>e0(s)),Xd)}async function VI(s,e){const n=it(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new MI,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=zp(h,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Xp(n)}async function qI(s,e){const n=it(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function BI(s,e){const n=it(s);let a=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.ba)g.Fa(o)&&(a=!0);h.wa=o}}a&&Xp(n)}function PI(s,e,n){const a=it(s),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function Xp(s){s.Ca.forEach((e=>{e.next()}))}var rp,mT;(mT=rp||(rp={})).Ma="default",mT.Cache="cache";class FI{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new wl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rp.Cache}}class O0{constructor(e){this.key=e}}class M0{constructor(e){this.key=e}}class GI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=gt(),this.mutatedKeys=gt(),this.eu=t0(e),this.tu=new pl(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new fT,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const E=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,x)=>{const w=o.get(S),B=$d(this.query,x)?x:null,G=!!w&&this.mutatedKeys.has(w.key),U=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let q=!1;w&&B?w.data.isEqual(B.data)?G!==U&&(a.track({type:3,doc:B}),q=!0):this.su(w,B)||(a.track({type:2,doc:B}),q=!0,(E&&this.eu(B,E)>0||_&&this.eu(B,_)<0)&&(g=!0)):!w&&B?(a.track({type:0,doc:B}),q=!0):w&&!B&&(a.track({type:1,doc:w}),q=!0,(E||_)&&(g=!0)),q&&(B?(h=h.add(B),u=U?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const S=this.query.limitType==="F"?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),a.track({type:1,doc:S})}return{tu:h,iu:a,Ss:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((S,x)=>(function(B,G){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Vt:q})}};return U(B)-U(G)})(S.type,x.type)||this.eu(S.doc,x.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],E=this.Ya.size===0&&this.current&&!o?1:0,_=E!==this.Xa;return this.Xa=E,h.length!==0||_?{snapshot:new wl(this.query,e.tu,u,h,e.mutatedKeys,E===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=gt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new M0(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new O0(a))})),n}cu(e){this.Za=e.ks,this.Ya=gt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $p="SyncEngine";class HI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class zI{constructor(e){this.key=e,this.hu=!1}}class XI{constructor(e,n,a,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new uo((g=>e0(g)),Xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new tn(He.comparator),this.Au=new Map,this.Vu=new Mp,this.du={},this.mu=new Map,this.fu=xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $I(s,e,n=!0){const a=F0(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await U0(a,e,n,!0),o}async function YI(s,e){const n=F0(s);await U0(n,e,!0,!1)}async function U0(s,e,n,a){const o=await uI(s.localStore,Pi(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let g;return a&&(g=await QI(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&C0(s.remoteStore,o),g}async function QI(s,e,n,a,o){s.pu=(x,w,B)=>(async function(U,q,z,H){let K=q.view.ru(z);K.Ss&&(K=await rT(U.localStore,q.query,!1).then((({documents:D})=>q.view.ru(D,K))));const ie=H&&H.targetChanges.get(q.targetId),Ee=H&&H.targetMismatches.get(q.targetId)!=null,ge=q.view.applyChanges(K,U.isPrimaryClient,ie,Ee);return _T(U,q.targetId,ge.au),ge.snapshot})(s,x,w,B);const u=await rT(s.localStore,e,!0),h=new GI(e,u.ks),g=h.ru(u.documents),E=$c.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),_=h.applyChanges(g,s.isPrimaryClient,E);_T(s,n,_.au);const S=new HI(e,n,h);return s.Tu.set(e,S),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function KI(s,e,n){const a=it(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!Xd(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&Bp(a.remoteStore,o.targetId),op(a,o.targetId)})).catch(Il)):(op(a,o.targetId),await ip(a.localStore,o.targetId,!0))}async function WI(s,e){const n=it(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Bp(n.remoteStore,a.targetId))}async function JI(s,e,n){const a=a2(s);try{const o=await(function(h,g){const E=it(h),_=Yt.now(),S=g.reduce(((B,G)=>B.add(G.key)),gt());let x,w;return E.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let G=Ra(),U=gt();return E.xs.getEntries(B,S).next((q=>{G=q,G.forEach(((z,H)=>{H.isValidDocument()||(U=U.add(z))}))})).next((()=>E.localDocuments.getOverlayedDocuments(B,G))).next((q=>{x=q;const z=[];for(const H of g){const K=cC(H,x.get(H.key).overlayedDocument);K!=null&&z.push(new fo(H.key,K,zb(K.value.mapValue),Fi.exists(!0)))}return E.mutationQueue.addMutationBatch(B,_,z,g)})).next((q=>{w=q;const z=q.applyToLocalDocumentSet(x,U);return E.documentOverlayCache.saveOverlays(B,q.batchId,z)}))})).then((()=>({batchId:w.batchId,changes:s0(x)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,E){let _=h.du[h.currentUser.toKey()];_||(_=new tn(_t)),_=_.insert(g,E),h.du[h.currentUser.toKey()]=_})(a,o.batchId,n),await Qc(a,o.changes),await Zd(a.remoteStore)}catch(o){const u=zp(o,"Failed to persist write");n.reject(u)}}async function V0(s,e){const n=it(s);try{const a=await oI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Lt(h.hu,14607):o.removedDocuments.size>0&&(Lt(h.hu,42227),h.hu=!1))})),await Qc(n,a,e)}catch(a){await Il(a)}}function pT(s,e,n){const a=it(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const E=it(h);E.onlineState=g;let _=!1;E.queries.forEach(((S,x)=>{for(const w of x.ba)w.va(g)&&(_=!0)})),_&&Xp(E)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function ZI(s,e,n){const a=it(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new tn(He.comparator);h=h.insert(u,ts.newNoDocument(u,et.min()));const g=gt().add(u),E=new Kd(et.min(),new Map,new tn(_t),h,g);await V0(a,E),a.Ru=a.Ru.remove(u),a.Au.delete(e),Yp(a)}else await ip(a.localStore,e,!1).then((()=>op(a,e,n))).catch(Il)}async function e2(s,e){const n=it(s),a=e.batch.batchId;try{const o=await rI(n.localStore,e);B0(n,a,null),q0(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Qc(n,o)}catch(o){await Il(o)}}async function t2(s,e,n){const a=it(s);try{const o=await(function(h,g){const E=it(h);return E.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return E.mutationQueue.lookupMutationBatch(_,g).next((x=>(Lt(x!==null,37113),S=x.keys(),E.mutationQueue.removeMutationBatch(_,x)))).next((()=>E.mutationQueue.performConsistencyCheck(_))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>E.localDocuments.getDocuments(_,S)))}))})(a.localStore,e);B0(a,e,n),q0(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Qc(a,o)}catch(o){await Il(o)}}function q0(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function B0(s,e,n){const a=it(s);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function op(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||P0(s,a)}))}function P0(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Bp(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Yp(s))}function _T(s,e,n){for(const a of n)a instanceof O0?(s.Vu.addReference(a.key,e),n2(s,a)):a instanceof M0?(Le($p,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||P0(s,a.key)):Ke(19791,{wu:a})}function n2(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(Le($p,"New document in limbo: "+n),s.Eu.add(a),Yp(s))}function Yp(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new He(Ht.fromString(e)),a=s.fu.next();s.Au.set(a,new zI(n)),s.Ru=s.Ru.insert(n,a),C0(s.remoteStore,new dr(Pi(Jb(n.path)),a,"TargetPurposeLimboResolution",Gd.ce))}}async function Qc(s,e,n){const a=it(s),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,E)=>{h.push(a.pu(E,e,n).then((_=>{if((_||n)&&a.isPrimaryClient){const S=_?!_.fromCache:n?.targetChanges.get(E.targetId)?.current;a.sharedClientState.updateQueryState(E.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Vp.Es(E.targetId,_);u.push(S)}})))})),await Promise.all(h),a.Pu.J_(o),await(async function(E,_){const S=it(E);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>_e.forEach(_,(w=>_e.forEach(w.Ts,(B=>S.persistence.referenceDelegate.addReference(x,w.targetId,B))).next((()=>_e.forEach(w.Is,(B=>S.persistence.referenceDelegate.removeReference(x,w.targetId,B)))))))))}catch(x){if(!kl(x))throw x;Le(qp,"Failed to update sequence numbers: "+x)}for(const x of _){const w=x.targetId;if(!x.fromCache){const B=S.vs.get(w),G=B.snapshotVersion,U=B.withLastLimboFreeSnapshotVersion(G);S.vs=S.vs.insert(w,U)}}})(a.localStore,u))}async function s2(s,e){const n=it(s);if(!n.currentUser.isEqual(e)){Le($p,"User change. New user:",e.toKey());const a=await x0(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((E=>{E.reject(new je(pe.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Qc(n,a.Ns)}}function i2(s,e){const n=it(s),a=n.Au.get(e);if(a&&a.hu)return gt().add(a.key);{let o=gt();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function F0(s){const e=it(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=V0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,e),e.Pu.J_=BI.bind(null,e.eventManager),e.Pu.yu=PI.bind(null,e.eventManager),e}function a2(s){const e=it(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t2.bind(null,e),e}class Cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aI(this.persistence,new nI,e.initialUser,this.serializer)}Cu(e){return new N0(Up.Vi,this.serializer)}Du(e){return new fI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cd.provider={build:()=>new Cd};class r2 extends Cd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Lt(this.persistence.referenceDelegate instanceof Ad,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new PC(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new N0((a=>Ad.Vi(a,n)),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>pT(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,this.syncEngine),await OI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=Wd(e.databaseInfo.databaseId),a=gI(e.databaseInfo);return bI(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,h,g){return new NI(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>pT(this.syncEngine,n,0)),(function(){return cT.v()?new cT:new hI})())}createSyncEngine(e,n){return(function(o,u,h,g,E,_,S){const x=new XI(o,u,h,g,E,_);return S&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=it(n);Le(io,"RemoteStore shutting down."),a.Ea.add(5),await Yc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lp.provider={build:()=>new lp};class o2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Aa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const br="FirestoreClient";class l2{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=es.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{Le(br,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(Le(br,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=zp(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Sm(s,e){s.asyncQueue.verifyOperationInProgress(),Le(br,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await x0(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function gT(s,e){s.asyncQueue.verifyOperationInProgress();const n=await c2(s);Le(br,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>dT(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>dT(e.remoteStore,o))),s._onlineComponents=e}async function c2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Le(br,"Using user provided OfflineComponentProvider");try{await Sm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===pe.FAILED_PRECONDITION||o.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;vl("Error using user provided cache. Falling back to memory cache: "+n),await Sm(s,new Cd)}}else Le(br,"Using default OfflineComponentProvider"),await Sm(s,new r2(void 0));return s._offlineComponents}async function G0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Le(br,"Using user provided OnlineComponentProvider"),await gT(s,s._uninitializedComponentsProvider._online)):(Le(br,"Using default OnlineComponentProvider"),await gT(s,new lp))),s._onlineComponents}function u2(s){return G0(s).then((e=>e.syncEngine))}async function d2(s){const e=await G0(s),n=e.eventManager;return n.onListen=$I.bind(null,e.syncEngine),n.onUnlisten=KI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WI.bind(null,e.syncEngine),n}function f2(s,e,n={}){const a=new mr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,E,_){const S=new o2({next:w=>{S.Nu(),h.enqueueAndForget((()=>qI(u,x))),w.fromCache&&E.source==="server"?_.reject(new je(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(w)},error:w=>_.reject(w)}),x=new FI(g,S,{includeMetadataChanges:!0,Ka:!0});return VI(u,x)})(await d2(s),s.asyncQueue,e,n,a))),a.promise}function h2(s,e){const n=new mr;return s.asyncQueue.enqueueAndForget((async()=>JI(await u2(s),e,n))),n.promise}function H0(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const m2="ComponentProvider",yT=new Map;function p2(s,e,n,a,o){return new LR(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,H0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const z0="firestore.googleapis.com",ET=!0;class vT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new je(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z0,this.ssl=ET}else this.host=e.host,this.ssl=e.ssl??ET;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=S0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new je(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new dR;switch(a.type){case"firstParty":return new pR(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new je(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=yT.get(n);a&&(Le(m2,"Removing Datastore"),yT.delete(n),a.terminate())})(this),Promise.resolve()}}function _2(s,e,n,a={}){s=bl(s,ef);const o=bp(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(Pw(`https://${g}`),zw("Firestore",!0)),u.host!==z0&&u.host!==g&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:g,ssl:o,emulatorOptions:a};if(!gd(E,h)&&(s._setSettings(E),a.mockUserToken)){let _,S;if(typeof a.mockUserToken=="string")_=a.mockUserToken,S=es.MOCK_USER;else{_=Fw(a.mockUserToken,s._app?.options.projectId);const x=a.mockUserToken.sub||a.mockUserToken.user_id;if(!x)throw new je(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new es(x)}s._authCredentials=new fR(new jb(_,S))}}class jl{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new jl(this.firestore,e,this._query)}}class Nn{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}toJSON(){return{type:Nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Hc(n,Nn._jsonSchema))return new Nn(e,a||null,new He(Ht.fromString(n.referencePath)))}}Nn._jsonSchemaVersion="firestore/documentReference/1.0",Nn._jsonSchema={type:Tn("string",Nn._jsonSchemaVersion),referencePath:Tn("string")};class pr extends jl{constructor(e,n,a){super(e,n,Jb(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new He(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function g2(s,e,...n){if(s=Na(s),Db("collection","path",e),s instanceof ef){const a=Ht.fromString(e,...n);return jv(a),new pr(s,null,a)}{if(!(s instanceof Nn||s instanceof pr))throw new je(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ht.fromString(e,...n));return jv(a),new pr(s.firestore,null,a)}}function mo(s,e,...n){if(s=Na(s),arguments.length===1&&(e=xp.newId()),Db("doc","path",e),s instanceof ef){const a=Ht.fromString(e,...n);return Lv(a),new Nn(s,null,new He(a))}{if(!(s instanceof Nn||s instanceof pr))throw new je(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ht.fromString(e,...n));return Lv(a),new Nn(s.firestore,s instanceof pr?s.converter:null,new He(a))}}const TT="AsyncQueue";class bT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A0(this,"async_queue_retry"),this._c=()=>{const a=bm();a&&Le(TT,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!kl(e))throw e;Le(TT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Aa("INTERNAL UNHANDLED ERROR: ",ST(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Hp.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ke(47125,{Pc:ST(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ST(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class tf extends ef{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new bT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function y2(s,e){const n=typeof s=="object"?s:Sb(),a=typeof s=="string"?s:vd,o=Pd(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=qw("firestore");u&&_2(o,...u)}return o}function X0(s){if(s._terminated)throw new je(pe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||E2(s),s._firestoreClient}function E2(s){const e=s._freezeSettings(),n=p2(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new l2(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui(Xn.fromBase64String(e))}catch(n){throw new je(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ui(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,ui._jsonSchema))return ui.fromBase64String(e.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:Tn("string",ui._jsonSchemaVersion),bytes:Tn("string")};class $0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new je(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Y0{constructor(e){this._methodName=e}}class Hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new je(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new je(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Tn("string",Hi._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};class bi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bi(e.vectorValues);throw new je(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:Tn("string",bi._jsonSchemaVersion),vectorValues:Tn("object")};const v2=/^__.*__$/;class T2{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}function Q0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{dataSource:s})}}class Qp{constructor(e,n,a,o,u,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Id(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Q0(this.dataSource)&&v2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class b2{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Wd(e)}createContext(e,n,a,o=!1){return new Qp({dataSource:e,methodName:n,targetDoc:a,path:zn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K0(s){const e=s._freezeSettings(),n=Wd(s._databaseId);return new b2(s._databaseId,!!e.ignoreUndefinedProperties,n)}function S2(s,e,n,a,o,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);Z0("Data must be an object, but it was:",h,a);const g=W0(a,h);let E,_;if(u.merge)E=new Ti(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const w=nf(e,x,n);if(!h.contains(w))throw new je(pe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);A2(S,w)||S.push(w)}E=new Ti(S),_=h.fieldTransforms.filter((x=>E.covers(x.field)))}else E=null,_=h.fieldTransforms;return new T2(new ci(g),E,_)}function N2(s,e,n,a=!1){return Kp(n,s.createContext(a?4:3,e))}function Kp(s,e){if(J0(s=Na(s)))return Z0("Unsupported field value:",e,s),W0(s,e);if(s instanceof Y0)return(function(a,o){if(!Q0(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let E=Kp(g,o.childContextForArray(h));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),h++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=Na(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return sC(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Yt.fromDate(a);return{timestampValue:wd(o.serializer,u)}}if(a instanceof Yt){const u=new Yt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:wd(o.serializer,u)}}if(a instanceof Hi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ui)return{bytesValue:p0(o.serializer,a._byteString)};if(a instanceof Nn){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Op(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof bi)return(function(h,g){const E=h instanceof bi?h.toArray():h;return{mapValue:{fields:{[Gb]:{stringValue:Hb},[Td]:{arrayValue:{values:E.map((S=>{if(typeof S!="number")throw g.createError("VectorValues must only contain numeric values.");return kp(g.serializer,S)}))}}}}}})(a,o);if(b0(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Fd(a)}`)})(s,e)}function W0(s,e){const n={};return Ub(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(s,((a,o)=>{const u=Kp(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function J0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Yt||s instanceof Hi||s instanceof ui||s instanceof Nn||s instanceof Y0||s instanceof bi||b0(s))}function Z0(s,e,n){if(!J0(n)||!Ob(n)){const a=Fd(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function nf(s,e,n){if((e=Na(e))instanceof $0)return e._internalPath;if(typeof e=="string")return w2(s,e);throw Id("Field path arguments must be of type string or ",s,!1,void 0,n)}const x2=new RegExp("[~\\*/\\[\\]]");function w2(s,e,n){if(e.search(x2)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new $0(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Id(s,e,n,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${a}`),h&&(E+=` in document ${o}`),E+=")"),new je(pe.INVALID_ARGUMENT,g+s+E)}function A2(s,e){return s.some((n=>n.isEqual(e)))}class R2{convertValue(e,n="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return co(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[Td].arrayValue?.values?.map((a=>dn(a.doubleValue)));return new bi(n)}convertGeoPoint(e){return new Hi(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=zd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const n=yr(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Ht.fromString(e);Lt(T0(a),9688,{name:e});const o=new Uc(a.get(1),a.get(3)),u=new He(a.popFirst(5));return o.isEqual(n)||Aa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class C2 extends R2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,n)}}const NT="@firebase/firestore",xT="4.10.0";class e1{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I2 extends e1{data(){return super.data()}}function k2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new je(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class L2 extends Wp{}function j2(s,e,...n){let a=[];e instanceof Wp&&a.push(e),a=a.concat(n),(function(u){const h=u.filter((E=>E instanceof Jp)).length,g=u.filter((E=>E instanceof sf)).length;if(h>1||h>0&&g>0)throw new je(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class sf extends L2{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new sf(e,n,a)}_apply(e){const n=this._parse(e);return t1(e._query,n),new jl(e.firestore,e.converter,Jm(e._query,n))}_parse(e){const n=K0(e.firestore);return(function(u,h,g,E,_,S,x){let w;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new je(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){RT(x,S);const G=[];for(const U of x)G.push(AT(E,u,U));w={arrayValue:{values:G}}}else w=AT(E,u,x)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||RT(x,S),w=N2(g,h,x,S==="in"||S==="not-in");return vn.create(_,S,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wT(s,e,n){const a=e,o=nf("where",s);return sf._create(o,a,n)}class Jp extends Wp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jp(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const E of g)t1(h,E),h=Jm(h,E)})(e._query,n),new jl(e.firestore,e.converter,Jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AT(s,e,n){if(typeof(n=Na(n))=="string"){if(n==="")throw new je(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zb(e)&&n.indexOf("/")!==-1)throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Ht.fromString(n));if(!He.isDocumentKey(a))throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Pv(s,new He(a))}if(n instanceof Nn)return Pv(s,n._key);throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(n)}.`)}function RT(s,e){if(!Array.isArray(s)||s.length===0)throw new je(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t1(s,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new je(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function D2(s,e,n){let a;return a=s?s.toFirestore(e):e,a}class ad{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _l extends e1{constructor(e,n,a,o,u,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(nf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_l._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_l._jsonSchemaVersion="firestore/documentSnapshot/1.0",_l._jsonSchema={type:Tn("string",_l._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class md extends _l{data(e={}){return super.data(e)}}class gl{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ad(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new md(this._firestore,this._userDataWriter,a.key,a,new ad(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new je(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const E=new md(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ad(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:E,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const E=new md(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ad(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return g.type!==0&&(_=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),S=h.indexOf(g.doc.key)),{type:O2(g.type),doc:E,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:s})}}gl._jsonSchemaVersion="firestore/querySnapshot/1.0",gl._jsonSchema={type:Tn("string",gl._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};function M2(s){s=bl(s,jl);const e=bl(s.firestore,tf),n=X0(e),a=new C2(e);return k2(s._query),f2(n,s._query).then((o=>new gl(e,a,s,o)))}function Zp(s,e,n){s=bl(s,Nn);const a=bl(s.firestore,tf),o=D2(s.converter,e),u=K0(a);return n1(a,[S2(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Fi.none())])}function af(s){return n1(bl(s.firestore,tf),[new Lp(s._key,Fi.none())])}function n1(s,e){const n=X0(s);return h2(n,e)}(function(e,n=!0){uR(WA),_r(new xa("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new tf(new hR(a.getProvider("auth-internal")),new _R(h,a.getProvider("app-check-internal")),jR(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Bi(NT,xT,e),Bi(NT,xT,"esm2020")})();const s1="@firebase/installations",e_="0.6.19";const i1=1e4,a1=`w:${e_}`,r1="FIS_v2",U2="https://firebaseinstallations.googleapis.com/v1",V2=3600*1e3,q2="installations",B2="Installations";const P2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ao=new qd(q2,B2,P2);function o1(s){return s instanceof lo&&s.code.includes("request-failed")}function l1({projectId:s}){return`${U2}/projects/${s}/installations`}function c1(s){return{token:s.token,requestStatus:2,expiresIn:G2(s.expiresIn),creationTime:Date.now()}}async function u1(s,e){const a=(await e.json()).error;return ao.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function d1({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function F2(s,{refreshToken:e}){const n=d1(s);return n.append("Authorization",H2(e)),n}async function f1(s){const e=await s();return e.status>=500&&e.status<600?s():e}function G2(s){return Number(s.replace("s","000"))}function H2(s){return`${r1} ${s}`}async function z2({appConfig:s,heartbeatServiceProvider:e},{fid:n}){const a=l1(s),o=d1(s),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={fid:n,authVersion:r1,appId:s.appId,sdkVersion:a1},g={method:"POST",headers:o,body:JSON.stringify(h)},E=await f1(()=>fetch(a,g));if(E.ok){const _=await E.json();return{fid:_.fid||n,registrationStatus:2,refreshToken:_.refreshToken,authToken:c1(_.authToken)}}else throw await u1("Create Installation",E)}function h1(s){return new Promise(e=>{setTimeout(e,s)})}function X2(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const $2=/^[cdef][\w-]{21}$/,cp="";function Y2(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=Q2(s);return $2.test(n)?n:cp}catch{return cp}}function Q2(s){return X2(s).substr(0,22)}function rf(s){return`${s.appName}!${s.appId}`}const m1=new Map;function p1(s,e){const n=rf(s);_1(n,e),K2(n,e)}function _1(s,e){const n=m1.get(s);if(n)for(const a of n)a(e)}function K2(s,e){const n=W2();n&&n.postMessage({key:s,fid:e}),J2()}let no=null;function W2(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=s=>{_1(s.data.key,s.data.fid)}),no}function J2(){m1.size===0&&no&&(no.close(),no=null)}const Z2="firebase-installations-database",ek=1,ro="firebase-installations-store";let Nm=null;function t_(){return Nm||(Nm=Bd(Z2,ek,{upgrade:(s,e)=>{e===0&&s.createObjectStore(ro)}})),Nm}async function kd(s,e){const n=rf(s),o=(await t_()).transaction(ro,"readwrite"),u=o.objectStore(ro),h=await u.get(n);return await u.put(e,n),await o.done,(!h||h.fid!==e.fid)&&p1(s,e.fid),e}async function g1(s){const e=rf(s),a=(await t_()).transaction(ro,"readwrite");await a.objectStore(ro).delete(e),await a.done}async function of(s,e){const n=rf(s),o=(await t_()).transaction(ro,"readwrite"),u=o.objectStore(ro),h=await u.get(n),g=e(h);return g===void 0?await u.delete(n):await u.put(g,n),await o.done,g&&(!h||h.fid!==g.fid)&&p1(s,g.fid),g}async function n_(s){let e;const n=await of(s.appConfig,a=>{const o=tk(a),u=nk(s,o);return e=u.registrationPromise,u.installationEntry});return n.fid===cp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function tk(s){const e=s||{fid:Y2(),registrationStatus:0};return y1(e)}function nk(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ao.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=sk(s,n);return{installationEntry:n,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ik(s)}:{installationEntry:e}}async function sk(s,e){try{const n=await z2(s,e);return kd(s.appConfig,n)}catch(n){throw o1(n)&&n.customData.serverCode===409?await g1(s.appConfig):await kd(s.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ik(s){let e=await CT(s.appConfig);for(;e.registrationStatus===1;)await h1(100),e=await CT(s.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:a}=await n_(s);return a||n}return e}function CT(s){return of(s,e=>{if(!e)throw ao.create("installation-not-found");return y1(e)})}function y1(s){return ak(s)?{fid:s.fid,registrationStatus:0}:s}function ak(s){return s.registrationStatus===1&&s.registrationTime+i1<Date.now()}async function rk({appConfig:s,heartbeatServiceProvider:e},n){const a=ok(s,n),o=F2(s,n),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={installation:{sdkVersion:a1,appId:s.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},E=await f1(()=>fetch(a,g));if(E.ok){const _=await E.json();return c1(_)}else throw await u1("Generate Auth Token",E)}function ok(s,{fid:e}){return`${l1(s)}/${e}/authTokens:generate`}async function s_(s,e=!1){let n;const a=await of(s.appConfig,u=>{if(!E1(u))throw ao.create("not-registered");const h=u.authToken;if(!e&&uk(h))return u;if(h.requestStatus===1)return n=lk(s,e),u;{if(!navigator.onLine)throw ao.create("app-offline");const g=fk(u);return n=ck(s,g),g}});return n?await n:a.authToken}async function lk(s,e){let n=await IT(s.appConfig);for(;n.authToken.requestStatus===1;)await h1(100),n=await IT(s.appConfig);const a=n.authToken;return a.requestStatus===0?s_(s,e):a}function IT(s){return of(s,e=>{if(!E1(e))throw ao.create("not-registered");const n=e.authToken;return hk(n)?{...e,authToken:{requestStatus:0}}:e})}async function ck(s,e){try{const n=await rk(s,e),a={...e,authToken:n};return await kd(s.appConfig,a),n}catch(n){if(o1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await g1(s.appConfig);else{const a={...e,authToken:{requestStatus:0}};await kd(s.appConfig,a)}throw n}}function E1(s){return s!==void 0&&s.registrationStatus===2}function uk(s){return s.requestStatus===2&&!dk(s)}function dk(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+V2}function fk(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function hk(s){return s.requestStatus===1&&s.requestTime+i1<Date.now()}async function mk(s){const e=s,{installationEntry:n,registrationPromise:a}=await n_(e);return a?a.catch(console.error):s_(e).catch(console.error),n.fid}async function pk(s,e=!1){const n=s;return await _k(n),(await s_(n,e)).token}async function _k(s){const{registrationPromise:e}=await n_(s);e&&await e}function gk(s){if(!s||!s.options)throw xm("App Configuration");if(!s.name)throw xm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!s.options[n])throw xm(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function xm(s){return ao.create("missing-app-config-values",{valueName:s})}const v1="installations",yk="installations-internal",Ek=s=>{const e=s.getProvider("app").getImmediate(),n=gk(e),a=Pd(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},vk=s=>{const e=s.getProvider("app").getImmediate(),n=Pd(e,v1).getImmediate();return{getId:()=>mk(n),getToken:o=>pk(n,o)}};function Tk(){_r(new xa(v1,Ek,"PUBLIC")),_r(new xa(yk,vk,"PRIVATE"))}Tk();Bi(s1,e_);Bi(s1,e_,"esm2020");const bk="/firebase-messaging-sw.js",Sk="/firebase-cloud-messaging-push-scope",T1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Nk="https://fcmregistrations.googleapis.com/v1",b1="google.c.a.c_id",xk="google.c.a.c_l",wk="google.c.a.ts",Ak="google.c.a.e",kT=1e4;var LT;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(LT||(LT={}));var Pc;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Pc||(Pc={}));function Ea(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rk(s){const e="=".repeat((4-s.length%4)%4),n=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(n),o=new Uint8Array(a.length);for(let u=0;u<a.length;++u)o[u]=a.charCodeAt(u);return o}const wm="fcm_token_details_db",Ck=5,jT="fcm_token_object_Store";async function Ik(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(wm))return null;let e=null;return(await Bd(wm,Ck,{upgrade:async(a,o,u,h)=>{if(o<2||!a.objectStoreNames.contains(jT))return;const g=h.objectStore(jT),E=await g.index("fcmSenderId").get(s);if(await g.clear(),!!E){if(o===2){const _=E;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:_.createTime??Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:Ea(_.vapidKey)}}}else if(o===3){const _=E;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:Ea(_.auth),p256dh:Ea(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:Ea(_.vapidKey)}}}else if(o===4){const _=E;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:Ea(_.auth),p256dh:Ea(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:Ea(_.vapidKey)}}}}}})).close(),await _m(wm),await _m("fcm_vapid_details_db"),await _m("undefined"),kk(e)?e:null}function kk(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const Lk="firebase-messaging-database",jk=1,Fc="firebase-messaging-store";let Am=null;function S1(){return Am||(Am=Bd(Lk,jk,{upgrade:(s,e)=>{e===0&&s.createObjectStore(Fc)}})),Am}async function Dk(s){const e=N1(s),a=await(await S1()).transaction(Fc).objectStore(Fc).get(e);if(a)return a;{const o=await Ik(s.appConfig.senderId);if(o)return await i_(s,o),o}}async function i_(s,e){const n=N1(s),o=(await S1()).transaction(Fc,"readwrite");return await o.objectStore(Fc).put(e,n),await o.done,e}function N1({appConfig:s}){return s.appId}const Ok={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ns=new qd("messaging","Messaging",Ok);async function Mk(s,e){const n=await r_(s),a=x1(e),o={method:"POST",headers:n,body:JSON.stringify(a)};let u;try{u=await(await fetch(a_(s.appConfig),o)).json()}catch(h){throw ns.create("token-subscribe-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ns.create("token-subscribe-failed",{errorInfo:h})}if(!u.token)throw ns.create("token-subscribe-no-token");return u.token}async function Uk(s,e){const n=await r_(s),a=x1(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(a)};let u;try{u=await(await fetch(`${a_(s.appConfig)}/${e.token}`,o)).json()}catch(h){throw ns.create("token-update-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ns.create("token-update-failed",{errorInfo:h})}if(!u.token)throw ns.create("token-update-no-token");return u.token}async function Vk(s,e){const a={method:"DELETE",headers:await r_(s)};try{const u=await(await fetch(`${a_(s.appConfig)}/${e}`,a)).json();if(u.error){const h=u.error.message;throw ns.create("token-unsubscribe-failed",{errorInfo:h})}}catch(o){throw ns.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}}function a_({projectId:s}){return`${Nk}/projects/${s}/registrations`}async function r_({appConfig:s,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function x1({p256dh:s,auth:e,endpoint:n,vapidKey:a}){const o={web:{endpoint:n,auth:e,p256dh:s}};return a!==T1&&(o.web.applicationPubKey=a),o}const qk=10080*60*1e3;async function Bk(s){const e=await Fk(s.swRegistration,s.vapidKey),n={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:Ea(e.getKey("auth")),p256dh:Ea(e.getKey("p256dh"))},a=await Dk(s.firebaseDependencies);if(a){if(Gk(a.subscriptionOptions,n))return Date.now()>=a.createTime+qk?Pk(s,{token:a.token,createTime:Date.now(),subscriptionOptions:n}):a.token;try{await Vk(s.firebaseDependencies,a.token)}catch(o){console.warn(o)}return DT(s.firebaseDependencies,n)}else return DT(s.firebaseDependencies,n)}async function Pk(s,e){try{const n=await Uk(s.firebaseDependencies,e),a={...e,token:n,createTime:Date.now()};return await i_(s.firebaseDependencies,a),n}catch(n){throw n}}async function DT(s,e){const a={token:await Mk(s,e),createTime:Date.now(),subscriptionOptions:e};return await i_(s,a),a.token}async function Fk(s,e){const n=await s.pushManager.getSubscription();return n||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rk(e)})}function Gk(s,e){const n=e.vapidKey===s.vapidKey,a=e.endpoint===s.endpoint,o=e.auth===s.auth,u=e.p256dh===s.p256dh;return n&&a&&o&&u}function OT(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return Hk(e,s),zk(e,s),Xk(e,s),e}function Hk(s,e){if(!e.notification)return;s.notification={};const n=e.notification.title;n&&(s.notification.title=n);const a=e.notification.body;a&&(s.notification.body=a);const o=e.notification.image;o&&(s.notification.image=o);const u=e.notification.icon;u&&(s.notification.icon=u)}function zk(s,e){e.data&&(s.data=e.data)}function Xk(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const n=e.fcmOptions?.link??e.notification?.click_action;n&&(s.fcmOptions.link=n);const a=e.fcmOptions?.analytics_label;a&&(s.fcmOptions.analyticsLabel=a)}function $k(s){return typeof s=="object"&&!!s&&b1 in s}function Yk(s){if(!s||!s.options)throw Rm("App Configuration Object");if(!s.name)throw Rm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=s;for(const a of e)if(!n[a])throw Rm(a);return{appName:s.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Rm(s){return ns.create("missing-app-config-values",{valueName:s})}class Qk{constructor(e,n,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=Yk(e);this.firebaseDependencies={app:e,appConfig:o,installations:n,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function Kk(s){try{s.swRegistration=await navigator.serviceWorker.register(bk,{scope:Sk}),s.swRegistration.update().catch(()=>{}),await Wk(s.swRegistration)}catch(e){throw ns.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function Wk(s){return new Promise((e,n)=>{const a=setTimeout(()=>n(new Error(`Service worker not registered after ${kT} ms`)),kT),o=s.installing||s.waiting;s.active?(clearTimeout(a),e()):o?o.onstatechange=u=>{u.target?.state==="activated"&&(o.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),n(new Error("No incoming service worker found.")))})}async function Jk(s,e){if(!e&&!s.swRegistration&&await Kk(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ns.create("invalid-sw-registration");s.swRegistration=e}}async function Zk(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=T1)}async function w1(s,e){if(!navigator)throw ns.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ns.create("permission-blocked");return await Zk(s,e?.vapidKey),await Jk(s,e?.serviceWorkerRegistration),Bk(s)}async function eL(s,e,n){const a=tL(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:n[b1],message_name:n[xk],message_time:n[wk],message_device_time:Math.floor(Date.now()/1e3)})}function tL(s){switch(s){case Pc.NOTIFICATION_CLICKED:return"notification_open";case Pc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function nL(s,e){const n=e.data;if(!n.isFirebaseMessaging)return;s.onMessageHandler&&n.messageType===Pc.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(OT(n)):s.onMessageHandler.next(OT(n)));const a=n.data;$k(a)&&a[Ak]==="1"&&await eL(s,n.messageType,a)}const MT="@firebase/messaging",UT="0.12.23";const sL=s=>{const e=new Qk(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>nL(e,n)),e},iL=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:a=>w1(e,a)}};function aL(){_r(new xa("messaging",sL,"PUBLIC")),_r(new xa("messaging-internal",iL,"PRIVATE")),Bi(MT,UT),Bi(MT,UT,"esm2020")}async function A1(){try{await yb()}catch{return!1}return typeof window<"u"&&gb()&&Qw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function rL(s,e){if(!navigator)throw ns.create("only-available-in-window");return s.onMessageHandler=e,()=>{s.onMessageHandler=null}}function oL(s=Sb()){return A1().then(e=>{if(!e)throw ns.create("unsupported-browser")},e=>{throw ns.create("indexed-db-unsupported")}),Pd(Na(s),"messaging").getImmediate()}async function lL(s,e){return s=Na(s),w1(s,e)}function cL(s,e){return s=Na(s),rL(s,e)}aL();const pd={apiKey:"AIzaSyA3dJLU8Xw6vcqXtOhVbuI5aO_ImdT8upg",authDomain:"goal-game-7ad53.firebaseapp.com",projectId:"goal-game-7ad53",storageBucket:"goal-game-7ad53.firebasestorage.app",messagingSenderId:"86507800050",appId:"1:86507800050:web:f7674a55bc2291686f976b"},R1="BLD2XB0Bh-Y2EwwHU1YimB6-tzKQNrGh-bzoZHXbSWlvQt1mg6K5c7EJWfBIDrGY0cQJXO4LNrKD9MjlZhMsb3c";let Cm=null,Im=null,rd=null;function $i(){return!!(pd.apiKey&&pd.projectId&&pd.messagingSenderId&&R1)}function C1(){if(!Cm){if(!$i())throw new Error("Firebase is not configured. Please add your Firebase config to .env file.");Cm=bb(pd)}return Cm}function po(){return Im||(Im=y2(C1())),Im}async function I1(){return rd||(await A1()?(rd=oL(C1()),rd):(console.warn("Firebase Messaging is not supported in this browser"),null))}function Ca(){let s=localStorage.getItem("goal-game-device-id");return s||(s=crypto.randomUUID(),localStorage.setItem("goal-game-device-id",s)),s}const Al="scheduled_notifications",k1="fcm_tokens";async function uL(s,e,n,a,o,u){if(!$i())return console.warn("Firebase not configured, skipping notification scheduling"),null;const h=po(),g=Ca(),E=new Date(`${n}T${a}`),_=new Date(E.getTime()-o*60*1e3);if(_<=new Date)return console.warn("Notification trigger time is in the past, skipping"),null;const S=`${g}_event_${s}`,x={id:S,eventId:s,eventTitle:e,eventDate:n,eventTime:a,triggerAt:_.toISOString(),fcmToken:u,deviceId:g,status:"pending",createdAt:new Date().toISOString(),notificationType:"event"};try{return await Zp(mo(h,Al,S),x),S}catch(w){return console.error("Failed to schedule notification:",w),null}}async function dL(s,e,n,a,o){if(!$i())return console.warn("Firebase not configured, skipping notification scheduling"),null;const u=po(),h=Ca(),g=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z",E=new Date(g);if(E<=new Date)return console.warn("Buff expiry time is in the past, skipping notification"),null;const _=`${h}_buff_${s}`,S={id:_,buffLogId:s,buffName:e,buffType:n,triggerAt:E.toISOString(),fcmToken:o,deviceId:h,status:"pending",createdAt:new Date().toISOString(),notificationType:"buff_expiry"};try{return await Zp(mo(u,Al,_),S),_}catch(x){return console.error("Failed to schedule buff expiry notification:",x),null}}async function fL(s){if(!$i())return;const e=po(),a=`${Ca()}_buff_${s}`;try{await af(mo(e,Al,a))}catch(o){console.error("Failed to cancel buff expiry notification:",o)}}async function hL(s){if(!$i())return;const e=po(),a=`${Ca()}_event_${s}`;try{await af(mo(e,Al,a))}catch(o){console.error("Failed to cancel notification:",o)}}async function mL(){if(!$i())return;const s=po(),e=Ca();try{const n=j2(g2(s,Al),wT("deviceId","==",e),wT("status","==","pending")),o=(await M2(n)).docs.map(u=>af(mo(s,Al,u.id)));await Promise.all(o)}catch(n){console.error("Failed to cancel all notifications:",n)}}async function pL(s){if(!$i())return;const e=po(),n=Ca();try{await Zp(mo(e,k1,n),{token:s,deviceId:n,updatedAt:new Date().toISOString(),platform:navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?"ios":navigator.userAgent.includes("Android")?"android":"web"})}catch(a){console.error("Failed to save FCM token:",a)}}async function _L(){if(!$i())return;const s=po(),e=Ca();try{await af(mo(s,k1,e))}catch(n){console.error("Failed to delete FCM token:",n)}}function gL(){return"Notification"in window?Notification.permission:"unsupported"}function o_(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function l_(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}function c_(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function yL(){return l_()&&!c_()?!1:o_()}async function EL(){if(!$i())return{success:!1,token:null,error:"Firebase is not configured"};if(!o_())return{success:!1,token:null,error:"Notifications are not supported in this browser"};if(l_()&&!c_())return{success:!1,token:null,error:"On iOS, you must add this app to your home screen first, then enable notifications"};try{if(await Notification.requestPermission()!=="granted")return{success:!1,token:null,error:"Notification permission was denied"};const e=await I1();if(!e)return{success:!1,token:null,error:"Failed to initialize Firebase Messaging"};const n=await navigator.serviceWorker.ready,a=await lL(e,{vapidKey:R1,serviceWorkerRegistration:n});return a?(await pL(a),{success:!0,token:a}):{success:!1,token:null,error:"Failed to get FCM token"}}catch(s){return console.error("Error requesting notification permission:",s),{success:!1,token:null,error:s instanceof Error?s.message:"Unknown error occurred"}}}async function vL(){try{await _L(),await mL()}catch(s){console.error("Error disabling notifications:",s)}}function TL(s){let e=null;return I1().then(n=>{n&&(e=cL(n,a=>{if(console.log("Foreground message received:",a),s(a),a.notification){const{title:o,body:u}=a.notification;o&&new Notification(o,{body:u||"",icon:"/goal-game/icons/icon-192.png",badge:"/goal-game/icons/icon-192.png",tag:a.data?.eventId||"goal-game-notification"})}}))}),()=>{e&&e()}}function L1(){const s=te(),e=Ca(),n=s.exec("SELECT enabled, default_reminder_minutes, fcm_token, device_id FROM notification_settings WHERE id = 1");if(n.length===0||n[0].values.length===0)return s.run("INSERT OR REPLACE INTO notification_settings (id, enabled, default_reminder_minutes, fcm_token, device_id) VALUES (1, 0, 15, NULL, ?)",[e]),{enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:e};const a=n[0].values[0];return{enabled:!!a[0],defaultReminderMinutes:a[1],fcmToken:a[2],deviceId:a[3]}}async function km(s){const e=te(),n=Ca(),o={...L1(),...s};e.run(`UPDATE notification_settings SET
      enabled = ?,
      default_reminder_minutes = ?,
      fcm_token = ?,
      device_id = ?,
      updated_at = datetime('now')
    WHERE id = 1`,[o.enabled?1:0,o.defaultReminderMinutes,o.fcmToken,n]),await ve()}function j1(){const[s,e]=L.useState({enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:""}),[n,a]=L.useState("default"),[o,u]=L.useState(!1),[h,g]=L.useState(null),E=o_(),_=$i(),S=yL(),x=l_(),w=c_();L.useEffect(()=>{try{const ie=L1();e(ie),a(gL())}catch(ie){console.error("Failed to load notification settings:",ie)}},[]),L.useEffect(()=>!s.enabled||!s.fcmToken?void 0:TL(Ee=>{console.log("Notification received in foreground:",Ee)}),[s.enabled,s.fcmToken]);const B=L.useCallback(async()=>{u(!0),g(null);try{const ie=await EL();return ie.success?(await km({enabled:!0,fcmToken:ie.token}),e(Ee=>({...Ee,enabled:!0,fcmToken:ie.token})),a("granted"),!0):(g(ie.error||"Failed to enable notifications"),!1)}catch(ie){const Ee=ie instanceof Error?ie.message:"Unknown error";return g(Ee),!1}finally{u(!1)}},[]),G=L.useCallback(async()=>{u(!0),g(null);try{await vL(),await km({enabled:!1,fcmToken:null}),e(ie=>({...ie,enabled:!1,fcmToken:null}))}catch(ie){const Ee=ie instanceof Error?ie.message:"Unknown error";g(Ee)}finally{u(!1)}},[]),U=L.useCallback(async ie=>{await km({defaultReminderMinutes:ie}),e(Ee=>({...Ee,defaultReminderMinutes:ie}))},[]),q=L.useCallback(async(ie,Ee,ge,D,A)=>{!s.enabled||!s.fcmToken||await uL(ie,Ee,ge,D,A,s.fcmToken)},[s.enabled,s.fcmToken]),z=L.useCallback(async ie=>{await hL(ie)},[]),H=L.useCallback(async(ie,Ee,ge,D)=>{!s.enabled||!s.fcmToken||await dL(ie,Ee,ge,D,s.fcmToken)},[s.enabled,s.fcmToken]),K=L.useCallback(async ie=>{await fL(ie)},[]);return{settings:s,permissionState:n,isSupported:E,isConfigured:_,canEnable:S,isIOS:x,isStandalone:w,loading:o,error:h,enableNotifications:B,disableNotificationsHandler:G,setDefaultReminderMinutes:U,scheduleEventReminder:q,cancelEventReminder:z,scheduleBuffExpiry:H,cancelBuffExpiry:K}}const bL=[{type:"activate_buffs",title:"Habit Builder",description:"Activate {target} buff(s) today",targetRange:[2,4],xpReward:25},{type:"complete_steps",title:"Step by Step",description:"Complete {target} quest step(s) today",targetRange:[3,7],xpReward:30},{type:"no_debuffs",title:"Clean Slate",description:"Avoid activating any debuffs today",targetRange:[1,1],xpReward:40},{type:"gym_session",title:"Iron Warrior",description:"Complete a gym workout today",targetRange:[1,1],xpReward:35},{type:"early_start",title:"Early Bird",description:"Complete a habit before 8 AM",targetRange:[1,1],xpReward:30},{type:"activate_specific",title:"Wellness Warrior",description:"Activate a health-related buff",targetRange:[1,1],xpReward:20}],VT=50;function Dl(){return new Date().toISOString().split("T")[0]}function qT(s){const e=te(),n=s||Dl(),a=e.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE date = ? ORDER BY id`,[n]);return a.length?a[0].values.map(o=>({id:o[0],date:o[1],quest_type:o[2],title:o[3],description:o[4],target_value:o[5],current_value:o[6],xp_reward:o[7],is_completed:!!o[8],completed_at:o[9]})):[]}function SL(s){const e=te(),n=Dl(),a=e.exec("SELECT id FROM daily_quest_bonus WHERE date = ?",[n]);return a.length>0&&a[0].values.length>0}async function NL(s){const e=te(),n=Dl();e.run("INSERT OR IGNORE INTO daily_quest_bonus (date, claimed_at) VALUES (?, datetime('now'))",[n]),await ve()}async function xL(){const s=te(),e=Dl(),n=qT(e);if(n.length>0)return n;const o=[...bL].sort(()=>Math.random()-.5).slice(0,3);for(const u of o){const h=u.targetRange[0]===u.targetRange[1]?u.targetRange[0]:Math.floor(Math.random()*(u.targetRange[1]-u.targetRange[0]+1))+u.targetRange[0],g=u.description.replace("{target}",h.toString());s.run(`INSERT INTO daily_quests (date, quest_type, title, description, target_value, xp_reward)
       VALUES (?, ?, ?, ?, ?, ?)`,[e,u.type,u.title,g,h,u.xpReward])}return await ve(),qT(e)}async function D1(s,e=1,n){const a=te(),o=n||Dl(),u=a.exec(`SELECT id, current_value, target_value, is_completed FROM daily_quests
     WHERE date = ? AND quest_type = ? AND is_completed = 0`,[o,s]);if(!u.length||!u[0].values.length)return null;const h=u[0].values[0][0],g=u[0].values[0][1],E=u[0].values[0][2],_=g+e,S=_>=E;a.run(`UPDATE daily_quests SET current_value = ?, is_completed = ?, completed_at = ?
     WHERE id = ?`,[_,S?1:0,S?new Date().toISOString():null,h]),await ve();const x=a.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE id = ?`,[h]);if(!x.length)return null;const w=x[0].values[0];return{id:w[0],date:w[1],quest_type:w[2],title:w[3],description:w[4],target_value:w[5],current_value:w[6],xp_reward:w[7],is_completed:!!w[8],completed_at:w[9]}}async function wL(s){const e=te(),n=Dl();(e.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) = ?`,[n])[0]?.values[0]?.[0]||0)===0&&await D1("no_debuffs",1,n)}function AL({grantXP:s}){const[e,n]=L.useState([]),[a,o]=L.useState(!1),[u,h]=L.useState(!0),g=L.useCallback(async()=>{const G=await xL();n(G),o(SL()),h(!1)},[]);L.useEffect(()=>{g()},[g]),L.useEffect(()=>{const U=setInterval(()=>{const q=new Date().toISOString().split("T")[0];e.length>0&&e[0].date!==q&&g()},6e4);return()=>clearInterval(U)},[e,g]);const E=L.useCallback(async(G,U=1)=>{const q=await D1(G,U);return q?.is_completed&&await s(q.xp_reward,`Daily Quest: ${q.title}`,"daily_quest",q.id),await g(),q},[s,g]),_=L.useCallback(async()=>!e.every(U=>U.is_completed)||a?!1:(await NL(),await s(VT,"Daily Quest Bonus: All quests completed!","daily_quest_bonus"),o(!0),!0),[e,a,s]),S=L.useCallback(async()=>{await wL(),await g()},[g]),x=e.every(G=>G.is_completed),w=e.filter(G=>G.is_completed).length,B=e.filter(G=>G.is_completed).reduce((G,U)=>G+U.xp_reward,0);return{quests:e,loading:u,allCompleted:x,completedCount:w,bonusClaimed:a,bonusXp:VT,totalXpEarned:B,refresh:g,updateProgress:E,claimBonus:_,checkNoDebuffs:S}}const O1=[{days:3,title:"Getting Started",bonusXp:15,icon:""},{days:7,title:"One Week Strong",bonusXp:50,icon:""},{days:14,title:"Two Week Warrior",bonusXp:75,icon:""},{days:21,title:"Habit Forming",bonusXp:100,icon:""},{days:30,title:"Monthly Master",bonusXp:150,icon:""},{days:60,title:"Two Month Champion",bonusXp:250,icon:""},{days:90,title:"Quarterly Legend",bonusXp:400,icon:""},{days:180,title:"Half Year Hero",bonusXp:750,icon:""},{days:365,title:"Annual Achiever",bonusXp:1500,icon:""}];function RL(s){return O1.filter(e=>e.days<=s)}function CL(s){const e=RL(s);return e.length>0?e[e.length-1]:null}function M1(){return new Date().toISOString().split("T")[0]}function IL(){const s=new Date;return s.setDate(s.getDate()-1),s.toISOString().split("T")[0]}function U1(s){const e=te(),n=M1(),a=IL(),o=e.exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-400 days')
     ORDER BY d DESC`,[s]),u=o.length?o[0].values.map(q=>q[0]):[],h=e.exec(`SELECT freeze_date FROM streak_freezes
     WHERE buff_definition_id = ? AND freeze_date >= date('now', '-400 days')`,[s]),g=h.length?h[0].values.map(q=>q[0]):[],E=e.exec(`SELECT used_date FROM streak_shield_uses
     WHERE buff_definition_id = ? AND used_date >= date('now', '-400 days')`,[s]),_=E.length?E[0].values.map(q=>q[0]):[];let S=0;const x=new Set([...u,...g,..._]);let w=n;if(!x.has(n))if(x.has(a))w=a;else if(g.includes(n))w=n;else return{buffDefinitionId:s,currentStreak:0,longestStreak:BT(s),lastActivatedDate:u[0]||null,isAtRisk:u.length>0&&u[0]===a,shieldActive:!1};for(;x.has(w);){S++;const q=new Date(w+"T12:00:00");q.setDate(q.getDate()-1),w=q.toISOString().split("T")[0]}const B=!u.includes(n)&&!g.includes(n)&&u.includes(a),G=_.includes(n),U=BT(s);return S>U&&kL(s,S),{buffDefinitionId:s,currentStreak:S,longestStreak:Math.max(S,U),lastActivatedDate:u[0]||null,isAtRisk:B,shieldActive:G}}function BT(s){const n=te().exec("SELECT longest_streak FROM streak_records WHERE buff_definition_id = ?",[s]);return n.length&&n[0].values.length?n[0].values[0][0]:0}async function kL(s,e){te().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, updated_at)
     VALUES (?, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       longest_streak = MAX(longest_streak, excluded.longest_streak),
       updated_at = datetime('now')`,[s,e]),await ve()}function V1(){const e=te().exec("SELECT SUM(quantity) FROM streak_shields");return e.length&&e[0].values.length&&e[0].values[0][0]||0}async function LL(s){te().run("INSERT INTO streak_shields (quantity) VALUES (?)",[s]),await ve()}async function jL(s){const e=te(),n=M1();if(V1()<=0)return!1;const o=e.exec("SELECT id FROM streak_shield_uses WHERE buff_definition_id = ? AND used_date = ?",[s,n]);if(o.length&&o[0].values.length)return!1;const u=U1(s);return e.run(`UPDATE streak_shields SET quantity = quantity - 1
     WHERE id = (SELECT id FROM streak_shields WHERE quantity > 0 ORDER BY earned_at LIMIT 1)`),e.run(`INSERT INTO streak_shield_uses (buff_definition_id, used_date, streak_saved)
     VALUES (?, ?, ?)`,[s,n,u.currentStreak]),e.run("DELETE FROM streak_shields WHERE quantity <= 0"),await ve(),!0}function DL(s){const n=te().exec(`SELECT id, buff_definition_id, freeze_date, reason, created_at
     FROM streak_freezes WHERE buff_definition_id = ? AND freeze_date >= date('now')
     ORDER BY freeze_date`,[s]);return n.length?n[0].values.map(a=>({id:a[0],buff_definition_id:a[1],freeze_date:a[2],reason:a[3],created_at:a[4]})):[]}async function OL(s,e,n){te().run(`INSERT OR IGNORE INTO streak_freezes (buff_definition_id, freeze_date, reason)
     VALUES (?, ?, ?)`,[s,e,n||null]),await ve()}async function ML(s){te().run("DELETE FROM streak_freezes WHERE id = ?",[s]),await ve()}function UL(s){const n=te().exec("SELECT last_milestone_claimed FROM streak_records WHERE buff_definition_id = ?",[s]);return n.length&&n[0].values.length?n[0].values[0][0]:0}async function VL(s,e){te().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, last_milestone_claimed, updated_at)
     VALUES (?, 0, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       last_milestone_claimed = ?,
       updated_at = datetime('now')`,[s,e,e]),await ve()}function PT(s,e){const n=UL(s);return O1.filter(a=>a.days<=e&&a.days>n)}function qL(){const e=te().exec("SELECT DISTINCT definition_id FROM buff_log WHERE definition_id IN (SELECT id FROM buff_definitions WHERE type = ?)",["buff"]),n=new Map;if(!e.length)return n;for(const a of e[0].values){const o=a[0];n.set(o,U1(o))}return n}function BL({grantXP:s}){const[e,n]=L.useState(new Map),[a,o]=L.useState(0),[u,h]=L.useState(!0),g=L.useCallback(()=>{n(qL()),o(V1()),h(!1)},[]);L.useEffect(()=>{g()},[g]);const E=L.useCallback(q=>e.get(q)||{buffDefinitionId:q,currentStreak:0,longestStreak:0,lastActivatedDate:null,isAtRisk:!1,shieldActive:!1},[e]),_=L.useCallback(async q=>{const z=await jL(q);return z&&g(),z},[g]),S=L.useCallback(async(q,z,H)=>{await OL(q,z,H),g()},[g]),x=L.useCallback(async q=>{await ML(q),g()},[g]),w=L.useCallback(q=>DL(q),[]),B=L.useCallback(async q=>{const z=E(q),H=PT(q,z.currentStreak);for(const K of H)await s(K.bonusXp,`Streak Milestone: ${K.title} (${K.days} days)`,"streak_milestone",q),await VL(q,K.days);return g(),H},[E,s,g]),G=L.useCallback(q=>{const z=E(q);return PT(q,z.currentStreak)},[E]),U=L.useCallback(async q=>{await LL(q),g()},[g]);return{streakInfos:e,shieldCount:a,loading:u,refresh:g,getStreakForBuff:E,useShield:_,addFreeze:S,removeFreeze:x,getFreezes:w,claimMilestones:B,getUnclaimedMilestones:G,addShields:U}}const up=[{type:"procrastination_dragon",name:"Procrastination Dragon",description:"A lazy beast that feeds on delayed tasks and broken promises.",icon:"",hpRange:[400,500],xpReward:200,bonusShields:1,difficulty:"medium"},{type:"distraction_demon",name:"Distraction Demon",description:"A cunning fiend that lures you away from your goals with endless diversions.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"},{type:"sloth_specter",name:"Sloth Specter",description:"A ghostly presence that drains your energy and willpower.",icon:"",hpRange:[300,400],xpReward:150,bonusShields:0,difficulty:"easy"},{type:"chaos_chimera",name:"Chaos Chimera",description:"A multi-headed monster representing disorganization and scattered focus.",icon:"",hpRange:[500,600],xpReward:250,bonusShields:2,difficulty:"hard"},{type:"anxiety_wyrm",name:"Anxiety Wyrm",description:"A serpentine creature that coils around your mind with worry and doubt.",icon:"",hpRange:[450,550],xpReward:225,bonusShields:1,difficulty:"hard"},{type:"comfort_zone_golem",name:"Comfort Zone Golem",description:"A stubborn construct that blocks the path to growth and change.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"}],ur={step_completed:10,buff_activated:25,quest_completed:50,goal_completed:100,daily_quest_completed:15,focus_session:20,routine_completed:30},dp={debuff_activated:20,step_missed:15};function Ld(s=new Date){const e=new Date(s),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function PL(s){const e=new Date(s+"T12:00:00");return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}function FT(){const s=te(),e=Ld(),n=s.exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE week_start = ?`,[e]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return B1(a)}function q1(s){const n=te().exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE id = ?`,[s]);return!n.length||!n[0].values.length?null:B1(n[0].values[0])}async function FL(){const s=te(),e=Ld(),n=FT();if(n)return n;const a=up[Math.floor(Math.random()*up.length)],o=Math.floor(Math.random()*(a.hpRange[1]-a.hpRange[0]+1))+a.hpRange[0];return s.run(`INSERT INTO weekly_boss (week_start, boss_type, name, description, icon, max_hp, current_hp, xp_reward, bonus_shields)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,a.type,a.name,a.description,a.icon,o,o,a.xpReward,a.bonusShields]),await ve(),FT()}async function GL(s,e,n,a){const o=te(),u=q1(s);if(!u||u.is_defeated)return{newHp:u?.current_hp||0,isDefeated:u?.is_defeated||!1};const h=Math.max(0,u.current_hp-n),g=h===0;return o.run(`UPDATE weekly_boss SET current_hp = ?, is_defeated = ?, defeated_at = ?
     WHERE id = ?`,[h,g?1:0,g?new Date().toISOString():null,s]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[s,e,n,a||null]),await ve(),{newHp:h,isDefeated:g}}async function HL(s,e,n,a){const o=te(),u=q1(s);if(!u||u.is_defeated)return{newHp:u?.current_hp||0};const h=Math.min(u.max_hp,u.current_hp+n);return o.run("UPDATE weekly_boss SET current_hp = ? WHERE id = ?",[h,s]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[s,e,-n,a||null]),await ve(),{newHp:h}}function zL(){const e=te().exec("SELECT COUNT(*) FROM weekly_boss WHERE is_defeated = 1");return e.length&&e[0].values.length?e[0].values[0][0]:0}function B1(s){return{id:s[0],week_start:s[1],boss_type:s[2],name:s[3],description:s[4],icon:s[5],max_hp:s[6],current_hp:s[7],is_defeated:!!s[8],defeated_at:s[9],xp_reward:s[10],bonus_shields:s[11],created_at:s[12]}}function XL({grantXP:s,addShields:e}){const[n,a]=L.useState(null),[o,u]=L.useState(!0),[h,g]=L.useState(!1),E=L.useCallback(async()=>{const z=await FL();a(z),u(!1)},[]);L.useEffect(()=>{E()},[E]),L.useEffect(()=>{const H=setInterval(()=>{const K=Ld();n&&n.week_start!==K&&E()},6e4);return()=>clearInterval(H)},[n,E]);const _=L.useCallback(async(z,H)=>{if(!n||n.is_defeated)return;const K=ur[z],ie=await GL(n.id,z,K,H);return a(Ee=>Ee?{...Ee,current_hp:ie.newHp,is_defeated:ie.isDefeated}:null),ie.isDefeated&&!n.is_defeated&&(g(!0),await s(n.xp_reward,`Defeated ${n.name}!`,"boss",n.id),n.bonus_shields>0&&e&&await e(n.bonus_shields)),ie},[n,s,e]),S=L.useCallback(async(z,H)=>{if(!n||n.is_defeated)return;const K=dp[z],ie=await HL(n.id,z,K,H);return a(Ee=>Ee?{...Ee,current_hp:ie.newHp}:null),ie},[n]),x=L.useCallback(()=>{g(!1)},[]),w=n?.week_start||Ld(),B=PL(w),G=n?Math.round(n.current_hp/n.max_hp*100):100,U=n?n.max_hp-n.current_hp:0,q=zL();return{boss:n,loading:o,justDefeated:h,weekStart:w,weekEnd:B,hpPercentage:G,damageDealt:U,totalDefeated:q,refresh:E,dealDamage:_,healBoss:S,dismissDefeatNotification:x}}function $L(){const n=te().exec(`
    SELECT
      ad.id, ad.key, ad.name, ad.description, ad.category, ad.icon, ad.xp_reward,
      ad.requirement_type, ad.requirement_value, ad.requirement_source, ad.sort_order, ad.is_hidden,
      au.unlocked_at,
      COALESCE(ap.current_value, 0) as current_value
    FROM achievement_definitions ad
    LEFT JOIN achievement_unlocks au ON ad.id = au.definition_id
    LEFT JOIN achievement_progress ap ON ad.id = ap.definition_id
    ORDER BY ad.category, ad.sort_order
  `);return n.length?n[0].values.map(a=>{const o=a[8],u=a[13],h=a[12];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:o,requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11],unlocked:h!==null,unlocked_at:h,current_value:u,progress_percent:Math.min(100,Math.round(u/o*100))}}):[]}async function YL(s,e=1){const n=te(),a=n.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ?`,[s]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],E=n.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);if(E.length&&E[0].values.length)continue;const _=n.exec("SELECT current_value FROM achievement_progress WHERE definition_id = ?",[h]),x=(_.length&&_[0].values.length?_[0].values[0][0]:0)+e;n.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,x]),x>=g&&o.push(h)}return await ve(),o}async function QL(s,e){const n=te(),a=n.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ? AND requirement_type = 'threshold'`,[s]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],E=n.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);E.length&&E[0].values.length||(n.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,e]),e>=g&&o.push(h))}return await ve(),o}async function KL(s){const e=te(),n=e.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[s]);return n.length&&n[0].values.length?!1:(e.run("INSERT INTO achievement_unlocks (definition_id, unlocked_at) VALUES (?, datetime('now'))",[s]),await ve(),!0)}function WL(s){const n=te().exec(`SELECT id, key, name, description, category, icon, xp_reward,
     requirement_type, requirement_value, requirement_source, sort_order, is_hidden
     FROM achievement_definitions WHERE id = ?`,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:a[8],requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11]}}function JL(){const s=te(),e=s.exec("SELECT COUNT(*), SUM(xp_reward) FROM achievement_definitions"),n=e.length?e[0].values[0][0]:0,a=e.length&&e[0].values[0][1]||0,o=s.exec(`
    SELECT COUNT(*), COALESCE(SUM(ad.xp_reward), 0)
    FROM achievement_unlocks au
    JOIN achievement_definitions ad ON au.definition_id = ad.id
  `),u=o.length?o[0].values[0][0]:0,h=o.length?o[0].values[0][1]:0;return{total:n,unlocked:u,totalXp:a,earnedXp:h}}function ZL({grantXP:s}){const[e,n]=L.useState([]),[a,o]=L.useState({total:0,unlocked:0,totalXp:0,earnedXp:0}),[u,h]=L.useState([]),[g,E]=L.useState(!0),_=L.useCallback(()=>{n($L()),o(JL()),E(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async q=>{const z=[];for(const H of q)if(await KL(H)){const ie=WL(H);ie&&(await s(ie.xp_reward,`Achievement: ${ie.name}`,"achievement",H),z.push({achievement:ie,xpAwarded:ie.xp_reward}))}return z.length>0&&(h(H=>[...H,...z]),_()),z},[s,_]),x=L.useCallback(async(q,z=1)=>{const H=await YL(q,z);H.length>0&&await S(H),_()},[S,_]),w=L.useCallback(async(q,z)=>{const H=await QL(q,z);H.length>0&&await S(H),_()},[S,_]),B=L.useCallback(q=>{h(z=>z.filter((H,K)=>K!==q))},[]),G=L.useCallback(()=>{h([])},[]),U=L.useCallback(q=>e.filter(z=>z.category===q),[e]);return{achievements:e,stats:a,loading:g,pendingUnlocks:u,refresh:_,incrementProgress:x,checkThreshold:w,dismissUnlock:B,dismissAllUnlocks:G,getAchievementsByCategory:U}}function oo(){const e=te().exec("SELECT id, current_energy, max_energy, last_regen_at, bonus_energy FROM energy_state WHERE id = 1");if(!e.length||!e[0].values.length)return{id:1,current_energy:fl,max_energy:fl,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19),bonus_energy:0};const n=e[0].values[0];return{id:n[0],current_energy:n[1],max_energy:n[2],last_regen_at:n[3],bonus_energy:n[4]}}async function lf(s,e,n,a=null){const o=te(),u=oo(),h=u.current_energy,g=u.max_energy+u.bonus_energy,E=Math.max(0,Math.min(g,u.current_energy+s));return o.run("UPDATE energy_state SET current_energy = ?, last_regen_at = datetime('now') WHERE id = 1",[E]),o.run(`INSERT INTO energy_log (amount, reason, source_type, source_id, energy_before, energy_after)
     VALUES (?, ?, ?, ?, ?, ?)`,[s,e,n,a,h,E]),await ve(),{...u,current_energy:E,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19)}}async function ej(s,e=null){const n=u_(s),a=oo();return a.current_energy<n?{success:!1,newState:a,cost:n}:{success:!0,newState:await lf(-n,`Spent on ${s.replace(/_/g," ")}`,s,e),cost:n}}function tj(s){const e=u_(s);return oo().current_energy>=e}function u_(s){const n=te().exec("SELECT base_cost FROM energy_costs WHERE action_type = ?",[s]);return!n.length||!n[0].values.length?0:n[0].values[0][0]}async function nj(){const s=te(),e=oo(),n=e.max_energy+e.bonus_energy;if(e.current_energy>=n)return s.run("UPDATE energy_state SET last_regen_at = datetime('now') WHERE id = 1"),await ve(),{regenerated:0,newState:e};const a=new Date(e.last_regen_at+"Z"),u=(new Date().getTime()-a.getTime())/(1e3*60*60),h=Math.floor(u*ib);if(h<=0)return{regenerated:0,newState:e};const E=Math.min(n,e.current_energy+h)-e.current_energy;if(E>0){const _=await lf(E,"Natural regeneration","regen");return{regenerated:E,newState:_}}return{regenerated:0,newState:e}}async function sj(){const s=oo(),n=s.max_energy+s.bonus_energy-s.current_energy;return n>0?await lf(n,"Full energy restore","restore"):s}function ij(){const[s,e]=L.useState(()=>oo()),[n,a]=L.useState(!0),o=L.useCallback(()=>{e(oo()),a(!1)},[]);L.useEffect(()=>{o()},[o]),L.useEffect(()=>{const U=async()=>{const{regenerated:z,newState:H}=await nj();z>0&&e(H)};U();const q=setInterval(U,6e4);return()=>clearInterval(q)},[]);const u=L.useCallback(async(U,q=null)=>{const z=await ej(U,q);return z.success&&e(z.newState),z},[]),h=L.useCallback(async(U,q)=>{const z=await lf(U,q,"bonus");return e(z),z},[]),g=L.useCallback(async()=>{const U=await sj();return e(U),U},[]),E=L.useCallback(U=>tj(U),[]),_=L.useCallback(U=>u_(U),[]),S=L.useCallback(()=>{const U=[];return s.current_energy<=Vm?U.push({active:!0,name:hm.name,icon:hm.icon,effects:hm.effects}):s.current_energy<=Um&&U.push({active:!0,name:fm.name,icon:fm.icon,effects:fm.effects}),U},[s.current_energy]),x=L.useCallback(()=>{const U=S(),q={};for(const z of U)for(const[H,K]of Object.entries(z.effects))q[H]=(q[H]||0)+K;return q},[S]),w=Math.round(s.current_energy/(s.max_energy+s.bonus_energy)*100),B=s.current_energy<=Um,G=s.current_energy<=Vm;return{state:s,loading:n,refresh:o,spendEnergy:u,addEnergy:h,restoreFullEnergy:g,canAfford:E,getActionCost:_,getEnergyDebuffs:S,getEnergyStatPenalties:x,percentage:w,isLow:B,isEmpty:G}}function fp(){const e=te().exec(`
    SELECT id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled
    FROM focus_settings WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,...zs};const n=e[0].values[0];return{id:n[0],work_duration:n[1],short_break:n[2],long_break:n[3],sessions_before_long_break:n[4],auto_start_breaks:!!n[5],sound_enabled:!!n[6]}}async function aj(s){const e=te(),a={...fp(),...s};return e.run(`
    UPDATE focus_settings SET
      work_duration = ?,
      short_break = ?,
      long_break = ?,
      sessions_before_long_break = ?,
      auto_start_breaks = ?,
      sound_enabled = ?
    WHERE id = 1
  `,[a.work_duration,a.short_break,a.long_break,a.sessions_before_long_break,a.auto_start_breaks?1:0,a.sound_enabled?1:0]),await ve(),a}function hp(){const e=te().exec(`
    SELECT id, total_sessions, total_minutes, longest_streak, current_streak, today_sessions, today_date
    FROM focus_stats WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,total_sessions:0,total_minutes:0,longest_streak:0,current_streak:0,today_sessions:0,today_date:new Date().toISOString().split("T")[0]};const n=e[0].values[0];return{id:n[0],total_sessions:n[1],total_minutes:n[2],longest_streak:n[3],current_streak:n[4],today_sessions:n[5],today_date:n[6]}}async function rj(s,e=null,n=null){const a=te();a.run(`
    INSERT INTO focus_sessions (duration_minutes, linked_step_id, linked_quest_id, status)
    VALUES (?, ?, ?, 'active')
  `,[s,e,n]);const u=a.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ve(),d_(u)}async function oj(s,e,n=""){te().run(`
    UPDATE focus_sessions SET
      status = 'completed',
      completed_at = datetime('now'),
      xp_earned = ?,
      notes = ?
    WHERE id = ? AND status = 'active'
  `,[e,n,s]);const o=d_(s);return o&&await uj(o.duration_minutes),await ve(),o}async function lj(s){te().run("UPDATE focus_sessions SET status = 'cancelled', completed_at = datetime('now') WHERE id = ?",[s]),await ve()}function d_(s){const n=te().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE id = ?
  `,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return f_(a)}function GT(){const e=te().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE status = 'active' ORDER BY started_at DESC LIMIT 1
  `);return!e.length||!e[0].values.length?null:f_(e[0].values[0])}function cj(s=10){const n=te().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions ORDER BY started_at DESC LIMIT ?
  `,[s]);return n.length?n[0].values.map(f_):[]}async function uj(s){const e=te(),n=hp(),a=new Date().toISOString().split("T")[0],u=n.today_date===a?n.today_sessions+1:1,h=n.current_streak+1,g=Math.max(n.longest_streak,h);e.run(`
    UPDATE focus_stats SET
      total_sessions = total_sessions + 1,
      total_minutes = total_minutes + ?,
      current_streak = ?,
      longest_streak = ?,
      today_sessions = ?,
      today_date = ?
    WHERE id = 1
  `,[s,h,g,u,a]),await ve()}function f_(s){return{id:s[0],duration_minutes:s[1],started_at:s[2],completed_at:s[3],status:s[4],xp_earned:s[5],linked_step_id:s[6],linked_quest_id:s[7],break_taken:!!s[8],notes:s[9]}}function dj({grantXP:s,onSessionComplete:e}){const[n,a]=L.useState(()=>fp()),[o,u]=L.useState(()=>hp()),[h,g]=L.useState(()=>GT()),[E,_]=L.useState([]),[S,x]=L.useState({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:0}),w=L.useRef(null),B=L.useRef(h?.id||null),G=L.useCallback(()=>{a(fp()),u(hp()),g(GT()),_(cj(10))},[]);L.useEffect(()=>{G()},[G]),L.useEffect(()=>{if(S.isRunning&&S.timeRemaining>0)return w.current=setInterval(()=>{x(A=>({...A,timeRemaining:Math.max(0,A.timeRemaining-1)}))},1e3),()=>{w.current&&clearInterval(w.current)}},[S.isRunning]),L.useEffect(()=>{S.timeRemaining===0&&S.isRunning&&U()},[S.timeRemaining,S.isRunning]);const U=async()=>{if(S.phase==="work"&&B.current){const A=d_(B.current);let j=rx;A?.linked_step_id&&(j+=ox);const V=S.sessionsCompleted+1;V%4===0&&(j+=lx),await oj(B.current,j),await s(j,"Focus session completed","focus",B.current),e?.(),n.sound_enabled&&HT();const M=V%n.sessions_before_long_break===0,O=M?"long_break":"short_break",k=M?n.long_break:n.short_break;x({phase:n.auto_start_breaks?O:"idle",timeRemaining:k*60,isRunning:n.auto_start_breaks,sessionsCompleted:V}),B.current=null,G()}else(S.phase==="short_break"||S.phase==="long_break")&&(n.sound_enabled&&HT(),x({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}))},q=L.useCallback(async(A=null,j=null)=>{const V=await rj(n.work_duration,A,j);B.current=V.id,g(V),x({phase:"work",timeRemaining:n.work_duration*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[n.work_duration,S.sessionsCompleted]),z=L.useCallback((A=!1)=>{const j=A?n.long_break:n.short_break;x({phase:A?"long_break":"short_break",timeRemaining:j*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[n.short_break,n.long_break,S.sessionsCompleted]),H=L.useCallback(()=>{x(A=>({...A,isRunning:!1}))},[]),K=L.useCallback(()=>{x(A=>({...A,isRunning:!0}))},[]),ie=L.useCallback(async()=>{w.current&&clearInterval(w.current),B.current&&S.phase==="work"&&await lj(B.current),B.current=null,g(null),x({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}),G()},[n.work_duration,S.phase,S.sessionsCompleted,G]),Ee=L.useCallback(()=>{(S.phase==="short_break"||S.phase==="long_break")&&x({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted})},[n.work_duration,S.phase,S.sessionsCompleted]),ge=L.useCallback(async A=>{const j=await aj(A);a(j),S.phase==="idle"&&x(V=>({...V,timeRemaining:(A.work_duration||V.timeRemaining/60)*60}))},[S.phase]);return{settings:n,stats:o,timerState:S,currentSession:h,recentSessions:E,refresh:G,startWork:q,startBreak:z,pause:H,resume:K,stop:ie,skipBreak:Ee,updateSettings:ge,formatTime:A=>{const j=Math.floor(A/60),V=A%60;return`${j.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`}}}function HT(){try{const s=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdGCdqIyYY19lf6O3qJyAa3B1gqKvpZNyYW50iaS7s5yBaWx3g6C4t5uGc2l0gJy0t5qGcWl0gJyzrZOAbWp0gJyzrZaEc2p2gJixsJmGeWt3gJivsJmGd2x3gZitq5OAbWp0f5asrJaAdmp1f5aqq5aAdmp1f5aqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZOAdGlzfpKppZKAc2hyfpCmpZCAbGZxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY6kpJCAa2RvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoyjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI4=");s.volume=.5,s.play().catch(()=>{})}catch{}}const fj=25,zT=10;function hj(){const e=te().exec(`
    SELECT id, name, type, description, bonus_xp, is_active, created_at
    FROM routine_definitions WHERE is_active = 1 ORDER BY type, name
  `);return e.length?e[0].values.map(Sj):[]}function mj(){return hj().map(e=>{const n=h_(e.id),a=jd(e.id),o=Dd(e.id);return{...e,steps:n,streak:a||void 0,todayLog:o||void 0}})}function h_(s){const n=te().exec(`
    SELECT id, routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional
    FROM routine_steps WHERE routine_id = ? ORDER BY sort_order
  `,[s]);return n.length?n[0].values.map(Nj):[]}function jd(s){const n=te().exec(`
    SELECT id, routine_id, current_streak, longest_streak, last_completed_date
    FROM routine_streaks WHERE routine_id = ?
  `,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],routine_id:a[1],current_streak:a[2],longest_streak:a[3],last_completed_date:a[4]}}function Dd(s){const n=te().exec(`
    SELECT id, routine_id, date, started_at, completed_at, is_completed, steps_completed, total_steps, xp_earned
    FROM routine_logs WHERE routine_id = ? AND date = date('now')
  `,[s]);return!n.length||!n[0].values.length?null:xj(n[0].values[0])}function pj(s){const n=te().exec(`
    SELECT id, routine_log_id, step_id, completed_at, is_completed, skipped
    FROM routine_step_logs WHERE routine_log_id = ?
  `,[s]);return n.length?n[0].values.map(a=>({id:a[0],routine_log_id:a[1],step_id:a[2],completed_at:a[3],is_completed:!!a[4],skipped:!!a[5]})):[]}function P1(s){const e=h_(s),n=Dd(s);if(!n)return e.map(u=>({...u,is_completed:!1,skipped:!1,completed_at:null}));const a=pj(n.id),o=new Map(a.map(u=>[u.step_id,u]));return e.map(u=>{const h=o.get(u.id);return{...u,is_completed:h?.is_completed||!1,skipped:h?.skipped||!1,completed_at:h?.completed_at||null}})}async function _j(s,e,n,a){const o=te();o.run("INSERT INTO routine_definitions (name, type, description, bonus_xp) VALUES (?, ?, ?, ?)",[s,e,n,a]);const h=o.exec("SELECT last_insert_rowid()")[0].values[0][0];return o.run("INSERT INTO routine_streaks (routine_id) VALUES (?)",[h]),await ve(),h}async function gj(s,e,n,a,o,u){const h=te(),E=h.exec("SELECT COALESCE(MAX(sort_order), -1) + 1 FROM routine_steps WHERE routine_id = ?",[s])[0].values[0][0];h.run(`INSERT INTO routine_steps (routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional)
     VALUES (?, ?, ?, ?, ?, ?, ?)`,[s,e,n,a,E,o,u?1:0]);const _=h.exec("SELECT last_insert_rowid()");return await ve(),_[0].values[0][0]}async function yj(s){te().run("DELETE FROM routine_steps WHERE id = ?",[s]),await ve()}async function Ej(s){te().run("DELETE FROM routine_definitions WHERE id = ?",[s]),await ve()}async function vj(s){const e=te(),n=h_(s);let a=Dd(s);if(!a){e.run(`INSERT INTO routine_logs (routine_id, date, started_at, total_steps)
       VALUES (?, date('now'), datetime('now'), ?)`,[s,n.length]);const u=e.exec("SELECT last_insert_rowid()")[0].values[0][0];for(const h of n)e.run("INSERT INTO routine_step_logs (routine_log_id, step_id) VALUES (?, ?)",[u,h.id]);await ve(),a=Dd(s)}return a}async function Tj(s,e){const n=te();n.run(`UPDATE routine_step_logs SET is_completed = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[s,e]);const o=n.exec("SELECT COUNT(*) FROM routine_step_logs WHERE routine_log_id = ? AND is_completed = 1",[s])[0].values[0][0];n.run("UPDATE routine_logs SET steps_completed = ? WHERE id = ?",[o,s]),await ve()}async function bj(s,e){te().run(`UPDATE routine_step_logs SET skipped = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[s,e]),await ve()}async function XT(s,e){const n=te(),a=new Date().toISOString().split("T")[0];n.run(`UPDATE routine_logs SET is_completed = 1, completed_at = datetime('now'), xp_earned = ?
     WHERE routine_id = ? AND date = date('now')`,[e,s]);const o=jd(s);if(o){const u=new Date(Date.now()-864e5).toISOString().split("T")[0],g=o.last_completed_date===u?o.current_streak+1:1,E=Math.max(o.longest_streak,g);n.run(`UPDATE routine_streaks SET current_streak = ?, longest_streak = ?, last_completed_date = ?
       WHERE routine_id = ?`,[g,E,a,s])}await ve()}function $T(s){return P1(s).filter(a=>!a.is_optional).every(a=>a.is_completed||a.skipped)}function Sj(s){return{id:s[0],name:s[1],type:s[2],description:s[3],bonus_xp:s[4],is_active:!!s[5],created_at:s[6]}}function Nj(s){return{id:s[0],routine_id:s[1],title:s[2],description:s[3],linked_buff_id:s[4],sort_order:s[5],duration_minutes:s[6],is_optional:!!s[7]}}function xj(s){return{id:s[0],routine_id:s[1],date:s[2],started_at:s[3],completed_at:s[4],is_completed:!!s[5],steps_completed:s[6],total_steps:s[7],xp_earned:s[8]}}function wj({grantXP:s,onRoutineComplete:e}){const[n,a]=L.useState([]),[o,u]=L.useState(!0),h=L.useCallback(()=>{a(mj()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async(H,K,ie,Ee=fj)=>{await _j(H,K,ie,Ee),h()},[h]),E=L.useCallback(async(H,K,ie,Ee,ge,D)=>{await gj(H,K,ie,Ee,ge,D),h()},[h]),_=L.useCallback(async H=>{await yj(H),h()},[h]),S=L.useCallback(async H=>{await Ej(H),h()},[h]),x=L.useCallback(async H=>{await vj(H),h()},[h]),w=L.useCallback(async(H,K)=>{const ie=n.find(Ee=>Ee.id===H);if(ie?.todayLog){if(await Tj(ie.todayLog.id,K),$T(H)){let Ee=ie.bonus_xp;const ge=jd(H);ge&&ge.current_streak>0&&ge.current_streak%7===0&&(Ee+=zT),await XT(H,Ee),await s(Ee,`Completed routine: ${ie.name}`,"routine",H),e?.(H)}h()}},[n,s,e,h]),B=L.useCallback(async(H,K)=>{const ie=n.find(Ee=>Ee.id===H);if(ie?.todayLog){if(await bj(ie.todayLog.id,K),$T(H)){let Ee=ie.bonus_xp;const ge=jd(H);ge&&ge.current_streak>0&&ge.current_streak%7===0&&(Ee+=zT),await XT(H,Ee),await s(Ee,`Completed routine: ${ie.name}`,"routine",H),e?.(H)}h()}},[n,s,e,h]),G=L.useCallback(H=>P1(H),[]),U=L.useCallback(()=>n.filter(H=>H.type==="morning"),[n]),q=L.useCallback(()=>n.filter(H=>H.type==="evening"),[n]),z=L.useCallback(()=>n.filter(H=>H.type==="custom"),[n]);return{routines:n,loading:o,refresh:h,createRoutine:g,addStep:E,deleteStep:_,deleteRoutine:S,startRoutine:x,completeStep:w,skipStep:B,getStepsWithStatus:G,getMorningRoutines:U,getEveningRoutines:q,getCustomRoutines:z}}function Aj(){const e=te().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE is_active = 1 ORDER BY name
  `);return e.length?e[0].values.map(G1):[]}function Rj(s){const n=te().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:G1(n[0].values[0])}function F1(){const s=te();return Aj().map(n=>{const a=JSON.parse(n.required_buffs),o=s.exec(`SELECT name FROM buff_definitions WHERE id IN (${a.join(",")||"0"})`),u=o.length?o[0].values.map(G=>G[0]):[],h=s.exec(`SELECT DISTINCT definition_id FROM buff_log
       WHERE is_active = 1
       AND definition_id IN (${a.join(",")||"0"})
       AND activated_at >= datetime('now', '-${n.time_window_hours} hours')`),g=h.length?h[0].values.map(G=>G[0]):[],E=s.exec(`SELECT activated_at FROM combo_activations
       WHERE combo_id = ? ORDER BY activated_at DESC LIMIT 1`,[n.id]),_=E.length&&E[0].values.length?E[0].values[0][0]:null,S=s.exec(`SELECT 1 FROM combo_activations
       WHERE combo_id = ? AND date(activated_at) = date('now')`,[n.id]),x=S.length&&S[0].values.length>0,w=a.length>0?Math.round(g.length/a.length*100):0,B=g.length===a.length&&!x;return{...n,required_buff_names:u,active_buff_ids:g,progress:w,is_ready:B,last_activated:_}})}function Cj(){return F1().filter(s=>s.is_ready)}async function YT(s,e){const n=te();if(!Rj(s))return null;n.run("INSERT INTO combo_activations (combo_id, buffs_used) VALUES (?, ?)",[s,JSON.stringify(e)]);const u=n.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ve(),Ij(u)}function Ij(s){const n=te().exec("SELECT id, combo_id, activated_at, buffs_used FROM combo_activations WHERE id = ?",[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],combo_id:a[1],activated_at:a[2],buffs_used:a[3]}}async function kj(s,e,n,a,o,u){const h=te();h.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp)
     VALUES (?, ?, ?, ?, ?, ?)`,[s,e,n,JSON.stringify(a),o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ve(),g[0].values[0][0]}async function Lj(s){te().run("DELETE FROM combo_definitions WHERE id = ?",[s]),await ve()}function G1(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],required_buffs:s[4],time_window_hours:s[5],bonus_xp:s[6],is_active:!!s[7]}}function jj({grantXP:s,onComboActivated:e}){const[n,a]=L.useState([]),[o,u]=L.useState(!0),h=L.useCallback(()=>{a(F1()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async()=>{const B=Cj(),G=[];for(const U of B)await YT(U.id,U.active_buff_ids),await s(U.bonus_xp,`Combo activated: ${U.name}`,"combo",U.id),G.push(U),e?.(U);return G.length>0&&h(),G},[s,e,h]),E=L.useCallback(async B=>{const G=n.find(U=>U.id===B);return!G||!G.is_ready?null:(await YT(B,G.active_buff_ids),await s(G.bonus_xp,`Combo activated: ${G.name}`,"combo",B),e?.(G),h(),G)},[n,s,e,h]),_=L.useCallback(async(B,G,U,q,z,H)=>{await kj(B,G,U,q,z,H),h()},[h]),S=L.useCallback(async B=>{await Lj(B),h()},[h]),x=L.useCallback(()=>n.filter(B=>B.is_ready),[n]),w=L.useCallback(()=>n.filter(B=>B.progress>0&&B.progress<100&&!B.is_ready),[n]);return{combos:n,loading:o,refresh:h,checkAndActivateCombos:g,claimCombo:E,createCombo:_,deleteCombo:S,getReadyCombos:x,getInProgressCombos:w}}const hl=100,Dj={steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0};function cf(s=new Date){const e=new Date(s),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function mp(){const s=te(),e=cf(),n=s.exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews WHERE week_start = ?`,[e]);return!n.length||!n[0].values.length?null:H1(n[0].values[0])}function Oj(s=10){const n=te().exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews ORDER BY week_start DESC LIMIT ?`,[s]);return n.length?n[0].values.map(H1):[]}async function Mj(){const s=te(),e=cf(),n=new Date(e);n.setDate(n.getDate()+7);const a=n.toISOString().split("T")[0],o={...Dj},u=s.exec(`SELECT COUNT(*) FROM steps WHERE completed_at IS NOT NULL
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.steps_completed=u.length?u[0].values[0][0]:0;const h=s.exec(`SELECT COUNT(*) FROM quests WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.quests_completed=h.length?h[0].values[0][0]:0;const g=s.exec(`SELECT COUNT(*) FROM goals WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.goals_completed=g.length?g[0].values[0][0]:0;const E=s.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'buff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.buffs_activated=E.length?E[0].values[0][0]:0;const _=s.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.debuffs_activated=_.length?_[0].values[0][0]:0;const S=s.exec(`SELECT COALESCE(SUM(amount), 0) FROM xp_log
     WHERE date(created_at) >= ? AND date(created_at) < ?`,[e,a]);o.xp_earned=S.length?S[0].values[0][0]:0;try{const x=s.exec(`SELECT COALESCE(SUM(damage), 0), MAX(CASE WHEN is_defeated = 1 THEN 1 ELSE 0 END)
       FROM weekly_boss WHERE week_start = ?`,[e]);x.length&&x[0].values.length&&(o.boss_damage_dealt=x[0].values[0][0],o.boss_defeated=!!x[0].values[0][1])}catch{}try{const x=s.exec(`SELECT COUNT(*), COALESCE(SUM(duration_minutes), 0) FROM focus_sessions
       WHERE status = 'completed' AND date(started_at) >= ? AND date(started_at) < ?`,[e,a]);x.length&&x[0].values.length&&(o.focus_sessions=x[0].values[0][0],o.focus_minutes=x[0].values[0][1])}catch{}try{const x=s.exec(`SELECT COUNT(*) FROM routine_logs
       WHERE is_completed = 1 AND date >= ? AND date < ?`,[e,a]);o.routines_completed=x.length?x[0].values[0][0]:0}catch{}try{const x=s.exec(`SELECT COUNT(*) FROM combo_activations
       WHERE date(activated_at) >= ? AND date(activated_at) < ?`,[e,a]);o.combos_activated=x.length?x[0].values[0][0]:0}catch{}try{const x=s.exec(`SELECT COUNT(*) FROM achievement_unlocks
       WHERE date(unlocked_at) >= ? AND date(unlocked_at) < ?`,[e,a]);o.achievements_unlocked=x.length?x[0].values[0][0]:0}catch{}return o}async function Uj(s){const e=te(),n=cf(),a=JSON.stringify(s),o=mp();return o?e.run("UPDATE weekly_reviews SET summary_data = ?, generated_at = datetime('now') WHERE id = ?",[a,o.id]):e.run("INSERT INTO weekly_reviews (week_start, summary_data) VALUES (?, ?)",[n,a]),await ve(),mp()}async function Vj(s,e,n,a,o){te().run("UPDATE weekly_reviews SET wins = ?, challenges = ?, priorities = ?, notes = ? WHERE id = ?",[e,n,JSON.stringify(a),o,s]),await ve()}async function qj(s,e){te().run("UPDATE weekly_reviews SET is_completed = 1, completed_at = datetime('now'), xp_earned = ? WHERE id = ?",[e,s]),await ve()}function H1(s){return{id:s[0],week_start:s[1],generated_at:s[2],completed_at:s[3],is_completed:!!s[4],summary_data:s[5],wins:s[6],challenges:s[7],priorities:s[8],notes:s[9],xp_earned:s[10]}}function Bj({grantXP:s}){const[e,n]=L.useState(null),[a,o]=L.useState(null),[u,h]=L.useState([]),[g,E]=L.useState(!0),_=L.useCallback(async()=>{n(mp()),h(Oj(10)),E(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async()=>{const q=await Mj();o(q);const z=await Uj(q);return n(z),{summary:q,review:z}},[]),x=L.useCallback(async(q,z,H,K)=>{e&&(await Vj(e.id,q,z,H,K),_())},[e,_]),w=L.useCallback(async()=>{!e||e.is_completed||(await qj(e.id,hl),await s(hl,"Completed weekly review","weekly_review",e.id),_())},[e,s,_]),B=L.useCallback(()=>cf(),[]),G=L.useCallback(q=>{try{return JSON.parse(q.summary_data)}catch{return{steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0}}},[]),U=L.useCallback(q=>{try{return JSON.parse(q.priorities)}catch{return[]}},[]);return{currentReview:e,summaryData:a,recentReviews:u,loading:g,refresh:_,generateSummary:S,updateContent:x,completeReview:w,getWeekStart:B,getSummaryFromReview:G,getPrioritiesFromReview:U}}function Pj(){const e=te().exec(`
    SELECT id, name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight
    FROM event_templates ORDER BY rarity, name
  `);return e.length?e[0].values.map(zj):[]}function m_(){const e=te().exec(`
    SELECT ae.id, ae.template_id, ae.started_at, ae.expires_at, ae.is_claimed, ae.claimed_at,
           et.id, et.name, et.description, et.type, et.icon, et.duration_hours, et.effect_type, et.effect_value, et.rarity, et.weight
    FROM active_events ae
    JOIN event_templates et ON ae.template_id = et.id
    WHERE ae.expires_at > datetime('now') OR (ae.is_claimed = 0 AND et.duration_hours = 0)
    ORDER BY ae.started_at DESC
  `);if(!e.length)return[];const n=Date.now();return e[0].values.map(a=>{const o=new Date(a[3]+"Z").getTime();return{id:a[0],template_id:a[1],started_at:a[2],expires_at:a[3],is_claimed:!!a[4],claimed_at:a[5],template:{id:a[6],name:a[7],description:a[8],type:a[9],icon:a[10],duration_hours:a[11],effect_type:a[12],effect_value:a[13],rarity:a[14],weight:a[15]},time_remaining:Math.max(0,Math.floor((o-n)/1e3))}})}async function Fj(){const s=te(),e=Pj();if(e.length===0)return null;const n=e.reduce((g,E)=>g+E.weight,0);let a=Math.random()*n,o=null;for(const g of e)if(a-=g.weight,a<=0){o=g;break}o||(o=e[0]);const u=o.duration_hours>0?`datetime('now', '+${o.duration_hours} hours')`:"datetime('now', '+24 hours')";return s.run(`INSERT INTO active_events (template_id, expires_at) VALUES (?, ${u})`,[o.id]),await ve(),m_().find(g=>g.template_id===o.id)||null}async function Gj(s){const e=te(),a=m_().find(o=>o.id===s);if(!a||a.is_claimed)return{success:!1,effectValue:{}};e.run("UPDATE active_events SET is_claimed = 1, claimed_at = datetime('now') WHERE id = ?",[s]),e.run(`INSERT INTO event_history (template_id, event_name, result, xp_earned)
     VALUES (?, ?, 'claimed', 0)`,[a.template_id,a.template.name]),await ve();try{return{success:!0,effectValue:JSON.parse(a.template.effect_value)}}catch{return{success:!0,effectValue:{}}}}async function Hj(){te().run(`
    DELETE FROM active_events
    WHERE expires_at <= datetime('now') AND is_claimed = 0
  `),await ve()}function zj(s){return{id:s[0],name:s[1],description:s[2],type:s[3],icon:s[4],duration_hours:s[5],effect_type:s[6],effect_value:s[7],rarity:s[8],weight:s[9]}}const QT="last_event_check";function Xj({grantXP:s,addEnergy:e,addShields:n,onEventTriggered:a}){const[o,u]=L.useState([]),[h,g]=L.useState(!0),[E,_]=L.useState(null),S=L.useCallback(async()=>{await Hj(),u(m_()),g(!1)},[]);L.useEffect(()=>{S()},[S]),L.useEffect(()=>{(async()=>{const H=localStorage.getItem(QT),K=Date.now();if(!(H&&(K-parseInt(H,10))/36e5<gx)){if(Math.random()<_x){const ie=await Fj();ie&&(_(ie),a?.(ie),S())}localStorage.setItem(QT,K.toString())}})()},[a,S]);const x=L.useCallback(async z=>{const{success:H,effectValue:K}=await Gj(z);if(!H)return null;const ie=o.find(Ee=>Ee.id===z);if(!ie)return null;switch(ie.template.effect_type){case"xp_bonus":K.amount&&await s(K.amount,`Event: ${ie.template.name}`,"event",z);break;case"energy_restore":K.amount&&e&&await e(K.amount,`Event: ${ie.template.name}`);break;case"streak_shield":K.shields&&n&&await n(K.shields);break}return S(),ie},[o,s,e,n,S]),w=L.useCallback(()=>{_(null)},[]),B=L.useCallback(()=>o.filter(z=>!z.is_claimed),[o]),G=L.useCallback(()=>o.filter(z=>z.is_claimed&&z.template.type==="modifier"&&z.time_remaining>0),[o]),U=L.useCallback(()=>o.some(z=>z.is_claimed&&z.template.effect_type==="xp_multiplier"&&z.time_remaining>0),[o]),q=L.useCallback(()=>{const z=o.find(H=>H.is_claimed&&H.template.effect_type==="xp_multiplier"&&H.time_remaining>0);if(!z)return 1;try{return JSON.parse(z.template.effect_value).multiplier||1}catch{return 1}},[o]);return{activeEvents:o,loading:h,pendingEvent:E,refresh:S,claimEvent:x,dismissPendingEvent:w,getUnclaimedEvents:B,getActiveModifiers:G,hasActiveXpMultiplier:U,getXpMultiplier:q}}function $j(){const e=te().exec("SELECT id, name, description, icon, color, sort_order FROM skill_branches ORDER BY sort_order");return e.length?e[0].values.map(n=>({id:n[0],name:n[1],description:n[2],icon:n[3],color:n[4],sort_order:n[5]})):[]}function Yj(){const e=te().exec("SELECT id, node_id, unlocked_at FROM unlocked_skills");return e.length?e[0].values.map(n=>({id:n[0],node_id:n[1],unlocked_at:n[2]})):[]}function Qj(){const e=te().exec(`
    SELECT sn.id, sn.branch_id, sn.name, sn.description, sn.icon, sn.tier, sn.position, sn.xp_cost,
           sn.prerequisite_node_id, sn.effect_type, sn.effect_value, sn.is_capstone,
           us.unlocked_at, sb.name as branch_name, sb.color as branch_color
    FROM skill_nodes sn
    LEFT JOIN unlocked_skills us ON sn.id = us.node_id
    JOIN skill_branches sb ON sn.branch_id = sb.id
    ORDER BY sb.sort_order, sn.tier, sn.position
  `);if(!e.length)return[];const n=new Set(Yj().map(a=>a.node_id));return e[0].values.map(a=>{const o=a[0],u=a[8],h=a[12]!==null,g=!h&&(u===null||n.has(u));return{id:o,branch_id:a[1],name:a[2],description:a[3],icon:a[4],tier:a[5],position:a[6],xp_cost:a[7],prerequisite_node_id:u,effect_type:a[9],effect_value:a[10],is_capstone:!!a[11],unlocked:h,unlocked_at:a[12],can_unlock:g,branch_name:a[13],branch_color:a[14]}})}async function Kj(s){const e=te(),n=e.exec("SELECT 1 FROM unlocked_skills WHERE node_id = ?",[s]);return n.length&&n[0].values.length?!1:(e.run("INSERT INTO unlocked_skills (node_id) VALUES (?)",[s]),await ve(),!0)}function Wj(){const e=te().exec(`
    SELECT sn.effect_value FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
    WHERE sn.effect_type IN ('stat_bonus', 'combined')
  `);if(!e.length)return{};const n={};for(const a of e[0].values)try{const o=JSON.parse(a[0]);for(const[u,h]of Object.entries(o))typeof h=="number"&&!u.includes("_bonus")&&(n[u]=(n[u]||0)+h)}catch{}return n}function Lm(){const e=te().exec(`
    SELECT COALESCE(SUM(sn.xp_cost), 0) FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
  `);return e.length?e[0].values[0][0]:0}function Jj({totalXP:s}){const[e,n]=L.useState([]),[a,o]=L.useState([]),[u,h]=L.useState(!0),g=L.useCallback(()=>{n($j()),o(Qj()),h(!1)},[]);L.useEffect(()=>{g()},[g]);const E=L.useCallback(async U=>{const q=a.find(ie=>ie.id===U);if(!q||q.unlocked||!q.can_unlock)return!1;const z=Lm();if(s-z<q.xp_cost)return!1;const K=await Kj(U);return K&&g(),K},[a,s,g]),_=L.useCallback(U=>a.filter(q=>q.branch_id===U),[a]),S=L.useCallback(()=>a.filter(U=>U.unlocked).length,[a]),x=L.useCallback(()=>a.length,[a]),w=L.useCallback(()=>Wj(),[]),B=L.useCallback(()=>{const U=Lm();return s-U},[s]),G=L.useCallback(()=>Lm(),[]);return{branches:e,nodes:a,loading:u,refresh:g,unlockSkill:E,getNodesByBranch:_,getUnlockedCount:S,getTotalNodes:x,getStatBonuses:w,getAvailableXp:B,getXpSpent:G}}function Zj(){const e=te().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes ORDER BY name
  `);return e.length?e[0].values.map(X1):[]}function eD(s){const n=te().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:X1(n[0].values[0])}function uf(){const e=te().exec(`
    SELECT id, class_id, selected_at, last_changed_at, changes_remaining
    FROM character_class_selection WHERE id = 1
  `);if(!e.length||!e[0].values.length)return null;const n=e[0].values[0];return{id:n[0],class_id:n[1],selected_at:n[2],last_changed_at:n[3],changes_remaining:n[4]}}function z1(){const s=uf();return!s||!s.class_id?null:eD(s.class_id)}function tD(){const s=Zj(),e=uf();return s.map(n=>({...n,is_selected:e?.class_id===n.id}))}async function nD(s){const e=te(),n=uf();if(n?.class_id&&n.changes_remaining<=0)return!1;const a=n?.class_id?n.changes_remaining-1:n?.changes_remaining||3;return e.run("UPDATE character_class_selection SET class_id = ?, selected_at = COALESCE(selected_at, datetime('now')), last_changed_at = datetime('now'), changes_remaining = ? WHERE id = 1",[s,a]),await ve(),!0}function sD(){const s=z1();if(!s)return{};try{return JSON.parse(s.stat_bonuses)}catch{return{}}}function iD(s){const e=z1();return e&&e.xp_bonus_type===s?e.xp_bonus_percent:0}function X1(s){return{id:s[0],key:s[1],name:s[2],description:s[3],icon:s[4],primary_stat:s[5],stat_bonuses:s[6],xp_bonus_type:s[7],xp_bonus_percent:s[8],special_ability:s[9],special_ability_desc:s[10]}}function aD(){const[s,e]=L.useState([]),[n,a]=L.useState(null),[o,u]=L.useState(!0),h=L.useCallback(()=>{e(tD()),a(uf()),u(!1)},[]);L.useEffect(()=>{h()},[h]);const g=L.useCallback(async w=>{const B=await nD(w);return B&&h(),B},[h]),E=L.useCallback(()=>s.find(w=>w.is_selected)||null,[s]),_=L.useCallback(()=>sD(),[]),S=L.useCallback(w=>iD(w),[]),x=L.useCallback(()=>!n||!n.class_id?!0:n.changes_remaining>0,[n]);return{classes:s,selection:n,loading:o,refresh:h,selectClass:g,getSelectedClass:E,getStatBonuses:_,getXpBonus:S,canChangeClass:x}}function $1(){const e=te().exec(`
    SELECT id, name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards
    FROM territories ORDER BY unlock_level
  `);return e.length?e[0].values.map(fD):[]}function rD(s){const e=te(),n=$1(),a=e.exec(`
    SELECT id, territory_id, discovered_at, completed_at, challenges_completed, is_current
    FROM territory_progress
  `),o=new Map;if(a.length)for(const u of a[0].values)o.set(u[1],{id:u[0],territory_id:u[1],discovered_at:u[2],completed_at:u[3],challenges_completed:u[4],is_current:!!u[5]});return n.map(u=>{const h=o.get(u.id);return{...u,discovered:!!h,discovered_at:h?.discovered_at||null,completed:!!h?.completed_at,completed_at:h?.completed_at||null,is_current:h?.is_current||!1,is_locked:u.unlock_level>s,challenges_completed:h?JSON.parse(h.challenges_completed):[]}})}function oD(){const e=te().exec(`
    SELECT t.id, t.name, t.description, t.icon, t.unlock_level, t.background_color, t.position_x, t.position_y, t.connected_to, t.challenges, t.rewards,
           tp.id, tp.discovered_at, tp.completed_at, tp.challenges_completed, tp.is_current
    FROM territories t
    JOIN territory_progress tp ON t.id = tp.territory_id
    WHERE tp.is_current = 1
  `);if(!e.length||!e[0].values.length)return null;const n=e[0].values[0];return{id:n[0],name:n[1],description:n[2],icon:n[3],unlock_level:n[4],background_color:n[5],position_x:n[6],position_y:n[7],connected_to:n[8],challenges:n[9],rewards:n[10],discovered:!0,discovered_at:n[12],completed:n[13]!==null,completed_at:n[13],is_current:!0,is_locked:!1,challenges_completed:JSON.parse(n[14])}}async function lD(s){const e=te(),n=e.exec("SELECT 1 FROM territory_progress WHERE territory_id = ?",[s]);n.length&&n[0].values.length||(e.run("INSERT INTO territory_progress (territory_id) VALUES (?)",[s]),await ve())}async function cD(s){const e=te();e.run("UPDATE territory_progress SET is_current = 0"),e.run("UPDATE territory_progress SET is_current = 1 WHERE territory_id = ?",[s]),await ve()}async function uD(s,e){const n=te(),a=n.exec("SELECT challenges_completed FROM territory_progress WHERE territory_id = ?",[s]);if(!a.length||!a[0].values.length)return;const o=JSON.parse(a[0].values[0][0]);o.includes(e)||(o.push(e),n.run("UPDATE territory_progress SET challenges_completed = ? WHERE territory_id = ?",[JSON.stringify(o),s]),await ve())}async function dD(s){te().run("UPDATE territory_progress SET completed_at = datetime('now') WHERE territory_id = ?",[s]),await ve()}function fD(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],unlock_level:s[4],background_color:s[5],position_x:s[6],position_y:s[7],connected_to:s[8],challenges:s[9],rewards:s[10]}}function hD({characterLevel:s,grantXP:e}){const[n,a]=L.useState([]),[o,u]=L.useState(null),[h,g]=L.useState(!0),E=L.useCallback(()=>{a(rD(s)),u(oD()),g(!1)},[s]);L.useEffect(()=>{E()},[E]),L.useEffect(()=>{(async()=>{const U=$1();for(const q of U)q.unlock_level<=s&&(n.find(H=>H.id===q.id)?.discovered||await lD(q.id));E()})()},[s,n,E]);const _=L.useCallback(async G=>{const U=n.find(q=>q.id===G);return!U||U.is_locked||!U.discovered?!1:(await cD(G),E(),!0)},[n,E]),S=L.useCallback(async(G,U)=>{await uD(G,U),E()},[E]),x=L.useCallback(async G=>{const U=n.find(q=>q.id===G);if(!(!U||U.completed)){await dD(G);try{const q=JSON.parse(U.rewards);q.xp&&await e(q.xp,`Completed territory: ${U.name}`,"territory",G)}catch{}E()}},[n,e,E]),w=L.useCallback(()=>n.filter(G=>G.discovered),[n]),B=L.useCallback(()=>n.filter(G=>G.completed),[n]);return{territories:n,currentTerritory:o,loading:h,refresh:E,travelTo:_,completeChallenge:S,completeTerritory:x,getDiscoveredTerritories:w,getCompletedTerritories:B}}function mD(s){const n=te().exec(`
    SELECT id, name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit
    FROM item_definitions WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:ED(n[0].values[0])}function Y1(){const e=te().exec(`
    SELECT i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM inventory i
    JOIN item_definitions d ON i.item_id = d.id
    ORDER BY d.type, d.rarity DESC, d.name
  `);return e.length?e[0].values.map(n=>({id:n[0],item_id:n[1],quantity:n[2],acquired_at:n[3],source:n[4],definition:{id:n[5],name:n[6],description:n[7],icon:n[8],type:n[9],slot:n[10],rarity:n[11],stat_effects:n[12],special_effect:n[13],stack_limit:n[14]}})):[]}function Q1(){const e=te().exec(`
    SELECT e.id, e.slot, e.inventory_id, e.equipped_at,
           i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM equipped_items e
    JOIN inventory i ON e.inventory_id = i.id
    JOIN item_definitions d ON i.item_id = d.id
  `);return e.length?e[0].values.map(n=>({id:n[0],slot:n[1],inventory_id:n[2],equipped_at:n[3],item:{id:n[4],item_id:n[5],quantity:n[6],acquired_at:n[7],source:n[8],definition:{id:n[9],name:n[10],description:n[11],icon:n[12],type:n[13],slot:n[14],rarity:n[15],stat_effects:n[16],special_effect:n[17],stack_limit:n[18]}}})):[]}async function pD(s,e=1,n="unknown"){const a=te(),o=mD(s);if(!o)throw new Error("Item not found");if(o.stack_limit>1){const h=a.exec("SELECT id, quantity FROM inventory WHERE item_id = ?",[s]);if(h.length&&h[0].values.length){const g=h[0].values[0][0],E=h[0].values[0][1],_=Math.min(E+e,o.stack_limit);return a.run("UPDATE inventory SET quantity = ? WHERE id = ?",[_,g]),await ve(),{id:g,item_id:s,quantity:_,acquired_at:"",source:n}}}a.run("INSERT INTO inventory (item_id, quantity, source) VALUES (?, ?, ?)",[s,e,n]);const u=a.exec("SELECT last_insert_rowid()");return await ve(),{id:u[0].values[0][0],item_id:s,quantity:e,acquired_at:"",source:n}}async function KT(s,e=1){const n=te(),a=n.exec("SELECT quantity FROM inventory WHERE id = ?",[s]);if(!a.length||!a[0].values.length)return;a[0].values[0][0]<=e?n.run("DELETE FROM inventory WHERE id = ?",[s]):n.run("UPDATE inventory SET quantity = quantity - ? WHERE id = ?",[e,s]),await ve()}async function _D(s){const e=te(),n=Y1().find(a=>a.id===s);!n||!n.definition.slot||(e.run("DELETE FROM equipped_items WHERE slot = ?",[n.definition.slot]),e.run("INSERT INTO equipped_items (slot, inventory_id) VALUES (?, ?)",[n.definition.slot,s]),await ve())}async function gD(s){te().run("DELETE FROM equipped_items WHERE slot = ?",[s]),await ve()}function yD(){const s=Q1(),e={};for(const n of s)try{const a=JSON.parse(n.item.definition.stat_effects);for(const[o,u]of Object.entries(a))typeof u=="number"&&(e[o]=(e[o]||0)+u)}catch{}return e}function ED(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],type:s[4],slot:s[5],rarity:s[6],stat_effects:s[7],special_effect:s[8],stack_limit:s[9]}}function vD({grantXP:s,addEnergy:e,addShields:n}={}){const[a,o]=L.useState([]),[u,h]=L.useState([]),[g,E]=L.useState(!0),_=L.useCallback(()=>{o(Y1()),h(Q1()),E(!1)},[]);L.useEffect(()=>{_()},[_]);const S=L.useCallback(async(H,K=1,ie="reward")=>{await pD(H,K,ie),_()},[_]),x=L.useCallback(async(H,K=1)=>{await KT(H,K),_()},[_]),w=L.useCallback(async H=>{await _D(H),_()},[_]),B=L.useCallback(async H=>{await gD(H),_()},[_]),G=L.useCallback(async H=>{const K=a.find(A=>A.id===H);if(!K||K.definition.type!=="consumable")return!1;const ie=K.definition.special_effect;if(!ie)return!1;const[Ee,ge]=ie.split(":"),D=parseInt(ge,10);switch(Ee){case"restore_energy":e&&await e(D,`Used ${K.definition.name}`);break;case"grant_xp":s&&await s(D,`Used ${K.definition.name}`,"consumable",H);break;case"add_shield":n&&await n(D);break;default:return!1}return await KT(H,1),_(),!0},[a,s,e,n,_]),U=L.useCallback(()=>yD(),[]),q=L.useCallback(H=>u.find(K=>K.slot===H)||null,[u]),z=L.useCallback(H=>a.filter(K=>K.definition.type===H),[a]);return{inventory:a,equipped:u,loading:g,refresh:_,addItem:S,removeItem:x,equipItem:w,unequipItem:B,useConsumable:G,getStatBonuses:U,getEquipmentBySlot:q,getInventoryByType:z}}const TD="_appShell_w38qa_1",bD="_sidebar_w38qa_13",SD="_sidebarLogo_w38qa_41",ND="_logoTitle_w38qa_51",xD="_logoSubtitle_w38qa_67",wD="_sidebarNav_w38qa_81",AD="_navItem_w38qa_97",RD="_navItemActive_w38qa_147",CD="_navIcon_w38qa_179",ID="_header_w38qa_193",kD="_headerLeft_w38qa_227",LD="_characterName_w38qa_239",jD="_levelBadge_w38qa_253",DD="_headerXP_w38qa_283",OD="_headerEnergy_w38qa_291",MD="_headerRight_w38qa_299",UD="_main_w38qa_313",VD="_xpFloat_w38qa_331",jn={appShell:TD,sidebar:bD,sidebarLogo:SD,logoTitle:ND,logoSubtitle:xD,sidebarNav:wD,navItem:AD,navItemActive:RD,navIcon:CD,header:ID,headerLeft:kD,characterName:LD,levelBadge:jD,headerXP:DD,headerEnergy:OD,headerRight:MD,main:UD,xpFloat:VD},qD=[{id:"character",label:"Character",icon:""},{id:"quests",label:"Quest Log",icon:""},{id:"buffs",label:"Buffs",icon:""},{id:"focus",label:"Focus Timer",icon:""},{id:"boss",label:"Weekly Boss",icon:""},{id:"inventory",label:"Inventory",icon:""}];function BD({activeTab:s,onTabChange:e}){return c.jsxs("aside",{className:jn.sidebar,children:[c.jsxs("div",{className:jn.sidebarLogo,children:[c.jsx("div",{className:jn.logoTitle,children:"GOAL GAME"}),c.jsx("div",{className:jn.logoSubtitle,children:"Life Management RPG"})]}),c.jsx("nav",{className:jn.sidebarNav,children:qD.map(n=>c.jsxs("button",{className:`${jn.navItem} ${s===n.id?jn.navItemActive:""}`,onClick:()=>e(n.id),children:[c.jsx("span",{className:jn.navIcon,children:n.icon}),n.label]},n.id))})]})}const PD="_progressContainer_1jr5p_1",FD="_progressLabel_1jr5p_9",GD="_track_1jr5p_33",HD="_fill_1jr5p_53",zD="_fillGold_1jr5p_67",XD="_fillGreen_1jr5p_77",$D="_fillBlue_1jr5p_85",YD="_shimmer_1jr5p_93",QD="_trackLarge_1jr5p_117",ya={progressContainer:PD,progressLabel:FD,track:GD,fill:HD,fillGold:zD,fillGreen:XD,fillBlue:$D,shimmer:YD,trackLarge:QD};function yl({value:s,max:e,label:n,showValue:a=!0,color:o="gold",size:u="normal",shimmer:h=!1,className:g}){const E=e>0?Math.min(s/e*100,100):0,_=o==="gold"?ya.fillGold:o==="green"?ya.fillGreen:ya.fillBlue,S=[ya.track,u==="large"&&ya.trackLarge].filter(Boolean).join(" ");return c.jsxs("div",{className:`${ya.progressContainer} ${g||""}`,children:[(n||a)&&c.jsxs("div",{className:ya.progressLabel,children:[n&&c.jsx("span",{children:n}),a&&c.jsxs("span",{children:[s," / ",e]})]}),c.jsx("div",{className:S,children:c.jsx("div",{className:[_,ya.fill,h&&ya.shimmer].filter(Boolean).join(" "),style:{width:`${E}%`}})})]})}const KD="_energyContainer_1u07x_1",WD="_energyBar_1u07x_13",JD="_energyIcon_1u07x_33",ZD="_energyTrack_1u07x_41",eO="_energyFill_1u07x_59",tO="_low_1u07x_73",nO="_empty_1u07x_81",sO="_energyText_1u07x_91",iO="_energyBarCompact_1u07x_125",aO="_energyDebuff_1u07x_175",rO="_exhausted_1u07x_199",oO="_debuffIcon_1u07x_207",lO="_energyTooltip_1u07x_217",cO="_tooltipRow_1u07x_251",uO="_tooltipLabel_1u07x_273",dO="_tooltipValue_1u07x_281",Pt={energyContainer:KD,energyBar:WD,energyIcon:JD,energyTrack:ZD,energyFill:eO,low:tO,empty:nO,energyText:sO,energyBarCompact:iO,energyDebuff:aO,exhausted:rO,debuffIcon:oO,energyTooltip:lO,tooltipRow:cO,tooltipLabel:uO,tooltipValue:dO};function fO({state:s,percentage:e,isLow:n,isEmpty:a,debuffs:o=[],compact:u=!1}){const[h,g]=L.useState(!1),E=s.max_energy+s.bonus_energy,_=u?Pt.energyBarCompact:Pt.energyBar,S=`${Pt.energyFill} ${a?Pt.empty:n?Pt.low:""}`,x=`${Pt.energyText} ${a?Pt.empty:n?Pt.low:""}`;return c.jsxs("div",{className:Pt.energyContainer,children:[c.jsxs("div",{className:_,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{position:"relative"},children:[c.jsx("span",{className:Pt.energyIcon,children:""}),c.jsx("div",{className:Pt.energyTrack,children:c.jsx("div",{className:S,style:{width:`${e}%`}})}),c.jsxs("span",{className:x,children:[s.current_energy,"/",E]}),h&&c.jsxs("div",{className:Pt.energyTooltip,children:[c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Current"}),c.jsx("span",{className:Pt.tooltipValue,children:s.current_energy})]}),c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Max"}),c.jsx("span",{className:Pt.tooltipValue,children:s.max_energy})]}),s.bonus_energy>0&&c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Bonus"}),c.jsxs("span",{className:Pt.tooltipValue,children:["+",s.bonus_energy]})]}),c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Regen"}),c.jsxs("span",{className:Pt.tooltipValue,children:[ib,"/hr"]})]})]})]}),o.map((w,B)=>c.jsxs("div",{className:`${Pt.energyDebuff} ${w.name==="Exhausted"?Pt.exhausted:""}`,children:[c.jsx("span",{className:Pt.debuffIcon,children:w.icon}),w.name]},B))]})}function hO({character:s,energyState:e}){const n=Md(s.total_xp),a=e?e.current_energy/(e.max_energy+e.bonus_energy)*100:0,o=e?e.current_energy<=Um:!1,u=e?e.current_energy<=Vm:!1;return c.jsxs("header",{className:jn.header,children:[c.jsxs("div",{className:jn.headerLeft,children:[c.jsx("span",{className:jn.characterName,children:s.name}),c.jsxs("span",{className:jn.levelBadge,children:["Lv. ",s.level,"  ",s.title]})]}),c.jsxs("div",{className:jn.headerRight,children:[e&&c.jsx("div",{className:jn.headerEnergy,children:c.jsx(fO,{state:e,percentage:a,isLow:o,isEmpty:u,compact:!0})}),c.jsx("div",{className:jn.headerXP,children:c.jsx(yl,{value:n.current,max:n.needed,label:"XP",shimmer:!0})})]})]})}const mO="_levelUpOverlay_dig0a_1",pO="_levelUpContent_dig0a_23",_O="_levelUpIcon_dig0a_33",gO="_levelUpTitle_dig0a_47",yO="_levelUpLevel_dig0a_65",EO="_levelUpTitleName_dig0a_79",vO="_dismissText_dig0a_95",Zr={levelUpOverlay:mO,levelUpContent:pO,levelUpIcon:_O,levelUpTitle:gO,levelUpLevel:yO,levelUpTitleName:EO,dismissText:vO};function TO({level:s,title:e,onDismiss:n}){return L.useEffect(()=>{const a=setTimeout(n,5e3),o=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&n()};return window.addEventListener("keydown",o),()=>{clearTimeout(a),window.removeEventListener("keydown",o)}},[n]),c.jsx("div",{className:Zr.levelUpOverlay,onClick:n,children:c.jsxs("div",{className:Zr.levelUpContent,children:[c.jsx("span",{className:Zr.levelUpIcon,children:""}),c.jsx("div",{className:Zr.levelUpTitle,children:"LEVEL UP"}),c.jsxs("div",{className:Zr.levelUpLevel,children:["Level ",s]}),c.jsx("div",{className:Zr.levelUpTitleName,children:e}),c.jsx("div",{className:Zr.dismissText,children:"Click or press any key to continue"})]})})}const bO="_panel_zw35t_1",SO="_panelHeader_zw35t_69",NO="_panelGlow_zw35t_93",jm={panel:bO,panelHeader:SO,panelGlow:NO};function xt({children:s,header:e,glow:n,className:a,style:o}){const u=[jm.panel,n&&jm.panelGlow,a].filter(Boolean).join(" ");return c.jsxs("div",{className:u,style:o,children:[e&&c.jsx("div",{className:jm.panelHeader,children:e}),s]})}const xO="_button_vi3e3_1",wO="_primary_vi3e3_61",AO="_danger_vi3e3_83",RO="_small_vi3e3_103",CO="_ghost_vi3e3_113",IO="_fullWidth_vi3e3_133",od={button:xO,primary:wO,danger:AO,small:RO,ghost:CO,fullWidth:IO};function Be({variant:s="default",size:e="normal",fullWidth:n,children:a,className:o,...u}){const h=[od.button,s!=="default"&&od[s],e==="small"&&od.small,n&&od.fullWidth,o].filter(Boolean).join(" ");return c.jsx("button",{className:h,...u,children:a})}const kO="_inputGroup_1helv_1",LO="_label_1helv_13",jO="_input_1helv_1",DO="_select_1helv_31",OO="_textarea_1helv_31",Sa={inputGroup:kO,label:LO,input:jO,select:DO,textarea:OO};function Xi({label:s,className:e,...n}){return c.jsxs("div",{className:Sa.inputGroup,children:[s&&c.jsx("label",{className:Sa.label,children:s}),c.jsx("input",{className:`${Sa.input} ${e||""}`,...n})]})}function Ta({label:s,children:e,className:n,...a}){return c.jsxs("div",{className:Sa.inputGroup,children:[s&&c.jsx("label",{className:Sa.label,children:s}),c.jsx("select",{className:`${Sa.select} ${n||""}`,...a,children:e})]})}function Od({label:s,className:e,...n}){return c.jsxs("div",{className:Sa.inputGroup,children:[s&&c.jsx("label",{className:Sa.label,children:s}),c.jsx("textarea",{className:`${Sa.textarea} ${e||""}`,...n})]})}function bc(s){if(s<5)return 0;const a=(s-5)/25;return Math.min(Math.pow(a,.7),1)}const Sc={stamina:"#2ecc71",willpower:"#9b59b6",health:"#e74c3c",focus:"#3498db",charisma:"#e67e22"},MO="_spriteContainer_1siil_3",UO="_characterVideo_1siil_75",VO="_auraStamina_1siil_133",qO="_auraWillpower_1siil_135",BO="_auraHealth_1siil_137",PO="_auraFocus_1siil_139",FO="_auraCharisma_1siil_141",GO="_auraLayer_1siil_153",HO="_small_1siil_471",zO="_large_1siil_547",ws={spriteContainer:MO,characterVideo:UO,auraStamina:VO,auraWillpower:qO,auraHealth:BO,auraFocus:PO,auraCharisma:FO,auraLayer:GO,small:HO,large:zO},ld="/goal-game/",XO={1:`${ld}characters/tier1-adventurer.mp4`,2:`${ld}characters/tier2-knight.mp4`,3:`${ld}characters/tier3-champion.mp4`,4:`${ld}characters/tier4-legend.mp4`};function $O(s){return s>=41?4:s>=26?3:s>=11?2:1}function p_({level:s,stats:e,size:n="medium"}){const a=$O(s),o=XO[a],u={stamina:bc(e.stamina),willpower:bc(e.willpower),health:bc(e.health),focus:bc(e.focus),charisma:bc(e.charisma)},h={"--aura-stamina-intensity":u.stamina,"--aura-stamina-color":Sc.stamina,"--aura-willpower-intensity":u.willpower,"--aura-willpower-color":Sc.willpower,"--aura-health-intensity":u.health,"--aura-health-color":Sc.health,"--aura-focus-intensity":u.focus,"--aura-focus-color":Sc.focus,"--aura-charisma-intensity":u.charisma,"--aura-charisma-color":Sc.charisma},g=n==="small"?ws.small:n==="large"?ws.large:"";return c.jsxs("div",{className:`${ws.spriteContainer} ${g}`,style:h,children:[u.stamina>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraStamina}`}),u.willpower>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraWillpower}`}),u.health>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraHealth}`}),u.focus>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraFocus}`}),u.charisma>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraCharisma}`}),c.jsx("video",{src:o,className:ws.characterVideo,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0})]})}const YO="_characterGrid_1frbt_1",QO="_characterMain_1frbt_13",KO="_characterSide_1frbt_25",WO="_profileSection_1frbt_37",JO="_characterNameDisplay_1frbt_61",ZO="_characterTitleDisplay_1frbt_75",e3="_xpSection_1frbt_89",t3="_totalXP_1frbt_97",n3="_statsGrid_1frbt_113",s3="_statRow_1frbt_125",i3="_statName_1frbt_137",a3="_statBar_1frbt_157",r3="_statValue_1frbt_165",o3="_buffsList_1frbt_185",l3="_activeBuff_1frbt_197",c3="_buffType_1frbt_219",u3="_debuffType_1frbt_229",d3="_buffIcon_1frbt_239",f3="_buffInfo_1frbt_247",h3="_buffName_1frbt_255",m3="_buffTimer_1frbt_265",p3="_emptyState_1frbt_275",_3="_nameEditRow_1frbt_291",g3="_xpLogList_1frbt_307",y3="_xpLogEntry_1frbt_323",E3="_xpLogReason_1frbt_343",v3="_xpLogAmount_1frbt_351",T3="_negative_1frbt_363",b3="_compactScreen_1frbt_385",S3="_compactStats_1frbt_397",N3="_compactStatsTitle_1frbt_409",x3="_compactStatsGrid_1frbt_425",w3="_compactStatItem_1frbt_437",A3="_compactStatName_1frbt_449",R3="_compactStatValue_1frbt_471",C3="_compactBuffs_1frbt_487",I3="_compactBuffsTitle_1frbt_497",k3="_compactBuffsList_1frbt_515",L3="_compactBuff_1frbt_487",j3="_compactBuffIcon_1frbt_555",D3="_compactBuffName_1frbt_563",O3="_compactBuffTimer_1frbt_575",M3="_compactXpLog_1frbt_585",U3="_compactXpEntry_1frbt_609",V3="_positive_1frbt_641",Qe={characterGrid:YO,characterMain:QO,characterSide:KO,profileSection:WO,characterNameDisplay:JO,characterTitleDisplay:ZO,xpSection:e3,totalXP:t3,statsGrid:n3,statRow:s3,statName:i3,statBar:a3,statValue:r3,buffsList:o3,activeBuff:l3,buffType:c3,debuffType:u3,buffIcon:d3,buffInfo:f3,buffName:h3,buffTimer:m3,emptyState:p3,nameEditRow:_3,xpLogList:g3,xpLogEntry:y3,xpLogReason:E3,xpLogAmount:v3,negative:T3,compactScreen:b3,compactStats:S3,compactStatsTitle:N3,compactStatsGrid:x3,compactStatItem:w3,compactStatName:A3,compactStatValue:R3,compactBuffs:C3,compactBuffsTitle:I3,compactBuffsList:k3,compactBuff:L3,compactBuffIcon:j3,compactBuffName:D3,compactBuffTimer:O3,compactXpLog:M3,compactXpEntry:U3,positive:V3},WT={stamina:"green",willpower:"blue",health:"gold",focus:"blue",charisma:"gold"};function q3({character:s,stats:e,activeBuffs:n,xpLog:a,onNameChange:o,compact:u=!1}){const h=Md(s.total_xp),[g,E]=L.useState(!1),[_,S]=L.useState(s.name),[x,w]=L.useState(!1),B=()=>{_.trim()&&(o(_.trim()),E(!1))};function G(U){const q=new Date,H=new Date(U+"Z").getTime()-q.getTime();if(H<=0)return"Expired";const K=Math.floor(H/36e5),ie=Math.floor(H%36e5/6e4);return K>0?`${K}h ${ie}m remaining`:`${ie}m remaining`}return u?c.jsxs("div",{className:Qe.compactScreen,children:[c.jsxs("div",{className:Qe.compactStats,children:[c.jsx("div",{className:Qe.compactStatsTitle,children:"Stats"}),c.jsx("div",{className:Qe.compactStatsGrid,children:qm.map(U=>c.jsxs("div",{className:Qe.compactStatItem,children:[c.jsx("span",{className:Qe.compactStatName,children:U}),c.jsx(yl,{value:e[U],max:30,showValue:!1,color:WT[U]||"gold"}),c.jsx("span",{className:Qe.compactStatValue,children:e[U]})]},U))})]}),n.length>0&&c.jsxs("div",{className:Qe.compactBuffs,children:[c.jsxs("div",{className:Qe.compactBuffsTitle,children:["Active Effects (",n.length,")"]}),c.jsx("div",{className:Qe.compactBuffsList,children:n.map(U=>{const q=jc(U.stat_effects);return Object.entries(q).map(([z,H])=>`${H>0?"+":""}${H} ${z}`).join(", "),c.jsxs("div",{className:`${Qe.compactBuff} ${U.type==="buff"?Qe.buffType:Qe.debuffType}`,children:[c.jsx("span",{className:Qe.compactBuffIcon,children:U.icon}),c.jsx("span",{className:Qe.compactBuffName,children:U.name}),c.jsx("span",{className:Qe.compactBuffTimer,children:G(U.expires_at)})]},U.id)})})]}),c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>w(!x),style:{marginTop:12},children:x?"Hide XP History":"Show XP History"}),x&&a.length>0&&c.jsx("div",{className:Qe.compactXpLog,children:a.slice(0,10).map(U=>c.jsxs("div",{className:Qe.compactXpEntry,children:[c.jsx("span",{children:U.reason}),c.jsxs("span",{className:U.amount>0?Qe.positive:Qe.negative,children:[U.amount>0?"+":"",U.amount," XP"]})]},U.id))})]}):c.jsxs("div",{className:Qe.characterGrid,children:[c.jsxs("div",{className:Qe.characterMain,children:[c.jsx(xt,{children:c.jsxs("div",{className:Qe.profileSection,children:[c.jsx(p_,{level:s.level,stats:e}),g?c.jsxs("div",{className:Qe.nameEditRow,children:[c.jsx(Xi,{value:_,onChange:U=>S(U.target.value),onKeyDown:U=>U.key==="Enter"&&B(),autoFocus:!0}),c.jsx(Be,{size:"small",variant:"primary",onClick:B,children:"Save"}),c.jsx(Be,{size:"small",onClick:()=>E(!1),children:"Cancel"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:Qe.characterNameDisplay,children:s.name}),c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>E(!0),children:"Rename"})]}),c.jsxs("div",{className:Qe.characterTitleDisplay,children:["Level ",s.level,"  ",s.title]}),c.jsxs("div",{className:Qe.xpSection,children:[c.jsx(yl,{value:h.current,max:h.needed,label:"Experience",size:"large",shimmer:!0}),c.jsxs("div",{className:Qe.totalXP,children:[s.total_xp," Total XP"]})]})]})}),c.jsx(xt,{header:"Stats",children:c.jsx("div",{className:Qe.statsGrid,children:qm.map(U=>c.jsxs("div",{className:Qe.statRow,children:[c.jsx("span",{className:Qe.statName,children:U}),c.jsx("div",{className:Qe.statBar,children:c.jsx(yl,{value:e[U],max:30,showValue:!1,color:WT[U]||"gold"})}),c.jsx("span",{className:Qe.statValue,children:e[U]})]},U))})})]}),c.jsxs("div",{className:Qe.characterSide,children:[c.jsx(xt,{header:"Active Effects",children:n.length===0?c.jsx("div",{className:Qe.emptyState,children:"No active buffs or debuffs"}):c.jsx("div",{className:Qe.buffsList,children:n.map(U=>{const q=jc(U.stat_effects),z=Object.entries(q).map(([H,K])=>`${K>0?"+":""}${K} ${H}`).join(", ");return c.jsxs("div",{className:`${Qe.activeBuff} ${U.type==="buff"?Qe.buffType:Qe.debuffType}`,children:[c.jsx("span",{className:Qe.buffIcon,children:U.icon}),c.jsxs("div",{className:Qe.buffInfo,children:[c.jsx("div",{className:Qe.buffName,children:U.name}),c.jsxs("div",{className:Qe.buffTimer,children:[G(U.expires_at),z&&`  ${z}`]})]})]},U.id)})})}),c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>w(!x),style:{width:"100%",marginTop:8},children:x?"Hide XP History":"Show XP History"}),x&&c.jsx(xt,{header:"XP History",style:{marginTop:8},children:a.length===0?c.jsx("div",{className:Qe.emptyState,children:"No XP earned yet. Complete steps to earn XP!"}):c.jsx("div",{className:Qe.xpLogList,children:a.slice(0,20).map(U=>c.jsxs("div",{className:Qe.xpLogEntry,children:[c.jsx("span",{className:Qe.xpLogReason,children:U.reason}),c.jsxs("span",{className:`${Qe.xpLogAmount} ${U.amount<0?Qe.negative:""}`,children:[U.amount>0?"+":"",U.amount," XP"]})]},U.id))})})]})]})}const B3="_header_1ln45_1",P3="_spriteContainer_1ln45_23",F3="_info_1ln45_31",G3="_nameRow_1ln45_41",H3="_name_1ln45_41",z3="_level_1ln45_71",X3="_title_1ln45_91",$3="_xpRow_1ln45_103",Y3="_xpText_1ln45_125",Q3="_quickStats_1ln45_137",K3="_quickStat_1ln45_137",W3="_statIcon_1ln45_169",J3="_statValue_1ln45_177",Gs={header:B3,spriteContainer:P3,info:F3,nameRow:G3,name:H3,level:z3,title:X3,xpRow:$3,xpText:Y3,quickStats:Q3,quickStat:K3,statIcon:W3,statValue:J3};function Z3({character:s,stats:e}){const n=Md(s.total_xp);return c.jsxs("div",{className:Gs.header,children:[c.jsx("div",{className:Gs.spriteContainer,children:c.jsx(p_,{level:s.level,stats:e,size:"small"})}),c.jsxs("div",{className:Gs.info,children:[c.jsxs("div",{className:Gs.nameRow,children:[c.jsx("span",{className:Gs.name,children:s.name}),c.jsxs("span",{className:Gs.level,children:["Lv. ",s.level]}),c.jsx("span",{className:Gs.title,children:s.title})]}),c.jsxs("div",{className:Gs.xpRow,children:[c.jsx(yl,{value:n.current,max:n.needed,showValue:!1,shimmer:!0}),c.jsxs("span",{className:Gs.xpText,children:[n.current," / ",n.needed," XP"]})]})]}),c.jsx("div",{className:Gs.quickStats,children:Object.entries(e).slice(0,5).map(([a,o])=>c.jsxs("div",{className:Gs.quickStat,children:[c.jsx("span",{className:Gs.statIcon,children:e4(a)}),c.jsx("span",{className:Gs.statValue,children:o})]},a))})]})}function e4(s){return{stamina:"",willpower:"",health:"",focus:"",charisma:""}[s]||""}const t4="_section_1hgtf_1",n4="_expanded_1hgtf_27",s4="_header_1hgtf_35",i4="_headerLeft_1hgtf_73",a4="_icon_1hgtf_85",r4="_title_1hgtf_93",o4="_badge_1hgtf_107",l4="_gold_1hgtf_123",c4="_green_1hgtf_133",u4="_red_1hgtf_143",d4="_blue_1hgtf_153",f4="_headerContent_1hgtf_163",h4="_chevron_1hgtf_179",m4="_chevronUp_1hgtf_191",p4="_content_1hgtf_199",_4="_contentInner_1hgtf_219",g4="_miniProgress_1hgtf_239",y4="_miniProgressFill_1hgtf_255",Hs={section:t4,expanded:n4,header:s4,headerLeft:i4,icon:a4,title:r4,badge:o4,gold:l4,green:c4,red:u4,blue:d4,headerContent:f4,chevron:h4,chevronUp:m4,content:p4,contentInner:_4,miniProgress:g4,miniProgressFill:y4};function Nc({title:s,badge:e,badgeColor:n="gold",icon:a,defaultExpanded:o=!1,children:u,headerContent:h}){const[g,E]=L.useState(o);return c.jsxs("div",{className:`${Hs.section} ${g?Hs.expanded:""}`,children:[c.jsxs("button",{className:Hs.header,onClick:()=>E(!g),"aria-expanded":g,children:[c.jsxs("div",{className:Hs.headerLeft,children:[a&&c.jsx("span",{className:Hs.icon,children:a}),c.jsx("span",{className:Hs.title,children:s}),e!==void 0&&c.jsx("span",{className:`${Hs.badge} ${Hs[n]}`,children:e})]}),h&&c.jsx("div",{className:Hs.headerContent,children:h}),c.jsx("span",{className:`${Hs.chevron} ${g?Hs.chevronUp:""}`,children:""})]}),c.jsx("div",{className:Hs.content,children:c.jsx("div",{className:Hs.contentInner,children:u})})]})}const E4="_overlay_15bjw_1",v4="_modal_15bjw_25",T4="_modalHeader_15bjw_97",b4="_modalTitle_15bjw_111",S4="_closeButton_15bjw_123",N4="_modalActions_15bjw_153",rl={overlay:E4,modal:v4,modalHeader:T4,modalTitle:b4,closeButton:S4,modalActions:N4};function Rl({open:s,onClose:e,title:n,children:a,actions:o}){return L.useEffect(()=>{if(!s)return;const u=h=>{h.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[s,e]),s?c.jsx("div",{className:rl.overlay,onClick:e,children:c.jsxs("div",{className:rl.modal,onClick:u=>u.stopPropagation(),children:[n&&c.jsxs("div",{className:rl.modalHeader,children:[c.jsx("h3",{className:rl.modalTitle,children:n}),c.jsx("button",{className:rl.closeButton,onClick:e,children:""})]}),a,o&&c.jsx("div",{className:rl.modalActions,children:o})]})}):null}const x4="_checkbox_543u2_1",w4="_box_543u2_17",A4="_checked_543u2_53",R4="_checkmark_543u2_63",C4="_checkboxLabel_543u2_75",I4="_hidden_543u2_99",ol={checkbox:x4,box:w4,checked:A4,checkmark:R4,checkboxLabel:C4,hidden:I4};function k4({checked:s,onChange:e,label:n,className:a}){const o=[ol.checkbox,s&&ol.checked,a].filter(Boolean).join(" ");return c.jsxs("label",{className:o,onClick:u=>u.stopPropagation(),children:[c.jsx("input",{type:"checkbox",className:ol.hidden,checked:s,onChange:u=>e(u.target.checked)}),c.jsx("span",{className:ol.box,children:s&&c.jsx("span",{className:ol.checkmark,children:""})}),n&&c.jsx("span",{className:ol.checkboxLabel,children:n})]})}const L4="_questLog_15h7c_1",j4="_questToolbar_15h7c_13",D4="_questFilters_15h7c_27",O4="_goalsContainer_15h7c_41",M4="_goalCard_15h7c_55",U4="_goalCompleted_15h7c_79",V4="_goalTitle_15h7c_87",q4="_goalHeader_15h7c_97",B4="_goalDomainIcon_15h7c_125",P4="_goalInfo_15h7c_135",F4="_goalStats_15h7c_165",G4="_goalStatItem_15h7c_177",H4="_missed_15h7c_187",z4="_goalProgress_15h7c_195",X4="_goalProgressBar_15h7c_209",$4="_goalProgressFill_15h7c_225",Y4="_goalProgressText_15h7c_239",Q4="_goalActions_15h7c_255",K4="_goalContent_15h7c_267",W4="_questsGrid_15h7c_277",J4="_emptyStateSmall_15h7c_289",Z4="_questCard_15h7c_305",e5="_questCardCompact_15h7c_329",t5="_questCardHeader_15h7c_337",n5="_questHeaderContent_15h7c_363",s5="_questPriority_15h7c_373",i5="_normal_15h7c_387",a5="_important_15h7c_389",r5="_legendary_15h7c_391",o5="_questTitle_15h7c_395",l5="_questCompleted_15h7c_421",c5="_questProgressInline_15h7c_431",u5="_questProgressBarSmall_15h7c_445",d5="_questProgressFillSmall_15h7c_463",f5="_questProgressTextSmall_15h7c_475",h5="_missedCount_15h7c_485",m5="_questMeta_15h7c_493",p5="_questStepCount_15h7c_509",_5="_questActions_15h7c_525",g5="_expandIcon_15h7c_537",y5="_expanded_15h7c_551",E5="_stepsSection_15h7c_561",v5="_stepsList_15h7c_579",T5="_stepItem_15h7c_593",b5="_stepItemCompact_15h7c_611",S5="_stepPriorityDot_15h7c_627",N5="_stepActions_15h7c_641",x5="_addStepRow_15h7c_651",w5="_addStepRowCompact_15h7c_663",A5="_addStepInput_15h7c_671",R5="_stepMissed_15h7c_681",C5="_missedLabel_15h7c_691",I5="_missedIcon_15h7c_709",k5="_missedText_15h7c_721",L5="_missBtn_15h7c_733",j5="_formGrid_15h7c_751",D5="_formRow_15h7c_763",O5="_emptyState_15h7c_289",Ve={questLog:L4,questToolbar:j4,questFilters:D4,goalsContainer:O4,goalCard:M4,goalCompleted:U4,goalTitle:V4,goalHeader:q4,goalDomainIcon:B4,goalInfo:P4,goalStats:F4,goalStatItem:G4,missed:H4,goalProgress:z4,goalProgressBar:X4,goalProgressFill:$4,goalProgressText:Y4,goalActions:Q4,goalContent:K4,questsGrid:W4,emptyStateSmall:J4,questCard:Z4,questCardCompact:e5,questCardHeader:t5,questHeaderContent:n5,questPriority:s5,normal:i5,important:a5,legendary:r5,questTitle:o5,questCompleted:l5,questProgressInline:c5,questProgressBarSmall:u5,questProgressFillSmall:d5,questProgressTextSmall:f5,missedCount:h5,questMeta:m5,questStepCount:p5,questActions:_5,expandIcon:g5,expanded:y5,stepsSection:E5,stepsList:v5,stepItem:T5,stepItemCompact:b5,stepPriorityDot:S5,stepActions:N5,addStepRow:x5,addStepRowCompact:w5,addStepInput:A5,stepMissed:R5,missedLabel:C5,missedIcon:I5,missedText:k5,missBtn:L5,formGrid:j5,formRow:D5,emptyState:O5};function M5({quest:s,compact:e=!1,onCreateStep:n,onCompleteStep:a,onUncompleteStep:o,onMissStep:u,onUnmissStep:h,onDeleteStep:g,onDeleteQuest:E}){const[_,S]=L.useState(!1),[x,w]=L.useState(""),[B,G]=L.useState("normal"),U=s.steps.filter(ge=>ge.status==="completed").length,q=s.steps.filter(ge=>ge.status==="missed").length,z=s.steps.length,H=s.status==="completed",K=z>0?Math.round(U/z*100):0,ie=()=>{x.trim()&&(n(s.id,x.trim(),B),w(""),G("normal"))},Ee=ge=>ge==="legendary"?"var(--priority-legendary)":ge==="important"?"var(--priority-important)":"var(--priority-normal)";return c.jsxs("div",{className:`${Ve.questCard} ${H?Ve.questCompleted:""} ${e?Ve.questCardCompact:""}`,children:[c.jsxs("div",{className:Ve.questCardHeader,onClick:()=>S(!_),children:[c.jsx("div",{className:`${Ve.questPriority} ${Ve[s.priority]}`}),c.jsxs("div",{className:Ve.questHeaderContent,children:[c.jsx("span",{className:Ve.questTitle,children:s.title}),e&&c.jsxs("div",{className:Ve.questProgressInline,children:[c.jsx("div",{className:Ve.questProgressBarSmall,children:c.jsx("div",{className:Ve.questProgressFillSmall,style:{width:`${K}%`}})}),c.jsxs("span",{className:Ve.questProgressTextSmall,children:[U,"/",z,q>0&&c.jsxs("span",{className:Ve.missedCount,children:[" (",q," )"]})]})]})]}),!e&&c.jsx("span",{className:Ve.questMeta,children:c.jsxs("span",{className:Ve.questStepCount,children:[U,"/",z]})}),c.jsx("div",{className:Ve.questActions,onClick:ge=>ge.stopPropagation(),children:c.jsx(Be,{size:"small",variant:"danger",onClick:()=>E(s.id),children:""})}),c.jsx("span",{className:`${Ve.expandIcon} ${_?Ve.expanded:""}`,children:""})]}),_&&c.jsxs("div",{className:Ve.stepsSection,children:[c.jsx("div",{className:Ve.stepsList,children:s.steps.map(ge=>{const D=ge.status==="missed",A=ge.status==="completed",j=ge.status==="pending";return c.jsxs("div",{className:`${Ve.stepItem} ${D?Ve.stepMissed:""} ${e?Ve.stepItemCompact:""}`,children:[c.jsx("div",{className:Ve.stepPriorityDot,style:{background:Ee(ge.priority)}}),D?c.jsxs("span",{className:Ve.missedLabel,onClick:()=>h(ge.id),children:[c.jsx("span",{className:Ve.missedIcon,children:""}),c.jsx("span",{className:Ve.missedText,children:ge.title})]}):c.jsx(k4,{checked:A,onChange:V=>{V?a(ge.id,s.id,ge.priority):o(ge.id)},label:ge.title}),c.jsxs("div",{className:Ve.stepActions,children:[j&&c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>u(ge.id),title:"Mark as missed",className:Ve.missBtn,children:""}),c.jsx(Be,{size:"small",variant:"danger",onClick:()=>g(ge.id),children:""})]})]},ge.id)})}),!H&&c.jsxs("div",{className:`${Ve.addStepRow} ${e?Ve.addStepRowCompact:""}`,children:[c.jsx("div",{className:Ve.addStepInput,children:c.jsx(Xi,{value:x,onChange:ge=>w(ge.target.value),placeholder:"Add a step...",onKeyDown:ge=>ge.key==="Enter"&&ie()})}),!e&&c.jsxs(Ta,{value:B,onChange:ge=>G(ge.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important"}),c.jsx("option",{value:"legendary",children:"Legendary"})]}),c.jsx(Be,{variant:"primary",onClick:ie,children:"+"})]})]})]})}function U5({goals:s,domains:e,filterDomain:n,filterStatus:a,onFilterDomain:o,onFilterStatus:u,onCreateGoal:h,onCreateQuest:g,onCreateStep:E,onCompleteStep:_,onUncompleteStep:S,onMissStep:x,onUnmissStep:w,onDeleteStep:B,onDeleteQuest:G,onDeleteGoal:U}){const[q,z]=L.useState(!1),[H,K]=L.useState(null),[ie,Ee]=L.useState(""),[ge,D]=L.useState(""),[A,j]=L.useState(1),[V,M]=L.useState(""),[O,k]=L.useState(""),[Ae,Je]=L.useState("normal"),[se,Te]=L.useState(new Set),Ce=le=>{Te(be=>{const ae=new Set(be);return ae.has(le)?ae.delete(le):ae.add(le),ae})},rt=()=>{ie.trim()&&(h(A,ie.trim(),ge.trim()),Ee(""),D(""),z(!1))},at=()=>{!V.trim()||H===null||(g(H,V.trim(),O.trim(),Ae),M(""),k(""),Je("normal"),K(null))},X=le=>{const be=le.quests.length,ae=le.quests.filter(rn=>rn.status==="completed").length,we=le.quests.reduce((rn,ms)=>rn+ms.steps.length,0),Pe=le.quests.reduce((rn,ms)=>rn+ms.steps.filter(fn=>fn.status==="completed").length,0),wt=le.quests.reduce((rn,ms)=>rn+ms.steps.filter(fn=>fn.status==="missed").length,0),yt=we>0?Math.round(Pe/we*100):0;return{totalQuests:be,completedQuests:ae,totalSteps:we,completedSteps:Pe,missedSteps:wt,progressPercent:yt}},de=L.useMemo(()=>[...s].sort((le,be)=>le.status==="completed"&&be.status!=="completed"?1:le.status!=="completed"&&be.status==="completed"?-1:0),[s]);return c.jsxs("div",{className:Ve.questLog,children:[c.jsxs("div",{className:Ve.questToolbar,children:[c.jsxs("div",{className:Ve.questFilters,children:[c.jsxs(Ta,{value:n??"",onChange:le=>o(le.target.value?Number(le.target.value):void 0),children:[c.jsx("option",{value:"",children:"All Domains"}),e.map(le=>c.jsxs("option",{value:le.id,children:[le.icon," ",le.name]},le.id))]}),c.jsxs(Ta,{value:a??"",onChange:le=>u(le.target.value||void 0),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]})]}),c.jsx(Be,{variant:"primary",onClick:()=>z(!0),children:"+ New Goal"})]}),s.length===0?c.jsx(xt,{children:c.jsx("div",{className:Ve.emptyState,children:"No goals yet. Create your first goal to begin your adventure!"})}):c.jsx("div",{className:Ve.goalsContainer,children:de.map(le=>{const be=X(le),ae=se.has(le.id),we=le.status==="completed";return c.jsxs("div",{className:`${Ve.goalCard} ${we?Ve.goalCompleted:""}`,children:[c.jsxs("div",{className:Ve.goalHeader,onClick:()=>Ce(le.id),children:[c.jsx("span",{className:`${Ve.expandIcon} ${ae?Ve.expanded:""}`,children:""}),c.jsx("span",{className:Ve.goalDomainIcon,children:le.domain_icon}),c.jsxs("div",{className:Ve.goalInfo,children:[c.jsx("span",{className:Ve.goalTitle,children:le.title}),c.jsxs("div",{className:Ve.goalStats,children:[c.jsxs("span",{className:Ve.goalStatItem,children:[be.completedQuests,"/",be.totalQuests," quests"]}),c.jsxs("span",{className:Ve.goalStatItem,children:[be.completedSteps,"/",be.totalSteps," steps"]}),be.missedSteps>0&&c.jsxs("span",{className:`${Ve.goalStatItem} ${Ve.missed}`,children:[be.missedSteps," missed"]})]})]}),c.jsxs("div",{className:Ve.goalProgress,children:[c.jsx("div",{className:Ve.goalProgressBar,children:c.jsx("div",{className:Ve.goalProgressFill,style:{width:`${be.progressPercent}%`}})}),c.jsxs("span",{className:Ve.goalProgressText,children:[be.progressPercent,"%"]})]}),c.jsxs("div",{className:Ve.goalActions,onClick:Pe=>Pe.stopPropagation(),children:[c.jsx(Be,{size:"small",variant:"primary",onClick:()=>K(le.id),children:"+"}),c.jsx(Be,{size:"small",variant:"danger",onClick:()=>U(le.id),children:""})]})]}),ae&&c.jsx("div",{className:Ve.goalContent,children:le.quests.length===0?c.jsx("div",{className:Ve.emptyStateSmall,children:"No quests yet. Click + to add one."}):c.jsx("div",{className:Ve.questsGrid,children:le.quests.map(Pe=>c.jsx(M5,{quest:Pe,compact:!0,onCreateStep:E,onCompleteStep:_,onUncompleteStep:S,onMissStep:x,onUnmissStep:w,onDeleteStep:B,onDeleteQuest:G},Pe.id))})})]},le.id)})}),c.jsx(Rl,{open:q,onClose:()=>z(!1),title:"New Goal",actions:c.jsxs(c.Fragment,{children:[c.jsx(Be,{onClick:()=>z(!1),children:"Cancel"}),c.jsx(Be,{variant:"primary",onClick:rt,children:"Create Goal"})]}),children:c.jsxs("div",{className:Ve.formGrid,children:[c.jsx(Ta,{label:"Domain",value:A,onChange:le=>j(Number(le.target.value)),children:e.map(le=>c.jsxs("option",{value:le.id,children:[le.icon," ",le.name]},le.id))}),c.jsx(Xi,{label:"Goal Title",value:ie,onChange:le=>Ee(le.target.value),placeholder:"e.g., Get in shape",onKeyDown:le=>le.key==="Enter"&&rt()}),c.jsx(Od,{label:"Description (optional)",value:ge,onChange:le=>D(le.target.value),placeholder:"Describe your goal..."})]})}),c.jsx(Rl,{open:H!==null,onClose:()=>K(null),title:"New Quest",actions:c.jsxs(c.Fragment,{children:[c.jsx(Be,{onClick:()=>K(null),children:"Cancel"}),c.jsx(Be,{variant:"primary",onClick:at,children:"Create Quest"})]}),children:c.jsxs("div",{className:Ve.formGrid,children:[c.jsx(Xi,{label:"Quest Title",value:V,onChange:le=>M(le.target.value),placeholder:"e.g., Run 5K",onKeyDown:le=>le.key==="Enter"&&at()}),c.jsx(Od,{label:"Description (optional)",value:O,onChange:le=>k(le.target.value),placeholder:"Describe this quest..."}),c.jsxs(Ta,{label:"Priority",value:Ae,onChange:le=>Je(le.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important (1.5x XP)"}),c.jsx("option",{value:"legendary",children:"Legendary (2x XP)"})]})]})})]})}const V5="_buffTracker_lb0ok_1",q5="_buffToolbar_lb0ok_13",B5="_activeEffectsBar_lb0ok_25",P5="_activeEffectsHeader_lb0ok_39",F5="_activeEffectsTitle_lb0ok_53",G5="_activeEffectsCount_lb0ok_65",H5="_buffCount_lb0ok_75",z5="_debuffCount_lb0ok_87",X5="_activeEffectsList_lb0ok_99",$5="_activeEffectChip_lb0ok_111",Y5="_buffChip_lb0ok_133",Q5="_debuffChip_lb0ok_143",K5="_chipIcon_lb0ok_153",W5="_chipInfo_lb0ok_161",J5="_chipName_lb0ok_171",Z5="_chipMeta_lb0ok_189",eM="_chipRemove_lb0ok_199",tM="_quickActions_lb0ok_231",nM="_quickActionsHeader_lb0ok_245",sM="_quickActionsTitle_lb0ok_259",iM="_quickActionsHint_lb0ok_271",aM="_quickActionsGrid_lb0ok_281",rM="_quickActionBtn_lb0ok_293",oM="_quickBuff_lb0ok_317",lM="_quickDebuff_lb0ok_337",cM="_isActive_lb0ok_357",uM="_quickIcon_lb0ok_367",dM="_quickName_lb0ok_375",fM="_quickStreak_lb0ok_389",hM="_shieldInventory_lb0ok_403",mM="_shieldIcon_lb0ok_423",pM="_shieldInfo_lb0ok_431",_M="_shieldTitle_lb0ok_439",gM="_shieldDesc_lb0ok_451",yM="_shieldCount_lb0ok_461",EM="_collapsibleSection_lb0ok_481",vM="_sectionHeader_lb0ok_495",TM="_debuffHeader_lb0ok_525",bM="_sectionExpand_lb0ok_533",SM="_expanded_lb0ok_545",NM="_sectionIcon_lb0ok_553",xM="_sectionTitle_lb0ok_561",wM="_sectionCount_lb0ok_575",AM="_sectionContent_lb0ok_593",RM="_compactGrid_lb0ok_605",CM="_compactCard_lb0ok_619",IM="_compactBuff_lb0ok_639",kM="_compactDebuff_lb0ok_659",LM="_cardActive_lb0ok_679",jM="_compactCardMain_lb0ok_689",DM="_compactIcon_lb0ok_701",OM="_compactInfo_lb0ok_711",MM="_compactName_lb0ok_721",UM="_compactMilestone_lb0ok_737",VM="_compactMeta_lb0ok_745",qM="_compactStreak_lb0ok_757",BM="_atRisk_lb0ok_777",PM="_shieldActive_lb0ok_789",FM="_compactActions_lb0ok_799",GM="_compactActionBtn_lb0ok_813",HM="_claimBtn_lb0ok_845",zM="_deleteBtn_lb0ok_855",XM="_activeIndicator_lb0ok_863",$M="_emptyStateSmall_lb0ok_905",YM="_formGrid_lb0ok_921",QM="_formRow_lb0ok_933",KM="_statEffectRow_lb0ok_951",WM="_statEffectLabel_lb0ok_965",JM="_statEffectInput_lb0ok_979",ZM="_divider_lb0ok_987",Ne={buffTracker:V5,buffToolbar:q5,activeEffectsBar:B5,activeEffectsHeader:P5,activeEffectsTitle:F5,activeEffectsCount:G5,buffCount:H5,debuffCount:z5,activeEffectsList:X5,activeEffectChip:$5,buffChip:Y5,debuffChip:Q5,chipIcon:K5,chipInfo:W5,chipName:J5,chipMeta:Z5,chipRemove:eM,quickActions:tM,quickActionsHeader:nM,quickActionsTitle:sM,quickActionsHint:iM,quickActionsGrid:aM,quickActionBtn:rM,quickBuff:oM,quickDebuff:lM,isActive:cM,quickIcon:uM,quickName:dM,quickStreak:fM,shieldInventory:hM,shieldIcon:mM,shieldInfo:pM,shieldTitle:_M,shieldDesc:gM,shieldCount:yM,collapsibleSection:EM,sectionHeader:vM,debuffHeader:TM,sectionExpand:bM,expanded:SM,sectionIcon:NM,sectionTitle:xM,sectionCount:wM,sectionContent:AM,compactGrid:RM,compactCard:CM,compactBuff:IM,compactDebuff:kM,cardActive:LM,compactCardMain:jM,compactIcon:DM,compactInfo:OM,compactName:MM,compactMilestone:UM,compactMeta:VM,compactStreak:qM,atRisk:BM,shieldActive:PM,compactActions:FM,compactActionBtn:GM,claimBtn:HM,deleteBtn:zM,activeIndicator:XM,emptyStateSmall:$M,formGrid:YM,formRow:QM,statEffectRow:KM,statEffectLabel:WM,statEffectInput:JM,divider:ZM},Dm=[{name:"Morning Exercise",description:"Worked out in the morning",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2,willpower:1}},{name:"Cardio / Running",description:"Ran, cycled, swam, or did sustained cardio",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2}},{name:"Strength Training",description:"Lifted weights or did resistance training",type:"buff",icon:"",duration:24,stats:{stamina:2,health:1,willpower:2}},{name:"Yoga / Stretching",description:"Did yoga, stretching, or mobility work",type:"buff",icon:"",duration:24,stats:{health:2,focus:1,willpower:1}},{name:"8 Hours Sleep",description:"Got a full night of quality sleep",type:"buff",icon:"",duration:24,stats:{health:2,focus:2,stamina:1,willpower:1}},{name:"Meditation",description:"Practiced mindfulness or meditation",type:"buff",icon:"",duration:24,stats:{willpower:3,focus:2}},{name:"Healthy Meal",description:"Ate a balanced, nutritious meal",type:"buff",icon:"",duration:24,stats:{health:3,stamina:1}},{name:"Drank Enough Water",description:"Hit daily water intake goal",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Read 30+ Minutes",description:"Read a book, article, or educational material",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:1}},{name:"Studied / Learned",description:"Studied a course, skill, or new subject",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2}},{name:"Deep Work Session",description:"Focused work with no distractions for 90+ min",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2,stamina:1}},{name:"Journaling",description:"Wrote in journal or reflected on the day",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Cold Shower",description:"Took a cold shower or ice bath",type:"buff",icon:"",duration:24,stats:{willpower:3,stamina:1}},{name:"No Phone First Hour",description:"Avoided phone for first hour after waking",type:"buff",icon:"",duration:24,stats:{focus:2,willpower:2}},{name:"Socialised",description:"Had meaningful social interaction",type:"buff",icon:"",duration:24,stats:{charisma:3,willpower:1}},{name:"Helped Someone",description:"Did something kind or helpful for another person",type:"buff",icon:"",duration:24,stats:{charisma:2,willpower:1}},{name:"Creative Time",description:"Spent time on a creative pursuit",type:"buff",icon:"",duration:24,stats:{focus:2,charisma:1,willpower:1}},{name:"Sunlight / Nature",description:"Spent 20+ minutes outdoors in natural light",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Gratitude Practice",description:"Practiced gratitude  wrote or reflected on 3+",type:"buff",icon:"",duration:24,stats:{willpower:2,charisma:1}},{name:"Meal Prep",description:"Prepared healthy meals in advance",type:"buff",icon:"",duration:48,stats:{health:2,willpower:1,stamina:1}},{name:"Cleaned / Organised",description:"Cleaned home, desk, or organised belongings",type:"buff",icon:"",duration:24,stats:{focus:1,willpower:2}},{name:"Financial Check-In",description:"Reviewed budget, tracked expenses, or saved",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Junk Food",description:"Ate fast food, excessive sugar, or processed food",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-1}},{name:"Skipped Exercise",description:"Had planned to exercise but didn't",type:"debuff",icon:"",duration:24,stats:{stamina:-2,willpower:-2}},{name:"Poor Sleep",description:"Got less than 6 hours or very poor quality",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,stamina:-1,willpower:-1}},{name:"Doomscrolling",description:"Mindlessly scrolled social media for 30+ min",type:"debuff",icon:"",duration:24,stats:{focus:-3,willpower:-2}},{name:"Excessive Gaming",description:"Played video games for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-2,stamina:-1}},{name:"Binge Watching",description:"Watched TV/streaming for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-1,stamina:-1}},{name:"Alcohol",description:"Drank alcohol",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,willpower:-1}},{name:"Smoking / Vaping",description:"Smoked cigarettes or vaped",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-2}},{name:"Excessive Caffeine",description:"Had too much coffee or energy drinks",type:"debuff",icon:"",duration:24,stats:{health:-1,focus:-1,stamina:-1}},{name:"Procrastinated",description:"Avoided important tasks most of the day",type:"debuff",icon:"",duration:24,stats:{willpower:-3,focus:-2}},{name:"Skipped Meals",description:"Skipped a meal or barely ate",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-2,focus:-1}},{name:"Stayed Up Too Late",description:"Went to bed much later than planned",type:"debuff",icon:"",duration:24,stats:{health:-1,willpower:-2,stamina:-1}},{name:"Impulse Spending",description:"Made unnecessary or impulse purchases",type:"debuff",icon:"",duration:24,stats:{willpower:-2}},{name:"Negative Self-Talk",description:"Caught in self-criticism or negative thought loops",type:"debuff",icon:"",duration:24,stats:{willpower:-2,charisma:-2}},{name:"Social Isolation",description:"Avoided people or cancelled social plans",type:"debuff",icon:"",duration:24,stats:{charisma:-3,willpower:-1}},{name:"Sugary Drinks",description:"Had soda, energy drinks, or sugary beverages",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-1}},{name:"Lost Temper",description:"Got angry or had an emotional outburst",type:"debuff",icon:"",duration:24,stats:{charisma:-2,willpower:-2}}],eU=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function tU(s){const e=Math.round(s*60);if(e<60)return`${e}m`;const n=Math.floor(e/60),a=e%60;return a===0?`${n}h`:`${n}h ${a}m`}function nU({definitions:s,activeBuffs:e,onCreateDefinition:n,onDeleteDefinition:a,onActivateBuff:o,onDeactivateBuff:u,streakInfos:h,shieldCount:g=0,onUseShield:E,getUnclaimedMilestones:_,onClaimMilestones:S}){const[x,w]=L.useState(!1),[B,G]=L.useState(!1),[U,q]=L.useState(!1),[z,H]=L.useState(""),[K,ie]=L.useState(""),[Ee,ge]=L.useState("buff"),[D,A]=L.useState(""),[j,V]=L.useState(1440),[M,O]=L.useState({}),k=ae=>{if(ae==="")return;const we=Dm[Number(ae)];we&&(H(we.name),ie(we.description),ge(we.type),A(we.icon),V(we.duration*60),O({...we.stats}))},Ae=()=>{H(""),ie(""),ge("buff"),A(""),V(1440),O({})},Je=()=>{if(!z.trim())return;const ae=Object.fromEntries(Object.entries(M).filter(([,Pe])=>Pe!==0)),we=j/60;n(z.trim(),K.trim(),Ee,D,we,JSON.stringify(ae)),Ae(),w(!1)};function se(ae){const we=new Date,wt=new Date(ae+"Z").getTime()-we.getTime();if(wt<=0)return"Expired";const yt=Math.floor(wt/36e5),rn=Math.floor(wt%36e5/6e4);return yt>0?`${yt}h ${rn}m`:`${rn}m`}const Te=s.filter(ae=>ae.type==="buff"),Ce=s.filter(ae=>ae.type==="debuff"),rt=L.useMemo(()=>Te.filter(ae=>{const we=h?.get(ae.id);return we&&we.currentStreak>0}).slice(0,6),[Te,h]),at=L.useMemo(()=>Ce.slice(0,4),[Ce]),X=Dm.map((ae,we)=>({...ae,index:we})).filter(ae=>ae.type==="buff"),de=Dm.map((ae,we)=>({...ae,index:we})).filter(ae=>ae.type==="debuff"),le=e.filter(ae=>ae.type==="buff"),be=e.filter(ae=>ae.type==="debuff");return c.jsxs("div",{className:Ne.buffTracker,children:[e.length>0&&c.jsxs("div",{className:Ne.activeEffectsBar,children:[c.jsxs("div",{className:Ne.activeEffectsHeader,children:[c.jsx("span",{className:Ne.activeEffectsTitle,children:"Active Effects"}),c.jsxs("span",{className:Ne.activeEffectsCount,children:[le.length>0&&c.jsxs("span",{className:Ne.buffCount,children:["+",le.length]}),be.length>0&&c.jsxs("span",{className:Ne.debuffCount,children:["-",be.length]})]})]}),c.jsx("div",{className:Ne.activeEffectsList,children:e.map(ae=>{const we=jc(ae.stat_effects),Pe=Object.entries(we).map(([wt,yt])=>`${yt>0?"+":""}${yt} ${wt.slice(0,3)}`).join(" ");return c.jsxs("div",{className:`${Ne.activeEffectChip} ${ae.type==="buff"?Ne.buffChip:Ne.debuffChip}`,children:[c.jsx("span",{className:Ne.chipIcon,children:ae.icon}),c.jsxs("div",{className:Ne.chipInfo,children:[c.jsx("span",{className:Ne.chipName,children:ae.name}),c.jsxs("span",{className:Ne.chipMeta,children:[se(ae.expires_at),"  ",Pe]})]}),c.jsx("button",{className:Ne.chipRemove,onClick:()=>u(ae.id),children:""})]},ae.id)})})]}),(rt.length>0||at.length>0)&&c.jsxs("div",{className:Ne.quickActions,children:[c.jsxs("div",{className:Ne.quickActionsHeader,children:[c.jsx("span",{className:Ne.quickActionsTitle,children:"Quick Actions"}),c.jsx("span",{className:Ne.quickActionsHint,children:"Tap to activate"})]}),c.jsxs("div",{className:Ne.quickActionsGrid,children:[rt.map(ae=>{const we=h?.get(ae.id),Pe=e.some(wt=>wt.definition_id===ae.id);return c.jsxs("button",{className:`${Ne.quickActionBtn} ${Ne.quickBuff} ${Pe?Ne.isActive:""}`,onClick:()=>o(ae.id),disabled:Pe,children:[c.jsx("span",{className:Ne.quickIcon,children:ae.icon}),c.jsx("span",{className:Ne.quickName,children:ae.name}),we&&we.currentStreak>0&&c.jsxs("span",{className:Ne.quickStreak,children:["",we.currentStreak]})]},ae.id)}),at.map(ae=>{const we=e.some(Pe=>Pe.definition_id===ae.id);return c.jsxs("button",{className:`${Ne.quickActionBtn} ${Ne.quickDebuff} ${we?Ne.isActive:""}`,onClick:()=>o(ae.id),disabled:we,children:[c.jsx("span",{className:Ne.quickIcon,children:ae.icon}),c.jsx("span",{className:Ne.quickName,children:ae.name})]},ae.id)})]})]}),c.jsxs("div",{className:Ne.shieldInventory,children:[c.jsx("span",{className:Ne.shieldIcon,children:""}),c.jsxs("div",{className:Ne.shieldInfo,children:[c.jsx("div",{className:Ne.shieldTitle,children:"Streak Shields"}),c.jsx("div",{className:Ne.shieldDesc,children:"Protects a streak if you miss a day"})]}),c.jsx("span",{className:Ne.shieldCount,children:g})]}),c.jsx("div",{className:Ne.buffToolbar,children:c.jsx(Be,{variant:"primary",onClick:()=>{Ae(),w(!0)},children:"+ New Buff/Debuff"})}),c.jsxs("div",{className:Ne.collapsibleSection,children:[c.jsxs("div",{className:Ne.sectionHeader,onClick:()=>G(!B),children:[c.jsx("span",{className:`${Ne.sectionExpand} ${B?Ne.expanded:""}`,children:""}),c.jsx("span",{className:Ne.sectionIcon,children:""}),c.jsx("span",{className:Ne.sectionTitle,children:"Buffs (Positive Habits)"}),c.jsx("span",{className:Ne.sectionCount,children:Te.length})]}),B&&c.jsx("div",{className:Ne.sectionContent,children:Te.length===0?c.jsx("div",{className:Ne.emptyStateSmall,children:"No buffs defined yet. Create one above!"}):c.jsx("div",{className:Ne.compactGrid,children:Te.map(ae=>c.jsx(JT,{definition:ae,onActivate:o,onDelete:a,streakInfo:h?.get(ae.id),shieldCount:g,onUseShield:E,unclaimedMilestones:_?.(ae.id)||[],onClaimMilestones:S,isActive:e.some(we=>we.definition_id===ae.id)},ae.id))})})]}),c.jsxs("div",{className:Ne.collapsibleSection,children:[c.jsxs("div",{className:`${Ne.sectionHeader} ${Ne.debuffHeader}`,onClick:()=>q(!U),children:[c.jsx("span",{className:`${Ne.sectionExpand} ${U?Ne.expanded:""}`,children:""}),c.jsx("span",{className:Ne.sectionIcon,children:""}),c.jsx("span",{className:Ne.sectionTitle,children:"Debuffs (Negative Habits)"}),c.jsx("span",{className:Ne.sectionCount,children:Ce.length})]}),U&&c.jsx("div",{className:Ne.sectionContent,children:Ce.length===0?c.jsx("div",{className:Ne.emptyStateSmall,children:"No debuffs defined yet."}):c.jsx("div",{className:Ne.compactGrid,children:Ce.map(ae=>c.jsx(JT,{definition:ae,onActivate:o,onDelete:a,isActive:e.some(we=>we.definition_id===ae.id)},ae.id))})})]}),c.jsx(Rl,{open:x,onClose:()=>w(!1),title:"New Buff / Debuff",actions:c.jsxs(c.Fragment,{children:[c.jsx(Be,{onClick:()=>w(!1),children:"Cancel"}),c.jsx(Be,{variant:"primary",onClick:Je,children:"Create"})]}),children:c.jsxs("div",{className:Ne.formGrid,children:[c.jsxs(Ta,{label:"Quick Select  Common Habits",value:"",onChange:ae=>k(ae.target.value),children:[c.jsx("option",{value:"",children:" Choose a preset to auto-fill "}),c.jsx("optgroup",{label:"Buffs (Positive Habits)",children:X.map(ae=>c.jsxs("option",{value:ae.index,children:[ae.icon," ",ae.name]},ae.index))}),c.jsx("optgroup",{label:"Debuffs (Negative Habits)",children:de.map(ae=>c.jsxs("option",{value:ae.index,children:[ae.icon," ",ae.name]},ae.index))})]}),c.jsx("div",{className:Ne.divider}),c.jsxs("div",{className:Ne.formRow,children:[c.jsx(Xi,{label:"Name",value:z,onChange:ae=>H(ae.target.value),placeholder:"e.g., Morning Exercise"}),c.jsxs(Ta,{label:"Type",value:Ee,onChange:ae=>ge(ae.target.value),children:[c.jsx("option",{value:"buff",children:"Buff (Positive)"}),c.jsx("option",{value:"debuff",children:"Debuff (Negative)"})]})]}),c.jsx(Od,{label:"Description",value:K,onChange:ae=>ie(ae.target.value),placeholder:"Describe this habit..."}),c.jsxs("div",{className:Ne.formRow,children:[c.jsx(Ta,{label:"Icon",value:D,onChange:ae=>A(ae.target.value),children:eU.map(ae=>c.jsx("option",{value:ae,children:ae},ae))}),c.jsx(Xi,{label:"Duration (minutes)",type:"number",value:j,onChange:ae=>V(Number(ae.target.value)),min:1,max:10080})]}),c.jsxs("div",{children:[c.jsx("label",{className:Ne.statEffectLabel,style:{display:"block",marginBottom:8,fontFamily:"var(--font-heading)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-secondary)"},children:"Stat Effects"}),qm.map(ae=>c.jsxs("div",{className:Ne.statEffectRow,children:[c.jsx("span",{className:Ne.statEffectLabel,children:ae}),c.jsx("input",{type:"number",className:Ne.statEffectInput,value:M[ae]||0,onChange:we=>O({...M,[ae]:Number(we.target.value)}),style:{padding:"4px 8px",background:"var(--bg-dark)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontFamily:"var(--font-body)"}})]},ae))]})]})})]})}function JT({definition:s,onActivate:e,onDelete:n,streakInfo:a,shieldCount:o=0,onUseShield:u,unclaimedMilestones:h=[],onClaimMilestones:g,isActive:E}){const _=jc(s.stat_effects),S=Object.entries(_).map(([z,H])=>`${H>0?"+":""}${H} ${z.slice(0,3)}`).join(" "),x=a?CL(a.currentStreak):null,w=a&&a.currentStreak>0,B=a?.isAtRisk&&!a?.shieldActive,G=a?.shieldActive,U=async z=>{z.stopPropagation(),u&&a&&await u(s.id)},q=async z=>{z.stopPropagation(),g&&await g(s.id)};return c.jsxs("div",{className:`${Ne.compactCard} ${s.type==="buff"?Ne.compactBuff:Ne.compactDebuff} ${E?Ne.cardActive:""}`,onClick:()=>!E&&e(s.id),children:[c.jsxs("div",{className:Ne.compactCardMain,children:[c.jsx("span",{className:Ne.compactIcon,children:s.icon}),c.jsxs("div",{className:Ne.compactInfo,children:[c.jsxs("div",{className:Ne.compactName,children:[s.name,x&&c.jsx("span",{className:Ne.compactMilestone,children:x.icon})]}),c.jsxs("div",{className:Ne.compactMeta,children:[tU(s.duration_hours),"  ",S]})]}),w&&c.jsxs("div",{className:`${Ne.compactStreak} ${B?Ne.atRisk:""} ${G?Ne.shieldActive:""}`,children:[G?"":"",a.currentStreak]})]}),c.jsxs("div",{className:Ne.compactActions,children:[B&&o>0&&u&&c.jsx("button",{className:Ne.compactActionBtn,onClick:U,title:"Use Shield",children:""}),h.length>0&&g&&c.jsx("button",{className:`${Ne.compactActionBtn} ${Ne.claimBtn}`,onClick:q,title:"Claim Milestone",children:""}),c.jsx("button",{className:`${Ne.compactActionBtn} ${Ne.deleteBtn}`,onClick:z=>{z.stopPropagation(),n(s.id)},title:"Delete",children:""})]}),E&&c.jsx("div",{className:Ne.activeIndicator,children:"Active"})]})}const sU="_container_e9q7r_1",iU="_title_e9q7r_17",aU="_status_e9q7r_33",rU="_indicator_e9q7r_49",oU="_connected_e9q7r_61",lU="_disconnected_e9q7r_71",cU="_lastBackup_e9q7r_79",uU="_statusMessage_e9q7r_91",dU="_actions_e9q7r_121",fU="_button_e9q7r_135",hU="_buttonSecondary_e9q7r_167 _button_e9q7r_135",mU="_buttonDanger_e9q7r_187 _button_e9q7r_135",pU="_backupList_e9q7r_209",_U="_backupItem_e9q7r_233",gU="_backupName_e9q7r_255",yU="_backupDate_e9q7r_269",EU="_restoreButton_e9q7r_279",vU="_noBackups_e9q7r_307",TU="_tokenInputContainer_e9q7r_321",bU="_tokenHelp_e9q7r_329",SU="_tokenInput_e9q7r_321",NU="_tokenActions_e9q7r_393",It={container:sU,title:iU,status:aU,indicator:rU,connected:oU,disconnected:lU,lastBackup:cU,statusMessage:uU,actions:dU,button:fU,buttonSecondary:hU,buttonDanger:mU,backupList:pU,backupItem:_U,backupName:gU,backupDate:yU,restoreButton:EU,noBackups:vU,tokenInputContainer:TU,tokenHelp:bU,tokenInput:SU,tokenActions:NU};function xU(){const[s,e]=L.useState(!1),[n,a]=L.useState(!0),[o,u]=L.useState(null),[h,g]=L.useState(""),[E,_]=L.useState([]),[S,x]=L.useState(!1),[w,B]=L.useState(""),[G,U]=L.useState(!1),[q,z]=L.useState(!1),[H,K]=L.useState(""),ie=L.useCallback(()=>{e(lb()),u(cb())},[]);L.useEffect(()=>{ie(),a(!1)},[ie]);const Ee=async()=>{if(!w.trim()){g("Please enter a GitHub token");return}g("Verifying token..."),await Aw(w.trim())?(vw(w.trim()),e(!0),U(!1),B(""),g("Connected to GitHub!")):g("Invalid token. Please check and try again.")},ge=()=>{Tw(),e(!1),u(null),g("Disconnected"),_([])},D=async()=>{g("Backing up...");try{const O=await _p(),k=await db(O);k.success?(g(`Backup saved: ${k.fileName}`),u(new Date),await hb(7)):g(`Backup failed: ${k.error}`)}catch(O){g(`Backup failed: ${O instanceof Error?O.message:"Unknown error"}`)}},A=async()=>{if(x(!S),!S){g("Loading backups...");const O=await fb();_(O),g("")}},j=()=>{const O=H.trim();if(!O){g("Please enter a gist ID");return}const k=O.match(/([a-f0-9]{32})/i);k?(localStorage.setItem("github_gist_id",k[1]),g('Gist ID set! Click "Restore from Backup" to see backups.'),z(!1),K("")):g("Invalid gist ID. Paste the gist URL or ID.")},V=async O=>{if(confirm(`Restore from "${O}"? This will replace all current data.`)){g("Restoring...");try{const k=await ww(O);k?(await sb(k),g("Restored successfully! Refreshing..."),setTimeout(()=>window.location.reload(),1500)):g("Failed to download backup")}catch(k){g(`Restore failed: ${k instanceof Error?k.message:"Unknown error"}`)}}},M=O=>{const k=O.match(/backup-(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})/);if(k){const[,Ae,Je,se,Te,Ce]=k;return`${Ae}-${Je}-${se} ${Te}:${Ce}`}return O};return n?c.jsx("div",{className:It.container,children:"Loading..."}):c.jsxs("div",{className:It.container,children:[c.jsx("h3",{className:It.title,children:"Cloud Backup (GitHub)"}),c.jsxs("div",{className:It.status,children:[c.jsx("span",{className:`${It.indicator} ${s?It.connected:It.disconnected}`}),c.jsx("span",{children:s?"Connected to GitHub":"Not connected"})]}),o&&c.jsxs("p",{className:It.lastBackup,children:["Last backup: ",o.toLocaleString()]}),h&&c.jsx("p",{className:It.statusMessage,children:h}),c.jsx("div",{className:It.actions,children:s?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:D,className:It.button,children:"Backup Now"}),c.jsx("button",{onClick:A,className:It.buttonSecondary,children:S?"Hide Backups":"Restore from Backup"}),c.jsx("button",{onClick:()=>z(!q),className:It.buttonSecondary,children:q?"Cancel":"Link Existing Gist"}),c.jsx("button",{onClick:ge,className:It.buttonDanger,children:"Disconnect"}),q&&c.jsxs("div",{className:It.tokenInputContainer,children:[c.jsx("p",{className:It.tokenHelp,children:"Paste your gist URL or ID to restore from an existing backup:"}),c.jsx("input",{type:"text",value:H,onChange:O=>K(O.target.value),placeholder:"https://gist.github.com/user/abc123... or just abc123...",className:It.tokenInput}),c.jsx("button",{onClick:j,className:It.button,children:"Link Gist"})]})]}):c.jsx(c.Fragment,{children:G?c.jsxs("div",{className:It.tokenInputContainer,children:[c.jsxs("p",{className:It.tokenHelp,children:["Create a token at ",c.jsx("a",{href:"https://github.com/settings/tokens/new?description=Goal%20Game%20Backup&scopes=gist",target:"_blank",rel:"noopener noreferrer",children:"GitHub Settings"})," with ",c.jsx("strong",{children:"gist"})," scope."]}),c.jsx("input",{type:"password",value:w,onChange:O=>B(O.target.value),placeholder:"Paste your GitHub token",className:It.tokenInput}),c.jsxs("div",{className:It.tokenActions,children:[c.jsx("button",{onClick:Ee,className:It.button,children:"Save Token"}),c.jsx("button",{onClick:()=>{U(!1),B("")},className:It.buttonSecondary,children:"Cancel"})]})]}):c.jsx("button",{onClick:()=>U(!0),className:It.button,children:"Connect GitHub"})})}),S&&E.length>0&&c.jsxs("div",{className:It.backupList,children:[c.jsx("h4",{children:"Available Backups (Last 7 kept)"}),E.map(O=>c.jsxs("div",{className:It.backupItem,children:[c.jsx("span",{className:It.backupName,children:M(O.fileName)}),c.jsxs("span",{className:It.backupDate,children:[Math.round(O.size/1024)," KB"]}),c.jsx("button",{onClick:()=>V(O.fileName),className:It.restoreButton,children:"Restore"})]},O.fileName))]}),S&&E.length===0&&c.jsx("p",{className:It.noBackups,children:"No backups found"})]})}const wU=[{value:null,label:"No reminder"},{value:0,label:"At event time"},{value:5,label:"5 minutes before"},{value:10,label:"10 minutes before"},{value:15,label:"15 minutes before"},{value:30,label:"30 minutes before"},{value:60,label:"1 hour before"}],AU="_settingsPanel_zjhn0_1",RU="_settingsTitle_zjhn0_9",CU="_settingsDescription_zjhn0_23",IU="_settingRow_zjhn0_35",kU="_settingLabel_zjhn0_59",LU="_iosInstructions_zjhn0_71",jU="_iosTitle_zjhn0_87",DU="_iosText_zjhn0_99",OU="_iosList_zjhn0_111",MU="_deniedMessage_zjhn0_135",UU="_errorMessage_zjhn0_137",VU="_statusIndicator_zjhn0_169",qU="_statusDot_zjhn0_187",BU="_reminderSelect_zjhn0_251",PU="_debugInfo_zjhn0_317",FU="_debugLabel_zjhn0_335",GU="_debugToken_zjhn0_349",HU="_debugError_zjhn0_363",Ft={settingsPanel:AU,settingsTitle:RU,settingsDescription:CU,settingRow:IU,settingLabel:kU,iosInstructions:LU,iosTitle:jU,iosText:DU,iosList:OU,deniedMessage:MU,errorMessage:UU,statusIndicator:VU,statusDot:qU,reminderSelect:BU,debugInfo:PU,debugLabel:FU,debugToken:GU,debugError:HU};function zU(){const{settings:s,permissionState:e,isSupported:n,isConfigured:a,canEnable:o,isIOS:u,isStandalone:h,loading:g,error:E,enableNotifications:_,disableNotificationsHandler:S,setDefaultReminderMinutes:x}=j1();return a?n?c.jsxs(xt,{className:Ft.settingsPanel,children:[c.jsx("h3",{className:Ft.settingsTitle,children:"Push Notifications"}),u&&!h&&c.jsxs("div",{className:Ft.iosInstructions,children:[c.jsx("p",{className:Ft.iosTitle,children:"iOS Setup Required"}),c.jsx("p",{className:Ft.iosText,children:"To receive push notifications on iOS, you need to add this app to your home screen first:"}),c.jsxs("ol",{className:Ft.iosList,children:[c.jsx("li",{children:"Tap the Share button in Safari"}),c.jsx("li",{children:'Select "Add to Home Screen"'}),c.jsx("li",{children:"Open the app from your home screen"}),c.jsx("li",{children:"Then enable notifications here"})]})]}),e==="denied"&&c.jsx("div",{className:Ft.deniedMessage,children:c.jsx("p",{children:"Notifications are blocked. Please enable them in your browser settings."})}),E&&c.jsx("div",{className:Ft.errorMessage,children:c.jsx("p",{children:E})}),c.jsxs("div",{className:Ft.settingRow,children:[c.jsx("span",{className:Ft.settingLabel,children:"Event Reminders"}),s.enabled?c.jsx(Be,{variant:"danger",size:"small",onClick:S,disabled:g,children:g?"Disabling...":"Disable"}):c.jsx(Be,{variant:"primary",size:"small",onClick:_,disabled:g||!o||e==="denied",children:g?"Enabling...":"Enable"})]}),s.enabled&&c.jsxs("div",{className:Ft.settingRow,children:[c.jsx("span",{className:Ft.settingLabel,children:"Default Reminder"}),c.jsx("select",{className:Ft.reminderSelect,value:s.defaultReminderMinutes,onChange:w=>x(Number(w.target.value)),children:wU.filter(w=>w.value!==null).map(w=>c.jsx("option",{value:w.value,children:w.label},w.value))})]}),s.enabled&&c.jsxs("div",{className:Ft.statusIndicator,children:[c.jsx("span",{className:Ft.statusDot}),"Notifications enabled"]}),s.enabled&&c.jsxs("div",{className:Ft.debugInfo,children:[c.jsx("p",{className:Ft.debugLabel,children:"Token Status:"}),s.fcmToken?c.jsxs("p",{className:Ft.debugToken,children:[s.fcmToken.substring(0,20),"...",s.fcmToken.substring(s.fcmToken.length-10)]}):c.jsx("p",{className:Ft.debugError,children:"No token - notifications will not work!"}),c.jsxs("p",{className:Ft.debugLabel,children:["Device ID: ",s.deviceId.substring(0,8),"..."]})]}),s.enabled&&!s.fcmToken&&c.jsx("div",{className:Ft.errorMessage,children:c.jsx("p",{children:"Token missing! Try: Disable  Wait 5 sec  Re-enable"})})]}):c.jsxs(xt,{className:Ft.settingsPanel,children:[c.jsx("h3",{className:Ft.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Ft.settingsDescription,children:"Push notifications are not supported in this browser."})]}):c.jsxs(xt,{className:Ft.settingsPanel,children:[c.jsx("h3",{className:Ft.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Ft.settingsDescription,children:"Push notifications are not configured. To enable them, add your Firebase configuration to the .env file."})]})}const XU="_dailyQuestsPanel_1fkrh_1",$U="_questsList_1fkrh_55",YU="_questItem_1fkrh_67",QU="_completed_1fkrh_89",KU="_questItemHeader_1fkrh_99",WU="_questCheckbox_1fkrh_111",JU="_questInfo_1fkrh_149",ZU="_questTitleRow_1fkrh_159",e6="_questName_1fkrh_173",t6="_questXp_1fkrh_193",n6="_questDescription_1fkrh_223",s6="_progressContainer_1fkrh_235",i6="_progressBar_1fkrh_247",a6="_progressFill_1fkrh_263",r6="_progressText_1fkrh_285",o6="_bonusSection_1fkrh_303",l6="_available_1fkrh_321",c6="_claimed_1fkrh_329",u6="_bonusTitle_1fkrh_349",d6="_bonusDescription_1fkrh_371",f6="_bonusXp_1fkrh_383",h6="_claimButton_1fkrh_403",m6="_loading_1fkrh_413",p6="_emptyState_1fkrh_429",_6="_compactPanel_1fkrh_445",g6="_questItemCompact_1fkrh_457",y6="_questCheckboxCompact_1fkrh_489",E6="_questNameCompact_1fkrh_511",v6="_progressBarCompact_1fkrh_541",T6="_progressFillCompact_1fkrh_559",b6="_progressTextCompact_1fkrh_581",S6="_compactBonus_1fkrh_595",N6="_compactBonusClaimed_1fkrh_629",dt={dailyQuestsPanel:XU,questsList:$U,questItem:YU,completed:QU,questItemHeader:KU,questCheckbox:WU,questInfo:JU,questTitleRow:ZU,questName:e6,questXp:t6,questDescription:n6,progressContainer:s6,progressBar:i6,progressFill:a6,progressText:r6,bonusSection:o6,available:l6,claimed:c6,bonusTitle:u6,bonusDescription:d6,bonusXp:f6,claimButton:h6,loading:m6,emptyState:p6,compactPanel:_6,questItemCompact:g6,questCheckboxCompact:y6,questNameCompact:E6,progressBarCompact:v6,progressFillCompact:T6,progressTextCompact:b6,compactBonus:S6,compactBonusClaimed:N6};function x6({quests:s,loading:e,allCompleted:n,completedCount:a,bonusClaimed:o,bonusXp:u,onClaimBonus:h,compact:g=!1}){const[E,_]=L.useState(!1);if(g)return e?c.jsx("div",{className:dt.loading,children:"Loading daily quests..."}):s.length===0?c.jsx("div",{className:dt.emptyState,children:"No daily quests available"}):c.jsxs("div",{className:dt.compactPanel,children:[c.jsx("div",{className:dt.questsList,children:s.map(x=>c.jsx(ZT,{quest:x,compact:!0},x.id))}),n&&!o&&c.jsxs("div",{className:dt.compactBonus,children:[c.jsx("span",{children:"All quests complete!"}),c.jsxs(Be,{size:"small",onClick:h,children:["Claim +",u," XP"]})]}),o&&c.jsxs("div",{className:dt.compactBonusClaimed,children:[" Bonus claimed! +",u," XP"]})]});const S=e?"Daily Quests (Loading...)":`Daily Quests (${a}/${s.length})${n&&!o?" - Bonus Ready!":""}`;return c.jsxs("div",{className:dt.dailyQuestsPanel,children:[c.jsx(Be,{size:"small",variant:n&&!o?"primary":void 0,onClick:()=>_(!E),style:{width:"100%",marginBottom:E?8:0},children:E?"Hide Daily Quests":S}),E&&c.jsx(xt,{glow:n&&!o,children:e?c.jsx("div",{className:dt.loading,children:"Loading daily quests..."}):s.length===0?c.jsx("div",{className:dt.emptyState,children:"No daily quests available"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:dt.questsList,children:s.map(x=>c.jsx(ZT,{quest:x},x.id))}),c.jsxs("div",{className:`${dt.bonusSection} ${n&&!o?dt.available:o?dt.claimed:""}`,children:[c.jsx("div",{className:dt.bonusTitle,children:o?"Bonus Claimed!":"Complete All Quests"}),c.jsx("div",{className:dt.bonusDescription,children:o?"Great work! See you tomorrow.":"Finish all 3 quests to earn a bonus"}),c.jsxs("div",{className:dt.bonusXp,children:["+",u," XP"]}),n&&!o&&c.jsx(Be,{className:dt.claimButton,size:"small",onClick:h,children:"Claim Bonus"})]})]})})]})}function ZT({quest:s,compact:e=!1}){const n=Math.min(s.current_value/s.target_value*100,100);return e?c.jsxs("div",{className:`${dt.questItemCompact} ${s.is_completed?dt.completed:""}`,children:[c.jsx("div",{className:dt.questCheckboxCompact,children:s.is_completed?"":""}),c.jsx("span",{className:dt.questNameCompact,children:s.title}),c.jsx("div",{className:dt.progressBarCompact,children:c.jsx("div",{className:dt.progressFillCompact,style:{width:`${n}%`}})}),c.jsxs("span",{className:dt.progressTextCompact,children:[s.current_value,"/",s.target_value]})]}):c.jsxs("div",{className:`${dt.questItem} ${s.is_completed?dt.completed:""}`,children:[c.jsxs("div",{className:dt.questItemHeader,children:[c.jsx("div",{className:dt.questCheckbox,children:s.is_completed&&c.jsx("span",{children:""})}),c.jsxs("div",{className:dt.questInfo,children:[c.jsxs("div",{className:dt.questTitleRow,children:[c.jsx("span",{className:dt.questName,children:s.title}),c.jsxs("span",{className:dt.questXp,children:["+",s.xp_reward," XP"]})]}),c.jsx("div",{className:dt.questDescription,children:s.description})]})]}),c.jsxs("div",{className:dt.progressContainer,children:[c.jsx("div",{className:dt.progressBar,children:c.jsx("div",{className:dt.progressFill,style:{width:`${n}%`}})}),c.jsxs("span",{className:dt.progressText,children:[s.current_value,"/",s.target_value]})]})]})}const w6="_bossPage_17wbd_1",A6="_loadingState_17wbd_13",R6="_weekHeader_17wbd_31",C6="_weekLabel_17wbd_51",I6="_weekDates_17wbd_67",k6="_victoryBanner_17wbd_79",L6="_victoryContent_17wbd_105",j6="_victoryIcon_17wbd_119",D6="_victoryText_17wbd_127",O6="_victoryTitle_17wbd_137",M6="_victorySubtitle_17wbd_153",U6="_victoryRewards_17wbd_165",V6="_rewardItem_17wbd_175",q6="_battleArena_17wbd_197",B6="_fighterCard_17wbd_249",P6="_fighterSprite_17wbd_277",F6="_bossSprite_17wbd_293",G6="_bossIcon_17wbd_311",H6="_bossAura_17wbd_327",z6="_defeated_17wbd_371",X6="_fighterDetails_17wbd_389",$6="_fighterName_17wbd_399",Y6="_bossNameColor_17wbd_413",Q6="_fighterTitle_17wbd_421",K6="_fighterXP_17wbd_435",W6="_bossHP_17wbd_437",J6="_xpText_17wbd_449",Z6="_hpBarContainer_17wbd_461",e9="_hpBar_17wbd_461",t9="_lowHP_17wbd_491",n9="_hpText_17wbd_511",s9="_vsSection_17wbd_525",i9="_vsGlow_17wbd_547",a9="_vsText_17wbd_575",r9="_damageCounter_17wbd_595",o9="_damageValue_17wbd_611",l9="_damageLabel_17wbd_623",c9="_statsGrid_17wbd_639",u9="_statCard_17wbd_651",d9="_statIcon_17wbd_669",f9="_statValue_17wbd_677",h9="_statLabel_17wbd_689",m9="_damageGuide_17wbd_703",p9="_guideText_17wbd_711",_9="_damageGrid_17wbd_725",g9="_damageItem_17wbd_737",y9="_damageAction_17wbd_755",E9="_damageAmount_17wbd_765",v9="_healSection_17wbd_779",T9="_healTitle_17wbd_791",b9="_healGrid_17wbd_807",S9="_healItem_17wbd_819",N9="_healAction_17wbd_839",x9="_healAmount_17wbd_849",w9="_bestiary_17wbd_863",A9="_bestiaryText_17wbd_871",R9="_bestiaryGrid_17wbd_883",C9="_bestiaryItem_17wbd_895",I9="_currentBoss_17wbd_917",k9="_bestiaryIcon_17wbd_927",L9="_bestiaryInfo_17wbd_937",j9="_bestiaryName_17wbd_947",D9="_bestiaryDesc_17wbd_959",O9="_bestiaryStats_17wbd_973",ye={bossPage:w6,loadingState:A6,weekHeader:R6,weekLabel:C6,weekDates:I6,victoryBanner:k6,victoryContent:L6,victoryIcon:j6,victoryText:D6,victoryTitle:O6,victorySubtitle:M6,victoryRewards:U6,rewardItem:V6,battleArena:q6,fighterCard:B6,fighterSprite:P6,bossSprite:F6,bossIcon:G6,bossAura:H6,defeated:z6,fighterDetails:X6,fighterName:$6,bossNameColor:Y6,fighterTitle:Q6,fighterXP:K6,bossHP:W6,xpText:J6,hpBarContainer:Z6,hpBar:e9,lowHP:t9,hpText:n9,vsSection:s9,vsGlow:i9,vsText:a9,damageCounter:r9,damageValue:o9,damageLabel:l9,statsGrid:c9,statCard:u9,statIcon:d9,statValue:f9,statLabel:h9,damageGuide:m9,guideText:p9,damageGrid:_9,damageItem:g9,damageAction:y9,damageAmount:E9,healSection:v9,healTitle:T9,healGrid:b9,healItem:S9,healAction:N9,healAmount:x9,bestiary:w9,bestiaryText:A9,bestiaryGrid:R9,bestiaryItem:C9,currentBoss:I9,bestiaryIcon:k9,bestiaryInfo:L9,bestiaryName:j9,bestiaryDesc:D9,bestiaryStats:O9};function M9({character:s,stats:e,boss:n,loading:a,hpPercentage:o,damageDealt:u,totalDefeated:h,weekStart:g,weekEnd:E}){const _=Md(s.total_xp),S=w=>new Date(w+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});if(a)return c.jsx("div",{className:ye.bossPage,children:c.jsx("div",{className:ye.loadingState,children:"Summoning this week's boss..."})});if(!n)return c.jsx("div",{className:ye.bossPage,children:c.jsx("div",{className:ye.loadingState,children:"No boss found this week"})});const x=n.is_defeated;return c.jsxs("div",{className:ye.bossPage,children:[c.jsxs("div",{className:ye.weekHeader,children:[c.jsx("span",{className:ye.weekLabel,children:"This Week's Challenge"}),c.jsxs("span",{className:ye.weekDates,children:[S(g),"  ",S(E)]})]}),x&&c.jsx("div",{className:ye.victoryBanner,children:c.jsxs("div",{className:ye.victoryContent,children:[c.jsx("span",{className:ye.victoryIcon,children:""}),c.jsxs("div",{className:ye.victoryText,children:[c.jsx("div",{className:ye.victoryTitle,children:"Victory!"}),c.jsxs("div",{className:ye.victorySubtitle,children:["You defeated ",n.name," this week!"]})]}),c.jsxs("div",{className:ye.victoryRewards,children:[c.jsxs("span",{className:ye.rewardItem,children:["+",n.xp_reward," XP"]}),n.bonus_shields>0&&c.jsxs("span",{className:ye.rewardItem,children:["+",n.bonus_shields," Shield",n.bonus_shields>1?"s":""]})]})]})}),c.jsxs("div",{className:ye.battleArena,children:[c.jsxs("div",{className:ye.fighterCard,children:[c.jsx("div",{className:ye.fighterSprite,children:c.jsx(p_,{level:s.level,stats:e,size:"large"})}),c.jsxs("div",{className:ye.fighterDetails,children:[c.jsx("div",{className:ye.fighterName,children:s.name}),c.jsxs("div",{className:ye.fighterTitle,children:["Level ",s.level," ",s.title]}),c.jsxs("div",{className:ye.fighterXP,children:[c.jsx(yl,{value:_.current,max:_.needed,color:"gold",showValue:!1}),c.jsxs("span",{className:ye.xpText,children:[_.current," / ",_.needed," XP"]})]})]})]}),c.jsxs("div",{className:ye.vsSection,children:[c.jsx("div",{className:ye.vsGlow}),c.jsx("div",{className:ye.vsText,children:"VS"}),c.jsxs("div",{className:ye.damageCounter,children:[c.jsx("div",{className:ye.damageValue,children:u}),c.jsx("div",{className:ye.damageLabel,children:"Total Damage"})]})]}),c.jsxs("div",{className:ye.fighterCard,children:[c.jsxs("div",{className:`${ye.bossSprite} ${x?ye.defeated:""}`,children:[c.jsx("span",{className:ye.bossIcon,children:n.icon}),!x&&c.jsx("div",{className:ye.bossAura})]}),c.jsxs("div",{className:ye.fighterDetails,children:[c.jsx("div",{className:`${ye.fighterName} ${ye.bossNameColor}`,children:n.name}),c.jsx("div",{className:ye.fighterTitle,children:n.description}),c.jsxs("div",{className:ye.bossHP,children:[c.jsx("div",{className:ye.hpBarContainer,children:c.jsx("div",{className:`${ye.hpBar} ${o<30?ye.lowHP:""}`,style:{width:`${o}%`}})}),c.jsxs("span",{className:ye.hpText,children:[n.current_hp," / ",n.max_hp," HP"]})]})]})]})]}),c.jsxs("div",{className:ye.statsGrid,children:[c.jsxs(xt,{className:ye.statCard,children:[c.jsx("div",{className:ye.statIcon,children:""}),c.jsx("div",{className:ye.statValue,children:u}),c.jsx("div",{className:ye.statLabel,children:"Damage This Week"})]}),c.jsxs(xt,{className:ye.statCard,children:[c.jsx("div",{className:ye.statIcon,children:""}),c.jsx("div",{className:ye.statValue,children:h}),c.jsx("div",{className:ye.statLabel,children:"Bosses Defeated"})]}),c.jsxs(xt,{className:ye.statCard,children:[c.jsx("div",{className:ye.statIcon,children:""}),c.jsxs("div",{className:ye.statValue,children:["+",n.xp_reward]}),c.jsx("div",{className:ye.statLabel,children:"XP Reward"})]}),c.jsxs(xt,{className:ye.statCard,children:[c.jsx("div",{className:ye.statIcon,children:""}),c.jsx("div",{className:ye.statValue,children:n.bonus_shields}),c.jsx("div",{className:ye.statLabel,children:"Shield Reward"})]})]}),!x&&c.jsxs(xt,{header:"How to Deal Damage",className:ye.damageGuide,children:[c.jsx("div",{className:ye.guideText,children:"Complete tasks to deal damage to the boss. Defeat the boss before the week ends to earn rewards!"}),c.jsxs("div",{className:ye.damageGrid,children:[c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Complete Step"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.step_completed," HP"]})]}),c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Activate Buff"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.buff_activated," HP"]})]}),c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Complete Quest"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.quest_completed," HP"]})]}),c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Complete Goal"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.goal_completed," HP"]})]}),c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Daily Quest"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.daily_quest_completed," HP"]})]}),c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Focus Session"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.focus_session," HP"]})]}),c.jsxs("div",{className:ye.damageItem,children:[c.jsx("span",{className:ye.damageAction,children:" Complete Routine"}),c.jsxs("span",{className:ye.damageAmount,children:["-",ur.routine_completed," HP"]})]})]}),c.jsxs("div",{className:ye.healSection,children:[c.jsx("div",{className:ye.healTitle,children:"Boss Heals When..."}),c.jsxs("div",{className:ye.healGrid,children:[c.jsxs("div",{className:ye.healItem,children:[c.jsx("span",{className:ye.healAction,children:" Activate Debuff"}),c.jsxs("span",{className:ye.healAmount,children:["+",dp.debuff_activated," HP"]})]}),c.jsxs("div",{className:ye.healItem,children:[c.jsx("span",{className:ye.healAction,children:" Miss a Step"}),c.jsxs("span",{className:ye.healAmount,children:["+",dp.step_missed," HP"]})]})]})]})]}),c.jsxs(xt,{header:"Boss Bestiary",className:ye.bestiary,children:[c.jsx("div",{className:ye.bestiaryText,children:"Face different bosses each week, each representing challenges to overcome."}),c.jsx("div",{className:ye.bestiaryGrid,children:up.map(w=>c.jsxs("div",{className:`${ye.bestiaryItem} ${n.boss_type===w.type?ye.currentBoss:""}`,children:[c.jsx("span",{className:ye.bestiaryIcon,children:w.icon}),c.jsxs("div",{className:ye.bestiaryInfo,children:[c.jsx("div",{className:ye.bestiaryName,children:w.name}),c.jsx("div",{className:ye.bestiaryDesc,children:w.description}),c.jsxs("div",{className:ye.bestiaryStats,children:[c.jsxs("span",{children:["HP: ",w.hpRange[0],"-",w.hpRange[1]]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["+",w.xpReward," XP"]}),w.bonusShields>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("span",{children:["+",w.bonusShields," Shield"]})]})]})]})]},w.type))})]})]})}const U9="_achievementPanel_13bl3_1",V9="_statsBar_13bl3_13",q9="_statItem_13bl3_33",B9="_statValue_13bl3_47",P9="_statLabel_13bl3_59",F9="_progressBarContainer_13bl3_73",G9="_progressLabel_13bl3_85",H9="_progressTrack_13bl3_99",z9="_progressFill_13bl3_115",X9="_categoryTabs_13bl3_129",$9="_categoryTab_13bl3_129",Y9="_active_13bl3_183",Q9="_categoryIcon_13bl3_195",K9="_categoryCount_13bl3_203",W9="_achievementGrid_13bl3_219",J9="_achievementCard_13bl3_231",Z9="_unlocked_13bl3_261",eV="_locked_13bl3_271",tV="_hidden_13bl3_279",nV="_achievementIcon_13bl3_287",sV="_achievementInfo_13bl3_335",iV="_achievementName_13bl3_345",aV="_achievementDesc_13bl3_367",rV="_achievementMeta_13bl3_379",oV="_achievementXp_13bl3_393",lV="_achievementProgress_13bl3_409",cV="_achievementProgressTrack_13bl3_423",uV="_achievementProgressFill_13bl3_441",dV="_achievementProgressText_13bl3_455",fV="_achievementUnlockDate_13bl3_469",hV="_emptyState_13bl3_479",mV="_unlockModal_13bl3_531",pV="_unlockIcon_13bl3_539",_V="_unlockTitle_13bl3_551",gV="_unlockDesc_13bl3_565",yV="_unlockReward_13bl3_577",st={achievementPanel:U9,statsBar:V9,statItem:q9,statValue:B9,statLabel:P9,progressBarContainer:F9,progressLabel:G9,progressTrack:H9,progressFill:z9,categoryTabs:X9,categoryTab:$9,active:Y9,categoryIcon:Q9,categoryCount:K9,achievementGrid:W9,achievementCard:J9,unlocked:Z9,locked:eV,hidden:tV,achievementIcon:nV,achievementInfo:sV,achievementName:iV,achievementDesc:aV,achievementMeta:rV,achievementXp:oV,achievementProgress:lV,achievementProgressTrack:cV,achievementProgressFill:uV,achievementProgressText:dV,achievementUnlockDate:fV,emptyState:hV,unlockModal:mV,unlockIcon:pV,unlockTitle:_V,unlockDesc:gV,unlockReward:yV},EV=["quests","buffs","streaks","boss","levels","special"];function vV({achievements:s,stats:e,loading:n,compact:a=!1}){const[o,u]=L.useState("all"),h=o==="all"?s:s.filter(_=>_.category===o),g=_=>{const S=s.filter(w=>w.category===_);return{unlocked:S.filter(w=>w.unlocked).length,total:S.length}},E=e.total>0?Math.round(e.unlocked/e.total*100):0;return n?c.jsx(xt,{header:"Achievements",children:c.jsx("div",{className:st.emptyState,children:"Loading achievements..."})}):c.jsx(xt,{header:"Achievements",glow:!0,children:c.jsxs("div",{className:st.achievementPanel,children:[c.jsxs("div",{className:st.statsBar,children:[c.jsxs("div",{className:st.statItem,children:[c.jsx("span",{className:st.statValue,children:e.unlocked}),c.jsx("span",{className:st.statLabel,children:"Unlocked"})]}),c.jsxs("div",{className:st.progressBarContainer,children:[c.jsxs("div",{className:st.progressLabel,children:[E,"% Complete"]}),c.jsx("div",{className:st.progressTrack,children:c.jsx("div",{className:st.progressFill,style:{width:`${E}%`}})})]}),c.jsxs("div",{className:st.statItem,children:[c.jsx("span",{className:st.statValue,children:e.earnedXp}),c.jsx("span",{className:st.statLabel,children:"XP Earned"})]})]}),c.jsxs("div",{className:st.categoryTabs,children:[c.jsxs("button",{className:`${st.categoryTab} ${o==="all"?st.active:""}`,onClick:()=>u("all"),children:[c.jsx("span",{className:st.categoryIcon,children:""}),"All",c.jsxs("span",{className:st.categoryCount,children:[e.unlocked,"/",e.total]})]}),EV.map(_=>{const S=g(_);return S.total===0?null:c.jsxs("button",{className:`${st.categoryTab} ${o===_?st.active:""}`,onClick:()=>u(_),children:[c.jsx("span",{className:st.categoryIcon,children:tx[_]}),ex[_],c.jsxs("span",{className:st.categoryCount,children:[S.unlocked,"/",S.total]})]},_)})]}),h.length===0?c.jsx("div",{className:st.emptyState,children:"No achievements in this category yet"}):c.jsx("div",{className:st.achievementGrid,children:h.map(_=>c.jsx(TV,{achievement:_},_.id))})]})})}function TV({achievement:s}){const e=`${st.achievementCard} ${s.unlocked?st.unlocked:st.locked} ${s.is_hidden&&!s.unlocked?st.hidden:""}`,n=a=>new Date(a+"Z").toLocaleDateString();return c.jsxs("div",{className:e,children:[c.jsx("div",{className:st.achievementIcon,children:s.icon}),c.jsxs("div",{className:st.achievementInfo,children:[c.jsx("div",{className:st.achievementName,children:s.is_hidden&&!s.unlocked?"???":s.name}),c.jsx("div",{className:st.achievementDesc,children:s.is_hidden&&!s.unlocked?"Hidden achievement":s.description}),c.jsxs("div",{className:st.achievementMeta,children:[c.jsxs("span",{className:st.achievementXp,children:["+",s.xp_reward," XP"]}),s.unlocked?c.jsxs("span",{className:st.achievementUnlockDate,children:["Unlocked ",n(s.unlocked_at)]}):c.jsxs("div",{className:st.achievementProgress,children:[c.jsx("div",{className:st.achievementProgressTrack,children:c.jsx("div",{className:st.achievementProgressFill,style:{width:`${s.progress_percent}%`}})}),c.jsxs("span",{className:st.achievementProgressText,children:[s.current_value,"/",s.requirement_value]})]})]})]})]})}function bV({unlock:s,onDismiss:e}){return s?c.jsx(Rl,{open:!0,onClose:e,title:"Achievement Unlocked!",actions:c.jsx(Be,{variant:"primary",onClick:e,children:"Awesome!"}),children:c.jsxs("div",{className:st.unlockModal,children:[c.jsx("div",{className:st.unlockIcon,children:s.achievement.icon}),c.jsx("div",{className:st.unlockTitle,children:s.achievement.name}),c.jsx("div",{className:st.unlockDesc,children:s.achievement.description}),c.jsxs("div",{className:st.unlockReward,children:["+",s.xpAwarded," XP"]})]})}):null}const SV="_focusTimerPanel_clj8g_1",NV="_timerContainer_clj8g_13",xV="_timerCircleWrapper_clj8g_33",wV="_timerCircle_clj8g_33",AV="_timerCircleBg_clj8g_55",RV="_timerCircleProgress_clj8g_67",CV="_work_clj8g_81",IV="_shortBreak_clj8g_89",kV="_longBreak_clj8g_97",LV="_idle_clj8g_105",jV="_timerDisplay_clj8g_113",DV="_timerTime_clj8g_129",OV="_timerPhase_clj8g_143",MV="_timerControls_clj8g_181",UV="_sessionCount_clj8g_191",VV="_sessionDot_clj8g_209",qV="_completed_clj8g_225",BV="_active_clj8g_235",PV="_statsGrid_clj8g_247",FV="_statCard_clj8g_259",GV="_statIcon_clj8g_279",HV="_statValue_clj8g_289",zV="_statLabel_clj8g_301",XV="_settingsGrid_clj8g_319",$V="_settingItem_clj8g_331",YV="_settingLabel_clj8g_343",QV="_settingInput_clj8g_353",KV="_toggleRow_clj8g_383",WV="_toggleLabel_clj8g_407",JV="_toggle_clj8g_383",ZV="_toggleKnob_clj8g_449",eq="_sessionList_clj8g_483",tq="_sessionItem_clj8g_495",nq="_cancelled_clj8g_523",sq="_sessionTime_clj8g_533",iq="_sessionInfo_clj8g_547",aq="_sessionXp_clj8g_559",ke={focusTimerPanel:SV,timerContainer:NV,timerCircleWrapper:xV,timerCircle:wV,timerCircleBg:AV,timerCircleProgress:RV,work:CV,shortBreak:IV,longBreak:kV,idle:LV,timerDisplay:jV,timerTime:DV,timerPhase:OV,timerControls:MV,sessionCount:UV,sessionDot:VV,completed:qV,active:BV,statsGrid:PV,statCard:FV,statIcon:GV,statValue:HV,statLabel:zV,settingsGrid:XV,settingItem:$V,settingLabel:YV,settingInput:QV,toggleRow:KV,toggleLabel:WV,toggle:JV,toggleKnob:ZV,sessionList:eq,sessionItem:tq,cancelled:nq,sessionTime:sq,sessionInfo:iq,sessionXp:aq};function rq({timeRemaining:s,totalTime:e,phase:n,formattedTime:a}){const g=192*Math.PI,E=e>0?s/e:1,_=g*(1-E),S={work:"Focus",short_break:"Short Break",long_break:"Long Break",idle:"Ready"}[n];return c.jsxs("div",{className:ke.timerCircleWrapper,children:[c.jsxs("svg",{className:ke.timerCircle,width:200,height:200,children:[c.jsx("circle",{className:ke.timerCircleBg,cx:200/2,cy:200/2,r:96}),c.jsx("circle",{className:`${ke.timerCircleProgress} ${n==="work"?ke.work:n==="short_break"?ke.shortBreak:n==="long_break"?ke.longBreak:ke.idle}`,cx:200/2,cy:200/2,r:96,strokeDasharray:g,strokeDashoffset:_})]}),c.jsxs("div",{className:ke.timerDisplay,children:[c.jsx("div",{className:ke.timerTime,children:a}),c.jsx("div",{className:`${ke.timerPhase} ${n==="work"?ke.work:n==="short_break"?ke.shortBreak:n==="long_break"?ke.longBreak:""}`,children:S})]})]})}function oq({settings:s,onUpdateSettings:e}){return c.jsxs(xt,{header:"Timer Settings",children:[c.jsxs("div",{className:ke.settingsGrid,children:[c.jsxs("div",{className:ke.settingItem,children:[c.jsx("label",{className:ke.settingLabel,children:"Work Duration (min)"}),c.jsx("input",{type:"number",className:ke.settingInput,value:s.work_duration,onChange:n=>e({work_duration:Number(n.target.value)}),min:1,max:120})]}),c.jsxs("div",{className:ke.settingItem,children:[c.jsx("label",{className:ke.settingLabel,children:"Short Break (min)"}),c.jsx("input",{type:"number",className:ke.settingInput,value:s.short_break,onChange:n=>e({short_break:Number(n.target.value)}),min:1,max:30})]}),c.jsxs("div",{className:ke.settingItem,children:[c.jsx("label",{className:ke.settingLabel,children:"Long Break (min)"}),c.jsx("input",{type:"number",className:ke.settingInput,value:s.long_break,onChange:n=>e({long_break:Number(n.target.value)}),min:1,max:60})]}),c.jsxs("div",{className:ke.settingItem,children:[c.jsx("label",{className:ke.settingLabel,children:"Sessions Before Long Break"}),c.jsx("input",{type:"number",className:ke.settingInput,value:s.sessions_before_long_break,onChange:n=>e({sessions_before_long_break:Number(n.target.value)}),min:1,max:10})]})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{className:ke.toggleRow,children:[c.jsx("span",{className:ke.toggleLabel,children:"Auto-start breaks"}),c.jsx("div",{className:`${ke.toggle} ${s.auto_start_breaks?ke.active:""}`,onClick:()=>e({auto_start_breaks:!s.auto_start_breaks}),children:c.jsx("div",{className:ke.toggleKnob})})]}),c.jsxs("div",{className:ke.toggleRow,children:[c.jsx("span",{className:ke.toggleLabel,children:"Sound notifications"}),c.jsx("div",{className:`${ke.toggle} ${s.sound_enabled?ke.active:""}`,onClick:()=>e({sound_enabled:!s.sound_enabled}),children:c.jsx("div",{className:ke.toggleKnob})})]})]})]})}function lq({settings:s,stats:e,timerState:n,recentSessions:a,onStartWork:o,onStartBreak:u,onPause:h,onResume:g,onStop:E,onSkipBreak:_,onUpdateSettings:S,formatTime:x}){const[w,B]=L.useState(!1),G=()=>{switch(n.phase){case"work":return s.work_duration*60;case"short_break":return s.short_break*60;case"long_break":return s.long_break*60;default:return s.work_duration*60}},U=s.sessions_before_long_break-n.sessionsCompleted%s.sessions_before_long_break;return c.jsxs("div",{className:ke.focusTimerPanel,children:[c.jsx(xt,{header:"Focus Timer",glow:!0,children:c.jsxs("div",{className:ke.timerContainer,children:[c.jsx(rq,{timeRemaining:n.timeRemaining,totalTime:G(),phase:n.phase,formattedTime:x(n.timeRemaining)}),c.jsxs("div",{className:ke.timerControls,children:[n.phase==="idle"&&c.jsx(Be,{variant:"primary",onClick:()=>o(),children:"Start Focus"}),n.phase==="work"&&n.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Be,{variant:"ghost",onClick:h,children:"Pause"}),c.jsx(Be,{variant:"danger",onClick:E,children:"Stop"})]}),n.phase==="work"&&!n.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Be,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Be,{variant:"danger",onClick:E,children:"Stop"})]}),(n.phase==="short_break"||n.phase==="long_break")&&c.jsxs(c.Fragment,{children:[n.isRunning?c.jsx(Be,{variant:"ghost",onClick:h,children:"Pause"}):c.jsx(Be,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Be,{variant:"ghost",onClick:_,children:"Skip Break"})]})]}),c.jsxs("div",{className:ke.sessionCount,children:[Array.from({length:s.sessions_before_long_break}).map((q,z)=>c.jsx("div",{className:`${ke.sessionDot} ${z<n.sessionsCompleted%s.sessions_before_long_break?ke.completed:""} ${z===n.sessionsCompleted%s.sessions_before_long_break&&n.phase==="work"?ke.active:""}`},z)),c.jsxs("span",{style:{marginLeft:8},children:[U," until long break"]})]})]})}),c.jsxs("div",{className:ke.statsGrid,children:[c.jsxs("div",{className:ke.statCard,children:[c.jsx("span",{className:ke.statIcon,children:""}),c.jsx("span",{className:ke.statValue,children:e.total_sessions}),c.jsx("span",{className:ke.statLabel,children:"Total Sessions"})]}),c.jsxs("div",{className:ke.statCard,children:[c.jsx("span",{className:ke.statIcon,children:""}),c.jsxs("span",{className:ke.statValue,children:[Math.round(e.total_minutes/60),"h"]}),c.jsx("span",{className:ke.statLabel,children:"Total Focus"})]}),c.jsxs("div",{className:ke.statCard,children:[c.jsx("span",{className:ke.statIcon,children:""}),c.jsx("span",{className:ke.statValue,children:e.current_streak}),c.jsx("span",{className:ke.statLabel,children:"Current Streak"})]}),c.jsxs("div",{className:ke.statCard,children:[c.jsx("span",{className:ke.statIcon,children:""}),c.jsx("span",{className:ke.statValue,children:e.today_sessions}),c.jsx("span",{className:ke.statLabel,children:"Today"})]})]}),c.jsx(Be,{variant:"ghost",size:"small",onClick:()=>B(!w),children:w?"Hide Settings":"Timer Settings"}),w&&c.jsx(oq,{settings:s,onUpdateSettings:S}),a.length>0&&c.jsx(xt,{header:"Recent Sessions",children:c.jsx("div",{className:ke.sessionList,children:a.slice(0,5).map(q=>c.jsxs("div",{className:`${ke.sessionItem} ${q.status==="completed"?ke.completed:ke.cancelled}`,children:[c.jsxs("span",{className:ke.sessionTime,children:[q.duration_minutes,"m"]}),c.jsx("span",{className:ke.sessionInfo,children:new Date(q.started_at+"Z").toLocaleString()}),q.status==="completed"&&q.xp_earned>0&&c.jsxs("span",{className:ke.sessionXp,children:["+",q.xp_earned," XP"]})]},q.id))})})]})}const cq="_routinePanel_1b2ro_1",uq="_routineGrid_1b2ro_13",dq="_routineCard_1b2ro_25",fq="_morning_1b2ro_53",hq="_evening_1b2ro_61",mq="_custom_1b2ro_69",pq="_completed_1b2ro_77",_q="_routineHeader_1b2ro_87",gq="_routineInfo_1b2ro_101",yq="_routineName_1b2ro_109",Eq="_routineType_1b2ro_123",vq="_routineStreak_1b2ro_177",Tq="_routineDesc_1b2ro_201",bq="_routineProgress_1b2ro_213",Sq="_progressTrack_1b2ro_227",Nq="_progressFill_1b2ro_243",xq="_progressText_1b2ro_257",wq="_stepsList_1b2ro_271",Aq="_stepItem_1b2ro_283",Rq="_skipped_1b2ro_313",Cq="_optional_1b2ro_323",Iq="_stepCheckbox_1b2ro_331",kq="_checked_1b2ro_365",Lq="_stepInfo_1b2ro_377",jq="_stepTitle_1b2ro_385",Dq="_stepMeta_1b2ro_395",Oq="_stepDuration_1b2ro_411",Mq="_optionalBadge_1b2ro_423",Uq="_stepActions_1b2ro_439",Vq="_routineActions_1b2ro_449",qq="_formSection_1b2ro_467",Bq="_formRow_1b2ro_487",Pq="_emptyState_1b2ro_505",Ze={routinePanel:cq,routineGrid:uq,routineCard:dq,morning:fq,evening:hq,custom:mq,completed:pq,routineHeader:_q,routineInfo:gq,routineName:yq,routineType:Eq,routineStreak:vq,routineDesc:Tq,routineProgress:bq,progressTrack:Sq,progressFill:Nq,progressText:xq,stepsList:wq,stepItem:Aq,skipped:Rq,optional:Cq,stepCheckbox:Iq,checked:kq,stepInfo:Lq,stepTitle:jq,stepMeta:Dq,stepDuration:Oq,optionalBadge:Mq,stepActions:Uq,routineActions:Vq,formSection:qq,formRow:Bq,emptyState:Pq};function Fq({routines:s,loading:e,onCreateRoutine:n,onDeleteRoutine:a,onStartRoutine:o,onCompleteStep:u,onSkipStep:h,onAddStep:g,onDeleteStep:E,getStepsWithStatus:_,compact:S=!1}){const[x,w]=L.useState(!1),[B,G]=L.useState(null),[U,q]=L.useState(""),[z,H]=L.useState("morning"),[K,ie]=L.useState(""),[Ee,ge]=L.useState(25),D=()=>{q(""),H("morning"),ie(""),ge(25)},A=()=>{U.trim()&&(n(U.trim(),z,K.trim(),Ee),D(),w(!1))},j=s.filter(O=>O.type==="morning"),V=s.filter(O=>O.type==="evening"),M=s.filter(O=>O.type==="custom");return e?c.jsx(xt,{header:"Routines",children:c.jsx("div",{className:Ze.emptyState,children:"Loading routines..."})}):c.jsxs("div",{className:Ze.routinePanel,children:[c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:c.jsx(Be,{variant:"primary",onClick:()=>{D(),w(!0)},children:"+ New Routine"})}),s.length===0?c.jsx(xt,{header:"Routines",children:c.jsx("div",{className:Ze.emptyState,children:"No routines yet. Create your first morning or evening routine!"})}):c.jsxs(c.Fragment,{children:[j.length>0&&c.jsx(xt,{header:"Morning Routines",children:c.jsx("div",{className:Ze.routineGrid,children:j.map(O=>c.jsx(Om,{routine:O,stepsWithStatus:_(O.id),onStart:()=>o(O.id),onCompleteStep:k=>u(O.id,k),onSkipStep:k=>h(O.id,k),onEdit:()=>G(O.id),onDelete:()=>a(O.id)},O.id))})}),V.length>0&&c.jsx(xt,{header:"Evening Routines",children:c.jsx("div",{className:Ze.routineGrid,children:V.map(O=>c.jsx(Om,{routine:O,stepsWithStatus:_(O.id),onStart:()=>o(O.id),onCompleteStep:k=>u(O.id,k),onSkipStep:k=>h(O.id,k),onEdit:()=>G(O.id),onDelete:()=>a(O.id)},O.id))})}),M.length>0&&c.jsx(xt,{header:"Custom Routines",children:c.jsx("div",{className:Ze.routineGrid,children:M.map(O=>c.jsx(Om,{routine:O,stepsWithStatus:_(O.id),onStart:()=>o(O.id),onCompleteStep:k=>u(O.id,k),onSkipStep:k=>h(O.id,k),onEdit:()=>G(O.id),onDelete:()=>a(O.id)},O.id))})})]}),c.jsx(Rl,{open:x,onClose:()=>w(!1),title:"Create Routine",actions:c.jsxs(c.Fragment,{children:[c.jsx(Be,{onClick:()=>w(!1),children:"Cancel"}),c.jsx(Be,{variant:"primary",onClick:A,children:"Create"})]}),children:c.jsxs("div",{className:Ze.formSection,children:[c.jsx(Xi,{label:"Name",value:U,onChange:O=>q(O.target.value),placeholder:"e.g., Morning Power-Up"}),c.jsxs("div",{className:Ze.formRow,children:[c.jsxs(Ta,{label:"Type",value:z,onChange:O=>H(O.target.value),children:[c.jsx("option",{value:"morning",children:"Morning"}),c.jsx("option",{value:"evening",children:"Evening"}),c.jsx("option",{value:"custom",children:"Custom"})]}),c.jsx(Xi,{label:"Bonus XP",type:"number",value:Ee,onChange:O=>ge(Number(O.target.value)),min:0,max:200})]}),c.jsx(Od,{label:"Description",value:K,onChange:O=>ie(O.target.value),placeholder:"Describe this routine..."})]})}),B&&c.jsx(Gq,{routine:s.find(O=>O.id===B),onClose:()=>G(null),onAddStep:g,onDeleteStep:E})]})}function Om({routine:s,stepsWithStatus:e,onStart:n,onCompleteStep:a,onSkipStep:o,onEdit:u,onDelete:h}){const g=s.todayLog!==void 0,E=s.todayLog?.is_completed||!1,_=e.filter(w=>w.is_completed).length,S=e.length,x=S>0?Math.round(_/S*100):0;return c.jsxs("div",{className:`${Ze.routineCard} ${Ze[s.type]} ${E?Ze.completed:""}`,children:[c.jsxs("div",{className:Ze.routineHeader,children:[c.jsxs("div",{className:Ze.routineInfo,children:[c.jsx("div",{className:Ze.routineName,children:s.name}),c.jsxs("span",{className:`${Ze.routineType} ${Ze[s.type]}`,children:[s.type==="morning"?"":s.type==="evening"?"":""," ",s.type]})]}),s.streak&&s.streak.current_streak>0&&c.jsxs("div",{className:Ze.routineStreak,children:[" ",s.streak.current_streak," day",s.streak.current_streak!==1?"s":""]})]}),s.description&&c.jsx("div",{className:Ze.routineDesc,children:s.description}),g&&c.jsxs("div",{className:Ze.routineProgress,children:[c.jsx("div",{className:Ze.progressTrack,children:c.jsx("div",{className:Ze.progressFill,style:{width:`${x}%`}})}),c.jsxs("span",{className:Ze.progressText,children:[_,"/",S]})]}),g&&e.length>0&&c.jsx("div",{className:Ze.stepsList,children:e.map(w=>c.jsxs("div",{className:`${Ze.stepItem} ${w.is_completed?Ze.completed:""} ${w.skipped?Ze.skipped:""} ${w.is_optional?Ze.optional:""}`,children:[c.jsx("div",{className:`${Ze.stepCheckbox} ${w.is_completed?Ze.checked:""}`,onClick:()=>!w.is_completed&&!w.skipped&&!E&&a(w.id),children:w.is_completed&&""}),c.jsxs("div",{className:Ze.stepInfo,children:[c.jsx("div",{className:Ze.stepTitle,children:w.title}),c.jsxs("div",{className:Ze.stepMeta,children:[c.jsxs("span",{className:Ze.stepDuration,children:[" ",w.duration_minutes,"m"]}),w.is_optional&&c.jsx("span",{className:Ze.optionalBadge,children:"Optional"})]})]}),!w.is_completed&&!w.skipped&&!E&&w.is_optional&&c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>o(w.id),children:"Skip"})]},w.id))}),c.jsxs("div",{className:Ze.routineActions,children:[!g&&s.steps.length>0&&c.jsx(Be,{variant:"primary",onClick:n,children:"Start Routine"}),E&&c.jsxs("span",{style:{color:"var(--buff-color)",fontFamily:"var(--font-heading)"},children:[" Completed Today (+",s.todayLog?.xp_earned||s.bonus_xp," XP)"]}),c.jsx("div",{style:{flex:1}}),c.jsx(Be,{size:"small",variant:"ghost",onClick:u,children:"Edit"}),c.jsx(Be,{size:"small",variant:"danger",onClick:h,children:"Delete"})]})]})}function Gq({routine:s,onClose:e,onAddStep:n,onDeleteStep:a}){const[o,u]=L.useState(""),[h,g]=L.useState(""),[E,_]=L.useState(5),[S,x]=L.useState(!1),w=()=>{o.trim()&&(n(s.id,o.trim(),h.trim(),null,E,S),u(""),g(""),_(5),x(!1))};return c.jsx(Rl,{open:!0,onClose:e,title:`Edit: ${s.name}`,actions:c.jsx(Be,{onClick:e,children:"Done"}),children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[c.jsxs("div",{className:Ze.formSection,children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Add Step"}),c.jsx(Xi,{label:"Step Title",value:o,onChange:B=>u(B.target.value),placeholder:"e.g., Drink water"}),c.jsxs("div",{className:Ze.formRow,children:[c.jsx(Xi,{label:"Duration (min)",type:"number",value:E,onChange:B=>_(Number(B.target.value)),min:1,max:120}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,paddingTop:20},children:[c.jsx("input",{type:"checkbox",checked:S,onChange:B=>x(B.target.checked)}),c.jsx("label",{children:"Optional"})]})]}),c.jsx(Be,{variant:"primary",onClick:w,children:"Add Step"})]}),s.steps.length>0&&c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Current Steps"}),c.jsx("div",{className:Ze.stepsList,children:s.steps.map((B,G)=>c.jsxs("div",{className:`${Ze.stepItem} ${B.is_optional?Ze.optional:""}`,children:[c.jsxs("span",{style:{color:"var(--text-dim)",minWidth:24},children:[G+1,"."]}),c.jsxs("div",{className:Ze.stepInfo,children:[c.jsx("div",{className:Ze.stepTitle,children:B.title}),c.jsxs("div",{className:Ze.stepMeta,children:[c.jsxs("span",{className:Ze.stepDuration,children:[" ",B.duration_minutes,"m"]}),B.is_optional&&c.jsx("span",{className:Ze.optionalBadge,children:"Optional"})]})]}),c.jsx(Be,{size:"small",variant:"danger",onClick:()=>a(B.id),children:"Remove"})]},B.id))})]})]})})}const Hq="_comboPanel_1yu75_1",zq="_comboGrid_1yu75_13",Xq="_comboCard_1yu75_25",$q="_ready_1yu75_53",Yq="_inProgress_1yu75_65",Qq="_comboHeader_1yu75_73",Kq="_comboIcon_1yu75_87",Wq="_comboInfo_1yu75_95",Jq="_comboName_1yu75_103",Zq="_comboXp_1yu75_115",eB="_comboDesc_1yu75_127",tB="_comboBuffs_1yu75_139",nB="_comboBuff_1yu75_139",sB="_active_1yu75_177",iB="_missing_1yu75_189",aB="_buffCheck_1yu75_197",rB="_comboProgress_1yu75_205",oB="_progressTrack_1yu75_219",lB="_progressFill_1yu75_235",cB="_complete_1yu75_249",uB="_progressText_1yu75_257",dB="_comboActions_1yu75_271",fB="_emptyState_1yu75_313",Gt={comboPanel:Hq,comboGrid:zq,comboCard:Xq,ready:$q,inProgress:Yq,comboHeader:Qq,comboIcon:Kq,comboInfo:Wq,comboName:Jq,comboXp:Zq,comboDesc:eB,comboBuffs:tB,comboBuff:nB,active:sB,missing:iB,buffCheck:aB,comboProgress:rB,progressTrack:oB,progressFill:lB,complete:cB,progressText:uB,comboActions:dB,emptyState:fB};function hB({combos:s,loading:e,onClaimCombo:n,compact:a=!1}){const o=s.filter(g=>g.is_ready),u=s.filter(g=>g.progress>0&&!g.is_ready),h=s.filter(g=>g.progress===0);return e?c.jsx(xt,{header:"Habit Combos",children:c.jsx("div",{className:Gt.emptyState,children:"Loading combos..."})}):s.length===0?c.jsx(xt,{header:"Habit Combos",children:c.jsx("div",{className:Gt.emptyState,children:"No combos available. Create buff definitions to unlock combos!"})}):c.jsxs("div",{className:Gt.comboPanel,children:[o.length>0&&c.jsx(xt,{header:"Ready to Claim!",glow:!0,children:c.jsx("div",{className:Gt.comboGrid,children:o.map(g=>c.jsx(Mm,{combo:g,onClaim:()=>n(g.id)},g.id))})}),u.length>0&&c.jsx(xt,{header:"In Progress",children:c.jsx("div",{className:Gt.comboGrid,children:u.map(g=>c.jsx(Mm,{combo:g},g.id))})}),h.length>0&&c.jsx(xt,{header:"Available Combos",children:c.jsx("div",{className:Gt.comboGrid,children:h.map(g=>c.jsx(Mm,{combo:g},g.id))})})]})}function Mm({combo:s,onClaim:e}){const n=JSON.parse(s.required_buffs);return c.jsxs("div",{className:`${Gt.comboCard} ${s.is_ready?Gt.ready:s.progress>0?Gt.inProgress:""}`,children:[c.jsxs("div",{className:Gt.comboHeader,children:[c.jsx("span",{className:Gt.comboIcon,children:s.icon}),c.jsxs("div",{className:Gt.comboInfo,children:[c.jsx("div",{className:Gt.comboName,children:s.name}),c.jsxs("div",{className:Gt.comboXp,children:["+",s.bonus_xp," XP"]})]})]}),c.jsx("div",{className:Gt.comboDesc,children:s.description}),c.jsx("div",{className:Gt.comboBuffs,children:s.required_buff_names.map((a,o)=>{const u=n[o],h=s.active_buff_ids.includes(u);return c.jsxs("div",{className:`${Gt.comboBuff} ${h?Gt.active:Gt.missing}`,children:[c.jsx("span",{className:Gt.buffCheck,children:h?"":""}),a]},o)})}),c.jsxs("div",{className:Gt.comboProgress,children:[c.jsx("div",{className:Gt.progressTrack,children:c.jsx("div",{className:`${Gt.progressFill} ${s.progress===100?Gt.complete:""}`,style:{width:`${s.progress}%`}})}),c.jsxs("span",{className:Gt.progressText,children:[s.progress,"%"]})]}),s.is_ready&&e&&c.jsx("div",{className:Gt.comboActions,children:c.jsx(Be,{variant:"primary",onClick:e,style:{width:"100%"},children:"Claim Combo!"})}),s.last_activated&&!s.is_ready&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textAlign:"center"},children:["Last claimed: ",new Date(s.last_activated+"Z").toLocaleDateString()]})]})}const mB="_weeklyReviewPanel_1ro8g_1",pB="_weekHeader_1ro8g_13",_B="_weekTitle_1ro8g_27",gB="_weekDates_1ro8g_39",yB="_summaryGrid_1ro8g_49",EB="_summaryCard_1ro8g_61",vB="_summaryIcon_1ro8g_83",TB="_summaryValue_1ro8g_93",bB="_summaryLabel_1ro8g_105",SB="_highlight_1ro8g_121",NB="_reflectionSection_1ro8g_131",xB="_reflectionField_1ro8g_143",wB="_reflectionLabel_1ro8g_155",AB="_reflectionIcon_1ro8g_173",RB="_reflectionTextarea_1ro8g_181",CB="_prioritiesSection_1ro8g_223",IB="_priorityInput_1ro8g_235",kB="_priorityList_1ro8g_277",LB="_priorityItem_1ro8g_289",jB="_priorityNumber_1ro8g_309",DB="_priorityText_1ro8g_321",OB="_removeBtn_1ro8g_331",MB="_completedBanner_1ro8g_357",UB="_completedIcon_1ro8g_385",VB="_actions_1ro8g_393",qB="_emptyState_1ro8g_497",BB="_compactPanel_1ro8g_533",PB="_compactMessage_1ro8g_545",FB="_compactCompletedBanner_1ro8g_559",GB="_compactSummary_1ro8g_587",HB="_compactStat_1ro8g_601",zB="_compactActions_1ro8g_631",ze={weeklyReviewPanel:mB,weekHeader:pB,weekTitle:_B,weekDates:gB,summaryGrid:yB,summaryCard:EB,summaryIcon:vB,summaryValue:TB,summaryLabel:bB,highlight:SB,reflectionSection:NB,reflectionField:xB,reflectionLabel:wB,reflectionIcon:AB,reflectionTextarea:RB,prioritiesSection:CB,priorityInput:IB,priorityList:kB,priorityItem:LB,priorityNumber:jB,priorityText:DB,removeBtn:OB,completedBanner:MB,completedIcon:UB,actions:VB,emptyState:qB,compactPanel:BB,compactMessage:PB,compactCompletedBanner:FB,compactSummary:GB,compactStat:HB,compactActions:zB};function XB({currentReview:s,loading:e,onGenerateSummary:n,onUpdateContent:a,onCompleteReview:o,getSummaryFromReview:u,getPrioritiesFromReview:h,getWeekStart:g,compact:E=!1}){const[_,S]=L.useState(""),[x,w]=L.useState(""),[B,G]=L.useState([]),[U,q]=L.useState(""),[z,H]=L.useState(""),[K,ie]=L.useState(null),[Ee,ge]=L.useState(!1);L.useEffect(()=>{s&&(S(s.wins),w(s.challenges),G(h(s)),q(s.notes),ie(u(s)))},[s,u,h]);const D=async()=>{ge(!0);const{summary:Ae}=await n();ie(Ae),ge(!1)},A=()=>{if(!z.trim()||B.length>=5)return;const Ae=[...B,z.trim()];G(Ae),H(""),a(_,x,Ae,U)},j=Ae=>{const Je=B.filter((se,Te)=>Te!==Ae);G(Je),a(_,x,Je,U)},V=()=>{a(_,x,B,U)},M=()=>{V(),o()},O=Ae=>{const Je=new Date(Ae),se=new Date(Ae);return se.setDate(se.getDate()+6),`${Je.toLocaleDateString()} - ${se.toLocaleDateString()}`};if(e)return c.jsx(xt,{header:"Weekly Review",children:c.jsx("div",{className:ze.emptyState,children:"Loading..."})});if(E){const Ae=s?.is_completed,Je=s?u(s):K;return!s&&!K?c.jsxs("div",{className:ze.compactPanel,children:[c.jsx("p",{className:ze.compactMessage,children:"Generate your weekly summary to review your progress!"}),c.jsx(Be,{variant:"primary",size:"small",onClick:D,disabled:Ee,children:Ee?"Generating...":"Generate Summary"})]}):c.jsxs("div",{className:ze.compactPanel,children:[Ae&&c.jsxs("div",{className:ze.compactCompletedBanner,children:[" Completed (+",s?.xp_earned||hl," XP)"]}),Je&&c.jsxs("div",{className:ze.compactSummary,children:[c.jsxs("div",{className:ze.compactStat,children:[c.jsx("span",{children:""})," ",Je.steps_completed," Steps"]}),c.jsxs("div",{className:ze.compactStat,children:[c.jsx("span",{children:""})," ",Je.quests_completed," Quests"]}),c.jsxs("div",{className:ze.compactStat,children:[c.jsx("span",{children:""})," ",Je.xp_earned," XP"]}),c.jsxs("div",{className:ze.compactStat,children:[c.jsx("span",{children:""})," ",Je.focus_sessions," Focus"]})]}),!Ae&&c.jsx("div",{className:ze.compactActions,children:c.jsxs(Be,{variant:"primary",size:"small",onClick:M,children:["Complete Review (+",hl," XP)"]})})]})}if(!s&&!K)return c.jsx(xt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:ze.weeklyReviewPanel,children:[c.jsxs("div",{className:ze.weekHeader,children:[c.jsx("span",{className:ze.weekTitle,children:"This Week's Review"}),c.jsx("span",{className:ze.weekDates,children:O(g())})]}),c.jsxs("div",{className:ze.emptyState,children:[c.jsx("p",{children:"Generate your weekly summary to review your progress!"}),c.jsx(Be,{variant:"primary",onClick:D,disabled:Ee,style:{marginTop:16},children:Ee?"Generating...":"Generate Summary"})]})]})});const k=s?.is_completed;return c.jsx(xt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:ze.weeklyReviewPanel,children:[c.jsxs("div",{className:ze.weekHeader,children:[c.jsxs("span",{className:ze.weekTitle,children:["Week of ",s?.week_start||g()]}),c.jsx("span",{className:ze.weekDates,children:O(s?.week_start||g())})]}),k&&c.jsxs("div",{className:ze.completedBanner,children:[c.jsx("span",{className:ze.completedIcon,children:""}),"Review Completed (+",s?.xp_earned||hl," XP)"]}),K&&c.jsxs("div",{className:ze.summaryGrid,children:[c.jsx(cr,{icon:"",value:K.steps_completed,label:"Steps"}),c.jsx(cr,{icon:"",value:K.quests_completed,label:"Quests"}),c.jsx(cr,{icon:"",value:K.goals_completed,label:"Goals",highlight:!0}),c.jsx(cr,{icon:"",value:K.buffs_activated,label:"Buffs"}),c.jsx(cr,{icon:"",value:K.xp_earned,label:"XP Earned",highlight:!0}),c.jsx(cr,{icon:"",value:K.boss_damage_dealt,label:"Boss Dmg"}),c.jsx(cr,{icon:"",value:K.focus_sessions,label:"Focus"}),c.jsx(cr,{icon:"",value:K.routines_completed,label:"Routines"})]}),c.jsxs("div",{className:ze.reflectionSection,children:[c.jsxs("div",{className:ze.reflectionField,children:[c.jsxs("label",{className:ze.reflectionLabel,children:[c.jsx("span",{className:ze.reflectionIcon,children:""}),"Wins This Week"]}),c.jsx("textarea",{className:ze.reflectionTextarea,value:_,onChange:Ae=>S(Ae.target.value),onBlur:V,placeholder:"What went well? What are you proud of?",disabled:k})]}),c.jsxs("div",{className:ze.reflectionField,children:[c.jsxs("label",{className:ze.reflectionLabel,children:[c.jsx("span",{className:ze.reflectionIcon,children:""}),"Challenges & Learnings"]}),c.jsx("textarea",{className:ze.reflectionTextarea,value:x,onChange:Ae=>w(Ae.target.value),onBlur:V,placeholder:"What was difficult? What did you learn?",disabled:k})]}),c.jsxs("div",{className:ze.reflectionField,children:[c.jsxs("label",{className:ze.reflectionLabel,children:[c.jsx("span",{className:ze.reflectionIcon,children:""}),"Priorities for Next Week (up to 5)"]}),c.jsxs("div",{className:ze.prioritiesSection,children:[!k&&B.length<5&&c.jsxs("div",{className:ze.priorityInput,children:[c.jsx("input",{type:"text",value:z,onChange:Ae=>H(Ae.target.value),placeholder:"Add a priority...",onKeyDown:Ae=>Ae.key==="Enter"&&A()}),c.jsx(Be,{size:"small",onClick:A,children:"Add"})]}),B.length>0&&c.jsx("div",{className:ze.priorityList,children:B.map((Ae,Je)=>c.jsxs("div",{className:ze.priorityItem,children:[c.jsxs("span",{className:ze.priorityNumber,children:[Je+1,"."]}),c.jsx("span",{className:ze.priorityText,children:Ae}),!k&&c.jsx("button",{className:ze.removeBtn,onClick:()=>j(Je),children:""})]},Je))})]})]}),c.jsxs("div",{className:ze.reflectionField,children:[c.jsxs("label",{className:ze.reflectionLabel,children:[c.jsx("span",{className:ze.reflectionIcon,children:""}),"Additional Notes"]}),c.jsx("textarea",{className:ze.reflectionTextarea,value:U,onChange:Ae=>q(Ae.target.value),onBlur:V,placeholder:"Any other thoughts or notes...",disabled:k})]})]}),!k&&c.jsxs("div",{className:ze.actions,children:[c.jsx(Be,{variant:"ghost",onClick:D,disabled:Ee,children:"Refresh Summary"}),c.jsxs(Be,{variant:"primary",onClick:M,children:["Complete Review (+",hl," XP)"]})]})]})})}function cr({icon:s,value:e,label:n,highlight:a}){return c.jsxs("div",{className:`${ze.summaryCard} ${a?ze.highlight:""}`,children:[c.jsx("span",{className:ze.summaryIcon,children:s}),c.jsx("span",{className:ze.summaryValue,children:e}),c.jsx("span",{className:ze.summaryLabel,children:n})]})}const $B="_guideButton_1u1py_1",YB="_guideOverlay_1u1py_71",QB="_guideContainer_1u1py_95",KB="_guideHeader_1u1py_159",WB="_guideTitle_1u1py_177",JB="_closeButton_1u1py_191",ZB="_guideContent_1u1py_229",e7="_table_1u1py_335",t7="_tocList_1u1py_393",n7="_tocItem_1u1py_411",Gn={guideButton:$B,guideOverlay:YB,guideContainer:QB,guideHeader:KB,guideTitle:WB,closeButton:JB,guideContent:ZB,table:e7,tocList:t7,tocItem:n7};function s7(){const[s,e]=L.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:Gn.guideButton,onClick:()=>e(!0),title:"Open Guide",children:"?"}),s&&c.jsx(i7,{onClose:()=>e(!1)})]})}function i7({onClose:s}){const e=L.useRef(null);L.useEffect(()=>{const a=o=>{o.key==="Escape"&&s()};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=""}},[s]);const n=a=>{e.current?.querySelector(`#${a}`)?.scrollIntoView({behavior:"smooth"})};return c.jsx("div",{className:Gn.guideOverlay,onClick:s,children:c.jsxs("div",{className:Gn.guideContainer,onClick:a=>a.stopPropagation(),ref:e,children:[c.jsxs("div",{className:Gn.guideHeader,children:[c.jsx("span",{className:Gn.guideTitle,children:"Adventurer's Guide"}),c.jsx("button",{className:Gn.closeButton,onClick:s,children:"Close"})]}),c.jsx("ul",{className:Gn.tocList,children:["overview","character","quests","buffs","achievements","energy","focus","routines","combos","review","events","skills","classes","territory","inventory","xp","levels","stats","tips","data"].map(a=>c.jsx("li",{className:Gn.tocItem,onClick:()=>n(`guide-${a}`),children:{xp:"XP System",data:"Save Data",achievements:"Achievements",energy:"Energy",focus:"Focus Timer",routines:"Routines",combos:"Habit Combos",review:"Weekly Review",events:"Random Events",skills:"Skill Trees",classes:"Classes",territory:"Territory Map",inventory:"Inventory"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},a))}),c.jsxs("div",{className:Gn.guideContent,children:[c.jsx("h2",{id:"guide-overview",children:"Overview"}),c.jsxs("p",{children:["Goal Game turns your real-life goals into an RPG adventure. You create ",c.jsx("strong",{children:"Goals"})," (big-picture ambitions), break them into ",c.jsx("strong",{children:"Quests"})," (projects), and then into ",c.jsx("strong",{children:"Steps"})," (individual tasks). Completing steps earns ",c.jsx("strong",{children:"XP"}),", which levels up your character."]}),c.jsxs("p",{children:["Track daily habits as ",c.jsx("strong",{children:"Buffs"})," (positive) and ",c.jsx("strong",{children:"Debuffs"})," (negative) that affect your character's stats."]}),c.jsx("h2",{id:"guide-character",children:"Character Screen"}),c.jsx("p",{children:"Your character screen shows your current progress at a glance."}),c.jsx("h3",{children:"What you'll see"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Name"}),`  Tap "Rename" to change your character's name.`]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Level & Title"}),'  Your current level and rank title (e.g., "Novice", "Adept"). Titles change automatically as you level up.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP Bar"}),"  Shows progress toward your next level. The numbers show current XP in this level / XP needed for next level."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Total XP"}),"  Your lifetime XP earned across all activities."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Stats"}),"  Five attributes (Stamina, Willpower, Health, Focus, Charisma) that start at 10 and change based on your active buffs/debuffs."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Effects"}),"  Currently active buffs (green pulse) and debuffs (red throb) with time remaining."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP History"}),"  A log of your most recent XP gains showing what you earned and why."]})]}),c.jsx("h2",{id:"guide-quests",children:"Quest Log"}),c.jsx("p",{children:"This is where you organize everything you want to accomplish."}),c.jsx("h3",{children:"Hierarchy"}),c.jsx("p",{children:"Life is organized in three layers:"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Goals"}),'  Big-picture ambitions tied to a life domain. Example: "Get fit" in the Health domain.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),'  Specific projects within a goal. Example: "Run a 5K" under "Get fit".']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Steps"}),'  Individual actionable tasks within a quest. Example: "Run 1 mile without stopping" inside "Run a 5K".']})]}),c.jsx("h3",{children:"Domains"}),c.jsx("p",{children:"Every goal belongs to one of eight life domains:"}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Icon"}),c.jsx("th",{children:"Domain"}),c.jsx("th",{children:"Examples"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Fitness, diet, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Career"}),c.jsx("td",{children:"Work projects, promotions, skills"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Learning"}),c.jsx("td",{children:"Courses, reading, certifications"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Social"}),c.jsx("td",{children:"Relationships, networking, community"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Finance"}),c.jsx("td",{children:"Saving, investing, budgeting"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Creative"}),c.jsx("td",{children:"Art, music, writing, hobbies"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Spiritual"}),c.jsx("td",{children:"Meditation, mindfulness, gratitude"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Home"}),c.jsx("td",{children:"Cleaning, organizing, repairs"})]})]})]}),c.jsx("h3",{children:"Priority Levels"}),c.jsx("p",{children:"Quests and steps can have a priority that affects XP rewards:"}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Priority"}),c.jsx("th",{children:"Color"}),c.jsx("th",{children:"Step XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Normal"}),c.jsx("td",{children:"Gray"}),c.jsx("td",{children:"10 XP"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Important"}),c.jsx("td",{children:"Gold"}),c.jsx("td",{children:"15 XP (1.5x)"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Legendary"}),c.jsx("td",{children:"Orange"}),c.jsx("td",{children:"20 XP (2x)"})]})]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Goal"}),"  pick a domain, give it a title."]}),c.jsxs("li",{children:["Inside a goal, tap ",c.jsx("strong",{children:"+ Quest"}),"  name the project, choose priority."]}),c.jsx("li",{children:'Tap a quest to expand it, then type steps in the "Add a step" field at the bottom.'}),c.jsx("li",{children:"Check off steps to earn XP. When all steps are done, the quest auto-completes for bonus XP. When all quests in a goal are done, the goal auto-completes for even more bonus XP."})]}),c.jsx("h3",{children:"Filters"}),c.jsx("p",{children:"Use the dropdowns at the top to filter by domain or status (Active / Completed / All)."}),c.jsx("h2",{id:"guide-buffs",children:"Buffs & Debuffs"}),c.jsx("p",{children:"Buffs and debuffs represent daily habits that affect your character."}),c.jsx("h3",{children:"Buffs (Positive Habits)"}),c.jsxs("p",{children:["Things you ",c.jsx("em",{children:"want"})," to do every day. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Morning Exercise  +2 Stamina, +1 Health"}),c.jsx("li",{children:" Meditation  +2 Willpower, +1 Focus"}),c.jsx("li",{children:" 8 Hours Sleep  +1 Health, +1 Focus, +1 Stamina"}),c.jsx("li",{children:" Read 30 Minutes  +2 Focus"})]}),c.jsxs("p",{children:["Activating a buff earns ",c.jsx("strong",{children:"5 XP"})," and applies its stat effects for the duration you set (e.g., 24 hours). After that, the buff expires and you need to activate it again the next day."]}),c.jsx("h3",{children:"Debuffs (Negative Habits)"}),c.jsxs("p",{children:["Things you want to be ",c.jsx("em",{children:"honest about tracking"}),". There is no XP penalty  this is for self-awareness. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Junk Food  -1 Health, -1 Stamina"}),c.jsx("li",{children:" Doomscrolling  -2 Focus, -1 Willpower"}),c.jsx("li",{children:" Alcohol  -1 Health, -1 Focus"})]}),c.jsx("p",{children:"Debuffs still affect your stats while active, shown as red on your character screen."}),c.jsx("h3",{children:"Streaks"}),c.jsxs("p",{children:["Activate the same buff on consecutive days to build a streak. Every ",c.jsx("strong",{children:"7-day streak"})," earns a bonus ",c.jsx("strong",{children:"25 XP"}),"."]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Buff/Debuff"})," to define a habit template."]}),c.jsx("li",{children:"Choose a name, type (buff or debuff), icon, duration in hours, and stat effects (positive numbers for buffs, negative for debuffs)."}),c.jsxs("li",{children:["Once created, it appears in the Buffs or Debuffs column. Tap ",c.jsx("strong",{children:"Activate"})," each day you do the habit."]}),c.jsx("li",{children:"Active effects appear at the top with a countdown timer and are reflected on your Character screen stats."})]}),c.jsx("h3",{children:"Expiry"}),c.jsxs("p",{children:["Buffs and debuffs expire automatically after their duration. The app checks every 60 seconds. You can also manually remove an active effect by tapping ",c.jsx("strong",{children:"Remove"}),"."]}),c.jsx("h2",{id:"guide-achievements",children:"Achievements"}),c.jsx("p",{children:"Unlock achievements by reaching milestones. Each achievement rewards XP when unlocked."}),c.jsx("h3",{children:"Categories"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),"  Complete steps, quests, and goals"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Buffs"}),"  Activate habits regularly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Streaks"}),"  Maintain consecutive day streaks"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Boss"}),"  Defeat weekly bosses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Levels"}),"  Reach level milestones (5, 10, 25, 50)"]})]}),c.jsx("p",{children:"View your progress in the Achievements panel. Some achievements are hidden until unlocked!"}),c.jsx("h2",{id:"guide-energy",children:"Energy System"}),c.jsx("p",{children:"Energy represents your daily capacity for action."}),c.jsx("h3",{children:"Mechanics"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Max Energy"}),"  Starts at 100"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Regeneration"}),"  Recovers 10 energy per hour automatically"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Costs"}),"  Some actions cost energy (completing steps: 5, activating buffs: 3)"]})]}),c.jsx("h3",{children:"Energy Debuffs"}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Threshold"}),c.jsx("th",{children:"Debuff"}),c.jsx("th",{children:"Effects"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Below 20"}),c.jsx("td",{children:"Fatigued"}),c.jsx("td",{children:"-2 Focus, -2 Willpower"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Below 5"}),c.jsx("td",{children:"Exhausted"}),c.jsx("td",{children:"-3 Stamina, -3 Willpower, -3 Focus, -1 Health"})]})]})]}),c.jsx("p",{children:"Keep your energy up to avoid stat penalties!"}),c.jsx("h2",{id:"guide-focus",children:"Focus Timer"}),c.jsx("p",{children:"A Pomodoro-style timer to boost productivity."}),c.jsx("h3",{children:"How it works"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Work sessions"}),"  Default 25 minutes of focused work"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Short breaks"}),"  5 minutes after each session"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Long breaks"}),"  15 minutes after 4 sessions"]})]}),c.jsx("h3",{children:"XP Rewards"}),c.jsxs("ul",{children:[c.jsx("li",{children:"+15 XP per completed focus session"}),c.jsx("li",{children:"+5 XP bonus if linked to a quest step"}),c.jsx("li",{children:"+10 XP bonus every 4 consecutive sessions"})]}),c.jsx("p",{children:"Customize timer durations in Settings."}),c.jsx("h2",{id:"guide-routines",children:"Morning/Evening Routines"}),c.jsx("p",{children:"Create routine chains to build powerful habits."}),c.jsx("h3",{children:"Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Morning"}),"  Start your day right"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Evening"}),"  Wind down properly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Custom"}),"  Any time routines"]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsx("li",{children:"Create a routine with a name and bonus XP reward"}),c.jsx("li",{children:"Add steps to the routine (can be linked to buffs)"}),c.jsx("li",{children:"Start the routine each day and complete steps in order"}),c.jsx("li",{children:"Complete all required steps to earn the bonus XP"})]}),c.jsx("p",{children:"Routine streaks earn extra XP every 7 days!"}),c.jsx("h2",{id:"guide-combos",children:"Habit Combos"}),c.jsx("p",{children:"Activate specific buff combinations for bonus XP."}),c.jsx("h3",{children:"Example Combos"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wellness Warrior"}),"  Meditation + Exercise + Healthy Meal = +30 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Master"}),"  No Phone + Deep Work + Reading = +25 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Early Bird"}),"  Morning Exercise + 8 Hours Sleep + No Phone First Hour = +35 XP"]})]}),c.jsx("p",{children:"Combos can only be claimed once per day. Activate all required buffs within 24 hours to qualify."}),c.jsx("h2",{id:"guide-review",children:"Weekly Review"}),c.jsx("p",{children:"Reflect on your progress every week."}),c.jsx("h3",{children:"Summary Data"}),c.jsx("p",{children:"Auto-generated stats include: steps completed, quests completed, buffs activated, XP earned, boss damage dealt, focus sessions, and more."}),c.jsx("h3",{children:"Reflection Prompts"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wins"}),"  What went well this week?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenges"}),"  What was difficult?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Priorities"}),"  Set up to 5 priorities for next week"]})]}),c.jsxs("p",{children:["Completing your weekly review earns ",c.jsx("strong",{children:"100 XP"}),"."]}),c.jsx("h2",{id:"guide-events",children:"Random Events"}),c.jsx("p",{children:"Special limited-time opportunities that appear randomly."}),c.jsx("h3",{children:"Event Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Bonus"}),"  Instant rewards (XP, energy, shields)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenge"}),"  Complete objectives for rewards"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Modifier"}),"  Temporary boosts (double XP, stat increases)"]})]}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Events have different rarities: Common, Uncommon, Rare, Epic. Rarer events have better rewards!"}),c.jsx("p",{children:"Events have a 15% chance to trigger and a 4-hour cooldown between checks."}),c.jsx("h2",{id:"guide-skills",children:"Skill Trees"}),c.jsx("p",{children:"Spend XP to unlock permanent passive bonuses."}),c.jsx("h3",{children:"Branches"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity"})," (Blue)  Quest and step XP bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Health"})," (Red)  Energy and stamina bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus"})," (Purple)  Timer and concentration bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Social"})," (Orange)  Streak and charisma bonuses"]})]}),c.jsx("h3",{children:"How to unlock"}),c.jsx("p",{children:"Skills cost XP to unlock (100-500 XP per node). You must unlock prerequisite skills first. Capstone skills at the end of each branch provide the biggest bonuses."}),c.jsx("h2",{id:"guide-classes",children:"Character Classes"}),c.jsx("p",{children:"Choose a class to specialize your character."}),c.jsx("h3",{children:"Available Classes"}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Class"}),c.jsx("th",{children:"Stat Bonuses"}),c.jsx("th",{children:"XP Bonus"}),c.jsx("th",{children:"Special"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Warrior"}),c.jsx("td",{children:"+3 Stamina, +2 Health"}),c.jsx("td",{children:"+10% Quest XP"}),c.jsx("td",{children:"Battlecry"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Mage"}),c.jsx("td",{children:"+3 Focus, +2 Willpower"}),c.jsx("td",{children:"+10% Buff XP"}),c.jsx("td",{children:"Arcane Focus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Ranger"}),c.jsx("td",{children:"+3 Willpower, +1 Stamina, +1 Focus"}),c.jsx("td",{children:"+10% Streak XP"}),c.jsx("td",{children:"Tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Paladin"}),c.jsx("td",{children:"+2 Health, +2 Willpower, +1 Charisma"}),c.jsx("td",{children:"+10% Boss XP"}),c.jsx("td",{children:"Divine Shield"})]})]})]}),c.jsx("p",{children:"You can change your class up to 3 times total."}),c.jsx("h2",{id:"guide-territory",children:"Territory Map"}),c.jsx("p",{children:"Explore regions as you level up."}),c.jsx("h3",{children:"Territories"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"The Awakening Glade"})," (Level 1)  Where every journey begins"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Habit Highlands"})," (Level 5)  Rocky terrain for consistent habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Forest"})," (Level 10)  Dense woods for the focused"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity Plains"})," (Level 15)  Vast fields for goal achievers"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Summit of Mastery"})," (Level 25)  The peak for true masters"]})]}),c.jsx("p",{children:"Complete territory challenges to unlock rewards and earn special titles!"}),c.jsx("h2",{id:"guide-inventory",children:"Inventory & Items"}),c.jsx("p",{children:"Collect and equip items for stat bonuses."}),c.jsx("h3",{children:"Item Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Equipment"}),"  Weapons, armor, accessories with stat bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Consumables"}),"  One-time use items (energy potions, XP elixirs)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Trophies"}),"  Special commemorative items from achievements"]})]}),c.jsx("h3",{children:"Equipment Slots"}),c.jsx("p",{children:"You can equip one item in each slot: Weapon, Armor, Accessory."}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Items come in 5 rarities: Common (gray), Uncommon (green), Rare (blue), Epic (purple), Legendary (orange)."}),c.jsx("p",{children:"Items drop from achievements, boss defeats, and random events."}),c.jsx("h2",{id:"guide-xp",children:"XP System"}),c.jsx("p",{children:"Everything you do earns experience points:"}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Action"}),c.jsx("th",{children:"XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a normal step"}),c.jsx("td",{children:"+10"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete an important step"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a legendary step"}),c.jsx("td",{children:"+20"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a quest (all steps done)"}),c.jsx("td",{children:"+50 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a goal (all quests done)"}),c.jsx("td",{children:"+200 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a buff (daily habit)"}),c.jsx("td",{children:"+5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"7-day streak on any buff"}),c.jsx("td",{children:"+25 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a focus session"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a routine"}),c.jsx("td",{children:"+25"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a habit combo"}),c.jsx("td",{children:"+25-35"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete weekly review"}),c.jsx("td",{children:"+100"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Unlock an achievement"}),c.jsx("td",{children:"+25-500"})]})]})]}),c.jsx("h2",{id:"guide-levels",children:"Levels & Titles"}),c.jsxs("p",{children:["XP needed per level increases as you grow. The formula is ",c.jsx("code",{children:"50  level^1.8"}),"."]}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Level"}),c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Approx. Timeline"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"14"}),c.jsx("td",{children:"Novice"}),c.jsx("td",{children:"Starting out"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"59"}),c.jsx("td",{children:"Apprentice"}),c.jsx("td",{children:"~12 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1014"}),c.jsx("td",{children:"Journeyman"}),c.jsx("td",{children:"~34 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1521"}),c.jsx("td",{children:"Adept"}),c.jsx("td",{children:"~12 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2229"}),c.jsx("td",{children:"Expert"}),c.jsx("td",{children:"~24 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3039"}),c.jsx("td",{children:"Master"}),c.jsx("td",{children:"~48 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"4049"}),c.jsx("td",{children:"Legend"}),c.jsx("td",{children:"~812 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"50+"}),c.jsx("td",{children:"Dragonborn"}),c.jsx("td",{children:"~1 year+"})]})]})]}),c.jsx("p",{children:"When you level up, a golden overlay appears announcing your new level and title."}),c.jsx("h2",{id:"guide-stats",children:"Stats"}),c.jsxs("p",{children:["Your character has five stats, all starting at ",c.jsx("strong",{children:"10"}),":"]}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Stat"}),c.jsx("th",{children:"Represents"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Stamina"}),c.jsx("td",{children:"Physical energy, endurance, exercise habits"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Willpower"}),c.jsx("td",{children:"Discipline, self-control, mental toughness"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Physical wellbeing, nutrition, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Focus"}),c.jsx("td",{children:"Concentration, productivity, mental clarity"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Charisma"}),c.jsx("td",{children:"Social skills, confidence, communication"})]})]})]}),c.jsx("h3",{children:"Stat Sources"}),c.jsx("p",{children:"Your final stats are calculated from multiple sources:"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Base"}),"  10 in each stat"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Buffs/Debuffs"}),"  Temporary effects from habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Equipped Items"}),"  Bonuses from weapons, armor, accessories"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Skill Tree"}),"  Permanent passive bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Character Class"}),"  Class-specific bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Energy Debuffs"}),"  Penalties when energy is low"]})]}),c.jsx("p",{children:"Stats serve as a mirror of your current lifestyle  high Focus means you've been studying and avoiding distractions; low Health means you've been eating junk food or skipping sleep."}),c.jsx("h2",{id:"guide-tips",children:"Tips"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Start small."})," Create one goal with one quest and a few steps. Don't overload yourself on day one."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Be honest with debuffs."})," There's no punishment  tracking negative habits helps you see patterns."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Use priorities wisely."}),' Reserve "Legendary" for truly difficult or impactful tasks.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Build streaks."})," The 7-day streak bonus compounds  maintaining 3 daily buffs earns 75 bonus XP per week on top of the daily 5 XP each."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Check your character screen daily."})," Your stats tell you how balanced your life is."]})]}),c.jsx("h2",{id:"guide-data",children:"Saving & Data"}),c.jsx("p",{children:"All your data is stored locally on this device in the browser's database. It persists across sessions  closing and reopening the app keeps everything."}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Export Save"}),"  Downloads your entire database as a .db file. Use this for backups."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Import Save"}),"  Loads a previously exported .db file, replacing all current data. Use this to restore a backup or transfer data between devices."]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Important:"})," Clearing your browser/app data will erase your progress. Export a backup regularly."]}),c.jsx("h3",{children:"Keyboard Shortcuts (Desktop)"}),c.jsxs("table",{className:Gn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Key"}),c.jsx("th",{children:"Action"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"1"}),c.jsx("td",{children:"Character screen"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2"}),c.jsx("td",{children:"Quest Log"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3"}),c.jsx("td",{children:"Buffs"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Esc"}),c.jsx("td",{children:"Close any open modal/popup"})]})]})]})]})]})})}function a7(){const{ready:s,error:e}=Cx(),[n,a]=L.useState("character");return s?c.jsx(r7,{activeTab:n,setActiveTab:a}):c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a0f",color:"#c8a84e",fontFamily:"Cinzel, serif",fontSize:"1.2rem"},children:e?`Error: ${e}`:"Loading database..."})}function r7({activeTab:s,setActiveTab:e}){const n=qx(),a=BL({grantXP:n.grantXP}),o=XL({grantXP:n.grantXP,addShields:a.addShields}),u=AL({grantXP:n.grantXP}),h=ij(),g=ZL({grantXP:n.grantXP});Jj({totalXP:n.character.total_xp}),aD(),hD({characterLevel:n.character.level,grantXP:n.grantXP});const E=vD({grantXP:n.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),_=dj({grantXP:n.grantXP,onSessionComplete:()=>{g.incrementProgress("focus_sessions_completed",1),o.dealDamage("focus_session","Focus session completed")}}),S=wj({grantXP:n.grantXP,onRoutineComplete:A=>{g.incrementProgress("routines_completed",1),o.dealDamage("routine_completed","Routine completed")}}),x=jj({grantXP:n.grantXP}),w=Bj({grantXP:n.grantXP}),B=Xj({grantXP:n.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),G=sw({grantXP:n.grantXP,onStepComplete:()=>{u.updateProgress("complete_steps",1),o.dealDamage("step_completed","Completed a step"),g.incrementProgress("steps_completed",1)},onQuestComplete:()=>{o.dealDamage("quest_completed","Completed a quest"),g.incrementProgress("quests_completed",1)},onGoalComplete:()=>{o.dealDamage("goal_completed","Completed a goal"),g.incrementProgress("goals_completed",1)},onStepMissed:async A=>{await uw(A),o.healBoss("step_missed","Missed a step"),q.refresh()}}),U=j1(),q=gw({grantXP:n.grantXP,deductXP:n.deductXP,scheduleBuffExpiry:U.scheduleBuffExpiry,cancelBuffExpiry:U.cancelBuffExpiry,onBuffActivated:A=>{u.updateProgress("activate_buffs",1),new Date().getHours()<8&&u.updateProgress("early_start",1),A==="buff"&&(u.updateProgress("activate_specific",1),o.dealDamage("buff_activated","Activated a buff"),g.incrementProgress("buffs_activated",1)),a.refresh(),x.checkAndActivateCombos()},onDebuffActivated:A=>{o.healBoss("debuff_activated",`Activated debuff: ${A}`)}}),z=Rw(),[H,K]=L.useState(!1),[ie,Ee]=L.useState(!1);L.useEffect(()=>{n.refresh(),s==="quests"&&G.refresh(),s==="buffs"&&(q.refresh(),a.refresh(),x.refresh()),s==="focus"&&_.refresh(),s==="boss"&&o.refresh(),s==="inventory"&&E.refresh()},[s]),L.useEffect(()=>{hw().then(A=>{A&&console.log("Daily buff reset: All buffs cleared for new day"),q.refresh()}),G.refresh(),a.refresh(),h.refresh(),g.refresh(),u.checkNoDebuffs()},[]),L.useEffect(()=>{g.checkThreshold("character_level",n.character.level)},[n.character.level]),L.useEffect(()=>{const A=j=>{j.target instanceof HTMLInputElement||j.target instanceof HTMLTextAreaElement||j.target instanceof HTMLSelectElement||(j.key==="1"&&e("character"),j.key==="2"&&e("quests"),j.key==="3"&&e("buffs"),j.key==="4"&&e("focus"),j.key==="5"&&e("boss"),j.key==="6"&&e("inventory"))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e]);const ge=L.useCallback(async()=>{const A=await _p(),j=new Blob([new Uint8Array(A)],{type:"application/octet-stream"}),V=URL.createObjectURL(j),M=document.createElement("a");M.href=V,M.download=`goal-game-backup-${new Date().toISOString().split("T")[0]}.db`,M.click(),URL.revokeObjectURL(V)},[]),D=L.useCallback(async()=>{const A=document.createElement("input");A.type="file",A.accept=".db",A.onchange=async()=>{const j=A.files?.[0];if(!j)return;const V=await j.arrayBuffer();await sb(new Uint8Array(V)),window.location.reload()},A.click()},[]);return c.jsxs("div",{className:jn.appShell,children:[c.jsx(BD,{activeTab:s,onTabChange:e}),c.jsx(hO,{character:n.character,energyState:h.state}),c.jsxs("main",{className:jn.main,children:[s==="character"&&c.jsxs(c.Fragment,{children:[c.jsx(Z3,{character:n.character,stats:q.stats}),B.activeEvents.length>0&&c.jsx("div",{style:{marginBottom:12},children:B.activeEvents.map(A=>c.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(200,168,78,0.2), rgba(200,168,78,0.1))",border:"1px solid var(--border-gold)",borderRadius:8,padding:"10px 14px",marginBottom:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("span",{style:{fontSize:"1.1rem"},children:A.template.icon}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"var(--gold)",fontSize:"0.9rem"},children:A.template.name}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:A.template.description})]})]}),!A.is_claimed&&c.jsx(Be,{size:"small",onClick:()=>B.claimEvent(A.id),children:"Claim"})]},A.id))}),c.jsxs(Nc,{title:"Today's Tasks",icon:"",badge:`${u.completedCount}/${u.quests.length}`,badgeColor:u.allCompleted?"green":"gold",defaultExpanded:!0,children:[c.jsx(x6,{quests:u.quests,loading:u.loading,allCompleted:u.allCompleted,completedCount:u.completedCount,bonusClaimed:u.bonusClaimed,bonusXp:u.bonusXp,totalXpEarned:u.totalXpEarned,onClaimBonus:async()=>{await u.claimBonus();for(const A of u.quests)A.is_completed&&o.dealDamage("daily_quest_completed",`Daily Quest: ${A.title}`)},compact:!0}),S.routines.length>0&&c.jsx("div",{style:{marginTop:16},children:c.jsx(Fq,{routines:S.routines,loading:S.loading,onCreateRoutine:S.createRoutine,onDeleteRoutine:S.deleteRoutine,onStartRoutine:S.startRoutine,onCompleteStep:S.completeStep,onSkipStep:S.skipStep,onAddStep:S.addStep,onDeleteStep:S.deleteStep,getStepsWithStatus:S.getStepsWithStatus,compact:!0})})]}),x.combos.length>0&&c.jsx(Nc,{title:"Combos",icon:"",badge:x.combos.filter(A=>A.is_ready).length>0?`${x.combos.filter(A=>A.is_ready).length} ready!`:void 0,badgeColor:"green",children:c.jsx(hB,{combos:x.combos,loading:x.loading,onClaimCombo:x.claimCombo,compact:!0})}),c.jsx(Nc,{title:"Character Stats",icon:"",badge:`Lv.${n.character.level}`,badgeColor:"gold",children:c.jsx(q3,{character:n.character,stats:q.stats,activeBuffs:q.activeBuffs,xpLog:n.xpLog,onNameChange:n.setName,compact:!0})}),c.jsx(Nc,{title:"Achievements",icon:"",badge:`${g.stats.unlocked}/${g.stats.total}`,badgeColor:g.stats.unlocked===g.stats.total?"green":"gold",children:c.jsx(vV,{achievements:g.achievements,stats:g.stats,loading:g.loading,compact:!0})}),!w.currentReview?.is_completed&&c.jsx(Nc,{title:"Weekly Review",icon:"",badge:"Due",badgeColor:"blue",children:c.jsx(XB,{currentReview:w.currentReview,loading:w.loading,onGenerateSummary:w.generateSummary,onUpdateContent:w.updateContent,onCompleteReview:w.completeReview,getSummaryFromReview:w.getSummaryFromReview,getPrioritiesFromReview:w.getPrioritiesFromReview,getWeekStart:w.getWeekStart,compact:!0})})]}),s==="quests"&&c.jsx(U5,{goals:G.goals,domains:G.domains,filterDomain:G.filterDomain,filterStatus:G.filterStatus,onFilterDomain:A=>{G.setFilterDomain(A)},onFilterStatus:A=>{G.setFilterStatus(A)},onCreateGoal:G.createGoal,onCreateQuest:G.createQuest,onCreateStep:G.createStep,onCompleteStep:G.completeStep,onUncompleteStep:G.uncompleteStep,onMissStep:G.missStep,onUnmissStep:G.unmissStep,onDeleteStep:G.deleteStep,onDeleteQuest:G.deleteQuest,onDeleteGoal:G.deleteGoal}),s==="buffs"&&c.jsx(nU,{definitions:q.definitions,activeBuffs:q.activeBuffs,onCreateDefinition:q.createDefinition,onDeleteDefinition:q.deleteDefinition,onActivateBuff:q.activateBuff,onDeactivateBuff:q.deactivateBuff,streakInfos:a.streakInfos,shieldCount:a.shieldCount,onUseShield:a.useShield,getUnclaimedMilestones:a.getUnclaimedMilestones,onClaimMilestones:a.claimMilestones}),s==="focus"&&c.jsx(lq,{timerState:_.timerState,settings:_.settings,stats:_.stats,recentSessions:_.recentSessions,onStartWork:_.startWork,onStartBreak:_.startBreak,onPause:_.pause,onResume:_.resume,onStop:_.stop,onSkipBreak:_.skipBreak,onUpdateSettings:_.updateSettings,formatTime:_.formatTime}),s==="boss"&&c.jsx(M9,{character:n.character,stats:q.stats,boss:o.boss,loading:o.loading,hpPercentage:o.hpPercentage,damageDealt:o.damageDealt,totalDefeated:o.totalDefeated,weekStart:o.weekStart,weekEnd:o.weekEnd}),s==="inventory"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Equipment"}),c.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:["weapon","armor","accessory"].map(A=>{const j=E.getEquipmentBySlot(A);return c.jsxs("div",{style:{flex:"1 1 150px",maxWidth:200,background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textTransform:"uppercase",marginBottom:8},children:A}),j?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:j.item.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",marginBottom:4},children:j.item.definition.name}),c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>E.unequipItem(A),children:"Unequip"})]}):c.jsx("div",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:"Empty"})]},A)})})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Inventory"}),E.inventory.length===0?c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Your inventory is empty. Complete achievements and defeat bosses to earn items!"}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:12},children:E.inventory.map(A=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${A.definition.rarity==="legendary"?"#ff9800":A.definition.rarity==="epic"?"#9c27b0":A.definition.rarity==="rare"?"#2196f3":A.definition.rarity==="uncommon"?"#4caf50":"var(--border-color)"}`,borderRadius:8,padding:12,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:A.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.85rem",marginBottom:4},children:A.definition.name}),A.quantity>1&&c.jsxs("div",{style:{color:"var(--text-dim)",fontSize:"0.75rem",marginBottom:4},children:["x",A.quantity]}),A.definition.type==="equipment"&&(E.equipped.some(j=>j.inventory_id===A.id)?c.jsx("div",{style:{color:"var(--stat-green)",fontSize:"0.75rem",fontWeight:"bold"},children:"Equipped"}):c.jsx(Be,{size:"small",onClick:()=>E.equipItem(A.id),children:"Equip"})),A.definition.type==="consumable"&&c.jsx(Be,{size:"small",onClick:()=>E.useConsumable(A.id),children:"Use"})]},A.id))})]})]}),c.jsxs("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:[ie&&c.jsx(zU,{}),H&&c.jsx(xU,{}),c.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>Ee(!ie),children:ie?"Hide Notifications":"Notifications"}),c.jsx(Be,{size:"small",variant:"ghost",onClick:()=>K(!H),children:H?"Hide Cloud Backup":"Cloud Backup"}),c.jsx(Be,{size:"small",variant:"ghost",onClick:ge,children:"Export Save"}),c.jsx(Be,{size:"small",variant:"ghost",onClick:D,children:"Import Save"})]})]})]}),n.xpFloats.map(A=>c.jsxs("div",{className:jn.xpFloat,children:["+",A.amount," XP"]},A.id)),n.levelUpInfo&&c.jsx(TO,{level:n.levelUpInfo.level,title:n.levelUpInfo.title,onDismiss:n.dismissLevelUp}),c.jsx(bV,{unlock:g.pendingUnlocks.length>0?g.pendingUnlocks[0]:null,onDismiss:()=>g.dismissUnlock(0)}),c.jsx(s7,{}),z.message&&c.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 20px",background:z.status==="error"?"rgba(231, 76, 60, 0.9)":"rgba(46, 204, 113, 0.9)",color:"#fff",borderRadius:8,fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:z.message})]})}DN.createRoot(document.getElementById("root")).render(c.jsx(L.StrictMode,{children:c.jsx(a7,{})}));
