(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function wN(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function AN(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var n=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var o=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return s[a]}})}),n}var nm={exports:{}},yc={};var jE;function RN(){if(jE)return yc;jE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:u}}return yc.Fragment=e,yc.jsx=n,yc.jsxs=n,yc}var DE;function CN(){return DE||(DE=1,nm.exports=RN()),nm.exports}var c=CN(),sm={exports:{}},rt={};var LE;function IN(){if(LE)return rt;LE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function B(X){return X===null||typeof X!="object"?null:(X=w&&X[w]||X["@@iterator"],typeof X=="function"?X:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,V={};function z(X,de,oe){this.props=X,this.context=de,this.refs=V,this.updater=oe||H}z.prototype.isReactComponent={},z.prototype.setState=function(X,de){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,de,"setState")},z.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function G(){}G.prototype=z.prototype;function K(X,de,oe){this.props=X,this.context=de,this.refs=V,this.updater=oe||H}var ie=K.prototype=new G;ie.constructor=K,U(ie,z.prototype),ie.isPureReactComponent=!0;var Ee=Array.isArray;function ye(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function L(X,de,oe){var Se=oe.ref;return{$$typeof:s,type:X,key:de,ref:Se!==void 0?Se:null,props:oe}}function q(X,de){return L(X.type,de,X.props)}function M(X){return typeof X=="object"&&X!==null&&X.$$typeof===s}function O(X){var de={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(oe){return de[oe]})}var j=/\/+/g;function Ae(X,de){return typeof X=="object"&&X!==null&&X.key!=null?O(""+X.key):de.toString(36)}function Ze(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(ye,ye):(X.status="pending",X.then(function(de){X.status==="pending"&&(X.status="fulfilled",X.value=de)},function(de){X.status==="pending"&&(X.status="rejected",X.reason=de)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function Y(X,de,oe,Se,Me){var ze=typeof X;(ze==="undefined"||ze==="boolean")&&(X=null);var le=!1;if(X===null)le=!0;else switch(ze){case"bigint":case"string":case"number":le=!0;break;case"object":switch(X.$$typeof){case s:case e:le=!0;break;case S:return le=X._init,Y(le(X._payload),de,oe,Se,Me)}}if(le)return Me=Me(X),le=Se===""?"."+Ae(X,0):Se,Ee(Me)?(oe="",le!=null&&(oe=le.replace(j,"$&/")+"/"),Y(Me,de,oe,"",function(kt){return kt})):Me!=null&&(M(Me)&&(Me=q(Me,oe+(Me.key==null||X&&X.key===Me.key?"":(""+Me.key).replace(j,"$&/")+"/")+le)),de.push(Me)),1;le=0;var Le=Se===""?".":Se+":";if(Ee(X))for(var nt=0;nt<X.length;nt++)Se=X[nt],ze=Le+Ae(Se,nt),le+=Y(Se,de,oe,ze,Me);else if(nt=B(X),typeof nt=="function")for(X=nt.call(X),nt=0;!(Se=X.next()).done;)Se=Se.value,ze=Le+Ae(Se,nt++),le+=Y(Se,de,oe,ze,Me);else if(ze==="object"){if(typeof X.then=="function")return Y(Ze(X),de,oe,Se,Me);throw de=String(X),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return le}function fe(X,de,oe){if(X==null)return X;var Se=[],Me=0;return Y(X,Se,"","",function(ze){return de.call(oe,ze,Me++)}),Se}function we(X){if(X._status===-1){var de=X._result;de=de(),de.then(function(oe){(X._status===0||X._status===-1)&&(X._status=1,X._result=oe)},function(oe){(X._status===0||X._status===-1)&&(X._status=2,X._result=oe)}),X._status===-1&&(X._status=0,X._result=de)}if(X._status===1)return X._result.default;throw X._result}var $e=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},et={map:fe,forEach:function(X,de,oe){fe(X,function(){de.apply(this,arguments)},oe)},count:function(X){var de=0;return fe(X,function(){de++}),de},toArray:function(X){return fe(X,function(de){return de})||[]},only:function(X){if(!M(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return rt.Activity=x,rt.Children=et,rt.Component=z,rt.Fragment=n,rt.Profiler=o,rt.PureComponent=K,rt.StrictMode=a,rt.Suspense=E,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,rt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return D.H.useMemoCache(X)}},rt.cache=function(X){return function(){return X.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(X,de,oe){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Se=U({},X.props),Me=X.key;if(de!=null)for(ze in de.key!==void 0&&(Me=""+de.key),de)!R.call(de,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&de.ref===void 0||(Se[ze]=de[ze]);var ze=arguments.length-2;if(ze===1)Se.children=oe;else if(1<ze){for(var le=Array(ze),Le=0;Le<ze;Le++)le[Le]=arguments[Le+2];Se.children=le}return L(X.type,Me,Se)},rt.createContext=function(X){return X={$$typeof:h,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:u,_context:X},X},rt.createElement=function(X,de,oe){var Se,Me={},ze=null;if(de!=null)for(Se in de.key!==void 0&&(ze=""+de.key),de)R.call(de,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Me[Se]=de[Se]);var le=arguments.length-2;if(le===1)Me.children=oe;else if(1<le){for(var Le=Array(le),nt=0;nt<le;nt++)Le[nt]=arguments[nt+2];Me.children=Le}if(X&&X.defaultProps)for(Se in le=X.defaultProps,le)Me[Se]===void 0&&(Me[Se]=le[Se]);return L(X,ze,Me)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(X){return{$$typeof:g,render:X}},rt.isValidElement=M,rt.lazy=function(X){return{$$typeof:S,_payload:{_status:-1,_result:X},_init:we}},rt.memo=function(X,de){return{$$typeof:_,type:X,compare:de===void 0?null:de}},rt.startTransition=function(X){var de=D.T,oe={};D.T=oe;try{var Se=X(),Me=D.S;Me!==null&&Me(oe,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(ye,$e)}catch(ze){$e(ze)}finally{de!==null&&oe.types!==null&&(de.types=oe.types),D.T=de}},rt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},rt.use=function(X){return D.H.use(X)},rt.useActionState=function(X,de,oe){return D.H.useActionState(X,de,oe)},rt.useCallback=function(X,de){return D.H.useCallback(X,de)},rt.useContext=function(X){return D.H.useContext(X)},rt.useDebugValue=function(){},rt.useDeferredValue=function(X,de){return D.H.useDeferredValue(X,de)},rt.useEffect=function(X,de){return D.H.useEffect(X,de)},rt.useEffectEvent=function(X){return D.H.useEffectEvent(X)},rt.useId=function(){return D.H.useId()},rt.useImperativeHandle=function(X,de,oe){return D.H.useImperativeHandle(X,de,oe)},rt.useInsertionEffect=function(X,de){return D.H.useInsertionEffect(X,de)},rt.useLayoutEffect=function(X,de){return D.H.useLayoutEffect(X,de)},rt.useMemo=function(X,de){return D.H.useMemo(X,de)},rt.useOptimistic=function(X,de){return D.H.useOptimistic(X,de)},rt.useReducer=function(X,de,oe){return D.H.useReducer(X,de,oe)},rt.useRef=function(X){return D.H.useRef(X)},rt.useState=function(X){return D.H.useState(X)},rt.useSyncExternalStore=function(X,de,oe){return D.H.useSyncExternalStore(X,de,oe)},rt.useTransition=function(){return D.H.useTransition()},rt.version="19.2.4",rt}var OE;function mp(){return OE||(OE=1,sm.exports=IN()),sm.exports}var k=mp(),im={exports:{}},Ec={},am={exports:{}},rm={};var ME;function kN(){return ME||(ME=1,(function(s){function e(Y,fe){var we=Y.length;Y.push(fe);e:for(;0<we;){var $e=we-1>>>1,et=Y[$e];if(0<o(et,fe))Y[$e]=fe,Y[we]=et,we=$e;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var fe=Y[0],we=Y.pop();if(we!==fe){Y[0]=we;e:for(var $e=0,et=Y.length,X=et>>>1;$e<X;){var de=2*($e+1)-1,oe=Y[de],Se=de+1,Me=Y[Se];if(0>o(oe,we))Se<et&&0>o(Me,oe)?(Y[$e]=Me,Y[Se]=we,$e=Se):(Y[$e]=oe,Y[de]=we,$e=de);else if(Se<et&&0>o(Me,we))Y[$e]=Me,Y[Se]=we,$e=Se;else break e}}return fe}function o(Y,fe){var we=Y.sortIndex-fe.sortIndex;return we!==0?we:Y.id-fe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var E=[],_=[],S=1,x=null,w=3,B=!1,H=!1,U=!1,V=!1,z=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ie(Y){for(var fe=n(_);fe!==null;){if(fe.callback===null)a(_);else if(fe.startTime<=Y)a(_),fe.sortIndex=fe.expirationTime,e(E,fe);else break;fe=n(_)}}function Ee(Y){if(U=!1,ie(Y),!H)if(n(E)!==null)H=!0,ye||(ye=!0,O());else{var fe=n(_);fe!==null&&Ze(Ee,fe.startTime-Y)}}var ye=!1,D=-1,R=5,L=-1;function q(){return V?!0:!(s.unstable_now()-L<R)}function M(){if(V=!1,ye){var Y=s.unstable_now();L=Y;var fe=!0;try{e:{H=!1,U&&(U=!1,G(D),D=-1),B=!0;var we=w;try{t:{for(ie(Y),x=n(E);x!==null&&!(x.expirationTime>Y&&q());){var $e=x.callback;if(typeof $e=="function"){x.callback=null,w=x.priorityLevel;var et=$e(x.expirationTime<=Y);if(Y=s.unstable_now(),typeof et=="function"){x.callback=et,ie(Y),fe=!0;break t}x===n(E)&&a(E),ie(Y)}else a(E);x=n(E)}if(x!==null)fe=!0;else{var X=n(_);X!==null&&Ze(Ee,X.startTime-Y),fe=!1}}break e}finally{x=null,w=we,B=!1}fe=void 0}}finally{fe?O():ye=!1}}}var O;if(typeof K=="function")O=function(){K(M)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Ae=j.port2;j.port1.onmessage=M,O=function(){Ae.postMessage(null)}}else O=function(){z(M,0)};function Ze(Y,fe){D=z(function(){Y(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var fe=3;break;default:fe=w}var we=w;w=fe;try{return Y()}finally{w=we}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(Y,fe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var we=w;w=Y;try{return fe()}finally{w=we}},s.unstable_scheduleCallback=function(Y,fe,we){var $e=s.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?$e+we:$e):we=$e,Y){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=we+et,Y={id:S++,callback:fe,priorityLevel:Y,startTime:we,expirationTime:et,sortIndex:-1},we>$e?(Y.sortIndex=we,e(_,Y),n(E)===null&&Y===n(_)&&(U?(G(D),D=-1):U=!0,Ze(Ee,we-$e))):(Y.sortIndex=et,e(E,Y),H||B||(H=!0,ye||(ye=!0,O()))),Y},s.unstable_shouldYield=q,s.unstable_wrapCallback=function(Y){var fe=w;return function(){var we=w;w=fe;try{return Y.apply(this,arguments)}finally{w=we}}}})(rm)),rm}var UE;function jN(){return UE||(UE=1,am.exports=kN()),am.exports}var om={exports:{}},Zn={};var VE;function DN(){if(VE)return Zn;VE=1;var s=mp();function e(E){var _="https://react.dev/errors/"+E;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+E+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(E,_,S){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:E,containerInfo:_,implementation:S}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(E,_){if(E==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Zn.createPortal=function(E,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(E,_,null,S)},Zn.flushSync=function(E){var _=h.T,S=a.p;try{if(h.T=null,a.p=2,E)return E()}finally{h.T=_,a.p=S,a.d.f()}},Zn.preconnect=function(E,_){typeof E=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(E,_))},Zn.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},Zn.preinit=function(E,_){if(typeof E=="string"&&_&&typeof _.as=="string"){var S=_.as,x=g(S,_.crossOrigin),w=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?a.d.S(E,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:B}):S==="script"&&a.d.X(E,{crossOrigin:x,integrity:w,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Zn.preinitModule=function(E,_){if(typeof E=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);a.d.M(E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(E)},Zn.preload=function(E,_){if(typeof E=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,x=g(S,_.crossOrigin);a.d.L(E,S,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Zn.preloadModule=function(E,_){if(typeof E=="string")if(_){var S=g(_.as,_.crossOrigin);a.d.m(E,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(E)},Zn.requestFormReset=function(E){a.d.r(E)},Zn.unstable_batchedUpdates=function(E,_){return E(_)},Zn.useFormState=function(E,_,S){return h.H.useFormState(E,_,S)},Zn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Zn.version="19.2.4",Zn}var qE;function LN(){if(qE)return om.exports;qE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),om.exports=DN(),om.exports}var BE;function ON(){if(BE)return Ec;BE=1;var s=jN(),e=mp(),n=LN();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function E(t){if(u(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,l=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return E(f),t;if(p===l)return E(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==l.return)r=f,l=p;else{for(var T=!1,A=f.child;A;){if(A===r){T=!0,r=f,l=p;break}if(A===l){T=!0,l=f,r=p;break}A=A.sibling}if(!T){for(A=p.child;A;){if(A===r){T=!0,r=p,l=f;break}if(A===l){T=!0,l=p,r=f;break}A=A.sibling}if(!T)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case Ee:return"Suspense";case ye:return"SuspenseList";case L:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case K:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Ae(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return Ae(t(i))}catch{}}return null}var Ze=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},$e=[],et=-1;function X(t){return{current:t}}function de(t){0>et||(t.current=$e[et],$e[et]=null,et--)}function oe(t,i){et++,$e[et]=t.current,t.current=i}var Se=X(null),Me=X(null),ze=X(null),le=X(null);function Le(t,i){switch(oe(ze,i),oe(Me,t),oe(Se,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?tE(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=tE(i),t=nE(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}de(Se),oe(Se,t)}function nt(){de(Se),de(Me),de(ze)}function kt(t){t.memoizedState!==null&&oe(le,t);var i=Se.current,r=nE(i,t.type);i!==r&&(oe(Me,t),oe(Se,r))}function ln(t){Me.current===t&&(de(Se),de(Me)),le.current===t&&(de(le),mc._currentValue=we)}var Ut,zs;function Yn(t){if(Ut===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Ut=i&&i[1]||"",zs=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+t+zs}var Ca=!1;function jt(t,i){if(!t||Ca)return"";Ca=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(re){var se=re}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(re){se=re}t.call(pe.prototype)}}else{try{throw Error()}catch(re){se=re}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(re){if(re&&se&&typeof re.stack=="string")return[re.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],A=p[1];if(T&&A){var P=T.split(`
`),ne=A.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===ne.length)for(l=P.length-1,f=ne.length-1;1<=l&&0<=f&&P[l]!==ne[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==ne[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==ne[f]){var ue=`
`+P[l].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=l&&0<=f);break}}}finally{Ca=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Yn(r):""}function $i(t,i){switch(t.tag){case 26:case 27:case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return t.child!==i&&i!==null?Yn("Suspense Fallback"):Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return jt(t.type,!1);case 11:return jt(t.type.render,!1);case 1:return jt(t.type,!0);case 31:return Yn("Activity");default:return""}}function Ia(t){try{var i="",r=null;do i+=$i(t,r),r=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Wt=Object.prototype.hasOwnProperty,an=s.unstable_scheduleCallback,As=s.unstable_cancelCallback,Ll=s.unstable_shouldYield,br=s.unstable_requestPaint,On=s.unstable_now,di=s.unstable_getCurrentPriorityLevel,fi=s.unstable_ImmediatePriority,is=s.unstable_UserBlockingPriority,hi=s.unstable_NormalPriority,_o=s.unstable_LowPriority,Sr=s.unstable_IdlePriority,go=s.log,yo=s.unstable_setDisableYieldValue,Rs=null,Be=null;function as(t){if(typeof go=="function"&&yo(t),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Rs,t)}catch{}}var $t=Math.clz32?Math.clz32:Eo,Nr=Math.log,Cs=Math.LN2;function Eo(t){return t>>>=0,t===0?32:31-(Nr(t)/Cs|0)|0}var Sn=256,Ni=262144,en=4194304;function Is(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ne(t,i,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?f=Is(l):(T&=A,T!==0?f=Is(T):r||(r=A&~t,r!==0&&(f=Is(r))))):(A=l&~p,A!==0?f=Is(A):T!==0?f=Is(T):r||(r=l&~t,r!==0&&(f=Is(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function ks(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ol(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mn(){var t=en;return en<<=1,(en&62914560)===0&&(en=4194304),t}function ps(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function mi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function xr(t,i,r,l,f,p){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,P=t.expirationTimes,ne=t.hiddenUpdates;for(r=T&~r;0<r;){var ue=31-$t(r),pe=1<<ue;A[ue]=0,P[ue]=-1;var se=ne[ue];if(se!==null)for(ne[ue]=null,ue=0;ue<se.length;ue++){var re=se[ue];re!==null&&(re.lane&=-536870913)}r&=~pe}l!==0&&rs(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~i))}function rs(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-$t(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function ka(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var l=31-$t(r),f=1<<l;f&i|t[l]&i&&(t[l]|=i),r&=~f}}function mn(t,i){var r=i&-i;return r=(r&42)!==0?1:xi(r),(r&(t.suspendedLanes|i))!==0?0:r}function xi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wr(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:xE(t.type))}function _s(t,i){var r=fe.p;try{return fe.p=t,i()}finally{fe.p=r}}var Kn=Math.random().toString(36).slice(2),mt="__reactFiber$"+Kn,cn="__reactProps$"+Kn,Xs="__reactContainer$"+Kn,wi="__reactEvents$"+Kn,Ml="__reactListeners$"+Kn,ja="__reactHandles$"+Kn,Ar="__reactResources$"+Kn,os="__reactMarker$"+Kn;function Da(t){delete t[mt],delete t[cn],delete t[wi],delete t[Ml],delete t[ja]}function un(t){var i=t[mt];if(i)return i;for(var r=t.parentNode;r;){if(i=r[Xs]||r[mt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=cE(t);t!==null;){if(r=t[mt])return r;t=cE(t)}return i}t=r,r=t.parentNode}return null}function Un(t){if(t=t[mt]||t[Xs]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Vn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function js(t){var i=t[Ar];return i||(i=t[Ar]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function tn(t){t[os]=!0}var pi=new Set,La={};function ls(t,i){Ds(t,i),Ds(t+"Capture",i)}function Ds(t,i){for(La[t]=i,t=0;t<i.length;t++)pi.add(i[t])}var $s=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yi={},Oa={};function Rr(t){return Wt.call(Oa,t)?!0:Wt.call(Yi,t)?!1:$s.test(t)?Oa[t]=!0:(Yi[t]=!0,!1)}function Qi(t,i,r){if(Rr(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function cs(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function Lt(t,i,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+l)}}function at(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wn(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ai(t,i,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){r=""+T,p.call(this,T)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Tt(t){if(!t._valueTracker){var i=Wn(t)?"checked":"value";t._valueTracker=Ai(t,i,""+t[i])}}function Ys(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),l="";return t&&(l=Wn(t)?t.checked?"true":"false":t.value),t=l,t!==r?(i.setValue(t),!0):!1}function gs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ki=/[\n"\\]/g;function Jn(t){return t.replace(Ki,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Qs(t,i,r,l,f,p,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+at(i)):t.value!==""+at(i)&&(t.value=""+at(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?Ir(t,T,at(i)):r!=null?Ir(t,T,at(r)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+at(A):t.removeAttribute("name")}function Cr(t,i,r,l,f,p,T,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Tt(t);return}r=r!=null?""+at(r):"",i=i!=null?""+at(i):r,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Tt(t)}function Ir(t,i,r){i==="number"&&gs(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ks(t,i,r,l){if(t=t.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=i.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+at(r),i=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function kr(t,i,r){if(i!=null&&(i=""+at(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+at(r):""}function Ws(t,i,r,l){if(i==null){if(l!=null){if(r!=null)throw Error(a(92));if(Ze(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),i=r}r=at(i),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),Tt(t)}function An(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ri(t,i,r){var l=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,r):typeof r!="number"||r===0||vo.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function Ci(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&r[f]!==l&&Ri(t,f,l)}else for(var p in i)i.hasOwnProperty(p)&&Ri(t,p,i[p])}function ys(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function us(t){return Rn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qn(){}var jr=null;function Ce(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Js=null,ds=null;function Ii(t){var i=Un(t);if(i&&(t=i.stateNode)){var r=t[cn]||null;e:switch(t=i.stateNode,i.type){case"input":if(Qs(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Jn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var l=r[i];if(l!==t&&l.form===t.form){var f=l[cn]||null;if(!f)throw Error(a(90));Qs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)l=r[i],l.form===t.form&&Ys(l)}break e;case"textarea":kr(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Ks(t,!!r.multiple,i,!1)}}}var Wi=!1;function Es(t,i,r){if(Wi)return t(i,r);Wi=!0;try{var l=t(i);return l}finally{if(Wi=!1,(Js!==null||ds!==null)&&(Ru(),Js&&(i=Js,t=ds,ds=Js=null,Ii(i),t)))for(i=0;i<t.length;i++)Ii(t[i])}}function pn(t,i){var r=t.stateNode;if(r===null)return null;var l=r[cn]||null;if(l===null)return null;r=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=!1;if(Cn)try{var m={};Object.defineProperty(m,"passive",{get:function(){_i=!0}}),window.addEventListener("test",m,m),window.removeEventListener("test",m,m)}catch{_i=!1}var y=null,N=null,C=null;function F(){if(C)return C;var t,i=N,r=i.length,l,f="value"in y?y.value:y.textContent,p=f.length;for(t=0;t<r&&i[t]===f[t];t++);var T=r-t;for(l=1;l<=T&&i[r-l]===f[p-l];l++);return C=f.slice(t,1<l?1-l:void 0)}function J(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ce(){return!0}function De(){return!1}function Fe(t){function i(r,l,f,p,T){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ce:De,this.isPropagationStopped=De,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ce)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ce)},persist:function(){},isPersistent:ce}),i}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xt=Fe(Ke),nn=x({},Ke,{view:0,detail:0}),Ua=Fe(nn),ki,Ji,Zs,Zi=x({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zs&&(Zs&&t.type==="mousemove"?(ki=t.screenX-Zs.screenX,Ji=t.screenY-Zs.screenY):Ji=ki=0,Zs=t),ki)},movementY:function(t){return"movementY"in t?t.movementY:Ji}}),Dr=Fe(Zi),ea=x({},Zi,{dataTransfer:0}),To=Fe(ea),bo=x({},nn,{relatedTarget:0}),ta=Fe(bo),Lr=x({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),So=Fe(Lr),Va=x({},Ke,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Or=Fe(Va),No=x({},Ke,{data:0}),ei=Fe(No),xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ao={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ao[t])?!!i[t]:!1}function ji(){return Ro}var In=x({},nn,{key:function(t){if(t.key){var i=xo[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=J(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(t){return t.type==="keypress"?J(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?J(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Co=Fe(In),Io=x({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gi=Fe(Io),d=x({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),v=Fe(d),b=x({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Fe(b),Z=x({},Zi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=Fe(Z),xe=x({},Ke,{newState:0,oldState:0}),tt=Fe(xe),Jt=[9,13,27,32],bt=Cn&&"CompositionEvent"in window,Pt=null;Cn&&"documentMode"in document&&(Pt=document.documentMode);var W=Cn&&"TextEvent"in window&&!Pt,me=Cn&&(!bt||Pt&&8<Pt&&11>=Pt),Re=" ",Ue=!1;function Ye(t,i){switch(t){case"keyup":return Jt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kn=!1;function vs(t,i){switch(t){case"compositionend":return pt(i);case"keypress":return i.which!==32?null:(Ue=!0,Re);case"textInput":return t=i.data,t===Re&&Ue?null:t;default:return null}}function fs(t,i){if(kn)return t==="compositionend"||!bt&&Ye(t,i)?(t=F(),C=N=y=null,kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return me&&i.locale!=="ko"?null:i.data;default:return null}}var Ls={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ko(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ls[t.type]:i==="textarea"}function Di(t,i,r,l){Js?ds?ds.push(l):ds=[l]:Js=l,i=Ou(i,"onChange"),0<i.length&&(r=new xt("onChange","change",null,r,l),t.push({event:r,listeners:i}))}var Mr=null,Ul=null;function Z1(t){Qy(t,0)}function $c(t){var i=Vn(t);if(Ys(i))return t}function m_(t,i){if(t==="change")return i}var p_=!1;if(Cn){var cf;if(Cn){var uf="oninput"in document;if(!uf){var __=document.createElement("div");__.setAttribute("oninput","return;"),uf=typeof __.oninput=="function"}cf=uf}else cf=!1;p_=cf&&(!document.documentMode||9<document.documentMode)}function g_(){Mr&&(Mr.detachEvent("onpropertychange",y_),Ul=Mr=null)}function y_(t){if(t.propertyName==="value"&&$c(Ul)){var i=[];Di(i,Ul,t,Ce(t)),Es(Z1,i)}}function eS(t,i,r){t==="focusin"?(g_(),Mr=i,Ul=r,Mr.attachEvent("onpropertychange",y_)):t==="focusout"&&g_()}function tS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(Ul)}function nS(t,i){if(t==="click")return $c(i)}function sS(t,i){if(t==="input"||t==="change")return $c(i)}function iS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Os=typeof Object.is=="function"?Object.is:iS;function Vl(t,i){if(Os(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),l=Object.keys(i);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!Wt.call(i,f)||!Os(t[f],i[f]))return!1}return!0}function E_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v_(t,i){var r=E_(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=i&&l>=i)return{node:r,offset:i-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=E_(r)}}function T_(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?T_(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function b_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=gs(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=gs(t.document)}return i}function df(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var aS=Cn&&"documentMode"in document&&11>=document.documentMode,jo=null,ff=null,ql=null,hf=!1;function S_(t,i,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;hf||jo==null||jo!==gs(l)||(l=jo,"selectionStart"in l&&df(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ql&&Vl(ql,l)||(ql=l,l=Ou(ff,"onSelect"),0<l.length&&(i=new xt("onSelect","select",null,i,r),t.push({event:i,listeners:l}),i.target=jo)))}function Ur(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var Do={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionrun:Ur("Transition","TransitionRun"),transitionstart:Ur("Transition","TransitionStart"),transitioncancel:Ur("Transition","TransitionCancel"),transitionend:Ur("Transition","TransitionEnd")},mf={},N_={};Cn&&(N_=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Vr(t){if(mf[t])return mf[t];if(!Do[t])return t;var i=Do[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in N_)return mf[t]=i[r];return t}var x_=Vr("animationend"),w_=Vr("animationiteration"),A_=Vr("animationstart"),rS=Vr("transitionrun"),oS=Vr("transitionstart"),lS=Vr("transitioncancel"),R_=Vr("transitionend"),C_=new Map,pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pf.push("scrollEnd");function yi(t,i){C_.set(t,i),ls(i,[t])}var Yc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ti=[],Lo=0,_f=0;function Qc(){for(var t=Lo,i=_f=Lo=0;i<t;){var r=ti[i];ti[i++]=null;var l=ti[i];ti[i++]=null;var f=ti[i];ti[i++]=null;var p=ti[i];if(ti[i++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&I_(r,f,p)}}function Kc(t,i,r,l){ti[Lo++]=t,ti[Lo++]=i,ti[Lo++]=r,ti[Lo++]=l,_f|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function gf(t,i,r,l){return Kc(t,i,r,l),Wc(t)}function qr(t,i){return Kc(t,null,null,i),Wc(t)}function I_(t,i,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&i!==null&&(f=31-$t(r),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=r|536870912),p):null}function Wc(t){if(50<oc)throw oc=0,wh=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Oo={};function cS(t,i,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(t,i,r,l){return new cS(t,i,r,l)}function yf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function na(t,i){var r=t.alternate;return r===null?(r=Ms(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function k_(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Jc(t,i,r,l,f,p){var T=0;if(l=t,typeof t=="function")yf(t)&&(T=1);else if(typeof t=="string")T=mN(t,r,Se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case L:return t=Ms(31,r,i,f),t.elementType=L,t.lanes=p,t;case U:return Br(r.children,f,p,i);case V:T=8,f|=24;break;case z:return t=Ms(12,r,i,f|2),t.elementType=z,t.lanes=p,t;case Ee:return t=Ms(13,r,i,f),t.elementType=Ee,t.lanes=p,t;case ye:return t=Ms(19,r,i,f),t.elementType=ye,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:T=10;break e;case G:T=9;break e;case ie:T=11;break e;case D:T=14;break e;case R:T=16,l=null;break e}T=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=Ms(T,r,i,f),i.elementType=t,i.type=l,i.lanes=p,i}function Br(t,i,r,l){return t=Ms(7,t,l,i),t.lanes=r,t}function Ef(t,i,r){return t=Ms(6,t,null,i),t.lanes=r,t}function j_(t){var i=Ms(18,null,null,0);return i.stateNode=t,i}function vf(t,i,r){return i=Ms(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var D_=new WeakMap;function ni(t,i){if(typeof t=="object"&&t!==null){var r=D_.get(t);return r!==void 0?r:(i={value:t,source:i,stack:Ia(i)},D_.set(t,i),i)}return{value:t,source:i,stack:Ia(i)}}var Mo=[],Uo=0,Zc=null,Bl=0,si=[],ii=0,qa=null,Li=1,Oi="";function sa(t,i){Mo[Uo++]=Bl,Mo[Uo++]=Zc,Zc=t,Bl=i}function L_(t,i,r){si[ii++]=Li,si[ii++]=Oi,si[ii++]=qa,qa=t;var l=Li;t=Oi;var f=32-$t(l)-1;l&=~(1<<f),r+=1;var p=32-$t(i)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,Li=1<<32-$t(i)+f|r<<f|l,Oi=p+t}else Li=1<<p|r<<f|l,Oi=t}function Tf(t){t.return!==null&&(sa(t,1),L_(t,1,0))}function bf(t){for(;t===Zc;)Zc=Mo[--Uo],Mo[Uo]=null,Bl=Mo[--Uo],Mo[Uo]=null;for(;t===qa;)qa=si[--ii],si[ii]=null,Oi=si[--ii],si[ii]=null,Li=si[--ii],si[ii]=null}function O_(t,i){si[ii++]=Li,si[ii++]=Oi,si[ii++]=qa,Li=i.id,Oi=i.overflow,qa=t}var Bn=null,Yt=null,vt=!1,Ba=null,ai=!1,Sf=Error(a(519));function Pa(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(ni(i,t)),Sf}function M_(t){var i=t.stateNode,r=t.type,l=t.memoizedProps;switch(i[mt]=t,i[cn]=l,r){case"dialog":ft("cancel",i),ft("close",i);break;case"iframe":case"object":case"embed":ft("load",i);break;case"video":case"audio":for(r=0;r<cc.length;r++)ft(cc[r],i);break;case"source":ft("error",i);break;case"img":case"image":case"link":ft("error",i),ft("load",i);break;case"details":ft("toggle",i);break;case"input":ft("invalid",i),Cr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ft("invalid",i);break;case"textarea":ft("invalid",i),Ws(i,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||l.suppressHydrationWarning===!0||Zy(i.textContent,r)?(l.popover!=null&&(ft("beforetoggle",i),ft("toggle",i)),l.onScroll!=null&&ft("scroll",i),l.onScrollEnd!=null&&ft("scrollend",i),l.onClick!=null&&(i.onclick=qn),i=!0):i=!1,i||Pa(t,!0)}function U_(t){for(Bn=t.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Bn=Bn.return}}function Vo(t){if(t!==Bn)return!1;if(!vt)return U_(t),vt=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Ph(t.type,t.memoizedProps)),r=!r),r&&Yt&&Pa(t),U_(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Yt=lE(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Yt=lE(t)}else i===27?(i=Yt,tr(t.type)?(t=Xh,Xh=null,Yt=t):Yt=i):Yt=Bn?oi(t.stateNode.nextSibling):null;return!0}function Pr(){Yt=Bn=null,vt=!1}function Nf(){var t=Ba;return t!==null&&(Ns===null?Ns=t:Ns.push.apply(Ns,t),Ba=null),t}function Pl(t){Ba===null?Ba=[t]:Ba.push(t)}var xf=X(null),Fr=null,ia=null;function Fa(t,i,r){oe(xf,i._currentValue),i._currentValue=r}function aa(t){t._currentValue=xf.current,de(xf)}function wf(t,i,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===r)break;t=t.return}}function Af(t,i,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var P=0;P<i.length;P++)if(A.context===i[P]){p.lanes|=r,A=p.alternate,A!==null&&(A.lanes|=r),wf(p.return,r,t),l||(T=null);break e}p=A.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(a(341));T.lanes|=r,p=T.alternate,p!==null&&(p.lanes|=r),wf(T,r,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function qo(t,i,r,l){t=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var A=f.type;Os(f.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(f===le.current){if(T=f.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(mc):t=[mc])}f=f.return}t!==null&&Af(i,t,r,l),i.flags|=262144}function eu(t){for(t=t.firstContext;t!==null;){if(!Os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gr(t){Fr=t,ia=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pn(t){return V_(Fr,t)}function tu(t,i){return Fr===null&&Gr(t),V_(t,i)}function V_(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},ia===null){if(t===null)throw Error(a(308));ia=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ia=ia.next=i;return r}var uS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},dS=s.unstable_scheduleCallback,fS=s.unstable_NormalPriority,_n={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new uS,data:new Map,refCount:0}}function Fl(t){t.refCount--,t.refCount===0&&dS(fS,function(){t.controller.abort()})}var Gl=null,Cf=0,Bo=0,Po=null;function hS(t,i){if(Gl===null){var r=Gl=[];Cf=0,Bo=jh(),Po={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Cf++,i.then(q_,q_),i}function q_(){if(--Cf===0&&Gl!==null){Po!==null&&(Po.status="fulfilled");var t=Gl;Gl=null,Bo=0,Po=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function mS(t,i){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var B_=Y.S;Y.S=function(t,i){Sy=On(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&hS(t,i),B_!==null&&B_(t,i)};var Hr=X(null);function If(){var t=Hr.current;return t!==null?t:Ft.pooledCache}function nu(t,i){i===null?oe(Hr,Hr.current):oe(Hr,i.pool)}function P_(){var t=If();return t===null?null:{parent:_n._currentValue,pool:t}}var Fo=Error(a(460)),kf=Error(a(474)),su=Error(a(542)),iu={then:function(){}};function F_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function G_(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(qn,qn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,z_(t),t;default:if(typeof i.status=="string")i.then(qn,qn);else{if(t=Ft,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,z_(t),t}throw Xr=i,Fo}}function zr(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Xr=r,Fo):r}}var Xr=null;function H_(){if(Xr===null)throw Error(a(459));var t=Xr;return Xr=null,t}function z_(t){if(t===Fo||t===su)throw Error(a(483))}var Go=null,Hl=0;function au(t){var i=Hl;return Hl+=1,Go===null&&(Go=[]),G_(Go,t,i)}function zl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ru(t,i){throw i.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function X_(t){function i(Q,$){if(t){var te=Q.deletions;te===null?(Q.deletions=[$],Q.flags|=16):te.push($)}}function r(Q,$){if(!t)return null;for(;$!==null;)i(Q,$),$=$.sibling;return null}function l(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function f(Q,$){return Q=na(Q,$),Q.index=0,Q.sibling=null,Q}function p(Q,$,te){return Q.index=te,t?(te=Q.alternate,te!==null?(te=te.index,te<$?(Q.flags|=67108866,$):te):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function T(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function A(Q,$,te,he){return $===null||$.tag!==6?($=Ef(te,Q.mode,he),$.return=Q,$):($=f($,te),$.return=Q,$)}function P(Q,$,te,he){var Ge=te.type;return Ge===U?ue(Q,$,te.props.children,he,te.key):$!==null&&($.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===R&&zr(Ge)===$.type)?($=f($,te.props),zl($,te),$.return=Q,$):($=Jc(te.type,te.key,te.props,null,Q.mode,he),zl($,te),$.return=Q,$)}function ne(Q,$,te,he){return $===null||$.tag!==4||$.stateNode.containerInfo!==te.containerInfo||$.stateNode.implementation!==te.implementation?($=vf(te,Q.mode,he),$.return=Q,$):($=f($,te.children||[]),$.return=Q,$)}function ue(Q,$,te,he,Ge){return $===null||$.tag!==7?($=Br(te,Q.mode,he,Ge),$.return=Q,$):($=f($,te),$.return=Q,$)}function pe(Q,$,te){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Ef(""+$,Q.mode,te),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case B:return te=Jc($.type,$.key,$.props,null,Q.mode,te),zl(te,$),te.return=Q,te;case H:return $=vf($,Q.mode,te),$.return=Q,$;case R:return $=zr($),pe(Q,$,te)}if(Ze($)||O($))return $=Br($,Q.mode,te,null),$.return=Q,$;if(typeof $.then=="function")return pe(Q,au($),te);if($.$$typeof===K)return pe(Q,tu(Q,$),te);ru(Q,$)}return null}function se(Q,$,te,he){var Ge=$!==null?$.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Ge!==null?null:A(Q,$,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case B:return te.key===Ge?P(Q,$,te,he):null;case H:return te.key===Ge?ne(Q,$,te,he):null;case R:return te=zr(te),se(Q,$,te,he)}if(Ze(te)||O(te))return Ge!==null?null:ue(Q,$,te,he,null);if(typeof te.then=="function")return se(Q,$,au(te),he);if(te.$$typeof===K)return se(Q,$,tu(Q,te),he);ru(Q,te)}return null}function re(Q,$,te,he,Ge){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Q=Q.get(te)||null,A($,Q,""+he,Ge);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case B:return Q=Q.get(he.key===null?te:he.key)||null,P($,Q,he,Ge);case H:return Q=Q.get(he.key===null?te:he.key)||null,ne($,Q,he,Ge);case R:return he=zr(he),re(Q,$,te,he,Ge)}if(Ze(he)||O(he))return Q=Q.get(te)||null,ue($,Q,he,Ge,null);if(typeof he.then=="function")return re(Q,$,te,au(he),Ge);if(he.$$typeof===K)return re(Q,$,te,tu($,he),Ge);ru($,he)}return null}function Oe(Q,$,te,he){for(var Ge=null,At=null,Ve=$,ut=$=0,gt=null;Ve!==null&&ut<te.length;ut++){Ve.index>ut?(gt=Ve,Ve=null):gt=Ve.sibling;var Rt=se(Q,Ve,te[ut],he);if(Rt===null){Ve===null&&(Ve=gt);break}t&&Ve&&Rt.alternate===null&&i(Q,Ve),$=p(Rt,$,ut),At===null?Ge=Rt:At.sibling=Rt,At=Rt,Ve=gt}if(ut===te.length)return r(Q,Ve),vt&&sa(Q,ut),Ge;if(Ve===null){for(;ut<te.length;ut++)Ve=pe(Q,te[ut],he),Ve!==null&&($=p(Ve,$,ut),At===null?Ge=Ve:At.sibling=Ve,At=Ve);return vt&&sa(Q,ut),Ge}for(Ve=l(Ve);ut<te.length;ut++)gt=re(Ve,Q,ut,te[ut],he),gt!==null&&(t&&gt.alternate!==null&&Ve.delete(gt.key===null?ut:gt.key),$=p(gt,$,ut),At===null?Ge=gt:At.sibling=gt,At=gt);return t&&Ve.forEach(function(rr){return i(Q,rr)}),vt&&sa(Q,ut),Ge}function Qe(Q,$,te,he){if(te==null)throw Error(a(151));for(var Ge=null,At=null,Ve=$,ut=$=0,gt=null,Rt=te.next();Ve!==null&&!Rt.done;ut++,Rt=te.next()){Ve.index>ut?(gt=Ve,Ve=null):gt=Ve.sibling;var rr=se(Q,Ve,Rt.value,he);if(rr===null){Ve===null&&(Ve=gt);break}t&&Ve&&rr.alternate===null&&i(Q,Ve),$=p(rr,$,ut),At===null?Ge=rr:At.sibling=rr,At=rr,Ve=gt}if(Rt.done)return r(Q,Ve),vt&&sa(Q,ut),Ge;if(Ve===null){for(;!Rt.done;ut++,Rt=te.next())Rt=pe(Q,Rt.value,he),Rt!==null&&($=p(Rt,$,ut),At===null?Ge=Rt:At.sibling=Rt,At=Rt);return vt&&sa(Q,ut),Ge}for(Ve=l(Ve);!Rt.done;ut++,Rt=te.next())Rt=re(Ve,Q,ut,Rt.value,he),Rt!==null&&(t&&Rt.alternate!==null&&Ve.delete(Rt.key===null?ut:Rt.key),$=p(Rt,$,ut),At===null?Ge=Rt:At.sibling=Rt,At=Rt);return t&&Ve.forEach(function(xN){return i(Q,xN)}),vt&&sa(Q,ut),Ge}function Bt(Q,$,te,he){if(typeof te=="object"&&te!==null&&te.type===U&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case B:e:{for(var Ge=te.key;$!==null;){if($.key===Ge){if(Ge=te.type,Ge===U){if($.tag===7){r(Q,$.sibling),he=f($,te.props.children),he.return=Q,Q=he;break e}}else if($.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===R&&zr(Ge)===$.type){r(Q,$.sibling),he=f($,te.props),zl(he,te),he.return=Q,Q=he;break e}r(Q,$);break}else i(Q,$);$=$.sibling}te.type===U?(he=Br(te.props.children,Q.mode,he,te.key),he.return=Q,Q=he):(he=Jc(te.type,te.key,te.props,null,Q.mode,he),zl(he,te),he.return=Q,Q=he)}return T(Q);case H:e:{for(Ge=te.key;$!==null;){if($.key===Ge)if($.tag===4&&$.stateNode.containerInfo===te.containerInfo&&$.stateNode.implementation===te.implementation){r(Q,$.sibling),he=f($,te.children||[]),he.return=Q,Q=he;break e}else{r(Q,$);break}else i(Q,$);$=$.sibling}he=vf(te,Q.mode,he),he.return=Q,Q=he}return T(Q);case R:return te=zr(te),Bt(Q,$,te,he)}if(Ze(te))return Oe(Q,$,te,he);if(O(te)){if(Ge=O(te),typeof Ge!="function")throw Error(a(150));return te=Ge.call(te),Qe(Q,$,te,he)}if(typeof te.then=="function")return Bt(Q,$,au(te),he);if(te.$$typeof===K)return Bt(Q,$,tu(Q,te),he);ru(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,$!==null&&$.tag===6?(r(Q,$.sibling),he=f($,te),he.return=Q,Q=he):(r(Q,$),he=Ef(te,Q.mode,he),he.return=Q,Q=he),T(Q)):r(Q,$)}return function(Q,$,te,he){try{Hl=0;var Ge=Bt(Q,$,te,he);return Go=null,Ge}catch(Ve){if(Ve===Fo||Ve===su)throw Ve;var At=Ms(29,Ve,null,Q.mode);return At.lanes=he,At.return=Q,At}}}var $r=X_(!0),$_=X_(!1),Ga=!1;function jf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ha(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function za(t,i,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ct&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Wc(t),I_(t,null,r),i}return Kc(t,l,i,r),Wc(t)}function Xl(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,ka(t,r)}}function Lf(t,i){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Of=!1;function $l(){if(Of){var t=Po;if(t!==null)throw t}}function Yl(t,i,r,l){Of=!1;var f=t.updateQueue;Ga=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var P=A,ne=P.next;P.next=null,T===null?p=ne:T.next=ne,T=P;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,A=ue.lastBaseUpdate,A!==T&&(A===null?ue.firstBaseUpdate=ne:A.next=ne,ue.lastBaseUpdate=P))}if(p!==null){var pe=f.baseState;T=0,ue=ne=P=null,A=p;do{var se=A.lane&-536870913,re=se!==A.lane;if(re?(_t&se)===se:(l&se)===se){se!==0&&se===Bo&&(Of=!0),ue!==null&&(ue=ue.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Oe=t,Qe=A;se=i;var Bt=r;switch(Qe.tag){case 1:if(Oe=Qe.payload,typeof Oe=="function"){pe=Oe.call(Bt,pe,se);break e}pe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Qe.payload,se=typeof Oe=="function"?Oe.call(Bt,pe,se):Oe,se==null)break e;pe=x({},pe,se);break e;case 2:Ga=!0}}se=A.callback,se!==null&&(t.flags|=64,re&&(t.flags|=8192),re=f.callbacks,re===null?f.callbacks=[se]:re.push(se))}else re={lane:se,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ue===null?(ne=ue=re,P=pe):ue=ue.next=re,T|=se;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;re=A,A=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);ue===null&&(P=pe),f.baseState=P,f.firstBaseUpdate=ne,f.lastBaseUpdate=ue,p===null&&(f.shared.lanes=0),Ka|=T,t.lanes=T,t.memoizedState=pe}}function Y_(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Q_(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Y_(r[t],i)}var Ho=X(null),ou=X(0);function K_(t,i){t=ma,oe(ou,t),oe(Ho,i),ma=t|i.baseLanes}function Mf(){oe(ou,ma),oe(Ho,Ho.current)}function Uf(){ma=ou.current,de(Ho),de(ou)}var Us=X(null),ri=null;function Xa(t){var i=t.alternate;oe(dn,dn.current&1),oe(Us,t),ri===null&&(i===null||Ho.current!==null||i.memoizedState!==null)&&(ri=t)}function Vf(t){oe(dn,dn.current),oe(Us,t),ri===null&&(ri=t)}function W_(t){t.tag===22?(oe(dn,dn.current),oe(Us,t),ri===null&&(ri=t)):$a()}function $a(){oe(dn,dn.current),oe(Us,Us.current)}function Vs(t){de(Us),ri===t&&(ri=null),de(dn)}var dn=X(0);function lu(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Hh(r)||zh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ra=0,ct=null,Vt=null,gn=null,cu=!1,zo=!1,Yr=!1,uu=0,Ql=0,Xo=null,pS=0;function rn(){throw Error(a(321))}function qf(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Os(t[r],i[r]))return!1;return!0}function Bf(t,i,r,l,f,p){return ra=p,ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?Lg:th,Yr=!1,p=r(l,f),Yr=!1,zo&&(p=Z_(i,r,l,f)),J_(t),p}function J_(t){Y.H=Jl;var i=Vt!==null&&Vt.next!==null;if(ra=0,gn=Vt=ct=null,cu=!1,Ql=0,Xo=null,i)throw Error(a(300));t===null||yn||(t=t.dependencies,t!==null&&eu(t)&&(yn=!0))}function Z_(t,i,r,l){ct=t;var f=0;do{if(zo&&(Xo=null),Ql=0,zo=!1,25<=f)throw Error(a(301));if(f+=1,gn=Vt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=Og,p=i(r,l)}while(zo);return p}function _S(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?Kl(i):i,t=t.useState()[0],(Vt!==null?Vt.memoizedState:null)!==t&&(ct.flags|=1024),i}function Pf(){var t=uu!==0;return uu=0,t}function Ff(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function Gf(t){if(cu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}cu=!1}ra=0,gn=Vt=ct=null,zo=!1,Ql=uu=0,Xo=null}function hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ct.memoizedState=gn=t:gn=gn.next=t,gn}function fn(){if(Vt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var i=gn===null?ct.memoizedState:gn.next;if(i!==null)gn=i,Vt=t;else{if(t===null)throw ct.alternate===null?Error(a(467)):Error(a(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},gn===null?ct.memoizedState=gn=t:gn=gn.next=t}return gn}function du(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(t){var i=Ql;return Ql+=1,Xo===null&&(Xo=[]),t=G_(Xo,t,i),i=ct,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Lg:th),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Kl(t);if(t.$$typeof===K)return Pn(t)}throw Error(a(438,String(t)))}function Hf(t){var i=null,r=ct.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var l=ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=du(),ct.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),l=0;l<t;l++)r[l]=q;return i.index++,r}function oa(t,i){return typeof i=="function"?i(t):i}function hu(t){var i=fn();return zf(i,Vt,t)}function zf(t,i,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{i=f.next;var A=T=null,P=null,ne=i,ue=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(_t&pe)===pe:(ra&pe)===pe){var se=ne.revertLane;if(se===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===Bo&&(ue=!0);else if((ra&se)===se){ne=ne.next,se===Bo&&(ue=!0);continue}else pe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},P===null?(A=P=pe,T=p):P=P.next=pe,ct.lanes|=se,Ka|=se;pe=ne.action,Yr&&r(p,pe),p=ne.hasEagerState?ne.eagerState:r(p,pe)}else se={lane:pe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},P===null?(A=P=se,T=p):P=P.next=se,ct.lanes|=pe,Ka|=pe;ne=ne.next}while(ne!==null&&ne!==i);if(P===null?T=p:P.next=A,!Os(p,t.memoizedState)&&(yn=!0,ue&&(r=Po,r!==null)))throw r;t.memoizedState=p,t.baseState=T,t.baseQueue=P,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xf(t){var i=fn(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var T=f=f.next;do p=t(p,T.action),T=T.next;while(T!==f);Os(p,i.memoizedState)||(yn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,l]}function eg(t,i,r){var l=ct,f=fn(),p=vt;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var T=!Os((Vt||f).memoizedState,r);if(T&&(f.memoizedState=r,yn=!0),f=f.queue,Qf(sg.bind(null,l,f,t),[t]),f.getSnapshot!==i||T||gn!==null&&gn.memoizedState.tag&1){if(l.flags|=2048,$o(9,{destroy:void 0},ng.bind(null,l,f,r,i),null),Ft===null)throw Error(a(349));p||(ra&127)!==0||tg(l,i,r)}return r}function tg(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=ct.updateQueue,i===null?(i=du(),ct.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function ng(t,i,r,l){i.value=r,i.getSnapshot=l,ig(i)&&ag(t)}function sg(t,i,r){return r(function(){ig(i)&&ag(t)})}function ig(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Os(t,r)}catch{return!0}}function ag(t){var i=qr(t,2);i!==null&&xs(i,t,2)}function $f(t){var i=hs();if(typeof t=="function"){var r=t;if(t=r(),Yr){as(!0);try{r()}finally{as(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},i}function rg(t,i,r,l){return t.baseState=r,zf(t,Vt,typeof l=="function"?l:oa)}function gS(t,i,r,l,f){if(_u(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};Y.T!==null?r(!0):p.isTransition=!1,l(p),r=i.pending,r===null?(p.next=i.pending=p,og(i,p)):(p.next=r.next,i.pending=r.next=p)}}function og(t,i){var r=i.action,l=i.payload,f=t.state;if(i.isTransition){var p=Y.T,T={};Y.T=T;try{var A=r(f,l),P=Y.S;P!==null&&P(T,A),lg(t,i,A)}catch(ne){Yf(t,i,ne)}finally{p!==null&&T.types!==null&&(p.types=T.types),Y.T=p}}else try{p=r(f,l),lg(t,i,p)}catch(ne){Yf(t,i,ne)}}function lg(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){cg(t,i,l)},function(l){return Yf(t,i,l)}):cg(t,i,r)}function cg(t,i,r){i.status="fulfilled",i.value=r,ug(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,og(t,r)))}function Yf(t,i,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=r,ug(i),i=i.next;while(i!==l)}t.action=null}function ug(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function dg(t,i){return i}function fg(t,i){if(vt){var r=Ft.formState;if(r!==null){e:{var l=ct;if(vt){if(Yt){t:{for(var f=Yt,p=ai;f.nodeType!==8;){if(!p){f=null;break t}if(f=oi(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Yt=oi(f.nextSibling),l=f.data==="F!";break e}}Pa(l)}l=!1}l&&(i=r[0])}}return r=hs(),r.memoizedState=r.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dg,lastRenderedState:i},r.queue=l,r=kg.bind(null,ct,l),l.dispatch=r,l=$f(!1),p=eh.bind(null,ct,!1,l.queue),l=hs(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,r=gS.bind(null,ct,f,p,r),f.dispatch=r,l.memoizedState=t,[i,r,!1]}function hg(t){var i=fn();return mg(i,Vt,t)}function mg(t,i,r){if(i=zf(t,i,dg)[0],t=hu(oa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Kl(i)}catch(T){throw T===Fo?su:T}else l=i;i=fn();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&(ct.flags|=2048,$o(9,{destroy:void 0},yS.bind(null,f,r),null)),[l,p,t]}function yS(t,i){t.action=i}function pg(t){var i=fn(),r=Vt;if(r!==null)return mg(i,r,t);fn(),i=i.memoizedState,r=fn();var l=r.queue.dispatch;return r.memoizedState=t,[i,l,!1]}function $o(t,i,r,l){return t={tag:t,create:r,deps:l,inst:i,next:null},i=ct.updateQueue,i===null&&(i=du(),ct.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,i.lastEffect=t),t}function _g(){return fn().memoizedState}function mu(t,i,r,l){var f=hs();ct.flags|=t,f.memoizedState=$o(1|i,{destroy:void 0},r,l===void 0?null:l)}function pu(t,i,r,l){var f=fn();l=l===void 0?null:l;var p=f.memoizedState.inst;Vt!==null&&l!==null&&qf(l,Vt.memoizedState.deps)?f.memoizedState=$o(i,p,r,l):(ct.flags|=t,f.memoizedState=$o(1|i,p,r,l))}function gg(t,i){mu(8390656,8,t,i)}function Qf(t,i){pu(2048,8,t,i)}function ES(t){ct.flags|=4;var i=ct.updateQueue;if(i===null)i=du(),ct.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function yg(t){var i=fn().memoizedState;return ES({ref:i,nextImpl:t}),function(){if((Ct&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Eg(t,i){return pu(4,2,t,i)}function vg(t,i){return pu(4,4,t,i)}function Tg(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function bg(t,i,r){r=r!=null?r.concat([t]):null,pu(4,4,Tg.bind(null,i,t),r)}function Kf(){}function Sg(t,i){var r=fn();i=i===void 0?null:i;var l=r.memoizedState;return i!==null&&qf(i,l[1])?l[0]:(r.memoizedState=[t,i],t)}function Ng(t,i){var r=fn();i=i===void 0?null:i;var l=r.memoizedState;if(i!==null&&qf(i,l[1]))return l[0];if(l=t(),Yr){as(!0);try{t()}finally{as(!1)}}return r.memoizedState=[l,i],l}function Wf(t,i,r){return r===void 0||(ra&1073741824)!==0&&(_t&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=xy(),ct.lanes|=t,Ka|=t,r)}function xg(t,i,r,l){return Os(r,i)?r:Ho.current!==null?(t=Wf(t,r,l),Os(t,i)||(yn=!0),t):(ra&42)===0||(ra&1073741824)!==0&&(_t&261930)===0?(yn=!0,t.memoizedState=r):(t=xy(),ct.lanes|=t,Ka|=t,i)}function wg(t,i,r,l,f){var p=fe.p;fe.p=p!==0&&8>p?p:8;var T=Y.T,A={};Y.T=A,eh(t,!1,i,r);try{var P=f(),ne=Y.S;if(ne!==null&&ne(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ue=mS(P,l);Wl(t,i,ue,Ps(t))}else Wl(t,i,l,Ps(t))}catch(pe){Wl(t,i,{then:function(){},status:"rejected",reason:pe},Ps())}finally{fe.p=p,T!==null&&A.types!==null&&(T.types=A.types),Y.T=T}}function vS(){}function Jf(t,i,r,l){if(t.tag!==5)throw Error(a(476));var f=Ag(t).queue;wg(t,f,i,we,r===null?vS:function(){return Rg(t),r(l)})}function Ag(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:we},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Rg(t){var i=Ag(t);i.next===null&&(i=t.alternate.memoizedState),Wl(t,i.next.queue,{},Ps())}function Zf(){return Pn(mc)}function Cg(){return fn().memoizedState}function Ig(){return fn().memoizedState}function TS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=Ps();t=Ha(r);var l=za(i,t,r);l!==null&&(xs(l,i,r),Xl(l,i,r)),i={cache:Rf()},t.payload=i;return}i=i.return}}function bS(t,i,r){var l=Ps();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},_u(t)?jg(i,r):(r=gf(t,i,r,l),r!==null&&(xs(r,t,l),Dg(r,i,l)))}function kg(t,i,r){var l=Ps();Wl(t,i,r,l)}function Wl(t,i,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(_u(t))jg(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,A=p(T,r);if(f.hasEagerState=!0,f.eagerState=A,Os(A,T))return Kc(t,i,f,0),Ft===null&&Qc(),!1}catch{}if(r=gf(t,i,f,l),r!==null)return xs(r,t,l),Dg(r,i,l),!0}return!1}function eh(t,i,r,l){if(l={lane:2,revertLane:jh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},_u(t)){if(i)throw Error(a(479))}else i=gf(t,r,l,2),i!==null&&xs(i,t,2)}function _u(t){var i=t.alternate;return t===ct||i!==null&&i===ct}function jg(t,i){zo=cu=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function Dg(t,i,r){if((r&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,ka(t,r)}}var Jl={readContext:Pn,use:fu,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Jl.useEffectEvent=rn;var Lg={readContext:Pn,use:fu,useCallback:function(t,i){return hs().memoizedState=[t,i===void 0?null:i],t},useContext:Pn,useEffect:gg,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,mu(4194308,4,Tg.bind(null,i,t),r)},useLayoutEffect:function(t,i){return mu(4194308,4,t,i)},useInsertionEffect:function(t,i){mu(4,2,t,i)},useMemo:function(t,i){var r=hs();i=i===void 0?null:i;var l=t();if(Yr){as(!0);try{t()}finally{as(!1)}}return r.memoizedState=[l,i],l},useReducer:function(t,i,r){var l=hs();if(r!==void 0){var f=r(i);if(Yr){as(!0);try{r(i)}finally{as(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=bS.bind(null,ct,t),[l.memoizedState,t]},useRef:function(t){var i=hs();return t={current:t},i.memoizedState=t},useState:function(t){t=$f(t);var i=t.queue,r=kg.bind(null,ct,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:Kf,useDeferredValue:function(t,i){var r=hs();return Wf(r,t,i)},useTransition:function(){var t=$f(!1);return t=wg.bind(null,ct,t.queue,!0,!1),hs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var l=ct,f=hs();if(vt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),Ft===null)throw Error(a(349));(_t&127)!==0||tg(l,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,gg(sg.bind(null,l,p,t),[t]),l.flags|=2048,$o(9,{destroy:void 0},ng.bind(null,l,p,r,i),null),r},useId:function(){var t=hs(),i=Ft.identifierPrefix;if(vt){var r=Oi,l=Li;r=(l&~(1<<32-$t(l)-1)).toString(32)+r,i="_"+i+"R_"+r,r=uu++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=pS++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Zf,useFormState:fg,useActionState:fg,useOptimistic:function(t){var i=hs();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=eh.bind(null,ct,!0,r),r.dispatch=i,[t,i]},useMemoCache:Hf,useCacheRefresh:function(){return hs().memoizedState=TS.bind(null,ct)},useEffectEvent:function(t){var i=hs(),r={impl:t};return i.memoizedState=r,function(){if((Ct&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},th={readContext:Pn,use:fu,useCallback:Sg,useContext:Pn,useEffect:Qf,useImperativeHandle:bg,useInsertionEffect:Eg,useLayoutEffect:vg,useMemo:Ng,useReducer:hu,useRef:_g,useState:function(){return hu(oa)},useDebugValue:Kf,useDeferredValue:function(t,i){var r=fn();return xg(r,Vt.memoizedState,t,i)},useTransition:function(){var t=hu(oa)[0],i=fn().memoizedState;return[typeof t=="boolean"?t:Kl(t),i]},useSyncExternalStore:eg,useId:Cg,useHostTransitionStatus:Zf,useFormState:hg,useActionState:hg,useOptimistic:function(t,i){var r=fn();return rg(r,Vt,t,i)},useMemoCache:Hf,useCacheRefresh:Ig};th.useEffectEvent=yg;var Og={readContext:Pn,use:fu,useCallback:Sg,useContext:Pn,useEffect:Qf,useImperativeHandle:bg,useInsertionEffect:Eg,useLayoutEffect:vg,useMemo:Ng,useReducer:Xf,useRef:_g,useState:function(){return Xf(oa)},useDebugValue:Kf,useDeferredValue:function(t,i){var r=fn();return Vt===null?Wf(r,t,i):xg(r,Vt.memoizedState,t,i)},useTransition:function(){var t=Xf(oa)[0],i=fn().memoizedState;return[typeof t=="boolean"?t:Kl(t),i]},useSyncExternalStore:eg,useId:Cg,useHostTransitionStatus:Zf,useFormState:pg,useActionState:pg,useOptimistic:function(t,i){var r=fn();return Vt!==null?rg(r,Vt,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:Ig};Og.useEffectEvent=yg;function nh(t,i,r,l){i=t.memoizedState,r=r(l,i),r=r==null?i:x({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var sh={enqueueSetState:function(t,i,r){t=t._reactInternals;var l=Ps(),f=Ha(l);f.payload=i,r!=null&&(f.callback=r),i=za(t,f,l),i!==null&&(xs(i,t,l),Xl(i,t,l))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var l=Ps(),f=Ha(l);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=za(t,f,l),i!==null&&(xs(i,t,l),Xl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=Ps(),l=Ha(r);l.tag=2,i!=null&&(l.callback=i),i=za(t,l,r),i!==null&&(xs(i,t,r),Xl(i,t,r))}};function Mg(t,i,r,l,f,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,T):i.prototype&&i.prototype.isPureReactComponent?!Vl(r,l)||!Vl(f,p):!0}function Ug(t,i,r,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,l),i.state!==t&&sh.enqueueReplaceState(i,i.state,null)}function Qr(t,i){var r=i;if("ref"in i){r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}if(t=t.defaultProps){r===i&&(r=x({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function Vg(t){Yc(t)}function qg(t){console.error(t)}function Bg(t){Yc(t)}function gu(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Pg(t,i,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ih(t,i,r){return r=Ha(r),r.tag=3,r.payload={element:null},r.callback=function(){gu(t,i)},r}function Fg(t){return t=Ha(t),t.tag=3,t}function Gg(t,i,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Pg(i,r,l)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Pg(i,r,l),typeof f!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function SS(t,i,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=r.alternate,i!==null&&qo(i,r,f,!0),r=Us.current,r!==null){switch(r.tag){case 31:case 13:return ri===null?Cu():r.alternate===null&&on===0&&(on=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===iu?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([l]):i.add(l),Ch(t,l,f)),!1;case 22:return r.flags|=65536,l===iu?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([l]):r.add(l)),Ch(t,l,f)),!1}throw Error(a(435,r.tag))}return Ch(t,l,f),Cu(),!1}if(vt)return i=Us.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Sf&&(t=Error(a(422),{cause:l}),Pl(ni(t,r)))):(l!==Sf&&(i=Error(a(423),{cause:l}),Pl(ni(i,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ni(l,r),f=ih(t.stateNode,l,f),Lf(t,f),on!==4&&(on=2)),!1;var p=Error(a(520),{cause:l});if(p=ni(p,r),rc===null?rc=[p]:rc.push(p),on!==4&&(on=2),i===null)return!0;l=ni(l,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=ih(r.stateNode,l,t),Lf(r,t),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Wa===null||!Wa.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Fg(f),Gg(f,t,r,l),Lf(r,f),!1}r=r.return}while(r!==null);return!1}var ah=Error(a(461)),yn=!1;function Fn(t,i,r,l){i.child=t===null?$_(i,null,r,l):$r(i,t.child,r,l)}function Hg(t,i,r,l,f){r=r.render;var p=i.ref;if("ref"in l){var T={};for(var A in l)A!=="ref"&&(T[A]=l[A])}else T=l;return Gr(i),l=Bf(t,i,r,T,p,f),A=Pf(),t!==null&&!yn?(Ff(t,i,f),la(t,i,f)):(vt&&A&&Tf(i),i.flags|=1,Fn(t,i,l,f),i.child)}function zg(t,i,r,l,f){if(t===null){var p=r.type;return typeof p=="function"&&!yf(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,Xg(t,i,p,l,f)):(t=Jc(r.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!hh(t,f)){var T=p.memoizedProps;if(r=r.compare,r=r!==null?r:Vl,r(T,l)&&t.ref===i.ref)return la(t,i,f)}return i.flags|=1,t=na(p,l),t.ref=i.ref,t.return=i,i.child=t}function Xg(t,i,r,l,f){if(t!==null){var p=t.memoizedProps;if(Vl(p,l)&&t.ref===i.ref)if(yn=!1,i.pendingProps=l=p,hh(t,f))(t.flags&131072)!==0&&(yn=!0);else return i.lanes=t.lanes,la(t,i,f)}return rh(t,i,r,l,f)}function $g(t,i,r,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,i.child=null;return Yg(t,i,p,r,l)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&nu(i,p!==null?p.cachePool:null),p!==null?K_(i,p):Mf(),W_(i);else return l=i.lanes=536870912,Yg(t,i,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(nu(i,p.cachePool),K_(i,p),$a(),i.memoizedState=null):(t!==null&&nu(i,null),Mf(),$a());return Fn(t,i,f,r),i.child}function Zl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Yg(t,i,r,l,f){var p=If();return p=p===null?null:{parent:_n._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},t!==null&&nu(i,null),Mf(),W_(i),t!==null&&qo(t,i,l,!0),i.childLanes=f,null}function yu(t,i){return i=vu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Qg(t,i,r){return $r(i,t.child,null,r),t=yu(i,i.pendingProps),t.flags|=2,Vs(i),i.memoizedState=null,t}function NS(t,i,r){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(vt){if(l.mode==="hidden")return t=yu(i,l),i.lanes=536870912,Zl(null,t);if(Vf(i),(t=Yt)?(t=oE(t,ai),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:qa!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},r=j_(t),r.return=i,i.child=r,Bn=i,Yt=null)):t=null,t===null)throw Pa(i);return i.lanes=536870912,null}return yu(i,l)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(Vf(i),f)if(i.flags&256)i.flags&=-257,i=Qg(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(yn||qo(t,i,r,!1),f=(r&t.childLanes)!==0,yn||f){if(l=Ft,l!==null&&(T=mn(l,r),T!==0&&T!==p.retryLane))throw p.retryLane=T,qr(t,T),xs(l,t,T),ah;Cu(),i=Qg(t,i,r)}else t=p.treeContext,Yt=oi(T.nextSibling),Bn=i,vt=!0,Ba=null,ai=!1,t!==null&&O_(i,t),i=yu(i,l),i.flags|=4096;return i}return t=na(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Eu(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function rh(t,i,r,l,f){return Gr(i),r=Bf(t,i,r,l,void 0,f),l=Pf(),t!==null&&!yn?(Ff(t,i,f),la(t,i,f)):(vt&&l&&Tf(i),i.flags|=1,Fn(t,i,r,f),i.child)}function Kg(t,i,r,l,f,p){return Gr(i),i.updateQueue=null,r=Z_(i,l,r,f),J_(t),l=Pf(),t!==null&&!yn?(Ff(t,i,p),la(t,i,p)):(vt&&l&&Tf(i),i.flags|=1,Fn(t,i,r,p),i.child)}function Wg(t,i,r,l,f){if(Gr(i),i.stateNode===null){var p=Oo,T=r.contextType;typeof T=="object"&&T!==null&&(p=Pn(T)),p=new r(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=sh,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},jf(i),T=r.contextType,p.context=typeof T=="object"&&T!==null?Pn(T):Oo,p.state=i.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(nh(i,r,T,l),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&sh.enqueueReplaceState(p,p.state,null),Yl(i,l,p,f),$l(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){p=i.stateNode;var A=i.memoizedProps,P=Qr(r,A);p.props=P;var ne=p.context,ue=r.contextType;T=Oo,typeof ue=="object"&&ue!==null&&(T=Pn(ue));var pe=r.getDerivedStateFromProps;ue=typeof pe=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ue||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||ne!==T)&&Ug(i,p,l,T),Ga=!1;var se=i.memoizedState;p.state=se,Yl(i,l,p,f),$l(),ne=i.memoizedState,A||se!==ne||Ga?(typeof pe=="function"&&(nh(i,r,pe,l),ne=i.memoizedState),(P=Ga||Mg(i,r,P,l,se,ne,T))?(ue||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=ne),p.props=l,p.state=ne,p.context=T,l=P):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Df(t,i),T=i.memoizedProps,ue=Qr(r,T),p.props=ue,pe=i.pendingProps,se=p.context,ne=r.contextType,P=Oo,typeof ne=="object"&&ne!==null&&(P=Pn(ne)),A=r.getDerivedStateFromProps,(ne=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==pe||se!==P)&&Ug(i,p,l,P),Ga=!1,se=i.memoizedState,p.state=se,Yl(i,l,p,f),$l();var re=i.memoizedState;T!==pe||se!==re||Ga||t!==null&&t.dependencies!==null&&eu(t.dependencies)?(typeof A=="function"&&(nh(i,r,A,l),re=i.memoizedState),(ue=Ga||Mg(i,r,ue,l,se,re,P)||t!==null&&t.dependencies!==null&&eu(t.dependencies))?(ne||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,re,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,re,P)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=re),p.props=l,p.state=re,p.context=P,l=ue):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=1024),l=!1)}return p=l,Eu(t,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&l?(i.child=$r(i,t.child,null,f),i.child=$r(i,null,r,f)):Fn(t,i,r,f),i.memoizedState=p.state,t=i.child):t=la(t,i,f),t}function Jg(t,i,r,l){return Pr(),i.flags|=256,Fn(t,i,r,l),i.child}var oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lh(t){return{baseLanes:t,cachePool:P_()}}function ch(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=Bs),t}function Zg(t,i,r){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(dn.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(vt){if(f?Xa(i):$a(),(t=Yt)?(t=oE(t,ai),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:qa!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},r=j_(t),r.return=i,i.child=r,Bn=i,Yt=null)):t=null,t===null)throw Pa(i);return zh(t)?i.lanes=32:i.lanes=536870912,null}var A=l.children;return l=l.fallback,f?($a(),f=i.mode,A=vu({mode:"hidden",children:A},f),l=Br(l,f,r,null),A.return=i,l.return=i,A.sibling=l,i.child=A,l=i.child,l.memoizedState=lh(r),l.childLanes=ch(t,T,r),i.memoizedState=oh,Zl(null,l)):(Xa(i),uh(i,A))}var P=t.memoizedState;if(P!==null&&(A=P.dehydrated,A!==null)){if(p)i.flags&256?(Xa(i),i.flags&=-257,i=dh(t,i,r)):i.memoizedState!==null?($a(),i.child=t.child,i.flags|=128,i=null):($a(),A=l.fallback,f=i.mode,l=vu({mode:"visible",children:l.children},f),A=Br(A,f,r,null),A.flags|=2,l.return=i,A.return=i,l.sibling=A,i.child=l,$r(i,t.child,null,r),l=i.child,l.memoizedState=lh(r),l.childLanes=ch(t,T,r),i.memoizedState=oh,i=Zl(null,l));else if(Xa(i),zh(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var ne=T.dgst;T=ne,l=Error(a(419)),l.stack="",l.digest=T,Pl({value:l,source:null,stack:null}),i=dh(t,i,r)}else if(yn||qo(t,i,r,!1),T=(r&t.childLanes)!==0,yn||T){if(T=Ft,T!==null&&(l=mn(T,r),l!==0&&l!==P.retryLane))throw P.retryLane=l,qr(t,l),xs(T,t,l),ah;Hh(A)||Cu(),i=dh(t,i,r)}else Hh(A)?(i.flags|=192,i.child=t.child,i=null):(t=P.treeContext,Yt=oi(A.nextSibling),Bn=i,vt=!0,Ba=null,ai=!1,t!==null&&O_(i,t),i=uh(i,l.children),i.flags|=4096);return i}return f?($a(),A=l.fallback,f=i.mode,P=t.child,ne=P.sibling,l=na(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,ne!==null?A=na(ne,A):(A=Br(A,f,r,null),A.flags|=2),A.return=i,l.return=i,l.sibling=A,i.child=l,Zl(null,l),l=i.child,A=t.child.memoizedState,A===null?A=lh(r):(f=A.cachePool,f!==null?(P=_n._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=P_(),A={baseLanes:A.baseLanes|r,cachePool:f}),l.memoizedState=A,l.childLanes=ch(t,T,r),i.memoizedState=oh,Zl(t.child,l)):(Xa(i),r=t.child,t=r.sibling,r=na(r,{mode:"visible",children:l.children}),r.return=i,r.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=r,i.memoizedState=null,r)}function uh(t,i){return i=vu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function vu(t,i){return t=Ms(22,t,null,i),t.lanes=0,t}function dh(t,i,r){return $r(i,t.child,null,r),t=uh(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ey(t,i,r){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),wf(t.return,i,r)}function fh(t,i,r,l,f,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:p}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=r,T.tailMode=f,T.treeForkCount=p)}function ty(t,i,r){var l=i.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var T=dn.current,A=(T&2)!==0;if(A?(T=T&1|2,i.flags|=128):T&=1,oe(dn,T),Fn(t,i,l,r),l=vt?Bl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,r,i);else if(t.tag===19)ey(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)t=r.alternate,t!==null&&lu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),fh(i,!1,f,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&lu(t)===null){i.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}fh(i,!0,r,null,p,l);break;case"together":fh(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function la(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),Ka|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(qo(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=na(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=na(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function hh(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&eu(t)))}function xS(t,i,r){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),Fa(i,_n,t.memoizedState.cache),Pr();break;case 27:case 5:kt(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:Fa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Vf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Xa(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Zg(t,i,r):(Xa(i),t=la(t,i,r),t!==null?t.sibling:null);Xa(i);break;case 19:var f=(t.flags&128)!==0;if(l=(r&i.childLanes)!==0,l||(qo(t,i,r,!1),l=(r&i.childLanes)!==0),f){if(l)return ty(t,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(dn,dn.current),l)break;return null;case 22:return i.lanes=0,$g(t,i,r,i.pendingProps);case 24:Fa(i,_n,t.memoizedState.cache)}return la(t,i,r)}function ny(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)yn=!0;else{if(!hh(t,r)&&(i.flags&128)===0)return yn=!1,xS(t,i,r);yn=(t.flags&131072)!==0}else yn=!1,vt&&(i.flags&1048576)!==0&&L_(i,Bl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=zr(i.elementType),i.type=t,typeof t=="function")yf(t)?(l=Qr(t,l),i.tag=1,i=Wg(null,i,t,l,r)):(i.tag=0,i=rh(null,i,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===ie){i.tag=11,i=Hg(null,i,t,l,r);break e}else if(f===D){i.tag=14,i=zg(null,i,t,l,r);break e}}throw i=Ae(t)||t,Error(a(306,i,""))}}return i;case 0:return rh(t,i,i.type,i.pendingProps,r);case 1:return l=i.type,f=Qr(l,i.pendingProps),Wg(t,i,l,f,r);case 3:e:{if(Le(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,Df(t,i),Yl(i,l,null,r);var T=i.memoizedState;if(l=T.cache,Fa(i,_n,l),l!==p.cache&&Af(i,[_n],r,!0),$l(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Jg(t,i,l,r);break e}else if(l!==f){f=ni(Error(a(424)),i),Pl(f),i=Jg(t,i,l,r);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Yt=oi(t.firstChild),Bn=i,vt=!0,Ba=null,ai=!0,r=$_(i,null,l,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Pr(),l===f){i=la(t,i,r);break e}Fn(t,i,l,r)}i=i.child}return i;case 26:return Eu(t,i),t===null?(r=hE(i.type,null,i.pendingProps,null))?i.memoizedState=r:vt||(r=i.type,t=i.pendingProps,l=Mu(ze.current).createElement(r),l[mt]=i,l[cn]=t,Gn(l,r,t),tn(l),i.stateNode=l):i.memoizedState=hE(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return kt(i),t===null&&vt&&(l=i.stateNode=uE(i.type,i.pendingProps,ze.current),Bn=i,ai=!0,f=Yt,tr(i.type)?(Xh=f,Yt=oi(l.firstChild)):Yt=f),Fn(t,i,i.pendingProps.children,r),Eu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&vt&&((f=l=Yt)&&(l=tN(l,i.type,i.pendingProps,ai),l!==null?(i.stateNode=l,Bn=i,Yt=oi(l.firstChild),ai=!1,f=!0):f=!1),f||Pa(i)),kt(i),f=i.type,p=i.pendingProps,T=t!==null?t.memoizedProps:null,l=p.children,Ph(f,p)?l=null:T!==null&&Ph(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=Bf(t,i,_S,null,null,r),mc._currentValue=f),Eu(t,i),Fn(t,i,l,r),i.child;case 6:return t===null&&vt&&((t=r=Yt)&&(r=nN(r,i.pendingProps,ai),r!==null?(i.stateNode=r,Bn=i,Yt=null,t=!0):t=!1),t||Pa(i)),null;case 13:return Zg(t,i,r);case 4:return Le(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=$r(i,null,l,r):Fn(t,i,l,r),i.child;case 11:return Hg(t,i,i.type,i.pendingProps,r);case 7:return Fn(t,i,i.pendingProps,r),i.child;case 8:return Fn(t,i,i.pendingProps.children,r),i.child;case 12:return Fn(t,i,i.pendingProps.children,r),i.child;case 10:return l=i.pendingProps,Fa(i,i.type,l.value),Fn(t,i,l.children,r),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Gr(i),f=Pn(f),l=l(f),i.flags|=1,Fn(t,i,l,r),i.child;case 14:return zg(t,i,i.type,i.pendingProps,r);case 15:return Xg(t,i,i.type,i.pendingProps,r);case 19:return ty(t,i,r);case 31:return NS(t,i,r);case 22:return $g(t,i,r,i.pendingProps);case 24:return Gr(i),l=Pn(_n),t===null?(f=If(),f===null&&(f=Ft,p=Rf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:l,cache:f},jf(i),Fa(i,_n,f)):((t.lanes&r)!==0&&(Df(t,i),Yl(i,null,null,r),$l()),f=t.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Fa(i,_n,l)):(l=p.cache,Fa(i,_n,l),l!==f.cache&&Af(i,[_n],r,!0))),Fn(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ca(t){t.flags|=4}function mh(t,i,r,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Cy())t.flags|=8192;else throw Xr=iu,kf}else t.flags&=-16777217}function sy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yE(i))if(Cy())t.flags|=8192;else throw Xr=iu,kf}function Tu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Mn():536870912,t.lanes|=i,Wo|=i)}function ec(t,i){if(!vt)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Qt(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(i)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,i}function wS(t,i,r){var l=i.pendingProps;switch(bf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(i),null;case 1:return Qt(i),null;case 3:return r=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),aa(_n),nt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vo(i)?ca(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nf())),Qt(i),null;case 26:var f=i.type,p=i.memoizedState;return t===null?(ca(i),p!==null?(Qt(i),sy(i,p)):(Qt(i),mh(i,f,null,l,r))):p?p!==t.memoizedState?(ca(i),Qt(i),sy(i,p)):(Qt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ca(i),Qt(i),mh(i,f,t,l,r)),null;case 27:if(ln(i),r=ze.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ca(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Qt(i),null}t=Se.current,Vo(i)?M_(i):(t=uE(f,l,r),i.stateNode=t,ca(i))}return Qt(i),null;case 5:if(ln(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ca(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Qt(i),null}if(p=Se.current,Vo(i))M_(i);else{var T=Mu(ze.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}p[mt]=i,p[cn]=l;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=p;e:switch(Gn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ca(i)}}return Qt(i),mh(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ca(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=ze.current,Vo(i)){if(t=i.stateNode,r=i.memoizedProps,l=null,f=Bn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[mt]=i,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Zy(t.nodeValue,r)),t||Pa(i,!0)}else t=Mu(t).createTextNode(l),t[mt]=i,i.stateNode=t}return Qt(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(l=Vo(i),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[mt]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Qt(i),t=!1}else r=Nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(Vs(i),i):(Vs(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Qt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Vo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[mt]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Qt(i),f=!1}else f=Nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vs(i),i):(Vs(i),null)}return Vs(i),(i.flags&128)!==0?(i.lanes=r,i):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),Tu(i,i.updateQueue),Qt(i),null);case 4:return nt(),t===null&&Mh(i.stateNode.containerInfo),Qt(i),null;case 10:return aa(i.type),Qt(i),null;case 19:if(de(dn),l=i.memoizedState,l===null)return Qt(i),null;if(f=(i.flags&128)!==0,p=l.rendering,p===null)if(f)ec(l,!1);else{if(on!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=lu(t),p!==null){for(i.flags|=128,ec(l,!1),t=p.updateQueue,i.updateQueue=t,Tu(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)k_(r,t),r=r.sibling;return oe(dn,dn.current&1|2),vt&&sa(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&On()>wu&&(i.flags|=128,f=!0,ec(l,!1),i.lanes=4194304)}else{if(!f)if(t=lu(p),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Tu(i,t),ec(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!vt)return Qt(i),null}else 2*On()-l.renderingStartTime>wu&&r!==536870912&&(i.flags|=128,f=!0,ec(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(t=l.last,t!==null?t.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=On(),t.sibling=null,r=dn.current,oe(dn,f?r&1|2:r&1),vt&&sa(i,l.treeForkCount),t):(Qt(i),null);case 22:case 23:return Vs(i),Uf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(r&536870912)!==0&&(i.flags&128)===0&&(Qt(i),i.subtreeFlags&6&&(i.flags|=8192)):Qt(i),r=i.updateQueue,r!==null&&Tu(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048),t!==null&&de(Hr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),aa(_n),Qt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function AS(t,i){switch(bf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return aa(_n),nt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ln(i),null;case 31:if(i.memoizedState!==null){if(Vs(i),i.alternate===null)throw Error(a(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Vs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return de(dn),null;case 4:return nt(),null;case 10:return aa(i.type),null;case 22:case 23:return Vs(i),Uf(),t!==null&&de(Hr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return aa(_n),null;case 25:return null;default:return null}}function iy(t,i){switch(bf(i),i.tag){case 3:aa(_n),nt();break;case 26:case 27:case 5:ln(i);break;case 4:nt();break;case 31:i.memoizedState!==null&&Vs(i);break;case 13:Vs(i);break;case 19:de(dn);break;case 10:aa(i.type);break;case 22:case 23:Vs(i),Uf(),t!==null&&de(Hr);break;case 24:aa(_n)}}function tc(t,i){try{var r=i.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var p=r.create,T=r.inst;l=p(),T.destroy=l}r=r.next}while(r!==f)}}catch(A){Mt(i,i.return,A)}}function Ya(t,i,r){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var T=l.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,f=i;var P=r,ne=A;try{ne()}catch(ue){Mt(f,P,ue)}}}l=l.next}while(l!==p)}}catch(ue){Mt(i,i.return,ue)}}function ay(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{Q_(i,r)}catch(l){Mt(t,t.return,l)}}}function ry(t,i,r){r.props=Qr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Mt(t,i,l)}}function nc(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){Mt(t,i,f)}}function Mi(t,i){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){Mt(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Mt(t,i,f)}else r.current=null}function oy(t){var i=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){Mt(t,t.return,f)}}function ph(t,i,r){try{var l=t.stateNode;QS(l,t.type,r,i),l[cn]=i}catch(f){Mt(t,t.return,f)}}function ly(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&tr(t.type)||t.tag===4}function _h(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&tr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gh(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=qn));else if(l!==4&&(l===27&&tr(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(gh(t,i,r),t=t.sibling;t!==null;)gh(t,i,r),t=t.sibling}function bu(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(l!==4&&(l===27&&tr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(bu(t,i,r),t=t.sibling;t!==null;)bu(t,i,r),t=t.sibling}function cy(t){var i=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gn(i,l,r),i[mt]=t,i[cn]=r}catch(p){Mt(t,t.return,p)}}var ua=!1,En=!1,yh=!1,uy=typeof WeakSet=="function"?WeakSet:Set,jn=null;function RS(t,i){if(t=t.containerInfo,qh=Gu,t=b_(t),df(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var T=0,A=-1,P=-1,ne=0,ue=0,pe=t,se=null;t:for(;;){for(var re;pe!==r||f!==0&&pe.nodeType!==3||(A=T+f),pe!==p||l!==0&&pe.nodeType!==3||(P=T+l),pe.nodeType===3&&(T+=pe.nodeValue.length),(re=pe.firstChild)!==null;)se=pe,pe=re;for(;;){if(pe===t)break t;if(se===r&&++ne===f&&(A=T),se===p&&++ue===l&&(P=T),(re=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=re}r=A===-1||P===-1?null:{start:A,end:P}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bh={focusedElem:t,selectionRange:r},Gu=!1,jn=i;jn!==null;)if(i=jn,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,jn=t;else for(;jn!==null;){switch(i=jn,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var Oe=Qr(r.type,f);t=l.getSnapshotBeforeUpdate(Oe,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Qe){Mt(r,r.return,Qe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)Gh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,jn=t;break}jn=i.return}}function dy(t,i,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:fa(t,r),l&4&&tc(5,r);break;case 1:if(fa(t,r),l&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(T){Mt(r,r.return,T)}else{var f=Qr(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Mt(r,r.return,T)}}l&64&&ay(r),l&512&&nc(r,r.return);break;case 3:if(fa(t,r),l&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Q_(t,i)}catch(T){Mt(r,r.return,T)}}break;case 27:i===null&&l&4&&cy(r);case 26:case 5:fa(t,r),i===null&&l&4&&oy(r),l&512&&nc(r,r.return);break;case 12:fa(t,r);break;case 31:fa(t,r),l&4&&my(t,r);break;case 13:fa(t,r),l&4&&py(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=US.bind(null,r),sN(t,r))));break;case 22:if(l=r.memoizedState!==null||ua,!l){i=i!==null&&i.memoizedState!==null||En,f=ua;var p=En;ua=l,(En=i)&&!p?ha(t,r,(r.subtreeFlags&8772)!==0):fa(t,r),ua=f,En=p}break;case 30:break;default:fa(t,r)}}function fy(t){var i=t.alternate;i!==null&&(t.alternate=null,fy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Da(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Zt=null,Ts=!1;function da(t,i,r){for(r=r.child;r!==null;)hy(t,i,r),r=r.sibling}function hy(t,i,r){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Rs,r)}catch{}switch(r.tag){case 26:En||Mi(r,i),da(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:En||Mi(r,i);var l=Zt,f=Ts;tr(r.type)&&(Zt=r.stateNode,Ts=!1),da(t,i,r),dc(r.stateNode),Zt=l,Ts=f;break;case 5:En||Mi(r,i);case 6:if(l=Zt,f=Ts,Zt=null,da(t,i,r),Zt=l,Ts=f,Zt!==null)if(Ts)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(r.stateNode)}catch(p){Mt(r,i,p)}else try{Zt.removeChild(r.stateNode)}catch(p){Mt(r,i,p)}break;case 18:Zt!==null&&(Ts?(t=Zt,aE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),al(t)):aE(Zt,r.stateNode));break;case 4:l=Zt,f=Ts,Zt=r.stateNode.containerInfo,Ts=!0,da(t,i,r),Zt=l,Ts=f;break;case 0:case 11:case 14:case 15:Ya(2,r,i),En||Ya(4,r,i),da(t,i,r);break;case 1:En||(Mi(r,i),l=r.stateNode,typeof l.componentWillUnmount=="function"&&ry(r,i,l)),da(t,i,r);break;case 21:da(t,i,r);break;case 22:En=(l=En)||r.memoizedState!==null,da(t,i,r),En=l;break;default:da(t,i,r)}}function my(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{al(t)}catch(r){Mt(i,i.return,r)}}}function py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{al(t)}catch(r){Mt(i,i.return,r)}}function CS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new uy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new uy),i;default:throw Error(a(435,t.tag))}}function Su(t,i){var r=CS(t);i.forEach(function(l){if(!r.has(l)){r.add(l);var f=VS.bind(null,t,l);l.then(f,f)}})}function bs(t,i){var r=i.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],p=t,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(tr(A.type)){Zt=A.stateNode,Ts=!1;break e}break;case 5:Zt=A.stateNode,Ts=!1;break e;case 3:case 4:Zt=A.stateNode.containerInfo,Ts=!0;break e}A=A.return}if(Zt===null)throw Error(a(160));hy(p,T,f),Zt=null,Ts=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)_y(i,t),i=i.sibling}var Ei=null;function _y(t,i){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bs(i,t),Ss(t),l&4&&(Ya(3,t,t.return),tc(3,t),Ya(5,t,t.return));break;case 1:bs(i,t),Ss(t),l&512&&(En||r===null||Mi(r,r.return)),l&64&&ua&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=Ei;if(bs(i,t),Ss(t),l&512&&(En||r===null||Mi(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[os]||p[mt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Gn(p,l,r),p[mt]=t,tn(p),l=p;break e;case"link":var T=_E("link","href",f).get(l+(r.href||""));if(T){for(var A=0;A<T.length;A++)if(p=T[A],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(A,1);break t}}p=f.createElement(l),Gn(p,l,r),f.head.appendChild(p);break;case"meta":if(T=_E("meta","content",f).get(l+(r.content||""))){for(A=0;A<T.length;A++)if(p=T[A],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(A,1);break t}}p=f.createElement(l),Gn(p,l,r),f.head.appendChild(p);break;default:throw Error(a(468,l))}p[mt]=t,tn(p),l=p}t.stateNode=l}else gE(f,t.type,t.stateNode);else t.stateNode=pE(f,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?gE(f,t.type,t.stateNode):pE(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ph(t,t.memoizedProps,r.memoizedProps)}break;case 27:bs(i,t),Ss(t),l&512&&(En||r===null||Mi(r,r.return)),r!==null&&l&4&&ph(t,t.memoizedProps,r.memoizedProps);break;case 5:if(bs(i,t),Ss(t),l&512&&(En||r===null||Mi(r,r.return)),t.flags&32){f=t.stateNode;try{An(f,"")}catch(Oe){Mt(t,t.return,Oe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,ph(t,f,r!==null?r.memoizedProps:f)),l&1024&&(yh=!0);break;case 6:if(bs(i,t),Ss(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Oe){Mt(t,t.return,Oe)}}break;case 3:if(qu=null,f=Ei,Ei=Uu(i.containerInfo),bs(i,t),Ei=f,Ss(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{al(i.containerInfo)}catch(Oe){Mt(t,t.return,Oe)}yh&&(yh=!1,gy(t));break;case 4:l=Ei,Ei=Uu(t.stateNode.containerInfo),bs(i,t),Ss(t),Ei=l;break;case 12:bs(i,t),Ss(t);break;case 31:bs(i,t),Ss(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:bs(i,t),Ss(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(xu=On()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:f=t.memoizedState!==null;var P=r!==null&&r.memoizedState!==null,ne=ua,ue=En;if(ua=ne||f,En=ue||P,bs(i,t),En=ue,ua=ne,Ss(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||P||ua||En||Kr(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){P=r=i;try{if(p=P.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=P.stateNode;var pe=P.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;A.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Oe){Mt(P,P.return,Oe)}}}else if(i.tag===6){if(r===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Oe){Mt(P,P.return,Oe)}}}else if(i.tag===18){if(r===null){P=i;try{var re=P.stateNode;f?rE(re,!0):rE(P.stateNode,!1)}catch(Oe){Mt(P,P.return,Oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Su(t,r))));break;case 19:bs(i,t),Ss(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:bs(i,t),Ss(t)}}function Ss(t){var i=t.flags;if(i&2){try{for(var r,l=t.return;l!==null;){if(ly(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=_h(t);bu(t,p,f);break;case 5:var T=r.stateNode;r.flags&32&&(An(T,""),r.flags&=-33);var A=_h(t);bu(t,A,T);break;case 3:case 4:var P=r.stateNode.containerInfo,ne=_h(t);gh(t,ne,P);break;default:throw Error(a(161))}}catch(ue){Mt(t,t.return,ue)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function gy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;gy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function fa(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dy(t,i.alternate,i),i=i.sibling}function Kr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ya(4,i,i.return),Kr(i);break;case 1:Mi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&ry(i,i.return,r),Kr(i);break;case 27:dc(i.stateNode);case 26:case 5:Mi(i,i.return),Kr(i);break;case 22:i.memoizedState===null&&Kr(i);break;case 30:Kr(i);break;default:Kr(i)}t=t.sibling}}function ha(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:ha(f,p,r),tc(4,p);break;case 1:if(ha(f,p,r),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){Mt(l,l.return,ne)}if(l=p,f=l.updateQueue,f!==null){var A=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)Y_(P[f],A)}catch(ne){Mt(l,l.return,ne)}}r&&T&64&&ay(p),nc(p,p.return);break;case 27:cy(p);case 26:case 5:ha(f,p,r),r&&l===null&&T&4&&oy(p),nc(p,p.return);break;case 12:ha(f,p,r);break;case 31:ha(f,p,r),r&&T&4&&my(f,p);break;case 13:ha(f,p,r),r&&T&4&&py(f,p);break;case 22:p.memoizedState===null&&ha(f,p,r),nc(p,p.return);break;case 30:break;default:ha(f,p,r)}i=i.sibling}}function Eh(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Fl(r))}function vh(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fl(t))}function vi(t,i,r,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yy(t,i,r,l),i=i.sibling}function yy(t,i,r,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:vi(t,i,r,l),f&2048&&tc(9,i);break;case 1:vi(t,i,r,l);break;case 3:vi(t,i,r,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fl(t)));break;case 12:if(f&2048){vi(t,i,r,l),t=i.stateNode;try{var p=i.memoizedProps,T=p.id,A=p.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Mt(i,i.return,P)}}else vi(t,i,r,l);break;case 31:vi(t,i,r,l);break;case 13:vi(t,i,r,l);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?vi(t,i,r,l):sc(t,i):p._visibility&2?vi(t,i,r,l):(p._visibility|=2,Yo(t,i,r,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Eh(T,i);break;case 24:vi(t,i,r,l),f&2048&&vh(i.alternate,i);break;default:vi(t,i,r,l)}}function Yo(t,i,r,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,T=i,A=r,P=l,ne=T.flags;switch(T.tag){case 0:case 11:case 15:Yo(p,T,A,P,f),tc(8,T);break;case 23:break;case 22:var ue=T.stateNode;T.memoizedState!==null?ue._visibility&2?Yo(p,T,A,P,f):sc(p,T):(ue._visibility|=2,Yo(p,T,A,P,f)),f&&ne&2048&&Eh(T.alternate,T);break;case 24:Yo(p,T,A,P,f),f&&ne&2048&&vh(T.alternate,T);break;default:Yo(p,T,A,P,f)}i=i.sibling}}function sc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,l=i,f=l.flags;switch(l.tag){case 22:sc(r,l),f&2048&&Eh(l.alternate,l);break;case 24:sc(r,l),f&2048&&vh(l.alternate,l);break;default:sc(r,l)}i=i.sibling}}var ic=8192;function Qo(t,i,r){if(t.subtreeFlags&ic)for(t=t.child;t!==null;)Ey(t,i,r),t=t.sibling}function Ey(t,i,r){switch(t.tag){case 26:Qo(t,i,r),t.flags&ic&&t.memoizedState!==null&&pN(r,Ei,t.memoizedState,t.memoizedProps);break;case 5:Qo(t,i,r);break;case 3:case 4:var l=Ei;Ei=Uu(t.stateNode.containerInfo),Qo(t,i,r),Ei=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ic,ic=16777216,Qo(t,i,r),ic=l):Qo(t,i,r));break;default:Qo(t,i,r)}}function vy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ac(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];jn=l,by(l,t)}vy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ty(t),t=t.sibling}function Ty(t){switch(t.tag){case 0:case 11:case 15:ac(t),t.flags&2048&&Ya(9,t,t.return);break;case 3:ac(t);break;case 12:ac(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nu(t)):ac(t);break;default:ac(t)}}function Nu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];jn=l,by(l,t)}vy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ya(8,i,i.return),Nu(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Nu(i));break;default:Nu(i)}t=t.sibling}}function by(t,i){for(;jn!==null;){var r=jn;switch(r.tag){case 0:case 11:case 15:Ya(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Fl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,jn=l;else e:for(r=t;jn!==null;){l=jn;var f=l.sibling,p=l.return;if(fy(l),l===r){jn=null;break e}if(f!==null){f.return=p,jn=f;break e}jn=p}}}var IS={getCacheForType:function(t){var i=Pn(_n),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return Pn(_n).controller.signal}},kS=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Ft=null,dt=null,_t=0,Ot=0,qs=null,Qa=!1,Ko=!1,Th=!1,ma=0,on=0,Ka=0,Wr=0,bh=0,Bs=0,Wo=0,rc=null,Ns=null,Sh=!1,xu=0,Sy=0,wu=1/0,Au=null,Wa=null,Nn=0,Ja=null,Jo=null,pa=0,Nh=0,xh=null,Ny=null,oc=0,wh=null;function Ps(){return(Ct&2)!==0&&_t!==0?_t&-_t:Y.T!==null?jh():wr()}function xy(){if(Bs===0)if((_t&536870912)===0||vt){var t=Ni;Ni<<=1,(Ni&3932160)===0&&(Ni=262144),Bs=t}else Bs=536870912;return t=Us.current,t!==null&&(t.flags|=32),Bs}function xs(t,i,r){(t===Ft&&(Ot===2||Ot===9)||t.cancelPendingCommit!==null)&&(Zo(t,0),Za(t,_t,Bs,!1)),mi(t,r),((Ct&2)===0||t!==Ft)&&(t===Ft&&((Ct&2)===0&&(Wr|=r),on===4&&Za(t,_t,Bs,!1)),Ui(t))}function wy(t,i,r){if((Ct&6)!==0)throw Error(a(327));var l=!r&&(i&127)===0&&(i&t.expiredLanes)===0||ks(t,i),f=l?LS(t,i):Rh(t,i,!0),p=l;do{if(f===0){Ko&&!l&&Za(t,i,0,!1);break}else{if(r=t.current.alternate,p&&!jS(r)){f=Rh(t,i,!1),p=!1;continue}if(f===2){if(p=i,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=t;f=rc;var P=A.current.memoizedState.isDehydrated;if(P&&(Zo(A,T).flags|=256),T=Rh(A,T,!1),T!==2){if(Th&&!P){A.errorRecoveryDisabledLanes|=p,Wr|=p,f=4;break e}p=Ns,Ns=f,p!==null&&(Ns===null?Ns=p:Ns.push.apply(Ns,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){Zo(t,0),Za(t,i,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Za(l,i,Bs,!Qa);break e;case 2:Ns=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=xu+300-On(),10<f)){if(Za(l,i,Bs,!Qa),Ne(l,0,!0)!==0)break e;pa=i,l.timeoutHandle=sE(Ay.bind(null,l,r,Ns,Au,Sh,i,Bs,Wr,Wo,Qa,p,"Throttled",-0,0),f);break e}Ay(l,r,Ns,Au,Sh,i,Bs,Wr,Wo,Qa,p,null,-0,0)}}break}while(!0);Ui(t)}function Ay(t,i,r,l,f,p,T,A,P,ne,ue,pe,se,re){if(t.timeoutHandle=-1,pe=i.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},Ey(i,p,pe);var Oe=(p&62914560)===p?xu-On():(p&4194048)===p?Sy-On():0;if(Oe=_N(pe,Oe),Oe!==null){pa=p,t.cancelPendingCommit=Oe(Oy.bind(null,t,i,p,r,l,f,T,A,P,ue,pe,null,se,re)),Za(t,p,T,!ne);return}}Oy(t,i,p,r,l,f,T,A,P)}function jS(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],p=f.getSnapshot;f=f.value;try{if(!Os(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Za(t,i,r,l){i&=~bh,i&=~Wr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var p=31-$t(f),T=1<<p;l[p]=-1,f&=~T}r!==0&&rs(t,r,i)}function Ru(){return(Ct&6)===0?(lc(0),!1):!0}function Ah(){if(dt!==null){if(Ot===0)var t=dt.return;else t=dt,ia=Fr=null,Gf(t),Go=null,Hl=0,t=dt;for(;t!==null;)iy(t.alternate,t),t=t.return;dt=null}}function Zo(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,JS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),pa=0,Ah(),Ft=t,dt=r=na(t.current,null),_t=i,Ot=0,qs=null,Qa=!1,Ko=ks(t,i),Th=!1,Wo=Bs=bh=Wr=Ka=on=0,Ns=rc=null,Sh=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-$t(l),p=1<<f;i|=t[f],l&=~p}return ma=i,Qc(),r}function Ry(t,i){ct=null,Y.H=Jl,i===Fo||i===su?(i=H_(),Ot=3):i===kf?(i=H_(),Ot=4):Ot=i===ah?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,qs=i,dt===null&&(on=1,gu(t,ni(i,t.current)))}function Cy(){var t=Us.current;return t===null?!0:(_t&4194048)===_t?ri===null:(_t&62914560)===_t||(_t&536870912)!==0?t===ri:!1}function Iy(){var t=Y.H;return Y.H=Jl,t===null?Jl:t}function ky(){var t=Y.A;return Y.A=IS,t}function Cu(){on=4,Qa||(_t&4194048)!==_t&&Us.current!==null||(Ko=!0),(Ka&134217727)===0&&(Wr&134217727)===0||Ft===null||Za(Ft,_t,Bs,!1)}function Rh(t,i,r){var l=Ct;Ct|=2;var f=Iy(),p=ky();(Ft!==t||_t!==i)&&(Au=null,Zo(t,i)),i=!1;var T=on;e:do try{if(Ot!==0&&dt!==null){var A=dt,P=qs;switch(Ot){case 8:Ah(),T=6;break e;case 3:case 2:case 9:case 6:Us.current===null&&(i=!0);var ne=Ot;if(Ot=0,qs=null,el(t,A,P,ne),r&&Ko){T=0;break e}break;default:ne=Ot,Ot=0,qs=null,el(t,A,P,ne)}}DS(),T=on;break}catch(ue){Ry(t,ue)}while(!0);return i&&t.shellSuspendCounter++,ia=Fr=null,Ct=l,Y.H=f,Y.A=p,dt===null&&(Ft=null,_t=0,Qc()),T}function DS(){for(;dt!==null;)jy(dt)}function LS(t,i){var r=Ct;Ct|=2;var l=Iy(),f=ky();Ft!==t||_t!==i?(Au=null,wu=On()+500,Zo(t,i)):Ko=ks(t,i);e:do try{if(Ot!==0&&dt!==null){i=dt;var p=qs;t:switch(Ot){case 1:Ot=0,qs=null,el(t,i,p,1);break;case 2:case 9:if(F_(p)){Ot=0,qs=null,Dy(i);break}i=function(){Ot!==2&&Ot!==9||Ft!==t||(Ot=7),Ui(t)},p.then(i,i);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:F_(p)?(Ot=0,qs=null,Dy(i)):(Ot=0,qs=null,el(t,i,p,7));break;case 5:var T=null;switch(dt.tag){case 26:T=dt.memoizedState;case 5:case 27:var A=dt;if(T?yE(T):A.stateNode.complete){Ot=0,qs=null;var P=A.sibling;if(P!==null)dt=P;else{var ne=A.return;ne!==null?(dt=ne,Iu(ne)):dt=null}break t}}Ot=0,qs=null,el(t,i,p,5);break;case 6:Ot=0,qs=null,el(t,i,p,6);break;case 8:Ah(),on=6;break e;default:throw Error(a(462))}}OS();break}catch(ue){Ry(t,ue)}while(!0);return ia=Fr=null,Y.H=l,Y.A=f,Ct=r,dt!==null?0:(Ft=null,_t=0,Qc(),on)}function OS(){for(;dt!==null&&!Ll();)jy(dt)}function jy(t){var i=ny(t.alternate,t,ma);t.memoizedProps=t.pendingProps,i===null?Iu(t):dt=i}function Dy(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=Kg(r,i,i.pendingProps,i.type,void 0,_t);break;case 11:i=Kg(r,i,i.pendingProps,i.type.render,i.ref,_t);break;case 5:Gf(i);default:iy(r,i),i=dt=k_(i,ma),i=ny(r,i,ma)}t.memoizedProps=t.pendingProps,i===null?Iu(t):dt=i}function el(t,i,r,l){ia=Fr=null,Gf(i),Go=null,Hl=0;var f=i.return;try{if(SS(t,f,i,r,_t)){on=1,gu(t,ni(r,t.current)),dt=null;return}}catch(p){if(f!==null)throw dt=f,p;on=1,gu(t,ni(r,t.current)),dt=null;return}i.flags&32768?(vt||l===1?t=!0:Ko||(_t&536870912)!==0?t=!1:(Qa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Us.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ly(i,t)):Iu(i)}function Iu(t){var i=t;do{if((i.flags&32768)!==0){Ly(i,Qa);return}t=i.return;var r=wS(i.alternate,i,ma);if(r!==null){dt=r;return}if(i=i.sibling,i!==null){dt=i;return}dt=i=t}while(i!==null);on===0&&(on=5)}function Ly(t,i){do{var r=AS(t.alternate,t);if(r!==null){r.flags&=32767,dt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){dt=t;return}dt=t=r}while(t!==null);on=6,dt=null}function Oy(t,i,r,l,f,p,T,A,P){t.cancelPendingCommit=null;do ku();while(Nn!==0);if((Ct&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=_f,xr(t,r,p,T,A,P),t===Ft&&(dt=Ft=null,_t=0),Jo=i,Ja=t,pa=r,Nh=p,xh=f,Ny=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,qS(hi,function(){return By(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=fe.p,fe.p=2,T=Ct,Ct|=4;try{RS(t,i,r)}finally{Ct=T,fe.p=f,Y.T=l}}Nn=1,My(),Uy(),Vy()}}function My(){if(Nn===1){Nn=0;var t=Ja,i=Jo,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=Y.T,Y.T=null;var l=fe.p;fe.p=2;var f=Ct;Ct|=4;try{_y(i,t);var p=Bh,T=b_(t.containerInfo),A=p.focusedElem,P=p.selectionRange;if(T!==A&&A&&A.ownerDocument&&T_(A.ownerDocument.documentElement,A)){if(P!==null&&df(A)){var ne=P.start,ue=P.end;if(ue===void 0&&(ue=ne),"selectionStart"in A)A.selectionStart=ne,A.selectionEnd=Math.min(ue,A.value.length);else{var pe=A.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var re=se.getSelection(),Oe=A.textContent.length,Qe=Math.min(P.start,Oe),Bt=P.end===void 0?Qe:Math.min(P.end,Oe);!re.extend&&Qe>Bt&&(T=Bt,Bt=Qe,Qe=T);var Q=v_(A,Qe),$=v_(A,Bt);if(Q&&$&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var te=pe.createRange();te.setStart(Q.node,Q.offset),re.removeAllRanges(),Qe>Bt?(re.addRange(te),re.extend($.node,$.offset)):(te.setEnd($.node,$.offset),re.addRange(te))}}}}for(pe=[],re=A;re=re.parentNode;)re.nodeType===1&&pe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<pe.length;A++){var he=pe[A];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Gu=!!qh,Bh=qh=null}finally{Ct=f,fe.p=l,Y.T=r}}t.current=i,Nn=2}}function Uy(){if(Nn===2){Nn=0;var t=Ja,i=Jo,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=Y.T,Y.T=null;var l=fe.p;fe.p=2;var f=Ct;Ct|=4;try{dy(t,i.alternate,i)}finally{Ct=f,fe.p=l,Y.T=r}}Nn=3}}function Vy(){if(Nn===4||Nn===3){Nn=0,br();var t=Ja,i=Jo,r=pa,l=Ny;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,Jo=Ja=null,qy(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Wa=null),Qn(r),i=i.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Rs,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,f=fe.p,fe.p=2,Y.T=null;try{for(var p=t.onRecoverableError,T=0;T<l.length;T++){var A=l[T];p(A.value,{componentStack:A.stack})}}finally{Y.T=i,fe.p=f}}(pa&3)!==0&&ku(),Ui(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===wh?oc++:(oc=0,wh=t):oc=0,lc(0)}}function qy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Fl(i)))}function ku(){return My(),Uy(),Vy(),By()}function By(){if(Nn!==5)return!1;var t=Ja,i=Nh;Nh=0;var r=Qn(pa),l=Y.T,f=fe.p;try{fe.p=32>r?32:r,Y.T=null,r=xh,xh=null;var p=Ja,T=pa;if(Nn=0,Jo=Ja=null,pa=0,(Ct&6)!==0)throw Error(a(331));var A=Ct;if(Ct|=4,Ty(p.current),yy(p,p.current,T,r),Ct=A,lc(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Rs,p)}catch{}return!0}finally{fe.p=f,Y.T=l,qy(t,i)}}function Py(t,i,r){i=ni(r,i),i=ih(t.stateNode,i,2),t=za(t,i,2),t!==null&&(mi(t,2),Ui(t))}function Mt(t,i,r){if(t.tag===3)Py(t,t,r);else for(;i!==null;){if(i.tag===3){Py(i,t,r);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wa===null||!Wa.has(l))){t=ni(r,t),r=Fg(2),l=za(i,r,2),l!==null&&(Gg(r,l,i,t),mi(l,2),Ui(l));break}}i=i.return}}function Ch(t,i,r){var l=t.pingCache;if(l===null){l=t.pingCache=new kS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(r)||(Th=!0,f.add(r),t=MS.bind(null,t,i,r),i.then(t,t))}function MS(t,i,r){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Ft===t&&(_t&r)===r&&(on===4||on===3&&(_t&62914560)===_t&&300>On()-xu?(Ct&2)===0&&Zo(t,0):bh|=r,Wo===_t&&(Wo=0)),Ui(t)}function Fy(t,i){i===0&&(i=Mn()),t=qr(t,i),t!==null&&(mi(t,i),Ui(t))}function US(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),Fy(t,r)}function VS(t,i){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),Fy(t,r)}function qS(t,i){return an(t,i)}var ju=null,tl=null,Ih=!1,Du=!1,kh=!1,er=0;function Ui(t){t!==tl&&t.next===null&&(tl===null?ju=tl=t:tl=tl.next=t),Du=!0,Ih||(Ih=!0,PS())}function lc(t,i){if(!kh&&Du){kh=!0;do for(var r=!1,l=ju;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-$t(42|t)+1)-1,p&=f&~(T&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,Xy(l,p))}else p=_t,p=Ne(l,l===Ft?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||ks(l,p)||(r=!0,Xy(l,p));l=l.next}while(r);kh=!1}}function BS(){Gy()}function Gy(){Du=Ih=!1;var t=0;er!==0&&WS()&&(t=er);for(var i=On(),r=null,l=ju;l!==null;){var f=l.next,p=Hy(l,i);p===0?(l.next=null,r===null?ju=f:r.next=f,f===null&&(tl=r)):(r=l,(t!==0||(p&3)!==0)&&(Du=!0)),l=f}Nn!==0&&Nn!==5||lc(t),er!==0&&(er=0)}function Hy(t,i){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-$t(p),A=1<<T,P=f[T];P===-1?((A&r)===0||(A&l)!==0)&&(f[T]=Ol(A,i)):P<=i&&(t.expiredLanes|=A),p&=~A}if(i=Ft,r=_t,r=Ne(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===i&&(Ot===2||Ot===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&As(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||ks(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(l!==null&&As(l),Qn(r)){case 2:case 8:r=is;break;case 32:r=hi;break;case 268435456:r=Sr;break;default:r=hi}return l=zy.bind(null,t),r=an(r,l),t.callbackPriority=i,t.callbackNode=r,i}return l!==null&&l!==null&&As(l),t.callbackPriority=2,t.callbackNode=null,2}function zy(t,i){if(Nn!==0&&Nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(ku()&&t.callbackNode!==r)return null;var l=_t;return l=Ne(t,t===Ft?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(wy(t,l,i),Hy(t,On()),t.callbackNode!=null&&t.callbackNode===r?zy.bind(null,t):null)}function Xy(t,i){if(ku())return null;wy(t,i,!0)}function PS(){ZS(function(){(Ct&6)!==0?an(fi,BS):Gy()})}function jh(){if(er===0){var t=Bo;t===0&&(t=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),er=t}return er}function $y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:us(""+t)}function Yy(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function FS(t,i,r,l,f){if(i==="submit"&&r&&r.stateNode===f){var p=$y((f[cn]||null).action),T=l.submitter;T&&(i=(i=T[cn]||null)?$y(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var A=new xt("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(er!==0){var P=T?Yy(f,T):new FormData(f);Jf(r,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(A.preventDefault(),P=T?Yy(f,T):new FormData(f),Jf(r,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Dh=0;Dh<pf.length;Dh++){var Lh=pf[Dh],GS=Lh.toLowerCase(),HS=Lh[0].toUpperCase()+Lh.slice(1);yi(GS,"on"+HS)}yi(x_,"onAnimationEnd"),yi(w_,"onAnimationIteration"),yi(A_,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(rS,"onTransitionRun"),yi(oS,"onTransitionStart"),yi(lS,"onTransitionCancel"),yi(R_,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function Qy(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var T=l.length-1;0<=T;T--){var A=l[T],P=A.instance,ne=A.currentTarget;if(A=A.listener,P!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=ne;try{p(f)}catch(ue){Yc(ue)}f.currentTarget=null,p=P}else for(T=0;T<l.length;T++){if(A=l[T],P=A.instance,ne=A.currentTarget,A=A.listener,P!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=ne;try{p(f)}catch(ue){Yc(ue)}f.currentTarget=null,p=P}}}}function ft(t,i){var r=i[wi];r===void 0&&(r=i[wi]=new Set);var l=t+"__bubble";r.has(l)||(Ky(i,t,2,!1),r.add(l))}function Oh(t,i,r){var l=0;i&&(l|=4),Ky(r,t,l,i)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function Mh(t){if(!t[Lu]){t[Lu]=!0,pi.forEach(function(r){r!=="selectionchange"&&(zS.has(r)||Oh(r,!1,t),Oh(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Lu]||(i[Lu]=!0,Oh("selectionchange",!1,i))}}function Ky(t,i,r,l){switch(xE(i)){case 2:var f=EN;break;case 8:f=vN;break;default:f=Wh}r=f.bind(null,i,r,t),f=void 0,!_i||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,r,{capture:!0,passive:f}):t.addEventListener(i,r,!0):f!==void 0?t.addEventListener(i,r,{passive:f}):t.addEventListener(i,r,!1)}function Uh(t,i,r,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var A=l.stateNode.containerInfo;if(A===f)break;if(T===4)for(T=l.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;A!==null;){if(T=un(A),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){l=p=T;continue e}A=A.parentNode}}l=l.return}Es(function(){var ne=p,ue=Ce(r),pe=[];e:{var se=C_.get(t);if(se!==void 0){var re=xt,Oe=t;switch(t){case"keypress":if(J(r)===0)break e;case"keydown":case"keyup":re=Co;break;case"focusin":Oe="focus",re=ta;break;case"focusout":Oe="blur",re=ta;break;case"beforeblur":case"afterblur":re=ta;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=To;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=v;break;case x_:case w_:case A_:re=So;break;case R_:re=I;break;case"scroll":case"scrollend":re=Ua;break;case"wheel":re=ae;break;case"copy":case"cut":case"paste":re=Or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=gi;break;case"toggle":case"beforetoggle":re=tt}var Qe=(i&4)!==0,Bt=!Qe&&(t==="scroll"||t==="scrollend"),Q=Qe?se!==null?se+"Capture":null:se;Qe=[];for(var $=ne,te;$!==null;){var he=$;if(te=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||te===null||Q===null||(he=pn($,Q),he!=null&&Qe.push(uc($,he,te))),Bt)break;$=$.return}0<Qe.length&&(se=new re(se,Oe,null,r,ue),pe.push({event:se,listeners:Qe}))}}if((i&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",se&&r!==jr&&(Oe=r.relatedTarget||r.fromElement)&&(un(Oe)||Oe[Xs]))break e;if((re||se)&&(se=ue.window===ue?ue:(se=ue.ownerDocument)?se.defaultView||se.parentWindow:window,re?(Oe=r.relatedTarget||r.toElement,re=ne,Oe=Oe?un(Oe):null,Oe!==null&&(Bt=u(Oe),Qe=Oe.tag,Oe!==Bt||Qe!==5&&Qe!==27&&Qe!==6)&&(Oe=null)):(re=null,Oe=ne),re!==Oe)){if(Qe=Dr,he="onMouseLeave",Q="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(Qe=gi,he="onPointerLeave",Q="onPointerEnter",$="pointer"),Bt=re==null?se:Vn(re),te=Oe==null?se:Vn(Oe),se=new Qe(he,$+"leave",re,r,ue),se.target=Bt,se.relatedTarget=te,he=null,un(ue)===ne&&(Qe=new Qe(Q,$+"enter",Oe,r,ue),Qe.target=te,Qe.relatedTarget=Bt,he=Qe),Bt=he,re&&Oe)t:{for(Qe=XS,Q=re,$=Oe,te=0,he=Q;he;he=Qe(he))te++;he=0;for(var Ge=$;Ge;Ge=Qe(Ge))he++;for(;0<te-he;)Q=Qe(Q),te--;for(;0<he-te;)$=Qe($),he--;for(;te--;){if(Q===$||$!==null&&Q===$.alternate){Qe=Q;break t}Q=Qe(Q),$=Qe($)}Qe=null}else Qe=null;re!==null&&Wy(pe,se,re,Qe,!1),Oe!==null&&Bt!==null&&Wy(pe,Bt,Oe,Qe,!0)}}e:{if(se=ne?Vn(ne):window,re=se.nodeName&&se.nodeName.toLowerCase(),re==="select"||re==="input"&&se.type==="file")var At=m_;else if(ko(se))if(p_)At=sS;else{At=tS;var Ve=eS}else re=se.nodeName,!re||re.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&ys(ne.elementType)&&(At=m_):At=nS;if(At&&(At=At(t,ne))){Di(pe,At,r,ue);break e}Ve&&Ve(t,se,ne),t==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&Ir(se,"number",se.value)}switch(Ve=ne?Vn(ne):window,t){case"focusin":(ko(Ve)||Ve.contentEditable==="true")&&(jo=Ve,ff=ne,ql=null);break;case"focusout":ql=ff=jo=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":hf=!1,S_(pe,r,ue);break;case"selectionchange":if(aS)break;case"keydown":case"keyup":S_(pe,r,ue)}var ut;if(bt)e:{switch(t){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else kn?Ye(t,r)&&(gt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(gt="onCompositionStart");gt&&(me&&r.locale!=="ko"&&(kn||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&kn&&(ut=F()):(y=ue,N="value"in y?y.value:y.textContent,kn=!0)),Ve=Ou(ne,gt),0<Ve.length&&(gt=new ei(gt,t,null,r,ue),pe.push({event:gt,listeners:Ve}),ut?gt.data=ut:(ut=pt(r),ut!==null&&(gt.data=ut)))),(ut=W?vs(t,r):fs(t,r))&&(gt=Ou(ne,"onBeforeInput"),0<gt.length&&(Ve=new ei("onBeforeInput","beforeinput",null,r,ue),pe.push({event:Ve,listeners:gt}),Ve.data=ut)),FS(pe,t,ne,r,ue)}Qy(pe,i)})}function uc(t,i,r){return{instance:t,listener:i,currentTarget:r}}function Ou(t,i){for(var r=i+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=pn(t,r),f!=null&&l.unshift(uc(t,f,p)),f=pn(t,i),f!=null&&l.push(uc(t,f,p))),t.tag===3)return l;t=t.return}return[]}function XS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wy(t,i,r,l,f){for(var p=i._reactName,T=[];r!==null&&r!==l;){var A=r,P=A.alternate,ne=A.stateNode;if(A=A.tag,P!==null&&P===l)break;A!==5&&A!==26&&A!==27||ne===null||(P=ne,f?(ne=pn(r,p),ne!=null&&T.unshift(uc(r,ne,P))):f||(ne=pn(r,p),ne!=null&&T.push(uc(r,ne,P)))),r=r.return}T.length!==0&&t.push({event:i,listeners:T})}var $S=/\r\n?/g,YS=/\u0000|\uFFFD/g;function Jy(t){return(typeof t=="string"?t:""+t).replace($S,`
`).replace(YS,"")}function Zy(t,i){return i=Jy(i),Jy(t)===i}function qt(t,i,r,l,f,p){switch(r){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&An(t,""+l);break;case"className":cs(t,"class",l);break;case"tabIndex":cs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cs(t,r,l);break;case"style":Ci(t,l,p);break;case"data":if(i!=="object"){cs(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=us(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&qt(t,i,"name",f.name,f,null),qt(t,i,"formEncType",f.formEncType,f,null),qt(t,i,"formMethod",f.formMethod,f,null),qt(t,i,"formTarget",f.formTarget,f,null)):(qt(t,i,"encType",f.encType,f,null),qt(t,i,"method",f.method,f,null),qt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=us(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=qn);break;case"onScroll":l!=null&&ft("scroll",t);break;case"onScrollEnd":l!=null&&ft("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=us(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":ft("beforetoggle",t),ft("toggle",t),Qi(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Qi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ma.get(r)||r,Qi(t,r,l))}}function Vh(t,i,r,l,f,p){switch(r){case"style":Ci(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&ft("scroll",t);break;case"onScrollEnd":l!=null&&ft("scrollend",t);break;case"onClick":l!=null&&(t.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!La.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=t[cn]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Qi(t,r,l)}}}function Gn(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",t),ft("load",t);var l=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var T=r[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:qt(t,i,p,T,r,null)}}f&&qt(t,i,"srcSet",r.srcSet,r,null),l&&qt(t,i,"src",r.src,r,null);return;case"input":ft("invalid",t);var A=p=T=f=null,P=null,ne=null;for(l in r)if(r.hasOwnProperty(l)){var ue=r[l];if(ue!=null)switch(l){case"name":f=ue;break;case"type":T=ue;break;case"checked":P=ue;break;case"defaultChecked":ne=ue;break;case"value":p=ue;break;case"defaultValue":A=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,i));break;default:qt(t,i,l,ue,r,null)}}Cr(t,p,A,P,ne,T,f,!1);return;case"select":ft("invalid",t),l=T=p=null;for(f in r)if(r.hasOwnProperty(f)&&(A=r[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":T=A;break;case"multiple":l=A;default:qt(t,i,f,A,r,null)}i=p,r=T,t.multiple=!!l,i!=null?Ks(t,!!l,i,!1):r!=null&&Ks(t,!!l,r,!0);return;case"textarea":ft("invalid",t),p=f=l=null;for(T in r)if(r.hasOwnProperty(T)&&(A=r[T],A!=null))switch(T){case"value":l=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:qt(t,i,T,A,r,null)}Ws(t,l,f,p);return;case"option":for(P in r)r.hasOwnProperty(P)&&(l=r[P],l!=null)&&(P==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":qt(t,i,P,l,r,null));return;case"dialog":ft("beforetoggle",t),ft("toggle",t),ft("cancel",t),ft("close",t);break;case"iframe":case"object":ft("load",t);break;case"video":case"audio":for(l=0;l<cc.length;l++)ft(cc[l],t);break;case"image":ft("error",t),ft("load",t);break;case"details":ft("toggle",t);break;case"embed":case"source":case"link":ft("error",t),ft("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in r)if(r.hasOwnProperty(ne)&&(l=r[ne],l!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:qt(t,i,ne,l,r,null)}return;default:if(ys(i)){for(ue in r)r.hasOwnProperty(ue)&&(l=r[ue],l!==void 0&&Vh(t,i,ue,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&qt(t,i,A,l,r,null))}function QS(t,i,r,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,A=null,P=null,ne=null,ue=null;for(re in r){var pe=r[re];if(r.hasOwnProperty(re)&&pe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":P=pe;default:l.hasOwnProperty(re)||qt(t,i,re,null,l,pe)}}for(var se in l){var re=l[se];if(pe=r[se],l.hasOwnProperty(se)&&(re!=null||pe!=null))switch(se){case"type":p=re;break;case"name":f=re;break;case"checked":ne=re;break;case"defaultChecked":ue=re;break;case"value":T=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(137,i));break;default:re!==pe&&qt(t,i,se,re,l,pe)}}Qs(t,T,A,P,ne,ue,p,f);return;case"select":re=T=A=se=null;for(p in r)if(P=r[p],r.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":re=P;default:l.hasOwnProperty(p)||qt(t,i,p,null,l,P)}for(f in l)if(p=l[f],P=r[f],l.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":se=p;break;case"defaultValue":A=p;break;case"multiple":T=p;default:p!==P&&qt(t,i,f,p,l,P)}i=A,r=T,l=re,se!=null?Ks(t,!!r,se,!1):!!l!=!!r&&(i!=null?Ks(t,!!r,i,!0):Ks(t,!!r,r?[]:"",!1));return;case"textarea":re=se=null;for(A in r)if(f=r[A],r.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:qt(t,i,A,null,l,f)}for(T in l)if(f=l[T],p=r[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":se=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&qt(t,i,T,f,l,p)}kr(t,se,re);return;case"option":for(var Oe in r)se=r[Oe],r.hasOwnProperty(Oe)&&se!=null&&!l.hasOwnProperty(Oe)&&(Oe==="selected"?t.selected=!1:qt(t,i,Oe,null,l,se));for(P in l)se=l[P],re=r[P],l.hasOwnProperty(P)&&se!==re&&(se!=null||re!=null)&&(P==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":qt(t,i,P,se,l,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in r)se=r[Qe],r.hasOwnProperty(Qe)&&se!=null&&!l.hasOwnProperty(Qe)&&qt(t,i,Qe,null,l,se);for(ne in l)if(se=l[ne],re=r[ne],l.hasOwnProperty(ne)&&se!==re&&(se!=null||re!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:qt(t,i,ne,se,l,re)}return;default:if(ys(i)){for(var Bt in r)se=r[Bt],r.hasOwnProperty(Bt)&&se!==void 0&&!l.hasOwnProperty(Bt)&&Vh(t,i,Bt,void 0,l,se);for(ue in l)se=l[ue],re=r[ue],!l.hasOwnProperty(ue)||se===re||se===void 0&&re===void 0||Vh(t,i,ue,se,l,re);return}}for(var Q in r)se=r[Q],r.hasOwnProperty(Q)&&se!=null&&!l.hasOwnProperty(Q)&&qt(t,i,Q,null,l,se);for(pe in l)se=l[pe],re=r[pe],!l.hasOwnProperty(pe)||se===re||se==null&&re==null||qt(t,i,pe,se,l,re)}function eE(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],p=f.transferSize,T=f.initiatorType,A=f.duration;if(p&&A&&eE(T)){for(T=0,A=f.responseEnd,l+=1;l<r.length;l++){var P=r[l],ne=P.startTime;if(ne>A)break;var ue=P.transferSize,pe=P.initiatorType;ue&&eE(pe)&&(P=P.responseEnd,T+=ue*(P<A?1:(A-ne)/(P-ne)))}if(--l,i+=8*(p+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qh=null,Bh=null;function Mu(t){return t.nodeType===9?t:t.ownerDocument}function tE(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nE(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Ph(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Fh=null;function WS(){var t=window.event;return t&&t.type==="popstate"?t===Fh?!1:(Fh=t,!0):(Fh=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,JS=typeof clearTimeout=="function"?clearTimeout:void 0,iE=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof iE<"u"?function(t){return iE.resolve(null).then(t).catch(eN)}:sE;function eN(t){setTimeout(function(){throw t})}function tr(t){return t==="head"}function aE(t,i){var r=i,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),al(i);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")dc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,dc(r);for(var p=r.firstChild;p;){var T=p.nextSibling,A=p.nodeName;p[os]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=T}}else r==="body"&&dc(t.ownerDocument.body);r=f}while(r);al(i)}function rE(t,i){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Gh(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Gh(r),Da(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function tN(t,i,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[os])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=oi(t.nextSibling),t===null)break}return null}function nN(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=oi(t.nextSibling),t===null))return null;return t}function oE(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=oi(t.nextSibling),t===null))return null;return t}function Hh(t){return t.data==="$?"||t.data==="$~"}function zh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function sN(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var l=function(){i(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function oi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Xh=null;function lE(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return oi(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function cE(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function uE(t,i,r){switch(i=Mu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function dc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Da(t)}var li=new Map,dE=new Set;function Uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _a=fe.d;fe.d={f:iN,r:aN,D:rN,C:oN,L:lN,m:cN,X:dN,S:uN,M:fN};function iN(){var t=_a.f(),i=Ru();return t||i}function aN(t){var i=Un(t);i!==null&&i.tag===5&&i.type==="form"?Rg(i):_a.r(t)}var nl=typeof document>"u"?null:document;function fE(t,i,r){var l=nl;if(l&&typeof i=="string"&&i){var f=Jn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),dE.has(f)||(dE.add(f),t={rel:t,crossOrigin:r,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Gn(i,"link",t),tn(i),l.head.appendChild(i)))}}function rN(t){_a.D(t),fE("dns-prefetch",t,null)}function oN(t,i){_a.C(t,i),fE("preconnect",t,i)}function lN(t,i,r){_a.L(t,i,r);var l=nl;if(l&&t&&i){var f='link[rel="preload"][as="'+Jn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Jn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Jn(r.imageSizes)+'"]')):f+='[href="'+Jn(t)+'"]';var p=f;switch(i){case"style":p=sl(t);break;case"script":p=il(t)}li.has(p)||(t=x({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),li.set(p,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(fc(p))||i==="script"&&l.querySelector(hc(p))||(i=l.createElement("link"),Gn(i,"link",t),tn(i),l.head.appendChild(i)))}}function cN(t,i){_a.m(t,i);var r=nl;if(r&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Jn(l)+'"][href="'+Jn(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=il(t)}if(!li.has(p)&&(t=x({rel:"modulepreload",href:t},i),li.set(p,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(hc(p)))return}l=r.createElement("link"),Gn(l,"link",t),tn(l),r.head.appendChild(l)}}}function uN(t,i,r){_a.S(t,i,r);var l=nl;if(l&&t){var f=js(l).hoistableStyles,p=sl(t);i=i||"default";var T=f.get(p);if(!T){var A={loading:0,preload:null};if(T=l.querySelector(fc(p)))A.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":i},r),(r=li.get(p))&&$h(t,r);var P=T=l.createElement("link");tn(P),Gn(P,"link",t),P._p=new Promise(function(ne,ue){P.onload=ne,P.onerror=ue}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Vu(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:A},f.set(p,T)}}}function dN(t,i){_a.X(t,i);var r=nl;if(r&&t){var l=js(r).hoistableScripts,f=il(t),p=l.get(f);p||(p=r.querySelector(hc(f)),p||(t=x({src:t,async:!0},i),(i=li.get(f))&&Yh(t,i),p=r.createElement("script"),tn(p),Gn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function fN(t,i){_a.M(t,i);var r=nl;if(r&&t){var l=js(r).hoistableScripts,f=il(t),p=l.get(f);p||(p=r.querySelector(hc(f)),p||(t=x({src:t,async:!0,type:"module"},i),(i=li.get(f))&&Yh(t,i),p=r.createElement("script"),tn(p),Gn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function hE(t,i,r,l){var f=(f=ze.current)?Uu(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=sl(r.href),r=js(f).hoistableStyles,l=r.get(i),l||(l={type:"style",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=sl(r.href);var p=js(f).hoistableStyles,T=p.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=f.querySelector(fc(t)))&&!p._p&&(T.instance=p,T.state.loading=5),li.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},li.set(t,r),p||hN(f,t,r,T.state))),i&&l===null)throw Error(a(528,""));return T}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=il(r),r=js(f).hoistableScripts,l=r.get(i),l||(l={type:"script",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function sl(t){return'href="'+Jn(t)+'"'}function fc(t){return'link[rel="stylesheet"]['+t+"]"}function mE(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function hN(t,i,r,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gn(i,"link",r),tn(i),t.head.appendChild(i))}function il(t){return'[src="'+Jn(t)+'"]'}function hc(t){return"script[async]"+t}function pE(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Jn(r.href)+'"]');if(l)return i.instance=l,tn(l),l;var f=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),tn(l),Gn(l,"style",f),Vu(l,r.precedence,t),i.instance=l;case"stylesheet":f=sl(r.href);var p=t.querySelector(fc(f));if(p)return i.state.loading|=4,i.instance=p,tn(p),p;l=mE(r),(f=li.get(f))&&$h(l,f),p=(t.ownerDocument||t).createElement("link"),tn(p);var T=p;return T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),Gn(p,"link",l),i.state.loading|=4,Vu(p,r.precedence,t),i.instance=p;case"script":return p=il(r.src),(f=t.querySelector(hc(p)))?(i.instance=f,tn(f),f):(l=r,(f=li.get(p))&&(l=x({},r),Yh(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),tn(f),Gn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Vu(l,r.precedence,t));return i.instance}function Vu(t,i,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var A=l[T];if(A.dataset.precedence===i)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function $h(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Yh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var qu=null;function _E(t,i,r){if(qu===null){var l=new Map,f=qu=new Map;f.set(r,l)}else f=qu,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var p=r[f];if(!(p[os]||p[mt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=t+T;var A=l.get(T);A?A.push(p):l.set(T,[p])}}return l}function gE(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function mN(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function yE(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function pN(t,i,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=sl(l.href),p=i.querySelector(fc(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Bu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=p,tn(p);return}p=i.ownerDocument||i,l=mE(l),(f=li.get(f))&&$h(l,f),p=p.createElement("link"),tn(p);var T=p;T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),Gn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Bu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var Qh=0;function _N(t,i){return t.stylesheets&&t.count===0&&Fu(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&Qh===0&&(Qh=62500*KS());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fu(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Qh?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Pu=null;function Fu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Pu=new Map,i.forEach(gN,t),Pu=null,Bu.call(t))}function gN(t,i){if(!(i.state.loading&4)){var r=Pu.get(t);if(r)var l=r.get(null);else{r=new Map,Pu.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),l=T)}l&&r.set(null,l)}f=i.instance,T=f.getAttribute("data-precedence"),p=r.get(T)||l,p===l&&r.set(null,f),r.set(T,f),this.count++,l=Bu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var mc={$$typeof:K,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function yN(t,i,r,l,f,p,T,A,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.hiddenUpdates=ps(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function EE(t,i,r,l,f,p,T,A,P,ne,ue,pe){return t=new yN(t,i,r,T,P,ne,ue,pe,A),i=1,p===!0&&(i|=24),p=Ms(3,null,null,i),t.current=p,p.stateNode=t,i=Rf(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:i},jf(p),t}function vE(t){return t?(t=Oo,t):Oo}function TE(t,i,r,l,f,p){f=vE(f),l.context===null?l.context=f:l.pendingContext=f,l=Ha(i),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=za(t,l,i),r!==null&&(xs(r,t,i),Xl(r,t,i))}function bE(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function Kh(t,i){bE(t,i),(t=t.alternate)&&bE(t,i)}function SE(t){if(t.tag===13||t.tag===31){var i=qr(t,67108864);i!==null&&xs(i,t,67108864),Kh(t,67108864)}}function NE(t){if(t.tag===13||t.tag===31){var i=Ps();i=xi(i);var r=qr(t,i);r!==null&&xs(r,t,i),Kh(t,i)}}var Gu=!0;function EN(t,i,r,l){var f=Y.T;Y.T=null;var p=fe.p;try{fe.p=2,Wh(t,i,r,l)}finally{fe.p=p,Y.T=f}}function vN(t,i,r,l){var f=Y.T;Y.T=null;var p=fe.p;try{fe.p=8,Wh(t,i,r,l)}finally{fe.p=p,Y.T=f}}function Wh(t,i,r,l){if(Gu){var f=Jh(l);if(f===null)Uh(t,i,l,Hu,r),wE(t,l);else if(bN(f,t,i,r,l))l.stopPropagation();else if(wE(t,l),i&4&&-1<TN.indexOf(t)){for(;f!==null;){var p=Un(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Is(p.pendingLanes);if(T!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var P=1<<31-$t(T);A.entanglements[1]|=P,T&=~P}Ui(p),(Ct&6)===0&&(wu=On()+500,lc(0))}}break;case 31:case 13:A=qr(p,2),A!==null&&xs(A,p,2),Ru(),Kh(p,2)}if(p=Jh(l),p===null&&Uh(t,i,l,Hu,r),p===f)break;f=p}f!==null&&l.stopPropagation()}else Uh(t,i,l,null,r)}}function Jh(t){return t=Ce(t),Zh(t)}var Hu=null;function Zh(t){if(Hu=null,t=un(t),t!==null){var i=u(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=h(i),t!==null)return t;t=null}else if(r===31){if(t=g(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Hu=t,null}function xE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(di()){case fi:return 2;case is:return 8;case hi:case _o:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var em=!1,nr=null,sr=null,ir=null,pc=new Map,_c=new Map,ar=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wE(t,i){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":pc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(i.pointerId)}}function gc(t,i,r,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Un(i),i!==null&&SE(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function bN(t,i,r,l,f){switch(i){case"focusin":return nr=gc(nr,t,i,r,l,f),!0;case"dragenter":return sr=gc(sr,t,i,r,l,f),!0;case"mouseover":return ir=gc(ir,t,i,r,l,f),!0;case"pointerover":var p=f.pointerId;return pc.set(p,gc(pc.get(p)||null,t,i,r,l,f)),!0;case"gotpointercapture":return p=f.pointerId,_c.set(p,gc(_c.get(p)||null,t,i,r,l,f)),!0}return!1}function AE(t){var i=un(t.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=h(r),i!==null){t.blockedOn=i,_s(t.priority,function(){NE(r)});return}}else if(i===31){if(i=g(r),i!==null){t.blockedOn=i,_s(t.priority,function(){NE(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=Jh(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);jr=l,r.target.dispatchEvent(l),jr=null}else return i=Un(r),i!==null&&SE(i),t.blockedOn=r,!1;i.shift()}return!0}function RE(t,i,r){zu(t)&&r.delete(i)}function SN(){em=!1,nr!==null&&zu(nr)&&(nr=null),sr!==null&&zu(sr)&&(sr=null),ir!==null&&zu(ir)&&(ir=null),pc.forEach(RE),_c.forEach(RE)}function Xu(t,i){t.blockedOn===i&&(t.blockedOn=null,em||(em=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,SN)))}var $u=null;function CE(t){$u!==t&&($u=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){$u===t&&($u=null);for(var i=0;i<t.length;i+=3){var r=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(Zh(l||r)===null)continue;break}var p=Un(r);p!==null&&(t.splice(i,3),i-=3,Jf(p,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function al(t){function i(P){return Xu(P,t)}nr!==null&&Xu(nr,t),sr!==null&&Xu(sr,t),ir!==null&&Xu(ir,t),pc.forEach(i),_c.forEach(i);for(var r=0;r<ar.length;r++){var l=ar[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)AE(r),r.blockedOn===null&&ar.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],p=r[l+1],T=f[cn]||null;if(typeof p=="function")T||CE(r);else if(T){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[cn]||null)A=T.formAction;else if(Zh(f)!==null)continue}else A=T.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),CE(r)}}}function IE(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function tm(t){this._internalRoot=t}Yu.prototype.render=tm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,l=Ps();TE(r,l,t,i,null,null)},Yu.prototype.unmount=tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;TE(t.current,2,null,t,null,null),Ru(),i[Xs]=null}};function Yu(t){this._internalRoot=t}Yu.prototype.unstable_scheduleHydration=function(t){if(t){var i=wr();t={blockedOn:null,target:t,priority:i};for(var r=0;r<ar.length&&i!==0&&i<ar[r].priority;r++);ar.splice(r,0,t),r===0&&AE(t)}};var kE=e.version;if(kE!=="19.2.4")throw Error(a(527,kE,"19.2.4"));fe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var NN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{Rs=Qu.inject(NN),Be=Qu}catch{}}return Ec.createRoot=function(t,i){if(!o(t))throw Error(a(299));var r=!1,l="",f=Vg,p=qg,T=Bg;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=EE(t,1,!1,null,null,r,l,null,f,p,T,IE),t[Xs]=i.current,Mh(t),new tm(i)},Ec.hydrateRoot=function(t,i,r){if(!o(t))throw Error(a(299));var l=!1,f="",p=Vg,T=qg,A=Bg,P=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(P=r.formState)),i=EE(t,1,!0,i,r??null,l,f,P,p,T,A,IE),i.context=vE(null),r=i.current,l=Ps(),l=xi(l),f=Ha(l),f.callback=null,za(r,f,l),r=l,i.current.lanes=r,mi(i,r),Ui(i),t[Xs]=i.current,Mh(t),new Yu(i)},Ec.version="19.2.4",Ec}var PE;function MN(){if(PE)return im.exports;PE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),im.exports=ON(),im.exports}var UN=MN(),lm={exports:{}};const VN={},qN=Object.freeze(Object.defineProperty({__proto__:null,default:VN},Symbol.toStringTag,{value:"Module"})),FE=AN(qN);var GE;function BN(){return GE||(GE=1,(function(s,e){var n=void 0,a=function(o){return n||(n=new Promise(function(u,h){var g=typeof o<"u"?o:{},E=g.onAbort;g.onAbort=function(m){h(new Error(m)),E&&E(m)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),s=void 0;var _;_||=typeof g<"u"?g:{};var S=typeof window=="object",x=typeof WorkerGlobalScope<"u",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";_.onRuntimeInitialized=function(){function m(W,me){switch(typeof me){case"boolean":xe(W,me?1:0);break;case"number":b(W,me);break;case"string":Z(W,me,-1,-1);break;case"object":if(me===null)I(W);else if(me.length!=null){var Re=Ci(me,Ri);ae(W,Re,me.length,-1),ds(Re)}else tt(W,"Wrong API use : tried to return a value of an unknown type ("+me+").",-1);break;default:I(W)}}function y(W,me){for(var Re=[],Ue=0;Ue<W;Ue+=1){var Ye=Ut(me+4*Ue,"i32"),pt=Co(Ye);if(pt===1||pt===2)Ye=v(Ye);else if(pt===3)Ye=gi(Ye);else if(pt===4){pt=Ye,Ye=Io(pt),pt=d(pt);for(var kn=new Uint8Array(Ye),vs=0;vs<Ye;vs+=1)kn[vs]=q[pt+vs];Ye=kn}else Ye=null;Re.push(Ye)}return Re}function N(W,me){this.Qa=W,this.db=me,this.Oa=1,this.lb=[]}function C(W,me){if(this.db=me,me=fi(W)+1,this.eb=Js(me),this.eb===null)throw Error("Unable to allocate memory for the SQL string");is(W,M,this.eb,me),this.kb=this.eb,this.Za=this.pb=null}function F(W){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),W!=null){var me=this.filename,Re="/",Ue=me;if(Re&&(Re=typeof Re=="string"?Re:ps(Re),Ue=me?Wt(Re+"/"+me):Re),me=as(!0,!0),Ue=Da(Ue,me),W){if(typeof W=="string"){Re=Array(W.length);for(var Ye=0,pt=W.length;Ye<pt;++Ye)Re[Ye]=W.charCodeAt(Ye);W=Re}ls(Ue,me|146),Re=$s(Ue,577),Qi(Re,W,0,W.length,0),Yi(Re),ls(Ue,me)}}this.handleError(De(this.filename,J)),this.db=Ut(J,"i32"),bt(this.db),this.fb={},this.Sa={}}var J=pn(4),ce=_.cwrap,De=ce("sqlite3_open","number",["string","number"]),Fe=ce("sqlite3_close_v2","number",["number"]),Ke=ce("sqlite3_exec","number",["number","string","number","number","number"]),xt=ce("sqlite3_changes","number",["number"]),nn=ce("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ua=ce("sqlite3_sql","string",["number"]),ki=ce("sqlite3_normalized_sql","string",["number"]),Ji=ce("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Zs=ce("sqlite3_bind_text","number",["number","number","number","number","number"]),Zi=ce("sqlite3_bind_blob","number",["number","number","number","number","number"]),Dr=ce("sqlite3_bind_double","number",["number","number","number"]),ea=ce("sqlite3_bind_int","number",["number","number","number"]),To=ce("sqlite3_bind_parameter_index","number",["number","string"]),bo=ce("sqlite3_step","number",["number"]),ta=ce("sqlite3_errmsg","string",["number"]),Lr=ce("sqlite3_column_count","number",["number"]),So=ce("sqlite3_data_count","number",["number"]),Va=ce("sqlite3_column_double","number",["number","number"]),Or=ce("sqlite3_column_text","string",["number","number"]),No=ce("sqlite3_column_blob","number",["number","number"]),ei=ce("sqlite3_column_bytes","number",["number","number"]),xo=ce("sqlite3_column_type","number",["number","number"]),wo=ce("sqlite3_column_name","string",["number","number"]),Ao=ce("sqlite3_reset","number",["number"]),Ro=ce("sqlite3_clear_bindings","number",["number"]),ji=ce("sqlite3_finalize","number",["number"]),In=ce("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Co=ce("sqlite3_value_type","number",["number"]),Io=ce("sqlite3_value_bytes","number",["number"]),gi=ce("sqlite3_value_text","string",["number"]),d=ce("sqlite3_value_blob","number",["number"]),v=ce("sqlite3_value_double","number",["number"]),b=ce("sqlite3_result_double","",["number","number"]),I=ce("sqlite3_result_null","",["number"]),Z=ce("sqlite3_result_text","",["number","string","number","number"]),ae=ce("sqlite3_result_blob","",["number","number","number","number"]),xe=ce("sqlite3_result_int","",["number","number"]),tt=ce("sqlite3_result_error","",["number","string","number"]),Jt=ce("sqlite3_aggregate_context","number",["number","number"]),bt=ce("RegisterExtensionFunctions","number",["number"]),Pt=ce("sqlite3_update_hook","number",["number","number","number"]);N.prototype.bind=function(W){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(W)?this.Cb(W):W!=null&&typeof W=="object"?this.Db(W):!0},N.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var W=bo(this.Qa);switch(W){case 100:return!0;case 101:return!1;default:throw this.db.handleError(W)}},N.prototype.wb=function(W){return W==null&&(W=this.Oa,this.Oa+=1),Va(this.Qa,W)},N.prototype.Gb=function(W){if(W==null&&(W=this.Oa,this.Oa+=1),W=Or(this.Qa,W),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(W)},N.prototype.Hb=function(W){return W==null&&(W=this.Oa,this.Oa+=1),Or(this.Qa,W)},N.prototype.getBlob=function(W){W==null&&(W=this.Oa,this.Oa+=1);var me=ei(this.Qa,W);W=No(this.Qa,W);for(var Re=new Uint8Array(me),Ue=0;Ue<me;Ue+=1)Re[Ue]=q[W+Ue];return Re},N.prototype.get=function(W,me){me=me||{},W!=null&&this.bind(W)&&this.step(),W=[];for(var Re=So(this.Qa),Ue=0;Ue<Re;Ue+=1)switch(xo(this.Qa,Ue)){case 1:var Ye=me.useBigInt?this.Gb(Ue):this.wb(Ue);W.push(Ye);break;case 2:W.push(this.wb(Ue));break;case 3:W.push(this.Hb(Ue));break;case 4:W.push(this.getBlob(Ue));break;default:W.push(null)}return W},N.prototype.getColumnNames=function(){for(var W=[],me=Lr(this.Qa),Re=0;Re<me;Re+=1)W.push(wo(this.Qa,Re));return W},N.prototype.getAsObject=function(W,me){W=this.get(W,me),me=this.getColumnNames();for(var Re={},Ue=0;Ue<me.length;Ue+=1)Re[me[Ue]]=W[Ue];return Re},N.prototype.getSQL=function(){return Ua(this.Qa)},N.prototype.getNormalizedSQL=function(){return ki(this.Qa)},N.prototype.run=function(W){return W!=null&&this.bind(W),this.step(),this.reset()},N.prototype.sb=function(W,me){me==null&&(me=this.Oa,this.Oa+=1),W=hi(W);var Re=Ci(W,Ri);this.lb.push(Re),this.db.handleError(Zs(this.Qa,me,Re,W.length-1,0))},N.prototype.Bb=function(W,me){me==null&&(me=this.Oa,this.Oa+=1);var Re=Ci(W,Ri);this.lb.push(Re),this.db.handleError(Zi(this.Qa,me,Re,W.length,0))},N.prototype.rb=function(W,me){me==null&&(me=this.Oa,this.Oa+=1),this.db.handleError((W===(W|0)?ea:Dr)(this.Qa,me,W))},N.prototype.Eb=function(W){W==null&&(W=this.Oa,this.Oa+=1),Zi(this.Qa,W,0,0,0)},N.prototype.tb=function(W,me){switch(me==null&&(me=this.Oa,this.Oa+=1),typeof W){case"string":this.sb(W,me);return;case"number":this.rb(W,me);return;case"bigint":this.sb(W.toString(),me);return;case"boolean":this.rb(W+0,me);return;case"object":if(W===null){this.Eb(me);return}if(W.length!=null){this.Bb(W,me);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+W+")."},N.prototype.Db=function(W){var me=this;return Object.keys(W).forEach(function(Re){var Ue=To(me.Qa,Re);Ue!==0&&me.tb(W[Re],Ue)}),!0},N.prototype.Cb=function(W){for(var me=0;me<W.length;me+=1)this.tb(W[me],me+1);return!0},N.prototype.reset=function(){return this.freemem(),Ro(this.Qa)===0&&Ao(this.Qa)===0},N.prototype.freemem=function(){for(var W;(W=this.lb.pop())!==void 0;)ds(W)},N.prototype.free=function(){this.freemem();var W=ji(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,W},C.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var W=Cn(),me=pn(4);Yn(J),Yn(me);try{this.db.handleError(Ji(this.db.db,this.kb,-1,J,me)),this.kb=Ut(me,"i32");var Re=Ut(J,"i32");return Re===0?(this.mb(),{done:!0}):(this.Za=new N(Re,this.db),this.db.fb[Re]=this.Za,{value:this.Za,done:!1})}catch(Ue){throw this.pb=$i(this.kb),this.mb(),Ue}finally{Es(W)}},C.prototype.mb=function(){ds(this.eb),this.eb=null},C.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:$i(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(C.prototype[Symbol.iterator]=function(){return this}),F.prototype.run=function(W,me){if(!this.db)throw"Database closed";if(me){W=this.prepare(W,me);try{W.step()}finally{W.free()}}else this.handleError(Ke(this.db,W,0,0,J));return this},F.prototype.exec=function(W,me,Re){if(!this.db)throw"Database closed";var Ue=Cn(),Ye=null;try{var pt=An(W),kn=pn(4);for(W=[];Ut(pt,"i8")!==0;){Yn(J),Yn(kn),this.handleError(Ji(this.db,pt,-1,J,kn));var vs=Ut(J,"i32");if(pt=Ut(kn,"i32"),vs!==0){var fs=null;for(Ye=new N(vs,this),me!=null&&Ye.bind(me);Ye.step();)fs===null&&(fs={columns:Ye.getColumnNames(),values:[]},W.push(fs)),fs.values.push(Ye.get(null,Re));Ye.free()}}return W}catch(Ls){throw Ye&&Ye.free(),Ls}finally{Es(Ue)}},F.prototype.each=function(W,me,Re,Ue,Ye){typeof me=="function"&&(Ue=Re,Re=me,me=void 0),W=this.prepare(W,me);try{for(;W.step();)Re(W.getAsObject(null,Ye))}finally{W.free()}if(typeof Ue=="function")return Ue()},F.prototype.prepare=function(W,me){if(Yn(J),this.handleError(nn(this.db,W,-1,J,0)),W=Ut(J,"i32"),W===0)throw"Nothing to prepare";var Re=new N(W,this);return me!=null&&Re.bind(me),this.fb[W]=Re},F.prototype.iterateStatements=function(W){return new C(W,this)},F.prototype.export=function(){Object.values(this.fb).forEach(function(me){me.free()}),Object.values(this.Sa).forEach(us),this.Sa={},this.handleError(Fe(this.db));var W=cs(this.filename);return this.handleError(De(this.filename,J)),this.db=Ut(J,"i32"),bt(this.db),W},F.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(W){W.free()}),Object.values(this.Sa).forEach(us),this.Sa={},this.Ya&&(us(this.Ya),this.Ya=void 0),this.handleError(Fe(this.db)),tn("/"+this.filename),this.db=null)},F.prototype.handleError=function(W){if(W===0)return null;throw W=ta(this.db),Error(W)},F.prototype.getRowsModified=function(){return xt(this.db)},F.prototype.create_function=function(W,me){Object.prototype.hasOwnProperty.call(this.Sa,W)&&(us(this.Sa[W]),delete this.Sa[W]);var Re=qn(function(Ue,Ye,pt){Ye=y(Ye,pt);try{var kn=me.apply(null,Ye)}catch(vs){tt(Ue,vs,-1);return}m(Ue,kn)},"viii");return this.Sa[W]=Re,this.handleError(In(this.db,W,me.length,1,0,Re,0,0,0)),this},F.prototype.create_aggregate=function(W,me){var Re=me.init||function(){return null},Ue=me.finalize||function(fs){return fs},Ye=me.step;if(!Ye)throw"An aggregate function must have a step function in "+W;var pt={};Object.hasOwnProperty.call(this.Sa,W)&&(us(this.Sa[W]),delete this.Sa[W]),me=W+"__finalize",Object.hasOwnProperty.call(this.Sa,me)&&(us(this.Sa[me]),delete this.Sa[me]);var kn=qn(function(fs,Ls,ko){var Di=Jt(fs,1);Object.hasOwnProperty.call(pt,Di)||(pt[Di]=Re()),Ls=y(Ls,ko),Ls=[pt[Di]].concat(Ls);try{pt[Di]=Ye.apply(null,Ls)}catch(Mr){delete pt[Di],tt(fs,Mr,-1)}},"viii"),vs=qn(function(fs){var Ls=Jt(fs,1);try{var ko=Ue(pt[Ls])}catch(Di){delete pt[Ls],tt(fs,Di,-1);return}m(fs,ko),delete pt[Ls]},"vi");return this.Sa[W]=kn,this.Sa[me]=vs,this.handleError(In(this.db,W,Ye.length-1,1,0,0,kn,vs,0)),this},F.prototype.updateHook=function(W){this.Ya&&(Pt(this.db,0,0),us(this.Ya),this.Ya=void 0),W&&(this.Ya=qn(function(me,Re,Ue,Ye,pt){switch(Re){case 18:me="insert";break;case 23:me="update";break;case 9:me="delete";break;default:throw"unknown operationCode in updateHook callback: "+Re}if(Ue=Ue?jt(M,Ue):"",Ye=Ye?jt(M,Ye):"",pt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";W(me,Ue,Ye,Number(pt))},"viiiij"),Pt(this.db,this.Ya,0))},_.Database=F};var B={..._},H="./this.program",U=(m,y)=>{throw y},V="",z,G;if(w){var K=FE;V=__dirname+"/",G=m=>(m=we(m)?new URL(m):m,K.readFileSync(m)),z=async m=>(m=we(m)?new URL(m):m,K.readFileSync(m,void 0)),!_.thisProgram&&1<process.argv.length&&(H=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),s.exports=_,U=(m,y)=>{throw process.exitCode=m,y}}else(S||x)&&(x?V=self.location.href:typeof document<"u"&&document.currentScript&&(V=document.currentScript.src),V=V.startsWith("blob:")?"":V.slice(0,V.replace(/[?#].*/,"").lastIndexOf("/")+1),x&&(G=m=>{var y=new XMLHttpRequest;return y.open("GET",m,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),z=async m=>{if(we(m))return new Promise((N,C)=>{var F=new XMLHttpRequest;F.open("GET",m,!0),F.responseType="arraybuffer",F.onload=()=>{F.status==200||F.status==0&&F.response?N(F.response):C(F.status)},F.onerror=C,F.send(null)});var y=await fetch(m,{credentials:"same-origin"});if(y.ok)return y.arrayBuffer();throw Error(y.status+" : "+y.url)});var ie=_.print||console.log.bind(console),Ee=_.printErr||console.error.bind(console);Object.assign(_,B),B=null,_.thisProgram&&(H=_.thisProgram);var ye=_.wasmBinary,D,R=!1,L,q,M,O,j,Ae,Ze,Y,fe,we=m=>m.startsWith("file://");function $e(){var m=D.buffer;_.HEAP8=q=new Int8Array(m),_.HEAP16=O=new Int16Array(m),_.HEAPU8=M=new Uint8Array(m),_.HEAPU16=new Uint16Array(m),_.HEAP32=j=new Int32Array(m),_.HEAPU32=Ae=new Uint32Array(m),_.HEAPF32=Ze=new Float32Array(m),_.HEAPF64=fe=new Float64Array(m),_.HEAP64=Y=new BigInt64Array(m),_.HEAPU64=new BigUint64Array(m)}var et=0,X=null;function de(m){throw _.onAbort?.(m),m="Aborted("+m+")",Ee(m),R=!0,new WebAssembly.RuntimeError(m+". Build with -sASSERTIONS for more info.")}var oe;async function Se(m){if(!ye)try{var y=await z(m);return new Uint8Array(y)}catch{}if(m==oe&&ye)m=new Uint8Array(ye);else if(G)m=G(m);else throw"both async and sync fetching of the wasm failed";return m}async function Me(m,y){try{var N=await Se(m);return await WebAssembly.instantiate(N,y)}catch(C){Ee(`failed to asynchronously prepare wasm: ${C}`),de(C)}}async function ze(m){var y=oe;if(!ye&&typeof WebAssembly.instantiateStreaming=="function"&&!we(y)&&!w)try{var N=fetch(y,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(N,m)}catch(C){Ee(`wasm streaming compile failed: ${C}`),Ee("falling back to ArrayBuffer instantiation")}return Me(y,m)}class le{name="ExitStatus";constructor(y){this.message=`Program terminated with exit(${y})`,this.status=y}}var Le=m=>{for(;0<m.length;)m.shift()(_)},nt=[],kt=[],ln=()=>{var m=_.preRun.shift();kt.unshift(m)};function Ut(m,y="i8"){switch(y.endsWith("*")&&(y="*"),y){case"i1":return q[m];case"i8":return q[m];case"i16":return O[m>>1];case"i32":return j[m>>2];case"i64":return Y[m>>3];case"float":return Ze[m>>2];case"double":return fe[m>>3];case"*":return Ae[m>>2];default:de(`invalid type for getValue: ${y}`)}}var zs=_.noExitRuntime||!0;function Yn(m){var y="i32";switch(y.endsWith("*")&&(y="*"),y){case"i1":q[m]=0;break;case"i8":q[m]=0;break;case"i16":O[m>>1]=0;break;case"i32":j[m>>2]=0;break;case"i64":Y[m>>3]=BigInt(0);break;case"float":Ze[m>>2]=0;break;case"double":fe[m>>3]=0;break;case"*":Ae[m>>2]=0;break;default:de(`invalid type for setValue: ${y}`)}}var Ca=typeof TextDecoder<"u"?new TextDecoder:void 0,jt=(m,y=0,N=NaN)=>{var C=y+N;for(N=y;m[N]&&!(N>=C);)++N;if(16<N-y&&m.buffer&&Ca)return Ca.decode(m.subarray(y,N));for(C="";y<N;){var F=m[y++];if(F&128){var J=m[y++]&63;if((F&224)==192)C+=String.fromCharCode((F&31)<<6|J);else{var ce=m[y++]&63;F=(F&240)==224?(F&15)<<12|J<<6|ce:(F&7)<<18|J<<12|ce<<6|m[y++]&63,65536>F?C+=String.fromCharCode(F):(F-=65536,C+=String.fromCharCode(55296|F>>10,56320|F&1023))}}else C+=String.fromCharCode(F)}return C},$i=(m,y)=>m?jt(M,m,y):"",Ia=(m,y)=>{for(var N=0,C=m.length-1;0<=C;C--){var F=m[C];F==="."?m.splice(C,1):F===".."?(m.splice(C,1),N++):N&&(m.splice(C,1),N--)}if(y)for(;N;N--)m.unshift("..");return m},Wt=m=>{var y=m.charAt(0)==="/",N=m.slice(-1)==="/";return(m=Ia(m.split("/").filter(C=>!!C),!y).join("/"))||y||(m="."),m&&N&&(m+="/"),(y?"/":"")+m},an=m=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(m).slice(1);return m=y[0],y=y[1],!m&&!y?".":(y&&=y.slice(0,-1),m+y)},As=m=>m&&m.match(/([^\/]+|\/)\/*$/)[1],Ll=()=>{if(w){var m=FE;return y=>m.randomFillSync(y)}return y=>crypto.getRandomValues(y)},br=m=>{(br=Ll())(m)},On=(...m)=>{for(var y="",N=!1,C=m.length-1;-1<=C&&!N;C--){if(N=0<=C?m[C]:"/",typeof N!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!N)return"";y=N+"/"+y,N=N.charAt(0)==="/"}return y=Ia(y.split("/").filter(F=>!!F),!N).join("/"),(N?"/":"")+y||"."},di=[],fi=m=>{for(var y=0,N=0;N<m.length;++N){var C=m.charCodeAt(N);127>=C?y++:2047>=C?y+=2:55296<=C&&57343>=C?(y+=4,++N):y+=3}return y},is=(m,y,N,C)=>{if(!(0<C))return 0;var F=N;C=N+C-1;for(var J=0;J<m.length;++J){var ce=m.charCodeAt(J);if(55296<=ce&&57343>=ce){var De=m.charCodeAt(++J);ce=65536+((ce&1023)<<10)|De&1023}if(127>=ce){if(N>=C)break;y[N++]=ce}else{if(2047>=ce){if(N+1>=C)break;y[N++]=192|ce>>6}else{if(65535>=ce){if(N+2>=C)break;y[N++]=224|ce>>12}else{if(N+3>=C)break;y[N++]=240|ce>>18,y[N++]=128|ce>>12&63}y[N++]=128|ce>>6&63}y[N++]=128|ce&63}}return y[N]=0,N-F},hi=(m,y)=>{var N=Array(fi(m)+1);return m=is(m,N,0,N.length),y&&(N.length=m),N},_o=[];function Sr(m,y){_o[m]={input:[],output:[],cb:y},ja(m,go)}var go={open(m){var y=_o[m.node.rdev];if(!y)throw new Ne(43);m.tty=y,m.seekable=!1},close(m){m.tty.cb.fsync(m.tty)},fsync(m){m.tty.cb.fsync(m.tty)},read(m,y,N,C){if(!m.tty||!m.tty.cb.xb)throw new Ne(60);for(var F=0,J=0;J<C;J++){try{var ce=m.tty.cb.xb(m.tty)}catch{throw new Ne(29)}if(ce===void 0&&F===0)throw new Ne(6);if(ce==null)break;F++,y[N+J]=ce}return F&&(m.node.atime=Date.now()),F},write(m,y,N,C){if(!m.tty||!m.tty.cb.qb)throw new Ne(60);try{for(var F=0;F<C;F++)m.tty.cb.qb(m.tty,y[N+F])}catch{throw new Ne(29)}return C&&(m.node.mtime=m.node.ctime=Date.now()),F}},yo={xb(){e:{if(!di.length){var m=null;if(w){var y=Buffer.alloc(256),N=0,C=process.stdin.fd;try{N=K.readSync(C,y,0,256)}catch(F){if(F.toString().includes("EOF"))N=0;else throw F}0<N&&(m=y.slice(0,N).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(m=window.prompt("Input: "),m!==null&&(m+=`
`));if(!m){m=null;break e}di=hi(m,!0)}m=di.shift()}return m},qb(m,y){y===null||y===10?(ie(jt(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(ie(jt(m.output)),m.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Rs={qb(m,y){y===null||y===10?(Ee(jt(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(Ee(jt(m.output)),m.output=[])}},Be={Wa:null,Xa(){return Be.createNode(null,"/",16895,0)},createNode(m,y,N,C){if((N&61440)===24576||(N&61440)===4096)throw new Ne(63);return Be.Wa||(Be.Wa={dir:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua,lookup:Be.La.lookup,hb:Be.La.hb,rename:Be.La.rename,unlink:Be.La.unlink,rmdir:Be.La.rmdir,readdir:Be.La.readdir,symlink:Be.La.symlink},stream:{Va:Be.Ma.Va}},file:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua},stream:{Va:Be.Ma.Va,read:Be.Ma.read,write:Be.Ma.write,ib:Be.Ma.ib,jb:Be.Ma.jb}},link:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua,readlink:Be.La.readlink},stream:{}},ub:{node:{Ta:Be.La.Ta,Ua:Be.La.Ua},stream:Ml}}),N=ka(m,y,N,C),mn(N.mode)?(N.La=Be.Wa.dir.node,N.Ma=Be.Wa.dir.stream,N.Na={}):(N.mode&61440)===32768?(N.La=Be.Wa.file.node,N.Ma=Be.Wa.file.stream,N.Ra=0,N.Na=null):(N.mode&61440)===40960?(N.La=Be.Wa.link.node,N.Ma=Be.Wa.link.stream):(N.mode&61440)===8192&&(N.La=Be.Wa.ub.node,N.Ma=Be.Wa.ub.stream),N.atime=N.mtime=N.ctime=Date.now(),m&&(m.Na[y]=N,m.atime=m.mtime=m.ctime=N.atime),N},Sb(m){return m.Na?m.Na.subarray?m.Na.subarray(0,m.Ra):new Uint8Array(m.Na):new Uint8Array(0)},La:{Ta(m){var y={};return y.dev=(m.mode&61440)===8192?m.id:1,y.ino=m.id,y.mode=m.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=m.rdev,mn(m.mode)?y.size=4096:(m.mode&61440)===32768?y.size=m.Ra:(m.mode&61440)===40960?y.size=m.link.length:y.size=0,y.atime=new Date(m.atime),y.mtime=new Date(m.mtime),y.ctime=new Date(m.ctime),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},Ua(m,y){for(var N of["mode","atime","mtime","ctime"])y[N]!=null&&(m[N]=y[N]);y.size!==void 0&&(y=y.size,m.Ra!=y&&(y==0?(m.Na=null,m.Ra=0):(N=m.Na,m.Na=new Uint8Array(y),N&&m.Na.set(N.subarray(0,Math.min(y,m.Ra))),m.Ra=y)))},lookup(){throw Be.vb},hb(m,y,N,C){return Be.createNode(m,y,N,C)},rename(m,y,N){try{var C=rs(y,N)}catch{}if(C){if(mn(m.mode))for(var F in C.Na)throw new Ne(55);xr(C)}delete m.parent.Na[m.name],y.Na[N]=m,m.name=N,y.ctime=y.mtime=m.parent.ctime=m.parent.mtime=Date.now()},unlink(m,y){delete m.Na[y],m.ctime=m.mtime=Date.now()},rmdir(m,y){var N=rs(m,y),C;for(C in N.Na)throw new Ne(55);delete m.Na[y],m.ctime=m.mtime=Date.now()},readdir(m){return[".","..",...Object.keys(m.Na)]},symlink(m,y,N){return m=Be.createNode(m,y,41471,0),m.link=N,m},readlink(m){if((m.mode&61440)!==40960)throw new Ne(28);return m.link}},Ma:{read(m,y,N,C,F){var J=m.node.Na;if(F>=m.node.Ra)return 0;if(m=Math.min(m.node.Ra-F,C),8<m&&J.subarray)y.set(J.subarray(F,F+m),N);else for(C=0;C<m;C++)y[N+C]=J[F+C];return m},write(m,y,N,C,F,J){if(y.buffer===q.buffer&&(J=!1),!C)return 0;if(m=m.node,m.mtime=m.ctime=Date.now(),y.subarray&&(!m.Na||m.Na.subarray)){if(J)return m.Na=y.subarray(N,N+C),m.Ra=C;if(m.Ra===0&&F===0)return m.Na=y.slice(N,N+C),m.Ra=C;if(F+C<=m.Ra)return m.Na.set(y.subarray(N,N+C),F),C}J=F+C;var ce=m.Na?m.Na.length:0;if(ce>=J||(J=Math.max(J,ce*(1048576>ce?2:1.125)>>>0),ce!=0&&(J=Math.max(J,256)),ce=m.Na,m.Na=new Uint8Array(J),0<m.Ra&&m.Na.set(ce.subarray(0,m.Ra),0)),m.Na.subarray&&y.subarray)m.Na.set(y.subarray(N,N+C),F);else for(J=0;J<C;J++)m.Na[F+J]=y[N+J];return m.Ra=Math.max(m.Ra,F+C),C},Va(m,y,N){if(N===1?y+=m.position:N===2&&(m.node.mode&61440)===32768&&(y+=m.node.Ra),0>y)throw new Ne(28);return y},ib(m,y,N,C,F){if((m.node.mode&61440)!==32768)throw new Ne(43);if(m=m.node.Na,F&2||!m||m.buffer!==q.buffer){F=!0,C=65536*Math.ceil(y/65536);var J=Ii(65536,C);if(J&&M.fill(0,J,J+C),C=J,!C)throw new Ne(48);m&&((0<N||N+y<m.length)&&(m.subarray?m=m.subarray(N,N+y):m=Array.prototype.slice.call(m,N,N+y)),q.set(m,C))}else F=!1,C=m.byteOffset;return{Kb:C,Ab:F}},jb(m,y,N,C){return Be.Ma.write(m,y,0,C,N,!1),0}}},as=(m,y)=>{var N=0;return m&&(N|=365),y&&(N|=146),N},$t=null,Nr={},Cs=[],Eo=1,Sn=null,Ni=!1,en=!0,Is={},Ne=class{name="ErrnoError";constructor(m){this.Pa=m}},ks=class{gb={};node=null;get flags(){return this.gb.flags}set flags(m){this.gb.flags=m}get position(){return this.gb.position}set position(m){this.gb.position=m}},Ol=class{La={};Ma={};ab=null;constructor(m,y,N,C){m||=this,this.parent=m,this.Xa=m.Xa,this.id=Eo++,this.name=y,this.mode=N,this.rdev=C,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(m){m?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(m){m?this.mode|=146:this.mode&=-147}};function Mn(m,y={}){if(!m)throw new Ne(44);y.nb??(y.nb=!0),m.charAt(0)==="/"||(m="//"+m);var N=0;e:for(;40>N;N++){m=m.split("/").filter(De=>!!De);for(var C=$t,F="/",J=0;J<m.length;J++){var ce=J===m.length-1;if(ce&&y.parent)break;if(m[J]!==".")if(m[J]==="..")F=an(F),C=C.parent;else{F=Wt(F+"/"+m[J]);try{C=rs(C,m[J])}catch(De){if(De?.Pa===44&&ce&&y.Jb)return{path:F};throw De}if(!C.ab||ce&&!y.nb||(C=C.ab.root),(C.mode&61440)===40960&&(!ce||y.$a)){if(!C.La.readlink)throw new Ne(52);C=C.La.readlink(C),C.charAt(0)==="/"||(C=an(F)+"/"+C),m=C+"/"+m.slice(J+1).join("/");continue e}}}return{path:F,node:C}}throw new Ne(32)}function ps(m){for(var y;;){if(m===m.parent)return m=m.Xa.zb,y?m[m.length-1]!=="/"?`${m}/${y}`:m+y:m;y=y?`${m.name}/${y}`:m.name,m=m.parent}}function mi(m,y){for(var N=0,C=0;C<y.length;C++)N=(N<<5)-N+y.charCodeAt(C)|0;return(m+N>>>0)%Sn.length}function xr(m){var y=mi(m.parent.id,m.name);if(Sn[y]===m)Sn[y]=m.bb;else for(y=Sn[y];y;){if(y.bb===m){y.bb=m.bb;break}y=y.bb}}function rs(m,y){var N=mn(m.mode)?(N=Qn(m,"x"))?N:m.La.lookup?0:2:54;if(N)throw new Ne(N);for(N=Sn[mi(m.id,y)];N;N=N.bb){var C=N.name;if(N.parent.id===m.id&&C===y)return N}return m.La.lookup(m,y)}function ka(m,y,N,C){return m=new Ol(m,y,N,C),y=mi(m.parent.id,m.name),m.bb=Sn[y],Sn[y]=m}function mn(m){return(m&61440)===16384}function xi(m){var y=["r","w","rw"][m&3];return m&512&&(y+="w"),y}function Qn(m,y){if(en)return 0;if(!y.includes("r")||m.mode&292){if(y.includes("w")&&!(m.mode&146)||y.includes("x")&&!(m.mode&73))return 2}else return 2;return 0}function wr(m,y){if(!mn(m.mode))return 54;try{return rs(m,y),20}catch{}return Qn(m,"wx")}function _s(m,y,N){try{var C=rs(m,y)}catch(F){return F.Pa}if(m=Qn(m,"wx"))return m;if(N){if(!mn(C.mode))return 54;if(C===C.parent||ps(C)==="/")return 10}else if(mn(C.mode))return 31;return 0}function Kn(m){if(!m)throw new Ne(63);return m}function mt(m){if(m=Cs[m],!m)throw new Ne(8);return m}function cn(m,y=-1){if(m=Object.assign(new ks,m),y==-1)e:{for(y=0;4096>=y;y++)if(!Cs[y])break e;throw new Ne(33)}return m.fd=y,Cs[y]=m}function Xs(m,y=-1){return m=cn(m,y),m.Ma?.Rb?.(m),m}function wi(m,y,N){var C=m?.Ma.Ua;m=C?m:y,C??=y.La.Ua,Kn(C),C(m,N)}var Ml={open(m){m.Ma=Nr[m.node.rdev].Ma,m.Ma.open?.(m)},Va(){throw new Ne(70)}};function ja(m,y){Nr[m]={Ma:y}}function Ar(m,y){var N=y==="/";if(N&&$t)throw new Ne(10);if(!N&&y){var C=Mn(y,{nb:!1});if(y=C.path,C=C.node,C.ab)throw new Ne(10);if(!mn(C.mode))throw new Ne(54)}y={type:m,Wb:{},zb:y,Ib:[]},m=m.Xa(y),m.Xa=y,y.root=m,N?$t=m:C&&(C.ab=y,C.Xa&&C.Xa.Ib.push(y))}function os(m,y,N){var C=Mn(m,{parent:!0}).node;if(m=As(m),!m)throw new Ne(28);if(m==="."||m==="..")throw new Ne(20);var F=wr(C,m);if(F)throw new Ne(F);if(!C.La.hb)throw new Ne(63);return C.La.hb(C,m,y,N)}function Da(m,y=438){return os(m,y&4095|32768,0)}function un(m,y=511){return os(m,y&1023|16384,0)}function Un(m,y,N){typeof N>"u"&&(N=y,y=438),os(m,y|8192,N)}function Vn(m,y){if(!On(m))throw new Ne(44);var N=Mn(y,{parent:!0}).node;if(!N)throw new Ne(44);y=As(y);var C=wr(N,y);if(C)throw new Ne(C);if(!N.La.symlink)throw new Ne(63);N.La.symlink(N,y,m)}function js(m){var y=Mn(m,{parent:!0}).node;m=As(m);var N=rs(y,m),C=_s(y,m,!0);if(C)throw new Ne(C);if(!y.La.rmdir)throw new Ne(63);if(N.ab)throw new Ne(10);y.La.rmdir(y,m),xr(N)}function tn(m){var y=Mn(m,{parent:!0}).node;if(!y)throw new Ne(44);m=As(m);var N=rs(y,m),C=_s(y,m,!1);if(C)throw new Ne(C);if(!y.La.unlink)throw new Ne(63);if(N.ab)throw new Ne(10);y.La.unlink(y,m),xr(N)}function pi(m,y){return m=Mn(m,{$a:!y}).node,Kn(m.La.Ta)(m)}function La(m,y,N,C){wi(m,y,{mode:N&4095|y.mode&-4096,ctime:Date.now(),Fb:C})}function ls(m,y){m=typeof m=="string"?Mn(m,{$a:!0}).node:m,La(null,m,y)}function Ds(m,y,N){if(mn(y.mode))throw new Ne(31);if((y.mode&61440)!==32768)throw new Ne(28);var C=Qn(y,"w");if(C)throw new Ne(C);wi(m,y,{size:N,timestamp:Date.now()})}function $s(m,y,N=438){if(m==="")throw new Ne(44);if(typeof y=="string"){var C={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[y];if(typeof C>"u")throw Error(`Unknown file open mode: ${y}`);y=C}if(N=y&64?N&4095|32768:0,typeof m=="object")C=m;else{var F=m.endsWith("/");m=Mn(m,{$a:!(y&131072),Jb:!0}),C=m.node,m=m.path}var J=!1;if(y&64)if(C){if(y&128)throw new Ne(20)}else{if(F)throw new Ne(31);C=os(m,N|511,0),J=!0}if(!C)throw new Ne(44);if((C.mode&61440)===8192&&(y&=-513),y&65536&&!mn(C.mode))throw new Ne(54);if(!J&&(F=C?(C.mode&61440)===40960?32:mn(C.mode)&&(xi(y)!=="r"||y&576)?31:Qn(C,xi(y)):44))throw new Ne(F);return y&512&&!J&&(F=C,F=typeof F=="string"?Mn(F,{$a:!0}).node:F,Ds(null,F,0)),y&=-131713,F=cn({node:C,path:ps(C),flags:y,seekable:!0,position:0,Ma:C.Ma,Lb:[],error:!1}),F.Ma.open&&F.Ma.open(F),J&&ls(C,N&511),!_.logReadFiles||y&1||m in Is||(Is[m]=1),F}function Yi(m){if(m.fd===null)throw new Ne(8);m.ob&&(m.ob=null);try{m.Ma.close&&m.Ma.close(m)}catch(y){throw y}finally{Cs[m.fd]=null}m.fd=null}function Oa(m,y,N){if(m.fd===null)throw new Ne(8);if(!m.seekable||!m.Ma.Va)throw new Ne(70);if(N!=0&&N!=1&&N!=2)throw new Ne(28);m.position=m.Ma.Va(m,y,N),m.Lb=[]}function Rr(m,y,N,C,F){if(0>C||0>F)throw new Ne(28);if(m.fd===null)throw new Ne(8);if((m.flags&2097155)===1)throw new Ne(8);if(mn(m.node.mode))throw new Ne(31);if(!m.Ma.read)throw new Ne(28);var J=typeof F<"u";if(!J)F=m.position;else if(!m.seekable)throw new Ne(70);return y=m.Ma.read(m,y,N,C,F),J||(m.position+=y),y}function Qi(m,y,N,C,F){if(0>C||0>F)throw new Ne(28);if(m.fd===null)throw new Ne(8);if((m.flags&2097155)===0)throw new Ne(8);if(mn(m.node.mode))throw new Ne(31);if(!m.Ma.write)throw new Ne(28);m.seekable&&m.flags&1024&&Oa(m,0,2);var J=typeof F<"u";if(!J)F=m.position;else if(!m.seekable)throw new Ne(70);return y=m.Ma.write(m,y,N,C,F,void 0),J||(m.position+=y),y}function cs(m){var y,N=$s(m,N||0);m=pi(m).size;var C=new Uint8Array(m);return Rr(N,C,0,m,0),y=C,Yi(N),y}function Lt(m,y,N){m=Wt("/dev/"+m);var C=as(!!y,!!N);Lt.yb??(Lt.yb=64);var F=Lt.yb++<<8|0;ja(F,{open(J){J.seekable=!1},close(){N?.buffer?.length&&N(10)},read(J,ce,De,Fe){for(var Ke=0,xt=0;xt<Fe;xt++){try{var nn=y()}catch{throw new Ne(29)}if(nn===void 0&&Ke===0)throw new Ne(6);if(nn==null)break;Ke++,ce[De+xt]=nn}return Ke&&(J.node.atime=Date.now()),Ke},write(J,ce,De,Fe){for(var Ke=0;Ke<Fe;Ke++)try{N(ce[De+Ke])}catch{throw new Ne(29)}return Fe&&(J.node.mtime=J.node.ctime=Date.now()),Ke}}),Un(m,C,F)}var at={};function Wn(m,y,N){if(y.charAt(0)==="/")return y;if(m=m===-100?"/":mt(m).path,y.length==0){if(!N)throw new Ne(44);return m}return m+"/"+y}function Ai(m,y){j[m>>2]=y.dev,j[m+4>>2]=y.mode,Ae[m+8>>2]=y.nlink,j[m+12>>2]=y.uid,j[m+16>>2]=y.gid,j[m+20>>2]=y.rdev,Y[m+24>>3]=BigInt(y.size),j[m+32>>2]=4096,j[m+36>>2]=y.blocks;var N=y.atime.getTime(),C=y.mtime.getTime(),F=y.ctime.getTime();return Y[m+40>>3]=BigInt(Math.floor(N/1e3)),Ae[m+48>>2]=N%1e3*1e6,Y[m+56>>3]=BigInt(Math.floor(C/1e3)),Ae[m+64>>2]=C%1e3*1e6,Y[m+72>>3]=BigInt(Math.floor(F/1e3)),Ae[m+80>>2]=F%1e3*1e6,Y[m+88>>3]=BigInt(y.ino),0}var Tt=void 0,Ys=()=>{var m=j[+Tt>>2];return Tt+=4,m},gs=0,Ki=[0,31,60,91,121,152,182,213,244,274,305,335],Jn=[0,31,59,90,120,151,181,212,243,273,304,334],Qs={},Cr=m=>{L=m,zs||0<gs||(_.onExit?.(m),R=!0),U(m,new le(m))},Ir=m=>{if(!R)try{if(m(),!(zs||0<gs))try{L=m=L,Cr(m)}catch(y){y instanceof le||y=="unwind"||U(1,y)}}catch(y){y instanceof le||y=="unwind"||U(1,y)}},Ks={},kr=()=>{if(!Ws){var m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:H||"./this.program"},y;for(y in Ks)Ks[y]===void 0?delete m[y]:m[y]=Ks[y];var N=[];for(y in m)N.push(`${y}=${m[y]}`);Ws=N}return Ws},Ws,An=m=>{var y=fi(m)+1,N=pn(y);return is(m,M,N,y),N},vo=(m,y,N,C)=>{var F={string:Ke=>{var xt=0;return Ke!=null&&Ke!==0&&(xt=An(Ke)),xt},array:Ke=>{var xt=pn(Ke.length);return q.set(Ke,xt),xt}};m=_["_"+m];var J=[],ce=0;if(C)for(var De=0;De<C.length;De++){var Fe=F[N[De]];Fe?(ce===0&&(ce=Cn()),J[De]=Fe(C[De])):J[De]=C[De]}return N=m(...J),N=(function(Ke){return ce!==0&&Es(ce),y==="string"?Ke?jt(M,Ke):"":y==="boolean"?!!Ke:Ke})(N)},Ri=0,Ci=(m,y)=>(y=y==1?pn(m.length):Js(m.length),m.subarray||m.slice||(m=new Uint8Array(m)),M.set(m,y),y),ys,Ma=[],Rn,us=m=>{ys.delete(Rn.get(m)),Rn.set(m,null),Ma.push(m)},qn=(m,y)=>{if(!ys){ys=new WeakMap;var N=Rn.length;if(ys)for(var C=0;C<0+N;C++){var F=Rn.get(C);F&&ys.set(F,C)}}if(N=ys.get(m)||0)return N;if(Ma.length)N=Ma.pop();else{try{Rn.grow(1)}catch(Fe){throw Fe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Fe}N=Rn.length-1}try{Rn.set(N,m)}catch(Fe){if(!(Fe instanceof TypeError))throw Fe;if(typeof WebAssembly.Function=="function"){var J=WebAssembly.Function;C={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},F={parameters:[],results:y[0]=="v"?[]:[C[y[0]]]};for(var ce=1;ce<y.length;++ce)F.parameters.push(C[y[ce]]);y=new J(F,m)}else{C=[1],F=y.slice(0,1),y=y.slice(1),ce={i:127,p:127,j:126,f:125,d:124,e:111},C.push(96);var De=y.length;128>De?C.push(De):C.push(De%128|128,De>>7);for(J of y)C.push(ce[J]);F=="v"?C.push(0):C.push(1,ce[F]),y=[0,97,115,109,1,0,0,0,1],J=C.length,128>J?y.push(J):y.push(J%128|128,J>>7),y.push(...C),y.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),y=new WebAssembly.Module(new Uint8Array(y)),y=new WebAssembly.Instance(y,{e:{f:m}}).exports.f}Rn.set(N,y)}return ys.set(m,N),N};Sn=Array(4096),Ar(Be,"/"),un("/tmp"),un("/home"),un("/home/web_user"),(function(){un("/dev"),ja(259,{read:()=>0,write:(C,F,J,ce)=>ce,Va:()=>0}),Un("/dev/null",259),Sr(1280,yo),Sr(1536,Rs),Un("/dev/tty",1280),Un("/dev/tty1",1536);var m=new Uint8Array(1024),y=0,N=()=>(y===0&&(br(m),y=m.byteLength),m[--y]);Lt("random",N),Lt("urandom",N),un("/dev/shm"),un("/dev/shm/tmp")})(),(function(){un("/proc");var m=un("/proc/self");un("/proc/self/fd"),Ar({Xa(){var y=ka(m,"fd",16895,73);return y.Ma={Va:Be.Ma.Va},y.La={lookup(N,C){N=+C;var F=mt(N);return N={parent:null,Xa:{zb:"fake"},La:{readlink:()=>F.path},id:N+1},N.parent=N},readdir(){return Array.from(Cs.entries()).filter(([,N])=>N).map(([N])=>N.toString())}},y}},"/proc/self/fd")})(),Be.vb=new Ne(44),Be.vb.stack="<generic error, no stack>";var jr={a:(m,y,N,C)=>de(`Assertion failed: ${m?jt(M,m):""}, at: `+[y?y?jt(M,y):"":"unknown filename",N,C?C?jt(M,C):"":"unknown function"]),i:function(m,y){try{return m=m?jt(M,m):"",ls(m,y),0}catch(N){if(typeof at>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},L:function(m,y,N){try{if(y=y?jt(M,y):"",y=Wn(m,y),N&-8)return-28;var C=Mn(y,{$a:!0}).node;return C?(m="",N&4&&(m+="r"),N&2&&(m+="w"),N&1&&(m+="x"),m&&Qn(C,m)?-2:0):-44}catch(F){if(typeof at>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},j:function(m,y){try{var N=mt(m);return La(N,N.node,y,!1),0}catch(C){if(typeof at>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},h:function(m){try{var y=mt(m);return wi(y,y.node,{timestamp:Date.now(),Fb:!1}),0}catch(N){if(typeof at>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},b:function(m,y,N){Tt=N;try{var C=mt(m);switch(y){case 0:var F=Ys();if(0>F)break;for(;Cs[F];)F++;return Xs(C,F).fd;case 1:case 2:return 0;case 3:return C.flags;case 4:return F=Ys(),C.flags|=F,0;case 12:return F=Ys(),O[F+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(J){if(typeof at>"u"||J.name!=="ErrnoError")throw J;return-J.Pa}},g:function(m,y){try{var N=mt(m),C=N.node,F=N.Ma.Ta;m=F?N:C,F??=C.La.Ta,Kn(F);var J=F(m);return Ai(y,J)}catch(ce){if(typeof at>"u"||ce.name!=="ErrnoError")throw ce;return-ce.Pa}},H:function(m,y){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var N=mt(m);if(0>y||(N.flags&2097155)===0)throw new Ne(28);return Ds(N,N.node,y),0}catch(C){if(typeof at>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},G:function(m,y){try{if(y===0)return-28;var N=fi("/")+1;return y<N?-68:(is("/",M,m,y),N)}catch(C){if(typeof at>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},K:function(m,y){try{return m=m?jt(M,m):"",Ai(y,pi(m,!0))}catch(N){if(typeof at>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},C:function(m,y,N){try{return y=y?jt(M,y):"",y=Wn(m,y),un(y,N),0}catch(C){if(typeof at>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},J:function(m,y,N,C){try{y=y?jt(M,y):"";var F=C&256;return y=Wn(m,y,C&4096),Ai(N,F?pi(y,!0):pi(y))}catch(J){if(typeof at>"u"||J.name!=="ErrnoError")throw J;return-J.Pa}},x:function(m,y,N,C){Tt=C;try{y=y?jt(M,y):"",y=Wn(m,y);var F=C?Ys():0;return $s(y,N,F).fd}catch(J){if(typeof at>"u"||J.name!=="ErrnoError")throw J;return-J.Pa}},v:function(m,y,N,C){try{if(y=y?jt(M,y):"",y=Wn(m,y),0>=C)return-28;var F=Mn(y).node;if(!F)throw new Ne(44);if(!F.La.readlink)throw new Ne(28);var J=F.La.readlink(F),ce=Math.min(C,fi(J)),De=q[N+ce];return is(J,M,N,C+1),q[N+ce]=De,ce}catch(Fe){if(typeof at>"u"||Fe.name!=="ErrnoError")throw Fe;return-Fe.Pa}},u:function(m){try{return m=m?jt(M,m):"",js(m),0}catch(y){if(typeof at>"u"||y.name!=="ErrnoError")throw y;return-y.Pa}},f:function(m,y){try{return m=m?jt(M,m):"",Ai(y,pi(m))}catch(N){if(typeof at>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},r:function(m,y,N){try{return y=y?jt(M,y):"",y=Wn(m,y),N===0?tn(y):N===512?js(y):de("Invalid flags passed to unlinkat"),0}catch(C){if(typeof at>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},q:function(m,y,N){try{y=y?jt(M,y):"",y=Wn(m,y,!0);var C=Date.now(),F,J;if(N){var ce=Ae[N>>2]+4294967296*j[N+4>>2],De=j[N+8>>2];De==1073741823?F=C:De==1073741822?F=null:F=1e3*ce+De/1e6,N+=16,ce=Ae[N>>2]+4294967296*j[N+4>>2],De=j[N+8>>2],De==1073741823?J=C:De==1073741822?J=null:J=1e3*ce+De/1e6}else J=F=C;if((J??F)!==null){m=F;var Fe=Mn(y,{$a:!0}).node;Kn(Fe.La.Ua)(Fe,{atime:m,mtime:J})}return 0}catch(Ke){if(typeof at>"u"||Ke.name!=="ErrnoError")throw Ke;return-Ke.Pa}},m:()=>de(""),l:()=>{zs=!1,gs=0},A:function(m,y){m=-9007199254740992>m||9007199254740992<m?NaN:Number(m),m=new Date(1e3*m),j[y>>2]=m.getSeconds(),j[y+4>>2]=m.getMinutes(),j[y+8>>2]=m.getHours(),j[y+12>>2]=m.getDate(),j[y+16>>2]=m.getMonth(),j[y+20>>2]=m.getFullYear()-1900,j[y+24>>2]=m.getDay();var N=m.getFullYear();j[y+28>>2]=(N%4!==0||N%100===0&&N%400!==0?Jn:Ki)[m.getMonth()]+m.getDate()-1|0,j[y+36>>2]=-(60*m.getTimezoneOffset()),N=new Date(m.getFullYear(),6,1).getTimezoneOffset();var C=new Date(m.getFullYear(),0,1).getTimezoneOffset();j[y+32>>2]=(N!=C&&m.getTimezoneOffset()==Math.min(C,N))|0},y:function(m,y,N,C,F,J,ce){F=-9007199254740992>F||9007199254740992<F?NaN:Number(F);try{if(isNaN(F))return 61;var De=mt(C);if((y&2)!==0&&(N&2)===0&&(De.flags&2097155)!==2)throw new Ne(2);if((De.flags&2097155)===1)throw new Ne(2);if(!De.Ma.ib)throw new Ne(43);if(!m)throw new Ne(28);var Fe=De.Ma.ib(De,m,F,y,N),Ke=Fe.Kb;return j[J>>2]=Fe.Ab,Ae[ce>>2]=Ke,0}catch(xt){if(typeof at>"u"||xt.name!=="ErrnoError")throw xt;return-xt.Pa}},z:function(m,y,N,C,F,J){J=-9007199254740992>J||9007199254740992<J?NaN:Number(J);try{var ce=mt(F);if(N&2){if(N=J,(ce.node.mode&61440)!==32768)throw new Ne(43);if(!(C&2)){var De=M.slice(m,m+y);ce.Ma.jb&&ce.Ma.jb(ce,De,N,y,C)}}}catch(Fe){if(typeof at>"u"||Fe.name!=="ErrnoError")throw Fe;return-Fe.Pa}},n:(m,y)=>{if(Qs[m]&&(clearTimeout(Qs[m].id),delete Qs[m]),!y)return 0;var N=setTimeout(()=>{delete Qs[m],Ir(()=>Wi(m,performance.now()))},y);return Qs[m]={id:N,Xb:y},0},B:(m,y,N,C)=>{var F=new Date().getFullYear(),J=new Date(F,0,1).getTimezoneOffset();F=new Date(F,6,1).getTimezoneOffset(),Ae[m>>2]=60*Math.max(J,F),j[y>>2]=+(J!=F),y=ce=>{var De=Math.abs(ce);return`UTC${0<=ce?"-":"+"}${String(Math.floor(De/60)).padStart(2,"0")}${String(De%60).padStart(2,"0")}`},m=y(J),y=y(F),F<J?(is(m,M,N,17),is(y,M,C,17)):(is(m,M,C,17),is(y,M,N,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:m=>{var y=M.length;if(m>>>=0,2147483648<m)return!1;for(var N=1;4>=N;N*=2){var C=y*(1+.2/N);C=Math.min(C,m+100663296);e:{C=(Math.min(2147483648,65536*Math.ceil(Math.max(m,C)/65536))-D.buffer.byteLength+65535)/65536|0;try{D.grow(C),$e();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},E:(m,y)=>{var N=0;return kr().forEach((C,F)=>{var J=y+N;for(F=Ae[m+4*F>>2]=J,J=0;J<C.length;++J)q[F++]=C.charCodeAt(J);q[F]=0,N+=C.length+1}),0},F:(m,y)=>{var N=kr();Ae[m>>2]=N.length;var C=0;return N.forEach(F=>C+=F.length+1),Ae[y>>2]=C,0},e:function(m){try{var y=mt(m);return Yi(y),0}catch(N){if(typeof at>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},p:function(m,y){try{var N=mt(m);return q[y]=N.tty?2:mn(N.mode)?3:(N.mode&61440)===40960?7:4,O[y+2>>1]=0,Y[y+8>>3]=BigInt(0),Y[y+16>>3]=BigInt(0),0}catch(C){if(typeof at>"u"||C.name!=="ErrnoError")throw C;return C.Pa}},w:function(m,y,N,C){try{e:{var F=mt(m);m=y;for(var J,ce=y=0;ce<N;ce++){var De=Ae[m>>2],Fe=Ae[m+4>>2];m+=8;var Ke=Rr(F,q,De,Fe,J);if(0>Ke){var xt=-1;break e}if(y+=Ke,Ke<Fe)break;typeof J<"u"&&(J+=Ke)}xt=y}return Ae[C>>2]=xt,0}catch(nn){if(typeof at>"u"||nn.name!=="ErrnoError")throw nn;return nn.Pa}},D:function(m,y,N,C){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var F=mt(m);return Oa(F,y,N),Y[C>>3]=BigInt(F.position),F.ob&&y===0&&N===0&&(F.ob=null),0}catch(J){if(typeof at>"u"||J.name!=="ErrnoError")throw J;return J.Pa}},I:function(m){try{var y=mt(m);return y.Ma?.fsync?y.Ma.fsync(y):0}catch(N){if(typeof at>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},t:function(m,y,N,C){try{e:{var F=mt(m);m=y;for(var J,ce=y=0;ce<N;ce++){var De=Ae[m>>2],Fe=Ae[m+4>>2];m+=8;var Ke=Qi(F,q,De,Fe,J);if(0>Ke){var xt=-1;break e}if(y+=Ke,Ke<Fe)break;typeof J<"u"&&(J+=Ke)}xt=y}return Ae[C>>2]=xt,0}catch(nn){if(typeof at>"u"||nn.name!=="ErrnoError")throw nn;return nn.Pa}},k:Cr},Ce;(async function(){function m(N){return Ce=N.exports,D=Ce.M,$e(),Rn=Ce.O,et--,_.monitorRunDependencies?.(et),et==0&&X&&(N=X,X=null,N()),Ce}et++,_.monitorRunDependencies?.(et);var y={a:jr};return _.instantiateWasm?new Promise(N=>{_.instantiateWasm(y,(C,F)=>{m(C),N(C.exports)})}):(oe??=_.locateFile?_.locateFile("sql-wasm.wasm",V):V+"sql-wasm.wasm",m((await ze(y)).instance))})(),_._sqlite3_free=m=>(_._sqlite3_free=Ce.P)(m),_._sqlite3_value_text=m=>(_._sqlite3_value_text=Ce.Q)(m),_._sqlite3_prepare_v2=(m,y,N,C,F)=>(_._sqlite3_prepare_v2=Ce.R)(m,y,N,C,F),_._sqlite3_step=m=>(_._sqlite3_step=Ce.S)(m),_._sqlite3_reset=m=>(_._sqlite3_reset=Ce.T)(m),_._sqlite3_exec=(m,y,N,C,F)=>(_._sqlite3_exec=Ce.U)(m,y,N,C,F),_._sqlite3_finalize=m=>(_._sqlite3_finalize=Ce.V)(m),_._sqlite3_column_name=(m,y)=>(_._sqlite3_column_name=Ce.W)(m,y),_._sqlite3_column_text=(m,y)=>(_._sqlite3_column_text=Ce.X)(m,y),_._sqlite3_column_type=(m,y)=>(_._sqlite3_column_type=Ce.Y)(m,y),_._sqlite3_errmsg=m=>(_._sqlite3_errmsg=Ce.Z)(m),_._sqlite3_clear_bindings=m=>(_._sqlite3_clear_bindings=Ce._)(m),_._sqlite3_value_blob=m=>(_._sqlite3_value_blob=Ce.$)(m),_._sqlite3_value_bytes=m=>(_._sqlite3_value_bytes=Ce.aa)(m),_._sqlite3_value_double=m=>(_._sqlite3_value_double=Ce.ba)(m),_._sqlite3_value_int=m=>(_._sqlite3_value_int=Ce.ca)(m),_._sqlite3_value_type=m=>(_._sqlite3_value_type=Ce.da)(m),_._sqlite3_result_blob=(m,y,N,C)=>(_._sqlite3_result_blob=Ce.ea)(m,y,N,C),_._sqlite3_result_double=(m,y)=>(_._sqlite3_result_double=Ce.fa)(m,y),_._sqlite3_result_error=(m,y,N)=>(_._sqlite3_result_error=Ce.ga)(m,y,N),_._sqlite3_result_int=(m,y)=>(_._sqlite3_result_int=Ce.ha)(m,y),_._sqlite3_result_int64=(m,y)=>(_._sqlite3_result_int64=Ce.ia)(m,y),_._sqlite3_result_null=m=>(_._sqlite3_result_null=Ce.ja)(m),_._sqlite3_result_text=(m,y,N,C)=>(_._sqlite3_result_text=Ce.ka)(m,y,N,C),_._sqlite3_aggregate_context=(m,y)=>(_._sqlite3_aggregate_context=Ce.la)(m,y),_._sqlite3_column_count=m=>(_._sqlite3_column_count=Ce.ma)(m),_._sqlite3_data_count=m=>(_._sqlite3_data_count=Ce.na)(m),_._sqlite3_column_blob=(m,y)=>(_._sqlite3_column_blob=Ce.oa)(m,y),_._sqlite3_column_bytes=(m,y)=>(_._sqlite3_column_bytes=Ce.pa)(m,y),_._sqlite3_column_double=(m,y)=>(_._sqlite3_column_double=Ce.qa)(m,y),_._sqlite3_bind_blob=(m,y,N,C,F)=>(_._sqlite3_bind_blob=Ce.ra)(m,y,N,C,F),_._sqlite3_bind_double=(m,y,N)=>(_._sqlite3_bind_double=Ce.sa)(m,y,N),_._sqlite3_bind_int=(m,y,N)=>(_._sqlite3_bind_int=Ce.ta)(m,y,N),_._sqlite3_bind_text=(m,y,N,C,F)=>(_._sqlite3_bind_text=Ce.ua)(m,y,N,C,F),_._sqlite3_bind_parameter_index=(m,y)=>(_._sqlite3_bind_parameter_index=Ce.va)(m,y),_._sqlite3_sql=m=>(_._sqlite3_sql=Ce.wa)(m),_._sqlite3_normalized_sql=m=>(_._sqlite3_normalized_sql=Ce.xa)(m),_._sqlite3_changes=m=>(_._sqlite3_changes=Ce.ya)(m),_._sqlite3_close_v2=m=>(_._sqlite3_close_v2=Ce.za)(m),_._sqlite3_create_function_v2=(m,y,N,C,F,J,ce,De,Fe)=>(_._sqlite3_create_function_v2=Ce.Aa)(m,y,N,C,F,J,ce,De,Fe),_._sqlite3_update_hook=(m,y,N)=>(_._sqlite3_update_hook=Ce.Ba)(m,y,N),_._sqlite3_open=(m,y)=>(_._sqlite3_open=Ce.Ca)(m,y);var Js=_._malloc=m=>(Js=_._malloc=Ce.Da)(m),ds=_._free=m=>(ds=_._free=Ce.Ea)(m);_._RegisterExtensionFunctions=m=>(_._RegisterExtensionFunctions=Ce.Fa)(m);var Ii=(m,y)=>(Ii=Ce.Ga)(m,y),Wi=(m,y)=>(Wi=Ce.Ha)(m,y),Es=m=>(Es=Ce.Ia)(m),pn=m=>(pn=Ce.Ja)(m),Cn=()=>(Cn=Ce.Ka)();_.stackSave=()=>Cn(),_.stackRestore=m=>Es(m),_.stackAlloc=m=>pn(m),_.cwrap=(m,y,N,C)=>{var F=!N||N.every(J=>J==="number"||J==="boolean");return y!=="string"&&F&&!C?_["_"+m]:(...J)=>vo(m,y,N,J)},_.addFunction=qn,_.removeFunction=us,_.UTF8ToString=$i,_.ALLOC_NORMAL=Ri,_.allocate=Ci,_.allocateUTF8OnStack=An;function _i(){function m(){if(_.calledRun=!0,!R){if(!_.noFSInit&&!Ni){var y,N;Ni=!0,C??=_.stdin,y??=_.stdout,N??=_.stderr,C?Lt("stdin",C):Vn("/dev/tty","/dev/stdin"),y?Lt("stdout",null,y):Vn("/dev/tty","/dev/stdout"),N?Lt("stderr",null,N):Vn("/dev/tty1","/dev/stderr"),$s("/dev/stdin",0),$s("/dev/stdout",1),$s("/dev/stderr",1)}if(Ce.N(),en=!1,_.onRuntimeInitialized?.(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var C=_.postRun.shift();nt.unshift(C)}Le(nt)}}if(0<et)X=_i;else{if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)ln();Le(kt),0<et?X=_i:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),m()},1)):m()}}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return _i(),g}),n)};s.exports=a,s.exports.default=a})(lm)),lm.exports}var PN=BN();const tb=wN(PN),FN=`
CREATE TABLE IF NOT EXISTS domains (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  color TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  domain_id INTEGER NOT NULL REFERENCES domains(id),
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS quests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  goal_id INTEGER NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS steps (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  quest_id INTEGER NOT NULL REFERENCES quests(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'pending',
  sort_order INTEGER NOT NULL DEFAULT 0,
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS buff_definitions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  type TEXT NOT NULL DEFAULT 'buff',
  icon TEXT NOT NULL DEFAULT '',
  duration_hours INTEGER NOT NULL DEFAULT 24,
  stat_effects TEXT NOT NULL DEFAULT '{}',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS buff_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  definition_id INTEGER NOT NULL REFERENCES buff_definitions(id) ON DELETE CASCADE,
  activated_at TEXT NOT NULL DEFAULT (datetime('now')),
  expires_at TEXT NOT NULL,
  is_active INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS character (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  name TEXT NOT NULL DEFAULT 'Adventurer',
  total_xp INTEGER NOT NULL DEFAULT 0,
  level INTEGER NOT NULL DEFAULT 1,
  title TEXT NOT NULL DEFAULT 'Novice',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS xp_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount INTEGER NOT NULL,
  reason TEXT NOT NULL,
  source_type TEXT NOT NULL,
  source_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS planner_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  date TEXT NOT NULL,
  start_time TEXT,
  end_time TEXT,
  quest_id INTEGER REFERENCES quests(id) ON DELETE SET NULL,
  step_id INTEGER REFERENCES steps(id) ON DELETE SET NULL,
  is_completed INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);
`,GN=`
INSERT OR IGNORE INTO domains (id, name, icon, color) VALUES
  (1, 'Health', '', '#e74c3c'),
  (2, 'Career', '', '#c8a84e'),
  (3, 'Learning', '', '#3498db'),
  (4, 'Social', '', '#e67e22'),
  (5, 'Finance', '', '#2ecc71'),
  (6, 'Creative', '', '#9b59b6'),
  (7, 'Spiritual', '', '#1abc9c'),
  (8, 'Home', '', '#95a5a6');
`,HN=`
INSERT OR IGNORE INTO character (id, name, total_xp, level, title)
VALUES (1, 'Adventurer', 0, 1, 'Novice');
`,zN="goal-game-db",El="database",nb="main";let ms=null;function sb(){return new Promise((s,e)=>{const n=indexedDB.open(zN,1);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(El)||a.createObjectStore(El)},n.onsuccess=()=>s(n.result),n.onerror=()=>e(n.error)})}async function XN(){const s=await sb();return new Promise((e,n)=>{const a=s.transaction(El,"readonly"),u=a.objectStore(El).get(nb);u.onsuccess=()=>e(u.result??null),u.onerror=()=>n(u.error),a.oncomplete=()=>s.close()})}async function $N(s){const e=await sb();return new Promise((n,a)=>{const o=e.transaction(El,"readwrite");o.objectStore(El).put(s,nb),o.oncomplete=()=>{e.close(),n()},o.onerror=()=>a(o.error)})}async function YN(){if(ms)return ms;const s=await tb({locateFile:()=>"/goal-game/sql-wasm.wasm"}),e=await XN();return e?ms=new s.Database(e):ms=new s.Database,ms.run(FN),ms.run(GN),ms.run(HN),await Te(),ms}async function Te(){if(!ms)return;const s=ms.export();await $N(s)}function ee(){if(!ms)throw new Error("Database not initialized. Call getDatabase() first.");return ms}async function pp(){return ee().export()}async function ib(s){const e=await tb({locateFile:()=>"/goal-game/sql-wasm.wasm"});ms&&ms.close(),ms=new e.Database(s),await Te()}const cm="migration_feb2026_billing_v1";async function QN(){if(localStorage.getItem(cm))return!1;const s=ee(),e=s.exec("SELECT id FROM goals WHERE title = 'Bill 190 Hours - February 2026'");if(e.length>0&&e[0].values.length>0)return localStorage.setItem(cm,"true"),!1;s.run(`
    INSERT INTO goals (domain_id, title, description, status)
    VALUES (2, 'Bill 190 Hours - February 2026', 'Target: 8 hours on weekdays, ~4.5 hours on weekends. Started with 8 hours billed.', 'active')
  `);const a=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0],o=[{title:"Week 1: Feb 3-9",description:"First partial week. Target: ~41 hours (4 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-03",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-04",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-05",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-06",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-07",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-08",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 2: Feb 9-15",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-09",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-10",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-11",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-12",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-13",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-14",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-15",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 3: Feb 16-22",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-16",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-17",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-18",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-19",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-20",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-21",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-22",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 4: Feb 23-28",description:"Final partial week. Target: ~44.5 hours (5 weekdays  8 + 1 weekend day  4.5)",days:[{date:"2026-02-23",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-24",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-25",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-26",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-27",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-28",day:"Sat",hours:4.5,isWeekend:!0}]}];for(const u of o){s.run(`
      INSERT INTO quests (goal_id, title, description, priority, status)
      VALUES (?, ?, ?, 'high', 'active')
    `,[a,u.title,u.description]);const g=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(let E=0;E<u.days.length;E++){const _=u.days[E],S=`${_.day} ${_.date.slice(5)}: Bill ${_.hours} hours`;s.run(`
        INSERT INTO steps (quest_id, title, priority, status, sort_order)
        VALUES (?, ?, ?, 'pending', ?)
      `,[g,S,_.isWeekend?"low":"normal",E])}}return await Te(),localStorage.setItem(cm,"true"),!0}const HE="notifications_migration_v1";async function KN(){if(localStorage.getItem(HE))return;const s=ee();try{(s.exec("PRAGMA table_info(planner_events)")[0]?.values.map(a=>a[1])||[]).includes("reminder_minutes")||s.run("ALTER TABLE planner_events ADD COLUMN reminder_minutes INTEGER DEFAULT NULL"),s.run(`
      CREATE TABLE IF NOT EXISTS notification_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        enabled INTEGER NOT NULL DEFAULT 0,
        default_reminder_minutes INTEGER NOT NULL DEFAULT 15,
        fcm_token TEXT,
        device_id TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await Te(),localStorage.setItem(HE,"true"),console.log("Notifications migration completed successfully")}catch(e){throw console.error("Failed to run notifications migration:",e),e}}const zE="body_fat_goal_seed_v4";async function WN(){if(localStorage.getItem(zE))return;const s=ee();try{const e=s.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(e.length&&e[0].values.length){const _=e[0].values[0][0],S=s.exec("SELECT id FROM quests WHERE goal_id = ?",[_]);if(S.length)for(const x of S[0].values)s.run("DELETE FROM steps WHERE quest_id = ?",[x[0]]);s.run("DELETE FROM quests WHERE goal_id = ?",[_]),s.run("DELETE FROM goals WHERE id = ?",[_])}s.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[1,"Achieve 12% Body Fat","12-week transformation program starting Feb 4, 2026. From 18-19% to 12% body fat through consistent training and nutrition."]);const a=s.exec("SELECT last_insert_rowid()")[0].values[0][0],o=new Date(2026,1,4,12,0,0),u=[{title:"Week 1 - Build Foundation",desc:"Establish daily habits and set your baseline."},{title:"Week 2 - Gain Momentum",desc:"Lock in the routine. Consistency is key."},{title:"Week 3 - Stay Disciplined",desc:"Push through early challenges. Trust the process."},{title:"Week 4 - Complete Month 1",desc:"First month done! Take measurements and assess progress."},{title:"Week 5 - Intensify",desc:"Increase intensity. Your body is adapting."},{title:"Week 6 - Push Through",desc:"Mental toughness week. No excuses."},{title:"Week 7 - Halfway Point",desc:"You're halfway there! Stay focused."},{title:"Week 8 - Stay Strong",desc:"Month 2 complete. Reassess and adjust if needed."},{title:"Week 9 - Final Month Begins",desc:"Last 4 weeks. Time to lock in."},{title:"Week 10 - Home Stretch",desc:"You can see the finish line. Don't let up."},{title:"Week 11 - Almost There",desc:"One more week after this. Give it everything."},{title:"Week 12 - Finish Strong",desc:"Final week! Complete the transformation."}],h=[{dayName:"Wed",workout:"Light Cardio (20-30 min)",isGym:!1},{dayName:"Thu",workout:"Gym - Legs (Quads/Hams/Glutes)",isGym:!0},{dayName:"Fri",workout:"Gym - Upper Body",isGym:!0},{dayName:"Sat",workout:"Gym - Lower Body / Deadlifts",isGym:!0},{dayName:"Sun",workout:"Rest + Weekly Check-in",isGym:!1},{dayName:"Mon",workout:"Gym - Push (Chest/Shoulders/Triceps)",isGym:!0},{dayName:"Tue",workout:"Gym - Pull (Back/Biceps)",isGym:!0}],g=_=>{const S=_.getMonth()+1,x=_.getDate();return`${S}/${x}`};let E=new Date(o);for(let _=0;_<u.length;_++){const S=u[_],x=g(E),w=g(new Date(E.getTime()+8640*60*1e3));s.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[a,`${S.title} (${x} - ${w})`,S.desc,"high"]);const H=s.exec("SELECT last_insert_rowid()")[0].values[0][0];let U=1;for(let V=0;V<7;V++){const z=h[V],G=g(E);s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[H,`${z.dayName} ${G}: ${z.workout}`,"normal",U++]),s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[H,`${z.dayName} ${G}: Hit protein goal`,"normal",U++]),E.setDate(E.getDate()+1)}}await Te(),localStorage.setItem(zE,"true"),console.log("Body fat goal seeded successfully (v3 - starting Wed 2/4/2026)")}catch(e){throw console.error("Failed to seed body fat goal:",e),e}}const Ku="body_fat_steps_fix_v2";async function JN(){if(localStorage.getItem(Ku))return;const s=ee();try{const e=s.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(!e.length||!e[0].values.length){console.log("Body fat goal not found, skipping step title fix"),localStorage.setItem(Ku,"true");return}const n=e[0].values[0][0],a=s.exec("SELECT id FROM quests WHERE goal_id = ? ORDER BY id",[n]);if(!a.length){console.log("No quests found for body fat goal"),localStorage.setItem(Ku,"true");return}const o=new Date(2026,1,4,12,0,0);let u=new Date(o);const h=E=>{const _=E.getMonth()+1,S=E.getDate();return`${_}/${S}`};let g=0;for(let E=0;E<a[0].values.length;E++){const _=a[0].values[E][0],S=s.exec("SELECT id, title, sort_order FROM steps WHERE quest_id = ? ORDER BY sort_order",[_]);if(S.length)for(let x=0;x<S[0].values.length;x++){const w=S[0].values[x][0],B=S[0].values[x][1],H=S[0].values[x][2],U=Math.floor((H-1)/2),V=new Date(u);V.setDate(o.getDate()+E*7+U);const z=h(V);let G;B.toLowerCase().includes("protein")||H%2===0?G=`${z}: hit 150g of protein`:G=`${z}: worked out`,s.run("UPDATE steps SET title = ? WHERE id = ?",[G,w]),g++}}await Te(),localStorage.setItem(Ku,"true"),console.log(`Fixed ${g} step titles in body fat goal with dates`)}catch(e){throw console.error("Failed to fix body fat step titles:",e),e}}const XE="miss_step_migration_v1";async function ZN(){if(localStorage.getItem(XE))return;const s=ee();try{const e=s.exec("PRAGMA table_info(steps)");e.length>0&&e[0].values.some(a=>a[1]==="missed_at")||s.run("ALTER TABLE steps ADD COLUMN missed_at TEXT"),s.run(`
      CREATE TABLE IF NOT EXISTS missed_steps_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        step_id INTEGER NOT NULL,
        missed_date TEXT NOT NULL,
        xp_penalty INTEGER DEFAULT 0,
        created_at TEXT DEFAULT (datetime('now')),
        FOREIGN KEY (step_id) REFERENCES steps(id)
      )
    `),s.run(`
      CREATE INDEX IF NOT EXISTS idx_missed_steps_date
      ON missed_steps_log(missed_date)
    `),await Te(),localStorage.setItem(XE,"true"),console.log("Miss step migration completed")}catch(e){throw console.error("Failed to run miss step migration:",e),e}}const $E="daily_quests_migration_v1";async function ex(){if(localStorage.getItem($E))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS daily_quests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        quest_type TEXT NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        target_value INTEGER NOT NULL DEFAULT 1,
        current_value INTEGER NOT NULL DEFAULT 0,
        xp_reward INTEGER NOT NULL DEFAULT 25,
        is_completed INTEGER NOT NULL DEFAULT 0,
        completed_at TEXT
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS daily_quest_bonus (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL UNIQUE,
        claimed_at TEXT NOT NULL
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_daily_quests_date ON daily_quests(date)"),await Te(),localStorage.setItem($E,"true"),console.log("Daily quests migration completed successfully")}catch(e){throw console.error("Failed to run daily quests migration:",e),e}}const YE="streak_migration_v1";async function tx(){if(localStorage.getItem(YE))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS streak_shields (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        quantity INTEGER NOT NULL DEFAULT 0,
        earned_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM streak_shields")[0].values[0][0]===0&&s.run("INSERT INTO streak_shields (quantity) VALUES (3)"),s.run(`
      CREATE TABLE IF NOT EXISTS streak_freezes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        freeze_date TEXT NOT NULL,
        reason TEXT,
        created_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE,
        UNIQUE(buff_definition_id, freeze_date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL UNIQUE,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_milestone_claimed INTEGER NOT NULL DEFAULT 0,
        updated_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_shield_uses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        used_date TEXT NOT NULL,
        streak_saved INTEGER NOT NULL,
        used_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_date ON streak_freezes(freeze_date)"),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_buff ON streak_freezes(buff_definition_id)"),await Te(),localStorage.setItem(YE,"true"),console.log("Streak migration completed successfully")}catch(e){throw console.error("Failed to run streak migration:",e),e}}const QE="weekly_boss_migration_v1";async function nx(){if(localStorage.getItem(QE))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_boss (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        boss_type TEXT NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        max_hp INTEGER NOT NULL,
        current_hp INTEGER NOT NULL,
        is_defeated INTEGER NOT NULL DEFAULT 0,
        defeated_at TEXT,
        xp_reward INTEGER NOT NULL,
        bonus_shields INTEGER NOT NULL DEFAULT 0,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS boss_damage_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        boss_id INTEGER NOT NULL,
        damage_type TEXT NOT NULL,
        damage_amount INTEGER NOT NULL,
        source_description TEXT,
        dealt_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (boss_id) REFERENCES weekly_boss(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_boss_week ON weekly_boss(week_start)"),s.run("CREATE INDEX IF NOT EXISTS idx_boss_damage_log_boss ON boss_damage_log(boss_id)"),await Te(),localStorage.setItem(QE,"true"),console.log("Weekly boss migration completed successfully")}catch(e){throw console.error("Failed to run weekly boss migration:",e),e}}const sx={quests:"Quests & Goals",buffs:"Habits & Buffs",streaks:"Streaks",boss:"Boss Battles",levels:"Leveling",special:"Special"},ix={quests:"",buffs:"",streaks:"",boss:"",levels:"",special:""},ax=[{key:"first_step",name:"First Step",description:"Complete your first step",category:"quests",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"steps_completed",sort_order:1,is_hidden:!1},{key:"ten_steps",name:"On Your Way",description:"Complete 10 steps",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"steps_completed",sort_order:2,is_hidden:!1},{key:"hundred_steps",name:"Journey Master",description:"Complete 100 steps",category:"quests",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"steps_completed",sort_order:3,is_hidden:!1},{key:"first_quest",name:"Quest Beginner",description:"Complete your first quest",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:1,requirement_source:"quests_completed",sort_order:4,is_hidden:!1},{key:"ten_quests",name:"Quest Veteran",description:"Complete 10 quests",category:"quests",icon:"",xp_reward:150,requirement_type:"count",requirement_value:10,requirement_source:"quests_completed",sort_order:5,is_hidden:!1},{key:"first_goal",name:"Goal Getter",description:"Complete your first goal",category:"quests",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"goals_completed",sort_order:6,is_hidden:!1},{key:"first_buff",name:"Habit Former",description:"Activate your first buff",category:"buffs",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"buffs_activated",sort_order:1,is_hidden:!1},{key:"ten_buffs",name:"Habit Builder",description:"Activate 10 buffs",category:"buffs",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"buffs_activated",sort_order:2,is_hidden:!1},{key:"hundred_buffs",name:"Habit Master",description:"Activate 100 buffs",category:"buffs",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"buffs_activated",sort_order:3,is_hidden:!1},{key:"week_streak",name:"Week Warrior",description:"Maintain a 7-day streak",category:"streaks",icon:"",xp_reward:75,requirement_type:"threshold",requirement_value:7,requirement_source:"buff_streak",sort_order:1,is_hidden:!1},{key:"month_streak",name:"Monthly Champion",description:"Maintain a 30-day streak",category:"streaks",icon:"",xp_reward:300,requirement_type:"threshold",requirement_value:30,requirement_source:"buff_streak",sort_order:2,is_hidden:!1},{key:"first_boss",name:"Dragon Slayer",description:"Defeat your first weekly boss",category:"boss",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"bosses_defeated",sort_order:1,is_hidden:!1},{key:"five_bosses",name:"Boss Hunter",description:"Defeat 5 weekly bosses",category:"boss",icon:"",xp_reward:250,requirement_type:"count",requirement_value:5,requirement_source:"bosses_defeated",sort_order:2,is_hidden:!1},{key:"level_5",name:"Rising Star",description:"Reach level 5",category:"levels",icon:"",xp_reward:50,requirement_type:"threshold",requirement_value:5,requirement_source:"character_level",sort_order:1,is_hidden:!1},{key:"level_10",name:"Apprentice",description:"Reach level 10",category:"levels",icon:"",xp_reward:100,requirement_type:"threshold",requirement_value:10,requirement_source:"character_level",sort_order:2,is_hidden:!1},{key:"level_25",name:"Expert",description:"Reach level 25",category:"levels",icon:"",xp_reward:250,requirement_type:"threshold",requirement_value:25,requirement_source:"character_level",sort_order:3,is_hidden:!1},{key:"level_50",name:"Master",description:"Reach level 50",category:"levels",icon:"",xp_reward:500,requirement_type:"threshold",requirement_value:50,requirement_source:"character_level",sort_order:4,is_hidden:!1}],KE="achievement_migration_v1";async function rx(){if(localStorage.getItem(KE))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS achievement_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        category TEXT NOT NULL,
        icon TEXT NOT NULL,
        xp_reward INTEGER NOT NULL DEFAULT 0,
        requirement_type TEXT NOT NULL,
        requirement_value INTEGER NOT NULL,
        requirement_source TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0,
        is_hidden INTEGER NOT NULL DEFAULT 0
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS achievement_unlocks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS achievement_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        current_value INTEGER NOT NULL DEFAULT 0,
        last_updated TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_unlocks_def ON achievement_unlocks(definition_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_progress_def ON achievement_progress(definition_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_category ON achievement_definitions(category)"),s.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_source ON achievement_definitions(requirement_source)");for(const e of ax)s.run(`INSERT OR IGNORE INTO achievement_definitions
         (key, name, description, category, icon, xp_reward, requirement_type, requirement_value, requirement_source, sort_order, is_hidden)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.key,e.name,e.description,e.category,e.icon,e.xp_reward,e.requirement_type,e.requirement_value,e.requirement_source,e.sort_order,e.is_hidden?1:0]);await Te(),localStorage.setItem(KE,"true"),console.log("Achievement migration completed successfully")}catch(e){throw console.error("Failed to run achievement migration:",e),e}}const ab=10,fl=100,Om=20,Mm=5,ox={complete_step:5,activate_buff:3,start_focus_timer:10,deactivate_debuff:15},um={name:"Fatigued",icon:"",effects:{focus:-2,willpower:-2}},dm={name:"Exhausted",icon:"",effects:{stamina:-3,willpower:-3,focus:-3,health:-1}},WE="energy_migration_v1";async function lx(){if(localStorage.getItem(WE))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS energy_state (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        current_energy INTEGER NOT NULL DEFAULT ${fl},
        max_energy INTEGER NOT NULL DEFAULT ${fl},
        last_regen_at TEXT NOT NULL DEFAULT (datetime('now')),
        bonus_energy INTEGER NOT NULL DEFAULT 0
      )
    `),s.exec("SELECT COUNT(*) FROM energy_state")[0].values[0][0]===0&&s.run(`INSERT INTO energy_state (id, current_energy, max_energy) VALUES (1, ${fl}, ${fl})`),s.run(`
      CREATE TABLE IF NOT EXISTS energy_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        amount INTEGER NOT NULL,
        reason TEXT NOT NULL,
        source_type TEXT NOT NULL,
        source_id INTEGER,
        energy_before INTEGER NOT NULL,
        energy_after INTEGER NOT NULL,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS energy_costs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        action_type TEXT NOT NULL UNIQUE,
        base_cost INTEGER NOT NULL,
        description TEXT NOT NULL DEFAULT ''
      )
    `);for(const[n,a]of Object.entries(ox))s.run(`INSERT OR IGNORE INTO energy_costs (action_type, base_cost, description)
         VALUES (?, ?, ?)`,[n,a,`Cost for ${n.replace(/_/g," ")}`]);s.run("CREATE INDEX IF NOT EXISTS idx_energy_log_created ON energy_log(created_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_energy_log_source ON energy_log(source_type)"),await Te(),localStorage.setItem(WE,"true"),console.log("Energy migration completed successfully")}catch(e){throw console.error("Failed to run energy migration:",e),e}}const JE=15,ZE=5,cx=10,Hs={work_duration:25,short_break:5,long_break:15,sessions_before_long_break:4,auto_start_breaks:!1,sound_enabled:!0},ev="focus_timer_migration_v1";async function ux(){if(localStorage.getItem(ev))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS focus_sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        duration_minutes INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        status TEXT NOT NULL DEFAULT 'active',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        linked_step_id INTEGER,
        linked_quest_id INTEGER,
        break_taken INTEGER NOT NULL DEFAULT 0,
        notes TEXT NOT NULL DEFAULT '',
        FOREIGN KEY (linked_step_id) REFERENCES steps(id) ON DELETE SET NULL,
        FOREIGN KEY (linked_quest_id) REFERENCES quests(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS focus_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        work_duration INTEGER NOT NULL DEFAULT ${Hs.work_duration},
        short_break INTEGER NOT NULL DEFAULT ${Hs.short_break},
        long_break INTEGER NOT NULL DEFAULT ${Hs.long_break},
        sessions_before_long_break INTEGER NOT NULL DEFAULT ${Hs.sessions_before_long_break},
        auto_start_breaks INTEGER NOT NULL DEFAULT ${Hs.auto_start_breaks?1:0},
        sound_enabled INTEGER NOT NULL DEFAULT ${Hs.sound_enabled?1:0}
      )
    `),s.exec("SELECT COUNT(*) FROM focus_settings")[0].values[0][0]===0&&s.run(`
        INSERT INTO focus_settings (id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled)
        VALUES (1, ?, ?, ?, ?, ?, ?)
      `,[Hs.work_duration,Hs.short_break,Hs.long_break,Hs.sessions_before_long_break,Hs.auto_start_breaks?1:0,Hs.sound_enabled?1:0]),s.run(`
      CREATE TABLE IF NOT EXISTS focus_stats (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        total_sessions INTEGER NOT NULL DEFAULT 0,
        total_minutes INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        current_streak INTEGER NOT NULL DEFAULT 0,
        today_sessions INTEGER NOT NULL DEFAULT 0,
        today_date TEXT NOT NULL DEFAULT (date('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM focus_stats")[0].values[0][0]===0&&s.run("INSERT INTO focus_stats (id) VALUES (1)"),s.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_started ON focus_sessions(started_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_status ON focus_sessions(status)"),await Te(),localStorage.setItem(ev,"true"),console.log("Focus timer migration completed successfully")}catch(e){throw console.error("Failed to run focus timer migration:",e),e}}const tv="routine_migration_v1";async function dx(){if(localStorage.getItem(tv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS routine_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        type TEXT NOT NULL DEFAULT 'custom',
        description TEXT NOT NULL DEFAULT '',
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_steps (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        linked_buff_id INTEGER,
        sort_order INTEGER NOT NULL DEFAULT 0,
        duration_minutes INTEGER NOT NULL DEFAULT 5,
        is_optional INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        FOREIGN KEY (linked_buff_id) REFERENCES buff_definitions(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        started_at TEXT,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        steps_completed INTEGER NOT NULL DEFAULT 0,
        total_steps INTEGER NOT NULL DEFAULT 0,
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        UNIQUE(routine_id, date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_step_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_log_id INTEGER NOT NULL,
        step_id INTEGER NOT NULL,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        skipped INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_log_id) REFERENCES routine_logs(id) ON DELETE CASCADE,
        FOREIGN KEY (step_id) REFERENCES routine_steps(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS routine_streaks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL UNIQUE,
        current_streak INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_completed_date TEXT,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_routine_steps_routine ON routine_steps(routine_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_date ON routine_logs(date)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_routine ON routine_logs(routine_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_routine_step_logs_log ON routine_step_logs(routine_log_id)"),await Te(),localStorage.setItem(tv,"true"),console.log("Routine migration completed successfully")}catch(e){throw console.error("Failed to run routine migration:",e),e}}const fx=[{name:"Wellness Warrior",description:"Activate Meditation, Exercise, and Healthy Meal buffs",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0},{name:"Focus Master",description:"Activate No Phone First Hour, Deep Work Session, and Read 30+ Minutes",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Early Bird",description:"Activate Morning Exercise, 8 Hours Sleep, and No Phone First Hour",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:35,is_active:!0},{name:"Mind & Body",description:"Activate Meditation, Yoga/Stretching, and Journaling",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Social Champion",description:"Activate Socialised, Helped Someone, and Gratitude Practice",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0}],hx={"Wellness Warrior":["Meditation","Morning Exercise","Healthy Meal"],"Focus Master":["No Phone First Hour","Deep Work Session","Read 30+ Minutes"],"Early Bird":["Morning Exercise","8 Hours Sleep","No Phone First Hour"],"Mind & Body":["Meditation","Yoga / Stretching","Journaling"],"Social Champion":["Socialised","Helped Someone","Gratitude Practice"]},nv="combo_migration_v1";async function mx(){if(localStorage.getItem(nv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS combo_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        icon TEXT NOT NULL DEFAULT '',
        required_buffs TEXT NOT NULL DEFAULT '[]',
        time_window_hours INTEGER NOT NULL DEFAULT 24,
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS combo_activations (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        combo_id INTEGER NOT NULL,
        activated_at TEXT NOT NULL DEFAULT (datetime('now')),
        buffs_used TEXT NOT NULL DEFAULT '[]',
        FOREIGN KEY (combo_id) REFERENCES combo_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_combo ON combo_activations(combo_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_date ON combo_activations(activated_at)");for(const e of fx){const n=hx[e.name]||[],a=[];for(const o of n){const u=s.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = 'buff' LIMIT 1",[o]);u.length&&u[0].values.length&&a.push(u[0].values[0][0])}a.length>=2&&s.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active)
           VALUES (?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,JSON.stringify(a),e.time_window_hours,e.bonus_xp,e.is_active?1:0])}await Te(),localStorage.setItem(nv,"true"),console.log("Combo migration completed successfully")}catch(e){throw console.error("Failed to run combo migration:",e),e}}const sv="weekly_review_migration_v1";async function px(){if(localStorage.getItem(sv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_reviews (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        generated_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        summary_data TEXT NOT NULL DEFAULT '{}',
        wins TEXT NOT NULL DEFAULT '',
        challenges TEXT NOT NULL DEFAULT '',
        priorities TEXT NOT NULL DEFAULT '[]',
        notes TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_reviews_week ON weekly_reviews(week_start)"),await Te(),localStorage.setItem(sv,"true"),console.log("Weekly review migration completed successfully")}catch(e){throw console.error("Failed to run weekly review migration:",e),e}}const _x=[{name:"Double XP Hour",description:"All XP gains are doubled for the next hour!",type:"bonus",icon:"",duration_hours:1,effect_type:"xp_multiplier",effect_value:'{"multiplier": 2}',rarity:"rare",weight:10},{name:"Energy Surge",description:"Instantly restore 50 energy!",type:"bonus",icon:"",duration_hours:0,effect_type:"energy_restore",effect_value:'{"amount": 50}',rarity:"common",weight:30},{name:"Streak Shield Drop",description:"A free streak shield has appeared!",type:"bonus",icon:"",duration_hours:0,effect_type:"streak_shield",effect_value:'{"shields": 1}',rarity:"uncommon",weight:15},{name:"XP Bonus",description:"Receive a bonus of 25 XP!",type:"bonus",icon:"",duration_hours:0,effect_type:"xp_bonus",effect_value:'{"amount": 25}',rarity:"common",weight:25},{name:"Sprint Challenge",description:"Complete 5 steps in 2 hours for bonus XP!",type:"challenge",icon:"",duration_hours:2,effect_type:"step_challenge",effect_value:'{"target": 5, "reward_xp": 50}',rarity:"uncommon",weight:20},{name:"Habit Rush",description:"Activate 3 buffs in 4 hours for bonus XP!",type:"challenge",icon:"",duration_hours:4,effect_type:"buff_challenge",effect_value:'{"target": 3, "reward_xp": 40}',rarity:"common",weight:25},{name:"Focus Marathon",description:"Complete 2 focus sessions in 3 hours!",type:"challenge",icon:"",duration_hours:3,effect_type:"focus_challenge",effect_value:'{"target": 2, "reward_xp": 45}',rarity:"uncommon",weight:15},{name:"Stat Boost",description:"All stats increased by +2 for 6 hours!",type:"modifier",icon:"",duration_hours:6,effect_type:"stat_boost",effect_value:'{"all_stats": 2}',rarity:"rare",weight:10},{name:"Lucky Day",description:"Increased chance of rare events for 12 hours!",type:"modifier",icon:"",duration_hours:12,effect_type:"luck_boost",effect_value:'{"rare_chance_bonus": 0.5}',rarity:"epic",weight:5}],gx=.15,yx=4,iv="random_event_migration_v1";async function Ex(){if(localStorage.getItem(iv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS event_templates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        type TEXT NOT NULL,
        icon TEXT NOT NULL,
        duration_hours INTEGER NOT NULL DEFAULT 0,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        rarity TEXT NOT NULL DEFAULT 'common',
        weight INTEGER NOT NULL DEFAULT 10
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS active_events (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        expires_at TEXT NOT NULL,
        is_claimed INTEGER NOT NULL DEFAULT 0,
        claimed_at TEXT,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS event_history (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        event_name TEXT NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        result TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_active_events_expires ON active_events(expires_at)"),s.run("CREATE INDEX IF NOT EXISTS idx_event_history_started ON event_history(started_at)");for(const e of _x)s.run(`INSERT INTO event_templates (name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.type,e.icon,e.duration_hours,e.effect_type,e.effect_value,e.rarity,e.weight]);await Te(),localStorage.setItem(iv,"true"),console.log("Random event migration completed successfully")}catch(e){throw console.error("Failed to run random event migration:",e),e}}const vx=[{name:"Productivity",description:"Quest and step bonuses",icon:"",color:"#3b82f6",sort_order:1},{name:"Health",description:"Energy and stamina bonuses",icon:"",color:"#ef4444",sort_order:2},{name:"Focus",description:"Timer and concentration bonuses",icon:"",color:"#8b5cf6",sort_order:3},{name:"Social",description:"Streak and charisma bonuses",icon:"",color:"#f97316",sort_order:4}],Tx=[{branch_id:1,name:"Quick Learner",description:"+5% XP from steps",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"step_xp_bonus",effect_value:'{"percent": 5}',is_capstone:!1},{branch_id:1,name:"Efficient Worker",description:"+10% XP from quests",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:1,effect_type:"quest_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:1,name:"Goal Master",description:"+15% XP from goals",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:2,effect_type:"goal_xp_bonus",effect_value:'{"percent": 15}',is_capstone:!0},{branch_id:2,name:"Energized",description:"+10 max energy",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"max_energy",effect_value:'{"amount": 10}',is_capstone:!1},{branch_id:2,name:"Quick Recovery",description:"+2 energy regen/hour",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:4,effect_type:"energy_regen",effect_value:'{"amount": 2}',is_capstone:!1},{branch_id:2,name:"Vitality Master",description:"+2 stamina, +2 health",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:5,effect_type:"stat_bonus",effect_value:'{"stamina": 2, "health": 2}',is_capstone:!0},{branch_id:3,name:"Focused Mind",description:"+1 focus stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"focus": 1}',is_capstone:!1},{branch_id:3,name:"Deep Concentration",description:"+10% focus session XP",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:7,effect_type:"focus_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:3,name:"Zen Master",description:"+3 focus, +2 willpower",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:8,effect_type:"stat_bonus",effect_value:'{"focus": 3, "willpower": 2}',is_capstone:!0},{branch_id:4,name:"Charismatic",description:"+1 charisma stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"charisma": 1}',is_capstone:!1},{branch_id:4,name:"Streak Guardian",description:"Streaks last 1 extra day",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:10,effect_type:"streak_extension",effect_value:'{"days": 1}',is_capstone:!1},{branch_id:4,name:"Social Champion",description:"+3 charisma, +10% streak XP",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:11,effect_type:"combined",effect_value:'{"charisma": 3, "streak_xp_bonus": 10}',is_capstone:!0}],av="skill_tree_migration_v1";async function bx(){if(localStorage.getItem(av))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS skill_branches (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        color TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS skill_nodes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        branch_id INTEGER NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        tier INTEGER NOT NULL DEFAULT 1,
        position INTEGER NOT NULL DEFAULT 0,
        xp_cost INTEGER NOT NULL DEFAULT 100,
        prerequisite_node_id INTEGER,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        is_capstone INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (branch_id) REFERENCES skill_branches(id) ON DELETE CASCADE,
        FOREIGN KEY (prerequisite_node_id) REFERENCES skill_nodes(id) ON DELETE SET NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS unlocked_skills (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        node_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (node_id) REFERENCES skill_nodes(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_skill_nodes_branch ON skill_nodes(branch_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_unlocked_skills_node ON unlocked_skills(node_id)");for(const e of vx)s.run(`INSERT INTO skill_branches (name, description, icon, color, sort_order)
         VALUES (?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.color,e.sort_order]);for(const e of Tx)s.run(`INSERT INTO skill_nodes (branch_id, name, description, icon, tier, position, xp_cost, prerequisite_node_id, effect_type, effect_value, is_capstone)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.branch_id,e.name,e.description,e.icon,e.tier,e.position,e.xp_cost,e.prerequisite_node_id,e.effect_type,e.effect_value,e.is_capstone?1:0]);await Te(),localStorage.setItem(av,"true"),console.log("Skill tree migration completed successfully")}catch(e){throw console.error("Failed to run skill tree migration:",e),e}}const Sx=[{key:"warrior",name:"Warrior",description:"Masters of physical challenges and quest completion",icon:"",primary_stat:"stamina",stat_bonuses:'{"stamina": 3, "health": 2}',xp_bonus_type:"quest",xp_bonus_percent:10,special_ability:"Battlecry",special_ability_desc:"Once per day, complete a quest step instantly"},{key:"mage",name:"Mage",description:"Experts in habits and mental discipline",icon:"",primary_stat:"focus",stat_bonuses:'{"focus": 3, "willpower": 2}',xp_bonus_type:"buff",xp_bonus_percent:10,special_ability:"Arcane Focus",special_ability_desc:"Focus sessions grant 20% more XP"},{key:"ranger",name:"Ranger",description:"Specialists in maintaining streaks and consistency",icon:"",primary_stat:"willpower",stat_bonuses:'{"willpower": 3, "stamina": 1, "focus": 1}',xp_bonus_type:"streak",xp_bonus_percent:10,special_ability:"Tracking",special_ability_desc:"Streaks are protected for 1 extra day"},{key:"paladin",name:"Paladin",description:"Champions of boss battles and weekly challenges",icon:"",primary_stat:"health",stat_bonuses:'{"health": 2, "willpower": 2, "charisma": 1}',xp_bonus_type:"boss",xp_bonus_percent:10,special_ability:"Divine Shield",special_ability_desc:"Deal 25% more damage to weekly bosses"}],rv=3,ov="character_class_migration_v1";async function Nx(){if(localStorage.getItem(ov))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS character_classes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        primary_stat TEXT NOT NULL,
        stat_bonuses TEXT NOT NULL DEFAULT '{}',
        xp_bonus_type TEXT NOT NULL,
        xp_bonus_percent INTEGER NOT NULL DEFAULT 0,
        special_ability TEXT NOT NULL,
        special_ability_desc TEXT NOT NULL
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS character_class_selection (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        class_id INTEGER,
        selected_at TEXT,
        last_changed_at TEXT,
        changes_remaining INTEGER NOT NULL DEFAULT ${rv},
        FOREIGN KEY (class_id) REFERENCES character_classes(id) ON DELETE SET NULL
      )
    `),s.exec("SELECT COUNT(*) FROM character_class_selection")[0].values[0][0]===0&&s.run(`INSERT INTO character_class_selection (id, changes_remaining) VALUES (1, ${rv})`);for(const n of Sx)s.run(`INSERT INTO character_classes (key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[n.key,n.name,n.description,n.icon,n.primary_stat,n.stat_bonuses,n.xp_bonus_type,n.xp_bonus_percent,n.special_ability,n.special_ability_desc]);await Te(),localStorage.setItem(ov,"true"),console.log("Character class migration completed successfully")}catch(e){throw console.error("Failed to run character class migration:",e),e}}const xx=[{name:"The Awakening Glade",description:"Where every journey begins. A peaceful clearing filled with morning light.",icon:"",unlock_level:1,background_color:"#22c55e",position_x:50,position_y:80,connected_to:"[2]",challenges:'["Complete your first quest", "Activate 5 buffs", "Reach level 3"]',rewards:'{"xp": 100, "title": "Awakened"}'},{name:"Habit Highlands",description:"Rocky terrain where only consistent habits lead to the summit.",icon:"",unlock_level:5,background_color:"#a3a3a3",position_x:30,position_y:60,connected_to:"[1, 3]",challenges:'["Maintain a 7-day streak", "Complete 10 quests", "Defeat your first boss"]',rewards:'{"xp": 250, "title": "Highland Wanderer"}'},{name:"Focus Forest",description:"Dense woods where only the focused can find their way.",icon:"",unlock_level:10,background_color:"#166534",position_x:70,position_y:50,connected_to:"[2, 4]",challenges:'["Complete 10 focus sessions", "Reach level 15", "Unlock 3 skill nodes"]',rewards:'{"xp": 400, "title": "Forest Pathfinder"}'},{name:"Productivity Plains",description:"Vast open fields where goals are achieved and dreams realized.",icon:"",unlock_level:15,background_color:"#eab308",position_x:50,position_y:35,connected_to:"[3, 5]",challenges:'["Complete 5 goals", "Earn 5000 total XP", "Defeat 5 bosses"]',rewards:'{"xp": 600, "title": "Plains Champion"}'},{name:"Summit of Mastery",description:"The peak where only true masters stand. Your journey culminates here.",icon:"",unlock_level:25,background_color:"#7c3aed",position_x:50,position_y:15,connected_to:"[4]",challenges:'["Reach level 30", "Unlock all capstone skills", "Complete 50 quests"]',rewards:'{"xp": 1000, "title": "Summit Master"}'}],lv="territory_migration_v1";async function wx(){if(localStorage.getItem(lv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS territories (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        unlock_level INTEGER NOT NULL DEFAULT 1,
        background_color TEXT NOT NULL DEFAULT '#333333',
        position_x INTEGER NOT NULL DEFAULT 50,
        position_y INTEGER NOT NULL DEFAULT 50,
        connected_to TEXT NOT NULL DEFAULT '[]',
        challenges TEXT NOT NULL DEFAULT '[]',
        rewards TEXT NOT NULL DEFAULT '{}'
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS territory_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        territory_id INTEGER NOT NULL UNIQUE,
        discovered_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        challenges_completed TEXT NOT NULL DEFAULT '[]',
        is_current INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (territory_id) REFERENCES territories(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_territory_progress_territory ON territory_progress(territory_id)");for(const e of xx)s.run(`INSERT INTO territories (name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.unlock_level,e.background_color,e.position_x,e.position_y,e.connected_to,e.challenges,e.rewards]);s.run("INSERT INTO territory_progress (territory_id, is_current) VALUES (1, 1)"),await Te(),localStorage.setItem(lv,"true"),console.log("Territory migration completed successfully")}catch(e){throw console.error("Failed to run territory migration:",e),e}}const Ax=[{name:"Wooden Sword",description:"A basic training sword",icon:"",type:"equipment",slot:"weapon",rarity:"common",stat_effects:'{"stamina": 1}',special_effect:"",stack_limit:1},{name:"Iron Blade",description:"A sturdy iron sword",icon:"",type:"equipment",slot:"weapon",rarity:"uncommon",stat_effects:'{"stamina": 2, "willpower": 1}',special_effect:"",stack_limit:1},{name:"Focus Staff",description:"A staff that enhances concentration",icon:"",type:"equipment",slot:"weapon",rarity:"rare",stat_effects:'{"focus": 3, "willpower": 2}',special_effect:"+5% focus session XP",stack_limit:1},{name:"Dragon Slayer",description:"Legendary weapon forged from dragon scales",icon:"",type:"equipment",slot:"weapon",rarity:"legendary",stat_effects:'{"stamina": 5, "willpower": 3, "health": 2}',special_effect:"+25% boss damage",stack_limit:1},{name:"Leather Vest",description:"Basic protection",icon:"",type:"equipment",slot:"armor",rarity:"common",stat_effects:'{"health": 1}',special_effect:"",stack_limit:1},{name:"Chain Mail",description:"Linked metal rings for defense",icon:"",type:"equipment",slot:"armor",rarity:"uncommon",stat_effects:'{"health": 2, "stamina": 1}',special_effect:"",stack_limit:1},{name:"Mage Robes",description:"Enchanted robes of wisdom",icon:"",type:"equipment",slot:"armor",rarity:"rare",stat_effects:'{"willpower": 3, "focus": 2}',special_effect:"+10% buff duration",stack_limit:1},{name:"Lucky Charm",description:"Brings good fortune",icon:"",type:"equipment",slot:"accessory",rarity:"common",stat_effects:'{"charisma": 1}',special_effect:"",stack_limit:1},{name:"Ring of Focus",description:"Enhances mental clarity",icon:"",type:"equipment",slot:"accessory",rarity:"uncommon",stat_effects:'{"focus": 2}',special_effect:"",stack_limit:1},{name:"Amulet of Persistence",description:"Grants unwavering determination",icon:"",type:"equipment",slot:"accessory",rarity:"rare",stat_effects:'{"willpower": 3, "stamina": 1}',special_effect:"Streaks protected for +1 day",stack_limit:1},{name:"Energy Potion",description:"Restores 25 energy",icon:"",type:"consumable",slot:null,rarity:"common",stat_effects:"{}",special_effect:"restore_energy:25",stack_limit:10},{name:"XP Elixir",description:"Grants 50 bonus XP",icon:"",type:"consumable",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"grant_xp:50",stack_limit:5},{name:"Streak Shield Scroll",description:"Adds a streak shield",icon:"",type:"consumable",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"add_shield:1",stack_limit:3},{name:"First Blood Trophy",description:"Awarded for defeating your first boss",icon:"",type:"trophy",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Streak Champion Medal",description:"Awarded for a 30-day streak",icon:"",type:"trophy",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Mastery Crown",description:"Awarded for reaching level 50",icon:"",type:"trophy",slot:null,rarity:"legendary",stat_effects:"{}",special_effect:"",stack_limit:1}],cv="inventory_migration_v1";async function Rx(){if(localStorage.getItem(cv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS item_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        type TEXT NOT NULL,
        slot TEXT,
        rarity TEXT NOT NULL DEFAULT 'common',
        stat_effects TEXT NOT NULL DEFAULT '{}',
        special_effect TEXT NOT NULL DEFAULT '',
        stack_limit INTEGER NOT NULL DEFAULT 1
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS inventory (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        item_id INTEGER NOT NULL,
        quantity INTEGER NOT NULL DEFAULT 1,
        acquired_at TEXT NOT NULL DEFAULT (datetime('now')),
        source TEXT NOT NULL DEFAULT 'unknown',
        FOREIGN KEY (item_id) REFERENCES item_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS equipped_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        slot TEXT NOT NULL UNIQUE,
        inventory_id INTEGER NOT NULL,
        equipped_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (inventory_id) REFERENCES inventory(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_inventory_item ON inventory(item_id)"),s.run("CREATE INDEX IF NOT EXISTS idx_equipped_items_slot ON equipped_items(slot)");for(const e of Ax)s.run(`INSERT INTO item_definitions (name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.type,e.slot,e.rarity,e.stat_effects,e.special_effect,e.stack_limit]);s.run("INSERT INTO inventory (item_id, source) VALUES (1, 'starter')"),s.run("INSERT INTO inventory (item_id, source) VALUES (5, 'starter')"),s.run("INSERT INTO inventory (item_id, quantity, source) VALUES (12, 3, 'starter')"),await Te(),localStorage.setItem(cv,"true"),console.log("Inventory migration completed successfully")}catch(e){throw console.error("Failed to run inventory migration:",e),e}}const uv="app_settings_migration_v1";async function Cx(){if(localStorage.getItem(uv))return;const s=ee();try{s.run(`
      CREATE TABLE IF NOT EXISTS app_settings (
        key TEXT PRIMARY KEY,
        value TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await Te(),localStorage.setItem(uv,"true"),console.log("App settings migration completed successfully")}catch(e){throw console.error("Failed to run app settings migration:",e),e}}function Ix(){const[s,e]=k.useState(!1),[n,a]=k.useState(null);return k.useEffect(()=>{YN().then(async()=>{await QN(),await KN(),await WN(),await JN(),await ZN(),await ex(),await tx(),await nx(),await rx(),await lx(),await ux(),await dx(),await mx(),await px(),await Ex(),await bx(),await Nx(),await wx(),await Rx(),await Cx(),e(!0)}).catch(o=>a(o.message))},[]),{ready:s,error:n}}function dv(){const e=ee().exec("SELECT id, name, total_xp, level, title, created_at FROM character WHERE id = 1");if(!e.length)throw new Error("Character not found");const n=e[0].values[0];return{id:n[0],name:n[1],total_xp:n[2],level:n[3],title:n[4],created_at:n[5]}}async function kx(s){ee().run("UPDATE character SET name = ? WHERE id = 1",[s]),await Te()}function fv(s=50){const n=ee().exec(`SELECT id, amount, reason, source_type, source_id, created_at
     FROM xp_log ORDER BY created_at DESC LIMIT ?`,[s]);return n.length?n[0].values.map(a=>({id:a[0],amount:a[1],reason:a[2],source_type:a[3],source_id:a[4],created_at:a[5]})):[]}const Um=["stamina","willpower","health","focus","charisma"],or=["Novice","Apprentice","Journeyman","Adept","Expert","Master","Legend","Dragonborn"],hv={normal:10,important:15,legendary:20},jx=50,Dx=200,mv=5,Lx=25,Ox=1.8,Mx=50;function _p(s){return Math.floor(Mx*Math.pow(s,Ox))}function Ux(s){let e=0;for(let n=1;n<s;n++)e+=_p(n);return e}function gp(s){let e=1,n=0;for(;;){if(n+=_p(e),s<n)return e;if(e++,e>100)return 100}}function Ld(s){const e=gp(s),n=Ux(e),a=s-n,o=_p(e);return{current:a,needed:o,percentage:Math.min(a/o*100,100)}}function rb(s){return s>=50?or[7]:s>=40?or[6]:s>=30?or[5]:s>=22?or[4]:s>=15?or[3]:s>=10?or[2]:s>=5?or[1]:or[0]}async function Vx(s,e,n,a=null){const o=ee(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],E=h+s,_=gp(E),S=rb(_),x=_>g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[s,e,n,a]),await Te(),{amount:s,newTotal:E,leveledUp:x,newLevel:_,newTitle:S}}async function qx(s,e,n,a=null){const o=ee(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],E=Math.max(0,h-s),_=gp(E),S=rb(_),x=_<g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[-s,e,n,a]),await Te(),{amount:s,newTotal:E,leveledDown:x,newLevel:_,newTitle:S}}function Bx(){const[s,e]=k.useState(()=>dv()),[n,a]=k.useState(()=>fv()),[o,u]=k.useState(null),[h,g]=k.useState([]),E=k.useCallback(()=>{e(dv()),a(fv())},[]),_=k.useCallback(async(B,H,U,V)=>{const z=await Vx(B,H,U,V??null);z.leveledUp&&u({level:z.newLevel,title:z.newTitle});const G=Date.now();return g(K=>[...K,{id:G,amount:B}]),setTimeout(()=>g(K=>K.filter(ie=>ie.id!==G)),1500),E(),z},[E]),S=k.useCallback(async(B,H,U,V)=>{const z=await qx(B,H,U,V??null),G=Date.now();return g(K=>[...K,{id:G,amount:-B}]),setTimeout(()=>g(K=>K.filter(ie=>ie.id!==G)),1500),E(),z},[E]),x=k.useCallback(()=>u(null),[]),w=k.useCallback(async B=>{await kx(B),E()},[E]);return{character:s,xpLog:n,levelUpInfo:o,xpFloats:h,grantXP:_,deductXP:S,dismissLevelUp:x,setName:w,refresh:E}}function ob(){const e=ee().exec("SELECT id, name, icon, color FROM domains ORDER BY id");return e.length?e[0].values.map(n=>({id:n[0],name:n[1],icon:n[2],color:n[3]})):[]}function Px(s,e){const n=ee();let a="SELECT id, domain_id, title, description, status, created_at, completed_at FROM goals WHERE 1=1";const o=[];s&&(a+=" AND domain_id = ?",o.push(s)),e&&(a+=" AND status = ?",o.push(e)),a+=" ORDER BY created_at DESC";const u=n.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],domain_id:h[1],title:h[2],description:h[3],status:h[4],created_at:h[5],completed_at:h[6]})):[]}async function Fx(s,e,n=""){const a=ee();a.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[s,e,n]);const o=a.exec("SELECT last_insert_rowid()");return await Te(),o[0].values[0][0]}async function Gx(s,e){const n=ee(),a=new Date().toISOString();n.run("UPDATE goals SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await Te()}function yp(s,e){const n=ee();let a="SELECT id, goal_id, title, description, priority, status, created_at, completed_at FROM quests WHERE 1=1";const o=[];s&&(a+=" AND goal_id = ?",o.push(s)),a+=" ORDER BY created_at DESC";const u=n.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],goal_id:h[1],title:h[2],description:h[3],priority:h[4],status:h[5],created_at:h[6],completed_at:h[7]})):[]}async function Hx(s,e,n="",a="normal"){const o=ee();o.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[s,e,n,a]);const u=o.exec("SELECT last_insert_rowid()");return await Te(),u[0].values[0][0]}async function zx(s,e){const n=ee(),a=new Date().toISOString();n.run("UPDATE quests SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await Te()}function Xx(s){const n=ee().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at, missed_at FROM steps WHERE id = ?",[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6],missed_at:a[7]}}function Ep(s){const n=ee().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at, missed_at FROM steps WHERE quest_id = ? ORDER BY sort_order, id",[s]);return n.length?n[0].values.map(a=>({id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6],missed_at:a[7]})):[]}async function $x(s,e,n="normal"){const a=ee(),u=a.exec("SELECT COALESCE(MAX(sort_order), 0) FROM steps WHERE quest_id = ?",[s])[0].values[0][0]+1;a.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[s,e,n,u]);const h=a.exec("SELECT last_insert_rowid()");return await Te(),h[0].values[0][0]}async function Yx(s){ee().run("UPDATE steps SET status = 'completed', completed_at = datetime('now') WHERE id = ?",[s]),await Te()}async function Qx(s){ee().run("UPDATE steps SET status = 'pending', completed_at = NULL WHERE id = ?",[s]),await Te()}async function Kx(s){ee().run("DELETE FROM steps WHERE id = ?",[s]),await Te()}async function Wx(s,e=10){const n=ee(),a=new Date().toISOString().split("T")[0];n.run("UPDATE steps SET status = 'missed', missed_at = datetime('now') WHERE id = ?",[s]),n.run("INSERT INTO missed_steps_log (step_id, missed_date, xp_penalty) VALUES (?, ?, ?)",[s,a,e]),await Te()}function Jx(){const s=ee(),e=new Date().toISOString().split("T")[0],n=s.exec("SELECT COUNT(*) FROM missed_steps_log WHERE missed_date = ?",[e]);return n.length?n[0].values[0][0]:0}async function Zx(s){ee().run("UPDATE steps SET status = 'pending', missed_at = NULL WHERE id = ?",[s]),await Te()}async function ew(s){const e=ee();e.run("DELETE FROM steps WHERE quest_id = ?",[s]),e.run("DELETE FROM quests WHERE id = ?",[s]),await Te()}async function tw(s){const e=ee(),n=yp(s);for(const a of n)e.run("DELETE FROM steps WHERE quest_id = ?",[a.id]);e.run("DELETE FROM quests WHERE goal_id = ?",[s]),e.run("DELETE FROM goals WHERE id = ?",[s]),await Te()}function nw(s){const n=ee().exec(`SELECT q.id, q.goal_id, q.title, q.description, q.priority, q.status, q.created_at, q.completed_at,
            d.name as domain_name, d.icon as domain_icon, d.color as domain_color, g.title as goal_title
     FROM quests q
     JOIN goals g ON q.goal_id = g.id
     JOIN domains d ON g.domain_id = d.id
     WHERE q.id = ?`,[s]);if(!n.length)return null;const a=n[0].values[0];return{id:a[0],goal_id:a[1],title:a[2],description:a[3],priority:a[4],status:a[5],created_at:a[6],completed_at:a[7],domain_name:a[8],domain_icon:a[9],domain_color:a[10],goal_title:a[11],steps:Ep(s)}}function sw(s,e){const n=Px(s,e),a=ob(),o=new Map(a.map(u=>[u.id,u]));return n.map(u=>{const h=o.get(u.domain_id),g=yp(u.id).map(E=>({...E,steps:Ep(E.id),domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color,goal_title:u.title}));return{...u,quests:g,domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color}})}const pv=10;function iw({grantXP:s,onStepComplete:e,onQuestComplete:n,onGoalComplete:a,onStepMissed:o}){const[u,h]=k.useState([]),[g]=k.useState(()=>ob()),[E,_]=k.useState(void 0),[S,x]=k.useState("active"),w=k.useCallback(()=>{h(sw(E,S))},[E,S]);k.useEffect(()=>{w()},[w]);const B=k.useCallback(async(D,R,L)=>{await Fx(D,R,L),w()},[w]),H=k.useCallback(async(D,R,L,q)=>{await Hx(D,R,L,q),w()},[w]),U=k.useCallback(async(D,R,L)=>{await $x(D,R,L),w()},[w]),V=k.useCallback(async(D,R,L)=>{await Yx(D);const q=hv[L]||10;await s(q,"Completed step","step",D),e&&e();const M=Ep(R);if(M.every(j=>j.status==="completed")&&M.length>0){await zx(R,"completed"),await s(jx,"Completed quest","quest",R),n&&n();const j=nw(R);j&&yp(j.goal_id).every(Y=>Y.status==="completed")&&(await Gx(j.goal_id,"completed"),await s(Dx,"Completed goal","goal",j.goal_id),a&&a())}w()},[w,s,e,n,a]),z=k.useCallback(async D=>{const R=Xx(D);if(R){const L=hv[R.priority]||10;await s(-L,"Uncompleted step","step_uncomplete",D)}await Qx(D),w()},[w,s]),G=k.useCallback(async D=>{await Kx(D),w()},[w]),K=k.useCallback(async D=>{await ew(D),w()},[w]),ie=k.useCallback(async D=>{await tw(D),w()},[w]),Ee=k.useCallback(async D=>{await Wx(D,pv),await s(-pv,"Missed step","step_missed",D);const R=Jx();o&&o(R),w()},[w,s,o]),ye=k.useCallback(async D=>{await Zx(D),w()},[w]);return{goals:u,domains:g,filterDomain:E,filterStatus:S,setFilterDomain:_,setFilterStatus:x,refresh:w,createGoal:B,createQuest:H,createStep:U,completeStep:V,uncompleteStep:z,missStep:Ee,unmissStep:ye,deleteStep:G,deleteQuest:K,deleteGoal:ie}}function lb(){const s=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:"America/Los_Angeles",year:"numeric",month:"2-digit",day:"2-digit"}).format(s)}function aw(s){const e=ee();let n="SELECT id, name, description, type, icon, duration_hours, stat_effects, created_at FROM buff_definitions";const a=[];n+=" ORDER BY name";const o=e.exec(n,a);return o.length?o[0].values.map(u=>({id:u[0],name:u[1],description:u[2],type:u[3],icon:u[4],duration_hours:u[5],stat_effects:u[6],created_at:u[7]})):[]}async function rw(s,e,n,a,o,u){const h=ee();h.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[s,e,n,a,o,u]);const g=h.exec("SELECT last_insert_rowid()");return await Te(),g[0].values[0][0]}async function ow(s){const e=ee();e.run("DELETE FROM buff_log WHERE definition_id = ?",[s]),e.run("DELETE FROM buff_definitions WHERE id = ?",[s]),await Te()}async function Vm(s){const e=ee(),n=e.exec("SELECT duration_hours FROM buff_definitions WHERE id = ?",[s]);if(!n.length)throw new Error("Buff definition not found");const a=n[0].values[0][0],o=e.exec(`SELECT id, expires_at FROM buff_log
     WHERE definition_id = ? AND is_active = 1 AND expires_at > datetime('now')
     ORDER BY expires_at DESC LIMIT 1`,[s]);if(o.length&&o[0].values.length){const _=o[0].values[0][0];e.run(`UPDATE buff_log SET expires_at = datetime(expires_at, '+' || ? || ' hours')
       WHERE id = ?`,[a,_]);const x=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[_])[0].values[0][0];return await Te(),{logId:_,isStacked:!0,newExpiresAt:x}}e.run(`INSERT INTO buff_log (definition_id, expires_at)
     VALUES (?, datetime('now', '+' || ? || ' hours'))`,[s,a]);const h=e.exec("SELECT last_insert_rowid()")[0].values[0][0],E=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[h])[0].values[0][0];return await Te(),{logId:h,isStacked:!1,newExpiresAt:E}}async function lw(s){const e=ee(),n=e.exec(`SELECT bl.definition_id, bd.type, bd.name, bd.duration_hours, bl.expires_at, bl.activated_at
     FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bl.id = ?`,[s]);if(!n.length||!n[0].values.length)return null;const[a,o,u,h,g,E]=n[0].values[0],S=e.exec("SELECT datetime(?, '-' || ? || ' hours')",[g,h])[0].values[0][0];return e.exec("SELECT datetime('now') < datetime(?)",[S])[0].values[0][0]===1?(e.run("UPDATE buff_log SET expires_at = ? WHERE id = ?",[S,s]),await Te(),{definitionId:a,buffType:o,buffName:u,fullyDeactivated:!1,newExpiresAt:S}):(e.run("UPDATE buff_log SET is_active = 0 WHERE id = ?",[s]),await Te(),{definitionId:a,buffType:o,buffName:u,fullyDeactivated:!0,newExpiresAt:null})}function cw(s){const n=ee().exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-30 days')
     ORDER BY d DESC`,[s]);if(!n.length)return 0;let a=0;const o=new Date().toISOString().split("T")[0],u=n[0].values.map(E=>E[0]),h=new Date(Date.now()-864e5).toISOString().split("T")[0];if(!u.includes(o)&&!u.includes(h))return 0;let g=u.includes(o)?o:h;for(const E of u)if(E===g){a++;const _=new Date(g+"T00:00:00");_.setDate(_.getDate()-1),g=_.toISOString().split("T")[0]}return a}const uw={GUILT:{name:"Guilt",description:"You missed a step. Focus and willpower reduced.",icon:"",duration_hours:4,stat_effects:'{"willpower": -1, "focus": -1}'},OFF_TRACK:{name:"Off Track",description:"You missed 3+ steps today. All stats reduced.",icon:"",duration_hours:24,stat_effects:'{"stamina": -2, "willpower": -2, "health": -2, "focus": -2, "charisma": -2}'}};async function _v(s){const e=ee(),n=uw[s],a=e.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = ?",[n.name,"debuff"]);if(a.length&&a[0].values.length)return a[0].values[0][0];e.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[n.name,n.description,"debuff",n.icon,n.duration_hours,n.stat_effects]);const o=e.exec("SELECT last_insert_rowid()");return await Te(),o[0].values[0][0]}async function dw(s){const e=await _v("GUILT");if(await Vm(e),s>=3){const n=await _v("OFF_TRACK");await Vm(n)}}function fw(){const e=ee().exec("SELECT value FROM app_settings WHERE key = 'last_buff_reset_date'");return!e.length||!e[0].values.length?null:e[0].values[0][0]}async function gv(s){ee().run(`INSERT INTO app_settings (key, value) VALUES ('last_buff_reset_date', ?)
     ON CONFLICT(key) DO UPDATE SET value = ?`,[s,s]),await Te()}async function hw(){const s=ee(),e=s.exec("SELECT COUNT(*) FROM buff_log WHERE is_active = 1"),n=e.length&&e[0].values.length?e[0].values[0][0]:0;return s.run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1"),await Te(),n}async function mw(){const s=lb(),e=fw();return e?e!==s?(await hw(),await gv(s),!0):!1:(await gv(s),!1)}function Ic(s){try{return JSON.parse(s)}catch{return{}}}async function pw(){ee().run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1 AND expires_at <= datetime('now')"),await Te()}function _w(){const e=ee().exec(`
    SELECT bl.id, bl.definition_id, bl.activated_at, bl.expires_at, bl.is_active,
           bd.name, bd.description, bd.type, bd.icon, bd.stat_effects
    FROM buff_log bl
    JOIN buff_definitions bd ON bl.definition_id = bd.id
    WHERE bl.is_active = 1 AND bl.expires_at > datetime('now')
    ORDER BY bl.activated_at DESC
  `);return e.length?e[0].values.map(n=>({id:n[0],definition_id:n[1],activated_at:n[2],expires_at:n[3],is_active:!!n[4],name:n[5],description:n[6],type:n[7],icon:n[8],stat_effects:n[9]})):[]}function gw(s){const e={stamina:10,willpower:10,health:10,focus:10,charisma:10};for(const n of s){const a=Ic(n.stat_effects);for(const[o,u]of Object.entries(a))o in e&&(e[o]+=u)}return e}function yw({grantXP:s,deductXP:e,scheduleBuffExpiry:n,cancelBuffExpiry:a,onBuffActivated:o,onDebuffActivated:u}){const[h,g]=k.useState([]),[E,_]=k.useState([]),[S,x]=k.useState({stamina:10,willpower:10,health:10,focus:10,charisma:10}),w=k.useCallback(async()=>{await pw(),g(aw());const z=_w();_(z),x(gw(z))},[]);k.useEffect(()=>{const z=setInterval(w,6e4);return()=>clearInterval(z)},[w]);const B=k.useCallback(async(z,G,K,ie,Ee,ye)=>{await rw(z,G,K,ie,Ee,ye),w()},[w]),H=k.useCallback(async z=>{await ow(z),w()},[w]),U=k.useCallback(async z=>{const G=await Vm(z),K=h.find(Ee=>Ee.id===z),ie=K&&K.stat_effects&&K.stat_effects!=="{}"&&(()=>{try{const Ee=JSON.parse(K.stat_effects);return Object.values(Ee).some(ye=>ye!==0)}catch{return!1}})();if(K&&K.type==="buff"&&ie&&(await s(mv,`Activated buff: ${K.name}`,"buff",G.logId),!G.isStacked)){const Ee=cw(z);Ee>0&&Ee%7===0&&await s(Lx,`7-day streak: ${K.name}`,"streak",z)}K&&o&&ie&&o(K.type),K&&K.type==="debuff"&&u&&ie&&!G.isStacked&&u(K.name),K&&n&&(G.isStacked&&a&&await a(G.logId),await n(G.logId,K.name,K.type,G.newExpiresAt)),w()},[w,h,s,n,a,o,u]),V=k.useCallback(async z=>{const G=await lw(z);G&&(G.buffType==="buff"&&await e(mv,`Undo buff: ${G.buffName}`,"buff_undo",z),G.fullyDeactivated?a&&await a(z):n&&a&&G.newExpiresAt&&(await a(z),await n(z,G.buffName,G.buffType,G.newExpiresAt))),w()},[w,a,n,e]);return{definitions:h,activeBuffs:E,stats:S,refresh:w,createDefinition:B,deleteDefinition:H,activateBuff:U,deactivateBuff:V}}const Ew=1440*60*1e3,cb="Goal Game Backup",Bc="github_gist_token",Ea="github_gist_id",Od="github_last_backup";function vw(){return!!localStorage.getItem(Bc)}function ub(){return!!localStorage.getItem(Bc)}function Md(){return localStorage.getItem(Bc)}function Tw(s){localStorage.setItem(Bc,s)}function bw(){localStorage.removeItem(Bc),localStorage.removeItem(Ea),localStorage.removeItem(Od)}function Sw(){const s=localStorage.getItem(Od);return s?Date.now()-Number(s)>Ew:!0}function db(){const s=localStorage.getItem(Od);return s?new Date(Number(s)):null}function Nw(s){let e="";for(let n=0;n<s.length;n++)e+=String.fromCharCode(s[n]);return btoa(e)}function xw(s){const e=atob(s),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n}async function fb(s){try{const e=await fetch("https://api.github.com/gists?per_page=100",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!e.ok)return null;const n=await e.json();for(const a of n)if(a.description===cb)return a.id;return null}catch{return null}}async function ww(s){const e=localStorage.getItem(Ea);if(e){if((await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok)return e;localStorage.removeItem(Ea)}const n=await fb(s);if(n)return localStorage.setItem(Ea,n),n;const a=await fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({description:cb,public:!1,files:{"README.md":{content:`# Goal Game Backups

This gist contains automatic backups of your Goal Game data.

Backups are stored as base64-encoded database files.`}}})});if(!a.ok)throw new Error("Failed to create backup gist");const o=await a.json();return localStorage.setItem(Ea,o.id),o.id}async function hb(s){const e=Md();if(!e)return{success:!1,error:"Not authenticated"};try{const n=await ww(e),o=`backup-${new Date().toISOString().replace(/[:.]/g,"-")}.db.b64`,u=Nw(s),h=await fetch(`https://api.github.com/gists/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:{[o]:{content:u}}})});return h.ok?(localStorage.setItem(Od,String(Date.now())),{success:!0,fileName:o}):{success:!1,error:(await h.json()).message||"Upload failed"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function mb(){const s=Md();if(!s)return[];let e=localStorage.getItem(Ea);if(!e)if(e=await fb(s),e)localStorage.setItem(Ea,e);else return[];try{const n=await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!n.ok)return[];const a=await n.json(),o=[];for(const[u,h]of Object.entries(a.files))u.endsWith(".db.b64")&&o.push({fileName:u,size:h.size});return o.sort((u,h)=>h.fileName.localeCompare(u.fileName))}catch{return[]}}async function Aw(s){const e=Md();if(!e)return null;const n=localStorage.getItem(Ea);if(!n)return null;try{const a=await fetch(`https://api.github.com/gists/${n}`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json"}});if(!a.ok)return null;const u=(await a.json()).files[s];if(!u)return null;let h;return u.truncated?h=await(await fetch(u.raw_url,{headers:{Authorization:`Bearer ${e}`}})).text():h=u.content,xw(h)}catch{return null}}async function Rw(s){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok}catch{return!1}}async function pb(s=7){const e=Md();if(!e)return;const n=localStorage.getItem(Ea);if(n)try{const a=await mb();if(a.length<=s)return;const o=a.slice(s),u={};for(const h of o)u[h.fileName]=null;await fetch(`https://api.github.com/gists/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:u})})}catch{}}function Cw(){const[s,e]=k.useState("idle"),[n,a]=k.useState(null),[o,u]=k.useState(""),h=k.useRef(!1);return k.useEffect(()=>{if(h.current)return;h.current=!0;const E=setTimeout(async()=>{if(vw()&&ub()){if(!Sw()){a(db());return}e("backing-up"),u("Auto-backing up to GitHub...");try{const _=await pp(),S=await hb(_);S.success?(e("success"),u("Auto-backup complete!"),a(new Date),await pb(7),setTimeout(()=>{e("idle"),u("")},5e3)):(e("error"),u(`Auto-backup failed: ${S.error}`))}catch(_){e("error"),u(`Auto-backup failed: ${_ instanceof Error?_.message:"Unknown error"}`)}}},3e3);return()=>clearTimeout(E)},[]),{status:s,lastBackup:n,message:o}}const Iw=()=>{};var yv={};const _b=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},kw=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],g=s[n++],E=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(E>>10)),e[a++]=String.fromCharCode(56320+(E&1023))}else{const u=s[n++],h=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},gb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,g=h?s[o+1]:0,E=o+2<s.length,_=E?s[o+2]:0,S=u>>2,x=(u&3)<<4|g>>4;let w=(g&15)<<2|_>>6,B=_&63;E||(B=64,h||(w=64)),a.push(n[S],n[x],n[w],n[B])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(_b(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):kw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||_==null||x==null)throw new jw;const w=u<<2|g>>4;if(a.push(w),_!==64){const B=g<<4&240|_>>2;if(a.push(B),x!==64){const H=_<<6&192|x;a.push(H)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class jw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dw=function(s){const e=_b(s);return gb.encodeByteArray(e,!0)},md=function(s){return Dw(s).replace(/\./g,"")},Lw=function(s){try{return gb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ow(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Mw=()=>Ow().__FIREBASE_DEFAULTS__,Uw=()=>{if(typeof process>"u"||typeof yv>"u")return;const s=yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Vw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Lw(s[1]);return e&&JSON.parse(e)},vp=()=>{try{return Iw()||Mw()||Uw()||Vw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},qw=s=>vp()?.emulatorHosts?.[s],Bw=s=>{const e=qw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},yb=()=>vp()?.config;class Pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function Tp(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fw(s){return(await fetch(s,{credentials:"include"})).ok}function Gw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[md(JSON.stringify(n)),md(JSON.stringify(h)),""].join(".")}const xc={};function Hw(){const s={prod:[],emulator:[]};for(const e of Object.keys(xc))xc[e]?s.emulator.push(e):s.prod.push(e);return s}function zw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Ev=!1;function Xw(s,e){if(typeof window>"u"||typeof document>"u"||!Tp(window.location.host)||xc[s]===e||xc[s]||Ev)return;xc[s]=e;function n(w){return`__firebase__banner__${w}`}const a="__firebase__banner",u=Hw().prod.length>0;function h(){const w=document.getElementById(a);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function E(w,B){w.setAttribute("width","24"),w.setAttribute("id",B),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function _(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Ev=!0,h()},w}function S(w,B){w.setAttribute("id",B),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=zw(a),B=n("text"),H=document.getElementById(B)||document.createElement("span"),U=n("learnmore"),V=document.getElementById(U)||document.createElement("a"),z=n("preprendIcon"),G=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;g(K),S(V,U);const ie=_();E(G,z),K.append(G,H,V,ie),document.body.appendChild(K)}u?(H.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function $w(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yw(){const s=vp()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qw(){return!Yw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eb(){try{return typeof indexedDB=="object"}catch{return!1}}function vb(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function Kw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ww="FirebaseError";class oo extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=Ww,Object.setPrototypeOf(this,oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ud.prototype.create)}}class Ud{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Jw(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new oo(o,g,a)}}function Jw(s,e){return s.replace(Zw,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Zw=/\{\$([^}]+)}/g;function pd(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],h=e[o];if(vv(u)&&vv(h)){if(!pd(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function vv(s){return s!==null&&typeof s=="object"}function Sa(s){return s&&s._delegate?s._delegate:s}class Na{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zr="[DEFAULT]";class eA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Pw;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nA(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:tA(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tA(s){return s===Zr?void 0:s}function nA(s){return s.instantiationMode==="EAGER"}class sA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Nt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Nt||(Nt={}));const iA={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},aA=Nt.INFO,rA={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},oA=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=rA[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tb{constructor(e){this.name=e,this._logLevel=aA,this._logHandler=oA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...e),this._logHandler(this,Nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...e),this._logHandler(this,Nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...e),this._logHandler(this,Nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...e),this._logHandler(this,Nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...e),this._logHandler(this,Nt.ERROR,...e)}}const lA=(s,e)=>e.some(n=>s instanceof n);let Tv,bv;function cA(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uA(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bb=new WeakMap,qm=new WeakMap,Sb=new WeakMap,fm=new WeakMap,bp=new WeakMap;function dA(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Ta(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&bb.set(n,s)}).catch(()=>{}),bp.set(e,s),e}function fA(s){if(qm.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});qm.set(s,e)}let Bm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return qm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Sb.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ta(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hA(s){Bm=s(Bm)}function mA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(hm(this),e,...n);return Sb.set(a,e.sort?e.sort():[e]),Ta(a)}:uA().includes(s)?function(...e){return s.apply(hm(this),e),Ta(bb.get(this))}:function(...e){return Ta(s.apply(hm(this),e))}}function pA(s){return typeof s=="function"?mA(s):(s instanceof IDBTransaction&&fA(s),lA(s,cA())?new Proxy(s,Bm):s)}function Ta(s){if(s instanceof IDBRequest)return dA(s);if(fm.has(s))return fm.get(s);const e=pA(s);return e!==s&&(fm.set(s,e),bp.set(e,s)),e}const hm=s=>bp.get(s);function Vd(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),g=Ta(h);return a&&h.addEventListener("upgradeneeded",E=>{a(Ta(h.result),E.oldVersion,E.newVersion,Ta(h.transaction),E)}),n&&h.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),g.then(E=>{u&&E.addEventListener("close",()=>u()),o&&E.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}function mm(s,{blocked:e}={}){const n=indexedDB.deleteDatabase(s);return e&&n.addEventListener("blocked",a=>e(a.oldVersion,a)),Ta(n).then(()=>{})}const _A=["get","getKey","getAll","getAllKeys","count"],gA=["put","add","delete","clear"],pm=new Map;function Sv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=gA.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||_A.includes(n)))return;const u=async function(h,...g){const E=this.transaction(h,o?"readwrite":"readonly");let _=E.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),o&&E.done]))[0]};return pm.set(e,u),u}hA(s=>({...s,get:(e,n,a)=>Sv(e,n)||s.get(e,n,a),has:(e,n)=>!!Sv(e,n)||s.has(e,n)}));class yA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EA(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function EA(s){return s.getComponent()?.type==="VERSION"}const Pm="@firebase/app",Nv="0.14.7";const xa=new Tb("@firebase/app"),vA="@firebase/app-compat",TA="@firebase/analytics-compat",bA="@firebase/analytics",SA="@firebase/app-check-compat",NA="@firebase/app-check",xA="@firebase/auth",wA="@firebase/auth-compat",AA="@firebase/database",RA="@firebase/data-connect",CA="@firebase/database-compat",IA="@firebase/functions",kA="@firebase/functions-compat",jA="@firebase/installations",DA="@firebase/installations-compat",LA="@firebase/messaging",OA="@firebase/messaging-compat",MA="@firebase/performance",UA="@firebase/performance-compat",VA="@firebase/remote-config",qA="@firebase/remote-config-compat",BA="@firebase/storage",PA="@firebase/storage-compat",FA="@firebase/firestore",GA="@firebase/ai",HA="@firebase/firestore-compat",zA="firebase",XA="12.8.0";const Fm="[DEFAULT]",$A={[Pm]:"fire-core",[vA]:"fire-core-compat",[bA]:"fire-analytics",[TA]:"fire-analytics-compat",[NA]:"fire-app-check",[SA]:"fire-app-check-compat",[xA]:"fire-auth",[wA]:"fire-auth-compat",[AA]:"fire-rtdb",[RA]:"fire-data-connect",[CA]:"fire-rtdb-compat",[IA]:"fire-fn",[kA]:"fire-fn-compat",[jA]:"fire-iid",[DA]:"fire-iid-compat",[LA]:"fire-fcm",[OA]:"fire-fcm-compat",[MA]:"fire-perf",[UA]:"fire-perf-compat",[VA]:"fire-rc",[qA]:"fire-rc-compat",[BA]:"fire-gcs",[PA]:"fire-gcs-compat",[FA]:"fire-fst",[HA]:"fire-fst-compat",[GA]:"fire-vertex","fire-js":"fire-js",[zA]:"fire-js-all"};const _d=new Map,YA=new Map,Gm=new Map;function xv(s,e){try{s.container.addComponent(e)}catch(n){xa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function pr(s){const e=s.name;if(Gm.has(e))return xa.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,s);for(const n of _d.values())xv(n,s);for(const n of YA.values())xv(n,s);return!0}function qd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function QA(s){return s==null?!1:s.settings!==void 0}const KA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new Ud("app","Firebase",KA);class WA{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}const JA=XA;function Nb(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Fm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw dr.create("bad-app-name",{appName:String(o)});if(n||(n=yb()),!n)throw dr.create("no-options");const u=_d.get(o);if(u){if(pd(n,u.options)&&pd(a,u.config))return u;throw dr.create("duplicate-app",{appName:o})}const h=new sA(o);for(const E of Gm.values())h.addComponent(E);const g=new WA(n,a,h);return _d.set(o,g),g}function xb(s=Fm){const e=_d.get(s);if(!e&&s===Fm&&yb())return Nb();if(!e)throw dr.create("no-app",{appName:s});return e}function qi(s,e,n){let a=$A[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xa.warn(h.join(" "));return}pr(new Na(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const ZA="firebase-heartbeat-database",eR=1,kc="firebase-heartbeat-store";let _m=null;function wb(){return _m||(_m=Vd(ZA,eR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(kc)}catch(n){console.warn(n)}}}}).catch(s=>{throw dr.create("idb-open",{originalErrorMessage:s.message})})),_m}async function tR(s){try{const n=(await wb()).transaction(kc),a=await n.objectStore(kc).get(Ab(s));return await n.done,a}catch(e){if(e instanceof oo)xa.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e?.message});xa.warn(n.message)}}}async function wv(s,e){try{const a=(await wb()).transaction(kc,"readwrite");await a.objectStore(kc).put(e,Ab(s)),await a.done}catch(n){if(n instanceof oo)xa.warn(n.message);else{const a=dr.create("idb-set",{originalErrorMessage:n?.message});xa.warn(a.message)}}}function Ab(s){return`${s.name}!${s.options.appId}`}const nR=1024,sR=30;class iR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rR(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Av();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>sR){const o=oR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Av(),{heartbeatsToSend:n,unsentEntries:a}=aR(this._heartbeatsCache.heartbeats),o=md(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return xa.warn(e),""}}}function Av(){return new Date().toISOString().substring(0,10)}function aR(s,e=nR){const n=[];let a=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Rv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Rv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class rR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eb()?vb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Rv(s){return md(JSON.stringify({version:2,heartbeats:s})).length}function oR(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function lR(s){pr(new Na("platform-logger",e=>new yA(e),"PRIVATE")),pr(new Na("heartbeat",e=>new iR(e),"PRIVATE")),qi(Pm,Nv,s),qi(Pm,Nv,"esm2020"),qi("fire-js","")}lR("");var cR="firebase",uR="12.8.0";qi(cR,uR,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fr,Rb;(function(){var s;function e(D,R){function L(){}L.prototype=R.prototype,D.F=R.prototype,D.prototype=new L,D.prototype.constructor=D,D.D=function(q,M,O){for(var j=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)j[Ae-2]=arguments[Ae];return R.prototype[M].apply(q,j)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,L){L||(L=0);const q=Array(16);if(typeof R=="string")for(var M=0;M<16;++M)q[M]=R.charCodeAt(L++)|R.charCodeAt(L++)<<8|R.charCodeAt(L++)<<16|R.charCodeAt(L++)<<24;else for(M=0;M<16;++M)q[M]=R[L++]|R[L++]<<8|R[L++]<<16|R[L++]<<24;R=D.g[0],L=D.g[1],M=D.g[2];let O=D.g[3],j;j=R+(O^L&(M^O))+q[0]+3614090360&4294967295,R=L+(j<<7&4294967295|j>>>25),j=O+(M^R&(L^M))+q[1]+3905402710&4294967295,O=R+(j<<12&4294967295|j>>>20),j=M+(L^O&(R^L))+q[2]+606105819&4294967295,M=O+(j<<17&4294967295|j>>>15),j=L+(R^M&(O^R))+q[3]+3250441966&4294967295,L=M+(j<<22&4294967295|j>>>10),j=R+(O^L&(M^O))+q[4]+4118548399&4294967295,R=L+(j<<7&4294967295|j>>>25),j=O+(M^R&(L^M))+q[5]+1200080426&4294967295,O=R+(j<<12&4294967295|j>>>20),j=M+(L^O&(R^L))+q[6]+2821735955&4294967295,M=O+(j<<17&4294967295|j>>>15),j=L+(R^M&(O^R))+q[7]+4249261313&4294967295,L=M+(j<<22&4294967295|j>>>10),j=R+(O^L&(M^O))+q[8]+1770035416&4294967295,R=L+(j<<7&4294967295|j>>>25),j=O+(M^R&(L^M))+q[9]+2336552879&4294967295,O=R+(j<<12&4294967295|j>>>20),j=M+(L^O&(R^L))+q[10]+4294925233&4294967295,M=O+(j<<17&4294967295|j>>>15),j=L+(R^M&(O^R))+q[11]+2304563134&4294967295,L=M+(j<<22&4294967295|j>>>10),j=R+(O^L&(M^O))+q[12]+1804603682&4294967295,R=L+(j<<7&4294967295|j>>>25),j=O+(M^R&(L^M))+q[13]+4254626195&4294967295,O=R+(j<<12&4294967295|j>>>20),j=M+(L^O&(R^L))+q[14]+2792965006&4294967295,M=O+(j<<17&4294967295|j>>>15),j=L+(R^M&(O^R))+q[15]+1236535329&4294967295,L=M+(j<<22&4294967295|j>>>10),j=R+(M^O&(L^M))+q[1]+4129170786&4294967295,R=L+(j<<5&4294967295|j>>>27),j=O+(L^M&(R^L))+q[6]+3225465664&4294967295,O=R+(j<<9&4294967295|j>>>23),j=M+(R^L&(O^R))+q[11]+643717713&4294967295,M=O+(j<<14&4294967295|j>>>18),j=L+(O^R&(M^O))+q[0]+3921069994&4294967295,L=M+(j<<20&4294967295|j>>>12),j=R+(M^O&(L^M))+q[5]+3593408605&4294967295,R=L+(j<<5&4294967295|j>>>27),j=O+(L^M&(R^L))+q[10]+38016083&4294967295,O=R+(j<<9&4294967295|j>>>23),j=M+(R^L&(O^R))+q[15]+3634488961&4294967295,M=O+(j<<14&4294967295|j>>>18),j=L+(O^R&(M^O))+q[4]+3889429448&4294967295,L=M+(j<<20&4294967295|j>>>12),j=R+(M^O&(L^M))+q[9]+568446438&4294967295,R=L+(j<<5&4294967295|j>>>27),j=O+(L^M&(R^L))+q[14]+3275163606&4294967295,O=R+(j<<9&4294967295|j>>>23),j=M+(R^L&(O^R))+q[3]+4107603335&4294967295,M=O+(j<<14&4294967295|j>>>18),j=L+(O^R&(M^O))+q[8]+1163531501&4294967295,L=M+(j<<20&4294967295|j>>>12),j=R+(M^O&(L^M))+q[13]+2850285829&4294967295,R=L+(j<<5&4294967295|j>>>27),j=O+(L^M&(R^L))+q[2]+4243563512&4294967295,O=R+(j<<9&4294967295|j>>>23),j=M+(R^L&(O^R))+q[7]+1735328473&4294967295,M=O+(j<<14&4294967295|j>>>18),j=L+(O^R&(M^O))+q[12]+2368359562&4294967295,L=M+(j<<20&4294967295|j>>>12),j=R+(L^M^O)+q[5]+4294588738&4294967295,R=L+(j<<4&4294967295|j>>>28),j=O+(R^L^M)+q[8]+2272392833&4294967295,O=R+(j<<11&4294967295|j>>>21),j=M+(O^R^L)+q[11]+1839030562&4294967295,M=O+(j<<16&4294967295|j>>>16),j=L+(M^O^R)+q[14]+4259657740&4294967295,L=M+(j<<23&4294967295|j>>>9),j=R+(L^M^O)+q[1]+2763975236&4294967295,R=L+(j<<4&4294967295|j>>>28),j=O+(R^L^M)+q[4]+1272893353&4294967295,O=R+(j<<11&4294967295|j>>>21),j=M+(O^R^L)+q[7]+4139469664&4294967295,M=O+(j<<16&4294967295|j>>>16),j=L+(M^O^R)+q[10]+3200236656&4294967295,L=M+(j<<23&4294967295|j>>>9),j=R+(L^M^O)+q[13]+681279174&4294967295,R=L+(j<<4&4294967295|j>>>28),j=O+(R^L^M)+q[0]+3936430074&4294967295,O=R+(j<<11&4294967295|j>>>21),j=M+(O^R^L)+q[3]+3572445317&4294967295,M=O+(j<<16&4294967295|j>>>16),j=L+(M^O^R)+q[6]+76029189&4294967295,L=M+(j<<23&4294967295|j>>>9),j=R+(L^M^O)+q[9]+3654602809&4294967295,R=L+(j<<4&4294967295|j>>>28),j=O+(R^L^M)+q[12]+3873151461&4294967295,O=R+(j<<11&4294967295|j>>>21),j=M+(O^R^L)+q[15]+530742520&4294967295,M=O+(j<<16&4294967295|j>>>16),j=L+(M^O^R)+q[2]+3299628645&4294967295,L=M+(j<<23&4294967295|j>>>9),j=R+(M^(L|~O))+q[0]+4096336452&4294967295,R=L+(j<<6&4294967295|j>>>26),j=O+(L^(R|~M))+q[7]+1126891415&4294967295,O=R+(j<<10&4294967295|j>>>22),j=M+(R^(O|~L))+q[14]+2878612391&4294967295,M=O+(j<<15&4294967295|j>>>17),j=L+(O^(M|~R))+q[5]+4237533241&4294967295,L=M+(j<<21&4294967295|j>>>11),j=R+(M^(L|~O))+q[12]+1700485571&4294967295,R=L+(j<<6&4294967295|j>>>26),j=O+(L^(R|~M))+q[3]+2399980690&4294967295,O=R+(j<<10&4294967295|j>>>22),j=M+(R^(O|~L))+q[10]+4293915773&4294967295,M=O+(j<<15&4294967295|j>>>17),j=L+(O^(M|~R))+q[1]+2240044497&4294967295,L=M+(j<<21&4294967295|j>>>11),j=R+(M^(L|~O))+q[8]+1873313359&4294967295,R=L+(j<<6&4294967295|j>>>26),j=O+(L^(R|~M))+q[15]+4264355552&4294967295,O=R+(j<<10&4294967295|j>>>22),j=M+(R^(O|~L))+q[6]+2734768916&4294967295,M=O+(j<<15&4294967295|j>>>17),j=L+(O^(M|~R))+q[13]+1309151649&4294967295,L=M+(j<<21&4294967295|j>>>11),j=R+(M^(L|~O))+q[4]+4149444226&4294967295,R=L+(j<<6&4294967295|j>>>26),j=O+(L^(R|~M))+q[11]+3174756917&4294967295,O=R+(j<<10&4294967295|j>>>22),j=M+(R^(O|~L))+q[2]+718787259&4294967295,M=O+(j<<15&4294967295|j>>>17),j=L+(O^(M|~R))+q[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(M+(j<<21&4294967295|j>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+O&4294967295}a.prototype.v=function(D,R){R===void 0&&(R=D.length);const L=R-this.blockSize,q=this.C;let M=this.h,O=0;for(;O<R;){if(M==0)for(;O<=L;)o(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<R;)if(q[M++]=D.charCodeAt(O++),M==this.blockSize){o(this,q),M=0;break}}else for(;O<R;)if(q[M++]=D[O++],M==this.blockSize){o(this,q),M=0;break}}this.h=M,this.o+=R},a.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var L=D.length-8;L<D.length;++L)D[L]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,L=0;L<4;++L)for(let q=0;q<32;q+=8)D[R++]=this.g[L]>>>q&255;return D};function u(D,R){var L=g;return Object.prototype.hasOwnProperty.call(L,D)?L[D]:L[D]=R(D)}function h(D,R){this.h=R;const L=[];let q=!0;for(let M=D.length-1;M>=0;M--){const O=D[M]|0;q&&O==R||(L[M]=O,q=!1)}this.g=L}var g={};function E(D){return-128<=D&&D<128?u(D,function(R){return new h([R|0],R<0?-1:0)}):new h([D|0],D<0?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return x;if(D<0)return V(_(-D));const R=[];let L=1;for(let q=0;D>=L;q++)R[q]=D/L|0,L*=4294967296;return new h(R,0)}function S(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return V(S(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=_(Math.pow(R,8));let q=x;for(let O=0;O<D.length;O+=8){var M=Math.min(8,D.length-O);const j=parseInt(D.substring(O,O+M),R);M<8?(M=_(Math.pow(R,M)),q=q.j(M).add(_(j))):(q=q.j(L),q=q.add(_(j)))}return q}var x=E(0),w=E(1),B=E(16777216);s=h.prototype,s.m=function(){if(U(this))return-V(this).m();let D=0,R=1;for(let L=0;L<this.g.length;L++){const q=this.i(L);D+=(q>=0?q:4294967296+q)*R,R*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(U(this))return"-"+V(this).toString(D);const R=_(Math.pow(D,6));var L=this;let q="";for(;;){const M=ie(L,R).g;L=z(L,M.j(R));let O=((L.g.length>0?L.g[0]:L.h)>>>0).toString(D);if(L=M,H(L))return O+q;for(;O.length<6;)O="0"+O;q=O+q}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function U(D){return D.h==-1}s.l=function(D){return D=z(this,D),U(D)?-1:H(D)?0:1};function V(D){const R=D.g.length,L=[];for(let q=0;q<R;q++)L[q]=~D.g[q];return new h(L,~D.h).add(w)}s.abs=function(){return U(this)?V(this):this},s.add=function(D){const R=Math.max(this.g.length,D.g.length),L=[];let q=0;for(let M=0;M<=R;M++){let O=q+(this.i(M)&65535)+(D.i(M)&65535),j=(O>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);q=j>>>16,O&=65535,j&=65535,L[M]=j<<16|O}return new h(L,L[L.length-1]&-2147483648?-1:0)};function z(D,R){return D.add(V(R))}s.j=function(D){if(H(this)||H(D))return x;if(U(this))return U(D)?V(this).j(V(D)):V(V(this).j(D));if(U(D))return V(this.j(V(D)));if(this.l(B)<0&&D.l(B)<0)return _(this.m()*D.m());const R=this.g.length+D.g.length,L=[];for(var q=0;q<2*R;q++)L[q]=0;for(q=0;q<this.g.length;q++)for(let M=0;M<D.g.length;M++){const O=this.i(q)>>>16,j=this.i(q)&65535,Ae=D.i(M)>>>16,Ze=D.i(M)&65535;L[2*q+2*M]+=j*Ze,G(L,2*q+2*M),L[2*q+2*M+1]+=O*Ze,G(L,2*q+2*M+1),L[2*q+2*M+1]+=j*Ae,G(L,2*q+2*M+1),L[2*q+2*M+2]+=O*Ae,G(L,2*q+2*M+2)}for(D=0;D<R;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=R;D<2*R;D++)L[D]=0;return new h(L,0)};function G(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function K(D,R){this.g=D,this.h=R}function ie(D,R){if(H(R))throw Error("division by zero");if(H(D))return new K(x,x);if(U(D))return R=ie(V(D),R),new K(V(R.g),V(R.h));if(U(R))return R=ie(D,V(R)),new K(V(R.g),R.h);if(D.g.length>30){if(U(D)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var L=w,q=R;q.l(D)<=0;)L=Ee(L),q=Ee(q);var M=ye(L,1),O=ye(q,1);for(q=ye(q,2),L=ye(L,2);!H(q);){var j=O.add(q);j.l(D)<=0&&(M=M.add(L),O=j),q=ye(q,1),L=ye(L,1)}return R=z(D,M.j(R)),new K(M,R)}for(M=x;D.l(R)>=0;){for(L=Math.max(1,Math.floor(D.m()/R.m())),q=Math.ceil(Math.log(L)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),O=_(L),j=O.j(R);U(j)||j.l(D)>0;)L-=q,O=_(L),j=O.j(R);H(O)&&(O=w),M=M.add(O),D=z(D,j)}return new K(M,D)}s.B=function(D){return ie(this,D).h},s.and=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let q=0;q<R;q++)L[q]=this.i(q)&D.i(q);return new h(L,this.h&D.h)},s.or=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let q=0;q<R;q++)L[q]=this.i(q)|D.i(q);return new h(L,this.h|D.h)},s.xor=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let q=0;q<R;q++)L[q]=this.i(q)^D.i(q);return new h(L,this.h^D.h)};function Ee(D){const R=D.g.length+1,L=[];for(let q=0;q<R;q++)L[q]=D.i(q)<<1|D.i(q-1)>>>31;return new h(L,D.h)}function ye(D,R){const L=R>>5;R%=32;const q=D.g.length-L,M=[];for(let O=0;O<q;O++)M[O]=R>0?D.i(O+L)>>>R|D.i(O+L+1)<<32-R:D.i(O+L);return new h(M,D.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Rb=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=S,fr=h}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cb,bc,Ib,od,Hm,kb,jb,Db;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=n(this);function o(d,v){if(v)e:{var b=a;d=d.split(".");for(var I=0;I<d.length-1;I++){var Z=d[I];if(!(Z in b))break e;b=b[Z]}d=d[d.length-1],I=b[d],v=v(I),v!=I&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var b=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&b.push([I,v[I]]);return b}});var u=u||{},h=this||self;function g(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function E(d,v,b){return d.call.apply(d.bind,arguments)}function _(d,v,b){return _=E,_.apply(null,arguments)}function S(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function x(d,v){function b(){}b.prototype=v.prototype,d.Z=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(I,Z,ae){for(var xe=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)xe[tt-2]=arguments[tt];return v.prototype[Z].apply(I,xe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function B(d){const v=d.length;if(v>0){const b=Array(v);for(let I=0;I<v;I++)b[I]=d[I];return b}return[]}function H(d,v){for(let I=1;I<arguments.length;I++){const Z=arguments[I];var b=typeof Z;if(b=b!="object"?b:Z?Array.isArray(Z)?"array":b:"null",b=="array"||b=="object"&&typeof Z.length=="number"){b=d.length||0;const ae=Z.length||0;d.length=b+ae;for(let xe=0;xe<ae;xe++)d[b+xe]=Z[xe]}else d.push(Z)}}class U{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(d){h.setTimeout(()=>{throw d},0)}function z(){var d=D;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class G{constructor(){this.h=this.g=null}add(v,b){const I=K.get();I.set(v,b),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new U(()=>new ie,d=>d.reset());class ie{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ye=!1,D=new G,R=()=>{const d=Promise.resolve(void 0);Ee=()=>{d.then(L)}};function L(){for(var d;d=z();){try{d.h.call(d.g)}catch(b){V(b)}var v=K;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}ye=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,v),h.removeEventListener("test",b,v)}catch{}return d})();function j(d){return/^[\s\xa0]*$/.test(d)}function Ae(d,v){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}x(Ae,M),Ae.prototype.init=function(d,v){const b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),Y=0;function fe(d,v,b,I,Z){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!I,this.ha=Z,this.key=++Y,this.da=this.fa=!1}function we(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function $e(d,v,b){for(const I in d)v.call(b,d[I],I,d)}function et(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function X(d){const v={};for(const b in d)v[b]=d[b];return v}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(d,v){let b,I;for(let Z=1;Z<arguments.length;Z++){I=arguments[Z];for(b in I)d[b]=I[b];for(let ae=0;ae<de.length;ae++)b=de[ae],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function Se(d){this.src=d,this.g={},this.h=0}Se.prototype.add=function(d,v,b,I,Z){const ae=d.toString();d=this.g[ae],d||(d=this.g[ae]=[],this.h++);const xe=ze(d,v,I,Z);return xe>-1?(v=d[xe],b||(v.fa=!1)):(v=new fe(v,this.src,ae,!!I,Z),v.fa=b,d.push(v)),v};function Me(d,v){const b=v.type;if(b in d.g){var I=d.g[b],Z=Array.prototype.indexOf.call(I,v,void 0),ae;(ae=Z>=0)&&Array.prototype.splice.call(I,Z,1),ae&&(we(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function ze(d,v,b,I){for(let Z=0;Z<d.length;++Z){const ae=d[Z];if(!ae.da&&ae.listener==v&&ae.capture==!!b&&ae.ha==I)return Z}return-1}var le="closure_lm_"+(Math.random()*1e6|0),Le={};function nt(d,v,b,I,Z){if(Array.isArray(v)){for(let ae=0;ae<v.length;ae++)nt(d,v[ae],b,I,Z);return null}return b=Ia(b),d&&d[Ze]?d.J(v,b,g(I)?!!I.capture:!1,Z):kt(d,v,b,!1,I,Z)}function kt(d,v,b,I,Z,ae){if(!v)throw Error("Invalid event type");const xe=g(Z)?!!Z.capture:!!Z;let tt=jt(d);if(tt||(d[le]=tt=new Se(d)),b=tt.add(v,b,I,xe,ae),b.proxy)return b;if(I=ln(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)O||(Z=xe),Z===void 0&&(Z=!1),d.addEventListener(v.toString(),I,Z);else if(d.attachEvent)d.attachEvent(Yn(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ln(){function d(b){return v.call(d.src,d.listener,b)}const v=Ca;return d}function Ut(d,v,b,I,Z){if(Array.isArray(v))for(var ae=0;ae<v.length;ae++)Ut(d,v[ae],b,I,Z);else I=g(I)?!!I.capture:!!I,b=Ia(b),d&&d[Ze]?(d=d.i,ae=String(v).toString(),ae in d.g&&(v=d.g[ae],b=ze(v,b,I,Z),b>-1&&(we(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete d.g[ae],d.h--)))):d&&(d=jt(d))&&(v=d.g[v.toString()],d=-1,v&&(d=ze(v,b,I,Z)),(b=d>-1?v[d]:null)&&zs(b))}function zs(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Ze])Me(v.i,d);else{var b=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(b,I,d.capture):v.detachEvent?v.detachEvent(Yn(b),I):v.addListener&&v.removeListener&&v.removeListener(I),(b=jt(v))?(Me(b,d),b.h==0&&(b.src=null,v[le]=null)):we(d)}}}function Yn(d){return d in Le?Le[d]:Le[d]="on"+d}function Ca(d,v){if(d.da)d=!0;else{v=new Ae(v,this);const b=d.listener,I=d.ha||d.src;d.fa&&zs(d),d=b.call(I,v)}return d}function jt(d){return d=d[le],d instanceof Se?d:null}var $i="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ia(d){return typeof d=="function"?d:(d[$i]||(d[$i]=function(v){return d.handleEvent(v)}),d[$i])}function Wt(){q.call(this),this.i=new Se(this),this.M=this,this.G=null}x(Wt,q),Wt.prototype[Ze]=!0,Wt.prototype.removeEventListener=function(d,v,b,I){Ut(this,d,v,b,I)};function an(d,v){var b,I=d.G;if(I)for(b=[];I;I=I.G)b.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new M(v,d);else if(v instanceof M)v.target=v.target||d;else{var Z=v;v=new M(I,d),oe(v,Z)}Z=!0;let ae,xe;if(b)for(xe=b.length-1;xe>=0;xe--)ae=v.g=b[xe],Z=As(ae,I,!0,v)&&Z;if(ae=v.g=d,Z=As(ae,I,!0,v)&&Z,Z=As(ae,I,!1,v)&&Z,b)for(xe=0;xe<b.length;xe++)ae=v.g=b[xe],Z=As(ae,I,!1,v)&&Z}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const b=d.g[v];for(let I=0;I<b.length;I++)we(b[I]);delete d.g[v],d.h--}}this.G=null},Wt.prototype.J=function(d,v,b,I){return this.i.add(String(d),v,!1,b,I)},Wt.prototype.K=function(d,v,b,I){return this.i.add(String(d),v,!0,b,I)};function As(d,v,b,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let Z=!0;for(let ae=0;ae<v.length;++ae){const xe=v[ae];if(xe&&!xe.da&&xe.capture==b){const tt=xe.listener,Jt=xe.ha||xe.src;xe.fa&&Me(d.i,xe),Z=tt.call(Jt,I)!==!1&&Z}}return Z&&!I.defaultPrevented}function Ll(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function br(d){d.g=Ll(()=>{d.g=null,d.i&&(d.i=!1,br(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class On extends q{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(d){q.call(this),this.h=d,this.g={}}x(di,q);var fi=[];function is(d){$e(d.g,function(v,b){this.g.hasOwnProperty(b)&&zs(v)},d),d.g={}}di.prototype.N=function(){di.Z.N.call(this),is(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=h.JSON.stringify,_o=h.JSON.parse,Sr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function go(){}function yo(){}var Rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Be(){M.call(this,"d")}x(Be,M);function as(){M.call(this,"c")}x(as,M);var $t={},Nr=null;function Cs(){return Nr=Nr||new Wt}$t.Ia="serverreachability";function Eo(d){M.call(this,$t.Ia,d)}x(Eo,M);function Sn(d){const v=Cs();an(v,new Eo(v))}$t.STAT_EVENT="statevent";function Ni(d,v){M.call(this,$t.STAT_EVENT,d),this.stat=v}x(Ni,M);function en(d){const v=Cs();an(v,new Ni(v,d))}$t.Ja="timingevent";function Is(d,v){M.call(this,$t.Ja,d),this.size=v}x(Is,M);function Ne(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function ks(){this.g=!0}ks.prototype.ua=function(){this.g=!1};function Ol(d,v,b,I,Z,ae){d.info(function(){if(d.g)if(ae){var xe="",tt=ae.split("&");for(let bt=0;bt<tt.length;bt++){var Jt=tt[bt].split("=");if(Jt.length>1){const Pt=Jt[0];Jt=Jt[1];const W=Pt.split("_");xe=W.length>=2&&W[1]=="type"?xe+(Pt+"="+Jt+"&"):xe+(Pt+"=redacted&")}}}else xe=null;else xe=ae;return"XMLHTTP REQ ("+I+") [attempt "+Z+"]: "+v+`
`+b+`
`+xe})}function Mn(d,v,b,I,Z,ae,xe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Z+"]: "+v+`
`+b+`
`+ae+" "+xe})}function ps(d,v,b,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+xr(d,b)+(I?" "+I:"")})}function mi(d,v){d.info(function(){return"TIMEOUT: "+v})}ks.prototype.info=function(){};function xr(d,v){if(!d.g)return v;if(!v)return null;try{const ae=JSON.parse(v);if(ae){for(d=0;d<ae.length;d++)if(Array.isArray(ae[d])){var b=ae[d];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var Z=I[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let xe=1;xe<I.length;xe++)I[xe]=""}}}}return hi(ae)}catch{return v}}var rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ka={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mn;function xi(){}x(xi,go),xi.prototype.g=function(){return new XMLHttpRequest},mn=new xi;function Qn(d){return encodeURIComponent(String(d))}function wr(d){var v=1;d=d.split(":");const b=[];for(;v>0&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function _s(d,v,b,I){this.j=d,this.i=v,this.l=b,this.S=I||1,this.V=new di(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var mt={},cn={};function Xs(d,v,b){d.M=1,d.A=Ys(Lt(v)),d.u=b,d.R=!0,wi(d,null)}function wi(d,v){d.F=Date.now(),os(d),d.B=Lt(d.A);var b=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),ys(b.i,"t",I),d.C=0,b=d.j.L,d.h=new Kn,d.g=Ao(d.j,b?v:null,!d.u),d.P>0&&(d.O=new On(_(d.Y,d,d.g),d.P)),v=d.V,b=d.g,I=d.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(fi[0]=Z.toString()),Z=fi);for(let ae=0;ae<Z.length;ae++){const xe=nt(b,Z[ae],I||v.handleEvent,!1,v.h||v);if(!xe)break;v.g[xe.key]=xe}v=d.J?X(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Sn(),Ol(d.i,d.v,d.B,d.l,d.S,d.u)}_s.prototype.ba=function(d){d=d.target;const v=this.O;v&&De(d)==3?v.j():this.Y(d)},_s.prototype.Y=function(d){try{if(d==this.g)e:{const tt=De(this.g),Jt=this.g.ya(),bt=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||Fe(this.g)))){this.K||tt!=4||Jt==7||(Jt==8||bt<=0?Sn(3):Sn(2)),un(this);var v=this.g.ca();this.X=v;var b=Ml(this);if(this.o=v==200,Mn(this.i,this.v,this.B,this.l,this.S,tt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,Z=this.g;if((I=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(I)){var ae=I;break t}}ae=null}if(d=ae)ps(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,d);else{this.o=!1,this.m=3,en(12),Vn(this),Un(this);break e}}if(this.R){d=!0;let Pt;for(;!this.K&&this.C<b.length;)if(Pt=Ar(this,b),Pt==cn){tt==4&&(this.m=4,en(14),d=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==mt){this.m=4,en(15),ps(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else ps(this.i,this.l,Pt,null),js(this,Pt);if(ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||b.length!=0||this.h.h||(this.m=1,en(16),d=!1),this.o=this.o&&d,!d)ps(this.i,this.l,b,"[Invalid Chunked Response]"),Vn(this),Un(this);else if(b.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Lr(xe),xe.P=!0,en(11))}}else ps(this.i,this.l,b,null),js(this,b);tt==4&&Vn(this),this.o&&!this.K&&(tt==4?Or(this.j,this):(this.o=!1,os(this)))}else Ke(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,en(12)):(this.m=0,en(13)),Vn(this),Un(this)}}}catch{}};function Ml(d){if(!ja(d))return d.g.la();const v=Fe(d.g);if(v==="")return"";let b="";const I=v.length,Z=De(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Vn(d),Un(d),"";d.h.i=new h.TextDecoder}for(let ae=0;ae<I;ae++)d.h.h=!0,b+=d.h.i.decode(v[ae],{stream:!(Z&&ae==I-1)});return v.length=0,d.h.g+=b,d.C=0,d.h.g}function ja(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Ar(d,v){var b=d.C,I=v.indexOf(`
`,b);return I==-1?cn:(b=Number(v.substring(b,I)),isNaN(b)?mt:(I+=1,I+b>v.length?cn:(v=v.slice(I,I+b),d.C=I+b,v)))}_s.prototype.cancel=function(){this.K=!0,Vn(this)};function os(d){d.T=Date.now()+d.H,Da(d,d.H)}function Da(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ne(_(d.aa,d),v)}function un(d){d.D&&(h.clearTimeout(d.D),d.D=null)}_s.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(mi(this.i,this.B),this.M!=2&&(Sn(),en(17)),Vn(this),this.m=2,Un(this)):Da(this,this.T-d)};function Un(d){d.j.I==0||d.K||Or(d.j,d)}function Vn(d){un(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,is(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function js(d,v){try{var b=d.j;if(b.I!=0&&(b.g==d||Ds(b.h,d))){if(!d.L&&Ds(b.h,d)&&b.I==3){try{var I=b.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Z=I;if(Z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Va(b),ki(b);else break e;ta(b),en(18)}}else b.xa=Z[1],0<b.xa-b.K&&Z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ne(_(b.Va,b),6e3));ls(b.h)<=1&&b.ta&&(b.ta=void 0)}else ei(b,11)}else if((d.L||b.g==d)&&Va(b),!j(v))for(Z=b.Ba.g.parse(v),v=0;v<Z.length;v++){let bt=Z[v];const Pt=bt[0];if(!(Pt<=b.K))if(b.K=Pt,bt=bt[1],b.I==2)if(bt[0]=="c"){b.M=bt[1],b.ba=bt[2];const W=bt[3];W!=null&&(b.ka=W,b.j.info("VER="+b.ka));const me=bt[4];me!=null&&(b.za=me,b.j.info("SVER="+b.za));const Re=bt[5];Re!=null&&typeof Re=="number"&&Re>0&&(I=1.5*Re,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const Ue=d.g;if(Ue){const Ye=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ye){var ae=I.h;ae.g||Ye.indexOf("spdy")==-1&&Ye.indexOf("quic")==-1&&Ye.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&($s(ae,ae.h),ae.h=null))}if(I.G){const pt=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;pt&&(I.wa=pt,Tt(I.J,I.G,pt))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var xe=d;if(I.na=wo(I,I.L?I.ba:null,I.W),xe.L){Yi(I.h,xe);var tt=xe,Jt=I.O;Jt&&(tt.H=Jt),tt.D&&(un(tt),os(tt)),I.g=xe}else bo(I);b.i.length>0&&Zs(b)}else bt[0]!="stop"&&bt[0]!="close"||ei(b,7);else b.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?ei(b,7):Ua(b):bt[0]!="noop"&&b.l&&b.l.qa(bt),b.A=0)}}Sn(4)}catch{}}var tn=class{constructor(d,v){this.g=d,this.map=v}};function pi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function La(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ls(d){return d.h?1:d.g?d.g.size:0}function Ds(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function $s(d,v){d.g?d.g.add(v):d.h=v}function Yi(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}pi.prototype.cancel=function(){if(this.i=Oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Oa(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.G);return v}return B(d.i)}var Rr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qi(d,v){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const I=d[b].indexOf("=");let Z,ae=null;I>=0?(Z=d[b].substring(0,I),ae=d[b].substring(I+1)):Z=d[b],v(Z,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function cs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof cs?(this.l=d.l,at(this,d.j),this.o=d.o,this.g=d.g,Wn(this,d.u),this.h=d.h,Ai(this,Ma(d.i)),this.m=d.m):d&&(v=String(d).match(Rr))?(this.l=!1,at(this,v[1]||"",!0),this.o=gs(v[2]||""),this.g=gs(v[3]||"",!0),Wn(this,v[4]),this.h=gs(v[5]||"",!0),Ai(this,v[6]||"",!0),this.m=gs(v[7]||"")):(this.l=!1,this.i=new Ws(null,this.l))}cs.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Ki(v,Qs,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Ki(v,Qs,!0),"@"),d.push(Qn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Ki(b,b.charAt(0)=="/"?Ir:Cr,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Ki(b,kr)),d.join("")},cs.prototype.resolve=function(d){const v=Lt(this);let b=!!d.j;b?at(v,d.j):b=!!d.o,b?v.o=d.o:b=!!d.g,b?v.g=d.g:b=d.u!=null;var I=d.h;if(b)Wn(v,d.u);else if(b=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var Z=v.h.lastIndexOf("/");Z!=-1&&(I=v.h.slice(0,Z+1)+I)}if(Z=I,Z==".."||Z==".")I="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){I=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const ae=[];for(let xe=0;xe<Z.length;){const tt=Z[xe++];tt=="."?I&&xe==Z.length&&ae.push(""):tt==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),I&&xe==Z.length&&ae.push("")):(ae.push(tt),I=!0)}I=ae.join("/")}else I=Z}return b?v.h=I:b=d.i.toString()!=="",b?Ai(v,Ma(d.i)):b=!!d.m,b&&(v.m=d.m),v};function Lt(d){return new cs(d)}function at(d,v,b){d.j=b?gs(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Wn(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Ai(d,v,b){v instanceof Ws?(d.i=v,us(d.i,d.l)):(b||(v=Ki(v,Ks)),d.i=new Ws(v,d.l))}function Tt(d,v,b){d.i.set(v,b)}function Ys(d){return Tt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function gs(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ki(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,Jn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Qs=/[#\/\?@]/g,Cr=/[#\?:]/g,Ir=/[#\?]/g,Ks=/[#\?@]/g,kr=/#/g;function Ws(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function An(d){d.g||(d.g=new Map,d.h=0,d.i&&Qi(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=Ws.prototype,s.add=function(d,v){An(this),this.i=null,d=Rn(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function vo(d,v){An(d),v=Rn(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ri(d,v){return An(d),v=Rn(d,v),d.g.has(v)}s.forEach=function(d,v){An(this),this.g.forEach(function(b,I){b.forEach(function(Z){d.call(v,Z,I,this)},this)},this)};function Ci(d,v){An(d);let b=[];if(typeof v=="string")Ri(d,v)&&(b=b.concat(d.g.get(Rn(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)b=b.concat(d[v]);return b}s.set=function(d,v){return An(this),this.i=null,d=Rn(this,d),Ri(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Ci(this,d),d.length>0?String(d[0]):v):v};function ys(d,v,b){vo(d,v),b.length>0&&(d.i=null,d.g.set(Rn(d,v),B(b)),d.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var b=v[I];const Z=Qn(b);b=Ci(this,b);for(let ae=0;ae<b.length;ae++){let xe=Z;b[ae]!==""&&(xe+="="+Qn(b[ae])),d.push(xe)}}return this.i=d.join("&")};function Ma(d){const v=new Ws;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Rn(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function us(d,v){v&&!d.j&&(An(d),d.i=null,d.g.forEach(function(b,I){const Z=I.toLowerCase();I!=Z&&(vo(this,I),ys(this,Z,b))},d)),d.j=v}function qn(d,v){const b=new ks;if(h.Image){const I=new Image;I.onload=S(Ce,b,"TestLoadImage: loaded",!0,v,I),I.onerror=S(Ce,b,"TestLoadImage: error",!1,v,I),I.onabort=S(Ce,b,"TestLoadImage: abort",!1,v,I),I.ontimeout=S(Ce,b,"TestLoadImage: timeout",!1,v,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function jr(d,v){const b=new ks,I=new AbortController,Z=setTimeout(()=>{I.abort(),Ce(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(ae=>{clearTimeout(Z),ae.ok?Ce(b,"TestPingServer: ok",!0,v):Ce(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Z),Ce(b,"TestPingServer: error",!1,v)})}function Ce(d,v,b,I,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),I(b)}catch{}}function Js(){this.g=new Sr}function ds(d){this.i=d.Sb||null,this.h=d.ab||!1}x(ds,go),ds.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(d,v){Wt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ii,Wt),s=Ii.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,pn(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wi(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wi(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Es(this):pn(this),this.readyState==3&&Wi(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Es(this))},s.Na=function(d){this.g&&(this.response=d,Es(this))},s.ga=function(){this.g&&Es(this)};function Es(d){d.readyState=4,d.l=null,d.j=null,d.B=null,pn(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function pn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Cn(d){let v="";return $e(d,function(b,I){v+=I,v+=":",v+=b,v+=`\r
`}),v}function _i(d,v,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Cn(b),typeof d=="string"?b!=null&&Qn(b):Tt(d,v,b))}function m(d){Wt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(m,Wt);var y=/^https?$/i,N=["POST","PUT"];s=m.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mn.g(),this.g.onreadystatechange=w(_(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(ae){C(this,ae);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Z in I)b.set(Z,I[Z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ae of I.keys())b.set(ae,I.get(ae));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(ae=>ae.toLowerCase()=="content-type"),Z=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(N,v,void 0)>=0)||I||Z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,xe]of b)this.g.setRequestHeader(ae,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ae){C(this,ae)}};function C(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,F(d),ce(d)}function F(d){d.A||(d.A=!0,an(d,"complete"),an(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,an(this,"complete"),an(this,"abort"),ce(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ce(this,!0)),m.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?J(this):this.Xa())},s.Xa=function(){J(this)};function J(d){if(d.h&&typeof u<"u"){if(d.v&&De(d)==4)setTimeout(d.Ca.bind(d),0);else if(an(d,"readystatechange"),De(d)==4){d.h=!1;try{const ae=d.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var I;if(I=ae===0){let xe=String(d.D).match(Rr)[1]||null;!xe&&h.self&&h.self.location&&(xe=h.self.location.protocol.slice(0,-1)),I=!y.test(xe?xe.toLowerCase():"")}b=I}if(b)an(d,"complete"),an(d,"success");else{d.o=6;try{var Z=De(d)>2?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.ca()+"]",F(d)}}finally{ce(d)}}}}function ce(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,v||an(d,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function De(d){return d.g?d.g.readyState:0}s.ca=function(){try{return De(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),_o(v)}};function Fe(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ke(d){const v={};d=(d.g&&De(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(j(d[I]))continue;var b=wr(d[I]);const Z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const ae=v[Z]||[];v[Z]=ae,ae.push(b)}et(v,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xt(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function nn(d){this.za=0,this.i=[],this.j=new ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xt("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xt("baseRetryDelayMs",5e3,d),this.Za=xt("retryDelaySeedMs",1e4,d),this.Ta=xt("forwardChannelMaxRetries",2,d),this.va=xt("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new pi(d&&d.concurrentRequestLimit),this.Ba=new Js,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=nn.prototype,s.ka=8,s.I=1,s.connect=function(d,v,b,I){en(0),this.W=d,this.H=v||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=wo(this,null,this.W),Zs(this)};function Ua(d){if(Ji(d),d.I==3){var v=d.V++,b=Lt(d.J);if(Tt(b,"SID",d.M),Tt(b,"RID",v),Tt(b,"TYPE","terminate"),ea(d,b),v=new _s(d,d.j,v),v.M=2,v.A=Ys(Lt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=v.A,b=!0),b||(v.g=Ao(v.j,null),v.g.ea(v.A)),v.F=Date.now(),os(v)}xo(d)}function ki(d){d.g&&(Lr(d),d.g.cancel(),d.g=null)}function Ji(d){ki(d),d.v&&(h.clearTimeout(d.v),d.v=null),Va(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Zs(d){if(!La(d.h)&&!d.m){d.m=!0;var v=d.Ea;Ee||R(),ye||(Ee(),ye=!0),D.add(v,d),d.D=0}}function Zi(d,v){return ls(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ne(_(d.Ea,d,v),No(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Z=new _s(this,this.j,d);let ae=this.o;if(this.U&&(ae?(ae=X(ae),oe(ae,this.U)):ae=this.U),this.u!==null||this.R||(Z.J=ae,ae=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=To(this,Z,v),b=Lt(this.J),Tt(b,"RID",d),Tt(b,"CVER",22),this.G&&Tt(b,"X-HTTP-Session-Id",this.G),ea(this,b),ae&&(this.R?v="headers="+Qn(Cn(ae))+"&"+v:this.u&&_i(b,this.u,ae)),$s(this.h,Z),this.Ra&&Tt(b,"TYPE","init"),this.S?(Tt(b,"$req",v),Tt(b,"SID","null"),Z.U=!0,Xs(Z,b,null)):Xs(Z,b,v),this.I=2}}else this.I==3&&(d?Dr(this,d):this.i.length==0||La(this.h)||Dr(this))};function Dr(d,v){var b;v?b=v.l:b=d.V++;const I=Lt(d.J);Tt(I,"SID",d.M),Tt(I,"RID",b),Tt(I,"AID",d.K),ea(d,I),d.u&&d.o&&_i(I,d.u,d.o),b=new _s(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),v&&(d.i=v.G.concat(d.i)),v=To(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),$s(d.h,b),Xs(b,I,v)}function ea(d,v){d.H&&$e(d.H,function(b,I){Tt(v,I,b)}),d.l&&$e({},function(b,I){Tt(v,I,b)})}function To(d,v,b){b=Math.min(d.i.length,b);const I=d.l?_(d.l.Ka,d.l,d):null;e:{var Z=d.i;let tt=-1;for(;;){const Jt=["count="+b];tt==-1?b>0?(tt=Z[0].g,Jt.push("ofs="+tt)):tt=0:Jt.push("ofs="+tt);let bt=!0;for(let Pt=0;Pt<b;Pt++){var ae=Z[Pt].g;const W=Z[Pt].map;if(ae-=tt,ae<0)tt=Math.max(0,Z[Pt].g-100),bt=!1;else try{ae="req"+ae+"_"||"";try{var xe=W instanceof Map?W:Object.entries(W);for(const[me,Re]of xe){let Ue=Re;g(Re)&&(Ue=hi(Re)),Jt.push(ae+me+"="+encodeURIComponent(Ue))}}catch(me){throw Jt.push(ae+"type="+encodeURIComponent("_badmap")),me}}catch{I&&I(W)}}if(bt){xe=Jt.join("&");break e}}xe=void 0}return d=d.i.splice(0,b),v.G=d,xe}function bo(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Ee||R(),ye||(Ee(),ye=!0),D.add(v,d),d.A=0}}function ta(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ne(_(d.Da,d),No(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,So(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ne(_(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,en(10),ki(this),So(this))};function Lr(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function So(d){d.g=new _s(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Lt(d.na);Tt(v,"RID","rpc"),Tt(v,"SID",d.M),Tt(v,"AID",d.K),Tt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Tt(v,"TO",d.ia),Tt(v,"TYPE","xmlhttp"),ea(d,v),d.u&&d.o&&_i(v,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Ys(Lt(v)),b.u=null,b.R=!0,wi(b,d)}s.Va=function(){this.C!=null&&(this.C=null,ki(this),ta(this),en(19))};function Va(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Or(d,v){var b=null;if(d.g==v){Va(d),Lr(d),d.g=null;var I=2}else if(Ds(d.h,v))b=v.G,Yi(d.h,v),I=1;else return;if(d.I!=0){if(v.o)if(I==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var Z=d.D;I=Cs(),an(I,new Is(I,b)),Zs(d)}else bo(d);else if(Z=v.m,Z==3||Z==0&&v.X>0||!(I==1&&Zi(d,v)||I==2&&ta(d)))switch(b&&b.length>0&&(v=d.h,v.i=v.i.concat(b)),Z){case 1:ei(d,5);break;case 4:ei(d,10);break;case 3:ei(d,6);break;default:ei(d,2)}}}function No(d,v){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*v}function ei(d,v){if(d.j.info("Error code "+v),v==2){var b=_(d.bb,d),I=d.Ua;const Z=!I;I=new cs(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||at(I,"https"),Ys(I),Z?qn(I.toString(),b):jr(I.toString(),b)}else en(2);d.I=0,d.l&&d.l.pa(v),xo(d),Ji(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function xo(d){if(d.I=0,d.ja=[],d.l){const v=Oa(d.h);(v.length!=0||d.i.length!=0)&&(H(d.ja,v),H(d.ja,d.i),d.h.i.length=0,B(d.i),d.i.length=0),d.l.oa()}}function wo(d,v,b){var I=b instanceof cs?Lt(b):new cs(b);if(I.g!="")v&&(I.g=v+"."+I.g),Wn(I,I.u);else{var Z=h.location;I=Z.protocol,v=v?v+"."+Z.hostname:Z.hostname,Z=+Z.port;const ae=new cs(null);I&&at(ae,I),v&&(ae.g=v),Z&&Wn(ae,Z),b&&(ae.h=b),I=ae}return b=d.G,v=d.wa,b&&v&&Tt(I,b,v),Tt(I,"VER",d.ka),ea(d,I),I}function Ao(d,v,b){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new m(new ds({ab:b})):new m(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}s=Ro.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ji(){}ji.prototype.g=function(d,v){return new In(d,v)};function In(d,v){Wt.call(this),this.g=new nn(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!j(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!j(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new gi(this)}x(In,Wt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Ua(this.g)},In.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=hi(d),d=b);v.i.push(new tn(v.Ya++,d)),v.I==3&&Zs(v)},In.prototype.N=function(){this.g.l=null,delete this.j,Ua(this.g),delete this.g,In.Z.N.call(this)};function Co(d){Be.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}x(Co,Be);function Io(){as.call(this),this.status=1}x(Io,as);function gi(d){this.g=d}x(gi,Ro),gi.prototype.ra=function(){an(this.g,"a")},gi.prototype.qa=function(d){an(this.g,new Co(d))},gi.prototype.pa=function(d){an(this.g,new Io)},gi.prototype.oa=function(){an(this.g,"b")},ji.prototype.createWebChannel=ji.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Db=function(){return new ji},jb=function(){return Cs()},kb=$t,Hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,od=rs,ka.COMPLETE="complete",Ib=ka,yo.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,bc=yo,m.prototype.listenOnce=m.prototype.K,m.prototype.getLastError=m.prototype.Ha,m.prototype.getLastErrorCode=m.prototype.ya,m.prototype.getStatus=m.prototype.ca,m.prototype.getResponseJson=m.prototype.La,m.prototype.getResponseText=m.prototype.la,m.prototype.send=m.prototype.ea,m.prototype.setWithCredentials=m.prototype.Fa,Cb=m}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});class ts{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let Cl="12.8.0";function dR(s){Cl=s}const no=new Tb("@firebase/firestore");function ll(){return no.logLevel}function ke(s,...e){if(no.logLevel<=Nt.DEBUG){const n=e.map(Sp);no.debug(`Firestore (${Cl}): ${s}`,...n)}}function wa(s,...e){if(no.logLevel<=Nt.ERROR){const n=e.map(Sp);no.error(`Firestore (${Cl}): ${s}`,...n)}}function vl(s,...e){if(no.logLevel<=Nt.WARN){const n=e.map(Sp);no.warn(`Firestore (${Cl}): ${s}`,...n)}}function Sp(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Je(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Lb(s,a,n)}function Lb(s,e,n){let a=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw wa(a),new Error(a)}function Dt(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||Lb(e,o,a)}function lt(s,e){return s}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends oo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Ob{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ts.UNAUTHENTICATED)))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mR{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Dt(this.o===void 0,42304);let a=this.i;const o=E=>this.i!==a?(a=this.i,n(E)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const E=u;e.enqueueRetryable((async()=>{await E.promise,await o(this.currentUser)}))},g=E=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((E=>g(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?g(E):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Dt(typeof a.accessToken=="string",31837,{l:a}),new Ob(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string",2055,{h:e}),new ts(e)}}class pR{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class _R{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new pR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ts.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,QA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Dt(this.o===void 0,3512);const a=u=>{u.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=yR(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function yt(s,e){return s<e?-1:s>e?1:0}function zm(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return gm(o)===gm(u)?yt(o,u):gm(o)?1:-1}return yt(s.length,e.length)}const ER=55296,vR=57343;function gm(s){const e=s.charCodeAt(0);return e>=ER&&e<=vR}function Tl(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}const kv="__name__";class Vi{constructor(e,n,a){n===void 0?n=0:n>e.length&&Je(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Je(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=Vi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return yt(e.length,n.length)}static compareSegments(e,n){const a=Vi.isNumericId(e),o=Vi.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}}class Xt extends Vi{construct(e,n,a){return new Xt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new Xt(n)}static emptyPath(){return new Xt([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Vi{construct(e,n,a){return new Xn(e,n,a)}static isValidIdentifier(e){return TR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new Xn([kv])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new je(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new je(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new je(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=E,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new je(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(n)}static emptyPath(){return new Xn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Xt.fromString(e))}static fromName(e){return new He(Xt.fromString(e).popFirst(5))}static empty(){return new He(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Xt(e.slice()))}}function Mb(s,e,n){if(!n)throw new je(_e.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function bR(s,e,n,a){if(e===!0&&a===!0)throw new je(_e.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function jv(s){if(!He.isDocumentKey(s))throw new je(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Dv(s){if(He.isDocumentKey(s))throw new je(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Ub(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Bd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Je(12329,{type:typeof s})}function bl(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new je(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bd(s);throw new je(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function bn(s,e){const n={typeString:s};return e&&(n.value=e),n}function Pc(s,e){if(!Ub(s))throw new je(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new je(_e.INVALID_ARGUMENT,n);return!0}const Lv=-62135596800,Ov=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Ov);return new Kt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lv)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pc(e,Kt._jsonSchema))return new Kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:bn("string",Kt._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new Kt(0,0))}static max(){return new it(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const jc=-1;function SR(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=it.fromTimestamp(a===1e9?new Kt(n+1,0):new Kt(n,a));return new _r(o,He.empty(),e)}function NR(s){return new _r(s.readTime,s.key,jc)}class _r{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new _r(it.min(),He.empty(),jc)}static max(){return new _r(it.max(),He.empty(),jc)}}function xR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=He.comparator(s.documentKey,e.documentKey),n!==0?n:yt(s.largestBatchId,e.largestBatchId))}const wR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Il(s){if(s.code!==_e.FAILED_PRECONDITION||s.message!==wR)throw s;ke("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ge.reject(n)}static resolve(e){return new ge(((n,a)=>{n(e)}))}static reject(e){return new ge(((n,a)=>{a(e)}))}static waitFor(e){return new ge(((n,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&n()}),(E=>a(E)))})),h=!0,u===o&&n()}))}static or(e){let n=ge.resolve(!1);for(const a of e)n=n.next((o=>o?ge.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new ge(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let E=0;E<u;E++){const _=E;n(e[_]).next((S=>{h[_]=S,++g,g===u&&a(h)}),(S=>o(S)))}}))}static doWhile(e,n){return new ge(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function RR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kl(s){return s.name==="IndexedDbTransactionError"}class Pd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pd.ce=-1;const xp=-1;function Fd(s){return s==null}function gd(s){return s===0&&1/s==-1/0}function CR(s){return typeof s=="number"&&Number.isInteger(s)&&!gd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Vb="";function IR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Mv(e)),e=kR(s.get(n),e);return Mv(e)}function kR(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case Vb:n+="";break;default:n+=u}}return n}function Mv(s){return s+Vb+""}function Uv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function lo(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function qb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class sn{constructor(e,n){this.comparator=e,this.root=n||zn.EMPTY}insert(e,n){return new sn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??zn.RED,this.left=o??zn.EMPTY,this.right=u??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new zn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return zn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Je(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Je(57766)}get value(){throw Je(16141)}get color(){throw Je(16727)}get left(){throw Je(29726)}get right(){throw Je(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new wn(this.comparator);return n.data=e,n}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new Ti([])}unionWith(e){let n=new wn(Xn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class Bb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Bb("Invalid base64 string: "+u):u}})(e);return new $n(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const jR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(s){if(Dt(!!s,39018),typeof s=="string"){let e=0;const n=jR.exec(s);if(Dt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:hn(s.seconds),nanos:hn(s.nanos)}}function hn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?$n.fromBase64String(s):$n.fromUint8Array(s)}const Pb="server_timestamp",Fb="__type__",Gb="__previous_value__",Hb="__local_write_time__";function wp(s){return(s?.mapValue?.fields||{})[Fb]?.stringValue===Pb}function Gd(s){const e=s.mapValue.fields[Gb];return wp(e)?Gd(e):e}function Dc(s){const e=gr(s.mapValue.fields[Hb].timestampValue);return new Kt(e.seconds,e.nanos)}class DR{constructor(e,n,a,o,u,h,g,E,_,S,x){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=E,this.useFetchStreams=_,this.isUsingEmulator=S,this.apiKey=x}}const yd="(default)";class Lc{constructor(e,n){this.projectId=e,this.database=n||yd}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===yd}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}function LR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new je(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(s.options.projectId,e)}const zb="__type__",OR="__max__",Zu={mapValue:{}},Xb="__vector__",Ed="value";function Er(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wp(s)?4:UR(s)?9007199254740991:MR(s)?10:11:Je(28295,{value:s})}function Hi(s,e){if(s===e)return!0;const n=Er(s);if(n!==Er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Dc(s).isEqual(Dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=gr(o.timestampValue),g=gr(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return yr(o.bytesValue).isEqual(yr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return hn(o.geoPointValue.latitude)===hn(u.geoPointValue.latitude)&&hn(o.geoPointValue.longitude)===hn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return hn(o.integerValue)===hn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=hn(o.doubleValue),g=hn(u.doubleValue);return h===g?gd(h)===gd(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return Tl(s.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(Uv(h)!==Uv(g))return!1;for(const E in h)if(h.hasOwnProperty(E)&&(g[E]===void 0||!Hi(h[E],g[E])))return!1;return!0})(s,e);default:return Je(52216,{left:s})}}function Oc(s,e){return(s.values||[]).find((n=>Hi(n,e)))!==void 0}function Sl(s,e){if(s===e)return 0;const n=Er(s),a=Er(e);if(n!==a)return yt(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return yt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=hn(u.integerValue||u.doubleValue),E=hn(h.integerValue||h.doubleValue);return g<E?-1:g>E?1:g===E?0:isNaN(g)?isNaN(E)?0:-1:1})(s,e);case 3:return qv(s.timestampValue,e.timestampValue);case 4:return qv(Dc(s),Dc(e));case 5:return zm(s.stringValue,e.stringValue);case 6:return(function(u,h){const g=yr(u),E=yr(h);return g.compareTo(E)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),E=h.split("/");for(let _=0;_<g.length&&_<E.length;_++){const S=yt(g[_],E[_]);if(S!==0)return S}return yt(g.length,E.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=yt(hn(u.latitude),hn(h.latitude));return g!==0?g:yt(hn(u.longitude),hn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Bv(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},E=h.fields||{},_=g[Ed]?.arrayValue,S=E[Ed]?.arrayValue,x=yt(_?.values?.length||0,S?.values?.length||0);return x!==0?x:Bv(_,S)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Zu.mapValue&&h===Zu.mapValue)return 0;if(u===Zu.mapValue)return 1;if(h===Zu.mapValue)return-1;const g=u.fields||{},E=Object.keys(g),_=h.fields||{},S=Object.keys(_);E.sort(),S.sort();for(let x=0;x<E.length&&x<S.length;++x){const w=zm(E[x],S[x]);if(w!==0)return w;const B=Sl(g[E[x]],_[S[x]]);if(B!==0)return B}return yt(E.length,S.length)})(s.mapValue,e.mapValue);default:throw Je(23264,{he:n})}}function qv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return yt(s,e);const n=gr(s),a=gr(e),o=yt(n.seconds,a.seconds);return o!==0?o:yt(n.nanos,a.nanos)}function Bv(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Sl(n[o],a[o]);if(u)return u}return yt(n.length,a.length)}function Nl(s){return Xm(s)}function Xm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=gr(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return He.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=Xm(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${Xm(n.fields[h])}`;return o+"}"})(s.mapValue):Je(61005,{value:s})}function ld(s){switch(Er(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(s);return e?16+ld(e):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+ld(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return lo(a.fields,((u,h)=>{o+=u.length+ld(h)})),o})(s.mapValue);default:throw Je(13486,{value:s})}}function Pv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function $m(s){return!!s&&"integerValue"in s}function Ap(s){return!!s&&"arrayValue"in s}function Fv(s){return!!s&&"nullValue"in s}function Gv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function cd(s){return!!s&&"mapValue"in s}function MR(s){return(s?.mapValue?.fields||{})[zb]?.stringValue===Xb}function wc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return lo(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=wc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(s.arrayValue.values[n]);return e}return{...s}}function UR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===OR}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!cd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=Xn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const E=this.getFieldsMap(n);this.applyChanges(E,a,o),a={},o=[],n=g.popLast()}h?a[g.lastSegment()]=wc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());cd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];cd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){lo(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new ci(wc(this.value))}}function $b(s){const e=[];return lo(s.fields,((n,a)=>{const o=new Xn([n]);if(cd(a)){const u=$b(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Ti(e)}class ns{constructor(e,n,a,o,u,h,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new ns(e,0,it.min(),it.min(),it.min(),ci.empty(),0)}static newFoundDocument(e,n,a,o){return new ns(e,1,n,it.min(),a,o,0)}static newNoDocument(e,n){return new ns(e,2,n,it.min(),it.min(),ci.empty(),0)}static newUnknownDocument(e,n){return new ns(e,3,n,it.min(),it.min(),ci.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ns&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vd{constructor(e,n){this.position=e,this.inclusive=n}}function Hv(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?a=He.comparator(He.fromName(h.referenceValue),n.key):a=Sl(h,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function zv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Hi(s.position[n],e.position[n]))return!1;return!0}class Td{constructor(e,n="asc"){this.field=e,this.dir=n}}function VR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Yb{}class Tn extends Yb{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new BR(e,n,a):n==="array-contains"?new GR(e,a):n==="in"?new HR(e,a):n==="not-in"?new zR(e,a):n==="array-contains-any"?new XR(e,a):new Tn(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new PR(e,a):new FR(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sl(n,this.value)):n!==null&&Er(this.value)===Er(n)&&this.matchesComparison(Sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends Yb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Si(e,n)}matches(e){return Qb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qb(s){return s.op==="and"}function Kb(s){return qR(s)&&Qb(s)}function qR(s){for(const e of s.filters)if(e instanceof Si)return!1;return!0}function Ym(s){if(s instanceof Tn)return s.field.canonicalString()+s.op.toString()+Nl(s.value);if(Kb(s))return s.filters.map((e=>Ym(e))).join(",");{const e=s.filters.map((n=>Ym(n))).join(",");return`${s.op}(${e})`}}function Wb(s,e){return s instanceof Tn?(function(a,o){return o instanceof Tn&&a.op===o.op&&a.field.isEqual(o.field)&&Hi(a.value,o.value)})(s,e):s instanceof Si?(function(a,o){return o instanceof Si&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&Wb(h,o.filters[g])),!0):!1})(s,e):void Je(19439)}function Jb(s){return s instanceof Tn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nl(n.value)}`})(s):s instanceof Si?(function(n){return n.op.toString()+" {"+n.getFilters().map(Jb).join(" ,")+"}"})(s):"Filter"}class BR extends Tn{constructor(e,n,a){super(e,n,a),this.key=He.fromName(a.referenceValue)}matches(e){const n=He.comparator(e.key,this.key);return this.matchesComparison(n)}}class PR extends Tn{constructor(e,n){super(e,"in",n),this.keys=Zb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FR extends Tn{constructor(e,n){super(e,"not-in",n),this.keys=Zb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Zb(s,e){return(e.arrayValue?.values||[]).map((n=>He.fromName(n.referenceValue)))}class GR extends Tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ap(n)&&Oc(n.arrayValue,this.value)}}class HR extends Tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class zR extends Tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class XR extends Tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Oc(this.value.arrayValue,a)))}}class $R{constructor(e,n=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function Xv(s,e=null,n=[],a=[],o=null,u=null,h=null){return new $R(s,e,n,a,o,u,h)}function Rp(s){const e=lt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Ym(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Nl(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Nl(a))).join(",")),e.Te=n}return e.Te}function Cp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!VR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Wb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!zv(s.startAt,e.startAt)&&zv(s.endAt,e.endAt)}function Qm(s){return He.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Fc{constructor(e,n=null,a=[],o=[],u=null,h="F",g=null,E=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function YR(s,e,n,a,o,u,h,g){return new Fc(s,e,n,a,o,u,h,g)}function e0(s){return new Fc(s)}function $v(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function QR(s){return He.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function t0(s){return s.collectionGroup!==null}function Ac(s){const e=lt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new wn(Xn.comparator);return h.filters.forEach((E=>{E.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Td(u,a))})),n.has(Xn.keyField().canonicalString())||e.Ie.push(new Td(Xn.keyField(),a))}return e.Ie}function Bi(s){const e=lt(s);return e.Ee||(e.Ee=KR(e,Ac(s))),e.Ee}function KR(s,e){if(s.limitType==="F")return Xv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Td(o.field,u)}));const n=s.endAt?new vd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new vd(s.startAt.position,s.startAt.inclusive):null;return Xv(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Km(s,e){const n=s.filters.concat([e]);return new Fc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Wm(s,e,n){return new Fc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Hd(s,e){return Cp(Bi(s),Bi(e))&&s.limitType===e.limitType}function n0(s){return`${Rp(Bi(s))}|lt:${s.limitType}`}function cl(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>Jb(o))).join(", ")}]`),Fd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>Nl(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>Nl(o))).join(",")),`Target(${a})`})(Bi(s))}; limitType=${s.limitType})`}function zd(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):He.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of Ac(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,E){const _=Hv(h,g,E);return h.inclusive?_<=0:_<0})(a.startAt,Ac(a),o)||a.endAt&&!(function(h,g,E){const _=Hv(h,g,E);return h.inclusive?_>=0:_>0})(a.endAt,Ac(a),o))})(s,e)}function WR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function s0(s){return(e,n)=>{let a=!1;for(const o of Ac(s)){const u=JR(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function JR(s,e,n){const a=s.field.isKeyField()?He.comparator(e.key,n.key):(function(u,h,g){const E=h.data.field(u),_=g.data.field(u);return E!==null&&_!==null?Sl(E,_):Je(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Je(19790,{direction:s.dir})}}class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return qb(this.inner)}size(){return this.innerSize}}const ZR=new sn(He.comparator);function Aa(){return ZR}const i0=new sn(He.comparator);function Sc(...s){let e=i0;for(const n of s)e=e.insert(n.key,n);return e}function a0(s){let e=i0;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function eo(){return Rc()}function r0(){return Rc()}function Rc(){return new co((s=>s.toString()),((s,e)=>s.isEqual(e)))}const eC=new sn(He.comparator),tC=new wn(He.comparator);function Et(...s){let e=tC;for(const n of s)e=e.add(n);return e}const nC=new wn(yt);function sC(){return nC}function Ip(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function o0(s){return{integerValue:""+s}}function iC(s,e){return CR(e)?o0(e):Ip(s,e)}class Xd{constructor(){this._=void 0}}function aC(s,e,n){return s instanceof bd?(function(o,u){const h={fields:{[Fb]:{stringValue:Pb},[Hb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&wp(u)&&(u=Gd(u)),u&&(h.fields[Gb]=u),{mapValue:h}})(n,e):s instanceof Mc?c0(s,e):s instanceof Uc?u0(s,e):(function(o,u){const h=l0(o,u),g=Yv(h)+Yv(o.Ae);return $m(h)&&$m(o.Ae)?o0(g):Ip(o.serializer,g)})(s,e)}function rC(s,e,n){return s instanceof Mc?c0(s,e):s instanceof Uc?u0(s,e):n}function l0(s,e){return s instanceof Sd?(function(a){return $m(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class bd extends Xd{}class Mc extends Xd{constructor(e){super(),this.elements=e}}function c0(s,e){const n=d0(e);for(const a of s.elements)n.some((o=>Hi(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Uc extends Xd{constructor(e){super(),this.elements=e}}function u0(s,e){let n=d0(e);for(const a of s.elements)n=n.filter((o=>!Hi(o,a)));return{arrayValue:{values:n}}}class Sd extends Xd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Yv(s){return hn(s.integerValue||s.doubleValue)}function d0(s){return Ap(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function oC(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Mc&&o instanceof Mc||a instanceof Uc&&o instanceof Uc?Tl(a.elements,o.elements,Hi):a instanceof Sd&&o instanceof Sd?Hi(a.Ae,o.Ae):a instanceof bd&&o instanceof bd})(s.transform,e.transform)}class lC{constructor(e,n){this.version=e,this.transformResults=n}}class Pi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ud(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class $d{}function f0(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new kp(s.key,Pi.none()):new Gc(s.key,s.data,Pi.none());{const n=s.data,a=ci.empty();let o=new wn(Xn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new uo(s.key,a,new Ti(o.toArray()),Pi.none())}}function cC(s,e,n){s instanceof Gc?(function(o,u,h){const g=o.value.clone(),E=Kv(o.fieldTransforms,u,h.transformResults);g.setAll(E),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof uo?(function(o,u,h){if(!ud(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=Kv(o.fieldTransforms,u,h.transformResults),E=u.data;E.setAll(h0(o)),E.setAll(g),u.convertToFoundDocument(h.version,E).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Cc(s,e,n,a){return s instanceof Gc?(function(u,h,g,E){if(!ud(u.precondition,h))return g;const _=u.value.clone(),S=Wv(u.fieldTransforms,E,h);return _.setAll(S),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,n,a):s instanceof uo?(function(u,h,g,E){if(!ud(u.precondition,h))return g;const _=Wv(u.fieldTransforms,E,h),S=h.data;return S.setAll(h0(u)),S.setAll(_),h.convertToFoundDocument(h.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(s,e,n,a):(function(u,h,g){return ud(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function uC(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=l0(a.transform,o||null);u!=null&&(n===null&&(n=ci.empty()),n.set(a.field,u))}return n||null}function Qv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Tl(a,o,((u,h)=>oC(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Gc extends $d{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uo extends $d{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function h0(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function Kv(s,e,n){const a=new Map;Dt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,rC(h,g,n[o]))}return a}function Wv(s,e,n){const a=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);a.set(o.field,aC(u,h,e))}return a}class kp extends $d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends $d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fC{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&cC(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Cc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Cc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=r0();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=n.has(o.key)?null:g;const E=f0(h,g);E!==null&&a.set(o.key,E),h.isValidDocument()||h.convertToNoDocument(it.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Et())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,((n,a)=>Qv(n,a)))&&Tl(this.baseMutations,e.baseMutations,((n,a)=>Qv(n,a)))}}class jp{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){Dt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return eC})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new jp(e,n,a,o)}}class hC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mC{constructor(e,n){this.count=e,this.unchangedNames=n}}var vn,St;function pC(s){switch(s){case _e.OK:return Je(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Je(15467,{code:s})}}function m0(s){if(s===void 0)return wa("GRPC error has no .code"),_e.UNKNOWN;switch(s){case vn.OK:return _e.OK;case vn.CANCELLED:return _e.CANCELLED;case vn.UNKNOWN:return _e.UNKNOWN;case vn.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case vn.INTERNAL:return _e.INTERNAL;case vn.UNAVAILABLE:return _e.UNAVAILABLE;case vn.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case vn.NOT_FOUND:return _e.NOT_FOUND;case vn.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case vn.ABORTED:return _e.ABORTED;case vn.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case vn.DATA_LOSS:return _e.DATA_LOSS;default:return Je(39323,{code:s})}}(St=vn||(vn={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";function _C(){return new TextEncoder}const gC=new fr([4294967295,4294967295],0);function Jv(s){const e=_C().encode(s),n=new Rb;return n.update(e),new Uint8Array(n.digest())}function Zv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fr([n,a],0),new fr([o,u],0)]}class Dp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Nc(`Invalid padding: ${n}`);if(a<0)throw new Nc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Nc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Nc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fr.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(fr.fromNumber(a)));return o.compare(gC)===1&&(o=new fr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jv(e),[a,o]=Zv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Dp(u,o,n);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=Jv(e),[a,o]=Zv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.be(h)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yd{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Yd(it.min(),o,new sn(yt),Aa(),Et())}}class Hc{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Hc(a,n,Et(),Et(),Et())}}class dd{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class p0{constructor(e,n){this.targetId=e,this.Ce=n}}class _0{constructor(e,n,a=$n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class eT{constructor(){this.ve=0,this.Fe=tT(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Et(),n=Et(),a=Et();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Je(38017,{changeType:u})}})),new Hc(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=tT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class yC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Aa(),this.He=ed(),this.Je=ed(),this.Ze=new sn(yt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Qm(u))if(a===0){const h=new He(u.path);this.et(n,h,ns.newNoDocument(h,it.min()))}else Dt(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const g=this.ut(e),E=g?this.ct(g,e,h):1;if(E!==0){this.it(n);const _=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let h,g;try{h=yr(a).toUint8Array()}catch(E){if(E instanceof Bb)return vl("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{g=new Dp(h,o,u)}catch(E){return vl(E instanceof Nc?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Qm(g.target)){const E=new He(g.target.path);this.It(E).has(h)||this.Et(h,E)||this.et(h,E,ns.newNoDocument(E,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let a=Et();this.Je.forEach(((u,h)=>{let g=!0;h.forEachWhile((E=>{const _=this.ot(E);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Yd(e,n,this.Ze,this.je,a);return this.je=Aa(),this.He=ed(),this.Je=ed(),this.Ze=new sn(yt),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new eT,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new wn(yt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new wn(yt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ed(){return new sn(He.comparator)}function tT(){return new sn(He.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},vC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TC={and:"AND",or:"OR"};class bC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jm(s,e){return s.useProto3Json||Fd(e)?e:{value:e}}function Nd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g0(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function SC(s,e){return Nd(s,e.toTimestamp())}function Fi(s){return Dt(!!s,49232),it.fromTimestamp((function(n){const a=gr(n);return new Kt(a.seconds,a.nanos)})(s))}function Lp(s,e){return Zm(s,e).canonicalString()}function Zm(s,e){const n=(function(o){return new Xt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function y0(s){const e=Xt.fromString(s);return Dt(S0(e),10190,{key:e.toString()}),e}function ep(s,e){return Lp(s.databaseId,e.path)}function ym(s,e){const n=y0(e);if(n.get(1)!==s.databaseId.projectId)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new He(v0(n))}function E0(s,e){return Lp(s.databaseId,e)}function NC(s){const e=y0(s);return e.length===4?Xt.emptyPath():v0(e)}function tp(s){return new Xt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function v0(s){return Dt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function nT(s,e,n){return{name:ep(s,e),fields:n.value.mapValue.fields}}function xC(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Je(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,S){return _.useProto3Json?(Dt(S===void 0||typeof S=="string",58123),$n.fromBase64String(S||"")):(Dt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),$n.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(_){const S=_.code===void 0?_e.UNKNOWN:m0(_.code);return new je(S,_.message||"")})(h);n=new _0(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=ym(s,a.document.name),u=Fi(a.document.updateTime),h=a.document.createTime?Fi(a.document.createTime):it.min(),g=new ci({mapValue:{fields:a.document.fields}}),E=ns.newFoundDocument(o,u,h,g),_=a.targetIds||[],S=a.removedTargetIds||[];n=new dd(_,S,E.key,E)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=ym(s,a.document),u=a.readTime?Fi(a.readTime):it.min(),h=ns.newNoDocument(o,u),g=a.removedTargetIds||[];n=new dd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=ym(s,a.document),u=a.removedTargetIds||[];n=new dd([],u,o,null)}else{if(!("filter"in e))return Je(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new mC(o,u),g=a.targetId;n=new p0(g,h)}}return n}function wC(s,e){let n;if(e instanceof Gc)n={update:nT(s,e.key,e.value)};else if(e instanceof kp)n={delete:ep(s,e.key)};else if(e instanceof uo)n={update:nT(s,e.key,e.data),updateMask:OC(e.fieldMask)};else{if(!(e instanceof dC))return Je(16599,{dt:e.type});n={verify:ep(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof bd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Mc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Uc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Sd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Je(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:SC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Je(27497)})(s,e.precondition)),n}function AC(s,e){return s&&s.length>0?(Dt(e!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?Fi(o.updateTime):Fi(u);return h.isEqual(it.min())&&(h=Fi(u)),new lC(h,o.transformResults||[])})(n,e)))):[]}function RC(s,e){return{documents:[E0(s,e.path)]}}function CC(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=E0(s,o);const u=(function(_){if(_.length!==0)return b0(Si.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((S=>(function(w){return{field:ul(w.field),direction:jC(w.dir)}})(S)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Jm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function IC(s){let e=NC(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){Dt(a===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];n.where&&(u=(function(x){const w=T0(x);return w instanceof Si&&Kb(w)?w.getFilters():[w]})(n.where));let h=[];n.orderBy&&(h=(function(x){return x.map((w=>(function(H){return new Td(dl(H.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(w)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let w;return w=typeof x=="object"?x.value:x,Fd(w)?null:w})(n.limit));let E=null;n.startAt&&(E=(function(x){const w=!!x.before,B=x.values||[];return new vd(B,w)})(n.startAt));let _=null;return n.endAt&&(_=(function(x){const w=!x.before,B=x.values||[];return new vd(B,w)})(n.endAt)),YR(e,o,h,u,g,"F",E,_)}function kC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T0(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=dl(n.unaryFilter.field);return Tn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=dl(n.unaryFilter.field);return Tn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=dl(n.unaryFilter.field);return Tn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=dl(n.unaryFilter.field);return Tn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Je(61313);default:return Je(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Tn.create(dl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Je(58110);default:return Je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Si.create(n.compositeFilter.filters.map((a=>T0(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Je(1026)}})(n.compositeFilter.op))})(s):Je(30097,{filter:s})}function jC(s){return EC[s]}function DC(s){return vC[s]}function LC(s){return TC[s]}function ul(s){return{fieldPath:s.canonicalString()}}function dl(s){return Xn.fromServerFormat(s.fieldPath)}function b0(s){return s instanceof Tn?(function(n){if(n.op==="=="){if(Gv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:DC(n.op),value:n.value}}})(s):s instanceof Si?(function(n){const a=n.getFilters().map((o=>b0(o)));return a.length===1?a[0]:{compositeFilter:{op:LC(n.op),filters:a}}})(s):Je(54877,{filter:s})}function OC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function S0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function N0(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ur{constructor(e,n,a,o,u=it.min(),h=it.min(),g=$n.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=E}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class MC{constructor(e){this.yt=e}}function UC(s){const e=IC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wm(e,e.limit,"L"):e}class VC{constructor(){this.Sn=new qC}addToCollectionParentIndex(e,n){return this.Sn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(_r.min())}updateCollectionGroup(e,n,a){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class qC{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new wn(Xt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new wn(Xt.comparator)).toArray()}}const sT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},x0=41943040;class ws{static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(x0,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);class xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new xl(0)}static ar(){return new xl(-1)}}const iT="LruGarbageCollector",BC=1048576;function aT([s,e],[n,a]){const o=yt(s,n);return o===0?yt(e,a):o}class PC{constructor(e){this.Pr=e,this.buffer=new wn(aT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();aT(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FC{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ke(iT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kl(n)?ke(iT,"Ignoring IndexedDB error during garbage collection: ",n):await Il(n)}await this.Ar(3e5)}))}}class GC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(Pd.ce);const a=new PC(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(sT)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sT):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,h,g,E,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(a=x,g=Date.now(),this.removeTargets(e,a,n)))).next((x=>(u=x,E=Date.now(),this.removeOrphanedDocuments(e,a)))).next((x=>(_=Date.now(),ll()<=Nt.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-S}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(E-g)+`ms
	Removed ${x} documents in `+(_-E)+`ms
Total Duration: ${_-S}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function HC(s,e){return new GC(s,e)}class zC{constructor(){this.changes=new co((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ns.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ge.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class $C{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Cc(a.mutation,o,Ti.empty(),Kt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Et()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Et()){const o=eo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let h=Sc();return u.forEach(((g,E)=>{h=h.insert(g,E.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=eo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Et())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,a,o){let u=Aa();const h=Rc(),g=(function(){return Rc()})();return n.forEach(((E,_)=>{const S=a.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof uo)?u=u.insert(_.key,_):S!==void 0?(h.set(_.key,S.mutation.getFieldMask()),Cc(S.mutation,_,S.mutation.getFieldMask(),Kt.now())):h.set(_.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,u).next((E=>(E.forEach(((_,S)=>h.set(_,S))),n.forEach(((_,S)=>g.set(_,new XC(S,h.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Rc();let o=new sn(((h,g)=>h-g)),u=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((E=>{const _=n.get(E);if(_===null)return;let S=a.get(E)||Ti.empty();S=g.applyToLocalView(_,S),a.set(E,S);const x=(o.get(g.batchId)||Et()).add(E);o=o.insert(g.batchId,x)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const E=g.getNext(),_=E.key,S=E.value,x=r0();S.forEach((w=>{if(!u.has(w)){const B=f0(n.get(w),a.get(w));B!==null&&x.set(w,B),u=u.add(w)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,x))}return ge.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return QR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):t0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):ge.resolve(eo());let g=jc,E=u;return h.next((_=>ge.forEach(_,((S,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),u.get(S)?ge.resolve():this.remoteDocumentCache.getEntry(e,S).next((w=>{E=E.insert(S,w)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,E,_,Et()))).next((S=>({batchId:g,changes:a0(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new He(n)).next((a=>{let o=Sc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let h=Sc();return this.indexManager.getCollectionParents(e,u).next((g=>ge.forEach(g,(E=>{const _=(function(x,w){return new Fc(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,E.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((S=>{S.forEach(((x,w)=>{h=h.insert(x,w)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((h=>{u.forEach(((E,_)=>{const S=_.getKey();h.get(S)===null&&(h=h.insert(S,ns.newInvalidDocument(S)))}));let g=Sc();return h.forEach(((E,_)=>{const S=u.get(E);S!==void 0&&Cc(S.mutation,_,Ti.empty(),Kt.now()),zd(n,_)&&(g=g.insert(E,_))})),g}))}}class YC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ge.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Fi(o.createTime)}})(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:UC(o.bundledQuery),readTime:Fi(o.readTime)}})(n)),ge.resolve()}}class QC{constructor(){this.overlays=new sn(He.comparator),this.Lr=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const a=eo();return ge.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),ge.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),ge.resolve()}getOverlaysForCollection(e,n,a){const o=eo(),u=n.length+1,h=new He(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const E=g.getNext().value,_=E.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&E.largestBatchId>a&&o.set(E.getKey(),E)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new sn(((_,S)=>_-S));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>a){let S=u.get(_.largestBatchId);S===null&&(S=eo(),u=u.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=eo(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=o)););return ge.resolve(g)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new hC(n,a));let u=this.Lr.get(n);u===void 0&&(u=Et(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class KC{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}class Op{constructor(){this.kr=new wn(Dn.Kr),this.qr=new wn(Dn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new Dn(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new Dn(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new He(new Xt([])),a=new Dn(n,e),o=new Dn(n,e+1),u=[];return this.qr.forEachInRange([a,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new He(new Xt([])),a=new Dn(n,e),o=new Dn(n,e+1);let u=Et();return this.qr.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Dn(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Dn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return He.comparator(e.key,n.key)||yt(e.Hr,n.Hr)}static Ur(e,n){return yt(e.Hr,n.Hr)||He.comparator(e.key,n.key)}}class WC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new wn(Dn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new fC(u,n,a,o);this.mutationQueue.push(h);for(const g of o)this.Jr=this.Jr.add(new Dn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ge.resolve(h)}lookupMutationBatch(e,n){return ge.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return ge.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?xp:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Dn(n,0),o=new Dn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(h=>{const g=this.Zr(h.Hr);u.push(g)})),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new wn(yt);return n.forEach((o=>{const u=new Dn(o,0),h=new Dn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(g=>{a=a.add(g.Hr)}))})),ge.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;He.isDocumentKey(u)||(u=u.child(""));const h=new Dn(new He(u),0);let g=new wn(yt);return this.Jr.forEachWhile((E=>{const _=E.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(g=g.add(E.Hr)),!0)}),h),ge.resolve(this.Yr(g))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Dt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ge.forEach(n.mutations,(o=>{const u=new Dn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new Dn(n,0),o=this.Jr.firstAfterOrEqual(a);return ge.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class JC{constructor(e){this.ti=e,this.docs=(function(){return new sn(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ge.resolve(a?a.document.mutableCopy():ns.newInvalidDocument(n))}getEntries(e,n){let a=Aa();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():ns.newInvalidDocument(o))})),ge.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Aa();const h=n.path,g=new He(h.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(g);for(;E.hasNext();){const{key:_,value:{document:S}}=E.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||xR(NR(S),a)<=0||(o.has(S.key)||zd(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Je(9500)}ni(e,n){return ge.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new ZC(this)}getSize(e){return ge.resolve(this.size)}}class ZC extends zC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),ge.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class eI{constructor(e){this.persistence=e,this.ri=new co((n=>Rp(n)),Cp),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.ii=0,this.si=new Op,this.targetCount=0,this.oi=xl._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),ge.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.lr(n),ge.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((h,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ge.waitFor(u).next((()=>o))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return ge.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),ge.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ge.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return ge.resolve(a)}containsKey(e,n){return ge.resolve(this.si.containsKey(n))}}class w0{constructor(e,n){this._i={},this.overlays={},this.ai=new Pd(0),this.ui=!1,this.ui=!0,this.ci=new KC,this.referenceDelegate=e(this),this.li=new eI(this),this.indexManager=new VC,this.remoteDocumentCache=(function(o){return new JC(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new MC(n),this.Pi=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new WC(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){ke("MemoryPersistence","Starting transaction:",e);const o=new tI(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ge.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class tI extends AR{constructor(e){super(),this.currentSequenceNumber=e}}class Mp{constructor(e){this.persistence=e,this.Ri=new Op,this.Ai=null}static Vi(e){return new Mp(e)}get di(){if(this.Ai)return this.Ai;throw Je(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),ge.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,(a=>{const o=He.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,it.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ge.or([()=>ge.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class xd{constructor(e,n){this.persistence=e,this.fi=new co((a=>IR(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=HC(this,n)}static Vi(e,n){return new xd(e,n)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return ge.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?ge.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((g=>{g||(a++,u.removeEntry(h,it.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ge.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ld(e.data.value)),n}wr(e,n,a){return ge.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ge.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Up{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=Et(),o=Et();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Up(e,n.fromCache,a,o)}}class nI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Qw()?8:RR($w())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new nI;return this.ys(e,n,h).next((g=>{if(u.result=g,this.As)return this.ws(e,n,h,g.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(ll()<=Nt.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(ll()<=Nt.DEBUG&&ke("QueryEngine","Query:",cl(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(ll()<=Nt.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(n))):ge.resolve())}gs(e,n){if($v(n))return ge.resolve(null);let a=Bi(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Wm(n,null,"F"),a=Bi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=Et(...u);return this.fs.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((E=>{const _=this.bs(n,g);return this.Ss(n,_,h,E.readTime)?this.gs(e,Wm(n,null,"F")):this.Ds(e,_,n,E)}))))})))))}ps(e,n,a,o){return $v(n)||o.isEqual(it.min())?ge.resolve(null):this.fs.getDocuments(e,a).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,a,o)?ge.resolve(null):(ll()<=Nt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),cl(n)),this.Ds(e,h,n,SR(o,jc)).next((g=>g)))}))}bs(e,n){let a=new wn(s0(e));return n.forEach(((o,u)=>{zd(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return ll()<=Nt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",cl(n)),this.fs.getDocumentsMatchingQuery(e,n,_r.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Vp="LocalStore",iI=3e8;class aI{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new sn(yt),this.Fs=new co((u=>Rp(u)),Cp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $C(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function rI(s,e,n,a){return new aI(s,e,n,a)}async function A0(s,e){const n=lt(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let E=Et();for(const _ of o){h.push(_.batchId);for(const S of _.mutations)E=E.add(S.key)}for(const _ of u){g.push(_.batchId);for(const S of _.mutations)E=E.add(S.key)}return n.localDocuments.getDocuments(a,E).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:g})))}))}))}function oI(s,e){const n=lt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(g,E,_,S){const x=_.batch,w=x.keys();let B=ge.resolve();return w.forEach((H=>{B=B.next((()=>S.getEntry(E,H))).next((U=>{const V=_.docVersions.get(H);Dt(V!==null,48541),U.version.compareTo(V)<0&&(x.applyToRemoteDocument(U,_),U.isValidDocument()&&(U.setReadTime(_.commitVersion),S.addEntry(U)))}))})),B.next((()=>g.mutationQueue.removeMutationBatch(E,x)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let E=Et();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(E=E.add(g.batch.mutations[_].key));return E})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function R0(s){const e=lt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function lI(s,e){const n=lt(s),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const g=[];e.targetChanges.forEach(((S,x)=>{const w=o.get(x);if(!w)return;g.push(n.li.removeMatchingKeys(u,S.removedDocuments,x).next((()=>n.li.addMatchingKeys(u,S.addedDocuments,x))));let B=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?B=B.withResumeToken($n.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):S.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(S.resumeToken,a)),o=o.insert(x,B),(function(U,V,z){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=iI?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(w,B,S)&&g.push(n.li.updateTargetData(u,B))}));let E=Aa(),_=Et();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))})),g.push(cI(u,h,e.documentUpdates).next((S=>{E=S.Bs,_=S.Ls}))),!a.isEqual(it.min())){const S=n.li.getLastRemoteSnapshotVersion(u).next((x=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(S)}return ge.waitFor(g).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,E,_))).next((()=>E))})).then((u=>(n.vs=o,u)))}function cI(s,e,n){let a=Et(),o=Et();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let h=Aa();return n.forEach(((g,E)=>{const _=u.get(g);E.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),E.isNoDocument()&&E.version.isEqual(it.min())?(e.removeEntry(g,E.readTime),h=h.insert(g,E)):!_.isValidDocument()||E.version.compareTo(_.version)>0||E.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(E),h=h.insert(g,E)):ke(Vp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",E.version)})),{Bs:h,Ls:o}}))}function uI(s,e){const n=lt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=xp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function dI(s,e){const n=lt(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,ge.resolve(o)):n.li.allocateTargetId(a).next((h=>(o=new ur(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function np(s,e,n){const a=lt(s),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!kl(h))throw h;ke(Vp,`Failed to update sequence numbers for target ${e}: ${h}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function rT(s,e,n){const a=lt(s);let o=it.min(),u=Et();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(E,_,S){const x=lt(E),w=x.Fs.get(S);return w!==void 0?ge.resolve(x.vs.get(w)):x.li.getTargetData(_,S)})(a,h,Bi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(h,g.targetId).next((E=>{u=E}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,n?o:it.min(),n?u:Et()))).next((g=>(fI(a,WR(e),g),{documents:g,ks:u})))))}function fI(s,e,n){let a=s.Ms.get(e)||it.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class oT{constructor(){this.activeTargetIds=sC()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hI{constructor(){this.vo=new oT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new oT,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mI{Mo(e){}shutdown(){}}const lT="ConnectivityMonitor";class cT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ke(lT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ke(lT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let td=null;function sp(){return td===null?td=(function(){return 268435456+Math.round(2147483648*Math.random())})():td++,"0x"+td.toString(16)}const Em="RestConnection",pI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _I{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===yd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const h=sp(),g=this.Qo(e,n.toUriEncodedString());ke(Em,`Sending RPC '${e}' ${h}:`,g,a);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,o,u);const{host:_}=new URL(g),S=Tp(_);return this.zo(e,g,E,a,S).then((x=>(ke(Em,`Received RPC '${e}' ${h}: `,x),x)),(x=>{throw vl(Em,`RPC '${e}' ${h} failed with error: `,x,"url: ",g,"request:",a),x}))}jo(e,n,a,o,u,h){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=pI[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class gI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const es="WebChannelConnection",vc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ml extends _I{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ml.c_){const e=jb();vc(e,kb.STAT_EVENT,(n=>{n.stat===Hm.PROXY?ke(es,"STAT_EVENT: detected buffering proxy"):n.stat===Hm.NOPROXY&&ke(es,"STAT_EVENT: detected no buffering proxy")})),ml.c_=!0}}zo(e,n,a,o,u){const h=sp();return new Promise(((g,E)=>{const _=new Cb;_.setWithCredentials(!0),_.listenOnce(Ib.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case od.NO_ERROR:const x=_.getResponseJson();ke(es,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(x)),g(x);break;case od.TIMEOUT:ke(es,`RPC '${e}' ${h} timed out`),E(new je(_e.DEADLINE_EXCEEDED,"Request time out"));break;case od.HTTP_ERROR:const w=_.getStatus();if(ke(es,`RPC '${e}' ${h} failed with status:`,w,"response text:",_.getResponseText()),w>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const H=B?.error;if(H&&H.status&&H.message){const U=(function(z){const G=z.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(G)>=0?G:_e.UNKNOWN})(H.status);E(new je(U,H.message))}else E(new je(_e.UNKNOWN,"Server responded with status "+_.getStatus()))}else E(new je(_e.UNAVAILABLE,"Connection failed."));break;default:Je(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ke(es,`RPC '${e}' ${h} completed.`)}}));const S=JSON.stringify(o);ke(es,`RPC '${e}' ${h} sending request:`,o),_.send(n,"POST",S,a,15)}))}T_(e,n,a){const o=sp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(g.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,n,a),g.encodeInitMessageHeaders=!0;const _=u.join("");ke(es,`Creating RPC '${e}' stream ${o}: ${_}`,g);const S=h.createWebChannel(_,g);this.I_(S);let x=!1,w=!1;const B=new gI({Ho:H=>{w?ke(es,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(x||(ke(es,`Opening RPC '${e}' stream ${o} transport.`),S.open(),x=!0),ke(es,`RPC '${e}' stream ${o} sending:`,H),S.send(H))},Jo:()=>S.close()});return vc(S,bc.EventType.OPEN,(()=>{w||(ke(es,`RPC '${e}' stream ${o} transport opened.`),B.i_())})),vc(S,bc.EventType.CLOSE,(()=>{w||(w=!0,ke(es,`RPC '${e}' stream ${o} transport closed`),B.o_(),this.E_(S))})),vc(S,bc.EventType.ERROR,(H=>{w||(w=!0,vl(es,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),B.o_(new je(_e.UNAVAILABLE,"The operation could not be completed")))})),vc(S,bc.EventType.MESSAGE,(H=>{if(!w){const U=H.data[0];Dt(!!U,16349);const V=U,z=V?.error||V[0]?.error;if(z){ke(es,`RPC '${e}' stream ${o} received error:`,z);const G=z.status;let K=(function(ye){const D=vn[ye];if(D!==void 0)return m0(D)})(G),ie=z.message;K===void 0&&(K=_e.INTERNAL,ie="Unknown error status: "+G+" with message "+z.message),w=!0,B.o_(new je(K,ie)),S.close()}else ke(es,`RPC '${e}' stream ${o} received:`,U),B.__(U)}})),ml.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Db()}}function yI(s){return new ml(s)}function vm(){return typeof document<"u"?document:null}function Qd(s){return new bC(s,!0)}ml.c_=!1;class C0{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const uT="PersistentStream";class I0{constructor(e,n,a,o,u,h,g,E){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new C0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(wa(n.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new je(_e.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(uT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ke(uT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EI extends I0{constructor(e,n,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xC(this.serializer,e),a=(function(u){if(!("targetChange"in u))return it.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?it.min():h.readTime?Fi(h.readTime):it.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=tp(this.serializer),n.addTarget=(function(u,h){let g;const E=h.target;if(g=Qm(E)?{documents:RC(u,E)}:{query:CC(u,E).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=g0(u,h.resumeToken);const _=Jm(u,h.expectedCount);_!==null&&(g.expectedCount=_)}else if(h.snapshotVersion.compareTo(it.min())>0){g.readTime=Nd(u,h.snapshotVersion.toTimestamp());const _=Jm(u,h.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const a=kC(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=tp(this.serializer),n.removeTarget=e,this.K_(n)}}class vI extends I0{constructor(e,n,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=AC(e.writeResults,e.commitTime),a=Fi(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=tp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>wC(this.serializer,a)))};this.K_(n)}}class TI{}class bI extends TI{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,Zm(n,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(_e.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.jo(e,Zm(n,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new je(_e.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function SI(s,e,n,a){return new bI(s,e,n,a)}class NI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const so="RemoteStore";class xI{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{a.enqueueAndForget((async()=>{fo(this)&&(ke(so,"Restarting streams for network reachability change."),await(async function(E){const _=lt(E);_.Ea.add(4),await zc(_),_.Va.set("Unknown"),_.Ea.delete(4),await Kd(_)})(this))}))})),this.Va=new NI(a,o)}}async function Kd(s){if(fo(s))for(const e of s.Ra)await e(!0)}async function zc(s){for(const e of s.Ra)await e(!1)}function k0(s,e){const n=lt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fp(n)?Pp(n):jl(n).O_()&&Bp(n,e))}function qp(s,e){const n=lt(s),a=jl(n);n.Ia.delete(e),a.O_()&&j0(n,e),n.Ia.size===0&&(a.O_()?a.L_():fo(n)&&n.Va.set("Unknown"))}function Bp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jl(s).Z_(e)}function j0(s,e){s.da.$e(e),jl(s).X_(e)}function Pp(s){s.da=new yC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),jl(s).start(),s.Va.ua()}function Fp(s){return fo(s)&&!jl(s).x_()&&s.Ia.size>0}function fo(s){return lt(s).Ea.size===0}function D0(s){s.da=void 0}async function wI(s){s.Va.set("Online")}async function AI(s){s.Ia.forEach(((e,n)=>{Bp(s,e)}))}async function RI(s,e){D0(s),Fp(s)?(s.Va.ha(e),Pp(s)):s.Va.set("Unknown")}async function CI(s,e,n){if(s.Va.set("Online"),e instanceof _0&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.da.removeTarget(g))})(s,e)}catch(a){ke(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await wd(s,a)}else if(e instanceof dd?s.da.Xe(e):e instanceof p0?s.da.st(e):s.da.tt(e),!n.isEqual(it.min()))try{const a=await R0(s.localStore);n.compareTo(a)>=0&&await(function(u,h){const g=u.da.Tt(h);return g.targetChanges.forEach(((E,_)=>{if(E.resumeToken.approximateByteSize()>0){const S=u.Ia.get(_);S&&u.Ia.set(_,S.withResumeToken(E.resumeToken,h))}})),g.targetMismatches.forEach(((E,_)=>{const S=u.Ia.get(E);if(!S)return;u.Ia.set(E,S.withResumeToken($n.EMPTY_BYTE_STRING,S.snapshotVersion)),j0(u,E);const x=new ur(S.target,E,_,S.sequenceNumber);Bp(u,x)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){ke(so,"Failed to raise snapshot:",a),await wd(s,a)}}async function wd(s,e,n){if(!kl(e))throw e;s.Ea.add(1),await zc(s),s.Va.set("Offline"),n||(n=()=>R0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(so,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Kd(s)}))}function L0(s,e){return e().catch((n=>wd(s,n,e)))}async function Wd(s){const e=lt(s),n=vr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;II(e);)try{const o=await uI(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,kI(e,o)}catch(o){await wd(e,o)}O0(e)&&M0(e)}function II(s){return fo(s)&&s.Ta.length<10}function kI(s,e){s.Ta.push(e);const n=vr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function O0(s){return fo(s)&&!vr(s).x_()&&s.Ta.length>0}function M0(s){vr(s).start()}async function jI(s){vr(s).ra()}async function DI(s){const e=vr(s);for(const n of s.Ta)e.ea(n.mutations)}async function LI(s,e,n){const a=s.Ta.shift(),o=jp.from(a,e,n);await L0(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Wd(s)}async function OI(s,e){e&&vr(s).Y_&&await(async function(a,o){if((function(h){return pC(h)&&h!==_e.ABORTED})(o.code)){const u=a.Ta.shift();vr(a).B_(),await L0(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Wd(a)}})(s,e),O0(s)&&M0(s)}async function dT(s,e){const n=lt(s);n.asyncQueue.verifyOperationInProgress(),ke(so,"RemoteStore received new credentials");const a=fo(n);n.Ea.add(3),await zc(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Kd(n)}async function MI(s,e){const n=lt(s);e?(n.Ea.delete(2),await Kd(n)):e||(n.Ea.add(2),await zc(n),n.Va.set("Unknown"))}function jl(s){return s.ma||(s.ma=(function(n,a,o){const u=lt(n);return u.sa(),new EI(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:wI.bind(null,s),Yo:AI.bind(null,s),t_:RI.bind(null,s),J_:CI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Fp(s)?Pp(s):s.Va.set("Unknown")):(await s.ma.stop(),D0(s))}))),s.ma}function vr(s){return s.fa||(s.fa=(function(n,a,o){const u=lt(n);return u.sa(),new vI(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:jI.bind(null,s),t_:OI.bind(null,s),ta:DI.bind(null,s),na:LI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Wd(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(so,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Gp{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const h=Date.now()+a,g=new Gp(e,n,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(s,e){if(wa("AsyncQueue",`${e}: ${s}`),kl(s))return new je(_e.UNAVAILABLE,`${e}: ${s}`);throw s}class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||He.comparator(n.key,a.key):(n,a)=>He.comparator(n.key,a.key),this.keyedMap=Sc(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new pl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class fT{constructor(){this.ga=new sn(He.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Je(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class wl{constructor(e,n,a,o,u,h,g,E,_){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=E,this.hasCachedResults=_}static fromInitialDocuments(e,n,a,o,u){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new wl(e,n,pl.emptySet(n),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}class UI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class VI{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=lt(n),u=o.queries;o.queries=hT(),u.forEach(((h,g)=>{for(const E of g.ba)E.onError(a)}))})(this,new je(_e.ABORTED,"Firestore shutting down"))}}function hT(){return new co((s=>n0(s)),Hd)}async function qI(s,e){const n=lt(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new UI,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Hp(h,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&zp(n)}async function BI(s,e){const n=lt(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function PI(s,e){const n=lt(s);let a=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const g of h.ba)g.Fa(o)&&(a=!0);h.wa=o}}a&&zp(n)}function FI(s,e,n){const a=lt(s),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function zp(s){s.Ca.forEach((e=>{e.next()}))}var ip,mT;(mT=ip||(ip={})).Ma="default",mT.Cache="cache";class GI{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new wl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ip.Cache}}class U0{constructor(e){this.key=e}}class V0{constructor(e){this.key=e}}class HI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Et(),this.mutatedKeys=Et(),this.eu=s0(e),this.tu=new pl(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new fT,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const E=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,x)=>{const w=o.get(S),B=zd(this.query,x)?x:null,H=!!w&&this.mutatedKeys.has(w.key),U=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let V=!1;w&&B?w.data.isEqual(B.data)?H!==U&&(a.track({type:3,doc:B}),V=!0):this.su(w,B)||(a.track({type:2,doc:B}),V=!0,(E&&this.eu(B,E)>0||_&&this.eu(B,_)<0)&&(g=!0)):!w&&B?(a.track({type:0,doc:B}),V=!0):w&&!B&&(a.track({type:1,doc:w}),V=!0,(E||_)&&(g=!0)),V&&(B?(h=h.add(B),u=U?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const S=this.query.limitType==="F"?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),a.track({type:1,doc:S})}return{tu:h,iu:a,Ss:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((S,x)=>(function(B,H){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je(20277,{Vt:V})}};return U(B)-U(H)})(S.type,x.type)||this.eu(S.doc,x.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],E=this.Ya.size===0&&this.current&&!o?1:0,_=E!==this.Xa;return this.Xa=E,h.length!==0||_?{snapshot:new wl(this.query,e.tu,u,h,e.mutatedKeys,E===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Et(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new V0(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new U0(a))})),n}cu(e){this.Za=e.ks,this.Ya=Et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xp="SyncEngine";class zI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class XI{constructor(e){this.key=e,this.hu=!1}}class $I{constructor(e,n,a,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new co((g=>n0(g)),Hd),this.Iu=new Map,this.Eu=new Set,this.Ru=new sn(He.comparator),this.Au=new Map,this.Vu=new Op,this.du={},this.mu=new Map,this.fu=xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YI(s,e,n=!0){const a=H0(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await q0(a,e,n,!0),o}async function QI(s,e){const n=H0(s);await q0(n,e,!0,!1)}async function q0(s,e,n,a){const o=await dI(s.localStore,Bi(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let g;return a&&(g=await KI(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&k0(s.remoteStore,o),g}async function KI(s,e,n,a,o){s.pu=(x,w,B)=>(async function(U,V,z,G){let K=V.view.ru(z);K.Ss&&(K=await rT(U.localStore,V.query,!1).then((({documents:D})=>V.view.ru(D,K))));const ie=G&&G.targetChanges.get(V.targetId),Ee=G&&G.targetMismatches.get(V.targetId)!=null,ye=V.view.applyChanges(K,U.isPrimaryClient,ie,Ee);return _T(U,V.targetId,ye.au),ye.snapshot})(s,x,w,B);const u=await rT(s.localStore,e,!0),h=new HI(e,u.ks),g=h.ru(u.documents),E=Hc.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),_=h.applyChanges(g,s.isPrimaryClient,E);_T(s,n,_.au);const S=new zI(e,n,h);return s.Tu.set(e,S),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function WI(s,e,n){const a=lt(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!Hd(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await np(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&qp(a.remoteStore,o.targetId),ap(a,o.targetId)})).catch(Il)):(ap(a,o.targetId),await np(a.localStore,o.targetId,!0))}async function JI(s,e){const n=lt(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),qp(n.remoteStore,a.targetId))}async function ZI(s,e,n){const a=r2(s);try{const o=await(function(h,g){const E=lt(h),_=Kt.now(),S=g.reduce(((B,H)=>B.add(H.key)),Et());let x,w;return E.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let H=Aa(),U=Et();return E.xs.getEntries(B,S).next((V=>{H=V,H.forEach(((z,G)=>{G.isValidDocument()||(U=U.add(z))}))})).next((()=>E.localDocuments.getOverlayedDocuments(B,H))).next((V=>{x=V;const z=[];for(const G of g){const K=uC(G,x.get(G.key).overlayedDocument);K!=null&&z.push(new uo(G.key,K,$b(K.value.mapValue),Pi.exists(!0)))}return E.mutationQueue.addMutationBatch(B,_,z,g)})).next((V=>{w=V;const z=V.applyToLocalDocumentSet(x,U);return E.documentOverlayCache.saveOverlays(B,V.batchId,z)}))})).then((()=>({batchId:w.batchId,changes:a0(x)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,E){let _=h.du[h.currentUser.toKey()];_||(_=new sn(yt)),_=_.insert(g,E),h.du[h.currentUser.toKey()]=_})(a,o.batchId,n),await Xc(a,o.changes),await Wd(a.remoteStore)}catch(o){const u=Hp(o,"Failed to persist write");n.reject(u)}}async function B0(s,e){const n=lt(s);try{const a=await lI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Dt(h.hu,14607):o.removedDocuments.size>0&&(Dt(h.hu,42227),h.hu=!1))})),await Xc(n,a,e)}catch(a){await Il(a)}}function pT(s,e,n){const a=lt(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const E=lt(h);E.onlineState=g;let _=!1;E.queries.forEach(((S,x)=>{for(const w of x.ba)w.va(g)&&(_=!0)})),_&&zp(E)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function e2(s,e,n){const a=lt(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new sn(He.comparator);h=h.insert(u,ns.newNoDocument(u,it.min()));const g=Et().add(u),E=new Yd(it.min(),new Map,new sn(yt),h,g);await B0(a,E),a.Ru=a.Ru.remove(u),a.Au.delete(e),$p(a)}else await np(a.localStore,e,!1).then((()=>ap(a,e,n))).catch(Il)}async function t2(s,e){const n=lt(s),a=e.batch.batchId;try{const o=await oI(n.localStore,e);F0(n,a,null),P0(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Xc(n,o)}catch(o){await Il(o)}}async function n2(s,e,n){const a=lt(s);try{const o=await(function(h,g){const E=lt(h);return E.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return E.mutationQueue.lookupMutationBatch(_,g).next((x=>(Dt(x!==null,37113),S=x.keys(),E.mutationQueue.removeMutationBatch(_,x)))).next((()=>E.mutationQueue.performConsistencyCheck(_))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>E.localDocuments.getDocuments(_,S)))}))})(a.localStore,e);F0(a,e,n),P0(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Xc(a,o)}catch(o){await Il(o)}}function P0(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function F0(s,e,n){const a=lt(s);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function ap(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||G0(s,a)}))}function G0(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(qp(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),$p(s))}function _T(s,e,n){for(const a of n)a instanceof U0?(s.Vu.addReference(a.key,e),s2(s,a)):a instanceof V0?(ke(Xp,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||G0(s,a.key)):Je(19791,{wu:a})}function s2(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(ke(Xp,"New document in limbo: "+n),s.Eu.add(a),$p(s))}function $p(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new He(Xt.fromString(e)),a=s.fu.next();s.Au.set(a,new XI(n)),s.Ru=s.Ru.insert(n,a),k0(s.remoteStore,new ur(Bi(e0(n.path)),a,"TargetPurposeLimboResolution",Pd.ce))}}async function Xc(s,e,n){const a=lt(s),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,E)=>{h.push(a.pu(E,e,n).then((_=>{if((_||n)&&a.isPrimaryClient){const S=_?!_.fromCache:n?.targetChanges.get(E.targetId)?.current;a.sharedClientState.updateQueryState(E.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Up.Es(E.targetId,_);u.push(S)}})))})),await Promise.all(h),a.Pu.J_(o),await(async function(E,_){const S=lt(E);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ge.forEach(_,(w=>ge.forEach(w.Ts,(B=>S.persistence.referenceDelegate.addReference(x,w.targetId,B))).next((()=>ge.forEach(w.Is,(B=>S.persistence.referenceDelegate.removeReference(x,w.targetId,B)))))))))}catch(x){if(!kl(x))throw x;ke(Vp,"Failed to update sequence numbers: "+x)}for(const x of _){const w=x.targetId;if(!x.fromCache){const B=S.vs.get(w),H=B.snapshotVersion,U=B.withLastLimboFreeSnapshotVersion(H);S.vs=S.vs.insert(w,U)}}})(a.localStore,u))}async function i2(s,e){const n=lt(s);if(!n.currentUser.isEqual(e)){ke(Xp,"User change. New user:",e.toKey());const a=await A0(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((E=>{E.reject(new je(_e.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Xc(n,a.Ns)}}function a2(s,e){const n=lt(s),a=n.Au.get(e);if(a&&a.hu)return Et().add(a.key);{let o=Et();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function H0(s){const e=lt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=B0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e2.bind(null,e),e.Pu.J_=PI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function r2(s){const e=lt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n2.bind(null,e),e}class Ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rI(this.persistence,new sI,e.initialUser,this.serializer)}Cu(e){return new w0(Mp.Vi,this.serializer)}Du(e){return new hI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ad.provider={build:()=>new Ad};class o2 extends Ad{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Dt(this.persistence.referenceDelegate instanceof xd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new FC(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new w0((a=>xd.Vi(a,n)),this.serializer)}}class rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>pT(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=i2.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VI})()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),a=yI(e.databaseInfo);return SI(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,h,g){return new xI(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>pT(this.syncEngine,n,0)),(function(){return cT.v()?new cT:new mI})())}createSyncEngine(e,n){return(function(o,u,h,g,E,_,S){const x=new $I(o,u,h,g,E,_);return S&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=lt(n);ke(so,"RemoteStore shutting down."),a.Ea.add(5),await zc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rp.provider={build:()=>new rp};class l2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Tr="FirestoreClient";class c2{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=ts.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{ke(Tr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(ke(Tr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Hp(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Tm(s,e){s.asyncQueue.verifyOperationInProgress(),ke(Tr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await A0(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function gT(s,e){s.asyncQueue.verifyOperationInProgress();const n=await u2(s);ke(Tr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>dT(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>dT(e.remoteStore,o))),s._onlineComponents=e}async function u2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke(Tr,"Using user provided OfflineComponentProvider");try{await Tm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===_e.FAILED_PRECONDITION||o.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;vl("Error using user provided cache. Falling back to memory cache: "+n),await Tm(s,new Ad)}}else ke(Tr,"Using default OfflineComponentProvider"),await Tm(s,new o2(void 0));return s._offlineComponents}async function z0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke(Tr,"Using user provided OnlineComponentProvider"),await gT(s,s._uninitializedComponentsProvider._online)):(ke(Tr,"Using default OnlineComponentProvider"),await gT(s,new rp))),s._onlineComponents}function d2(s){return z0(s).then((e=>e.syncEngine))}async function f2(s){const e=await z0(s),n=e.eventManager;return n.onListen=YI.bind(null,e.syncEngine),n.onUnlisten=WI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JI.bind(null,e.syncEngine),n}function h2(s,e,n={}){const a=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,E,_){const S=new l2({next:w=>{S.Nu(),h.enqueueAndForget((()=>BI(u,x))),w.fromCache&&E.source==="server"?_.reject(new je(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(w)},error:w=>_.reject(w)}),x=new GI(g,S,{includeMetadataChanges:!0,Ka:!0});return qI(u,x)})(await f2(s),s.asyncQueue,e,n,a))),a.promise}function m2(s,e){const n=new hr;return s.asyncQueue.enqueueAndForget((async()=>ZI(await d2(s),e,n))),n.promise}function X0(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const p2="ComponentProvider",yT=new Map;function _2(s,e,n,a,o){return new DR(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,X0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const $0="firestore.googleapis.com",ET=!0;class vT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new je(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$0,this.ssl=ET}else this.host=e.host,this.ssl=e.ssl??ET;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=x0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BC)throw new je(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new fR;switch(a.type){case"firstParty":return new _R(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new je(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=yT.get(n);a&&(ke(p2,"Removing Datastore"),yT.delete(n),a.terminate())})(this),Promise.resolve()}}function g2(s,e,n,a={}){s=bl(s,Jd);const o=Tp(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(Fw(`https://${g}`),Xw("Firestore",!0)),u.host!==$0&&u.host!==g&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:g,ssl:o,emulatorOptions:a};if(!pd(E,h)&&(s._setSettings(E),a.mockUserToken)){let _,S;if(typeof a.mockUserToken=="string")_=a.mockUserToken,S=ts.MOCK_USER;else{_=Gw(a.mockUserToken,s._app?.options.projectId);const x=a.mockUserToken.sub||a.mockUserToken.user_id;if(!x)throw new je(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new ts(x)}s._authCredentials=new hR(new Ob(_,S))}}class Dl{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Dl(this.firestore,e,this._query)}}class xn{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}toJSON(){return{type:xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Pc(n,xn._jsonSchema))return new xn(e,a||null,new He(Xt.fromString(n.referencePath)))}}xn._jsonSchemaVersion="firestore/documentReference/1.0",xn._jsonSchema={type:bn("string",xn._jsonSchemaVersion),referencePath:bn("string")};class mr extends Dl{constructor(e,n,a){super(e,n,e0(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new He(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function y2(s,e,...n){if(s=Sa(s),Mb("collection","path",e),s instanceof Jd){const a=Xt.fromString(e,...n);return Dv(a),new mr(s,null,a)}{if(!(s instanceof xn||s instanceof mr))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Xt.fromString(e,...n));return Dv(a),new mr(s.firestore,null,a)}}function ho(s,e,...n){if(s=Sa(s),arguments.length===1&&(e=Np.newId()),Mb("doc","path",e),s instanceof Jd){const a=Xt.fromString(e,...n);return jv(a),new xn(s,null,new He(a))}{if(!(s instanceof xn||s instanceof mr))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Xt.fromString(e,...n));return jv(a),new xn(s.firestore,s instanceof mr?s.converter:null,new He(a))}}const TT="AsyncQueue";class bT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new C0(this,"async_queue_retry"),this._c=()=>{const a=vm();a&&ke(TT,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!kl(e))throw e;ke(TT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",ST(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Gp.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Je(47125,{Pc:ST(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ST(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Zd extends Jd{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new bT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function E2(s,e){const n=typeof s=="object"?s:xb(),a=typeof s=="string"?s:yd,o=qd(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Bw("firestore");u&&g2(o,...u)}return o}function Y0(s){if(s._terminated)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||v2(s),s._firestoreClient}function v2(s){const e=s._freezeSettings(),n=_2(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new c2(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui($n.fromBase64String(e))}catch(n){throw new je(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ui($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pc(e,ui._jsonSchema))return ui.fromBase64String(e.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:bn("string",ui._jsonSchemaVersion),bytes:bn("string")};class Q0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new je(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class K0{constructor(e){this._methodName=e}}class Gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new je(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new je(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Pc(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:bn("string",Gi._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};class bi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pc(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bi(e.vectorValues);throw new je(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:bn("string",bi._jsonSchemaVersion),vectorValues:bn("object")};const T2=/^__.*__$/;class b2{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}function W0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je(40011,{dataSource:s})}}class Yp{constructor(e,n,a,o,u,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Yp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(W0(this.dataSource)&&T2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class S2{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Qd(e)}createContext(e,n,a,o=!1){return new Yp({dataSource:e,methodName:n,targetDoc:a,path:Xn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(s){const e=s._freezeSettings(),n=Qd(s._databaseId);return new S2(s._databaseId,!!e.ignoreUndefinedProperties,n)}function N2(s,e,n,a,o,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);t1("Data must be an object, but it was:",h,a);const g=Z0(a,h);let E,_;if(u.merge)E=new Ti(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const w=ef(e,x,n);if(!h.contains(w))throw new je(_e.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);R2(S,w)||S.push(w)}E=new Ti(S),_=h.fieldTransforms.filter((x=>E.covers(x.field)))}else E=null,_=h.fieldTransforms;return new b2(new ci(g),E,_)}function x2(s,e,n,a=!1){return Qp(n,s.createContext(a?4:3,e))}function Qp(s,e){if(e1(s=Sa(s)))return t1("Unsupported field value:",e,s),Z0(s,e);if(s instanceof K0)return(function(a,o){if(!W0(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let E=Qp(g,o.childContextForArray(h));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),h++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=Sa(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return iC(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Kt.fromDate(a);return{timestampValue:Nd(o.serializer,u)}}if(a instanceof Kt){const u=new Kt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Nd(o.serializer,u)}}if(a instanceof Gi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ui)return{bytesValue:g0(o.serializer,a._byteString)};if(a instanceof xn){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof bi)return(function(h,g){const E=h instanceof bi?h.toArray():h;return{mapValue:{fields:{[zb]:{stringValue:Xb},[Ed]:{arrayValue:{values:E.map((S=>{if(typeof S!="number")throw g.createError("VectorValues must only contain numeric values.");return Ip(g.serializer,S)}))}}}}}})(a,o);if(N0(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Bd(a)}`)})(s,e)}function Z0(s,e){const n={};return qb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(s,((a,o)=>{const u=Qp(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function e1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Kt||s instanceof Gi||s instanceof ui||s instanceof xn||s instanceof K0||s instanceof bi||N0(s))}function t1(s,e,n){if(!e1(n)||!Ub(n)){const a=Bd(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function ef(s,e,n){if((e=Sa(e))instanceof Q0)return e._internalPath;if(typeof e=="string")return A2(s,e);throw Rd("Field path arguments must be of type string or ",s,!1,void 0,n)}const w2=new RegExp("[~\\*/\\[\\]]");function A2(s,e,n){if(e.search(w2)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Q0(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Rd(s,e,n,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${a}`),h&&(E+=` in document ${o}`),E+=")"),new je(_e.INVALID_ARGUMENT,g+s+E)}function R2(s,e){return s.some((n=>n.isEqual(e)))}class C2{convertValue(e,n="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return lo(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[Ed].arrayValue?.values?.map((a=>hn(a.doubleValue)));return new bi(n)}convertGeoPoint(e){return new Gi(hn(e.latitude),hn(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Gd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Xt.fromString(e);Dt(S0(a),9688,{name:e});const o=new Lc(a.get(1),a.get(3)),u=new He(a.popFirst(5));return o.isEqual(n)||wa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class I2 extends C2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}const NT="@firebase/firestore",xT="4.10.0";class n1{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(ef("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k2 extends n1{data(){return super.data()}}function j2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new je(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kp{}class D2 extends Kp{}function L2(s,e,...n){let a=[];e instanceof Kp&&a.push(e),a=a.concat(n),(function(u){const h=u.filter((E=>E instanceof Wp)).length,g=u.filter((E=>E instanceof tf)).length;if(h>1||h>0&&g>0)throw new je(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class tf extends D2{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new tf(e,n,a)}_apply(e){const n=this._parse(e);return s1(e._query,n),new Dl(e.firestore,e.converter,Km(e._query,n))}_parse(e){const n=J0(e.firestore);return(function(u,h,g,E,_,S,x){let w;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new je(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){RT(x,S);const H=[];for(const U of x)H.push(AT(E,u,U));w={arrayValue:{values:H}}}else w=AT(E,u,x)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||RT(x,S),w=x2(g,h,x,S==="in"||S==="not-in");return Tn.create(_,S,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wT(s,e,n){const a=e,o=ef("where",s);return tf._create(o,a,n)}class Wp extends Kp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wp(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const E of g)s1(h,E),h=Km(h,E)})(e._query,n),new Dl(e.firestore,e.converter,Km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AT(s,e,n){if(typeof(n=Sa(n))=="string"){if(n==="")throw new je(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t0(e)&&n.indexOf("/")!==-1)throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Xt.fromString(n));if(!He.isDocumentKey(a))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Pv(s,new He(a))}if(n instanceof xn)return Pv(s,n._key);throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bd(n)}.`)}function RT(s,e){if(!Array.isArray(s)||s.length===0)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s1(s,e){const n=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new je(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function O2(s,e,n){let a;return a=s?s.toFirestore(e):e,a}class nd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _l extends n1{constructor(e,n,a,o,u,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(ef("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_l._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_l._jsonSchemaVersion="firestore/documentSnapshot/1.0",_l._jsonSchema={type:bn("string",_l._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class fd extends _l{data(e={}){return super.data(e)}}class gl{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new nd(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new fd(this._firestore,this._userDataWriter,a.key,a,new nd(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new je(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const E=new fd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new nd(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:E,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const E=new fd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new nd(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return g.type!==0&&(_=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),S=h.indexOf(g.doc.key)),{type:M2(g.type),doc:E,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je(61501,{type:s})}}gl._jsonSchemaVersion="firestore/querySnapshot/1.0",gl._jsonSchema={type:bn("string",gl._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};function U2(s){s=bl(s,Dl);const e=bl(s.firestore,Zd),n=Y0(e),a=new I2(e);return j2(s._query),h2(n,s._query).then((o=>new gl(e,a,s,o)))}function Jp(s,e,n){s=bl(s,xn);const a=bl(s.firestore,Zd),o=O2(s.converter,e),u=J0(a);return i1(a,[N2(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Pi.none())])}function nf(s){return i1(bl(s.firestore,Zd),[new kp(s._key,Pi.none())])}function i1(s,e){const n=Y0(s);return m2(n,e)}(function(e,n=!0){dR(JA),pr(new Na("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new Zd(new mR(a.getProvider("auth-internal")),new gR(h,a.getProvider("app-check-internal")),LR(h,o),h);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),qi(NT,xT,e),qi(NT,xT,"esm2020")})();const a1="@firebase/installations",Zp="0.6.19";const r1=1e4,o1=`w:${Zp}`,l1="FIS_v2",V2="https://firebaseinstallations.googleapis.com/v1",q2=3600*1e3,B2="installations",P2="Installations";const F2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},io=new Ud(B2,P2,F2);function c1(s){return s instanceof oo&&s.code.includes("request-failed")}function u1({projectId:s}){return`${V2}/projects/${s}/installations`}function d1(s){return{token:s.token,requestStatus:2,expiresIn:H2(s.expiresIn),creationTime:Date.now()}}async function f1(s,e){const a=(await e.json()).error;return io.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function h1({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function G2(s,{refreshToken:e}){const n=h1(s);return n.append("Authorization",z2(e)),n}async function m1(s){const e=await s();return e.status>=500&&e.status<600?s():e}function H2(s){return Number(s.replace("s","000"))}function z2(s){return`${l1} ${s}`}async function X2({appConfig:s,heartbeatServiceProvider:e},{fid:n}){const a=u1(s),o=h1(s),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={fid:n,authVersion:l1,appId:s.appId,sdkVersion:o1},g={method:"POST",headers:o,body:JSON.stringify(h)},E=await m1(()=>fetch(a,g));if(E.ok){const _=await E.json();return{fid:_.fid||n,registrationStatus:2,refreshToken:_.refreshToken,authToken:d1(_.authToken)}}else throw await f1("Create Installation",E)}function p1(s){return new Promise(e=>{setTimeout(e,s)})}function $2(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const Y2=/^[cdef][\w-]{21}$/,op="";function Q2(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=K2(s);return Y2.test(n)?n:op}catch{return op}}function K2(s){return $2(s).substr(0,22)}function sf(s){return`${s.appName}!${s.appId}`}const _1=new Map;function g1(s,e){const n=sf(s);y1(n,e),W2(n,e)}function y1(s,e){const n=_1.get(s);if(n)for(const a of n)a(e)}function W2(s,e){const n=J2();n&&n.postMessage({key:s,fid:e}),Z2()}let to=null;function J2(){return!to&&"BroadcastChannel"in self&&(to=new BroadcastChannel("[Firebase] FID Change"),to.onmessage=s=>{y1(s.data.key,s.data.fid)}),to}function Z2(){_1.size===0&&to&&(to.close(),to=null)}const ek="firebase-installations-database",tk=1,ao="firebase-installations-store";let bm=null;function e_(){return bm||(bm=Vd(ek,tk,{upgrade:(s,e)=>{e===0&&s.createObjectStore(ao)}})),bm}async function Cd(s,e){const n=sf(s),o=(await e_()).transaction(ao,"readwrite"),u=o.objectStore(ao),h=await u.get(n);return await u.put(e,n),await o.done,(!h||h.fid!==e.fid)&&g1(s,e.fid),e}async function E1(s){const e=sf(s),a=(await e_()).transaction(ao,"readwrite");await a.objectStore(ao).delete(e),await a.done}async function af(s,e){const n=sf(s),o=(await e_()).transaction(ao,"readwrite"),u=o.objectStore(ao),h=await u.get(n),g=e(h);return g===void 0?await u.delete(n):await u.put(g,n),await o.done,g&&(!h||h.fid!==g.fid)&&g1(s,g.fid),g}async function t_(s){let e;const n=await af(s.appConfig,a=>{const o=nk(a),u=sk(s,o);return e=u.registrationPromise,u.installationEntry});return n.fid===op?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nk(s){const e=s||{fid:Q2(),registrationStatus:0};return v1(e)}function sk(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(io.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=ik(s,n);return{installationEntry:n,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ak(s)}:{installationEntry:e}}async function ik(s,e){try{const n=await X2(s,e);return Cd(s.appConfig,n)}catch(n){throw c1(n)&&n.customData.serverCode===409?await E1(s.appConfig):await Cd(s.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ak(s){let e=await CT(s.appConfig);for(;e.registrationStatus===1;)await p1(100),e=await CT(s.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:a}=await t_(s);return a||n}return e}function CT(s){return af(s,e=>{if(!e)throw io.create("installation-not-found");return v1(e)})}function v1(s){return rk(s)?{fid:s.fid,registrationStatus:0}:s}function rk(s){return s.registrationStatus===1&&s.registrationTime+r1<Date.now()}async function ok({appConfig:s,heartbeatServiceProvider:e},n){const a=lk(s,n),o=G2(s,n),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={installation:{sdkVersion:o1,appId:s.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},E=await m1(()=>fetch(a,g));if(E.ok){const _=await E.json();return d1(_)}else throw await f1("Generate Auth Token",E)}function lk(s,{fid:e}){return`${u1(s)}/${e}/authTokens:generate`}async function n_(s,e=!1){let n;const a=await af(s.appConfig,u=>{if(!T1(u))throw io.create("not-registered");const h=u.authToken;if(!e&&dk(h))return u;if(h.requestStatus===1)return n=ck(s,e),u;{if(!navigator.onLine)throw io.create("app-offline");const g=hk(u);return n=uk(s,g),g}});return n?await n:a.authToken}async function ck(s,e){let n=await IT(s.appConfig);for(;n.authToken.requestStatus===1;)await p1(100),n=await IT(s.appConfig);const a=n.authToken;return a.requestStatus===0?n_(s,e):a}function IT(s){return af(s,e=>{if(!T1(e))throw io.create("not-registered");const n=e.authToken;return mk(n)?{...e,authToken:{requestStatus:0}}:e})}async function uk(s,e){try{const n=await ok(s,e),a={...e,authToken:n};return await Cd(s.appConfig,a),n}catch(n){if(c1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await E1(s.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Cd(s.appConfig,a)}throw n}}function T1(s){return s!==void 0&&s.registrationStatus===2}function dk(s){return s.requestStatus===2&&!fk(s)}function fk(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+q2}function hk(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function mk(s){return s.requestStatus===1&&s.requestTime+r1<Date.now()}async function pk(s){const e=s,{installationEntry:n,registrationPromise:a}=await t_(e);return a?a.catch(console.error):n_(e).catch(console.error),n.fid}async function _k(s,e=!1){const n=s;return await gk(n),(await n_(n,e)).token}async function gk(s){const{registrationPromise:e}=await t_(s);e&&await e}function yk(s){if(!s||!s.options)throw Sm("App Configuration");if(!s.name)throw Sm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!s.options[n])throw Sm(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Sm(s){return io.create("missing-app-config-values",{valueName:s})}const b1="installations",Ek="installations-internal",vk=s=>{const e=s.getProvider("app").getImmediate(),n=yk(e),a=qd(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},Tk=s=>{const e=s.getProvider("app").getImmediate(),n=qd(e,b1).getImmediate();return{getId:()=>pk(n),getToken:o=>_k(n,o)}};function bk(){pr(new Na(b1,vk,"PUBLIC")),pr(new Na(Ek,Tk,"PRIVATE"))}bk();qi(a1,Zp);qi(a1,Zp,"esm2020");const Sk="/firebase-messaging-sw.js",Nk="/firebase-cloud-messaging-push-scope",S1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xk="https://fcmregistrations.googleapis.com/v1",N1="google.c.a.c_id",wk="google.c.a.c_l",Ak="google.c.a.ts",Rk="google.c.a.e",kT=1e4;var jT;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(jT||(jT={}));var Vc;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Vc||(Vc={}));function ya(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ck(s){const e="=".repeat((4-s.length%4)%4),n=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(n),o=new Uint8Array(a.length);for(let u=0;u<a.length;++u)o[u]=a.charCodeAt(u);return o}const Nm="fcm_token_details_db",Ik=5,DT="fcm_token_object_Store";async function kk(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(Nm))return null;let e=null;return(await Vd(Nm,Ik,{upgrade:async(a,o,u,h)=>{if(o<2||!a.objectStoreNames.contains(DT))return;const g=h.objectStore(DT),E=await g.index("fcmSenderId").get(s);if(await g.clear(),!!E){if(o===2){const _=E;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:_.createTime??Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:ya(_.vapidKey)}}}else if(o===3){const _=E;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:ya(_.auth),p256dh:ya(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:ya(_.vapidKey)}}}else if(o===4){const _=E;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:ya(_.auth),p256dh:ya(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:ya(_.vapidKey)}}}}}})).close(),await mm(Nm),await mm("fcm_vapid_details_db"),await mm("undefined"),jk(e)?e:null}function jk(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const Dk="firebase-messaging-database",Lk=1,qc="firebase-messaging-store";let xm=null;function x1(){return xm||(xm=Vd(Dk,Lk,{upgrade:(s,e)=>{e===0&&s.createObjectStore(qc)}})),xm}async function Ok(s){const e=w1(s),a=await(await x1()).transaction(qc).objectStore(qc).get(e);if(a)return a;{const o=await kk(s.appConfig.senderId);if(o)return await s_(s,o),o}}async function s_(s,e){const n=w1(s),o=(await x1()).transaction(qc,"readwrite");return await o.objectStore(qc).put(e,n),await o.done,e}function w1({appConfig:s}){return s.appId}const Mk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ss=new Ud("messaging","Messaging",Mk);async function Uk(s,e){const n=await a_(s),a=A1(e),o={method:"POST",headers:n,body:JSON.stringify(a)};let u;try{u=await(await fetch(i_(s.appConfig),o)).json()}catch(h){throw ss.create("token-subscribe-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ss.create("token-subscribe-failed",{errorInfo:h})}if(!u.token)throw ss.create("token-subscribe-no-token");return u.token}async function Vk(s,e){const n=await a_(s),a=A1(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(a)};let u;try{u=await(await fetch(`${i_(s.appConfig)}/${e.token}`,o)).json()}catch(h){throw ss.create("token-update-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ss.create("token-update-failed",{errorInfo:h})}if(!u.token)throw ss.create("token-update-no-token");return u.token}async function qk(s,e){const a={method:"DELETE",headers:await a_(s)};try{const u=await(await fetch(`${i_(s.appConfig)}/${e}`,a)).json();if(u.error){const h=u.error.message;throw ss.create("token-unsubscribe-failed",{errorInfo:h})}}catch(o){throw ss.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}}function i_({projectId:s}){return`${xk}/projects/${s}/registrations`}async function a_({appConfig:s,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function A1({p256dh:s,auth:e,endpoint:n,vapidKey:a}){const o={web:{endpoint:n,auth:e,p256dh:s}};return a!==S1&&(o.web.applicationPubKey=a),o}const Bk=10080*60*1e3;async function Pk(s){const e=await Gk(s.swRegistration,s.vapidKey),n={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:ya(e.getKey("auth")),p256dh:ya(e.getKey("p256dh"))},a=await Ok(s.firebaseDependencies);if(a){if(Hk(a.subscriptionOptions,n))return Date.now()>=a.createTime+Bk?Fk(s,{token:a.token,createTime:Date.now(),subscriptionOptions:n}):a.token;try{await qk(s.firebaseDependencies,a.token)}catch(o){console.warn(o)}return LT(s.firebaseDependencies,n)}else return LT(s.firebaseDependencies,n)}async function Fk(s,e){try{const n=await Vk(s.firebaseDependencies,e),a={...e,token:n,createTime:Date.now()};return await s_(s.firebaseDependencies,a),n}catch(n){throw n}}async function LT(s,e){const a={token:await Uk(s,e),createTime:Date.now(),subscriptionOptions:e};return await s_(s,a),a.token}async function Gk(s,e){const n=await s.pushManager.getSubscription();return n||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ck(e)})}function Hk(s,e){const n=e.vapidKey===s.vapidKey,a=e.endpoint===s.endpoint,o=e.auth===s.auth,u=e.p256dh===s.p256dh;return n&&a&&o&&u}function OT(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return zk(e,s),Xk(e,s),$k(e,s),e}function zk(s,e){if(!e.notification)return;s.notification={};const n=e.notification.title;n&&(s.notification.title=n);const a=e.notification.body;a&&(s.notification.body=a);const o=e.notification.image;o&&(s.notification.image=o);const u=e.notification.icon;u&&(s.notification.icon=u)}function Xk(s,e){e.data&&(s.data=e.data)}function $k(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const n=e.fcmOptions?.link??e.notification?.click_action;n&&(s.fcmOptions.link=n);const a=e.fcmOptions?.analytics_label;a&&(s.fcmOptions.analyticsLabel=a)}function Yk(s){return typeof s=="object"&&!!s&&N1 in s}function Qk(s){if(!s||!s.options)throw wm("App Configuration Object");if(!s.name)throw wm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=s;for(const a of e)if(!n[a])throw wm(a);return{appName:s.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function wm(s){return ss.create("missing-app-config-values",{valueName:s})}class Kk{constructor(e,n,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=Qk(e);this.firebaseDependencies={app:e,appConfig:o,installations:n,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function Wk(s){try{s.swRegistration=await navigator.serviceWorker.register(Sk,{scope:Nk}),s.swRegistration.update().catch(()=>{}),await Jk(s.swRegistration)}catch(e){throw ss.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function Jk(s){return new Promise((e,n)=>{const a=setTimeout(()=>n(new Error(`Service worker not registered after ${kT} ms`)),kT),o=s.installing||s.waiting;s.active?(clearTimeout(a),e()):o?o.onstatechange=u=>{u.target?.state==="activated"&&(o.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),n(new Error("No incoming service worker found.")))})}async function Zk(s,e){if(!e&&!s.swRegistration&&await Wk(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ss.create("invalid-sw-registration");s.swRegistration=e}}async function ej(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=S1)}async function R1(s,e){if(!navigator)throw ss.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ss.create("permission-blocked");return await ej(s,e?.vapidKey),await Zk(s,e?.serviceWorkerRegistration),Pk(s)}async function tj(s,e,n){const a=nj(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:n[N1],message_name:n[wk],message_time:n[Ak],message_device_time:Math.floor(Date.now()/1e3)})}function nj(s){switch(s){case Vc.NOTIFICATION_CLICKED:return"notification_open";case Vc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function sj(s,e){const n=e.data;if(!n.isFirebaseMessaging)return;s.onMessageHandler&&n.messageType===Vc.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(OT(n)):s.onMessageHandler.next(OT(n)));const a=n.data;Yk(a)&&a[Rk]==="1"&&await tj(s,n.messageType,a)}const MT="@firebase/messaging",UT="0.12.23";const ij=s=>{const e=new Kk(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>sj(e,n)),e},aj=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:a=>R1(e,a)}};function rj(){pr(new Na("messaging",ij,"PUBLIC")),pr(new Na("messaging-internal",aj,"PRIVATE")),qi(MT,UT),qi(MT,UT,"esm2020")}async function C1(){try{await vb()}catch{return!1}return typeof window<"u"&&Eb()&&Kw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function oj(s,e){if(!navigator)throw ss.create("only-available-in-window");return s.onMessageHandler=e,()=>{s.onMessageHandler=null}}function lj(s=xb()){return C1().then(e=>{if(!e)throw ss.create("unsupported-browser")},e=>{throw ss.create("indexed-db-unsupported")}),qd(Sa(s),"messaging").getImmediate()}async function cj(s,e){return s=Sa(s),R1(s,e)}function uj(s,e){return s=Sa(s),oj(s,e)}rj();const hd={apiKey:"AIzaSyA3dJLU8Xw6vcqXtOhVbuI5aO_ImdT8upg",authDomain:"goal-game-7ad53.firebaseapp.com",projectId:"goal-game-7ad53",storageBucket:"goal-game-7ad53.firebasestorage.app",messagingSenderId:"86507800050",appId:"1:86507800050:web:f7674a55bc2291686f976b"},I1="BLD2XB0Bh-Y2EwwHU1YimB6-tzKQNrGh-bzoZHXbSWlvQt1mg6K5c7EJWfBIDrGY0cQJXO4LNrKD9MjlZhMsb3c";let Am=null,Rm=null,sd=null;function Xi(){return!!(hd.apiKey&&hd.projectId&&hd.messagingSenderId&&I1)}function k1(){if(!Am){if(!Xi())throw new Error("Firebase is not configured. Please add your Firebase config to .env file.");Am=Nb(hd)}return Am}function mo(){return Rm||(Rm=E2(k1())),Rm}async function j1(){return sd||(await C1()?(sd=lj(k1()),sd):(console.warn("Firebase Messaging is not supported in this browser"),null))}function Ra(){let s=localStorage.getItem("goal-game-device-id");return s||(s=crypto.randomUUID(),localStorage.setItem("goal-game-device-id",s)),s}const Al="scheduled_notifications",D1="fcm_tokens";async function dj(s,e,n,a,o,u){if(!Xi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const h=mo(),g=Ra(),E=new Date(`${n}T${a}`),_=new Date(E.getTime()-o*60*1e3);if(_<=new Date)return console.warn("Notification trigger time is in the past, skipping"),null;const S=`${g}_event_${s}`,x={id:S,eventId:s,eventTitle:e,eventDate:n,eventTime:a,triggerAt:_.toISOString(),fcmToken:u,deviceId:g,status:"pending",createdAt:new Date().toISOString(),notificationType:"event"};try{return await Jp(ho(h,Al,S),x),S}catch(w){return console.error("Failed to schedule notification:",w),null}}async function fj(s,e,n,a,o){if(!Xi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const u=mo(),h=Ra(),g=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z",E=new Date(g);if(E<=new Date)return console.warn("Buff expiry time is in the past, skipping notification"),null;const _=`${h}_buff_${s}`,S={id:_,buffLogId:s,buffName:e,buffType:n,triggerAt:E.toISOString(),fcmToken:o,deviceId:h,status:"pending",createdAt:new Date().toISOString(),notificationType:"buff_expiry"};try{return await Jp(ho(u,Al,_),S),_}catch(x){return console.error("Failed to schedule buff expiry notification:",x),null}}async function hj(s){if(!Xi())return;const e=mo(),a=`${Ra()}_buff_${s}`;try{await nf(ho(e,Al,a))}catch(o){console.error("Failed to cancel buff expiry notification:",o)}}async function mj(s){if(!Xi())return;const e=mo(),a=`${Ra()}_event_${s}`;try{await nf(ho(e,Al,a))}catch(o){console.error("Failed to cancel notification:",o)}}async function pj(){if(!Xi())return;const s=mo(),e=Ra();try{const n=L2(y2(s,Al),wT("deviceId","==",e),wT("status","==","pending")),o=(await U2(n)).docs.map(u=>nf(ho(s,Al,u.id)));await Promise.all(o)}catch(n){console.error("Failed to cancel all notifications:",n)}}async function _j(s){if(!Xi())return;const e=mo(),n=Ra();try{await Jp(ho(e,D1,n),{token:s,deviceId:n,updatedAt:new Date().toISOString(),platform:navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?"ios":navigator.userAgent.includes("Android")?"android":"web"})}catch(a){console.error("Failed to save FCM token:",a)}}async function gj(){if(!Xi())return;const s=mo(),e=Ra();try{await nf(ho(s,D1,e))}catch(n){console.error("Failed to delete FCM token:",n)}}function yj(){return"Notification"in window?Notification.permission:"unsupported"}function r_(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function o_(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}function l_(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function Ej(){return o_()&&!l_()?!1:r_()}async function vj(){if(!Xi())return{success:!1,token:null,error:"Firebase is not configured"};if(!r_())return{success:!1,token:null,error:"Notifications are not supported in this browser"};if(o_()&&!l_())return{success:!1,token:null,error:"On iOS, you must add this app to your home screen first, then enable notifications"};try{if(await Notification.requestPermission()!=="granted")return{success:!1,token:null,error:"Notification permission was denied"};const e=await j1();if(!e)return{success:!1,token:null,error:"Failed to initialize Firebase Messaging"};const n=await navigator.serviceWorker.ready,a=await cj(e,{vapidKey:I1,serviceWorkerRegistration:n});return a?(await _j(a),{success:!0,token:a}):{success:!1,token:null,error:"Failed to get FCM token"}}catch(s){return console.error("Error requesting notification permission:",s),{success:!1,token:null,error:s instanceof Error?s.message:"Unknown error occurred"}}}async function Tj(){try{await gj(),await pj()}catch(s){console.error("Error disabling notifications:",s)}}function bj(s){let e=null;return j1().then(n=>{n&&(e=uj(n,a=>{if(console.log("Foreground message received:",a),s(a),a.notification){const{title:o,body:u}=a.notification;o&&new Notification(o,{body:u||"",icon:"/goal-game/icons/icon-192.png",badge:"/goal-game/icons/icon-192.png",tag:a.data?.eventId||"goal-game-notification"})}}))}),()=>{e&&e()}}function L1(){const s=ee(),e=Ra(),n=s.exec("SELECT enabled, default_reminder_minutes, fcm_token, device_id FROM notification_settings WHERE id = 1");if(n.length===0||n[0].values.length===0)return s.run("INSERT OR REPLACE INTO notification_settings (id, enabled, default_reminder_minutes, fcm_token, device_id) VALUES (1, 0, 15, NULL, ?)",[e]),{enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:e};const a=n[0].values[0];return{enabled:!!a[0],defaultReminderMinutes:a[1],fcmToken:a[2],deviceId:a[3]}}async function Cm(s){const e=ee(),n=Ra(),o={...L1(),...s};e.run(`UPDATE notification_settings SET
      enabled = ?,
      default_reminder_minutes = ?,
      fcm_token = ?,
      device_id = ?,
      updated_at = datetime('now')
    WHERE id = 1`,[o.enabled?1:0,o.defaultReminderMinutes,o.fcmToken,n]),await Te()}function O1(){const[s,e]=k.useState({enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:""}),[n,a]=k.useState("default"),[o,u]=k.useState(!1),[h,g]=k.useState(null),E=r_(),_=Xi(),S=Ej(),x=o_(),w=l_();k.useEffect(()=>{try{const ie=L1();e(ie),a(yj())}catch(ie){console.error("Failed to load notification settings:",ie)}},[]),k.useEffect(()=>!s.enabled||!s.fcmToken?void 0:bj(Ee=>{console.log("Notification received in foreground:",Ee)}),[s.enabled,s.fcmToken]);const B=k.useCallback(async()=>{u(!0),g(null);try{const ie=await vj();return ie.success?(await Cm({enabled:!0,fcmToken:ie.token}),e(Ee=>({...Ee,enabled:!0,fcmToken:ie.token})),a("granted"),!0):(g(ie.error||"Failed to enable notifications"),!1)}catch(ie){const Ee=ie instanceof Error?ie.message:"Unknown error";return g(Ee),!1}finally{u(!1)}},[]),H=k.useCallback(async()=>{u(!0),g(null);try{await Tj(),await Cm({enabled:!1,fcmToken:null}),e(ie=>({...ie,enabled:!1,fcmToken:null}))}catch(ie){const Ee=ie instanceof Error?ie.message:"Unknown error";g(Ee)}finally{u(!1)}},[]),U=k.useCallback(async ie=>{await Cm({defaultReminderMinutes:ie}),e(Ee=>({...Ee,defaultReminderMinutes:ie}))},[]),V=k.useCallback(async(ie,Ee,ye,D,R)=>{!s.enabled||!s.fcmToken||await dj(ie,Ee,ye,D,R,s.fcmToken)},[s.enabled,s.fcmToken]),z=k.useCallback(async ie=>{await mj(ie)},[]),G=k.useCallback(async(ie,Ee,ye,D)=>{!s.enabled||!s.fcmToken||await fj(ie,Ee,ye,D,s.fcmToken)},[s.enabled,s.fcmToken]),K=k.useCallback(async ie=>{await hj(ie)},[]);return{settings:s,permissionState:n,isSupported:E,isConfigured:_,canEnable:S,isIOS:x,isStandalone:w,loading:o,error:h,enableNotifications:B,disableNotificationsHandler:H,setDefaultReminderMinutes:U,scheduleEventReminder:V,cancelEventReminder:z,scheduleBuffExpiry:G,cancelBuffExpiry:K}}const Sj=[{type:"activate_buffs",title:"Habit Builder",description:"Activate {target} buff(s) today",targetRange:[2,4],xpReward:25},{type:"complete_steps",title:"Step by Step",description:"Complete {target} quest step(s) today",targetRange:[3,7],xpReward:30},{type:"no_debuffs",title:"Clean Slate",description:"Avoid activating any debuffs today",targetRange:[1,1],xpReward:40},{type:"gym_session",title:"Iron Warrior",description:"Complete a gym workout today",targetRange:[1,1],xpReward:35},{type:"early_start",title:"Early Bird",description:"Complete a habit before 8 AM",targetRange:[1,1],xpReward:30},{type:"activate_specific",title:"Wellness Warrior",description:"Activate a health-related buff",targetRange:[1,1],xpReward:20}],VT=50;function po(){return lb()}function qT(s){const e=ee(),n=s||po(),a=e.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE date = ? ORDER BY id`,[n]);return a.length?a[0].values.map(o=>({id:o[0],date:o[1],quest_type:o[2],title:o[3],description:o[4],target_value:o[5],current_value:o[6],xp_reward:o[7],is_completed:!!o[8],completed_at:o[9]})):[]}function Nj(s){const e=ee(),n=po(),a=e.exec("SELECT id FROM daily_quest_bonus WHERE date = ?",[n]);return a.length>0&&a[0].values.length>0}async function xj(s){const e=ee(),n=po();e.run("INSERT OR IGNORE INTO daily_quest_bonus (date, claimed_at) VALUES (?, datetime('now'))",[n]),await Te()}async function lp(){const s=ee(),e=po(),n=qT(e);if(n.length>0)return n;const o=[...Sj].sort(()=>Math.random()-.5).slice(0,3);for(const u of o){const h=u.targetRange[0]===u.targetRange[1]?u.targetRange[0]:Math.floor(Math.random()*(u.targetRange[1]-u.targetRange[0]+1))+u.targetRange[0],g=u.description.replace("{target}",h.toString());s.run(`INSERT INTO daily_quests (date, quest_type, title, description, target_value, xp_reward)
       VALUES (?, ?, ?, ?, ?, ?)`,[e,u.type,u.title,g,h,u.xpReward])}return await Te(),qT(e)}async function M1(s,e=1,n){const a=ee(),o=n||po(),u=a.exec(`SELECT id, current_value, target_value, is_completed FROM daily_quests
     WHERE date = ? AND quest_type = ? AND is_completed = 0`,[o,s]);if(!u.length||!u[0].values.length)return null;const h=u[0].values[0][0],g=u[0].values[0][1],E=u[0].values[0][2],_=g+e,S=_>=E;a.run(`UPDATE daily_quests SET current_value = ?, is_completed = ?, completed_at = ?
     WHERE id = ?`,[_,S?1:0,S?new Date().toISOString():null,h]),await Te();const x=a.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE id = ?`,[h]);if(!x.length)return null;const w=x[0].values[0];return{id:w[0],date:w[1],quest_type:w[2],title:w[3],description:w[4],target_value:w[5],current_value:w[6],xp_reward:w[7],is_completed:!!w[8],completed_at:w[9]}}async function wj(s){const e=ee(),n=po();(e.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) = ?`,[n])[0]?.values[0]?.[0]||0)===0&&await M1("no_debuffs",1,n)}function Aj(){const e=ee().exec("SELECT value FROM app_settings WHERE key = 'last_daily_quest_reset_date'");return!e.length||!e[0].values.length?null:e[0].values[0][0]}async function BT(s){ee().run(`INSERT INTO app_settings (key, value) VALUES ('last_daily_quest_reset_date', ?)
     ON CONFLICT(key) DO UPDATE SET value = ?`,[s,s]),await Te()}async function Rj(){const s=po(),e=Aj();return e?e!==s?(await BT(s),await lp(),!0):!1:(await BT(s),await lp(),!1)}function Cj({grantXP:s}){const[e,n]=k.useState([]),[a,o]=k.useState(!1),[u,h]=k.useState(!0),g=k.useCallback(async()=>{const H=await lp();n(H),o(Nj()),h(!1)},[]);k.useEffect(()=>{g()},[g]),k.useEffect(()=>{const U=setInterval(()=>{const V=new Date().toISOString().split("T")[0];e.length>0&&e[0].date!==V&&g()},6e4);return()=>clearInterval(U)},[e,g]);const E=k.useCallback(async(H,U=1)=>{const V=await M1(H,U);return V?.is_completed&&await s(V.xp_reward,`Daily Quest: ${V.title}`,"daily_quest",V.id),await g(),V},[s,g]),_=k.useCallback(async()=>!e.every(U=>U.is_completed)||a?!1:(await xj(),await s(VT,"Daily Quest Bonus: All quests completed!","daily_quest_bonus"),o(!0),!0),[e,a,s]),S=k.useCallback(async()=>{await wj(),await g()},[g]),x=e.every(H=>H.is_completed),w=e.filter(H=>H.is_completed).length,B=e.filter(H=>H.is_completed).reduce((H,U)=>H+U.xp_reward,0);return{quests:e,loading:u,allCompleted:x,completedCount:w,bonusClaimed:a,bonusXp:VT,totalXpEarned:B,refresh:g,updateProgress:E,claimBonus:_,checkNoDebuffs:S}}const U1=[{days:3,title:"Getting Started",bonusXp:15,icon:""},{days:7,title:"One Week Strong",bonusXp:50,icon:""},{days:14,title:"Two Week Warrior",bonusXp:75,icon:""},{days:21,title:"Habit Forming",bonusXp:100,icon:""},{days:30,title:"Monthly Master",bonusXp:150,icon:""},{days:60,title:"Two Month Champion",bonusXp:250,icon:""},{days:90,title:"Quarterly Legend",bonusXp:400,icon:""},{days:180,title:"Half Year Hero",bonusXp:750,icon:""},{days:365,title:"Annual Achiever",bonusXp:1500,icon:""}];function Ij(s){return U1.filter(e=>e.days<=s)}function kj(s){const e=Ij(s);return e.length>0?e[e.length-1]:null}function V1(){return new Date().toISOString().split("T")[0]}function jj(){const s=new Date;return s.setDate(s.getDate()-1),s.toISOString().split("T")[0]}function q1(s){const e=ee(),n=V1(),a=jj(),o=e.exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-400 days')
     ORDER BY d DESC`,[s]),u=o.length?o[0].values.map(V=>V[0]):[],h=e.exec(`SELECT freeze_date FROM streak_freezes
     WHERE buff_definition_id = ? AND freeze_date >= date('now', '-400 days')`,[s]),g=h.length?h[0].values.map(V=>V[0]):[],E=e.exec(`SELECT used_date FROM streak_shield_uses
     WHERE buff_definition_id = ? AND used_date >= date('now', '-400 days')`,[s]),_=E.length?E[0].values.map(V=>V[0]):[];let S=0;const x=new Set([...u,...g,..._]);let w=n;if(!x.has(n))if(x.has(a))w=a;else if(g.includes(n))w=n;else return{buffDefinitionId:s,currentStreak:0,longestStreak:PT(s),lastActivatedDate:u[0]||null,isAtRisk:u.length>0&&u[0]===a,shieldActive:!1};for(;x.has(w);){S++;const V=new Date(w+"T12:00:00");V.setDate(V.getDate()-1),w=V.toISOString().split("T")[0]}const B=!u.includes(n)&&!g.includes(n)&&u.includes(a),H=_.includes(n),U=PT(s);return S>U&&Dj(s,S),{buffDefinitionId:s,currentStreak:S,longestStreak:Math.max(S,U),lastActivatedDate:u[0]||null,isAtRisk:B,shieldActive:H}}function PT(s){const n=ee().exec("SELECT longest_streak FROM streak_records WHERE buff_definition_id = ?",[s]);return n.length&&n[0].values.length?n[0].values[0][0]:0}async function Dj(s,e){ee().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, updated_at)
     VALUES (?, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       longest_streak = MAX(longest_streak, excluded.longest_streak),
       updated_at = datetime('now')`,[s,e]),await Te()}function B1(){const e=ee().exec("SELECT SUM(quantity) FROM streak_shields");return e.length&&e[0].values.length&&e[0].values[0][0]||0}async function Lj(s){ee().run("INSERT INTO streak_shields (quantity) VALUES (?)",[s]),await Te()}async function Oj(s){const e=ee(),n=V1();if(B1()<=0)return!1;const o=e.exec("SELECT id FROM streak_shield_uses WHERE buff_definition_id = ? AND used_date = ?",[s,n]);if(o.length&&o[0].values.length)return!1;const u=q1(s);return e.run(`UPDATE streak_shields SET quantity = quantity - 1
     WHERE id = (SELECT id FROM streak_shields WHERE quantity > 0 ORDER BY earned_at LIMIT 1)`),e.run(`INSERT INTO streak_shield_uses (buff_definition_id, used_date, streak_saved)
     VALUES (?, ?, ?)`,[s,n,u.currentStreak]),e.run("DELETE FROM streak_shields WHERE quantity <= 0"),await Te(),!0}function Mj(s){const n=ee().exec(`SELECT id, buff_definition_id, freeze_date, reason, created_at
     FROM streak_freezes WHERE buff_definition_id = ? AND freeze_date >= date('now')
     ORDER BY freeze_date`,[s]);return n.length?n[0].values.map(a=>({id:a[0],buff_definition_id:a[1],freeze_date:a[2],reason:a[3],created_at:a[4]})):[]}async function Uj(s,e,n){ee().run(`INSERT OR IGNORE INTO streak_freezes (buff_definition_id, freeze_date, reason)
     VALUES (?, ?, ?)`,[s,e,n||null]),await Te()}async function Vj(s){ee().run("DELETE FROM streak_freezes WHERE id = ?",[s]),await Te()}function qj(s){const n=ee().exec("SELECT last_milestone_claimed FROM streak_records WHERE buff_definition_id = ?",[s]);return n.length&&n[0].values.length?n[0].values[0][0]:0}async function Bj(s,e){ee().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, last_milestone_claimed, updated_at)
     VALUES (?, 0, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       last_milestone_claimed = ?,
       updated_at = datetime('now')`,[s,e,e]),await Te()}function FT(s,e){const n=qj(s);return U1.filter(a=>a.days<=e&&a.days>n)}function Pj(){const e=ee().exec("SELECT DISTINCT definition_id FROM buff_log WHERE definition_id IN (SELECT id FROM buff_definitions WHERE type = ?)",["buff"]),n=new Map;if(!e.length)return n;for(const a of e[0].values){const o=a[0];n.set(o,q1(o))}return n}function Fj({grantXP:s}){const[e,n]=k.useState(new Map),[a,o]=k.useState(0),[u,h]=k.useState(!0),g=k.useCallback(()=>{n(Pj()),o(B1()),h(!1)},[]);k.useEffect(()=>{g()},[g]);const E=k.useCallback(V=>e.get(V)||{buffDefinitionId:V,currentStreak:0,longestStreak:0,lastActivatedDate:null,isAtRisk:!1,shieldActive:!1},[e]),_=k.useCallback(async V=>{const z=await Oj(V);return z&&g(),z},[g]),S=k.useCallback(async(V,z,G)=>{await Uj(V,z,G),g()},[g]),x=k.useCallback(async V=>{await Vj(V),g()},[g]),w=k.useCallback(V=>Mj(V),[]),B=k.useCallback(async V=>{const z=E(V),G=FT(V,z.currentStreak);for(const K of G)await s(K.bonusXp,`Streak Milestone: ${K.title} (${K.days} days)`,"streak_milestone",V),await Bj(V,K.days);return g(),G},[E,s,g]),H=k.useCallback(V=>{const z=E(V);return FT(V,z.currentStreak)},[E]),U=k.useCallback(async V=>{await Lj(V),g()},[g]);return{streakInfos:e,shieldCount:a,loading:u,refresh:g,getStreakForBuff:E,useShield:_,addFreeze:S,removeFreeze:x,getFreezes:w,claimMilestones:B,getUnclaimedMilestones:H,addShields:U}}const cp=[{type:"procrastination_dragon",name:"Procrastination Dragon",description:"A lazy beast that feeds on delayed tasks and broken promises.",icon:"",hpRange:[400,500],xpReward:200,bonusShields:1,difficulty:"medium"},{type:"distraction_demon",name:"Distraction Demon",description:"A cunning fiend that lures you away from your goals with endless diversions.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"},{type:"sloth_specter",name:"Sloth Specter",description:"A ghostly presence that drains your energy and willpower.",icon:"",hpRange:[300,400],xpReward:150,bonusShields:0,difficulty:"easy"},{type:"chaos_chimera",name:"Chaos Chimera",description:"A multi-headed monster representing disorganization and scattered focus.",icon:"",hpRange:[500,600],xpReward:250,bonusShields:2,difficulty:"hard"},{type:"anxiety_wyrm",name:"Anxiety Wyrm",description:"A serpentine creature that coils around your mind with worry and doubt.",icon:"",hpRange:[450,550],xpReward:225,bonusShields:1,difficulty:"hard"},{type:"comfort_zone_golem",name:"Comfort Zone Golem",description:"A stubborn construct that blocks the path to growth and change.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"}],cr={step_completed:10,buff_activated:25,quest_completed:50,goal_completed:100,daily_quest_completed:15,focus_session:20,routine_completed:30},up={debuff_activated:20,step_missed:15};function Id(s=new Date){const e=new Date(s),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function Gj(s){const e=new Date(s+"T12:00:00");return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}function GT(){const s=ee(),e=Id(),n=s.exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE week_start = ?`,[e]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return F1(a)}function P1(s){const n=ee().exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE id = ?`,[s]);return!n.length||!n[0].values.length?null:F1(n[0].values[0])}async function Hj(){const s=ee(),e=Id(),n=GT();if(n)return n;const a=cp[Math.floor(Math.random()*cp.length)],o=Math.floor(Math.random()*(a.hpRange[1]-a.hpRange[0]+1))+a.hpRange[0];return s.run(`INSERT INTO weekly_boss (week_start, boss_type, name, description, icon, max_hp, current_hp, xp_reward, bonus_shields)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,a.type,a.name,a.description,a.icon,o,o,a.xpReward,a.bonusShields]),await Te(),GT()}async function zj(s,e,n,a){const o=ee(),u=P1(s);if(!u||u.is_defeated)return{newHp:u?.current_hp||0,isDefeated:u?.is_defeated||!1};const h=Math.max(0,u.current_hp-n),g=h===0;return o.run(`UPDATE weekly_boss SET current_hp = ?, is_defeated = ?, defeated_at = ?
     WHERE id = ?`,[h,g?1:0,g?new Date().toISOString():null,s]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[s,e,n,a||null]),await Te(),{newHp:h,isDefeated:g}}async function Xj(s,e,n,a){const o=ee(),u=P1(s);if(!u||u.is_defeated)return{newHp:u?.current_hp||0};const h=Math.min(u.max_hp,u.current_hp+n);return o.run("UPDATE weekly_boss SET current_hp = ? WHERE id = ?",[h,s]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[s,e,-n,a||null]),await Te(),{newHp:h}}function $j(){const e=ee().exec("SELECT COUNT(*) FROM weekly_boss WHERE is_defeated = 1");return e.length&&e[0].values.length?e[0].values[0][0]:0}function F1(s){return{id:s[0],week_start:s[1],boss_type:s[2],name:s[3],description:s[4],icon:s[5],max_hp:s[6],current_hp:s[7],is_defeated:!!s[8],defeated_at:s[9],xp_reward:s[10],bonus_shields:s[11],created_at:s[12]}}function Yj({grantXP:s,addShields:e}){const[n,a]=k.useState(null),[o,u]=k.useState(!0),[h,g]=k.useState(!1),E=k.useCallback(async()=>{const z=await Hj();a(z),u(!1)},[]);k.useEffect(()=>{E()},[E]),k.useEffect(()=>{const G=setInterval(()=>{const K=Id();n&&n.week_start!==K&&E()},6e4);return()=>clearInterval(G)},[n,E]);const _=k.useCallback(async(z,G)=>{if(!n||n.is_defeated)return;const K=cr[z],ie=await zj(n.id,z,K,G);return a(Ee=>Ee?{...Ee,current_hp:ie.newHp,is_defeated:ie.isDefeated}:null),ie.isDefeated&&!n.is_defeated&&(g(!0),await s(n.xp_reward,`Defeated ${n.name}!`,"boss",n.id),n.bonus_shields>0&&e&&await e(n.bonus_shields)),ie},[n,s,e]),S=k.useCallback(async(z,G)=>{if(!n||n.is_defeated)return;const K=up[z],ie=await Xj(n.id,z,K,G);return a(Ee=>Ee?{...Ee,current_hp:ie.newHp}:null),ie},[n]),x=k.useCallback(()=>{g(!1)},[]),w=n?.week_start||Id(),B=Gj(w),H=n?Math.round(n.current_hp/n.max_hp*100):100,U=n?n.max_hp-n.current_hp:0,V=$j();return{boss:n,loading:o,justDefeated:h,weekStart:w,weekEnd:B,hpPercentage:H,damageDealt:U,totalDefeated:V,refresh:E,dealDamage:_,healBoss:S,dismissDefeatNotification:x}}function Qj(){const n=ee().exec(`
    SELECT
      ad.id, ad.key, ad.name, ad.description, ad.category, ad.icon, ad.xp_reward,
      ad.requirement_type, ad.requirement_value, ad.requirement_source, ad.sort_order, ad.is_hidden,
      au.unlocked_at,
      COALESCE(ap.current_value, 0) as current_value
    FROM achievement_definitions ad
    LEFT JOIN achievement_unlocks au ON ad.id = au.definition_id
    LEFT JOIN achievement_progress ap ON ad.id = ap.definition_id
    ORDER BY ad.category, ad.sort_order
  `);return n.length?n[0].values.map(a=>{const o=a[8],u=a[13],h=a[12];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:o,requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11],unlocked:h!==null,unlocked_at:h,current_value:u,progress_percent:Math.min(100,Math.round(u/o*100))}}):[]}async function Kj(s,e=1){const n=ee(),a=n.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ?`,[s]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],E=n.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);if(E.length&&E[0].values.length)continue;const _=n.exec("SELECT current_value FROM achievement_progress WHERE definition_id = ?",[h]),x=(_.length&&_[0].values.length?_[0].values[0][0]:0)+e;n.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,x]),x>=g&&o.push(h)}return await Te(),o}async function Wj(s,e){const n=ee(),a=n.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ? AND requirement_type = 'threshold'`,[s]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],E=n.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);E.length&&E[0].values.length||(n.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,e]),e>=g&&o.push(h))}return await Te(),o}async function Jj(s){const e=ee(),n=e.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[s]);return n.length&&n[0].values.length?!1:(e.run("INSERT INTO achievement_unlocks (definition_id, unlocked_at) VALUES (?, datetime('now'))",[s]),await Te(),!0)}function Zj(s){const n=ee().exec(`SELECT id, key, name, description, category, icon, xp_reward,
     requirement_type, requirement_value, requirement_source, sort_order, is_hidden
     FROM achievement_definitions WHERE id = ?`,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:a[8],requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11]}}function eD(){const s=ee(),e=s.exec("SELECT COUNT(*), SUM(xp_reward) FROM achievement_definitions"),n=e.length?e[0].values[0][0]:0,a=e.length&&e[0].values[0][1]||0,o=s.exec(`
    SELECT COUNT(*), COALESCE(SUM(ad.xp_reward), 0)
    FROM achievement_unlocks au
    JOIN achievement_definitions ad ON au.definition_id = ad.id
  `),u=o.length?o[0].values[0][0]:0,h=o.length?o[0].values[0][1]:0;return{total:n,unlocked:u,totalXp:a,earnedXp:h}}function tD({grantXP:s}){const[e,n]=k.useState([]),[a,o]=k.useState({total:0,unlocked:0,totalXp:0,earnedXp:0}),[u,h]=k.useState([]),[g,E]=k.useState(!0),_=k.useCallback(()=>{n(Qj()),o(eD()),E(!1)},[]);k.useEffect(()=>{_()},[_]);const S=k.useCallback(async V=>{const z=[];for(const G of V)if(await Jj(G)){const ie=Zj(G);ie&&(await s(ie.xp_reward,`Achievement: ${ie.name}`,"achievement",G),z.push({achievement:ie,xpAwarded:ie.xp_reward}))}return z.length>0&&(h(G=>[...G,...z]),_()),z},[s,_]),x=k.useCallback(async(V,z=1)=>{const G=await Kj(V,z);G.length>0&&await S(G),_()},[S,_]),w=k.useCallback(async(V,z)=>{const G=await Wj(V,z);G.length>0&&await S(G),_()},[S,_]),B=k.useCallback(V=>{h(z=>z.filter((G,K)=>K!==V))},[]),H=k.useCallback(()=>{h([])},[]),U=k.useCallback(V=>e.filter(z=>z.category===V),[e]);return{achievements:e,stats:a,loading:g,pendingUnlocks:u,refresh:_,incrementProgress:x,checkThreshold:w,dismissUnlock:B,dismissAllUnlocks:H,getAchievementsByCategory:U}}function ro(){const e=ee().exec("SELECT id, current_energy, max_energy, last_regen_at, bonus_energy FROM energy_state WHERE id = 1");if(!e.length||!e[0].values.length)return{id:1,current_energy:fl,max_energy:fl,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19),bonus_energy:0};const n=e[0].values[0];return{id:n[0],current_energy:n[1],max_energy:n[2],last_regen_at:n[3],bonus_energy:n[4]}}async function rf(s,e,n,a=null){const o=ee(),u=ro(),h=u.current_energy,g=u.max_energy+u.bonus_energy,E=Math.max(0,Math.min(g,u.current_energy+s));return o.run("UPDATE energy_state SET current_energy = ?, last_regen_at = datetime('now') WHERE id = 1",[E]),o.run(`INSERT INTO energy_log (amount, reason, source_type, source_id, energy_before, energy_after)
     VALUES (?, ?, ?, ?, ?, ?)`,[s,e,n,a,h,E]),await Te(),{...u,current_energy:E,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19)}}async function nD(s,e=null){const n=c_(s),a=ro();return a.current_energy<n?{success:!1,newState:a,cost:n}:{success:!0,newState:await rf(-n,`Spent on ${s.replace(/_/g," ")}`,s,e),cost:n}}function sD(s){const e=c_(s);return ro().current_energy>=e}function c_(s){const n=ee().exec("SELECT base_cost FROM energy_costs WHERE action_type = ?",[s]);return!n.length||!n[0].values.length?0:n[0].values[0][0]}async function iD(){const s=ee(),e=ro(),n=e.max_energy+e.bonus_energy;if(e.current_energy>=n)return s.run("UPDATE energy_state SET last_regen_at = datetime('now') WHERE id = 1"),await Te(),{regenerated:0,newState:e};const a=new Date(e.last_regen_at+"Z"),u=(new Date().getTime()-a.getTime())/(1e3*60*60),h=Math.floor(u*ab);if(h<=0)return{regenerated:0,newState:e};const E=Math.min(n,e.current_energy+h)-e.current_energy;if(E>0){const _=await rf(E,"Natural regeneration","regen");return{regenerated:E,newState:_}}return{regenerated:0,newState:e}}async function aD(){const s=ro(),n=s.max_energy+s.bonus_energy-s.current_energy;return n>0?await rf(n,"Full energy restore","restore"):s}function rD(){const[s,e]=k.useState(()=>ro()),[n,a]=k.useState(!0),o=k.useCallback(()=>{e(ro()),a(!1)},[]);k.useEffect(()=>{o()},[o]),k.useEffect(()=>{const U=async()=>{const{regenerated:z,newState:G}=await iD();z>0&&e(G)};U();const V=setInterval(U,6e4);return()=>clearInterval(V)},[]);const u=k.useCallback(async(U,V=null)=>{const z=await nD(U,V);return z.success&&e(z.newState),z},[]),h=k.useCallback(async(U,V)=>{const z=await rf(U,V,"bonus");return e(z),z},[]),g=k.useCallback(async()=>{const U=await aD();return e(U),U},[]),E=k.useCallback(U=>sD(U),[]),_=k.useCallback(U=>c_(U),[]),S=k.useCallback(()=>{const U=[];return s.current_energy<=Mm?U.push({active:!0,name:dm.name,icon:dm.icon,effects:dm.effects}):s.current_energy<=Om&&U.push({active:!0,name:um.name,icon:um.icon,effects:um.effects}),U},[s.current_energy]),x=k.useCallback(()=>{const U=S(),V={};for(const z of U)for(const[G,K]of Object.entries(z.effects))V[G]=(V[G]||0)+K;return V},[S]),w=Math.round(s.current_energy/(s.max_energy+s.bonus_energy)*100),B=s.current_energy<=Om,H=s.current_energy<=Mm;return{state:s,loading:n,refresh:o,spendEnergy:u,addEnergy:h,restoreFullEnergy:g,canAfford:E,getActionCost:_,getEnergyDebuffs:S,getEnergyStatPenalties:x,percentage:w,isLow:B,isEmpty:H}}function dp(){const e=ee().exec(`
    SELECT id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled
    FROM focus_settings WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,...Hs};const n=e[0].values[0];return{id:n[0],work_duration:n[1],short_break:n[2],long_break:n[3],sessions_before_long_break:n[4],auto_start_breaks:!!n[5],sound_enabled:!!n[6]}}async function oD(s){const e=ee(),a={...dp(),...s};return e.run(`
    UPDATE focus_settings SET
      work_duration = ?,
      short_break = ?,
      long_break = ?,
      sessions_before_long_break = ?,
      auto_start_breaks = ?,
      sound_enabled = ?
    WHERE id = 1
  `,[a.work_duration,a.short_break,a.long_break,a.sessions_before_long_break,a.auto_start_breaks?1:0,a.sound_enabled?1:0]),await Te(),a}function fp(){const e=ee().exec(`
    SELECT id, total_sessions, total_minutes, longest_streak, current_streak, today_sessions, today_date
    FROM focus_stats WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,total_sessions:0,total_minutes:0,longest_streak:0,current_streak:0,today_sessions:0,today_date:new Date().toISOString().split("T")[0]};const n=e[0].values[0];return{id:n[0],total_sessions:n[1],total_minutes:n[2],longest_streak:n[3],current_streak:n[4],today_sessions:n[5],today_date:n[6]}}async function lD(s,e=null,n=null){const a=ee();a.run(`
    INSERT INTO focus_sessions (duration_minutes, linked_step_id, linked_quest_id, status)
    VALUES (?, ?, ?, 'active')
  `,[s,e,n]);const u=a.exec("SELECT last_insert_rowid()")[0].values[0][0];return await Te(),G1(u)}async function HT(s,e,n=""){ee().run(`
    UPDATE focus_sessions SET
      status = 'completed',
      completed_at = datetime('now'),
      xp_earned = ?,
      notes = ?
    WHERE id = ? AND status = 'active'
  `,[e,n,s]);const o=G1(s);return o&&await fD(o.duration_minutes),await Te(),o}async function cD(s){ee().run("UPDATE focus_sessions SET status = 'cancelled', completed_at = datetime('now') WHERE id = ?",[s]),await Te()}function G1(s){const n=ee().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE id = ?
  `,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return u_(a)}function uD(){const e=ee().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE status = 'active' ORDER BY started_at DESC LIMIT 1
  `);return!e.length||!e[0].values.length?null:u_(e[0].values[0])}function dD(s=10){const n=ee().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions ORDER BY started_at DESC LIMIT ?
  `,[s]);return n.length?n[0].values.map(u_):[]}async function fD(s){const e=ee(),n=fp(),a=new Date().toISOString().split("T")[0],u=n.today_date===a?n.today_sessions+1:1,h=n.current_streak+1,g=Math.max(n.longest_streak,h);e.run(`
    UPDATE focus_stats SET
      total_sessions = total_sessions + 1,
      total_minutes = total_minutes + ?,
      current_streak = ?,
      longest_streak = ?,
      today_sessions = ?,
      today_date = ?
    WHERE id = 1
  `,[s,h,g,u,a]),await Te()}function u_(s){return{id:s[0],duration_minutes:s[1],started_at:s[2],completed_at:s[3],status:s[4],xp_earned:s[5],linked_step_id:s[6],linked_quest_id:s[7],break_taken:!!s[8],notes:s[9]}}function hD({grantXP:s,onSessionComplete:e}){const[n,a]=k.useState(()=>dp()),[o,u]=k.useState(()=>fp()),[h,g]=k.useState(null),[E,_]=k.useState([]),[S,x]=k.useState({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:0}),w=k.useRef(null),B=k.useRef(null),H=k.useRef(null),U=k.useRef(0),V=k.useRef(!1),z=k.useCallback(()=>{a(dp()),u(fp()),_(dD(10))},[]),G=k.useCallback(async()=>{if("wakeLock"in navigator)try{B.current=await navigator.wakeLock.request("screen"),B.current.addEventListener("release",()=>{console.log("Wake lock released")})}catch(Y){console.log("Wake lock request failed:",Y)}},[]),K=k.useCallback(()=>{B.current&&(B.current.release(),B.current=null)},[]),ie=k.useCallback(()=>{if(!H.current)return 0;const Y=Math.floor((Date.now()-H.current)/1e3),fe=U.current-Y;return Math.max(0,fe)},[]),Ee=k.useCallback(()=>{if(!S.isRunning)return;const Y=ie();x(fe=>fe.timeRemaining!==Y?{...fe,timeRemaining:Y}:fe),Y>0&&(w.current=requestAnimationFrame(()=>{setTimeout(Ee,250)}))},[S.isRunning,ie]);k.useEffect(()=>{if(S.isRunning&&S.timeRemaining>0)return Ee(),()=>{w.current&&cancelAnimationFrame(w.current)}},[S.isRunning,Ee]),k.useEffect(()=>{S.timeRemaining===0&&S.isRunning&&!V.current&&(V.current=!0,D().then(()=>{V.current=!1}))},[S.timeRemaining,S.isRunning]),k.useEffect(()=>{const Y=uD();if(Y){const fe=new Date(Y.started_at).getTime(),we=Y.duration_minutes*60,$e=Math.floor((Date.now()-fe)/1e3),et=we-$e;et>0?(g(Y),H.current=fe,U.current=we,x({phase:"work",timeRemaining:et,isRunning:!0,sessionsCompleted:o.current_streak%4}),G()):ye(Y)}z()},[]);const ye=async Y=>{let fe=JE;Y.linked_step_id&&(fe+=ZE),await HT(Y.id,fe),await s(fe,"Focus session completed","focus",Y.id),e?.(),z()},D=async()=>{if(K(),S.phase==="work"&&h){let Y=JE;h.linked_step_id&&(Y+=ZE);const fe=S.sessionsCompleted+1;fe%4===0&&(Y+=cx),await HT(h.id,Y),await s(Y,"Focus session completed","focus",h.id),e?.(),n.sound_enabled&&zT();const we=fe%n.sessions_before_long_break===0,$e=we?"long_break":"short_break",X=(we?n.long_break:n.short_break)*60;H.current=n.auto_start_breaks?Date.now():null,U.current=X,x({phase:n.auto_start_breaks?$e:"idle",timeRemaining:X,isRunning:n.auto_start_breaks,sessionsCompleted:fe}),g(null),n.auto_start_breaks&&G(),z()}else(S.phase==="short_break"||S.phase==="long_break")&&(n.sound_enabled&&zT(),H.current=null,U.current=n.work_duration*60,x({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}))},R=k.useCallback(async(Y=null,fe=null)=>{const we=await lD(n.work_duration,Y,fe);g(we);const $e=n.work_duration*60;H.current=Date.now(),U.current=$e,x({phase:"work",timeRemaining:$e,isRunning:!0,sessionsCompleted:S.sessionsCompleted}),await G()},[n.work_duration,S.sessionsCompleted,G]),L=k.useCallback(async(Y=!1)=>{const we=(Y?n.long_break:n.short_break)*60;H.current=Date.now(),U.current=we,x({phase:Y?"long_break":"short_break",timeRemaining:we,isRunning:!0,sessionsCompleted:S.sessionsCompleted}),await G()},[n.short_break,n.long_break,S.sessionsCompleted,G]),q=k.useCallback(()=>{const Y=ie();U.current=Y,H.current=null,x(fe=>({...fe,isRunning:!1,timeRemaining:Y})),K()},[ie,K]),M=k.useCallback(async()=>{H.current=Date.now(),x(Y=>({...Y,isRunning:!0})),await G()},[G]),O=k.useCallback(async()=>{w.current&&cancelAnimationFrame(w.current),h&&S.phase==="work"&&await cD(h.id),H.current=null,U.current=n.work_duration*60,g(null),x({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}),K(),z()},[n.work_duration,S.phase,S.sessionsCompleted,h,z,K]),j=k.useCallback(()=>{(S.phase==="short_break"||S.phase==="long_break")&&(H.current=null,U.current=n.work_duration*60,x({phase:"idle",timeRemaining:n.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}),K())},[n.work_duration,S.phase,S.sessionsCompleted,K]),Ae=k.useCallback(async Y=>{const fe=await oD(Y);if(a(fe),S.phase==="idle"){const we=(Y.work_duration||fe.work_duration)*60;U.current=we,x($e=>({...$e,timeRemaining:we}))}},[S.phase]);return{settings:n,stats:o,timerState:S,currentSession:h,recentSessions:E,refresh:z,startWork:R,startBreak:L,pause:q,resume:M,stop:O,skipBreak:j,updateSettings:Ae,formatTime:Y=>{const fe=Math.floor(Y/60),we=Y%60;return`${fe.toString().padStart(2,"0")}:${we.toString().padStart(2,"0")}`}}}function zT(){try{const s=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdGCdqIyYY19lf6O3qJyAa3B1gqKvpZNyYW50iaS7s5yBaWx3g6C4t5uGc2l0gJy0t5qGcWl0gJyzrZOAbWp0gJyzrZaEc2p2gJixsJmGeWt3gJivsJmGd2x3gZitq5OAbWp0f5asrJaAdmp1f5aqq5aAdmp1f5aqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZOAdGlzfpKppZKAc2hyfpCmpZCAbGZxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY6kpJCAa2RvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoyjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI4=");s.volume=.5,s.play().catch(()=>{})}catch{}}const mD=25,XT=10;function pD(){const e=ee().exec(`
    SELECT id, name, type, description, bonus_xp, is_active, created_at
    FROM routine_definitions WHERE is_active = 1 ORDER BY type, name
  `);return e.length?e[0].values.map(xD):[]}function _D(){return pD().map(e=>{const n=d_(e.id),a=kd(e.id),o=jd(e.id);return{...e,steps:n,streak:a||void 0,todayLog:o||void 0}})}function d_(s){const n=ee().exec(`
    SELECT id, routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional
    FROM routine_steps WHERE routine_id = ? ORDER BY sort_order
  `,[s]);return n.length?n[0].values.map(wD):[]}function kd(s){const n=ee().exec(`
    SELECT id, routine_id, current_streak, longest_streak, last_completed_date
    FROM routine_streaks WHERE routine_id = ?
  `,[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],routine_id:a[1],current_streak:a[2],longest_streak:a[3],last_completed_date:a[4]}}function jd(s){const n=ee().exec(`
    SELECT id, routine_id, date, started_at, completed_at, is_completed, steps_completed, total_steps, xp_earned
    FROM routine_logs WHERE routine_id = ? AND date = date('now')
  `,[s]);return!n.length||!n[0].values.length?null:AD(n[0].values[0])}function gD(s){const n=ee().exec(`
    SELECT id, routine_log_id, step_id, completed_at, is_completed, skipped
    FROM routine_step_logs WHERE routine_log_id = ?
  `,[s]);return n.length?n[0].values.map(a=>({id:a[0],routine_log_id:a[1],step_id:a[2],completed_at:a[3],is_completed:!!a[4],skipped:!!a[5]})):[]}function H1(s){const e=d_(s),n=jd(s);if(!n)return e.map(u=>({...u,is_completed:!1,skipped:!1,completed_at:null}));const a=gD(n.id),o=new Map(a.map(u=>[u.step_id,u]));return e.map(u=>{const h=o.get(u.id);return{...u,is_completed:h?.is_completed||!1,skipped:h?.skipped||!1,completed_at:h?.completed_at||null}})}async function yD(s,e,n,a){const o=ee();o.run("INSERT INTO routine_definitions (name, type, description, bonus_xp) VALUES (?, ?, ?, ?)",[s,e,n,a]);const h=o.exec("SELECT last_insert_rowid()")[0].values[0][0];return o.run("INSERT INTO routine_streaks (routine_id) VALUES (?)",[h]),await Te(),h}async function ED(s,e,n,a,o,u){const h=ee(),E=h.exec("SELECT COALESCE(MAX(sort_order), -1) + 1 FROM routine_steps WHERE routine_id = ?",[s])[0].values[0][0];h.run(`INSERT INTO routine_steps (routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional)
     VALUES (?, ?, ?, ?, ?, ?, ?)`,[s,e,n,a,E,o,u?1:0]);const _=h.exec("SELECT last_insert_rowid()");return await Te(),_[0].values[0][0]}async function vD(s){ee().run("DELETE FROM routine_steps WHERE id = ?",[s]),await Te()}async function TD(s){ee().run("DELETE FROM routine_definitions WHERE id = ?",[s]),await Te()}async function bD(s){const e=ee(),n=d_(s);let a=jd(s);if(!a){e.run(`INSERT INTO routine_logs (routine_id, date, started_at, total_steps)
       VALUES (?, date('now'), datetime('now'), ?)`,[s,n.length]);const u=e.exec("SELECT last_insert_rowid()")[0].values[0][0];for(const h of n)e.run("INSERT INTO routine_step_logs (routine_log_id, step_id) VALUES (?, ?)",[u,h.id]);await Te(),a=jd(s)}return a}async function SD(s,e){const n=ee();n.run(`UPDATE routine_step_logs SET is_completed = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[s,e]);const o=n.exec("SELECT COUNT(*) FROM routine_step_logs WHERE routine_log_id = ? AND is_completed = 1",[s])[0].values[0][0];n.run("UPDATE routine_logs SET steps_completed = ? WHERE id = ?",[o,s]),await Te()}async function ND(s,e){ee().run(`UPDATE routine_step_logs SET skipped = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[s,e]),await Te()}async function $T(s,e){const n=ee(),a=new Date().toISOString().split("T")[0];n.run(`UPDATE routine_logs SET is_completed = 1, completed_at = datetime('now'), xp_earned = ?
     WHERE routine_id = ? AND date = date('now')`,[e,s]);const o=kd(s);if(o){const u=new Date(Date.now()-864e5).toISOString().split("T")[0],g=o.last_completed_date===u?o.current_streak+1:1,E=Math.max(o.longest_streak,g);n.run(`UPDATE routine_streaks SET current_streak = ?, longest_streak = ?, last_completed_date = ?
       WHERE routine_id = ?`,[g,E,a,s])}await Te()}function YT(s){return H1(s).filter(a=>!a.is_optional).every(a=>a.is_completed||a.skipped)}function xD(s){return{id:s[0],name:s[1],type:s[2],description:s[3],bonus_xp:s[4],is_active:!!s[5],created_at:s[6]}}function wD(s){return{id:s[0],routine_id:s[1],title:s[2],description:s[3],linked_buff_id:s[4],sort_order:s[5],duration_minutes:s[6],is_optional:!!s[7]}}function AD(s){return{id:s[0],routine_id:s[1],date:s[2],started_at:s[3],completed_at:s[4],is_completed:!!s[5],steps_completed:s[6],total_steps:s[7],xp_earned:s[8]}}function RD({grantXP:s,onRoutineComplete:e}){const[n,a]=k.useState([]),[o,u]=k.useState(!0),h=k.useCallback(()=>{a(_D()),u(!1)},[]);k.useEffect(()=>{h()},[h]);const g=k.useCallback(async(G,K,ie,Ee=mD)=>{await yD(G,K,ie,Ee),h()},[h]),E=k.useCallback(async(G,K,ie,Ee,ye,D)=>{await ED(G,K,ie,Ee,ye,D),h()},[h]),_=k.useCallback(async G=>{await vD(G),h()},[h]),S=k.useCallback(async G=>{await TD(G),h()},[h]),x=k.useCallback(async G=>{await bD(G),h()},[h]),w=k.useCallback(async(G,K)=>{const ie=n.find(Ee=>Ee.id===G);if(ie?.todayLog){if(await SD(ie.todayLog.id,K),YT(G)){let Ee=ie.bonus_xp;const ye=kd(G);ye&&ye.current_streak>0&&ye.current_streak%7===0&&(Ee+=XT),await $T(G,Ee),await s(Ee,`Completed routine: ${ie.name}`,"routine",G),e?.(G)}h()}},[n,s,e,h]),B=k.useCallback(async(G,K)=>{const ie=n.find(Ee=>Ee.id===G);if(ie?.todayLog){if(await ND(ie.todayLog.id,K),YT(G)){let Ee=ie.bonus_xp;const ye=kd(G);ye&&ye.current_streak>0&&ye.current_streak%7===0&&(Ee+=XT),await $T(G,Ee),await s(Ee,`Completed routine: ${ie.name}`,"routine",G),e?.(G)}h()}},[n,s,e,h]),H=k.useCallback(G=>H1(G),[]),U=k.useCallback(()=>n.filter(G=>G.type==="morning"),[n]),V=k.useCallback(()=>n.filter(G=>G.type==="evening"),[n]),z=k.useCallback(()=>n.filter(G=>G.type==="custom"),[n]);return{routines:n,loading:o,refresh:h,createRoutine:g,addStep:E,deleteStep:_,deleteRoutine:S,startRoutine:x,completeStep:w,skipStep:B,getStepsWithStatus:H,getMorningRoutines:U,getEveningRoutines:V,getCustomRoutines:z}}function CD(){const e=ee().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE is_active = 1 ORDER BY name
  `);return e.length?e[0].values.map(X1):[]}function ID(s){const n=ee().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:X1(n[0].values[0])}function z1(){const s=ee();return CD().map(n=>{const a=JSON.parse(n.required_buffs),o=s.exec(`SELECT name FROM buff_definitions WHERE id IN (${a.join(",")||"0"})`),u=o.length?o[0].values.map(H=>H[0]):[],h=s.exec(`SELECT DISTINCT definition_id FROM buff_log
       WHERE is_active = 1
       AND definition_id IN (${a.join(",")||"0"})
       AND activated_at >= datetime('now', '-${n.time_window_hours} hours')`),g=h.length?h[0].values.map(H=>H[0]):[],E=s.exec(`SELECT activated_at FROM combo_activations
       WHERE combo_id = ? ORDER BY activated_at DESC LIMIT 1`,[n.id]),_=E.length&&E[0].values.length?E[0].values[0][0]:null,S=s.exec(`SELECT 1 FROM combo_activations
       WHERE combo_id = ? AND date(activated_at) = date('now')`,[n.id]),x=S.length&&S[0].values.length>0,w=a.length>0?Math.round(g.length/a.length*100):0,B=g.length===a.length&&!x;return{...n,required_buff_names:u,active_buff_ids:g,progress:w,is_ready:B,last_activated:_}})}function kD(){return z1().filter(s=>s.is_ready)}async function QT(s,e){const n=ee();if(!ID(s))return null;n.run("INSERT INTO combo_activations (combo_id, buffs_used) VALUES (?, ?)",[s,JSON.stringify(e)]);const u=n.exec("SELECT last_insert_rowid()")[0].values[0][0];return await Te(),jD(u)}function jD(s){const n=ee().exec("SELECT id, combo_id, activated_at, buffs_used FROM combo_activations WHERE id = ?",[s]);if(!n.length||!n[0].values.length)return null;const a=n[0].values[0];return{id:a[0],combo_id:a[1],activated_at:a[2],buffs_used:a[3]}}async function DD(s,e,n,a,o,u){const h=ee();h.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp)
     VALUES (?, ?, ?, ?, ?, ?)`,[s,e,n,JSON.stringify(a),o,u]);const g=h.exec("SELECT last_insert_rowid()");return await Te(),g[0].values[0][0]}async function LD(s){ee().run("DELETE FROM combo_definitions WHERE id = ?",[s]),await Te()}function X1(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],required_buffs:s[4],time_window_hours:s[5],bonus_xp:s[6],is_active:!!s[7]}}function OD({grantXP:s,onComboActivated:e}){const[n,a]=k.useState([]),[o,u]=k.useState(!0),h=k.useCallback(()=>{a(z1()),u(!1)},[]);k.useEffect(()=>{h()},[h]);const g=k.useCallback(async()=>{const B=kD(),H=[];for(const U of B)await QT(U.id,U.active_buff_ids),await s(U.bonus_xp,`Combo activated: ${U.name}`,"combo",U.id),H.push(U),e?.(U);return H.length>0&&h(),H},[s,e,h]),E=k.useCallback(async B=>{const H=n.find(U=>U.id===B);return!H||!H.is_ready?null:(await QT(B,H.active_buff_ids),await s(H.bonus_xp,`Combo activated: ${H.name}`,"combo",B),e?.(H),h(),H)},[n,s,e,h]),_=k.useCallback(async(B,H,U,V,z,G)=>{await DD(B,H,U,V,z,G),h()},[h]),S=k.useCallback(async B=>{await LD(B),h()},[h]),x=k.useCallback(()=>n.filter(B=>B.is_ready),[n]),w=k.useCallback(()=>n.filter(B=>B.progress>0&&B.progress<100&&!B.is_ready),[n]);return{combos:n,loading:o,refresh:h,checkAndActivateCombos:g,claimCombo:E,createCombo:_,deleteCombo:S,getReadyCombos:x,getInProgressCombos:w}}const hl=100,MD={steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0};function of(s=new Date){const e=new Date(s),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function hp(){const s=ee(),e=of(),n=s.exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews WHERE week_start = ?`,[e]);return!n.length||!n[0].values.length?null:$1(n[0].values[0])}function UD(s=10){const n=ee().exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews ORDER BY week_start DESC LIMIT ?`,[s]);return n.length?n[0].values.map($1):[]}async function VD(){const s=ee(),e=of(),n=new Date(e);n.setDate(n.getDate()+7);const a=n.toISOString().split("T")[0],o={...MD},u=s.exec(`SELECT COUNT(*) FROM steps WHERE completed_at IS NOT NULL
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.steps_completed=u.length?u[0].values[0][0]:0;const h=s.exec(`SELECT COUNT(*) FROM quests WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.quests_completed=h.length?h[0].values[0][0]:0;const g=s.exec(`SELECT COUNT(*) FROM goals WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.goals_completed=g.length?g[0].values[0][0]:0;const E=s.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'buff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.buffs_activated=E.length?E[0].values[0][0]:0;const _=s.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.debuffs_activated=_.length?_[0].values[0][0]:0;const S=s.exec(`SELECT COALESCE(SUM(amount), 0) FROM xp_log
     WHERE date(created_at) >= ? AND date(created_at) < ?`,[e,a]);o.xp_earned=S.length?S[0].values[0][0]:0;try{const x=s.exec(`SELECT COALESCE(SUM(damage), 0), MAX(CASE WHEN is_defeated = 1 THEN 1 ELSE 0 END)
       FROM weekly_boss WHERE week_start = ?`,[e]);x.length&&x[0].values.length&&(o.boss_damage_dealt=x[0].values[0][0],o.boss_defeated=!!x[0].values[0][1])}catch{}try{const x=s.exec(`SELECT COUNT(*), COALESCE(SUM(duration_minutes), 0) FROM focus_sessions
       WHERE status = 'completed' AND date(started_at) >= ? AND date(started_at) < ?`,[e,a]);x.length&&x[0].values.length&&(o.focus_sessions=x[0].values[0][0],o.focus_minutes=x[0].values[0][1])}catch{}try{const x=s.exec(`SELECT COUNT(*) FROM routine_logs
       WHERE is_completed = 1 AND date >= ? AND date < ?`,[e,a]);o.routines_completed=x.length?x[0].values[0][0]:0}catch{}try{const x=s.exec(`SELECT COUNT(*) FROM combo_activations
       WHERE date(activated_at) >= ? AND date(activated_at) < ?`,[e,a]);o.combos_activated=x.length?x[0].values[0][0]:0}catch{}try{const x=s.exec(`SELECT COUNT(*) FROM achievement_unlocks
       WHERE date(unlocked_at) >= ? AND date(unlocked_at) < ?`,[e,a]);o.achievements_unlocked=x.length?x[0].values[0][0]:0}catch{}return o}async function qD(s){const e=ee(),n=of(),a=JSON.stringify(s),o=hp();return o?e.run("UPDATE weekly_reviews SET summary_data = ?, generated_at = datetime('now') WHERE id = ?",[a,o.id]):e.run("INSERT INTO weekly_reviews (week_start, summary_data) VALUES (?, ?)",[n,a]),await Te(),hp()}async function BD(s,e,n,a,o){ee().run("UPDATE weekly_reviews SET wins = ?, challenges = ?, priorities = ?, notes = ? WHERE id = ?",[e,n,JSON.stringify(a),o,s]),await Te()}async function PD(s,e){ee().run("UPDATE weekly_reviews SET is_completed = 1, completed_at = datetime('now'), xp_earned = ? WHERE id = ?",[e,s]),await Te()}function $1(s){return{id:s[0],week_start:s[1],generated_at:s[2],completed_at:s[3],is_completed:!!s[4],summary_data:s[5],wins:s[6],challenges:s[7],priorities:s[8],notes:s[9],xp_earned:s[10]}}function FD({grantXP:s}){const[e,n]=k.useState(null),[a,o]=k.useState(null),[u,h]=k.useState([]),[g,E]=k.useState(!0),_=k.useCallback(async()=>{n(hp()),h(UD(10)),E(!1)},[]);k.useEffect(()=>{_()},[_]);const S=k.useCallback(async()=>{const V=await VD();o(V);const z=await qD(V);return n(z),{summary:V,review:z}},[]),x=k.useCallback(async(V,z,G,K)=>{e&&(await BD(e.id,V,z,G,K),_())},[e,_]),w=k.useCallback(async()=>{!e||e.is_completed||(await PD(e.id,hl),await s(hl,"Completed weekly review","weekly_review",e.id),_())},[e,s,_]),B=k.useCallback(()=>of(),[]),H=k.useCallback(V=>{try{return JSON.parse(V.summary_data)}catch{return{steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0}}},[]),U=k.useCallback(V=>{try{return JSON.parse(V.priorities)}catch{return[]}},[]);return{currentReview:e,summaryData:a,recentReviews:u,loading:g,refresh:_,generateSummary:S,updateContent:x,completeReview:w,getWeekStart:B,getSummaryFromReview:H,getPrioritiesFromReview:U}}function GD(){const e=ee().exec(`
    SELECT id, name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight
    FROM event_templates ORDER BY rarity, name
  `);return e.length?e[0].values.map($D):[]}function f_(){const e=ee().exec(`
    SELECT ae.id, ae.template_id, ae.started_at, ae.expires_at, ae.is_claimed, ae.claimed_at,
           et.id, et.name, et.description, et.type, et.icon, et.duration_hours, et.effect_type, et.effect_value, et.rarity, et.weight
    FROM active_events ae
    JOIN event_templates et ON ae.template_id = et.id
    WHERE ae.expires_at > datetime('now') OR (ae.is_claimed = 0 AND et.duration_hours = 0)
    ORDER BY ae.started_at DESC
  `);if(!e.length)return[];const n=Date.now();return e[0].values.map(a=>{const o=new Date(a[3]+"Z").getTime();return{id:a[0],template_id:a[1],started_at:a[2],expires_at:a[3],is_claimed:!!a[4],claimed_at:a[5],template:{id:a[6],name:a[7],description:a[8],type:a[9],icon:a[10],duration_hours:a[11],effect_type:a[12],effect_value:a[13],rarity:a[14],weight:a[15]},time_remaining:Math.max(0,Math.floor((o-n)/1e3))}})}async function HD(){const s=ee(),e=GD();if(e.length===0)return null;const n=e.reduce((g,E)=>g+E.weight,0);let a=Math.random()*n,o=null;for(const g of e)if(a-=g.weight,a<=0){o=g;break}o||(o=e[0]);const u=o.duration_hours>0?`datetime('now', '+${o.duration_hours} hours')`:"datetime('now', '+24 hours')";return s.run(`INSERT INTO active_events (template_id, expires_at) VALUES (?, ${u})`,[o.id]),await Te(),f_().find(g=>g.template_id===o.id)||null}async function zD(s){const e=ee(),a=f_().find(o=>o.id===s);if(!a||a.is_claimed)return{success:!1,effectValue:{}};e.run("UPDATE active_events SET is_claimed = 1, claimed_at = datetime('now') WHERE id = ?",[s]),e.run(`INSERT INTO event_history (template_id, event_name, result, xp_earned)
     VALUES (?, ?, 'claimed', 0)`,[a.template_id,a.template.name]),await Te();try{return{success:!0,effectValue:JSON.parse(a.template.effect_value)}}catch{return{success:!0,effectValue:{}}}}async function XD(){ee().run(`
    DELETE FROM active_events
    WHERE expires_at <= datetime('now') AND is_claimed = 0
  `),await Te()}function $D(s){return{id:s[0],name:s[1],description:s[2],type:s[3],icon:s[4],duration_hours:s[5],effect_type:s[6],effect_value:s[7],rarity:s[8],weight:s[9]}}const KT="last_event_check";function YD({grantXP:s,addEnergy:e,addShields:n,onEventTriggered:a}){const[o,u]=k.useState([]),[h,g]=k.useState(!0),[E,_]=k.useState(null),S=k.useCallback(async()=>{await XD(),u(f_()),g(!1)},[]);k.useEffect(()=>{S()},[S]),k.useEffect(()=>{(async()=>{const G=localStorage.getItem(KT),K=Date.now();if(!(G&&(K-parseInt(G,10))/36e5<yx)){if(Math.random()<gx){const ie=await HD();ie&&(_(ie),a?.(ie),S())}localStorage.setItem(KT,K.toString())}})()},[a,S]);const x=k.useCallback(async z=>{const{success:G,effectValue:K}=await zD(z);if(!G)return null;const ie=o.find(Ee=>Ee.id===z);if(!ie)return null;switch(ie.template.effect_type){case"xp_bonus":K.amount&&await s(K.amount,`Event: ${ie.template.name}`,"event",z);break;case"energy_restore":K.amount&&e&&await e(K.amount,`Event: ${ie.template.name}`);break;case"streak_shield":K.shields&&n&&await n(K.shields);break}return S(),ie},[o,s,e,n,S]),w=k.useCallback(()=>{_(null)},[]),B=k.useCallback(()=>o.filter(z=>!z.is_claimed),[o]),H=k.useCallback(()=>o.filter(z=>z.is_claimed&&z.template.type==="modifier"&&z.time_remaining>0),[o]),U=k.useCallback(()=>o.some(z=>z.is_claimed&&z.template.effect_type==="xp_multiplier"&&z.time_remaining>0),[o]),V=k.useCallback(()=>{const z=o.find(G=>G.is_claimed&&G.template.effect_type==="xp_multiplier"&&G.time_remaining>0);if(!z)return 1;try{return JSON.parse(z.template.effect_value).multiplier||1}catch{return 1}},[o]);return{activeEvents:o,loading:h,pendingEvent:E,refresh:S,claimEvent:x,dismissPendingEvent:w,getUnclaimedEvents:B,getActiveModifiers:H,hasActiveXpMultiplier:U,getXpMultiplier:V}}function QD(){const e=ee().exec("SELECT id, name, description, icon, color, sort_order FROM skill_branches ORDER BY sort_order");return e.length?e[0].values.map(n=>({id:n[0],name:n[1],description:n[2],icon:n[3],color:n[4],sort_order:n[5]})):[]}function KD(){const e=ee().exec("SELECT id, node_id, unlocked_at FROM unlocked_skills");return e.length?e[0].values.map(n=>({id:n[0],node_id:n[1],unlocked_at:n[2]})):[]}function WD(){const e=ee().exec(`
    SELECT sn.id, sn.branch_id, sn.name, sn.description, sn.icon, sn.tier, sn.position, sn.xp_cost,
           sn.prerequisite_node_id, sn.effect_type, sn.effect_value, sn.is_capstone,
           us.unlocked_at, sb.name as branch_name, sb.color as branch_color
    FROM skill_nodes sn
    LEFT JOIN unlocked_skills us ON sn.id = us.node_id
    JOIN skill_branches sb ON sn.branch_id = sb.id
    ORDER BY sb.sort_order, sn.tier, sn.position
  `);if(!e.length)return[];const n=new Set(KD().map(a=>a.node_id));return e[0].values.map(a=>{const o=a[0],u=a[8],h=a[12]!==null,g=!h&&(u===null||n.has(u));return{id:o,branch_id:a[1],name:a[2],description:a[3],icon:a[4],tier:a[5],position:a[6],xp_cost:a[7],prerequisite_node_id:u,effect_type:a[9],effect_value:a[10],is_capstone:!!a[11],unlocked:h,unlocked_at:a[12],can_unlock:g,branch_name:a[13],branch_color:a[14]}})}async function JD(s){const e=ee(),n=e.exec("SELECT 1 FROM unlocked_skills WHERE node_id = ?",[s]);return n.length&&n[0].values.length?!1:(e.run("INSERT INTO unlocked_skills (node_id) VALUES (?)",[s]),await Te(),!0)}function ZD(){const e=ee().exec(`
    SELECT sn.effect_value FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
    WHERE sn.effect_type IN ('stat_bonus', 'combined')
  `);if(!e.length)return{};const n={};for(const a of e[0].values)try{const o=JSON.parse(a[0]);for(const[u,h]of Object.entries(o))typeof h=="number"&&!u.includes("_bonus")&&(n[u]=(n[u]||0)+h)}catch{}return n}function Im(){const e=ee().exec(`
    SELECT COALESCE(SUM(sn.xp_cost), 0) FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
  `);return e.length?e[0].values[0][0]:0}function eL({totalXP:s}){const[e,n]=k.useState([]),[a,o]=k.useState([]),[u,h]=k.useState(!0),g=k.useCallback(()=>{n(QD()),o(WD()),h(!1)},[]);k.useEffect(()=>{g()},[g]);const E=k.useCallback(async U=>{const V=a.find(ie=>ie.id===U);if(!V||V.unlocked||!V.can_unlock)return!1;const z=Im();if(s-z<V.xp_cost)return!1;const K=await JD(U);return K&&g(),K},[a,s,g]),_=k.useCallback(U=>a.filter(V=>V.branch_id===U),[a]),S=k.useCallback(()=>a.filter(U=>U.unlocked).length,[a]),x=k.useCallback(()=>a.length,[a]),w=k.useCallback(()=>ZD(),[]),B=k.useCallback(()=>{const U=Im();return s-U},[s]),H=k.useCallback(()=>Im(),[]);return{branches:e,nodes:a,loading:u,refresh:g,unlockSkill:E,getNodesByBranch:_,getUnlockedCount:S,getTotalNodes:x,getStatBonuses:w,getAvailableXp:B,getXpSpent:H}}function tL(){const e=ee().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes ORDER BY name
  `);return e.length?e[0].values.map(Q1):[]}function nL(s){const n=ee().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:Q1(n[0].values[0])}function lf(){const e=ee().exec(`
    SELECT id, class_id, selected_at, last_changed_at, changes_remaining
    FROM character_class_selection WHERE id = 1
  `);if(!e.length||!e[0].values.length)return null;const n=e[0].values[0];return{id:n[0],class_id:n[1],selected_at:n[2],last_changed_at:n[3],changes_remaining:n[4]}}function Y1(){const s=lf();return!s||!s.class_id?null:nL(s.class_id)}function sL(){const s=tL(),e=lf();return s.map(n=>({...n,is_selected:e?.class_id===n.id}))}async function iL(s){const e=ee(),n=lf();if(n?.class_id&&n.changes_remaining<=0)return!1;const a=n?.class_id?n.changes_remaining-1:n?.changes_remaining||3;return e.run("UPDATE character_class_selection SET class_id = ?, selected_at = COALESCE(selected_at, datetime('now')), last_changed_at = datetime('now'), changes_remaining = ? WHERE id = 1",[s,a]),await Te(),!0}function aL(){const s=Y1();if(!s)return{};try{return JSON.parse(s.stat_bonuses)}catch{return{}}}function rL(s){const e=Y1();return e&&e.xp_bonus_type===s?e.xp_bonus_percent:0}function Q1(s){return{id:s[0],key:s[1],name:s[2],description:s[3],icon:s[4],primary_stat:s[5],stat_bonuses:s[6],xp_bonus_type:s[7],xp_bonus_percent:s[8],special_ability:s[9],special_ability_desc:s[10]}}function oL(){const[s,e]=k.useState([]),[n,a]=k.useState(null),[o,u]=k.useState(!0),h=k.useCallback(()=>{e(sL()),a(lf()),u(!1)},[]);k.useEffect(()=>{h()},[h]);const g=k.useCallback(async w=>{const B=await iL(w);return B&&h(),B},[h]),E=k.useCallback(()=>s.find(w=>w.is_selected)||null,[s]),_=k.useCallback(()=>aL(),[]),S=k.useCallback(w=>rL(w),[]),x=k.useCallback(()=>!n||!n.class_id?!0:n.changes_remaining>0,[n]);return{classes:s,selection:n,loading:o,refresh:h,selectClass:g,getSelectedClass:E,getStatBonuses:_,getXpBonus:S,canChangeClass:x}}function K1(){const e=ee().exec(`
    SELECT id, name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards
    FROM territories ORDER BY unlock_level
  `);return e.length?e[0].values.map(mL):[]}function lL(s){const e=ee(),n=K1(),a=e.exec(`
    SELECT id, territory_id, discovered_at, completed_at, challenges_completed, is_current
    FROM territory_progress
  `),o=new Map;if(a.length)for(const u of a[0].values)o.set(u[1],{id:u[0],territory_id:u[1],discovered_at:u[2],completed_at:u[3],challenges_completed:u[4],is_current:!!u[5]});return n.map(u=>{const h=o.get(u.id);return{...u,discovered:!!h,discovered_at:h?.discovered_at||null,completed:!!h?.completed_at,completed_at:h?.completed_at||null,is_current:h?.is_current||!1,is_locked:u.unlock_level>s,challenges_completed:h?JSON.parse(h.challenges_completed):[]}})}function cL(){const e=ee().exec(`
    SELECT t.id, t.name, t.description, t.icon, t.unlock_level, t.background_color, t.position_x, t.position_y, t.connected_to, t.challenges, t.rewards,
           tp.id, tp.discovered_at, tp.completed_at, tp.challenges_completed, tp.is_current
    FROM territories t
    JOIN territory_progress tp ON t.id = tp.territory_id
    WHERE tp.is_current = 1
  `);if(!e.length||!e[0].values.length)return null;const n=e[0].values[0];return{id:n[0],name:n[1],description:n[2],icon:n[3],unlock_level:n[4],background_color:n[5],position_x:n[6],position_y:n[7],connected_to:n[8],challenges:n[9],rewards:n[10],discovered:!0,discovered_at:n[12],completed:n[13]!==null,completed_at:n[13],is_current:!0,is_locked:!1,challenges_completed:JSON.parse(n[14])}}async function uL(s){const e=ee(),n=e.exec("SELECT 1 FROM territory_progress WHERE territory_id = ?",[s]);n.length&&n[0].values.length||(e.run("INSERT INTO territory_progress (territory_id) VALUES (?)",[s]),await Te())}async function dL(s){const e=ee();e.run("UPDATE territory_progress SET is_current = 0"),e.run("UPDATE territory_progress SET is_current = 1 WHERE territory_id = ?",[s]),await Te()}async function fL(s,e){const n=ee(),a=n.exec("SELECT challenges_completed FROM territory_progress WHERE territory_id = ?",[s]);if(!a.length||!a[0].values.length)return;const o=JSON.parse(a[0].values[0][0]);o.includes(e)||(o.push(e),n.run("UPDATE territory_progress SET challenges_completed = ? WHERE territory_id = ?",[JSON.stringify(o),s]),await Te())}async function hL(s){ee().run("UPDATE territory_progress SET completed_at = datetime('now') WHERE territory_id = ?",[s]),await Te()}function mL(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],unlock_level:s[4],background_color:s[5],position_x:s[6],position_y:s[7],connected_to:s[8],challenges:s[9],rewards:s[10]}}function pL({characterLevel:s,grantXP:e}){const[n,a]=k.useState([]),[o,u]=k.useState(null),[h,g]=k.useState(!0),E=k.useCallback(()=>{a(lL(s)),u(cL()),g(!1)},[s]);k.useEffect(()=>{E()},[E]),k.useEffect(()=>{(async()=>{const U=K1();for(const V of U)V.unlock_level<=s&&(n.find(G=>G.id===V.id)?.discovered||await uL(V.id));E()})()},[s,n,E]);const _=k.useCallback(async H=>{const U=n.find(V=>V.id===H);return!U||U.is_locked||!U.discovered?!1:(await dL(H),E(),!0)},[n,E]),S=k.useCallback(async(H,U)=>{await fL(H,U),E()},[E]),x=k.useCallback(async H=>{const U=n.find(V=>V.id===H);if(!(!U||U.completed)){await hL(H);try{const V=JSON.parse(U.rewards);V.xp&&await e(V.xp,`Completed territory: ${U.name}`,"territory",H)}catch{}E()}},[n,e,E]),w=k.useCallback(()=>n.filter(H=>H.discovered),[n]),B=k.useCallback(()=>n.filter(H=>H.completed),[n]);return{territories:n,currentTerritory:o,loading:h,refresh:E,travelTo:_,completeChallenge:S,completeTerritory:x,getDiscoveredTerritories:w,getCompletedTerritories:B}}function _L(s){const n=ee().exec(`
    SELECT id, name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit
    FROM item_definitions WHERE id = ?
  `,[s]);return!n.length||!n[0].values.length?null:TL(n[0].values[0])}function W1(){const e=ee().exec(`
    SELECT i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM inventory i
    JOIN item_definitions d ON i.item_id = d.id
    ORDER BY d.type, d.rarity DESC, d.name
  `);return e.length?e[0].values.map(n=>({id:n[0],item_id:n[1],quantity:n[2],acquired_at:n[3],source:n[4],definition:{id:n[5],name:n[6],description:n[7],icon:n[8],type:n[9],slot:n[10],rarity:n[11],stat_effects:n[12],special_effect:n[13],stack_limit:n[14]}})):[]}function J1(){const e=ee().exec(`
    SELECT e.id, e.slot, e.inventory_id, e.equipped_at,
           i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM equipped_items e
    JOIN inventory i ON e.inventory_id = i.id
    JOIN item_definitions d ON i.item_id = d.id
  `);return e.length?e[0].values.map(n=>({id:n[0],slot:n[1],inventory_id:n[2],equipped_at:n[3],item:{id:n[4],item_id:n[5],quantity:n[6],acquired_at:n[7],source:n[8],definition:{id:n[9],name:n[10],description:n[11],icon:n[12],type:n[13],slot:n[14],rarity:n[15],stat_effects:n[16],special_effect:n[17],stack_limit:n[18]}}})):[]}async function gL(s,e=1,n="unknown"){const a=ee(),o=_L(s);if(!o)throw new Error("Item not found");if(o.stack_limit>1){const h=a.exec("SELECT id, quantity FROM inventory WHERE item_id = ?",[s]);if(h.length&&h[0].values.length){const g=h[0].values[0][0],E=h[0].values[0][1],_=Math.min(E+e,o.stack_limit);return a.run("UPDATE inventory SET quantity = ? WHERE id = ?",[_,g]),await Te(),{id:g,item_id:s,quantity:_,acquired_at:"",source:n}}}a.run("INSERT INTO inventory (item_id, quantity, source) VALUES (?, ?, ?)",[s,e,n]);const u=a.exec("SELECT last_insert_rowid()");return await Te(),{id:u[0].values[0][0],item_id:s,quantity:e,acquired_at:"",source:n}}async function WT(s,e=1){const n=ee(),a=n.exec("SELECT quantity FROM inventory WHERE id = ?",[s]);if(!a.length||!a[0].values.length)return;a[0].values[0][0]<=e?n.run("DELETE FROM inventory WHERE id = ?",[s]):n.run("UPDATE inventory SET quantity = quantity - ? WHERE id = ?",[e,s]),await Te()}async function yL(s){const e=ee(),n=W1().find(a=>a.id===s);!n||!n.definition.slot||(e.run("DELETE FROM equipped_items WHERE slot = ?",[n.definition.slot]),e.run("INSERT INTO equipped_items (slot, inventory_id) VALUES (?, ?)",[n.definition.slot,s]),await Te())}async function EL(s){ee().run("DELETE FROM equipped_items WHERE slot = ?",[s]),await Te()}function vL(){const s=J1(),e={};for(const n of s)try{const a=JSON.parse(n.item.definition.stat_effects);for(const[o,u]of Object.entries(a))typeof u=="number"&&(e[o]=(e[o]||0)+u)}catch{}return e}function TL(s){return{id:s[0],name:s[1],description:s[2],icon:s[3],type:s[4],slot:s[5],rarity:s[6],stat_effects:s[7],special_effect:s[8],stack_limit:s[9]}}function bL({grantXP:s,addEnergy:e,addShields:n}={}){const[a,o]=k.useState([]),[u,h]=k.useState([]),[g,E]=k.useState(!0),_=k.useCallback(()=>{o(W1()),h(J1()),E(!1)},[]);k.useEffect(()=>{_()},[_]);const S=k.useCallback(async(G,K=1,ie="reward")=>{await gL(G,K,ie),_()},[_]),x=k.useCallback(async(G,K=1)=>{await WT(G,K),_()},[_]),w=k.useCallback(async G=>{await yL(G),_()},[_]),B=k.useCallback(async G=>{await EL(G),_()},[_]),H=k.useCallback(async G=>{const K=a.find(R=>R.id===G);if(!K||K.definition.type!=="consumable")return!1;const ie=K.definition.special_effect;if(!ie)return!1;const[Ee,ye]=ie.split(":"),D=parseInt(ye,10);switch(Ee){case"restore_energy":e&&await e(D,`Used ${K.definition.name}`);break;case"grant_xp":s&&await s(D,`Used ${K.definition.name}`,"consumable",G);break;case"add_shield":n&&await n(D);break;default:return!1}return await WT(G,1),_(),!0},[a,s,e,n,_]),U=k.useCallback(()=>vL(),[]),V=k.useCallback(G=>u.find(K=>K.slot===G)||null,[u]),z=k.useCallback(G=>a.filter(K=>K.definition.type===G),[a]);return{inventory:a,equipped:u,loading:g,refresh:_,addItem:S,removeItem:x,equipItem:w,unequipItem:B,useConsumable:H,getStatBonuses:U,getEquipmentBySlot:V,getInventoryByType:z}}const SL="_appShell_w38qa_1",NL="_sidebar_w38qa_13",xL="_sidebarLogo_w38qa_41",wL="_logoTitle_w38qa_51",AL="_logoSubtitle_w38qa_67",RL="_sidebarNav_w38qa_81",CL="_navItem_w38qa_97",IL="_navItemActive_w38qa_147",kL="_navIcon_w38qa_179",jL="_header_w38qa_193",DL="_headerLeft_w38qa_227",LL="_characterName_w38qa_239",OL="_levelBadge_w38qa_253",ML="_headerXP_w38qa_283",UL="_headerEnergy_w38qa_291",VL="_headerRight_w38qa_299",qL="_main_w38qa_313",BL="_xpFloat_w38qa_331",Ln={appShell:SL,sidebar:NL,sidebarLogo:xL,logoTitle:wL,logoSubtitle:AL,sidebarNav:RL,navItem:CL,navItemActive:IL,navIcon:kL,header:jL,headerLeft:DL,characterName:LL,levelBadge:OL,headerXP:ML,headerEnergy:UL,headerRight:VL,main:qL,xpFloat:BL},PL=[{id:"character",label:"Character",icon:""},{id:"quests",label:"Quest Log",icon:""},{id:"buffs",label:"Buffs",icon:""},{id:"focus",label:"Focus Timer",icon:""},{id:"boss",label:"Weekly Boss",icon:""},{id:"inventory",label:"Inventory",icon:""}];function FL({activeTab:s,onTabChange:e}){return c.jsxs("aside",{className:Ln.sidebar,children:[c.jsxs("div",{className:Ln.sidebarLogo,children:[c.jsx("div",{className:Ln.logoTitle,children:"GOAL GAME"}),c.jsx("div",{className:Ln.logoSubtitle,children:"Life Management RPG"})]}),c.jsx("nav",{className:Ln.sidebarNav,children:PL.map(n=>c.jsxs("button",{className:`${Ln.navItem} ${s===n.id?Ln.navItemActive:""}`,onClick:()=>e(n.id),children:[c.jsx("span",{className:Ln.navIcon,children:n.icon}),n.label]},n.id))})]})}const GL="_progressContainer_1jr5p_1",HL="_progressLabel_1jr5p_9",zL="_track_1jr5p_33",XL="_fill_1jr5p_53",$L="_fillGold_1jr5p_67",YL="_fillGreen_1jr5p_77",QL="_fillBlue_1jr5p_85",KL="_shimmer_1jr5p_93",WL="_trackLarge_1jr5p_117",ga={progressContainer:GL,progressLabel:HL,track:zL,fill:XL,fillGold:$L,fillGreen:YL,fillBlue:QL,shimmer:KL,trackLarge:WL};function yl({value:s,max:e,label:n,showValue:a=!0,color:o="gold",size:u="normal",shimmer:h=!1,className:g}){const E=e>0?Math.min(s/e*100,100):0,_=o==="gold"?ga.fillGold:o==="green"?ga.fillGreen:ga.fillBlue,S=[ga.track,u==="large"&&ga.trackLarge].filter(Boolean).join(" ");return c.jsxs("div",{className:`${ga.progressContainer} ${g||""}`,children:[(n||a)&&c.jsxs("div",{className:ga.progressLabel,children:[n&&c.jsx("span",{children:n}),a&&c.jsxs("span",{children:[s," / ",e]})]}),c.jsx("div",{className:S,children:c.jsx("div",{className:[_,ga.fill,h&&ga.shimmer].filter(Boolean).join(" "),style:{width:`${E}%`}})})]})}const JL="_energyContainer_1u07x_1",ZL="_energyBar_1u07x_13",eO="_energyIcon_1u07x_33",tO="_energyTrack_1u07x_41",nO="_energyFill_1u07x_59",sO="_low_1u07x_73",iO="_empty_1u07x_81",aO="_energyText_1u07x_91",rO="_energyBarCompact_1u07x_125",oO="_energyDebuff_1u07x_175",lO="_exhausted_1u07x_199",cO="_debuffIcon_1u07x_207",uO="_energyTooltip_1u07x_217",dO="_tooltipRow_1u07x_251",fO="_tooltipLabel_1u07x_273",hO="_tooltipValue_1u07x_281",Gt={energyContainer:JL,energyBar:ZL,energyIcon:eO,energyTrack:tO,energyFill:nO,low:sO,empty:iO,energyText:aO,energyBarCompact:rO,energyDebuff:oO,exhausted:lO,debuffIcon:cO,energyTooltip:uO,tooltipRow:dO,tooltipLabel:fO,tooltipValue:hO};function mO({state:s,percentage:e,isLow:n,isEmpty:a,debuffs:o=[],compact:u=!1}){const[h,g]=k.useState(!1),E=s.max_energy+s.bonus_energy,_=u?Gt.energyBarCompact:Gt.energyBar,S=`${Gt.energyFill} ${a?Gt.empty:n?Gt.low:""}`,x=`${Gt.energyText} ${a?Gt.empty:n?Gt.low:""}`;return c.jsxs("div",{className:Gt.energyContainer,children:[c.jsxs("div",{className:_,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{position:"relative"},children:[c.jsx("span",{className:Gt.energyIcon,children:""}),c.jsx("div",{className:Gt.energyTrack,children:c.jsx("div",{className:S,style:{width:`${e}%`}})}),c.jsxs("span",{className:x,children:[s.current_energy,"/",E]}),h&&c.jsxs("div",{className:Gt.energyTooltip,children:[c.jsxs("div",{className:Gt.tooltipRow,children:[c.jsx("span",{className:Gt.tooltipLabel,children:"Current"}),c.jsx("span",{className:Gt.tooltipValue,children:s.current_energy})]}),c.jsxs("div",{className:Gt.tooltipRow,children:[c.jsx("span",{className:Gt.tooltipLabel,children:"Max"}),c.jsx("span",{className:Gt.tooltipValue,children:s.max_energy})]}),s.bonus_energy>0&&c.jsxs("div",{className:Gt.tooltipRow,children:[c.jsx("span",{className:Gt.tooltipLabel,children:"Bonus"}),c.jsxs("span",{className:Gt.tooltipValue,children:["+",s.bonus_energy]})]}),c.jsxs("div",{className:Gt.tooltipRow,children:[c.jsx("span",{className:Gt.tooltipLabel,children:"Regen"}),c.jsxs("span",{className:Gt.tooltipValue,children:[ab,"/hr"]})]})]})]}),o.map((w,B)=>c.jsxs("div",{className:`${Gt.energyDebuff} ${w.name==="Exhausted"?Gt.exhausted:""}`,children:[c.jsx("span",{className:Gt.debuffIcon,children:w.icon}),w.name]},B))]})}function pO({character:s,energyState:e}){const n=Ld(s.total_xp),a=e?e.current_energy/(e.max_energy+e.bonus_energy)*100:0,o=e?e.current_energy<=Om:!1,u=e?e.current_energy<=Mm:!1;return c.jsxs("header",{className:Ln.header,children:[c.jsxs("div",{className:Ln.headerLeft,children:[c.jsx("span",{className:Ln.characterName,children:s.name}),c.jsxs("span",{className:Ln.levelBadge,children:["Lv. ",s.level,"  ",s.title]})]}),c.jsxs("div",{className:Ln.headerRight,children:[e&&c.jsx("div",{className:Ln.headerEnergy,children:c.jsx(mO,{state:e,percentage:a,isLow:o,isEmpty:u,compact:!0})}),c.jsx("div",{className:Ln.headerXP,children:c.jsx(yl,{value:n.current,max:n.needed,label:"XP",shimmer:!0})})]})]})}const _O="_levelUpOverlay_dig0a_1",gO="_levelUpContent_dig0a_23",yO="_levelUpIcon_dig0a_33",EO="_levelUpTitle_dig0a_47",vO="_levelUpLevel_dig0a_65",TO="_levelUpTitleName_dig0a_79",bO="_dismissText_dig0a_95",Jr={levelUpOverlay:_O,levelUpContent:gO,levelUpIcon:yO,levelUpTitle:EO,levelUpLevel:vO,levelUpTitleName:TO,dismissText:bO};function SO({level:s,title:e,onDismiss:n}){return k.useEffect(()=>{const a=setTimeout(n,5e3),o=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&n()};return window.addEventListener("keydown",o),()=>{clearTimeout(a),window.removeEventListener("keydown",o)}},[n]),c.jsx("div",{className:Jr.levelUpOverlay,onClick:n,children:c.jsxs("div",{className:Jr.levelUpContent,children:[c.jsx("span",{className:Jr.levelUpIcon,children:""}),c.jsx("div",{className:Jr.levelUpTitle,children:"LEVEL UP"}),c.jsxs("div",{className:Jr.levelUpLevel,children:["Level ",s]}),c.jsx("div",{className:Jr.levelUpTitleName,children:e}),c.jsx("div",{className:Jr.dismissText,children:"Click or press any key to continue"})]})})}const NO="_panel_zw35t_1",xO="_panelHeader_zw35t_69",wO="_panelGlow_zw35t_93",km={panel:NO,panelHeader:xO,panelGlow:wO};function wt({children:s,header:e,glow:n,className:a,style:o}){const u=[km.panel,n&&km.panelGlow,a].filter(Boolean).join(" ");return c.jsxs("div",{className:u,style:o,children:[e&&c.jsx("div",{className:km.panelHeader,children:e}),s]})}const AO="_button_vi3e3_1",RO="_primary_vi3e3_61",CO="_danger_vi3e3_83",IO="_small_vi3e3_103",kO="_ghost_vi3e3_113",jO="_fullWidth_vi3e3_133",id={button:AO,primary:RO,danger:CO,small:IO,ghost:kO,fullWidth:jO};function Pe({variant:s="default",size:e="normal",fullWidth:n,children:a,className:o,...u}){const h=[id.button,s!=="default"&&id[s],e==="small"&&id.small,n&&id.fullWidth,o].filter(Boolean).join(" ");return c.jsx("button",{className:h,...u,children:a})}const DO="_inputGroup_1helv_1",LO="_label_1helv_13",OO="_input_1helv_1",MO="_select_1helv_31",UO="_textarea_1helv_31",ba={inputGroup:DO,label:LO,input:OO,select:MO,textarea:UO};function zi({label:s,className:e,...n}){return c.jsxs("div",{className:ba.inputGroup,children:[s&&c.jsx("label",{className:ba.label,children:s}),c.jsx("input",{className:`${ba.input} ${e||""}`,...n})]})}function va({label:s,children:e,className:n,...a}){return c.jsxs("div",{className:ba.inputGroup,children:[s&&c.jsx("label",{className:ba.label,children:s}),c.jsx("select",{className:`${ba.select} ${n||""}`,...a,children:e})]})}function Dd({label:s,className:e,...n}){return c.jsxs("div",{className:ba.inputGroup,children:[s&&c.jsx("label",{className:ba.label,children:s}),c.jsx("textarea",{className:`${ba.textarea} ${e||""}`,...n})]})}const VO="_spriteContainer_1v5fz_3",qO="_characterVideo_1v5fz_25",BO="_small_1v5fz_43",PO="_large_1v5fz_65",ad={spriteContainer:VO,characterVideo:qO,small:BO,large:PO},rd="/goal-game/",FO={1:`${rd}characters/tier1-adventurer.mp4`,2:`${rd}characters/tier2-knight.mp4`,3:`${rd}characters/tier3-champion.mp4`,4:`${rd}characters/tier4-legend.mp4`};function GO(s){return s>=41?4:s>=26?3:s>=11?2:1}function h_({level:s,size:e="medium"}){const n=GO(s),a=FO[n],o=e==="small"?ad.small:e==="large"?ad.large:"";return c.jsx("div",{className:`${ad.spriteContainer} ${o}`,children:c.jsx("video",{src:a,className:ad.characterVideo,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0})})}const HO="_characterGrid_1frbt_1",zO="_characterMain_1frbt_13",XO="_characterSide_1frbt_25",$O="_profileSection_1frbt_37",YO="_characterNameDisplay_1frbt_61",QO="_characterTitleDisplay_1frbt_75",KO="_xpSection_1frbt_89",WO="_totalXP_1frbt_97",JO="_statsGrid_1frbt_113",ZO="_statRow_1frbt_125",e3="_statName_1frbt_137",t3="_statBar_1frbt_157",n3="_statValue_1frbt_165",s3="_buffsList_1frbt_185",i3="_activeBuff_1frbt_197",a3="_buffType_1frbt_219",r3="_debuffType_1frbt_229",o3="_buffIcon_1frbt_239",l3="_buffInfo_1frbt_247",c3="_buffName_1frbt_255",u3="_buffTimer_1frbt_265",d3="_emptyState_1frbt_275",f3="_nameEditRow_1frbt_291",h3="_xpLogList_1frbt_307",m3="_xpLogEntry_1frbt_323",p3="_xpLogReason_1frbt_343",_3="_xpLogAmount_1frbt_351",g3="_negative_1frbt_363",y3="_compactScreen_1frbt_385",E3="_compactStats_1frbt_397",v3="_compactStatsTitle_1frbt_409",T3="_compactStatsGrid_1frbt_425",b3="_compactStatItem_1frbt_437",S3="_compactStatName_1frbt_449",N3="_compactStatValue_1frbt_471",x3="_compactBuffs_1frbt_487",w3="_compactBuffsTitle_1frbt_497",A3="_compactBuffsList_1frbt_515",R3="_compactBuff_1frbt_487",C3="_compactBuffIcon_1frbt_555",I3="_compactBuffName_1frbt_563",k3="_compactBuffTimer_1frbt_575",j3="_compactXpLog_1frbt_585",D3="_compactXpEntry_1frbt_609",L3="_positive_1frbt_641",We={characterGrid:HO,characterMain:zO,characterSide:XO,profileSection:$O,characterNameDisplay:YO,characterTitleDisplay:QO,xpSection:KO,totalXP:WO,statsGrid:JO,statRow:ZO,statName:e3,statBar:t3,statValue:n3,buffsList:s3,activeBuff:i3,buffType:a3,debuffType:r3,buffIcon:o3,buffInfo:l3,buffName:c3,buffTimer:u3,emptyState:d3,nameEditRow:f3,xpLogList:h3,xpLogEntry:m3,xpLogReason:p3,xpLogAmount:_3,negative:g3,compactScreen:y3,compactStats:E3,compactStatsTitle:v3,compactStatsGrid:T3,compactStatItem:b3,compactStatName:S3,compactStatValue:N3,compactBuffs:x3,compactBuffsTitle:w3,compactBuffsList:A3,compactBuff:R3,compactBuffIcon:C3,compactBuffName:I3,compactBuffTimer:k3,compactXpLog:j3,compactXpEntry:D3,positive:L3},JT={stamina:"green",willpower:"blue",health:"gold",focus:"blue",charisma:"gold"};function O3({character:s,stats:e,activeBuffs:n,xpLog:a,onNameChange:o,compact:u=!1}){const h=Ld(s.total_xp),[g,E]=k.useState(!1),[_,S]=k.useState(s.name),[x,w]=k.useState(!1),B=()=>{_.trim()&&(o(_.trim()),E(!1))};function H(U){const V=new Date,G=new Date(U+"Z").getTime()-V.getTime();if(G<=0)return"Expired";const K=Math.floor(G/36e5),ie=Math.floor(G%36e5/6e4);return K>0?`${K}h ${ie}m remaining`:`${ie}m remaining`}return u?c.jsxs("div",{className:We.compactScreen,children:[c.jsxs("div",{className:We.compactStats,children:[c.jsx("div",{className:We.compactStatsTitle,children:"Stats"}),c.jsx("div",{className:We.compactStatsGrid,children:Um.map(U=>c.jsxs("div",{className:We.compactStatItem,children:[c.jsx("span",{className:We.compactStatName,children:U}),c.jsx(yl,{value:e[U],max:30,showValue:!1,color:JT[U]||"gold"}),c.jsx("span",{className:We.compactStatValue,children:e[U]})]},U))})]}),n.length>0&&c.jsxs("div",{className:We.compactBuffs,children:[c.jsxs("div",{className:We.compactBuffsTitle,children:["Active Effects (",n.length,")"]}),c.jsx("div",{className:We.compactBuffsList,children:n.map(U=>{const V=Ic(U.stat_effects);return Object.entries(V).map(([z,G])=>`${G>0?"+":""}${G} ${z}`).join(", "),c.jsxs("div",{className:`${We.compactBuff} ${U.type==="buff"?We.buffType:We.debuffType}`,children:[c.jsx("span",{className:We.compactBuffIcon,children:U.icon}),c.jsx("span",{className:We.compactBuffName,children:U.name}),c.jsx("span",{className:We.compactBuffTimer,children:H(U.expires_at)})]},U.id)})})]}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>w(!x),style:{marginTop:12},children:x?"Hide XP History":"Show XP History"}),x&&a.length>0&&c.jsx("div",{className:We.compactXpLog,children:a.slice(0,10).map(U=>c.jsxs("div",{className:We.compactXpEntry,children:[c.jsx("span",{children:U.reason}),c.jsxs("span",{className:U.amount>0?We.positive:We.negative,children:[U.amount>0?"+":"",U.amount," XP"]})]},U.id))})]}):c.jsxs("div",{className:We.characterGrid,children:[c.jsxs("div",{className:We.characterMain,children:[c.jsx(wt,{children:c.jsxs("div",{className:We.profileSection,children:[c.jsx(h_,{level:s.level,stats:e}),g?c.jsxs("div",{className:We.nameEditRow,children:[c.jsx(zi,{value:_,onChange:U=>S(U.target.value),onKeyDown:U=>U.key==="Enter"&&B(),autoFocus:!0}),c.jsx(Pe,{size:"small",variant:"primary",onClick:B,children:"Save"}),c.jsx(Pe,{size:"small",onClick:()=>E(!1),children:"Cancel"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:We.characterNameDisplay,children:s.name}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>E(!0),children:"Rename"})]}),c.jsxs("div",{className:We.characterTitleDisplay,children:["Level ",s.level,"  ",s.title]}),c.jsxs("div",{className:We.xpSection,children:[c.jsx(yl,{value:h.current,max:h.needed,label:"Experience",size:"large",shimmer:!0}),c.jsxs("div",{className:We.totalXP,children:[s.total_xp," Total XP"]})]})]})}),c.jsx(wt,{header:"Stats",children:c.jsx("div",{className:We.statsGrid,children:Um.map(U=>c.jsxs("div",{className:We.statRow,children:[c.jsx("span",{className:We.statName,children:U}),c.jsx("div",{className:We.statBar,children:c.jsx(yl,{value:e[U],max:30,showValue:!1,color:JT[U]||"gold"})}),c.jsx("span",{className:We.statValue,children:e[U]})]},U))})})]}),c.jsxs("div",{className:We.characterSide,children:[c.jsx(wt,{header:"Active Effects",children:n.length===0?c.jsx("div",{className:We.emptyState,children:"No active buffs or debuffs"}):c.jsx("div",{className:We.buffsList,children:n.map(U=>{const V=Ic(U.stat_effects),z=Object.entries(V).map(([G,K])=>`${K>0?"+":""}${K} ${G}`).join(", ");return c.jsxs("div",{className:`${We.activeBuff} ${U.type==="buff"?We.buffType:We.debuffType}`,children:[c.jsx("span",{className:We.buffIcon,children:U.icon}),c.jsxs("div",{className:We.buffInfo,children:[c.jsx("div",{className:We.buffName,children:U.name}),c.jsxs("div",{className:We.buffTimer,children:[H(U.expires_at),z&&`  ${z}`]})]})]},U.id)})})}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>w(!x),style:{width:"100%",marginTop:8},children:x?"Hide XP History":"Show XP History"}),x&&c.jsx(wt,{header:"XP History",style:{marginTop:8},children:a.length===0?c.jsx("div",{className:We.emptyState,children:"No XP earned yet. Complete steps to earn XP!"}):c.jsx("div",{className:We.xpLogList,children:a.slice(0,20).map(U=>c.jsxs("div",{className:We.xpLogEntry,children:[c.jsx("span",{className:We.xpLogReason,children:U.reason}),c.jsxs("span",{className:`${We.xpLogAmount} ${U.amount<0?We.negative:""}`,children:[U.amount>0?"+":"",U.amount," XP"]})]},U.id))})})]})]})}const M3="_header_1ln45_1",U3="_spriteContainer_1ln45_23",V3="_info_1ln45_31",q3="_nameRow_1ln45_41",B3="_name_1ln45_41",P3="_level_1ln45_71",F3="_title_1ln45_91",G3="_xpRow_1ln45_103",H3="_xpText_1ln45_125",z3="_quickStats_1ln45_137",X3="_quickStat_1ln45_137",$3="_statIcon_1ln45_169",Y3="_statValue_1ln45_177",Fs={header:M3,spriteContainer:U3,info:V3,nameRow:q3,name:B3,level:P3,title:F3,xpRow:G3,xpText:H3,quickStats:z3,quickStat:X3,statIcon:$3,statValue:Y3};function Q3({character:s,stats:e}){const n=Ld(s.total_xp);return c.jsxs("div",{className:Fs.header,children:[c.jsx("div",{className:Fs.spriteContainer,children:c.jsx(h_,{level:s.level,stats:e,size:"small"})}),c.jsxs("div",{className:Fs.info,children:[c.jsxs("div",{className:Fs.nameRow,children:[c.jsx("span",{className:Fs.name,children:s.name}),c.jsxs("span",{className:Fs.level,children:["Lv. ",s.level]}),c.jsx("span",{className:Fs.title,children:s.title})]}),c.jsxs("div",{className:Fs.xpRow,children:[c.jsx(yl,{value:n.current,max:n.needed,showValue:!1,shimmer:!0}),c.jsxs("span",{className:Fs.xpText,children:[n.current," / ",n.needed," XP"]})]})]}),c.jsx("div",{className:Fs.quickStats,children:Object.entries(e).slice(0,5).map(([a,o])=>c.jsxs("div",{className:Fs.quickStat,children:[c.jsx("span",{className:Fs.statIcon,children:K3(a)}),c.jsx("span",{className:Fs.statValue,children:o})]},a))})]})}function K3(s){return{stamina:"",willpower:"",health:"",focus:"",charisma:""}[s]||""}const W3="_section_1hgtf_1",J3="_expanded_1hgtf_27",Z3="_header_1hgtf_35",e4="_headerLeft_1hgtf_73",t4="_icon_1hgtf_85",n4="_title_1hgtf_93",s4="_badge_1hgtf_107",i4="_gold_1hgtf_123",a4="_green_1hgtf_133",r4="_red_1hgtf_143",o4="_blue_1hgtf_153",l4="_headerContent_1hgtf_163",c4="_chevron_1hgtf_179",u4="_chevronUp_1hgtf_191",d4="_content_1hgtf_199",f4="_contentInner_1hgtf_219",h4="_miniProgress_1hgtf_239",m4="_miniProgressFill_1hgtf_255",Gs={section:W3,expanded:J3,header:Z3,headerLeft:e4,icon:t4,title:n4,badge:s4,gold:i4,green:a4,red:r4,blue:o4,headerContent:l4,chevron:c4,chevronUp:u4,content:d4,contentInner:f4,miniProgress:h4,miniProgressFill:m4};function Tc({title:s,badge:e,badgeColor:n="gold",icon:a,defaultExpanded:o=!1,children:u,headerContent:h}){const[g,E]=k.useState(o);return c.jsxs("div",{className:`${Gs.section} ${g?Gs.expanded:""}`,children:[c.jsxs("button",{className:Gs.header,onClick:()=>E(!g),"aria-expanded":g,children:[c.jsxs("div",{className:Gs.headerLeft,children:[a&&c.jsx("span",{className:Gs.icon,children:a}),c.jsx("span",{className:Gs.title,children:s}),e!==void 0&&c.jsx("span",{className:`${Gs.badge} ${Gs[n]}`,children:e})]}),h&&c.jsx("div",{className:Gs.headerContent,children:h}),c.jsx("span",{className:`${Gs.chevron} ${g?Gs.chevronUp:""}`,children:""})]}),c.jsx("div",{className:Gs.content,children:c.jsx("div",{className:Gs.contentInner,children:u})})]})}const p4="_overlay_15bjw_1",_4="_modal_15bjw_25",g4="_modalHeader_15bjw_97",y4="_modalTitle_15bjw_111",E4="_closeButton_15bjw_123",v4="_modalActions_15bjw_153",rl={overlay:p4,modal:_4,modalHeader:g4,modalTitle:y4,closeButton:E4,modalActions:v4};function Rl({open:s,onClose:e,title:n,children:a,actions:o}){return k.useEffect(()=>{if(!s)return;const u=h=>{h.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[s,e]),s?c.jsx("div",{className:rl.overlay,onClick:e,children:c.jsxs("div",{className:rl.modal,onClick:u=>u.stopPropagation(),children:[n&&c.jsxs("div",{className:rl.modalHeader,children:[c.jsx("h3",{className:rl.modalTitle,children:n}),c.jsx("button",{className:rl.closeButton,onClick:e,children:""})]}),a,o&&c.jsx("div",{className:rl.modalActions,children:o})]})}):null}const T4="_checkbox_543u2_1",b4="_box_543u2_17",S4="_checked_543u2_53",N4="_checkmark_543u2_63",x4="_checkboxLabel_543u2_75",w4="_hidden_543u2_99",ol={checkbox:T4,box:b4,checked:S4,checkmark:N4,checkboxLabel:x4,hidden:w4};function A4({checked:s,onChange:e,label:n,className:a}){const o=[ol.checkbox,s&&ol.checked,a].filter(Boolean).join(" ");return c.jsxs("label",{className:o,onClick:u=>u.stopPropagation(),children:[c.jsx("input",{type:"checkbox",className:ol.hidden,checked:s,onChange:u=>e(u.target.checked)}),c.jsx("span",{className:ol.box,children:s&&c.jsx("span",{className:ol.checkmark,children:""})}),n&&c.jsx("span",{className:ol.checkboxLabel,children:n})]})}const R4="_questLog_15h7c_1",C4="_questToolbar_15h7c_13",I4="_questFilters_15h7c_27",k4="_goalsContainer_15h7c_41",j4="_goalCard_15h7c_55",D4="_goalCompleted_15h7c_79",L4="_goalTitle_15h7c_87",O4="_goalHeader_15h7c_97",M4="_goalDomainIcon_15h7c_125",U4="_goalInfo_15h7c_135",V4="_goalStats_15h7c_165",q4="_goalStatItem_15h7c_177",B4="_missed_15h7c_187",P4="_goalProgress_15h7c_195",F4="_goalProgressBar_15h7c_209",G4="_goalProgressFill_15h7c_225",H4="_goalProgressText_15h7c_239",z4="_goalActions_15h7c_255",X4="_goalContent_15h7c_267",$4="_questsGrid_15h7c_277",Y4="_emptyStateSmall_15h7c_289",Q4="_questCard_15h7c_305",K4="_questCardCompact_15h7c_329",W4="_questCardHeader_15h7c_337",J4="_questHeaderContent_15h7c_363",Z4="_questPriority_15h7c_373",e5="_normal_15h7c_387",t5="_important_15h7c_389",n5="_legendary_15h7c_391",s5="_questTitle_15h7c_395",i5="_questCompleted_15h7c_421",a5="_questProgressInline_15h7c_431",r5="_questProgressBarSmall_15h7c_445",o5="_questProgressFillSmall_15h7c_463",l5="_questProgressTextSmall_15h7c_475",c5="_missedCount_15h7c_485",u5="_questMeta_15h7c_493",d5="_questStepCount_15h7c_509",f5="_questActions_15h7c_525",h5="_expandIcon_15h7c_537",m5="_expanded_15h7c_551",p5="_stepsSection_15h7c_561",_5="_stepsList_15h7c_579",g5="_stepItem_15h7c_593",y5="_stepItemCompact_15h7c_611",E5="_stepPriorityDot_15h7c_627",v5="_stepActions_15h7c_641",T5="_addStepRow_15h7c_651",b5="_addStepRowCompact_15h7c_663",S5="_addStepInput_15h7c_671",N5="_stepMissed_15h7c_681",x5="_missedLabel_15h7c_691",w5="_missedIcon_15h7c_709",A5="_missedText_15h7c_721",R5="_missBtn_15h7c_733",C5="_formGrid_15h7c_751",I5="_formRow_15h7c_763",k5="_emptyState_15h7c_289",qe={questLog:R4,questToolbar:C4,questFilters:I4,goalsContainer:k4,goalCard:j4,goalCompleted:D4,goalTitle:L4,goalHeader:O4,goalDomainIcon:M4,goalInfo:U4,goalStats:V4,goalStatItem:q4,missed:B4,goalProgress:P4,goalProgressBar:F4,goalProgressFill:G4,goalProgressText:H4,goalActions:z4,goalContent:X4,questsGrid:$4,emptyStateSmall:Y4,questCard:Q4,questCardCompact:K4,questCardHeader:W4,questHeaderContent:J4,questPriority:Z4,normal:e5,important:t5,legendary:n5,questTitle:s5,questCompleted:i5,questProgressInline:a5,questProgressBarSmall:r5,questProgressFillSmall:o5,questProgressTextSmall:l5,missedCount:c5,questMeta:u5,questStepCount:d5,questActions:f5,expandIcon:h5,expanded:m5,stepsSection:p5,stepsList:_5,stepItem:g5,stepItemCompact:y5,stepPriorityDot:E5,stepActions:v5,addStepRow:T5,addStepRowCompact:b5,addStepInput:S5,stepMissed:N5,missedLabel:x5,missedIcon:w5,missedText:A5,missBtn:R5,formGrid:C5,formRow:I5,emptyState:k5};function j5({quest:s,compact:e=!1,onCreateStep:n,onCompleteStep:a,onUncompleteStep:o,onMissStep:u,onUnmissStep:h,onDeleteStep:g,onDeleteQuest:E}){const[_,S]=k.useState(!1),[x,w]=k.useState(""),[B,H]=k.useState("normal"),U=s.steps.filter(ye=>ye.status==="completed").length,V=s.steps.filter(ye=>ye.status==="missed").length,z=s.steps.length,G=s.status==="completed",K=z>0?Math.round(U/z*100):0,ie=()=>{x.trim()&&(n(s.id,x.trim(),B),w(""),H("normal"))},Ee=ye=>ye==="legendary"?"var(--priority-legendary)":ye==="important"?"var(--priority-important)":"var(--priority-normal)";return c.jsxs("div",{className:`${qe.questCard} ${G?qe.questCompleted:""} ${e?qe.questCardCompact:""}`,children:[c.jsxs("div",{className:qe.questCardHeader,onClick:()=>S(!_),children:[c.jsx("div",{className:`${qe.questPriority} ${qe[s.priority]}`}),c.jsxs("div",{className:qe.questHeaderContent,children:[c.jsx("span",{className:qe.questTitle,children:s.title}),e&&c.jsxs("div",{className:qe.questProgressInline,children:[c.jsx("div",{className:qe.questProgressBarSmall,children:c.jsx("div",{className:qe.questProgressFillSmall,style:{width:`${K}%`}})}),c.jsxs("span",{className:qe.questProgressTextSmall,children:[U,"/",z,V>0&&c.jsxs("span",{className:qe.missedCount,children:[" (",V," )"]})]})]})]}),!e&&c.jsx("span",{className:qe.questMeta,children:c.jsxs("span",{className:qe.questStepCount,children:[U,"/",z]})}),c.jsx("div",{className:qe.questActions,onClick:ye=>ye.stopPropagation(),children:c.jsx(Pe,{size:"small",variant:"danger",onClick:()=>E(s.id),children:""})}),c.jsx("span",{className:`${qe.expandIcon} ${_?qe.expanded:""}`,children:""})]}),_&&c.jsxs("div",{className:qe.stepsSection,children:[c.jsx("div",{className:qe.stepsList,children:s.steps.map(ye=>{const D=ye.status==="missed",R=ye.status==="completed",L=ye.status==="pending";return c.jsxs("div",{className:`${qe.stepItem} ${D?qe.stepMissed:""} ${e?qe.stepItemCompact:""}`,children:[c.jsx("div",{className:qe.stepPriorityDot,style:{background:Ee(ye.priority)}}),D?c.jsxs("span",{className:qe.missedLabel,onClick:()=>h(ye.id),children:[c.jsx("span",{className:qe.missedIcon,children:""}),c.jsx("span",{className:qe.missedText,children:ye.title})]}):c.jsx(A4,{checked:R,onChange:q=>{q?a(ye.id,s.id,ye.priority):o(ye.id)},label:ye.title}),c.jsxs("div",{className:qe.stepActions,children:[L&&c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>u(ye.id),title:"Mark as missed",className:qe.missBtn,children:""}),c.jsx(Pe,{size:"small",variant:"danger",onClick:()=>g(ye.id),children:""})]})]},ye.id)})}),!G&&c.jsxs("div",{className:`${qe.addStepRow} ${e?qe.addStepRowCompact:""}`,children:[c.jsx("div",{className:qe.addStepInput,children:c.jsx(zi,{value:x,onChange:ye=>w(ye.target.value),placeholder:"Add a step...",onKeyDown:ye=>ye.key==="Enter"&&ie()})}),!e&&c.jsxs(va,{value:B,onChange:ye=>H(ye.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important"}),c.jsx("option",{value:"legendary",children:"Legendary"})]}),c.jsx(Pe,{variant:"primary",onClick:ie,children:"+"})]})]})]})}function D5({goals:s,domains:e,filterDomain:n,filterStatus:a,onFilterDomain:o,onFilterStatus:u,onCreateGoal:h,onCreateQuest:g,onCreateStep:E,onCompleteStep:_,onUncompleteStep:S,onMissStep:x,onUnmissStep:w,onDeleteStep:B,onDeleteQuest:H,onDeleteGoal:U}){const[V,z]=k.useState(!1),[G,K]=k.useState(null),[ie,Ee]=k.useState(""),[ye,D]=k.useState(""),[R,L]=k.useState(1),[q,M]=k.useState(""),[O,j]=k.useState(""),[Ae,Ze]=k.useState("normal"),[Y,fe]=k.useState(new Set),we=oe=>{fe(Se=>{const Me=new Set(Se);return Me.has(oe)?Me.delete(oe):Me.add(oe),Me})},$e=()=>{ie.trim()&&(h(R,ie.trim(),ye.trim()),Ee(""),D(""),z(!1))},et=()=>{!q.trim()||G===null||(g(G,q.trim(),O.trim(),Ae),M(""),j(""),Ze("normal"),K(null))},X=oe=>{const Se=oe.quests.length,Me=oe.quests.filter(kt=>kt.status==="completed").length,ze=oe.quests.reduce((kt,ln)=>kt+ln.steps.length,0),le=oe.quests.reduce((kt,ln)=>kt+ln.steps.filter(Ut=>Ut.status==="completed").length,0),Le=oe.quests.reduce((kt,ln)=>kt+ln.steps.filter(Ut=>Ut.status==="missed").length,0),nt=ze>0?Math.round(le/ze*100):0;return{totalQuests:Se,completedQuests:Me,totalSteps:ze,completedSteps:le,missedSteps:Le,progressPercent:nt}},de=k.useMemo(()=>[...s].sort((oe,Se)=>oe.status==="completed"&&Se.status!=="completed"?1:oe.status!=="completed"&&Se.status==="completed"?-1:0),[s]);return c.jsxs("div",{className:qe.questLog,children:[c.jsxs("div",{className:qe.questToolbar,children:[c.jsxs("div",{className:qe.questFilters,children:[c.jsxs(va,{value:n??"",onChange:oe=>o(oe.target.value?Number(oe.target.value):void 0),children:[c.jsx("option",{value:"",children:"All Domains"}),e.map(oe=>c.jsxs("option",{value:oe.id,children:[oe.icon," ",oe.name]},oe.id))]}),c.jsxs(va,{value:a??"",onChange:oe=>u(oe.target.value||void 0),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]})]}),c.jsx(Pe,{variant:"primary",onClick:()=>z(!0),children:"+ New Goal"})]}),s.length===0?c.jsx(wt,{children:c.jsx("div",{className:qe.emptyState,children:"No goals yet. Create your first goal to begin your adventure!"})}):c.jsx("div",{className:qe.goalsContainer,children:de.map(oe=>{const Se=X(oe),Me=Y.has(oe.id),ze=oe.status==="completed";return c.jsxs("div",{className:`${qe.goalCard} ${ze?qe.goalCompleted:""}`,children:[c.jsxs("div",{className:qe.goalHeader,onClick:()=>we(oe.id),children:[c.jsx("span",{className:`${qe.expandIcon} ${Me?qe.expanded:""}`,children:""}),c.jsx("span",{className:qe.goalDomainIcon,children:oe.domain_icon}),c.jsxs("div",{className:qe.goalInfo,children:[c.jsx("span",{className:qe.goalTitle,children:oe.title}),c.jsxs("div",{className:qe.goalStats,children:[c.jsxs("span",{className:qe.goalStatItem,children:[Se.completedQuests,"/",Se.totalQuests," quests"]}),c.jsxs("span",{className:qe.goalStatItem,children:[Se.completedSteps,"/",Se.totalSteps," steps"]}),Se.missedSteps>0&&c.jsxs("span",{className:`${qe.goalStatItem} ${qe.missed}`,children:[Se.missedSteps," missed"]})]})]}),c.jsxs("div",{className:qe.goalProgress,children:[c.jsx("div",{className:qe.goalProgressBar,children:c.jsx("div",{className:qe.goalProgressFill,style:{width:`${Se.progressPercent}%`}})}),c.jsxs("span",{className:qe.goalProgressText,children:[Se.progressPercent,"%"]})]}),c.jsxs("div",{className:qe.goalActions,onClick:le=>le.stopPropagation(),children:[c.jsx(Pe,{size:"small",variant:"primary",onClick:()=>K(oe.id),children:"+"}),c.jsx(Pe,{size:"small",variant:"danger",onClick:()=>U(oe.id),children:""})]})]}),Me&&c.jsx("div",{className:qe.goalContent,children:oe.quests.length===0?c.jsx("div",{className:qe.emptyStateSmall,children:"No quests yet. Click + to add one."}):c.jsx("div",{className:qe.questsGrid,children:oe.quests.map(le=>c.jsx(j5,{quest:le,compact:!0,onCreateStep:E,onCompleteStep:_,onUncompleteStep:S,onMissStep:x,onUnmissStep:w,onDeleteStep:B,onDeleteQuest:H},le.id))})})]},oe.id)})}),c.jsx(Rl,{open:V,onClose:()=>z(!1),title:"New Goal",actions:c.jsxs(c.Fragment,{children:[c.jsx(Pe,{onClick:()=>z(!1),children:"Cancel"}),c.jsx(Pe,{variant:"primary",onClick:$e,children:"Create Goal"})]}),children:c.jsxs("div",{className:qe.formGrid,children:[c.jsx(va,{label:"Domain",value:R,onChange:oe=>L(Number(oe.target.value)),children:e.map(oe=>c.jsxs("option",{value:oe.id,children:[oe.icon," ",oe.name]},oe.id))}),c.jsx(zi,{label:"Goal Title",value:ie,onChange:oe=>Ee(oe.target.value),placeholder:"e.g., Get in shape",onKeyDown:oe=>oe.key==="Enter"&&$e()}),c.jsx(Dd,{label:"Description (optional)",value:ye,onChange:oe=>D(oe.target.value),placeholder:"Describe your goal..."})]})}),c.jsx(Rl,{open:G!==null,onClose:()=>K(null),title:"New Quest",actions:c.jsxs(c.Fragment,{children:[c.jsx(Pe,{onClick:()=>K(null),children:"Cancel"}),c.jsx(Pe,{variant:"primary",onClick:et,children:"Create Quest"})]}),children:c.jsxs("div",{className:qe.formGrid,children:[c.jsx(zi,{label:"Quest Title",value:q,onChange:oe=>M(oe.target.value),placeholder:"e.g., Run 5K",onKeyDown:oe=>oe.key==="Enter"&&et()}),c.jsx(Dd,{label:"Description (optional)",value:O,onChange:oe=>j(oe.target.value),placeholder:"Describe this quest..."}),c.jsxs(va,{label:"Priority",value:Ae,onChange:oe=>Ze(oe.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important (1.5x XP)"}),c.jsx("option",{value:"legendary",children:"Legendary (2x XP)"})]})]})})]})}const L5="_buffTracker_mj9ne_1",O5="_buffToolbar_mj9ne_13",M5="_activeEffectsBar_mj9ne_25",U5="_activeEffectsHeader_mj9ne_39",V5="_activeEffectsTitle_mj9ne_53",q5="_activeEffectsCount_mj9ne_65",B5="_buffCount_mj9ne_75",P5="_debuffCount_mj9ne_87",F5="_activeEffectsList_mj9ne_99",G5="_activeEffectChip_mj9ne_111",H5="_buffChip_mj9ne_133",z5="_debuffChip_mj9ne_143",X5="_chipIcon_mj9ne_153",$5="_chipInfo_mj9ne_161",Y5="_chipName_mj9ne_171",Q5="_stackCount_mj9ne_193",K5="_chipMeta_mj9ne_211",W5="_chipRemove_mj9ne_221",J5="_quickActions_mj9ne_253",Z5="_quickActionsHeader_mj9ne_267",eM="_quickActionsTitle_mj9ne_281",tM="_quickActionsHint_mj9ne_293",nM="_quickActionsGrid_mj9ne_303",sM="_quickActionBtn_mj9ne_315",iM="_quickBuff_mj9ne_339",aM="_quickDebuff_mj9ne_359",rM="_isActive_mj9ne_379",oM="_quickIcon_mj9ne_389",lM="_quickName_mj9ne_397",cM="_quickStreak_mj9ne_411",uM="_quickStack_mj9ne_423",dM="_shieldInventory_mj9ne_445",fM="_shieldIcon_mj9ne_465",hM="_shieldInfo_mj9ne_473",mM="_shieldTitle_mj9ne_481",pM="_shieldDesc_mj9ne_493",_M="_shieldCount_mj9ne_503",gM="_collapsibleSection_mj9ne_523",yM="_sectionHeader_mj9ne_537",EM="_debuffHeader_mj9ne_567",vM="_sectionExpand_mj9ne_575",TM="_expanded_mj9ne_587",bM="_sectionIcon_mj9ne_595",SM="_sectionTitle_mj9ne_603",NM="_sectionCount_mj9ne_617",xM="_sectionContent_mj9ne_635",wM="_compactGrid_mj9ne_647",AM="_compactCard_mj9ne_661",RM="_compactBuff_mj9ne_681",CM="_compactDebuff_mj9ne_701",IM="_cardActive_mj9ne_721",kM="_compactCardMain_mj9ne_731",jM="_compactIcon_mj9ne_743",DM="_compactInfo_mj9ne_753",LM="_compactName_mj9ne_763",OM="_compactMilestone_mj9ne_779",MM="_compactMeta_mj9ne_787",UM="_compactStreak_mj9ne_799",VM="_atRisk_mj9ne_819",qM="_shieldActive_mj9ne_831",BM="_compactActions_mj9ne_841",PM="_compactActionBtn_mj9ne_855",FM="_claimBtn_mj9ne_887",GM="_deleteBtn_mj9ne_897",HM="_activeIndicator_mj9ne_905",zM="_emptyStateSmall_mj9ne_947",XM="_formGrid_mj9ne_963",$M="_formRow_mj9ne_975",YM="_statEffectRow_mj9ne_993",QM="_statEffectLabel_mj9ne_1007",KM="_statEffectInput_mj9ne_1021",WM="_divider_mj9ne_1029",be={buffTracker:L5,buffToolbar:O5,activeEffectsBar:M5,activeEffectsHeader:U5,activeEffectsTitle:V5,activeEffectsCount:q5,buffCount:B5,debuffCount:P5,activeEffectsList:F5,activeEffectChip:G5,buffChip:H5,debuffChip:z5,chipIcon:X5,chipInfo:$5,chipName:Y5,stackCount:Q5,chipMeta:K5,chipRemove:W5,quickActions:J5,quickActionsHeader:Z5,quickActionsTitle:eM,quickActionsHint:tM,quickActionsGrid:nM,quickActionBtn:sM,quickBuff:iM,quickDebuff:aM,isActive:rM,quickIcon:oM,quickName:lM,quickStreak:cM,quickStack:uM,shieldInventory:dM,shieldIcon:fM,shieldInfo:hM,shieldTitle:mM,shieldDesc:pM,shieldCount:_M,collapsibleSection:gM,sectionHeader:yM,debuffHeader:EM,sectionExpand:vM,expanded:TM,sectionIcon:bM,sectionTitle:SM,sectionCount:NM,sectionContent:xM,compactGrid:wM,compactCard:AM,compactBuff:RM,compactDebuff:CM,cardActive:IM,compactCardMain:kM,compactIcon:jM,compactInfo:DM,compactName:LM,compactMilestone:OM,compactMeta:MM,compactStreak:UM,atRisk:VM,shieldActive:qM,compactActions:BM,compactActionBtn:PM,claimBtn:FM,deleteBtn:GM,activeIndicator:HM,emptyStateSmall:zM,formGrid:XM,formRow:$M,statEffectRow:YM,statEffectLabel:QM,statEffectInput:KM,divider:WM},jm=[{name:"Morning Exercise",description:"Worked out in the morning",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2,willpower:1}},{name:"Cardio / Running",description:"Ran, cycled, swam, or did sustained cardio",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2}},{name:"Strength Training",description:"Lifted weights or did resistance training",type:"buff",icon:"",duration:24,stats:{stamina:2,health:1,willpower:2}},{name:"Yoga / Stretching",description:"Did yoga, stretching, or mobility work",type:"buff",icon:"",duration:24,stats:{health:2,focus:1,willpower:1}},{name:"8 Hours Sleep",description:"Got a full night of quality sleep",type:"buff",icon:"",duration:24,stats:{health:2,focus:2,stamina:1,willpower:1}},{name:"Meditation",description:"Practiced mindfulness or meditation",type:"buff",icon:"",duration:24,stats:{willpower:3,focus:2}},{name:"Healthy Meal",description:"Ate a balanced, nutritious meal",type:"buff",icon:"",duration:24,stats:{health:3,stamina:1}},{name:"Drank Enough Water",description:"Hit daily water intake goal",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Read 30+ Minutes",description:"Read a book, article, or educational material",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:1}},{name:"Studied / Learned",description:"Studied a course, skill, or new subject",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2}},{name:"Deep Work Session",description:"Focused work with no distractions for 90+ min",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2,stamina:1}},{name:"Journaling",description:"Wrote in journal or reflected on the day",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Cold Shower",description:"Took a cold shower or ice bath",type:"buff",icon:"",duration:24,stats:{willpower:3,stamina:1}},{name:"No Phone First Hour",description:"Avoided phone for first hour after waking",type:"buff",icon:"",duration:24,stats:{focus:2,willpower:2}},{name:"Socialised",description:"Had meaningful social interaction",type:"buff",icon:"",duration:24,stats:{charisma:3,willpower:1}},{name:"Helped Someone",description:"Did something kind or helpful for another person",type:"buff",icon:"",duration:24,stats:{charisma:2,willpower:1}},{name:"Creative Time",description:"Spent time on a creative pursuit",type:"buff",icon:"",duration:24,stats:{focus:2,charisma:1,willpower:1}},{name:"Sunlight / Nature",description:"Spent 20+ minutes outdoors in natural light",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Gratitude Practice",description:"Practiced gratitude  wrote or reflected on 3+",type:"buff",icon:"",duration:24,stats:{willpower:2,charisma:1}},{name:"Meal Prep",description:"Prepared healthy meals in advance",type:"buff",icon:"",duration:48,stats:{health:2,willpower:1,stamina:1}},{name:"Cleaned / Organised",description:"Cleaned home, desk, or organised belongings",type:"buff",icon:"",duration:24,stats:{focus:1,willpower:2}},{name:"Financial Check-In",description:"Reviewed budget, tracked expenses, or saved",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Junk Food",description:"Ate fast food, excessive sugar, or processed food",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-1}},{name:"Skipped Exercise",description:"Had planned to exercise but didn't",type:"debuff",icon:"",duration:24,stats:{stamina:-2,willpower:-2}},{name:"Poor Sleep",description:"Got less than 6 hours or very poor quality",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,stamina:-1,willpower:-1}},{name:"Doomscrolling",description:"Mindlessly scrolled social media for 30+ min",type:"debuff",icon:"",duration:24,stats:{focus:-3,willpower:-2}},{name:"Excessive Gaming",description:"Played video games for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-2,stamina:-1}},{name:"Binge Watching",description:"Watched TV/streaming for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-1,stamina:-1}},{name:"Alcohol",description:"Drank alcohol",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,willpower:-1}},{name:"Smoking / Vaping",description:"Smoked cigarettes or vaped",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-2}},{name:"Excessive Caffeine",description:"Had too much coffee or energy drinks",type:"debuff",icon:"",duration:24,stats:{health:-1,focus:-1,stamina:-1}},{name:"Procrastinated",description:"Avoided important tasks most of the day",type:"debuff",icon:"",duration:24,stats:{willpower:-3,focus:-2}},{name:"Skipped Meals",description:"Skipped a meal or barely ate",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-2,focus:-1}},{name:"Stayed Up Too Late",description:"Went to bed much later than planned",type:"debuff",icon:"",duration:24,stats:{health:-1,willpower:-2,stamina:-1}},{name:"Impulse Spending",description:"Made unnecessary or impulse purchases",type:"debuff",icon:"",duration:24,stats:{willpower:-2}},{name:"Negative Self-Talk",description:"Caught in self-criticism or negative thought loops",type:"debuff",icon:"",duration:24,stats:{willpower:-2,charisma:-2}},{name:"Social Isolation",description:"Avoided people or cancelled social plans",type:"debuff",icon:"",duration:24,stats:{charisma:-3,willpower:-1}},{name:"Sugary Drinks",description:"Had soda, energy drinks, or sugary beverages",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-1}},{name:"Lost Temper",description:"Got angry or had an emotional outburst",type:"debuff",icon:"",duration:24,stats:{charisma:-2,willpower:-2}}],JM=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function ZM(s){const e=Math.round(s*60);if(e<60)return`${e}m`;const n=Math.floor(e/60),a=e%60;return a===0?`${n}h`:`${n}h ${a}m`}function eU({definitions:s,activeBuffs:e,onCreateDefinition:n,onDeleteDefinition:a,onActivateBuff:o,onDeactivateBuff:u,streakInfos:h,shieldCount:g=0,onUseShield:E,getUnclaimedMilestones:_,onClaimMilestones:S}){const[x,w]=k.useState(!1),[B,H]=k.useState(!1),[U,V]=k.useState(!1),[z,G]=k.useState(""),[K,ie]=k.useState(""),[Ee,ye]=k.useState("buff"),[D,R]=k.useState(""),[L,q]=k.useState(1440),[M,O]=k.useState({}),j=le=>{if(le==="")return;const Le=jm[Number(le)];Le&&(G(Le.name),ie(Le.description),ye(Le.type),R(Le.icon),q(Le.duration*60),O({...Le.stats}))},Ae=()=>{G(""),ie(""),ye("buff"),R(""),q(1440),O({})},Ze=()=>{if(!z.trim())return;const le=Object.fromEntries(Object.entries(M).filter(([,nt])=>nt!==0)),Le=L/60;n(z.trim(),K.trim(),Ee,D,Le,JSON.stringify(le)),Ae(),w(!1)};function Y(le){const Le=new Date,kt=new Date(le+"Z").getTime()-Le.getTime();if(kt<=0)return"Expired";const ln=Math.floor(kt/36e5),Ut=Math.floor(kt%36e5/6e4);return ln>0?`${ln}h ${Ut}m`:`${Ut}m`}const fe=s.filter(le=>le.type==="buff"),we=s.filter(le=>le.type==="debuff"),$e=k.useMemo(()=>fe.filter(le=>{const Le=h?.get(le.id);return Le&&Le.currentStreak>0}).slice(0,6),[fe,h]),et=k.useMemo(()=>we.slice(0,4),[we]),X=jm.map((le,Le)=>({...le,index:Le})).filter(le=>le.type==="buff"),de=jm.map((le,Le)=>({...le,index:Le})).filter(le=>le.type==="debuff"),oe=e.filter(le=>le.type==="buff"),Se=e.filter(le=>le.type==="debuff"),Me=le=>{const Le=s.find(zs=>zs.id===le.definition_id);if(!Le)return 1;const nt=new Date().getTime(),ln=(new Date(le.expires_at).getTime()-nt)/(1e3*60*60),Ut=Le.duration_hours;return Math.max(1,Math.ceil(ln/Ut))},ze=le=>e.find(Le=>Le.definition_id===le);return c.jsxs("div",{className:be.buffTracker,children:[e.length>0&&c.jsxs("div",{className:be.activeEffectsBar,children:[c.jsxs("div",{className:be.activeEffectsHeader,children:[c.jsx("span",{className:be.activeEffectsTitle,children:"Active Effects"}),c.jsxs("span",{className:be.activeEffectsCount,children:[oe.length>0&&c.jsxs("span",{className:be.buffCount,children:["+",oe.length]}),Se.length>0&&c.jsxs("span",{className:be.debuffCount,children:["-",Se.length]})]})]}),c.jsx("div",{className:be.activeEffectsList,children:e.map(le=>{const Le=Ic(le.stat_effects),nt=Object.entries(Le).map(([ln,Ut])=>`${Ut>0?"+":""}${Ut} ${ln.slice(0,3)}`).join(" "),kt=Me(le);return c.jsxs("div",{className:`${be.activeEffectChip} ${le.type==="buff"?be.buffChip:be.debuffChip}`,children:[c.jsx("span",{className:be.chipIcon,children:le.icon}),c.jsxs("div",{className:be.chipInfo,children:[c.jsxs("span",{className:be.chipName,children:[le.name,kt>1&&c.jsxs("span",{className:be.stackCount,children:[kt,"x"]})]}),c.jsxs("span",{className:be.chipMeta,children:[Y(le.expires_at),"  ",nt]})]}),c.jsx("button",{className:be.chipRemove,onClick:()=>u(le.id),title:"Undo last activation",children:""})]},le.id)})})]}),($e.length>0||et.length>0)&&c.jsxs("div",{className:be.quickActions,children:[c.jsxs("div",{className:be.quickActionsHeader,children:[c.jsx("span",{className:be.quickActionsTitle,children:"Quick Actions"}),c.jsx("span",{className:be.quickActionsHint,children:"Tap to activate"})]}),c.jsxs("div",{className:be.quickActionsGrid,children:[$e.map(le=>{const Le=h?.get(le.id),nt=ze(le.id),kt=nt?Me(nt):0;return c.jsxs("button",{className:`${be.quickActionBtn} ${be.quickBuff} ${nt?be.isActive:""}`,onClick:()=>o(le.id),title:nt?`Stack (currently ${kt}x)`:"Activate",children:[c.jsx("span",{className:be.quickIcon,children:le.icon}),c.jsx("span",{className:be.quickName,children:le.name}),kt>0&&c.jsxs("span",{className:be.quickStack,children:[kt,"x"]}),Le&&Le.currentStreak>0&&!nt&&c.jsxs("span",{className:be.quickStreak,children:["",Le.currentStreak]})]},le.id)}),et.map(le=>{const Le=ze(le.id),nt=Le?Me(Le):0;return c.jsxs("button",{className:`${be.quickActionBtn} ${be.quickDebuff} ${Le?be.isActive:""}`,onClick:()=>o(le.id),title:Le?`Stack (currently ${nt}x)`:"Activate",children:[c.jsx("span",{className:be.quickIcon,children:le.icon}),c.jsx("span",{className:be.quickName,children:le.name}),nt>0&&c.jsxs("span",{className:be.quickStack,children:[nt,"x"]})]},le.id)})]})]}),c.jsxs("div",{className:be.shieldInventory,children:[c.jsx("span",{className:be.shieldIcon,children:""}),c.jsxs("div",{className:be.shieldInfo,children:[c.jsx("div",{className:be.shieldTitle,children:"Streak Shields"}),c.jsx("div",{className:be.shieldDesc,children:"Protects a streak if you miss a day"})]}),c.jsx("span",{className:be.shieldCount,children:g})]}),c.jsx("div",{className:be.buffToolbar,children:c.jsx(Pe,{variant:"primary",onClick:()=>{Ae(),w(!0)},children:"+ New Buff/Debuff"})}),c.jsxs("div",{className:be.collapsibleSection,children:[c.jsxs("div",{className:be.sectionHeader,onClick:()=>H(!B),children:[c.jsx("span",{className:`${be.sectionExpand} ${B?be.expanded:""}`,children:""}),c.jsx("span",{className:be.sectionIcon,children:""}),c.jsx("span",{className:be.sectionTitle,children:"Buffs (Positive Habits)"}),c.jsx("span",{className:be.sectionCount,children:fe.length})]}),B&&c.jsx("div",{className:be.sectionContent,children:fe.length===0?c.jsx("div",{className:be.emptyStateSmall,children:"No buffs defined yet. Create one above!"}):c.jsx("div",{className:be.compactGrid,children:fe.map(le=>c.jsx(ZT,{definition:le,onActivate:o,onDelete:a,streakInfo:h?.get(le.id),shieldCount:g,onUseShield:E,unclaimedMilestones:_?.(le.id)||[],onClaimMilestones:S,isActive:e.some(Le=>Le.definition_id===le.id)},le.id))})})]}),c.jsxs("div",{className:be.collapsibleSection,children:[c.jsxs("div",{className:`${be.sectionHeader} ${be.debuffHeader}`,onClick:()=>V(!U),children:[c.jsx("span",{className:`${be.sectionExpand} ${U?be.expanded:""}`,children:""}),c.jsx("span",{className:be.sectionIcon,children:""}),c.jsx("span",{className:be.sectionTitle,children:"Debuffs (Negative Habits)"}),c.jsx("span",{className:be.sectionCount,children:we.length})]}),U&&c.jsx("div",{className:be.sectionContent,children:we.length===0?c.jsx("div",{className:be.emptyStateSmall,children:"No debuffs defined yet."}):c.jsx("div",{className:be.compactGrid,children:we.map(le=>c.jsx(ZT,{definition:le,onActivate:o,onDelete:a,isActive:e.some(Le=>Le.definition_id===le.id)},le.id))})})]}),c.jsx(Rl,{open:x,onClose:()=>w(!1),title:"New Buff / Debuff",actions:c.jsxs(c.Fragment,{children:[c.jsx(Pe,{onClick:()=>w(!1),children:"Cancel"}),c.jsx(Pe,{variant:"primary",onClick:Ze,children:"Create"})]}),children:c.jsxs("div",{className:be.formGrid,children:[c.jsxs(va,{label:"Quick Select  Common Habits",value:"",onChange:le=>j(le.target.value),children:[c.jsx("option",{value:"",children:" Choose a preset to auto-fill "}),c.jsx("optgroup",{label:"Buffs (Positive Habits)",children:X.map(le=>c.jsxs("option",{value:le.index,children:[le.icon," ",le.name]},le.index))}),c.jsx("optgroup",{label:"Debuffs (Negative Habits)",children:de.map(le=>c.jsxs("option",{value:le.index,children:[le.icon," ",le.name]},le.index))})]}),c.jsx("div",{className:be.divider}),c.jsxs("div",{className:be.formRow,children:[c.jsx(zi,{label:"Name",value:z,onChange:le=>G(le.target.value),placeholder:"e.g., Morning Exercise"}),c.jsxs(va,{label:"Type",value:Ee,onChange:le=>ye(le.target.value),children:[c.jsx("option",{value:"buff",children:"Buff (Positive)"}),c.jsx("option",{value:"debuff",children:"Debuff (Negative)"})]})]}),c.jsx(Dd,{label:"Description",value:K,onChange:le=>ie(le.target.value),placeholder:"Describe this habit..."}),c.jsxs("div",{className:be.formRow,children:[c.jsx(va,{label:"Icon",value:D,onChange:le=>R(le.target.value),children:JM.map(le=>c.jsx("option",{value:le,children:le},le))}),c.jsx(zi,{label:"Duration (minutes)",type:"number",value:L,onChange:le=>q(Number(le.target.value)),min:1,max:10080})]}),c.jsxs("div",{children:[c.jsx("label",{className:be.statEffectLabel,style:{display:"block",marginBottom:8,fontFamily:"var(--font-heading)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-secondary)"},children:"Stat Effects"}),Um.map(le=>c.jsxs("div",{className:be.statEffectRow,children:[c.jsx("span",{className:be.statEffectLabel,children:le}),c.jsx("input",{type:"number",className:be.statEffectInput,value:M[le]||0,onChange:Le=>O({...M,[le]:Number(Le.target.value)}),style:{padding:"4px 8px",background:"var(--bg-dark)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontFamily:"var(--font-body)"}})]},le))]})]})})]})}function ZT({definition:s,onActivate:e,onDelete:n,streakInfo:a,shieldCount:o=0,onUseShield:u,unclaimedMilestones:h=[],onClaimMilestones:g,isActive:E}){const _=Ic(s.stat_effects),S=Object.entries(_).map(([z,G])=>`${G>0?"+":""}${G} ${z.slice(0,3)}`).join(" "),x=a?kj(a.currentStreak):null,w=a&&a.currentStreak>0,B=a?.isAtRisk&&!a?.shieldActive,H=a?.shieldActive,U=async z=>{z.stopPropagation(),u&&a&&await u(s.id)},V=async z=>{z.stopPropagation(),g&&await g(s.id)};return c.jsxs("div",{className:`${be.compactCard} ${s.type==="buff"?be.compactBuff:be.compactDebuff} ${E?be.cardActive:""}`,onClick:()=>!E&&e(s.id),children:[c.jsxs("div",{className:be.compactCardMain,children:[c.jsx("span",{className:be.compactIcon,children:s.icon}),c.jsxs("div",{className:be.compactInfo,children:[c.jsxs("div",{className:be.compactName,children:[s.name,x&&c.jsx("span",{className:be.compactMilestone,children:x.icon})]}),c.jsxs("div",{className:be.compactMeta,children:[ZM(s.duration_hours),"  ",S]})]}),w&&c.jsxs("div",{className:`${be.compactStreak} ${B?be.atRisk:""} ${H?be.shieldActive:""}`,children:[H?"":"",a.currentStreak]})]}),c.jsxs("div",{className:be.compactActions,children:[B&&o>0&&u&&c.jsx("button",{className:be.compactActionBtn,onClick:U,title:"Use Shield",children:""}),h.length>0&&g&&c.jsx("button",{className:`${be.compactActionBtn} ${be.claimBtn}`,onClick:V,title:"Claim Milestone",children:""}),c.jsx("button",{className:`${be.compactActionBtn} ${be.deleteBtn}`,onClick:z=>{z.stopPropagation(),n(s.id)},title:"Delete",children:""})]}),E&&c.jsx("div",{className:be.activeIndicator,children:"Active"})]})}const tU="_container_e9q7r_1",nU="_title_e9q7r_17",sU="_status_e9q7r_33",iU="_indicator_e9q7r_49",aU="_connected_e9q7r_61",rU="_disconnected_e9q7r_71",oU="_lastBackup_e9q7r_79",lU="_statusMessage_e9q7r_91",cU="_actions_e9q7r_121",uU="_button_e9q7r_135",dU="_buttonSecondary_e9q7r_167 _button_e9q7r_135",fU="_buttonDanger_e9q7r_187 _button_e9q7r_135",hU="_backupList_e9q7r_209",mU="_backupItem_e9q7r_233",pU="_backupName_e9q7r_255",_U="_backupDate_e9q7r_269",gU="_restoreButton_e9q7r_279",yU="_noBackups_e9q7r_307",EU="_tokenInputContainer_e9q7r_321",vU="_tokenHelp_e9q7r_329",TU="_tokenInput_e9q7r_321",bU="_tokenActions_e9q7r_393",It={container:tU,title:nU,status:sU,indicator:iU,connected:aU,disconnected:rU,lastBackup:oU,statusMessage:lU,actions:cU,button:uU,buttonSecondary:dU,buttonDanger:fU,backupList:hU,backupItem:mU,backupName:pU,backupDate:_U,restoreButton:gU,noBackups:yU,tokenInputContainer:EU,tokenHelp:vU,tokenInput:TU,tokenActions:bU};function SU(){const[s,e]=k.useState(!1),[n,a]=k.useState(!0),[o,u]=k.useState(null),[h,g]=k.useState(""),[E,_]=k.useState([]),[S,x]=k.useState(!1),[w,B]=k.useState(""),[H,U]=k.useState(!1),[V,z]=k.useState(!1),[G,K]=k.useState(""),ie=k.useCallback(()=>{e(ub()),u(db())},[]);k.useEffect(()=>{ie(),a(!1)},[ie]);const Ee=async()=>{if(!w.trim()){g("Please enter a GitHub token");return}g("Verifying token..."),await Rw(w.trim())?(Tw(w.trim()),e(!0),U(!1),B(""),g("Connected to GitHub!")):g("Invalid token. Please check and try again.")},ye=()=>{bw(),e(!1),u(null),g("Disconnected"),_([])},D=async()=>{g("Backing up...");try{const O=await pp(),j=await hb(O);j.success?(g(`Backup saved: ${j.fileName}`),u(new Date),await pb(7)):g(`Backup failed: ${j.error}`)}catch(O){g(`Backup failed: ${O instanceof Error?O.message:"Unknown error"}`)}},R=async()=>{if(x(!S),!S){g("Loading backups...");const O=await mb();_(O),g("")}},L=()=>{const O=G.trim();if(!O){g("Please enter a gist ID");return}const j=O.match(/([a-f0-9]{32})/i);j?(localStorage.setItem("github_gist_id",j[1]),g('Gist ID set! Click "Restore from Backup" to see backups.'),z(!1),K("")):g("Invalid gist ID. Paste the gist URL or ID.")},q=async O=>{if(confirm(`Restore from "${O}"? This will replace all current data.`)){g("Restoring...");try{const j=await Aw(O);j?(await ib(j),g("Restored successfully! Refreshing..."),setTimeout(()=>window.location.reload(),1500)):g("Failed to download backup")}catch(j){g(`Restore failed: ${j instanceof Error?j.message:"Unknown error"}`)}}},M=O=>{const j=O.match(/backup-(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})/);if(j){const[,Ae,Ze,Y,fe,we]=j;return`${Ae}-${Ze}-${Y} ${fe}:${we}`}return O};return n?c.jsx("div",{className:It.container,children:"Loading..."}):c.jsxs("div",{className:It.container,children:[c.jsx("h3",{className:It.title,children:"Cloud Backup (GitHub)"}),c.jsxs("div",{className:It.status,children:[c.jsx("span",{className:`${It.indicator} ${s?It.connected:It.disconnected}`}),c.jsx("span",{children:s?"Connected to GitHub":"Not connected"})]}),o&&c.jsxs("p",{className:It.lastBackup,children:["Last backup: ",o.toLocaleString()]}),h&&c.jsx("p",{className:It.statusMessage,children:h}),c.jsx("div",{className:It.actions,children:s?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:D,className:It.button,children:"Backup Now"}),c.jsx("button",{onClick:R,className:It.buttonSecondary,children:S?"Hide Backups":"Restore from Backup"}),c.jsx("button",{onClick:()=>z(!V),className:It.buttonSecondary,children:V?"Cancel":"Link Existing Gist"}),c.jsx("button",{onClick:ye,className:It.buttonDanger,children:"Disconnect"}),V&&c.jsxs("div",{className:It.tokenInputContainer,children:[c.jsx("p",{className:It.tokenHelp,children:"Paste your gist URL or ID to restore from an existing backup:"}),c.jsx("input",{type:"text",value:G,onChange:O=>K(O.target.value),placeholder:"https://gist.github.com/user/abc123... or just abc123...",className:It.tokenInput}),c.jsx("button",{onClick:L,className:It.button,children:"Link Gist"})]})]}):c.jsx(c.Fragment,{children:H?c.jsxs("div",{className:It.tokenInputContainer,children:[c.jsxs("p",{className:It.tokenHelp,children:["Create a token at ",c.jsx("a",{href:"https://github.com/settings/tokens/new?description=Goal%20Game%20Backup&scopes=gist",target:"_blank",rel:"noopener noreferrer",children:"GitHub Settings"})," with ",c.jsx("strong",{children:"gist"})," scope."]}),c.jsx("input",{type:"password",value:w,onChange:O=>B(O.target.value),placeholder:"Paste your GitHub token",className:It.tokenInput}),c.jsxs("div",{className:It.tokenActions,children:[c.jsx("button",{onClick:Ee,className:It.button,children:"Save Token"}),c.jsx("button",{onClick:()=>{U(!1),B("")},className:It.buttonSecondary,children:"Cancel"})]})]}):c.jsx("button",{onClick:()=>U(!0),className:It.button,children:"Connect GitHub"})})}),S&&E.length>0&&c.jsxs("div",{className:It.backupList,children:[c.jsx("h4",{children:"Available Backups (Last 7 kept)"}),E.map(O=>c.jsxs("div",{className:It.backupItem,children:[c.jsx("span",{className:It.backupName,children:M(O.fileName)}),c.jsxs("span",{className:It.backupDate,children:[Math.round(O.size/1024)," KB"]}),c.jsx("button",{onClick:()=>q(O.fileName),className:It.restoreButton,children:"Restore"})]},O.fileName))]}),S&&E.length===0&&c.jsx("p",{className:It.noBackups,children:"No backups found"})]})}const NU=[{value:null,label:"No reminder"},{value:0,label:"At event time"},{value:5,label:"5 minutes before"},{value:10,label:"10 minutes before"},{value:15,label:"15 minutes before"},{value:30,label:"30 minutes before"},{value:60,label:"1 hour before"}],xU="_settingsPanel_zjhn0_1",wU="_settingsTitle_zjhn0_9",AU="_settingsDescription_zjhn0_23",RU="_settingRow_zjhn0_35",CU="_settingLabel_zjhn0_59",IU="_iosInstructions_zjhn0_71",kU="_iosTitle_zjhn0_87",jU="_iosText_zjhn0_99",DU="_iosList_zjhn0_111",LU="_deniedMessage_zjhn0_135",OU="_errorMessage_zjhn0_137",MU="_statusIndicator_zjhn0_169",UU="_statusDot_zjhn0_187",VU="_reminderSelect_zjhn0_251",qU="_debugInfo_zjhn0_317",BU="_debugLabel_zjhn0_335",PU="_debugToken_zjhn0_349",FU="_debugError_zjhn0_363",Ht={settingsPanel:xU,settingsTitle:wU,settingsDescription:AU,settingRow:RU,settingLabel:CU,iosInstructions:IU,iosTitle:kU,iosText:jU,iosList:DU,deniedMessage:LU,errorMessage:OU,statusIndicator:MU,statusDot:UU,reminderSelect:VU,debugInfo:qU,debugLabel:BU,debugToken:PU,debugError:FU};function GU(){const{settings:s,permissionState:e,isSupported:n,isConfigured:a,canEnable:o,isIOS:u,isStandalone:h,loading:g,error:E,enableNotifications:_,disableNotificationsHandler:S,setDefaultReminderMinutes:x}=O1();return a?n?c.jsxs(wt,{className:Ht.settingsPanel,children:[c.jsx("h3",{className:Ht.settingsTitle,children:"Push Notifications"}),u&&!h&&c.jsxs("div",{className:Ht.iosInstructions,children:[c.jsx("p",{className:Ht.iosTitle,children:"iOS Setup Required"}),c.jsx("p",{className:Ht.iosText,children:"To receive push notifications on iOS, you need to add this app to your home screen first:"}),c.jsxs("ol",{className:Ht.iosList,children:[c.jsx("li",{children:"Tap the Share button in Safari"}),c.jsx("li",{children:'Select "Add to Home Screen"'}),c.jsx("li",{children:"Open the app from your home screen"}),c.jsx("li",{children:"Then enable notifications here"})]})]}),e==="denied"&&c.jsx("div",{className:Ht.deniedMessage,children:c.jsx("p",{children:"Notifications are blocked. Please enable them in your browser settings."})}),E&&c.jsx("div",{className:Ht.errorMessage,children:c.jsx("p",{children:E})}),c.jsxs("div",{className:Ht.settingRow,children:[c.jsx("span",{className:Ht.settingLabel,children:"Event Reminders"}),s.enabled?c.jsx(Pe,{variant:"danger",size:"small",onClick:S,disabled:g,children:g?"Disabling...":"Disable"}):c.jsx(Pe,{variant:"primary",size:"small",onClick:_,disabled:g||!o||e==="denied",children:g?"Enabling...":"Enable"})]}),s.enabled&&c.jsxs("div",{className:Ht.settingRow,children:[c.jsx("span",{className:Ht.settingLabel,children:"Default Reminder"}),c.jsx("select",{className:Ht.reminderSelect,value:s.defaultReminderMinutes,onChange:w=>x(Number(w.target.value)),children:NU.filter(w=>w.value!==null).map(w=>c.jsx("option",{value:w.value,children:w.label},w.value))})]}),s.enabled&&c.jsxs("div",{className:Ht.statusIndicator,children:[c.jsx("span",{className:Ht.statusDot}),"Notifications enabled"]}),s.enabled&&c.jsxs("div",{className:Ht.debugInfo,children:[c.jsx("p",{className:Ht.debugLabel,children:"Token Status:"}),s.fcmToken?c.jsxs("p",{className:Ht.debugToken,children:[s.fcmToken.substring(0,20),"...",s.fcmToken.substring(s.fcmToken.length-10)]}):c.jsx("p",{className:Ht.debugError,children:"No token - notifications will not work!"}),c.jsxs("p",{className:Ht.debugLabel,children:["Device ID: ",s.deviceId.substring(0,8),"..."]})]}),s.enabled&&!s.fcmToken&&c.jsx("div",{className:Ht.errorMessage,children:c.jsx("p",{children:"Token missing! Try: Disable  Wait 5 sec  Re-enable"})})]}):c.jsxs(wt,{className:Ht.settingsPanel,children:[c.jsx("h3",{className:Ht.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Ht.settingsDescription,children:"Push notifications are not supported in this browser."})]}):c.jsxs(wt,{className:Ht.settingsPanel,children:[c.jsx("h3",{className:Ht.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Ht.settingsDescription,children:"Push notifications are not configured. To enable them, add your Firebase configuration to the .env file."})]})}const HU="_dailyQuestsPanel_1fkrh_1",zU="_questsList_1fkrh_55",XU="_questItem_1fkrh_67",$U="_completed_1fkrh_89",YU="_questItemHeader_1fkrh_99",QU="_questCheckbox_1fkrh_111",KU="_questInfo_1fkrh_149",WU="_questTitleRow_1fkrh_159",JU="_questName_1fkrh_173",ZU="_questXp_1fkrh_193",e6="_questDescription_1fkrh_223",t6="_progressContainer_1fkrh_235",n6="_progressBar_1fkrh_247",s6="_progressFill_1fkrh_263",i6="_progressText_1fkrh_285",a6="_bonusSection_1fkrh_303",r6="_available_1fkrh_321",o6="_claimed_1fkrh_329",l6="_bonusTitle_1fkrh_349",c6="_bonusDescription_1fkrh_371",u6="_bonusXp_1fkrh_383",d6="_claimButton_1fkrh_403",f6="_loading_1fkrh_413",h6="_emptyState_1fkrh_429",m6="_compactPanel_1fkrh_445",p6="_questItemCompact_1fkrh_457",_6="_questCheckboxCompact_1fkrh_489",g6="_questNameCompact_1fkrh_511",y6="_progressBarCompact_1fkrh_541",E6="_progressFillCompact_1fkrh_559",v6="_progressTextCompact_1fkrh_581",T6="_compactBonus_1fkrh_595",b6="_compactBonusClaimed_1fkrh_629",ht={dailyQuestsPanel:HU,questsList:zU,questItem:XU,completed:$U,questItemHeader:YU,questCheckbox:QU,questInfo:KU,questTitleRow:WU,questName:JU,questXp:ZU,questDescription:e6,progressContainer:t6,progressBar:n6,progressFill:s6,progressText:i6,bonusSection:a6,available:r6,claimed:o6,bonusTitle:l6,bonusDescription:c6,bonusXp:u6,claimButton:d6,loading:f6,emptyState:h6,compactPanel:m6,questItemCompact:p6,questCheckboxCompact:_6,questNameCompact:g6,progressBarCompact:y6,progressFillCompact:E6,progressTextCompact:v6,compactBonus:T6,compactBonusClaimed:b6};function S6({quests:s,loading:e,allCompleted:n,completedCount:a,bonusClaimed:o,bonusXp:u,onClaimBonus:h,compact:g=!1}){const[E,_]=k.useState(!1);if(g)return e?c.jsx("div",{className:ht.loading,children:"Loading daily quests..."}):s.length===0?c.jsx("div",{className:ht.emptyState,children:"No daily quests available"}):c.jsxs("div",{className:ht.compactPanel,children:[c.jsx("div",{className:ht.questsList,children:s.map(x=>c.jsx(eb,{quest:x,compact:!0},x.id))}),n&&!o&&c.jsxs("div",{className:ht.compactBonus,children:[c.jsx("span",{children:"All quests complete!"}),c.jsxs(Pe,{size:"small",onClick:h,children:["Claim +",u," XP"]})]}),o&&c.jsxs("div",{className:ht.compactBonusClaimed,children:[" Bonus claimed! +",u," XP"]})]});const S=e?"Daily Quests (Loading...)":`Daily Quests (${a}/${s.length})${n&&!o?" - Bonus Ready!":""}`;return c.jsxs("div",{className:ht.dailyQuestsPanel,children:[c.jsx(Pe,{size:"small",variant:n&&!o?"primary":void 0,onClick:()=>_(!E),style:{width:"100%",marginBottom:E?8:0},children:E?"Hide Daily Quests":S}),E&&c.jsx(wt,{glow:n&&!o,children:e?c.jsx("div",{className:ht.loading,children:"Loading daily quests..."}):s.length===0?c.jsx("div",{className:ht.emptyState,children:"No daily quests available"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:ht.questsList,children:s.map(x=>c.jsx(eb,{quest:x},x.id))}),c.jsxs("div",{className:`${ht.bonusSection} ${n&&!o?ht.available:o?ht.claimed:""}`,children:[c.jsx("div",{className:ht.bonusTitle,children:o?"Bonus Claimed!":"Complete All Quests"}),c.jsx("div",{className:ht.bonusDescription,children:o?"Great work! See you tomorrow.":"Finish all 3 quests to earn a bonus"}),c.jsxs("div",{className:ht.bonusXp,children:["+",u," XP"]}),n&&!o&&c.jsx(Pe,{className:ht.claimButton,size:"small",onClick:h,children:"Claim Bonus"})]})]})})]})}function eb({quest:s,compact:e=!1}){const n=Math.min(s.current_value/s.target_value*100,100);return e?c.jsxs("div",{className:`${ht.questItemCompact} ${s.is_completed?ht.completed:""}`,children:[c.jsx("div",{className:ht.questCheckboxCompact,children:s.is_completed?"":""}),c.jsx("span",{className:ht.questNameCompact,children:s.title}),c.jsx("div",{className:ht.progressBarCompact,children:c.jsx("div",{className:ht.progressFillCompact,style:{width:`${n}%`}})}),c.jsxs("span",{className:ht.progressTextCompact,children:[s.current_value,"/",s.target_value]})]}):c.jsxs("div",{className:`${ht.questItem} ${s.is_completed?ht.completed:""}`,children:[c.jsxs("div",{className:ht.questItemHeader,children:[c.jsx("div",{className:ht.questCheckbox,children:s.is_completed&&c.jsx("span",{children:""})}),c.jsxs("div",{className:ht.questInfo,children:[c.jsxs("div",{className:ht.questTitleRow,children:[c.jsx("span",{className:ht.questName,children:s.title}),c.jsxs("span",{className:ht.questXp,children:["+",s.xp_reward," XP"]})]}),c.jsx("div",{className:ht.questDescription,children:s.description})]})]}),c.jsxs("div",{className:ht.progressContainer,children:[c.jsx("div",{className:ht.progressBar,children:c.jsx("div",{className:ht.progressFill,style:{width:`${n}%`}})}),c.jsxs("span",{className:ht.progressText,children:[s.current_value,"/",s.target_value]})]})]})}const N6="_bossPage_17wbd_1",x6="_loadingState_17wbd_13",w6="_weekHeader_17wbd_31",A6="_weekLabel_17wbd_51",R6="_weekDates_17wbd_67",C6="_victoryBanner_17wbd_79",I6="_victoryContent_17wbd_105",k6="_victoryIcon_17wbd_119",j6="_victoryText_17wbd_127",D6="_victoryTitle_17wbd_137",L6="_victorySubtitle_17wbd_153",O6="_victoryRewards_17wbd_165",M6="_rewardItem_17wbd_175",U6="_battleArena_17wbd_197",V6="_fighterCard_17wbd_249",q6="_fighterSprite_17wbd_277",B6="_bossSprite_17wbd_293",P6="_bossIcon_17wbd_311",F6="_bossAura_17wbd_327",G6="_defeated_17wbd_371",H6="_fighterDetails_17wbd_389",z6="_fighterName_17wbd_399",X6="_bossNameColor_17wbd_413",$6="_fighterTitle_17wbd_421",Y6="_fighterXP_17wbd_435",Q6="_bossHP_17wbd_437",K6="_xpText_17wbd_449",W6="_hpBarContainer_17wbd_461",J6="_hpBar_17wbd_461",Z6="_lowHP_17wbd_491",e9="_hpText_17wbd_511",t9="_vsSection_17wbd_525",n9="_vsGlow_17wbd_547",s9="_vsText_17wbd_575",i9="_damageCounter_17wbd_595",a9="_damageValue_17wbd_611",r9="_damageLabel_17wbd_623",o9="_statsGrid_17wbd_639",l9="_statCard_17wbd_651",c9="_statIcon_17wbd_669",u9="_statValue_17wbd_677",d9="_statLabel_17wbd_689",f9="_damageGuide_17wbd_703",h9="_guideText_17wbd_711",m9="_damageGrid_17wbd_725",p9="_damageItem_17wbd_737",_9="_damageAction_17wbd_755",g9="_damageAmount_17wbd_765",y9="_healSection_17wbd_779",E9="_healTitle_17wbd_791",v9="_healGrid_17wbd_807",T9="_healItem_17wbd_819",b9="_healAction_17wbd_839",S9="_healAmount_17wbd_849",N9="_bestiary_17wbd_863",x9="_bestiaryText_17wbd_871",w9="_bestiaryGrid_17wbd_883",A9="_bestiaryItem_17wbd_895",R9="_currentBoss_17wbd_917",C9="_bestiaryIcon_17wbd_927",I9="_bestiaryInfo_17wbd_937",k9="_bestiaryName_17wbd_947",j9="_bestiaryDesc_17wbd_959",D9="_bestiaryStats_17wbd_973",ve={bossPage:N6,loadingState:x6,weekHeader:w6,weekLabel:A6,weekDates:R6,victoryBanner:C6,victoryContent:I6,victoryIcon:k6,victoryText:j6,victoryTitle:D6,victorySubtitle:L6,victoryRewards:O6,rewardItem:M6,battleArena:U6,fighterCard:V6,fighterSprite:q6,bossSprite:B6,bossIcon:P6,bossAura:F6,defeated:G6,fighterDetails:H6,fighterName:z6,bossNameColor:X6,fighterTitle:$6,fighterXP:Y6,bossHP:Q6,xpText:K6,hpBarContainer:W6,hpBar:J6,lowHP:Z6,hpText:e9,vsSection:t9,vsGlow:n9,vsText:s9,damageCounter:i9,damageValue:a9,damageLabel:r9,statsGrid:o9,statCard:l9,statIcon:c9,statValue:u9,statLabel:d9,damageGuide:f9,guideText:h9,damageGrid:m9,damageItem:p9,damageAction:_9,damageAmount:g9,healSection:y9,healTitle:E9,healGrid:v9,healItem:T9,healAction:b9,healAmount:S9,bestiary:N9,bestiaryText:x9,bestiaryGrid:w9,bestiaryItem:A9,currentBoss:R9,bestiaryIcon:C9,bestiaryInfo:I9,bestiaryName:k9,bestiaryDesc:j9,bestiaryStats:D9};function L9({character:s,stats:e,boss:n,loading:a,hpPercentage:o,damageDealt:u,totalDefeated:h,weekStart:g,weekEnd:E}){const _=Ld(s.total_xp),S=w=>new Date(w+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});if(a)return c.jsx("div",{className:ve.bossPage,children:c.jsx("div",{className:ve.loadingState,children:"Summoning this week's boss..."})});if(!n)return c.jsx("div",{className:ve.bossPage,children:c.jsx("div",{className:ve.loadingState,children:"No boss found this week"})});const x=n.is_defeated;return c.jsxs("div",{className:ve.bossPage,children:[c.jsxs("div",{className:ve.weekHeader,children:[c.jsx("span",{className:ve.weekLabel,children:"This Week's Challenge"}),c.jsxs("span",{className:ve.weekDates,children:[S(g),"  ",S(E)]})]}),x&&c.jsx("div",{className:ve.victoryBanner,children:c.jsxs("div",{className:ve.victoryContent,children:[c.jsx("span",{className:ve.victoryIcon,children:""}),c.jsxs("div",{className:ve.victoryText,children:[c.jsx("div",{className:ve.victoryTitle,children:"Victory!"}),c.jsxs("div",{className:ve.victorySubtitle,children:["You defeated ",n.name," this week!"]})]}),c.jsxs("div",{className:ve.victoryRewards,children:[c.jsxs("span",{className:ve.rewardItem,children:["+",n.xp_reward," XP"]}),n.bonus_shields>0&&c.jsxs("span",{className:ve.rewardItem,children:["+",n.bonus_shields," Shield",n.bonus_shields>1?"s":""]})]})]})}),c.jsxs("div",{className:ve.battleArena,children:[c.jsxs("div",{className:ve.fighterCard,children:[c.jsx("div",{className:ve.fighterSprite,children:c.jsx(h_,{level:s.level,stats:e,size:"large"})}),c.jsxs("div",{className:ve.fighterDetails,children:[c.jsx("div",{className:ve.fighterName,children:s.name}),c.jsxs("div",{className:ve.fighterTitle,children:["Level ",s.level," ",s.title]}),c.jsxs("div",{className:ve.fighterXP,children:[c.jsx(yl,{value:_.current,max:_.needed,color:"gold",showValue:!1}),c.jsxs("span",{className:ve.xpText,children:[_.current," / ",_.needed," XP"]})]})]})]}),c.jsxs("div",{className:ve.vsSection,children:[c.jsx("div",{className:ve.vsGlow}),c.jsx("div",{className:ve.vsText,children:"VS"}),c.jsxs("div",{className:ve.damageCounter,children:[c.jsx("div",{className:ve.damageValue,children:u}),c.jsx("div",{className:ve.damageLabel,children:"Total Damage"})]})]}),c.jsxs("div",{className:ve.fighterCard,children:[c.jsxs("div",{className:`${ve.bossSprite} ${x?ve.defeated:""}`,children:[c.jsx("span",{className:ve.bossIcon,children:n.icon}),!x&&c.jsx("div",{className:ve.bossAura})]}),c.jsxs("div",{className:ve.fighterDetails,children:[c.jsx("div",{className:`${ve.fighterName} ${ve.bossNameColor}`,children:n.name}),c.jsx("div",{className:ve.fighterTitle,children:n.description}),c.jsxs("div",{className:ve.bossHP,children:[c.jsx("div",{className:ve.hpBarContainer,children:c.jsx("div",{className:`${ve.hpBar} ${o<30?ve.lowHP:""}`,style:{width:`${o}%`}})}),c.jsxs("span",{className:ve.hpText,children:[n.current_hp," / ",n.max_hp," HP"]})]})]})]})]}),c.jsxs("div",{className:ve.statsGrid,children:[c.jsxs(wt,{className:ve.statCard,children:[c.jsx("div",{className:ve.statIcon,children:""}),c.jsx("div",{className:ve.statValue,children:u}),c.jsx("div",{className:ve.statLabel,children:"Damage This Week"})]}),c.jsxs(wt,{className:ve.statCard,children:[c.jsx("div",{className:ve.statIcon,children:""}),c.jsx("div",{className:ve.statValue,children:h}),c.jsx("div",{className:ve.statLabel,children:"Bosses Defeated"})]}),c.jsxs(wt,{className:ve.statCard,children:[c.jsx("div",{className:ve.statIcon,children:""}),c.jsxs("div",{className:ve.statValue,children:["+",n.xp_reward]}),c.jsx("div",{className:ve.statLabel,children:"XP Reward"})]}),c.jsxs(wt,{className:ve.statCard,children:[c.jsx("div",{className:ve.statIcon,children:""}),c.jsx("div",{className:ve.statValue,children:n.bonus_shields}),c.jsx("div",{className:ve.statLabel,children:"Shield Reward"})]})]}),!x&&c.jsxs(wt,{header:"How to Deal Damage",className:ve.damageGuide,children:[c.jsx("div",{className:ve.guideText,children:"Complete tasks to deal damage to the boss. Defeat the boss before the week ends to earn rewards!"}),c.jsxs("div",{className:ve.damageGrid,children:[c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Complete Step"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.step_completed," HP"]})]}),c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Activate Buff"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.buff_activated," HP"]})]}),c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Complete Quest"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.quest_completed," HP"]})]}),c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Complete Goal"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.goal_completed," HP"]})]}),c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Daily Quest"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.daily_quest_completed," HP"]})]}),c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Focus Session"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.focus_session," HP"]})]}),c.jsxs("div",{className:ve.damageItem,children:[c.jsx("span",{className:ve.damageAction,children:" Complete Routine"}),c.jsxs("span",{className:ve.damageAmount,children:["-",cr.routine_completed," HP"]})]})]}),c.jsxs("div",{className:ve.healSection,children:[c.jsx("div",{className:ve.healTitle,children:"Boss Heals When..."}),c.jsxs("div",{className:ve.healGrid,children:[c.jsxs("div",{className:ve.healItem,children:[c.jsx("span",{className:ve.healAction,children:" Activate Debuff"}),c.jsxs("span",{className:ve.healAmount,children:["+",up.debuff_activated," HP"]})]}),c.jsxs("div",{className:ve.healItem,children:[c.jsx("span",{className:ve.healAction,children:" Miss a Step"}),c.jsxs("span",{className:ve.healAmount,children:["+",up.step_missed," HP"]})]})]})]})]}),c.jsxs(wt,{header:"Boss Bestiary",className:ve.bestiary,children:[c.jsx("div",{className:ve.bestiaryText,children:"Face different bosses each week, each representing challenges to overcome."}),c.jsx("div",{className:ve.bestiaryGrid,children:cp.map(w=>c.jsxs("div",{className:`${ve.bestiaryItem} ${n.boss_type===w.type?ve.currentBoss:""}`,children:[c.jsx("span",{className:ve.bestiaryIcon,children:w.icon}),c.jsxs("div",{className:ve.bestiaryInfo,children:[c.jsx("div",{className:ve.bestiaryName,children:w.name}),c.jsx("div",{className:ve.bestiaryDesc,children:w.description}),c.jsxs("div",{className:ve.bestiaryStats,children:[c.jsxs("span",{children:["HP: ",w.hpRange[0],"-",w.hpRange[1]]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["+",w.xpReward," XP"]}),w.bonusShields>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("span",{children:["+",w.bonusShields," Shield"]})]})]})]})]},w.type))})]})]})}const O9="_achievementPanel_13bl3_1",M9="_statsBar_13bl3_13",U9="_statItem_13bl3_33",V9="_statValue_13bl3_47",q9="_statLabel_13bl3_59",B9="_progressBarContainer_13bl3_73",P9="_progressLabel_13bl3_85",F9="_progressTrack_13bl3_99",G9="_progressFill_13bl3_115",H9="_categoryTabs_13bl3_129",z9="_categoryTab_13bl3_129",X9="_active_13bl3_183",$9="_categoryIcon_13bl3_195",Y9="_categoryCount_13bl3_203",Q9="_achievementGrid_13bl3_219",K9="_achievementCard_13bl3_231",W9="_unlocked_13bl3_261",J9="_locked_13bl3_271",Z9="_hidden_13bl3_279",eV="_achievementIcon_13bl3_287",tV="_achievementInfo_13bl3_335",nV="_achievementName_13bl3_345",sV="_achievementDesc_13bl3_367",iV="_achievementMeta_13bl3_379",aV="_achievementXp_13bl3_393",rV="_achievementProgress_13bl3_409",oV="_achievementProgressTrack_13bl3_423",lV="_achievementProgressFill_13bl3_441",cV="_achievementProgressText_13bl3_455",uV="_achievementUnlockDate_13bl3_469",dV="_emptyState_13bl3_479",fV="_unlockModal_13bl3_531",hV="_unlockIcon_13bl3_539",mV="_unlockTitle_13bl3_551",pV="_unlockDesc_13bl3_565",_V="_unlockReward_13bl3_577",ot={achievementPanel:O9,statsBar:M9,statItem:U9,statValue:V9,statLabel:q9,progressBarContainer:B9,progressLabel:P9,progressTrack:F9,progressFill:G9,categoryTabs:H9,categoryTab:z9,active:X9,categoryIcon:$9,categoryCount:Y9,achievementGrid:Q9,achievementCard:K9,unlocked:W9,locked:J9,hidden:Z9,achievementIcon:eV,achievementInfo:tV,achievementName:nV,achievementDesc:sV,achievementMeta:iV,achievementXp:aV,achievementProgress:rV,achievementProgressTrack:oV,achievementProgressFill:lV,achievementProgressText:cV,achievementUnlockDate:uV,emptyState:dV,unlockModal:fV,unlockIcon:hV,unlockTitle:mV,unlockDesc:pV,unlockReward:_V},gV=["quests","buffs","streaks","boss","levels","special"];function yV({achievements:s,stats:e,loading:n,compact:a=!1}){const[o,u]=k.useState("all"),h=o==="all"?s:s.filter(_=>_.category===o),g=_=>{const S=s.filter(w=>w.category===_);return{unlocked:S.filter(w=>w.unlocked).length,total:S.length}},E=e.total>0?Math.round(e.unlocked/e.total*100):0;return n?c.jsx(wt,{header:"Achievements",children:c.jsx("div",{className:ot.emptyState,children:"Loading achievements..."})}):c.jsx(wt,{header:"Achievements",glow:!0,children:c.jsxs("div",{className:ot.achievementPanel,children:[c.jsxs("div",{className:ot.statsBar,children:[c.jsxs("div",{className:ot.statItem,children:[c.jsx("span",{className:ot.statValue,children:e.unlocked}),c.jsx("span",{className:ot.statLabel,children:"Unlocked"})]}),c.jsxs("div",{className:ot.progressBarContainer,children:[c.jsxs("div",{className:ot.progressLabel,children:[E,"% Complete"]}),c.jsx("div",{className:ot.progressTrack,children:c.jsx("div",{className:ot.progressFill,style:{width:`${E}%`}})})]}),c.jsxs("div",{className:ot.statItem,children:[c.jsx("span",{className:ot.statValue,children:e.earnedXp}),c.jsx("span",{className:ot.statLabel,children:"XP Earned"})]})]}),c.jsxs("div",{className:ot.categoryTabs,children:[c.jsxs("button",{className:`${ot.categoryTab} ${o==="all"?ot.active:""}`,onClick:()=>u("all"),children:[c.jsx("span",{className:ot.categoryIcon,children:""}),"All",c.jsxs("span",{className:ot.categoryCount,children:[e.unlocked,"/",e.total]})]}),gV.map(_=>{const S=g(_);return S.total===0?null:c.jsxs("button",{className:`${ot.categoryTab} ${o===_?ot.active:""}`,onClick:()=>u(_),children:[c.jsx("span",{className:ot.categoryIcon,children:ix[_]}),sx[_],c.jsxs("span",{className:ot.categoryCount,children:[S.unlocked,"/",S.total]})]},_)})]}),h.length===0?c.jsx("div",{className:ot.emptyState,children:"No achievements in this category yet"}):c.jsx("div",{className:ot.achievementGrid,children:h.map(_=>c.jsx(EV,{achievement:_},_.id))})]})})}function EV({achievement:s}){const e=`${ot.achievementCard} ${s.unlocked?ot.unlocked:ot.locked} ${s.is_hidden&&!s.unlocked?ot.hidden:""}`,n=a=>new Date(a+"Z").toLocaleDateString();return c.jsxs("div",{className:e,children:[c.jsx("div",{className:ot.achievementIcon,children:s.icon}),c.jsxs("div",{className:ot.achievementInfo,children:[c.jsx("div",{className:ot.achievementName,children:s.is_hidden&&!s.unlocked?"???":s.name}),c.jsx("div",{className:ot.achievementDesc,children:s.is_hidden&&!s.unlocked?"Hidden achievement":s.description}),c.jsxs("div",{className:ot.achievementMeta,children:[c.jsxs("span",{className:ot.achievementXp,children:["+",s.xp_reward," XP"]}),s.unlocked?c.jsxs("span",{className:ot.achievementUnlockDate,children:["Unlocked ",n(s.unlocked_at)]}):c.jsxs("div",{className:ot.achievementProgress,children:[c.jsx("div",{className:ot.achievementProgressTrack,children:c.jsx("div",{className:ot.achievementProgressFill,style:{width:`${s.progress_percent}%`}})}),c.jsxs("span",{className:ot.achievementProgressText,children:[s.current_value,"/",s.requirement_value]})]})]})]})]})}function vV({unlock:s,onDismiss:e}){return s?c.jsx(Rl,{open:!0,onClose:e,title:"Achievement Unlocked!",actions:c.jsx(Pe,{variant:"primary",onClick:e,children:"Awesome!"}),children:c.jsxs("div",{className:ot.unlockModal,children:[c.jsx("div",{className:ot.unlockIcon,children:s.achievement.icon}),c.jsx("div",{className:ot.unlockTitle,children:s.achievement.name}),c.jsx("div",{className:ot.unlockDesc,children:s.achievement.description}),c.jsxs("div",{className:ot.unlockReward,children:["+",s.xpAwarded," XP"]})]})}):null}const TV="_focusTimerPanel_clj8g_1",bV="_timerContainer_clj8g_13",SV="_timerCircleWrapper_clj8g_33",NV="_timerCircle_clj8g_33",xV="_timerCircleBg_clj8g_55",wV="_timerCircleProgress_clj8g_67",AV="_work_clj8g_81",RV="_shortBreak_clj8g_89",CV="_longBreak_clj8g_97",IV="_idle_clj8g_105",kV="_timerDisplay_clj8g_113",jV="_timerTime_clj8g_129",DV="_timerPhase_clj8g_143",LV="_timerControls_clj8g_181",OV="_sessionCount_clj8g_191",MV="_sessionDot_clj8g_209",UV="_completed_clj8g_225",VV="_active_clj8g_235",qV="_statsGrid_clj8g_247",BV="_statCard_clj8g_259",PV="_statIcon_clj8g_279",FV="_statValue_clj8g_289",GV="_statLabel_clj8g_301",HV="_settingsGrid_clj8g_319",zV="_settingItem_clj8g_331",XV="_settingLabel_clj8g_343",$V="_settingInput_clj8g_353",YV="_toggleRow_clj8g_383",QV="_toggleLabel_clj8g_407",KV="_toggle_clj8g_383",WV="_toggleKnob_clj8g_449",JV="_sessionList_clj8g_483",ZV="_sessionItem_clj8g_495",eq="_cancelled_clj8g_523",tq="_sessionTime_clj8g_533",nq="_sessionInfo_clj8g_547",sq="_sessionXp_clj8g_559",Ie={focusTimerPanel:TV,timerContainer:bV,timerCircleWrapper:SV,timerCircle:NV,timerCircleBg:xV,timerCircleProgress:wV,work:AV,shortBreak:RV,longBreak:CV,idle:IV,timerDisplay:kV,timerTime:jV,timerPhase:DV,timerControls:LV,sessionCount:OV,sessionDot:MV,completed:UV,active:VV,statsGrid:qV,statCard:BV,statIcon:PV,statValue:FV,statLabel:GV,settingsGrid:HV,settingItem:zV,settingLabel:XV,settingInput:$V,toggleRow:YV,toggleLabel:QV,toggle:KV,toggleKnob:WV,sessionList:JV,sessionItem:ZV,cancelled:eq,sessionTime:tq,sessionInfo:nq,sessionXp:sq};function iq({timeRemaining:s,totalTime:e,phase:n,formattedTime:a}){const g=192*Math.PI,E=e>0?s/e:1,_=g*(1-E),S={work:"Focus",short_break:"Short Break",long_break:"Long Break",idle:"Ready"}[n];return c.jsxs("div",{className:Ie.timerCircleWrapper,children:[c.jsxs("svg",{className:Ie.timerCircle,width:200,height:200,children:[c.jsx("circle",{className:Ie.timerCircleBg,cx:200/2,cy:200/2,r:96}),c.jsx("circle",{className:`${Ie.timerCircleProgress} ${n==="work"?Ie.work:n==="short_break"?Ie.shortBreak:n==="long_break"?Ie.longBreak:Ie.idle}`,cx:200/2,cy:200/2,r:96,strokeDasharray:g,strokeDashoffset:_})]}),c.jsxs("div",{className:Ie.timerDisplay,children:[c.jsx("div",{className:Ie.timerTime,children:a}),c.jsx("div",{className:`${Ie.timerPhase} ${n==="work"?Ie.work:n==="short_break"?Ie.shortBreak:n==="long_break"?Ie.longBreak:""}`,children:S})]})]})}function aq({settings:s,onUpdateSettings:e}){return c.jsxs(wt,{header:"Timer Settings",children:[c.jsxs("div",{className:Ie.settingsGrid,children:[c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Work Duration (min)"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:s.work_duration,onChange:n=>e({work_duration:Number(n.target.value)}),min:1,max:120})]}),c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Short Break (min)"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:s.short_break,onChange:n=>e({short_break:Number(n.target.value)}),min:1,max:30})]}),c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Long Break (min)"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:s.long_break,onChange:n=>e({long_break:Number(n.target.value)}),min:1,max:60})]}),c.jsxs("div",{className:Ie.settingItem,children:[c.jsx("label",{className:Ie.settingLabel,children:"Sessions Before Long Break"}),c.jsx("input",{type:"number",className:Ie.settingInput,value:s.sessions_before_long_break,onChange:n=>e({sessions_before_long_break:Number(n.target.value)}),min:1,max:10})]})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{className:Ie.toggleRow,children:[c.jsx("span",{className:Ie.toggleLabel,children:"Auto-start breaks"}),c.jsx("div",{className:`${Ie.toggle} ${s.auto_start_breaks?Ie.active:""}`,onClick:()=>e({auto_start_breaks:!s.auto_start_breaks}),children:c.jsx("div",{className:Ie.toggleKnob})})]}),c.jsxs("div",{className:Ie.toggleRow,children:[c.jsx("span",{className:Ie.toggleLabel,children:"Sound notifications"}),c.jsx("div",{className:`${Ie.toggle} ${s.sound_enabled?Ie.active:""}`,onClick:()=>e({sound_enabled:!s.sound_enabled}),children:c.jsx("div",{className:Ie.toggleKnob})})]})]})]})}function rq({settings:s,stats:e,timerState:n,recentSessions:a,onStartWork:o,onStartBreak:u,onPause:h,onResume:g,onStop:E,onSkipBreak:_,onUpdateSettings:S,formatTime:x}){const[w,B]=k.useState(!1),H=()=>{switch(n.phase){case"work":return s.work_duration*60;case"short_break":return s.short_break*60;case"long_break":return s.long_break*60;default:return s.work_duration*60}},U=s.sessions_before_long_break-n.sessionsCompleted%s.sessions_before_long_break;return c.jsxs("div",{className:Ie.focusTimerPanel,children:[c.jsx(wt,{header:"Focus Timer",glow:!0,children:c.jsxs("div",{className:Ie.timerContainer,children:[c.jsx(iq,{timeRemaining:n.timeRemaining,totalTime:H(),phase:n.phase,formattedTime:x(n.timeRemaining)}),c.jsxs("div",{className:Ie.timerControls,children:[n.phase==="idle"&&c.jsx(Pe,{variant:"primary",onClick:()=>o(),children:"Start Focus"}),n.phase==="work"&&n.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Pe,{variant:"ghost",onClick:h,children:"Pause"}),c.jsx(Pe,{variant:"danger",onClick:E,children:"Stop"})]}),n.phase==="work"&&!n.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Pe,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Pe,{variant:"danger",onClick:E,children:"Stop"})]}),(n.phase==="short_break"||n.phase==="long_break")&&c.jsxs(c.Fragment,{children:[n.isRunning?c.jsx(Pe,{variant:"ghost",onClick:h,children:"Pause"}):c.jsx(Pe,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Pe,{variant:"ghost",onClick:_,children:"Skip Break"})]})]}),c.jsxs("div",{className:Ie.sessionCount,children:[Array.from({length:s.sessions_before_long_break}).map((V,z)=>c.jsx("div",{className:`${Ie.sessionDot} ${z<n.sessionsCompleted%s.sessions_before_long_break?Ie.completed:""} ${z===n.sessionsCompleted%s.sessions_before_long_break&&n.phase==="work"?Ie.active:""}`},z)),c.jsxs("span",{style:{marginLeft:8},children:[U," until long break"]})]})]})}),c.jsxs("div",{className:Ie.statsGrid,children:[c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsx("span",{className:Ie.statValue,children:e.total_sessions}),c.jsx("span",{className:Ie.statLabel,children:"Total Sessions"})]}),c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsxs("span",{className:Ie.statValue,children:[Math.round(e.total_minutes/60),"h"]}),c.jsx("span",{className:Ie.statLabel,children:"Total Focus"})]}),c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsx("span",{className:Ie.statValue,children:e.current_streak}),c.jsx("span",{className:Ie.statLabel,children:"Current Streak"})]}),c.jsxs("div",{className:Ie.statCard,children:[c.jsx("span",{className:Ie.statIcon,children:""}),c.jsx("span",{className:Ie.statValue,children:e.today_sessions}),c.jsx("span",{className:Ie.statLabel,children:"Today"})]})]}),c.jsx(Pe,{variant:"ghost",size:"small",onClick:()=>B(!w),children:w?"Hide Settings":"Timer Settings"}),w&&c.jsx(aq,{settings:s,onUpdateSettings:S}),a.length>0&&c.jsx(wt,{header:"Recent Sessions",children:c.jsx("div",{className:Ie.sessionList,children:a.slice(0,5).map(V=>c.jsxs("div",{className:`${Ie.sessionItem} ${V.status==="completed"?Ie.completed:Ie.cancelled}`,children:[c.jsxs("span",{className:Ie.sessionTime,children:[V.duration_minutes,"m"]}),c.jsx("span",{className:Ie.sessionInfo,children:new Date(V.started_at+"Z").toLocaleString()}),V.status==="completed"&&V.xp_earned>0&&c.jsxs("span",{className:Ie.sessionXp,children:["+",V.xp_earned," XP"]})]},V.id))})})]})}const oq="_routinePanel_1b2ro_1",lq="_routineGrid_1b2ro_13",cq="_routineCard_1b2ro_25",uq="_morning_1b2ro_53",dq="_evening_1b2ro_61",fq="_custom_1b2ro_69",hq="_completed_1b2ro_77",mq="_routineHeader_1b2ro_87",pq="_routineInfo_1b2ro_101",_q="_routineName_1b2ro_109",gq="_routineType_1b2ro_123",yq="_routineStreak_1b2ro_177",Eq="_routineDesc_1b2ro_201",vq="_routineProgress_1b2ro_213",Tq="_progressTrack_1b2ro_227",bq="_progressFill_1b2ro_243",Sq="_progressText_1b2ro_257",Nq="_stepsList_1b2ro_271",xq="_stepItem_1b2ro_283",wq="_skipped_1b2ro_313",Aq="_optional_1b2ro_323",Rq="_stepCheckbox_1b2ro_331",Cq="_checked_1b2ro_365",Iq="_stepInfo_1b2ro_377",kq="_stepTitle_1b2ro_385",jq="_stepMeta_1b2ro_395",Dq="_stepDuration_1b2ro_411",Lq="_optionalBadge_1b2ro_423",Oq="_stepActions_1b2ro_439",Mq="_routineActions_1b2ro_449",Uq="_formSection_1b2ro_467",Vq="_formRow_1b2ro_487",qq="_emptyState_1b2ro_505",st={routinePanel:oq,routineGrid:lq,routineCard:cq,morning:uq,evening:dq,custom:fq,completed:hq,routineHeader:mq,routineInfo:pq,routineName:_q,routineType:gq,routineStreak:yq,routineDesc:Eq,routineProgress:vq,progressTrack:Tq,progressFill:bq,progressText:Sq,stepsList:Nq,stepItem:xq,skipped:wq,optional:Aq,stepCheckbox:Rq,checked:Cq,stepInfo:Iq,stepTitle:kq,stepMeta:jq,stepDuration:Dq,optionalBadge:Lq,stepActions:Oq,routineActions:Mq,formSection:Uq,formRow:Vq,emptyState:qq};function Bq({routines:s,loading:e,onCreateRoutine:n,onDeleteRoutine:a,onStartRoutine:o,onCompleteStep:u,onSkipStep:h,onAddStep:g,onDeleteStep:E,getStepsWithStatus:_,compact:S=!1}){const[x,w]=k.useState(!1),[B,H]=k.useState(null),[U,V]=k.useState(""),[z,G]=k.useState("morning"),[K,ie]=k.useState(""),[Ee,ye]=k.useState(25),D=()=>{V(""),G("morning"),ie(""),ye(25)},R=()=>{U.trim()&&(n(U.trim(),z,K.trim(),Ee),D(),w(!1))},L=s.filter(O=>O.type==="morning"),q=s.filter(O=>O.type==="evening"),M=s.filter(O=>O.type==="custom");return e?c.jsx(wt,{header:"Routines",children:c.jsx("div",{className:st.emptyState,children:"Loading routines..."})}):c.jsxs("div",{className:st.routinePanel,children:[c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:c.jsx(Pe,{variant:"primary",onClick:()=>{D(),w(!0)},children:"+ New Routine"})}),s.length===0?c.jsx(wt,{header:"Routines",children:c.jsx("div",{className:st.emptyState,children:"No routines yet. Create your first morning or evening routine!"})}):c.jsxs(c.Fragment,{children:[L.length>0&&c.jsx(wt,{header:"Morning Routines",children:c.jsx("div",{className:st.routineGrid,children:L.map(O=>c.jsx(Dm,{routine:O,stepsWithStatus:_(O.id),onStart:()=>o(O.id),onCompleteStep:j=>u(O.id,j),onSkipStep:j=>h(O.id,j),onEdit:()=>H(O.id),onDelete:()=>a(O.id)},O.id))})}),q.length>0&&c.jsx(wt,{header:"Evening Routines",children:c.jsx("div",{className:st.routineGrid,children:q.map(O=>c.jsx(Dm,{routine:O,stepsWithStatus:_(O.id),onStart:()=>o(O.id),onCompleteStep:j=>u(O.id,j),onSkipStep:j=>h(O.id,j),onEdit:()=>H(O.id),onDelete:()=>a(O.id)},O.id))})}),M.length>0&&c.jsx(wt,{header:"Custom Routines",children:c.jsx("div",{className:st.routineGrid,children:M.map(O=>c.jsx(Dm,{routine:O,stepsWithStatus:_(O.id),onStart:()=>o(O.id),onCompleteStep:j=>u(O.id,j),onSkipStep:j=>h(O.id,j),onEdit:()=>H(O.id),onDelete:()=>a(O.id)},O.id))})})]}),c.jsx(Rl,{open:x,onClose:()=>w(!1),title:"Create Routine",actions:c.jsxs(c.Fragment,{children:[c.jsx(Pe,{onClick:()=>w(!1),children:"Cancel"}),c.jsx(Pe,{variant:"primary",onClick:R,children:"Create"})]}),children:c.jsxs("div",{className:st.formSection,children:[c.jsx(zi,{label:"Name",value:U,onChange:O=>V(O.target.value),placeholder:"e.g., Morning Power-Up"}),c.jsxs("div",{className:st.formRow,children:[c.jsxs(va,{label:"Type",value:z,onChange:O=>G(O.target.value),children:[c.jsx("option",{value:"morning",children:"Morning"}),c.jsx("option",{value:"evening",children:"Evening"}),c.jsx("option",{value:"custom",children:"Custom"})]}),c.jsx(zi,{label:"Bonus XP",type:"number",value:Ee,onChange:O=>ye(Number(O.target.value)),min:0,max:200})]}),c.jsx(Dd,{label:"Description",value:K,onChange:O=>ie(O.target.value),placeholder:"Describe this routine..."})]})}),B&&c.jsx(Pq,{routine:s.find(O=>O.id===B),onClose:()=>H(null),onAddStep:g,onDeleteStep:E})]})}function Dm({routine:s,stepsWithStatus:e,onStart:n,onCompleteStep:a,onSkipStep:o,onEdit:u,onDelete:h}){const g=s.todayLog!==void 0,E=s.todayLog?.is_completed||!1,_=e.filter(w=>w.is_completed).length,S=e.length,x=S>0?Math.round(_/S*100):0;return c.jsxs("div",{className:`${st.routineCard} ${st[s.type]} ${E?st.completed:""}`,children:[c.jsxs("div",{className:st.routineHeader,children:[c.jsxs("div",{className:st.routineInfo,children:[c.jsx("div",{className:st.routineName,children:s.name}),c.jsxs("span",{className:`${st.routineType} ${st[s.type]}`,children:[s.type==="morning"?"":s.type==="evening"?"":""," ",s.type]})]}),s.streak&&s.streak.current_streak>0&&c.jsxs("div",{className:st.routineStreak,children:[" ",s.streak.current_streak," day",s.streak.current_streak!==1?"s":""]})]}),s.description&&c.jsx("div",{className:st.routineDesc,children:s.description}),g&&c.jsxs("div",{className:st.routineProgress,children:[c.jsx("div",{className:st.progressTrack,children:c.jsx("div",{className:st.progressFill,style:{width:`${x}%`}})}),c.jsxs("span",{className:st.progressText,children:[_,"/",S]})]}),g&&e.length>0&&c.jsx("div",{className:st.stepsList,children:e.map(w=>c.jsxs("div",{className:`${st.stepItem} ${w.is_completed?st.completed:""} ${w.skipped?st.skipped:""} ${w.is_optional?st.optional:""}`,children:[c.jsx("div",{className:`${st.stepCheckbox} ${w.is_completed?st.checked:""}`,onClick:()=>!w.is_completed&&!w.skipped&&!E&&a(w.id),children:w.is_completed&&""}),c.jsxs("div",{className:st.stepInfo,children:[c.jsx("div",{className:st.stepTitle,children:w.title}),c.jsxs("div",{className:st.stepMeta,children:[c.jsxs("span",{className:st.stepDuration,children:[" ",w.duration_minutes,"m"]}),w.is_optional&&c.jsx("span",{className:st.optionalBadge,children:"Optional"})]})]}),!w.is_completed&&!w.skipped&&!E&&w.is_optional&&c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>o(w.id),children:"Skip"})]},w.id))}),c.jsxs("div",{className:st.routineActions,children:[!g&&s.steps.length>0&&c.jsx(Pe,{variant:"primary",onClick:n,children:"Start Routine"}),E&&c.jsxs("span",{style:{color:"var(--buff-color)",fontFamily:"var(--font-heading)"},children:[" Completed Today (+",s.todayLog?.xp_earned||s.bonus_xp," XP)"]}),c.jsx("div",{style:{flex:1}}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:u,children:"Edit"}),c.jsx(Pe,{size:"small",variant:"danger",onClick:h,children:"Delete"})]})]})}function Pq({routine:s,onClose:e,onAddStep:n,onDeleteStep:a}){const[o,u]=k.useState(""),[h,g]=k.useState(""),[E,_]=k.useState(5),[S,x]=k.useState(!1),w=()=>{o.trim()&&(n(s.id,o.trim(),h.trim(),null,E,S),u(""),g(""),_(5),x(!1))};return c.jsx(Rl,{open:!0,onClose:e,title:`Edit: ${s.name}`,actions:c.jsx(Pe,{onClick:e,children:"Done"}),children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[c.jsxs("div",{className:st.formSection,children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Add Step"}),c.jsx(zi,{label:"Step Title",value:o,onChange:B=>u(B.target.value),placeholder:"e.g., Drink water"}),c.jsxs("div",{className:st.formRow,children:[c.jsx(zi,{label:"Duration (min)",type:"number",value:E,onChange:B=>_(Number(B.target.value)),min:1,max:120}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,paddingTop:20},children:[c.jsx("input",{type:"checkbox",checked:S,onChange:B=>x(B.target.checked)}),c.jsx("label",{children:"Optional"})]})]}),c.jsx(Pe,{variant:"primary",onClick:w,children:"Add Step"})]}),s.steps.length>0&&c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Current Steps"}),c.jsx("div",{className:st.stepsList,children:s.steps.map((B,H)=>c.jsxs("div",{className:`${st.stepItem} ${B.is_optional?st.optional:""}`,children:[c.jsxs("span",{style:{color:"var(--text-dim)",minWidth:24},children:[H+1,"."]}),c.jsxs("div",{className:st.stepInfo,children:[c.jsx("div",{className:st.stepTitle,children:B.title}),c.jsxs("div",{className:st.stepMeta,children:[c.jsxs("span",{className:st.stepDuration,children:[" ",B.duration_minutes,"m"]}),B.is_optional&&c.jsx("span",{className:st.optionalBadge,children:"Optional"})]})]}),c.jsx(Pe,{size:"small",variant:"danger",onClick:()=>a(B.id),children:"Remove"})]},B.id))})]})]})})}const Fq="_comboPanel_1yu75_1",Gq="_comboGrid_1yu75_13",Hq="_comboCard_1yu75_25",zq="_ready_1yu75_53",Xq="_inProgress_1yu75_65",$q="_comboHeader_1yu75_73",Yq="_comboIcon_1yu75_87",Qq="_comboInfo_1yu75_95",Kq="_comboName_1yu75_103",Wq="_comboXp_1yu75_115",Jq="_comboDesc_1yu75_127",Zq="_comboBuffs_1yu75_139",eB="_comboBuff_1yu75_139",tB="_active_1yu75_177",nB="_missing_1yu75_189",sB="_buffCheck_1yu75_197",iB="_comboProgress_1yu75_205",aB="_progressTrack_1yu75_219",rB="_progressFill_1yu75_235",oB="_complete_1yu75_249",lB="_progressText_1yu75_257",cB="_comboActions_1yu75_271",uB="_emptyState_1yu75_313",zt={comboPanel:Fq,comboGrid:Gq,comboCard:Hq,ready:zq,inProgress:Xq,comboHeader:$q,comboIcon:Yq,comboInfo:Qq,comboName:Kq,comboXp:Wq,comboDesc:Jq,comboBuffs:Zq,comboBuff:eB,active:tB,missing:nB,buffCheck:sB,comboProgress:iB,progressTrack:aB,progressFill:rB,complete:oB,progressText:lB,comboActions:cB,emptyState:uB};function dB({combos:s,loading:e,onClaimCombo:n,compact:a=!1}){const o=s.filter(g=>g.is_ready),u=s.filter(g=>g.progress>0&&!g.is_ready),h=s.filter(g=>g.progress===0);return e?c.jsx(wt,{header:"Habit Combos",children:c.jsx("div",{className:zt.emptyState,children:"Loading combos..."})}):s.length===0?c.jsx(wt,{header:"Habit Combos",children:c.jsx("div",{className:zt.emptyState,children:"No combos available. Create buff definitions to unlock combos!"})}):c.jsxs("div",{className:zt.comboPanel,children:[o.length>0&&c.jsx(wt,{header:"Ready to Claim!",glow:!0,children:c.jsx("div",{className:zt.comboGrid,children:o.map(g=>c.jsx(Lm,{combo:g,onClaim:()=>n(g.id)},g.id))})}),u.length>0&&c.jsx(wt,{header:"In Progress",children:c.jsx("div",{className:zt.comboGrid,children:u.map(g=>c.jsx(Lm,{combo:g},g.id))})}),h.length>0&&c.jsx(wt,{header:"Available Combos",children:c.jsx("div",{className:zt.comboGrid,children:h.map(g=>c.jsx(Lm,{combo:g},g.id))})})]})}function Lm({combo:s,onClaim:e}){const n=JSON.parse(s.required_buffs);return c.jsxs("div",{className:`${zt.comboCard} ${s.is_ready?zt.ready:s.progress>0?zt.inProgress:""}`,children:[c.jsxs("div",{className:zt.comboHeader,children:[c.jsx("span",{className:zt.comboIcon,children:s.icon}),c.jsxs("div",{className:zt.comboInfo,children:[c.jsx("div",{className:zt.comboName,children:s.name}),c.jsxs("div",{className:zt.comboXp,children:["+",s.bonus_xp," XP"]})]})]}),c.jsx("div",{className:zt.comboDesc,children:s.description}),c.jsx("div",{className:zt.comboBuffs,children:s.required_buff_names.map((a,o)=>{const u=n[o],h=s.active_buff_ids.includes(u);return c.jsxs("div",{className:`${zt.comboBuff} ${h?zt.active:zt.missing}`,children:[c.jsx("span",{className:zt.buffCheck,children:h?"":""}),a]},o)})}),c.jsxs("div",{className:zt.comboProgress,children:[c.jsx("div",{className:zt.progressTrack,children:c.jsx("div",{className:`${zt.progressFill} ${s.progress===100?zt.complete:""}`,style:{width:`${s.progress}%`}})}),c.jsxs("span",{className:zt.progressText,children:[s.progress,"%"]})]}),s.is_ready&&e&&c.jsx("div",{className:zt.comboActions,children:c.jsx(Pe,{variant:"primary",onClick:e,style:{width:"100%"},children:"Claim Combo!"})}),s.last_activated&&!s.is_ready&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textAlign:"center"},children:["Last claimed: ",new Date(s.last_activated+"Z").toLocaleDateString()]})]})}const fB="_weeklyReviewPanel_1ro8g_1",hB="_weekHeader_1ro8g_13",mB="_weekTitle_1ro8g_27",pB="_weekDates_1ro8g_39",_B="_summaryGrid_1ro8g_49",gB="_summaryCard_1ro8g_61",yB="_summaryIcon_1ro8g_83",EB="_summaryValue_1ro8g_93",vB="_summaryLabel_1ro8g_105",TB="_highlight_1ro8g_121",bB="_reflectionSection_1ro8g_131",SB="_reflectionField_1ro8g_143",NB="_reflectionLabel_1ro8g_155",xB="_reflectionIcon_1ro8g_173",wB="_reflectionTextarea_1ro8g_181",AB="_prioritiesSection_1ro8g_223",RB="_priorityInput_1ro8g_235",CB="_priorityList_1ro8g_277",IB="_priorityItem_1ro8g_289",kB="_priorityNumber_1ro8g_309",jB="_priorityText_1ro8g_321",DB="_removeBtn_1ro8g_331",LB="_completedBanner_1ro8g_357",OB="_completedIcon_1ro8g_385",MB="_actions_1ro8g_393",UB="_emptyState_1ro8g_497",VB="_compactPanel_1ro8g_533",qB="_compactMessage_1ro8g_545",BB="_compactCompletedBanner_1ro8g_559",PB="_compactSummary_1ro8g_587",FB="_compactStat_1ro8g_601",GB="_compactActions_1ro8g_631",Xe={weeklyReviewPanel:fB,weekHeader:hB,weekTitle:mB,weekDates:pB,summaryGrid:_B,summaryCard:gB,summaryIcon:yB,summaryValue:EB,summaryLabel:vB,highlight:TB,reflectionSection:bB,reflectionField:SB,reflectionLabel:NB,reflectionIcon:xB,reflectionTextarea:wB,prioritiesSection:AB,priorityInput:RB,priorityList:CB,priorityItem:IB,priorityNumber:kB,priorityText:jB,removeBtn:DB,completedBanner:LB,completedIcon:OB,actions:MB,emptyState:UB,compactPanel:VB,compactMessage:qB,compactCompletedBanner:BB,compactSummary:PB,compactStat:FB,compactActions:GB};function HB({currentReview:s,loading:e,onGenerateSummary:n,onUpdateContent:a,onCompleteReview:o,getSummaryFromReview:u,getPrioritiesFromReview:h,getWeekStart:g,compact:E=!1}){const[_,S]=k.useState(""),[x,w]=k.useState(""),[B,H]=k.useState([]),[U,V]=k.useState(""),[z,G]=k.useState(""),[K,ie]=k.useState(null),[Ee,ye]=k.useState(!1);k.useEffect(()=>{s&&(S(s.wins),w(s.challenges),H(h(s)),V(s.notes),ie(u(s)))},[s,u,h]);const D=async()=>{ye(!0);const{summary:Ae}=await n();ie(Ae),ye(!1)},R=()=>{if(!z.trim()||B.length>=5)return;const Ae=[...B,z.trim()];H(Ae),G(""),a(_,x,Ae,U)},L=Ae=>{const Ze=B.filter((Y,fe)=>fe!==Ae);H(Ze),a(_,x,Ze,U)},q=()=>{a(_,x,B,U)},M=()=>{q(),o()},O=Ae=>{const Ze=new Date(Ae),Y=new Date(Ae);return Y.setDate(Y.getDate()+6),`${Ze.toLocaleDateString()} - ${Y.toLocaleDateString()}`};if(e)return c.jsx(wt,{header:"Weekly Review",children:c.jsx("div",{className:Xe.emptyState,children:"Loading..."})});if(E){const Ae=s?.is_completed,Ze=s?u(s):K;return!s&&!K?c.jsxs("div",{className:Xe.compactPanel,children:[c.jsx("p",{className:Xe.compactMessage,children:"Generate your weekly summary to review your progress!"}),c.jsx(Pe,{variant:"primary",size:"small",onClick:D,disabled:Ee,children:Ee?"Generating...":"Generate Summary"})]}):c.jsxs("div",{className:Xe.compactPanel,children:[Ae&&c.jsxs("div",{className:Xe.compactCompletedBanner,children:[" Completed (+",s?.xp_earned||hl," XP)"]}),Ze&&c.jsxs("div",{className:Xe.compactSummary,children:[c.jsxs("div",{className:Xe.compactStat,children:[c.jsx("span",{children:""})," ",Ze.steps_completed," Steps"]}),c.jsxs("div",{className:Xe.compactStat,children:[c.jsx("span",{children:""})," ",Ze.quests_completed," Quests"]}),c.jsxs("div",{className:Xe.compactStat,children:[c.jsx("span",{children:""})," ",Ze.xp_earned," XP"]}),c.jsxs("div",{className:Xe.compactStat,children:[c.jsx("span",{children:""})," ",Ze.focus_sessions," Focus"]})]}),!Ae&&c.jsx("div",{className:Xe.compactActions,children:c.jsxs(Pe,{variant:"primary",size:"small",onClick:M,children:["Complete Review (+",hl," XP)"]})})]})}if(!s&&!K)return c.jsx(wt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:Xe.weeklyReviewPanel,children:[c.jsxs("div",{className:Xe.weekHeader,children:[c.jsx("span",{className:Xe.weekTitle,children:"This Week's Review"}),c.jsx("span",{className:Xe.weekDates,children:O(g())})]}),c.jsxs("div",{className:Xe.emptyState,children:[c.jsx("p",{children:"Generate your weekly summary to review your progress!"}),c.jsx(Pe,{variant:"primary",onClick:D,disabled:Ee,style:{marginTop:16},children:Ee?"Generating...":"Generate Summary"})]})]})});const j=s?.is_completed;return c.jsx(wt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:Xe.weeklyReviewPanel,children:[c.jsxs("div",{className:Xe.weekHeader,children:[c.jsxs("span",{className:Xe.weekTitle,children:["Week of ",s?.week_start||g()]}),c.jsx("span",{className:Xe.weekDates,children:O(s?.week_start||g())})]}),j&&c.jsxs("div",{className:Xe.completedBanner,children:[c.jsx("span",{className:Xe.completedIcon,children:""}),"Review Completed (+",s?.xp_earned||hl," XP)"]}),K&&c.jsxs("div",{className:Xe.summaryGrid,children:[c.jsx(lr,{icon:"",value:K.steps_completed,label:"Steps"}),c.jsx(lr,{icon:"",value:K.quests_completed,label:"Quests"}),c.jsx(lr,{icon:"",value:K.goals_completed,label:"Goals",highlight:!0}),c.jsx(lr,{icon:"",value:K.buffs_activated,label:"Buffs"}),c.jsx(lr,{icon:"",value:K.xp_earned,label:"XP Earned",highlight:!0}),c.jsx(lr,{icon:"",value:K.boss_damage_dealt,label:"Boss Dmg"}),c.jsx(lr,{icon:"",value:K.focus_sessions,label:"Focus"}),c.jsx(lr,{icon:"",value:K.routines_completed,label:"Routines"})]}),c.jsxs("div",{className:Xe.reflectionSection,children:[c.jsxs("div",{className:Xe.reflectionField,children:[c.jsxs("label",{className:Xe.reflectionLabel,children:[c.jsx("span",{className:Xe.reflectionIcon,children:""}),"Wins This Week"]}),c.jsx("textarea",{className:Xe.reflectionTextarea,value:_,onChange:Ae=>S(Ae.target.value),onBlur:q,placeholder:"What went well? What are you proud of?",disabled:j})]}),c.jsxs("div",{className:Xe.reflectionField,children:[c.jsxs("label",{className:Xe.reflectionLabel,children:[c.jsx("span",{className:Xe.reflectionIcon,children:""}),"Challenges & Learnings"]}),c.jsx("textarea",{className:Xe.reflectionTextarea,value:x,onChange:Ae=>w(Ae.target.value),onBlur:q,placeholder:"What was difficult? What did you learn?",disabled:j})]}),c.jsxs("div",{className:Xe.reflectionField,children:[c.jsxs("label",{className:Xe.reflectionLabel,children:[c.jsx("span",{className:Xe.reflectionIcon,children:""}),"Priorities for Next Week (up to 5)"]}),c.jsxs("div",{className:Xe.prioritiesSection,children:[!j&&B.length<5&&c.jsxs("div",{className:Xe.priorityInput,children:[c.jsx("input",{type:"text",value:z,onChange:Ae=>G(Ae.target.value),placeholder:"Add a priority...",onKeyDown:Ae=>Ae.key==="Enter"&&R()}),c.jsx(Pe,{size:"small",onClick:R,children:"Add"})]}),B.length>0&&c.jsx("div",{className:Xe.priorityList,children:B.map((Ae,Ze)=>c.jsxs("div",{className:Xe.priorityItem,children:[c.jsxs("span",{className:Xe.priorityNumber,children:[Ze+1,"."]}),c.jsx("span",{className:Xe.priorityText,children:Ae}),!j&&c.jsx("button",{className:Xe.removeBtn,onClick:()=>L(Ze),children:""})]},Ze))})]})]}),c.jsxs("div",{className:Xe.reflectionField,children:[c.jsxs("label",{className:Xe.reflectionLabel,children:[c.jsx("span",{className:Xe.reflectionIcon,children:""}),"Additional Notes"]}),c.jsx("textarea",{className:Xe.reflectionTextarea,value:U,onChange:Ae=>V(Ae.target.value),onBlur:q,placeholder:"Any other thoughts or notes...",disabled:j})]})]}),!j&&c.jsxs("div",{className:Xe.actions,children:[c.jsx(Pe,{variant:"ghost",onClick:D,disabled:Ee,children:"Refresh Summary"}),c.jsxs(Pe,{variant:"primary",onClick:M,children:["Complete Review (+",hl," XP)"]})]})]})})}function lr({icon:s,value:e,label:n,highlight:a}){return c.jsxs("div",{className:`${Xe.summaryCard} ${a?Xe.highlight:""}`,children:[c.jsx("span",{className:Xe.summaryIcon,children:s}),c.jsx("span",{className:Xe.summaryValue,children:e}),c.jsx("span",{className:Xe.summaryLabel,children:n})]})}const zB="_guideButton_1u1py_1",XB="_guideOverlay_1u1py_71",$B="_guideContainer_1u1py_95",YB="_guideHeader_1u1py_159",QB="_guideTitle_1u1py_177",KB="_closeButton_1u1py_191",WB="_guideContent_1u1py_229",JB="_table_1u1py_335",ZB="_tocList_1u1py_393",e7="_tocItem_1u1py_411",Hn={guideButton:zB,guideOverlay:XB,guideContainer:$B,guideHeader:YB,guideTitle:QB,closeButton:KB,guideContent:WB,table:JB,tocList:ZB,tocItem:e7};function t7(){const[s,e]=k.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:Hn.guideButton,onClick:()=>e(!0),title:"Open Guide",children:"?"}),s&&c.jsx(n7,{onClose:()=>e(!1)})]})}function n7({onClose:s}){const e=k.useRef(null);k.useEffect(()=>{const a=o=>{o.key==="Escape"&&s()};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=""}},[s]);const n=a=>{e.current?.querySelector(`#${a}`)?.scrollIntoView({behavior:"smooth"})};return c.jsx("div",{className:Hn.guideOverlay,onClick:s,children:c.jsxs("div",{className:Hn.guideContainer,onClick:a=>a.stopPropagation(),ref:e,children:[c.jsxs("div",{className:Hn.guideHeader,children:[c.jsx("span",{className:Hn.guideTitle,children:"Adventurer's Guide"}),c.jsx("button",{className:Hn.closeButton,onClick:s,children:"Close"})]}),c.jsx("ul",{className:Hn.tocList,children:["overview","character","quests","buffs","achievements","energy","focus","routines","combos","review","events","skills","classes","territory","inventory","xp","levels","stats","tips","data"].map(a=>c.jsx("li",{className:Hn.tocItem,onClick:()=>n(`guide-${a}`),children:{xp:"XP System",data:"Save Data",achievements:"Achievements",energy:"Energy",focus:"Focus Timer",routines:"Routines",combos:"Habit Combos",review:"Weekly Review",events:"Random Events",skills:"Skill Trees",classes:"Classes",territory:"Territory Map",inventory:"Inventory"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},a))}),c.jsxs("div",{className:Hn.guideContent,children:[c.jsx("h2",{id:"guide-overview",children:"Overview"}),c.jsxs("p",{children:["Goal Game turns your real-life goals into an RPG adventure. You create ",c.jsx("strong",{children:"Goals"})," (big-picture ambitions), break them into ",c.jsx("strong",{children:"Quests"})," (projects), and then into ",c.jsx("strong",{children:"Steps"})," (individual tasks). Completing steps earns ",c.jsx("strong",{children:"XP"}),", which levels up your character."]}),c.jsxs("p",{children:["Track daily habits as ",c.jsx("strong",{children:"Buffs"})," (positive) and ",c.jsx("strong",{children:"Debuffs"})," (negative) that affect your character's stats."]}),c.jsx("h2",{id:"guide-character",children:"Character Screen"}),c.jsx("p",{children:"Your character screen shows your current progress at a glance."}),c.jsx("h3",{children:"What you'll see"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Name"}),`  Tap "Rename" to change your character's name.`]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Level & Title"}),'  Your current level and rank title (e.g., "Novice", "Adept"). Titles change automatically as you level up.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP Bar"}),"  Shows progress toward your next level. The numbers show current XP in this level / XP needed for next level."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Total XP"}),"  Your lifetime XP earned across all activities."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Stats"}),"  Five attributes (Stamina, Willpower, Health, Focus, Charisma) that start at 10 and change based on your active buffs/debuffs."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Effects"}),"  Currently active buffs (green pulse) and debuffs (red throb) with time remaining."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP History"}),"  A log of your most recent XP gains showing what you earned and why."]})]}),c.jsx("h2",{id:"guide-quests",children:"Quest Log"}),c.jsx("p",{children:"This is where you organize everything you want to accomplish."}),c.jsx("h3",{children:"Hierarchy"}),c.jsx("p",{children:"Life is organized in three layers:"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Goals"}),'  Big-picture ambitions tied to a life domain. Example: "Get fit" in the Health domain.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),'  Specific projects within a goal. Example: "Run a 5K" under "Get fit".']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Steps"}),'  Individual actionable tasks within a quest. Example: "Run 1 mile without stopping" inside "Run a 5K".']})]}),c.jsx("h3",{children:"Domains"}),c.jsx("p",{children:"Every goal belongs to one of eight life domains:"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Icon"}),c.jsx("th",{children:"Domain"}),c.jsx("th",{children:"Examples"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Fitness, diet, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Career"}),c.jsx("td",{children:"Work projects, promotions, skills"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Learning"}),c.jsx("td",{children:"Courses, reading, certifications"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Social"}),c.jsx("td",{children:"Relationships, networking, community"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Finance"}),c.jsx("td",{children:"Saving, investing, budgeting"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Creative"}),c.jsx("td",{children:"Art, music, writing, hobbies"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Spiritual"}),c.jsx("td",{children:"Meditation, mindfulness, gratitude"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Home"}),c.jsx("td",{children:"Cleaning, organizing, repairs"})]})]})]}),c.jsx("h3",{children:"Priority Levels"}),c.jsx("p",{children:"Quests and steps can have a priority that affects XP rewards:"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Priority"}),c.jsx("th",{children:"Color"}),c.jsx("th",{children:"Step XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Normal"}),c.jsx("td",{children:"Gray"}),c.jsx("td",{children:"10 XP"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Important"}),c.jsx("td",{children:"Gold"}),c.jsx("td",{children:"15 XP (1.5x)"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Legendary"}),c.jsx("td",{children:"Orange"}),c.jsx("td",{children:"20 XP (2x)"})]})]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Goal"}),"  pick a domain, give it a title."]}),c.jsxs("li",{children:["Inside a goal, tap ",c.jsx("strong",{children:"+ Quest"}),"  name the project, choose priority."]}),c.jsx("li",{children:'Tap a quest to expand it, then type steps in the "Add a step" field at the bottom.'}),c.jsx("li",{children:"Check off steps to earn XP. When all steps are done, the quest auto-completes for bonus XP. When all quests in a goal are done, the goal auto-completes for even more bonus XP."})]}),c.jsx("h3",{children:"Filters"}),c.jsx("p",{children:"Use the dropdowns at the top to filter by domain or status (Active / Completed / All)."}),c.jsx("h2",{id:"guide-buffs",children:"Buffs & Debuffs"}),c.jsx("p",{children:"Buffs and debuffs represent daily habits that affect your character."}),c.jsx("h3",{children:"Buffs (Positive Habits)"}),c.jsxs("p",{children:["Things you ",c.jsx("em",{children:"want"})," to do every day. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Morning Exercise  +2 Stamina, +1 Health"}),c.jsx("li",{children:" Meditation  +2 Willpower, +1 Focus"}),c.jsx("li",{children:" 8 Hours Sleep  +1 Health, +1 Focus, +1 Stamina"}),c.jsx("li",{children:" Read 30 Minutes  +2 Focus"})]}),c.jsxs("p",{children:["Activating a buff earns ",c.jsx("strong",{children:"5 XP"})," and applies its stat effects for the duration you set (e.g., 24 hours). After that, the buff expires and you need to activate it again the next day."]}),c.jsx("h3",{children:"Debuffs (Negative Habits)"}),c.jsxs("p",{children:["Things you want to be ",c.jsx("em",{children:"honest about tracking"}),". There is no XP penalty  this is for self-awareness. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Junk Food  -1 Health, -1 Stamina"}),c.jsx("li",{children:" Doomscrolling  -2 Focus, -1 Willpower"}),c.jsx("li",{children:" Alcohol  -1 Health, -1 Focus"})]}),c.jsx("p",{children:"Debuffs still affect your stats while active, shown as red on your character screen."}),c.jsx("h3",{children:"Streaks"}),c.jsxs("p",{children:["Activate the same buff on consecutive days to build a streak. Every ",c.jsx("strong",{children:"7-day streak"})," earns a bonus ",c.jsx("strong",{children:"25 XP"}),"."]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Buff/Debuff"})," to define a habit template."]}),c.jsx("li",{children:"Choose a name, type (buff or debuff), icon, duration in hours, and stat effects (positive numbers for buffs, negative for debuffs)."}),c.jsxs("li",{children:["Once created, it appears in the Buffs or Debuffs column. Tap ",c.jsx("strong",{children:"Activate"})," each day you do the habit."]}),c.jsx("li",{children:"Active effects appear at the top with a countdown timer and are reflected on your Character screen stats."})]}),c.jsx("h3",{children:"Expiry"}),c.jsxs("p",{children:["Buffs and debuffs expire automatically after their duration. The app checks every 60 seconds. You can also manually remove an active effect by tapping ",c.jsx("strong",{children:"Remove"}),"."]}),c.jsx("h2",{id:"guide-achievements",children:"Achievements"}),c.jsx("p",{children:"Unlock achievements by reaching milestones. Each achievement rewards XP when unlocked."}),c.jsx("h3",{children:"Categories"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),"  Complete steps, quests, and goals"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Buffs"}),"  Activate habits regularly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Streaks"}),"  Maintain consecutive day streaks"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Boss"}),"  Defeat weekly bosses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Levels"}),"  Reach level milestones (5, 10, 25, 50)"]})]}),c.jsx("p",{children:"View your progress in the Achievements panel. Some achievements are hidden until unlocked!"}),c.jsx("h2",{id:"guide-energy",children:"Energy System"}),c.jsx("p",{children:"Energy represents your daily capacity for action."}),c.jsx("h3",{children:"Mechanics"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Max Energy"}),"  Starts at 100"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Regeneration"}),"  Recovers 10 energy per hour automatically"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Costs"}),"  Some actions cost energy (completing steps: 5, activating buffs: 3)"]})]}),c.jsx("h3",{children:"Energy Debuffs"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Threshold"}),c.jsx("th",{children:"Debuff"}),c.jsx("th",{children:"Effects"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Below 20"}),c.jsx("td",{children:"Fatigued"}),c.jsx("td",{children:"-2 Focus, -2 Willpower"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Below 5"}),c.jsx("td",{children:"Exhausted"}),c.jsx("td",{children:"-3 Stamina, -3 Willpower, -3 Focus, -1 Health"})]})]})]}),c.jsx("p",{children:"Keep your energy up to avoid stat penalties!"}),c.jsx("h2",{id:"guide-focus",children:"Focus Timer"}),c.jsx("p",{children:"A Pomodoro-style timer to boost productivity."}),c.jsx("h3",{children:"How it works"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Work sessions"}),"  Default 25 minutes of focused work"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Short breaks"}),"  5 minutes after each session"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Long breaks"}),"  15 minutes after 4 sessions"]})]}),c.jsx("h3",{children:"XP Rewards"}),c.jsxs("ul",{children:[c.jsx("li",{children:"+15 XP per completed focus session"}),c.jsx("li",{children:"+5 XP bonus if linked to a quest step"}),c.jsx("li",{children:"+10 XP bonus every 4 consecutive sessions"})]}),c.jsx("p",{children:"Customize timer durations in Settings."}),c.jsx("h2",{id:"guide-routines",children:"Morning/Evening Routines"}),c.jsx("p",{children:"Create routine chains to build powerful habits."}),c.jsx("h3",{children:"Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Morning"}),"  Start your day right"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Evening"}),"  Wind down properly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Custom"}),"  Any time routines"]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsx("li",{children:"Create a routine with a name and bonus XP reward"}),c.jsx("li",{children:"Add steps to the routine (can be linked to buffs)"}),c.jsx("li",{children:"Start the routine each day and complete steps in order"}),c.jsx("li",{children:"Complete all required steps to earn the bonus XP"})]}),c.jsx("p",{children:"Routine streaks earn extra XP every 7 days!"}),c.jsx("h2",{id:"guide-combos",children:"Habit Combos"}),c.jsx("p",{children:"Activate specific buff combinations for bonus XP."}),c.jsx("h3",{children:"Example Combos"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wellness Warrior"}),"  Meditation + Exercise + Healthy Meal = +30 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Master"}),"  No Phone + Deep Work + Reading = +25 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Early Bird"}),"  Morning Exercise + 8 Hours Sleep + No Phone First Hour = +35 XP"]})]}),c.jsx("p",{children:"Combos can only be claimed once per day. Activate all required buffs within 24 hours to qualify."}),c.jsx("h2",{id:"guide-review",children:"Weekly Review"}),c.jsx("p",{children:"Reflect on your progress every week."}),c.jsx("h3",{children:"Summary Data"}),c.jsx("p",{children:"Auto-generated stats include: steps completed, quests completed, buffs activated, XP earned, boss damage dealt, focus sessions, and more."}),c.jsx("h3",{children:"Reflection Prompts"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wins"}),"  What went well this week?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenges"}),"  What was difficult?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Priorities"}),"  Set up to 5 priorities for next week"]})]}),c.jsxs("p",{children:["Completing your weekly review earns ",c.jsx("strong",{children:"100 XP"}),"."]}),c.jsx("h2",{id:"guide-events",children:"Random Events"}),c.jsx("p",{children:"Special limited-time opportunities that appear randomly."}),c.jsx("h3",{children:"Event Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Bonus"}),"  Instant rewards (XP, energy, shields)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenge"}),"  Complete objectives for rewards"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Modifier"}),"  Temporary boosts (double XP, stat increases)"]})]}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Events have different rarities: Common, Uncommon, Rare, Epic. Rarer events have better rewards!"}),c.jsx("p",{children:"Events have a 15% chance to trigger and a 4-hour cooldown between checks."}),c.jsx("h2",{id:"guide-skills",children:"Skill Trees"}),c.jsx("p",{children:"Spend XP to unlock permanent passive bonuses."}),c.jsx("h3",{children:"Branches"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity"})," (Blue)  Quest and step XP bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Health"})," (Red)  Energy and stamina bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus"})," (Purple)  Timer and concentration bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Social"})," (Orange)  Streak and charisma bonuses"]})]}),c.jsx("h3",{children:"How to unlock"}),c.jsx("p",{children:"Skills cost XP to unlock (100-500 XP per node). You must unlock prerequisite skills first. Capstone skills at the end of each branch provide the biggest bonuses."}),c.jsx("h2",{id:"guide-classes",children:"Character Classes"}),c.jsx("p",{children:"Choose a class to specialize your character."}),c.jsx("h3",{children:"Available Classes"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Class"}),c.jsx("th",{children:"Stat Bonuses"}),c.jsx("th",{children:"XP Bonus"}),c.jsx("th",{children:"Special"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Warrior"}),c.jsx("td",{children:"+3 Stamina, +2 Health"}),c.jsx("td",{children:"+10% Quest XP"}),c.jsx("td",{children:"Battlecry"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Mage"}),c.jsx("td",{children:"+3 Focus, +2 Willpower"}),c.jsx("td",{children:"+10% Buff XP"}),c.jsx("td",{children:"Arcane Focus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Ranger"}),c.jsx("td",{children:"+3 Willpower, +1 Stamina, +1 Focus"}),c.jsx("td",{children:"+10% Streak XP"}),c.jsx("td",{children:"Tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Paladin"}),c.jsx("td",{children:"+2 Health, +2 Willpower, +1 Charisma"}),c.jsx("td",{children:"+10% Boss XP"}),c.jsx("td",{children:"Divine Shield"})]})]})]}),c.jsx("p",{children:"You can change your class up to 3 times total."}),c.jsx("h2",{id:"guide-territory",children:"Territory Map"}),c.jsx("p",{children:"Explore regions as you level up."}),c.jsx("h3",{children:"Territories"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"The Awakening Glade"})," (Level 1)  Where every journey begins"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Habit Highlands"})," (Level 5)  Rocky terrain for consistent habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Forest"})," (Level 10)  Dense woods for the focused"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity Plains"})," (Level 15)  Vast fields for goal achievers"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Summit of Mastery"})," (Level 25)  The peak for true masters"]})]}),c.jsx("p",{children:"Complete territory challenges to unlock rewards and earn special titles!"}),c.jsx("h2",{id:"guide-inventory",children:"Inventory & Items"}),c.jsx("p",{children:"Collect and equip items for stat bonuses."}),c.jsx("h3",{children:"Item Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Equipment"}),"  Weapons, armor, accessories with stat bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Consumables"}),"  One-time use items (energy potions, XP elixirs)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Trophies"}),"  Special commemorative items from achievements"]})]}),c.jsx("h3",{children:"Equipment Slots"}),c.jsx("p",{children:"You can equip one item in each slot: Weapon, Armor, Accessory."}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Items come in 5 rarities: Common (gray), Uncommon (green), Rare (blue), Epic (purple), Legendary (orange)."}),c.jsx("p",{children:"Items drop from achievements, boss defeats, and random events."}),c.jsx("h2",{id:"guide-xp",children:"XP System"}),c.jsx("p",{children:"Everything you do earns experience points:"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Action"}),c.jsx("th",{children:"XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a normal step"}),c.jsx("td",{children:"+10"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete an important step"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a legendary step"}),c.jsx("td",{children:"+20"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a quest (all steps done)"}),c.jsx("td",{children:"+50 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a goal (all quests done)"}),c.jsx("td",{children:"+200 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a buff (daily habit)"}),c.jsx("td",{children:"+5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"7-day streak on any buff"}),c.jsx("td",{children:"+25 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a focus session"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a routine"}),c.jsx("td",{children:"+25"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a habit combo"}),c.jsx("td",{children:"+25-35"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete weekly review"}),c.jsx("td",{children:"+100"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Unlock an achievement"}),c.jsx("td",{children:"+25-500"})]})]})]}),c.jsx("h2",{id:"guide-levels",children:"Levels & Titles"}),c.jsxs("p",{children:["XP needed per level increases as you grow. The formula is ",c.jsx("code",{children:"50  level^1.8"}),"."]}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Level"}),c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Approx. Timeline"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"14"}),c.jsx("td",{children:"Novice"}),c.jsx("td",{children:"Starting out"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"59"}),c.jsx("td",{children:"Apprentice"}),c.jsx("td",{children:"~12 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1014"}),c.jsx("td",{children:"Journeyman"}),c.jsx("td",{children:"~34 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1521"}),c.jsx("td",{children:"Adept"}),c.jsx("td",{children:"~12 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2229"}),c.jsx("td",{children:"Expert"}),c.jsx("td",{children:"~24 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3039"}),c.jsx("td",{children:"Master"}),c.jsx("td",{children:"~48 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"4049"}),c.jsx("td",{children:"Legend"}),c.jsx("td",{children:"~812 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"50+"}),c.jsx("td",{children:"Dragonborn"}),c.jsx("td",{children:"~1 year+"})]})]})]}),c.jsx("p",{children:"When you level up, a golden overlay appears announcing your new level and title."}),c.jsx("h2",{id:"guide-stats",children:"Stats"}),c.jsxs("p",{children:["Your character has five stats, all starting at ",c.jsx("strong",{children:"10"}),":"]}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Stat"}),c.jsx("th",{children:"Represents"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Stamina"}),c.jsx("td",{children:"Physical energy, endurance, exercise habits"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Willpower"}),c.jsx("td",{children:"Discipline, self-control, mental toughness"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Physical wellbeing, nutrition, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Focus"}),c.jsx("td",{children:"Concentration, productivity, mental clarity"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Charisma"}),c.jsx("td",{children:"Social skills, confidence, communication"})]})]})]}),c.jsx("h3",{children:"Stat Sources"}),c.jsx("p",{children:"Your final stats are calculated from multiple sources:"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Base"}),"  10 in each stat"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Buffs/Debuffs"}),"  Temporary effects from habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Equipped Items"}),"  Bonuses from weapons, armor, accessories"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Skill Tree"}),"  Permanent passive bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Character Class"}),"  Class-specific bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Energy Debuffs"}),"  Penalties when energy is low"]})]}),c.jsx("p",{children:"Stats serve as a mirror of your current lifestyle  high Focus means you've been studying and avoiding distractions; low Health means you've been eating junk food or skipping sleep."}),c.jsx("h2",{id:"guide-tips",children:"Tips"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Start small."})," Create one goal with one quest and a few steps. Don't overload yourself on day one."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Be honest with debuffs."})," There's no punishment  tracking negative habits helps you see patterns."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Use priorities wisely."}),' Reserve "Legendary" for truly difficult or impactful tasks.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Build streaks."})," The 7-day streak bonus compounds  maintaining 3 daily buffs earns 75 bonus XP per week on top of the daily 5 XP each."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Check your character screen daily."})," Your stats tell you how balanced your life is."]})]}),c.jsx("h2",{id:"guide-data",children:"Saving & Data"}),c.jsx("p",{children:"All your data is stored locally on this device in the browser's database. It persists across sessions  closing and reopening the app keeps everything."}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Export Save"}),"  Downloads your entire database as a .db file. Use this for backups."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Import Save"}),"  Loads a previously exported .db file, replacing all current data. Use this to restore a backup or transfer data between devices."]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Important:"})," Clearing your browser/app data will erase your progress. Export a backup regularly."]}),c.jsx("h3",{children:"Keyboard Shortcuts (Desktop)"}),c.jsxs("table",{className:Hn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Key"}),c.jsx("th",{children:"Action"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"1"}),c.jsx("td",{children:"Character screen"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2"}),c.jsx("td",{children:"Quest Log"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3"}),c.jsx("td",{children:"Buffs"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Esc"}),c.jsx("td",{children:"Close any open modal/popup"})]})]})]})]})]})})}function s7(){const{ready:s,error:e}=Ix(),[n,a]=k.useState("character");return s?c.jsx(i7,{activeTab:n,setActiveTab:a}):c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a0f",color:"#c8a84e",fontFamily:"Cinzel, serif",fontSize:"1.2rem"},children:e?`Error: ${e}`:"Loading database..."})}function i7({activeTab:s,setActiveTab:e}){const n=Bx(),a=Fj({grantXP:n.grantXP}),o=Yj({grantXP:n.grantXP,addShields:a.addShields}),u=Cj({grantXP:n.grantXP}),h=rD(),g=tD({grantXP:n.grantXP});eL({totalXP:n.character.total_xp}),oL(),pL({characterLevel:n.character.level,grantXP:n.grantXP});const E=bL({grantXP:n.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),_=hD({grantXP:n.grantXP,onSessionComplete:()=>{g.incrementProgress("focus_sessions_completed",1),o.dealDamage("focus_session","Focus session completed")}}),S=RD({grantXP:n.grantXP,onRoutineComplete:R=>{g.incrementProgress("routines_completed",1),o.dealDamage("routine_completed","Routine completed")}}),x=OD({grantXP:n.grantXP}),w=FD({grantXP:n.grantXP}),B=YD({grantXP:n.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),H=iw({grantXP:n.grantXP,onStepComplete:()=>{u.updateProgress("complete_steps",1),o.dealDamage("step_completed","Completed a step"),g.incrementProgress("steps_completed",1)},onQuestComplete:()=>{o.dealDamage("quest_completed","Completed a quest"),g.incrementProgress("quests_completed",1)},onGoalComplete:()=>{o.dealDamage("goal_completed","Completed a goal"),g.incrementProgress("goals_completed",1)},onStepMissed:async R=>{await dw(R),o.healBoss("step_missed","Missed a step"),V.refresh()}}),U=O1(),V=yw({grantXP:n.grantXP,deductXP:n.deductXP,scheduleBuffExpiry:U.scheduleBuffExpiry,cancelBuffExpiry:U.cancelBuffExpiry,onBuffActivated:R=>{u.updateProgress("activate_buffs",1),new Date().getHours()<8&&u.updateProgress("early_start",1),R==="buff"&&(u.updateProgress("activate_specific",1),o.dealDamage("buff_activated","Activated a buff"),g.incrementProgress("buffs_activated",1)),a.refresh(),x.checkAndActivateCombos()},onDebuffActivated:R=>{o.healBoss("debuff_activated",`Activated debuff: ${R}`)}}),z=Cw(),[G,K]=k.useState(!1),[ie,Ee]=k.useState(!1);k.useEffect(()=>{n.refresh(),s==="quests"&&H.refresh(),s==="buffs"&&(V.refresh(),a.refresh(),x.refresh()),s==="focus"&&_.refresh(),s==="boss"&&o.refresh(),s==="inventory"&&E.refresh()},[s]),k.useEffect(()=>{mw().then(R=>{R&&console.log("Daily buff reset: All buffs cleared for new day (Pacific Time)"),V.refresh()}),Rj().then(R=>{R&&console.log("Daily quests reset: New quests generated for new day (Pacific Time)"),u.refresh()}),H.refresh(),a.refresh(),h.refresh(),g.refresh(),u.checkNoDebuffs()},[]),k.useEffect(()=>{g.checkThreshold("character_level",n.character.level)},[n.character.level]),k.useEffect(()=>{const R=L=>{L.target instanceof HTMLInputElement||L.target instanceof HTMLTextAreaElement||L.target instanceof HTMLSelectElement||(L.key==="1"&&e("character"),L.key==="2"&&e("quests"),L.key==="3"&&e("buffs"),L.key==="4"&&e("focus"),L.key==="5"&&e("boss"),L.key==="6"&&e("inventory"))};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[e]);const ye=k.useCallback(async()=>{const R=await pp(),L=new Blob([new Uint8Array(R)],{type:"application/octet-stream"}),q=URL.createObjectURL(L),M=document.createElement("a");M.href=q,M.download=`goal-game-backup-${new Date().toISOString().split("T")[0]}.db`,M.click(),URL.revokeObjectURL(q)},[]),D=k.useCallback(async()=>{const R=document.createElement("input");R.type="file",R.accept=".db",R.onchange=async()=>{const L=R.files?.[0];if(!L)return;const q=await L.arrayBuffer();await ib(new Uint8Array(q)),window.location.reload()},R.click()},[]);return c.jsxs("div",{className:Ln.appShell,children:[c.jsx(FL,{activeTab:s,onTabChange:e}),c.jsx(pO,{character:n.character,energyState:h.state}),c.jsxs("main",{className:Ln.main,children:[s==="character"&&c.jsxs(c.Fragment,{children:[c.jsx(Q3,{character:n.character,stats:V.stats}),B.activeEvents.length>0&&c.jsx("div",{style:{marginBottom:12},children:B.activeEvents.map(R=>c.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(200,168,78,0.2), rgba(200,168,78,0.1))",border:"1px solid var(--border-gold)",borderRadius:8,padding:"10px 14px",marginBottom:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("span",{style:{fontSize:"1.1rem"},children:R.template.icon}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"var(--gold)",fontSize:"0.9rem"},children:R.template.name}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:R.template.description})]})]}),!R.is_claimed&&c.jsx(Pe,{size:"small",onClick:()=>B.claimEvent(R.id),children:"Claim"})]},R.id))}),c.jsxs(Tc,{title:"Today's Tasks",icon:"",badge:`${u.completedCount}/${u.quests.length}`,badgeColor:u.allCompleted?"green":"gold",defaultExpanded:!0,children:[c.jsx(S6,{quests:u.quests,loading:u.loading,allCompleted:u.allCompleted,completedCount:u.completedCount,bonusClaimed:u.bonusClaimed,bonusXp:u.bonusXp,totalXpEarned:u.totalXpEarned,onClaimBonus:async()=>{await u.claimBonus();for(const R of u.quests)R.is_completed&&o.dealDamage("daily_quest_completed",`Daily Quest: ${R.title}`)},compact:!0}),S.routines.length>0&&c.jsx("div",{style:{marginTop:16},children:c.jsx(Bq,{routines:S.routines,loading:S.loading,onCreateRoutine:S.createRoutine,onDeleteRoutine:S.deleteRoutine,onStartRoutine:S.startRoutine,onCompleteStep:S.completeStep,onSkipStep:S.skipStep,onAddStep:S.addStep,onDeleteStep:S.deleteStep,getStepsWithStatus:S.getStepsWithStatus,compact:!0})})]}),x.combos.length>0&&c.jsx(Tc,{title:"Combos",icon:"",badge:x.combos.filter(R=>R.is_ready).length>0?`${x.combos.filter(R=>R.is_ready).length} ready!`:void 0,badgeColor:"green",children:c.jsx(dB,{combos:x.combos,loading:x.loading,onClaimCombo:x.claimCombo,compact:!0})}),c.jsx(Tc,{title:"Character Stats",icon:"",badge:`Lv.${n.character.level}`,badgeColor:"gold",children:c.jsx(O3,{character:n.character,stats:V.stats,activeBuffs:V.activeBuffs,xpLog:n.xpLog,onNameChange:n.setName,compact:!0})}),c.jsx(Tc,{title:"Achievements",icon:"",badge:`${g.stats.unlocked}/${g.stats.total}`,badgeColor:g.stats.unlocked===g.stats.total?"green":"gold",children:c.jsx(yV,{achievements:g.achievements,stats:g.stats,loading:g.loading,compact:!0})}),!w.currentReview?.is_completed&&c.jsx(Tc,{title:"Weekly Review",icon:"",badge:"Due",badgeColor:"blue",children:c.jsx(HB,{currentReview:w.currentReview,loading:w.loading,onGenerateSummary:w.generateSummary,onUpdateContent:w.updateContent,onCompleteReview:w.completeReview,getSummaryFromReview:w.getSummaryFromReview,getPrioritiesFromReview:w.getPrioritiesFromReview,getWeekStart:w.getWeekStart,compact:!0})})]}),s==="quests"&&c.jsx(D5,{goals:H.goals,domains:H.domains,filterDomain:H.filterDomain,filterStatus:H.filterStatus,onFilterDomain:R=>{H.setFilterDomain(R)},onFilterStatus:R=>{H.setFilterStatus(R)},onCreateGoal:H.createGoal,onCreateQuest:H.createQuest,onCreateStep:H.createStep,onCompleteStep:H.completeStep,onUncompleteStep:H.uncompleteStep,onMissStep:H.missStep,onUnmissStep:H.unmissStep,onDeleteStep:H.deleteStep,onDeleteQuest:H.deleteQuest,onDeleteGoal:H.deleteGoal}),s==="buffs"&&c.jsx(eU,{definitions:V.definitions,activeBuffs:V.activeBuffs,onCreateDefinition:V.createDefinition,onDeleteDefinition:V.deleteDefinition,onActivateBuff:V.activateBuff,onDeactivateBuff:V.deactivateBuff,streakInfos:a.streakInfos,shieldCount:a.shieldCount,onUseShield:a.useShield,getUnclaimedMilestones:a.getUnclaimedMilestones,onClaimMilestones:a.claimMilestones}),s==="focus"&&c.jsx(rq,{timerState:_.timerState,settings:_.settings,stats:_.stats,recentSessions:_.recentSessions,onStartWork:_.startWork,onStartBreak:_.startBreak,onPause:_.pause,onResume:_.resume,onStop:_.stop,onSkipBreak:_.skipBreak,onUpdateSettings:_.updateSettings,formatTime:_.formatTime}),s==="boss"&&c.jsx(L9,{character:n.character,stats:V.stats,boss:o.boss,loading:o.loading,hpPercentage:o.hpPercentage,damageDealt:o.damageDealt,totalDefeated:o.totalDefeated,weekStart:o.weekStart,weekEnd:o.weekEnd}),s==="inventory"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Equipment"}),c.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:["weapon","armor","accessory"].map(R=>{const L=E.getEquipmentBySlot(R);return c.jsxs("div",{style:{flex:"1 1 150px",maxWidth:200,background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textTransform:"uppercase",marginBottom:8},children:R}),L?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:L.item.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",marginBottom:4},children:L.item.definition.name}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>E.unequipItem(R),children:"Unequip"})]}):c.jsx("div",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:"Empty"})]},R)})})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Inventory"}),E.inventory.length===0?c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Your inventory is empty. Complete achievements and defeat bosses to earn items!"}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:12},children:E.inventory.map(R=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${R.definition.rarity==="legendary"?"#ff9800":R.definition.rarity==="epic"?"#9c27b0":R.definition.rarity==="rare"?"#2196f3":R.definition.rarity==="uncommon"?"#4caf50":"var(--border-color)"}`,borderRadius:8,padding:12,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:R.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.85rem",marginBottom:4},children:R.definition.name}),R.quantity>1&&c.jsxs("div",{style:{color:"var(--text-dim)",fontSize:"0.75rem",marginBottom:4},children:["x",R.quantity]}),R.definition.type==="equipment"&&(E.equipped.some(L=>L.inventory_id===R.id)?c.jsx("div",{style:{color:"var(--stat-green)",fontSize:"0.75rem",fontWeight:"bold"},children:"Equipped"}):c.jsx(Pe,{size:"small",onClick:()=>E.equipItem(R.id),children:"Equip"})),R.definition.type==="consumable"&&c.jsx(Pe,{size:"small",onClick:()=>E.useConsumable(R.id),children:"Use"})]},R.id))})]})]}),c.jsxs("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:[ie&&c.jsx(GU,{}),G&&c.jsx(SU,{}),c.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>Ee(!ie),children:ie?"Hide Notifications":"Notifications"}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:()=>K(!G),children:G?"Hide Cloud Backup":"Cloud Backup"}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:ye,children:"Export Save"}),c.jsx(Pe,{size:"small",variant:"ghost",onClick:D,children:"Import Save"})]})]})]}),n.xpFloats.map(R=>c.jsxs("div",{className:Ln.xpFloat,children:["+",R.amount," XP"]},R.id)),n.levelUpInfo&&c.jsx(SO,{level:n.levelUpInfo.level,title:n.levelUpInfo.title,onDismiss:n.dismissLevelUp}),c.jsx(vV,{unlock:g.pendingUnlocks.length>0?g.pendingUnlocks[0]:null,onDismiss:()=>g.dismissUnlock(0)}),c.jsx(t7,{}),z.message&&c.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 20px",background:z.status==="error"?"rgba(231, 76, 60, 0.9)":"rgba(46, 204, 113, 0.9)",color:"#fff",borderRadius:8,fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:z.message})]})}UN.createRoot(document.getElementById("root")).render(c.jsx(k.StrictMode,{children:c.jsx(s7,{})}));
