(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function mN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var s=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(a){var o=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:function(){return n[a]}})}),s}var im={exports:{}},bc={};var IE;function _N(){if(IE)return bc;IE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:n,type:a,key:h,ref:o!==void 0?o:null,props:u}}return bc.Fragment=e,bc.jsx=s,bc.jsxs=s,bc}var kE;function gN(){return kE||(kE=1,im.exports=_N()),im.exports}var c=gN(),am={exports:{}},Ze={};var LE;function yN(){if(LE)return Ze;LE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),C=Symbol.iterator;function q(H){return H===null||typeof H!="object"?null:(H=C&&H[C]||H["@@iterator"],typeof H=="function"?H:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,V={};function z(H,ue,Se){this.props=H,this.context=ue,this.refs=V,this.updater=Se||X}z.prototype.isReactComponent={},z.prototype.setState=function(H,ue){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ue,"setState")},z.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=z.prototype;function Z(H,ue,Se){this.props=H,this.context=ue,this.refs=V,this.updater=Se||X}var ie=Z.prototype=new $;ie.constructor=Z,O(ie,z.prototype),ie.isPureReactComponent=!0;var _e=Array.isArray;function Te(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function U(H,ue,Se){var we=Se.ref;return{$$typeof:n,type:H,key:ue,ref:we!==void 0?we:null,props:Se}}function B(H,ue){return U(H.type,ue,H.props)}function A(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function L(H){var ue={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Se){return ue[Se]})}var k=/\/+/g;function ve(H,ue){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):ue.toString(36)}function Qe(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Te,Te):(H.status="pending",H.then(function(ue){H.status==="pending"&&(H.status="fulfilled",H.value=ue)},function(ue){H.status==="pending"&&(H.status="rejected",H.reason=ue)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Y(H,ue,Se,we,Ye){var st=typeof H;(st==="undefined"||st==="boolean")&&(H=null);var ot=!1;if(H===null)ot=!0;else switch(st){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(H.$$typeof){case n:case e:ot=!0;break;case S:return ot=H._init,Y(ot(H._payload),ue,Se,we,Ye)}}if(ot)return Ye=Ye(H),ot=we===""?"."+ve(H,0):we,_e(Ye)?(Se="",ot!=null&&(Se=ot.replace(k,"$&/")+"/"),Y(Ye,ue,Se,"",function(Si){return Si})):Ye!=null&&(A(Ye)&&(Ye=B(Ye,Se+(Ye.key==null||H&&H.key===Ye.key?"":(""+Ye.key).replace(k,"$&/")+"/")+ot)),ue.push(Ye)),1;ot=0;var nn=we===""?".":we+":";if(_e(H))for(var Vt=0;Vt<H.length;Vt++)we=H[Vt],st=nn+ve(we,Vt),ot+=Y(we,ue,Se,st,Ye);else if(Vt=q(H),typeof Vt=="function")for(H=Vt.call(H),Vt=0;!(we=H.next()).done;)we=we.value,st=nn+ve(we,Vt++),ot+=Y(we,ue,Se,st,Ye);else if(st==="object"){if(typeof H.then=="function")return Y(Qe(H),ue,Se,we,Ye);throw ue=String(H),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return ot}function ne(H,ue,Se){if(H==null)return H;var we=[],Ye=0;return Y(H,we,"","",function(st){return ue.call(Se,st,Ye++)}),we}function be(H){if(H._status===-1){var ue=H._result;ue=ue(),ue.then(function(Se){(H._status===0||H._status===-1)&&(H._status=1,H._result=Se)},function(Se){(H._status===0||H._status===-1)&&(H._status=2,H._result=Se)}),H._status===-1&&(H._status=0,H._result=ue)}if(H._status===1)return H._result.default;throw H._result}var it=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},nt={map:ne,forEach:function(H,ue,Se){ne(H,function(){ue.apply(this,arguments)},Se)},count:function(H){var ue=0;return ne(H,function(){ue++}),ue},toArray:function(H){return ne(H,function(ue){return ue})||[]},only:function(H){if(!A(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ze.Activity=w,Ze.Children=nt,Ze.Component=z,Ze.Fragment=s,Ze.Profiler=o,Ze.PureComponent=Z,Ze.StrictMode=a,Ze.Suspense=v,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(H){return M.H.useMemoCache(H)}},Ze.cache=function(H){return function(){return H.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(H,ue,Se){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var we=O({},H.props),Ye=H.key;if(ue!=null)for(st in ue.key!==void 0&&(Ye=""+ue.key),ue)!D.call(ue,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&ue.ref===void 0||(we[st]=ue[st]);var st=arguments.length-2;if(st===1)we.children=Se;else if(1<st){for(var ot=Array(st),nn=0;nn<st;nn++)ot[nn]=arguments[nn+2];we.children=ot}return U(H.type,Ye,we)},Ze.createContext=function(H){return H={$$typeof:h,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},Ze.createElement=function(H,ue,Se){var we,Ye={},st=null;if(ue!=null)for(we in ue.key!==void 0&&(st=""+ue.key),ue)D.call(ue,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Ye[we]=ue[we]);var ot=arguments.length-2;if(ot===1)Ye.children=Se;else if(1<ot){for(var nn=Array(ot),Vt=0;Vt<ot;Vt++)nn[Vt]=arguments[Vt+2];Ye.children=nn}if(H&&H.defaultProps)for(we in ot=H.defaultProps,ot)Ye[we]===void 0&&(Ye[we]=ot[we]);return U(H,st,Ye)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(H){return{$$typeof:g,render:H}},Ze.isValidElement=A,Ze.lazy=function(H){return{$$typeof:S,_payload:{_status:-1,_result:H},_init:be}},Ze.memo=function(H,ue){return{$$typeof:_,type:H,compare:ue===void 0?null:ue}},Ze.startTransition=function(H){var ue=M.T,Se={};M.T=Se;try{var we=H(),Ye=M.S;Ye!==null&&Ye(Se,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(Te,it)}catch(st){it(st)}finally{ue!==null&&Se.types!==null&&(ue.types=Se.types),M.T=ue}},Ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ze.use=function(H){return M.H.use(H)},Ze.useActionState=function(H,ue,Se){return M.H.useActionState(H,ue,Se)},Ze.useCallback=function(H,ue){return M.H.useCallback(H,ue)},Ze.useContext=function(H){return M.H.useContext(H)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(H,ue){return M.H.useDeferredValue(H,ue)},Ze.useEffect=function(H,ue){return M.H.useEffect(H,ue)},Ze.useEffectEvent=function(H){return M.H.useEffectEvent(H)},Ze.useId=function(){return M.H.useId()},Ze.useImperativeHandle=function(H,ue,Se){return M.H.useImperativeHandle(H,ue,Se)},Ze.useInsertionEffect=function(H,ue){return M.H.useInsertionEffect(H,ue)},Ze.useLayoutEffect=function(H,ue){return M.H.useLayoutEffect(H,ue)},Ze.useMemo=function(H,ue){return M.H.useMemo(H,ue)},Ze.useOptimistic=function(H,ue){return M.H.useOptimistic(H,ue)},Ze.useReducer=function(H,ue,Se){return M.H.useReducer(H,ue,Se)},Ze.useRef=function(H){return M.H.useRef(H)},Ze.useState=function(H){return M.H.useState(H)},Ze.useSyncExternalStore=function(H,ue,Se){return M.H.useSyncExternalStore(H,ue,Se)},Ze.useTransition=function(){return M.H.useTransition()},Ze.version="19.2.4",Ze}var jE;function fp(){return jE||(jE=1,am.exports=yN()),am.exports}var j=fp(),rm={exports:{}},Sc={},om={exports:{}},lm={};var DE;function EN(){return DE||(DE=1,(function(n){function e(Y,ne){var be=Y.length;Y.push(ne);e:for(;0<be;){var it=be-1>>>1,nt=Y[it];if(0<o(nt,ne))Y[it]=ne,Y[be]=nt,be=it;else break e}}function s(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var ne=Y[0],be=Y.pop();if(be!==ne){Y[0]=be;e:for(var it=0,nt=Y.length,H=nt>>>1;it<H;){var ue=2*(it+1)-1,Se=Y[ue],we=ue+1,Ye=Y[we];if(0>o(Se,be))we<nt&&0>o(Ye,Se)?(Y[it]=Ye,Y[we]=be,it=we):(Y[it]=Se,Y[ue]=be,it=ue);else if(we<nt&&0>o(Ye,be))Y[it]=Ye,Y[we]=be,it=we;else break e}}return ne}function o(Y,ne){var be=Y.sortIndex-ne.sortIndex;return be!==0?be:Y.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();n.unstable_now=function(){return h.now()-g}}var v=[],_=[],S=1,w=null,C=3,q=!1,X=!1,O=!1,V=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ie(Y){for(var ne=s(_);ne!==null;){if(ne.callback===null)a(_);else if(ne.startTime<=Y)a(_),ne.sortIndex=ne.expirationTime,e(v,ne);else break;ne=s(_)}}function _e(Y){if(O=!1,ie(Y),!X)if(s(v)!==null)X=!0,Te||(Te=!0,L());else{var ne=s(_);ne!==null&&Qe(_e,ne.startTime-Y)}}var Te=!1,M=-1,D=5,U=-1;function B(){return V?!0:!(n.unstable_now()-U<D)}function A(){if(V=!1,Te){var Y=n.unstable_now();U=Y;var ne=!0;try{e:{X=!1,O&&(O=!1,$(M),M=-1),q=!0;var be=C;try{t:{for(ie(Y),w=s(v);w!==null&&!(w.expirationTime>Y&&B());){var it=w.callback;if(typeof it=="function"){w.callback=null,C=w.priorityLevel;var nt=it(w.expirationTime<=Y);if(Y=n.unstable_now(),typeof nt=="function"){w.callback=nt,ie(Y),ne=!0;break t}w===s(v)&&a(v),ie(Y)}else a(v);w=s(v)}if(w!==null)ne=!0;else{var H=s(_);H!==null&&Qe(_e,H.startTime-Y),ne=!1}}break e}finally{w=null,C=be,q=!1}ne=void 0}}finally{ne?L():Te=!1}}}var L;if(typeof Z=="function")L=function(){Z(A)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ve=k.port2;k.port1.onmessage=A,L=function(){ve.postMessage(null)}}else L=function(){z(A,0)};function Qe(Y,ne){M=z(function(){Y(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var ne=3;break;default:ne=C}var be=C;C=ne;try{return Y()}finally{C=be}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var be=C;C=Y;try{return ne()}finally{C=be}},n.unstable_scheduleCallback=function(Y,ne,be){var it=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?it+be:it):be=it,Y){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=be+nt,Y={id:S++,callback:ne,priorityLevel:Y,startTime:be,expirationTime:nt,sortIndex:-1},be>it?(Y.sortIndex=be,e(_,Y),s(v)===null&&Y===s(_)&&(O?($(M),M=-1):O=!0,Qe(_e,be-it))):(Y.sortIndex=nt,e(v,Y),X||q||(X=!0,Te||(Te=!0,L()))),Y},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(Y){var ne=C;return function(){var be=C;C=ne;try{return Y.apply(this,arguments)}finally{C=be}}}})(lm)),lm}var OE;function vN(){return OE||(OE=1,om.exports=EN()),om.exports}var cm={exports:{}},Jn={};var ME;function TN(){if(ME)return Jn;ME=1;var n=fp();function e(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(v,_,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:v,containerInfo:_,implementation:S}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Jn.createPortal=function(v,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(v,_,null,S)},Jn.flushSync=function(v){var _=h.T,S=a.p;try{if(h.T=null,a.p=2,v)return v()}finally{h.T=_,a.p=S,a.d.f()}},Jn.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(v,_))},Jn.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},Jn.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,q=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?a.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:C,fetchPriority:q}):S==="script"&&a.d.X(v,{crossOrigin:w,integrity:C,fetchPriority:q,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Jn.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);a.d.M(v,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(v)},Jn.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin);a.d.L(v,S,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Jn.preloadModule=function(v,_){if(typeof v=="string")if(_){var S=g(_.as,_.crossOrigin);a.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(v)},Jn.requestFormReset=function(v){a.d.r(v)},Jn.unstable_batchedUpdates=function(v,_){return v(_)},Jn.useFormState=function(v,_,S){return h.H.useFormState(v,_,S)},Jn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jn.version="19.2.4",Jn}var UE;function bN(){if(UE)return cm.exports;UE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cm.exports=TN(),cm.exports}var VE;function SN(){if(VE)return Sc;VE=1;var n=vN(),e=fp(),s=bN();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function v(t){if(u(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,l=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return v(f),t;if(p===l)return v(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==l.return)r=f,l=p;else{for(var T=!1,x=f.child;x;){if(x===r){T=!0,r=f,l=p;break}if(x===l){T=!0,l=f,r=p;break}x=x.sibling}if(!T){for(x=p.child;x;){if(x===r){T=!0,r=p,l=f;break}if(x===l){T=!0,l=p,r=f;break}x=x.sibling}if(!T)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,C=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=A&&t[A]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case _e:return"Suspense";case Te:return"SuspenseList";case U:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case Z:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:ve(t.type)||"Memo";case D:i=t._payload,t=t._init;try{return ve(t(i))}catch{}}return null}var Qe=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},it=[],nt=-1;function H(t){return{current:t}}function ue(t){0>nt||(t.current=it[nt],it[nt]=null,nt--)}function Se(t,i){nt++,it[nt]=t.current,t.current=i}var we=H(null),Ye=H(null),st=H(null),ot=H(null);function nn(t,i){switch(Se(st,i),Se(Ye,t),Se(we,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Zy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Zy(i),t=eE(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(we),Se(we,t)}function Vt(){ue(we),ue(Ye),ue(st)}function Si(t){t.memoizedState!==null&&Se(ot,t);var i=we.current,r=eE(i,t.type);i!==r&&(Se(Ye,t),Se(we,r))}function ka(t){Ye.current===t&&(ue(we),ue(Ye)),ot.current===t&&(ue(ot),yc._currentValue=be)}var Xn,Ni;function Yn(t){if(Xn===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Xn=i&&i[1]||"",Ni=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xn+t+Ni}var La=!1;function Rt(t,i){if(!t||La)return"";La=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(oe){var se=oe}Reflect.construct(t,[],he)}else{try{he.call()}catch(oe){se=oe}t.call(he.prototype)}}else{try{throw Error()}catch(oe){se=oe}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],x=p[1];if(T&&x){var P=T.split(`
`),te=x.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===te.length)for(l=P.length-1,f=te.length-1;1<=l&&0<=f&&P[l]!==te[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==te[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==te[f]){var ce=`
`+P[l].replace(" at new "," at ");return t.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",t.displayName)),ce}while(1<=l&&0<=f);break}}}finally{La=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Yn(r):""}function $i(t,i){switch(t.tag){case 26:case 27:case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return t.child!==i&&i!==null?Yn("Suspense Fallback"):Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return Rt(t.type,!1);case 11:return Rt(t.type.render,!1);case 1:return Rt(t.type,!0);case 31:return Yn("Activity");default:return""}}function ja(t){try{var i="",r=null;do i+=$i(t,r),r=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Qt=Object.prototype.hasOwnProperty,sn=n.unstable_scheduleCallback,As=n.unstable_cancelCallback,Vl=n.unstable_shouldYield,Nr=n.unstable_requestPaint,jn=n.unstable_now,ui=n.unstable_getCurrentPriorityLevel,di=n.unstable_ImmediatePriority,ss=n.unstable_UserBlockingPriority,fi=n.unstable_NormalPriority,go=n.unstable_LowPriority,wr=n.unstable_IdlePriority,yo=n.log,Eo=n.unstable_setDisableYieldValue,Rs=null,Me=null;function is(t){if(typeof yo=="function"&&Eo(t),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Rs,t)}catch{}}var Gt=Math.clz32?Math.clz32:vo,xr=Math.log,Cs=Math.LN2;function vo(t){return t>>>=0,t===0?32:31-(xr(t)/Cs|0)|0}var Tn=256,wi=262144,Jt=4194304;function Is(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ge(t,i,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var x=l&134217727;return x!==0?(l=x&~p,l!==0?f=Is(l):(T&=x,T!==0?f=Is(T):r||(r=x&~t,r!==0&&(f=Is(r))))):(x=l&~p,x!==0?f=Is(x):T!==0?f=Is(T):r||(r=l&~t,r!==0&&(f=Is(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function ks(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Bl(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var t=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),t}function ms(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function hi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ar(t,i,r,l,f,p){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var x=t.entanglements,P=t.expirationTimes,te=t.hiddenUpdates;for(r=T&~r;0<r;){var ce=31-Gt(r),he=1<<ce;x[ce]=0,P[ce]=-1;var se=te[ce];if(se!==null)for(te[ce]=null,ce=0;ce<se.length;ce++){var oe=se[ce];oe!==null&&(oe.lane&=-536870913)}r&=~he}l!==0&&as(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~i))}function as(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Gt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function Da(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var l=31-Gt(r),f=1<<l;f&i|t[l]&i&&(t[l]|=i),r&=~f}}function fn(t,i){var r=i&-i;return r=(r&42)!==0?1:xi(r),(r&(t.suspendedLanes|i))!==0?0:r}function xi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $n(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Rr(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:SE(t.type))}function ps(t,i){var r=ne.p;try{return ne.p=t,i()}finally{ne.p=r}}var Qn=Math.random().toString(36).slice(2),dt="__reactFiber$"+Qn,on="__reactProps$"+Qn,Gs="__reactContainer$"+Qn,Ai="__reactEvents$"+Qn,ql="__reactListeners$"+Qn,Oa="__reactHandles$"+Qn,Cr="__reactResources$"+Qn,rs="__reactMarker$"+Qn;function Ma(t){delete t[dt],delete t[on],delete t[Ai],delete t[ql],delete t[Oa]}function ln(t){var i=t[dt];if(i)return i;for(var r=t.parentNode;r;){if(i=r[Gs]||r[dt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=oE(t);t!==null;){if(r=t[dt])return r;t=oE(t)}return i}t=r,r=t.parentNode}return null}function On(t){if(t=t[dt]||t[Gs]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Mn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Ls(t){var i=t[Cr];return i||(i=t[Cr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Zt(t){t[rs]=!0}var mi=new Set,Ua={};function os(t,i){js(t,i),js(t+"Capture",i)}function js(t,i){for(Ua[t]=i,t=0;t<i.length;t++)mi.add(i[t])}var Xs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qi={},Va={};function Ir(t){return Qt.call(Va,t)?!0:Qt.call(Qi,t)?!1:Xs.test(t)?Va[t]=!0:(Qi[t]=!0,!1)}function Ki(t,i,r){if(Ir(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function ls(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function kt(t,i,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+l)}}function Je(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kn(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ri(t,i,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){r=""+T,p.call(this,T)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function yt(t){if(!t._valueTracker){var i=Kn(t)?"checked":"value";t._valueTracker=Ri(t,i,""+t[i])}}function Ys(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),l="";return t&&(l=Kn(t)?t.checked?"true":"false":t.value),t=l,t!==r?(i.setValue(t),!0):!1}function _s(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Wi=/[\n"\\]/g;function Wn(t){return t.replace(Wi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $s(t,i,r,l,f,p,T,x){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Je(i)):t.value!==""+Je(i)&&(t.value=""+Je(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?Lr(t,T,Je(i)):r!=null?Lr(t,T,Je(r)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.name=""+Je(x):t.removeAttribute("name")}function kr(t,i,r,l,f,p,T,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){yt(t);return}r=r!=null?""+Je(r):"",i=i!=null?""+Je(i):r,x||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=x?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),yt(t)}function Lr(t,i,r){i==="number"&&_s(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Qs(t,i,r,l){if(t=t.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=i.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+Je(r),i=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function jr(t,i,r){if(i!=null&&(i=""+Je(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+Je(r):""}function Ks(t,i,r,l){if(i==null){if(l!=null){if(r!=null)throw Error(a(92));if(Qe(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),i=r}r=Je(i),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),yt(t)}function wn(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var To=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ci(t,i,r){var l=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,r):typeof r!="number"||r===0||To.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function Ii(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&r[f]!==l&&Ci(t,f,l)}else for(var p in i)i.hasOwnProperty(p)&&Ci(t,p,i[p])}function gs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cs(t){return xn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Un(){}var Dr=null;function xe(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ws=null,us=null;function ki(t){var i=On(t);if(i&&(t=i.stateNode)){var r=t[on]||null;e:switch(t=i.stateNode,i.type){case"input":if($s(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Wn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var l=r[i];if(l!==t&&l.form===t.form){var f=l[on]||null;if(!f)throw Error(a(90));$s(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)l=r[i],l.form===t.form&&Ys(l)}break e;case"textarea":jr(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Qs(t,!!r.multiple,i,!1)}}}var Ji=!1;function ys(t,i,r){if(Ji)return t(i,r);Ji=!0;try{var l=t(i);return l}finally{if(Ji=!1,(Ws!==null||us!==null)&&(Du(),Ws&&(i=Ws,t=us,us=Ws=null,ki(i),t)))for(i=0;i<t.length;i++)ki(t[i])}}function hn(t,i){var r=t.stateNode;if(r===null)return null;var l=r[on]||null;if(l===null)return null;r=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pi=!1;if(An)try{var m={};Object.defineProperty(m,"passive",{get:function(){pi=!0}}),window.addEventListener("test",m,m),window.removeEventListener("test",m,m)}catch{pi=!1}var y=null,N=null,R=null;function F(){if(R)return R;var t,i=N,r=i.length,l,f="value"in y?y.value:y.textContent,p=f.length;for(t=0;t<r&&i[t]===f[t];t++);var T=r-t;for(l=1;l<=T&&i[r-l]===f[p-l];l++);return R=f.slice(t,1<l?1-l:void 0)}function W(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function le(){return!0}function Ie(){return!1}function Ue(t){function i(r,l,f,p,T){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(r=t[x],this[x]=r?r(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?le:Ie,this.isPropagationStopped=Ie,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){},isPersistent:le}),i}var ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bt=Ue(ze),en=w({},ze,{view:0,detail:0}),qa=Ue(en),Li,Zi,Js,ea=w({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(Li=t.screenX-Js.screenX,Zi=t.screenY-Js.screenY):Zi=Li=0,Js=t),Li)},movementY:function(t){return"movementY"in t?t.movementY:Zi}}),Or=Ue(ea),ta=w({},ea,{dataTransfer:0}),bo=Ue(ta),So=w({},en,{relatedTarget:0}),na=Ue(So),Mr=w({},ze,{animationName:0,elapsedTime:0,pseudoElement:0}),No=Ue(Mr),Pa=w({},ze,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ur=Ue(Pa),wo=w({},ze,{data:0}),Zs=Ue(wo),xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ao={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ro={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ro[t])?!!i[t]:!1}function ji(){return Co}var Rn=w({},en,{key:function(t){if(t.key){var i=xo[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=W(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ao[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(t){return t.type==="keypress"?W(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Io=Ue(Rn),ko=w({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_i=Ue(ko),d=w({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),E=Ue(d),b=w({},ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Ue(b),J=w({},ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=Ue(J),Ee=w({},ze,{newState:0,oldState:0}),$e=Ue(Ee),Kt=[9,13,27,32],Et=An&&"CompositionEvent"in window,Bt=null;An&&"documentMode"in document&&(Bt=document.documentMode);var K=An&&"TextEvent"in window&&!Bt,fe=An&&(!Et||Bt&&8<Bt&&11>=Bt),Ne=" ",De=!1;function Pe(t,i){switch(t){case"keyup":return Kt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ft(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cn=!1;function Es(t,i){switch(t){case"compositionend":return ft(i);case"keypress":return i.which!==32?null:(De=!0,Ne);case"textInput":return t=i.data,t===Ne&&De?null:t;default:return null}}function ds(t,i){if(Cn)return t==="compositionend"||!Et&&Pe(t,i)?(t=F(),R=N=y=null,Cn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fe&&i.locale!=="ko"?null:i.data;default:return null}}var Ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lo(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ds[t.type]:i==="textarea"}function Di(t,i,r,l){Ws?us?us.push(l):us=[l]:Ws=l,i=Pu(i,"onChange"),0<i.length&&(r=new bt("onChange","change",null,r,l),t.push({event:r,listeners:i}))}var Vr=null,Pl=null;function P1(t){Yy(t,0)}function Zc(t){var i=Mn(t);if(Ys(i))return t}function f_(t,i){if(t==="change")return i}var h_=!1;if(An){var df;if(An){var ff="oninput"in document;if(!ff){var m_=document.createElement("div");m_.setAttribute("oninput","return;"),ff=typeof m_.oninput=="function"}df=ff}else df=!1;h_=df&&(!document.documentMode||9<document.documentMode)}function p_(){Vr&&(Vr.detachEvent("onpropertychange",__),Pl=Vr=null)}function __(t){if(t.propertyName==="value"&&Zc(Pl)){var i=[];Di(i,Pl,t,xe(t)),ys(P1,i)}}function F1(t,i,r){t==="focusin"?(p_(),Vr=i,Pl=r,Vr.attachEvent("onpropertychange",__)):t==="focusout"&&p_()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(Pl)}function H1(t,i){if(t==="click")return Zc(i)}function G1(t,i){if(t==="input"||t==="change")return Zc(i)}function X1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Os=typeof Object.is=="function"?Object.is:X1;function Fl(t,i){if(Os(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),l=Object.keys(i);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!Qt.call(i,f)||!Os(t[f],i[f]))return!1}return!0}function g_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y_(t,i){var r=g_(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=i&&l>=i)return{node:r,offset:i-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=g_(r)}}function E_(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?E_(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function v_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=_s(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=_s(t.document)}return i}function hf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Y1=An&&"documentMode"in document&&11>=document.documentMode,jo=null,mf=null,zl=null,pf=!1;function T_(t,i,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pf||jo==null||jo!==_s(l)||(l=jo,"selectionStart"in l&&hf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Fl(zl,l)||(zl=l,l=Pu(mf,"onSelect"),0<l.length&&(i=new bt("onSelect","select",null,i,r),t.push({event:i,listeners:l}),i.target=jo)))}function Br(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var Do={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},_f={},b_={};An&&(b_=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function qr(t){if(_f[t])return _f[t];if(!Do[t])return t;var i=Do[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in b_)return _f[t]=i[r];return t}var S_=qr("animationend"),N_=qr("animationiteration"),w_=qr("animationstart"),$1=qr("transitionrun"),Q1=qr("transitionstart"),K1=qr("transitioncancel"),x_=qr("transitionend"),A_=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function gi(t,i){A_.set(t,i),os(i,[t])}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ei=[],Oo=0,yf=0;function tu(){for(var t=Oo,i=yf=Oo=0;i<t;){var r=ei[i];ei[i++]=null;var l=ei[i];ei[i++]=null;var f=ei[i];ei[i++]=null;var p=ei[i];if(ei[i++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&R_(r,f,p)}}function nu(t,i,r,l){ei[Oo++]=t,ei[Oo++]=i,ei[Oo++]=r,ei[Oo++]=l,yf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ef(t,i,r,l){return nu(t,i,r,l),su(t)}function Pr(t,i){return nu(t,null,null,i),su(t)}function R_(t,i,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&i!==null&&(f=31-Gt(r),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=r|536870912),p):null}function su(t){if(50<dc)throw dc=0,Rh=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Mo={};function W1(t,i,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(t,i,r,l){return new W1(t,i,r,l)}function vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sa(t,i){var r=t.alternate;return r===null?(r=Ms(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function C_(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function iu(t,i,r,l,f,p){var T=0;if(l=t,typeof t=="function")vf(t)&&(T=1);else if(typeof t=="string")T=nN(t,r,we.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case U:return t=Ms(31,r,i,f),t.elementType=U,t.lanes=p,t;case O:return Fr(r.children,f,p,i);case V:T=8,f|=24;break;case z:return t=Ms(12,r,i,f|2),t.elementType=z,t.lanes=p,t;case _e:return t=Ms(13,r,i,f),t.elementType=_e,t.lanes=p,t;case Te:return t=Ms(19,r,i,f),t.elementType=Te,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:T=10;break e;case $:T=9;break e;case ie:T=11;break e;case M:T=14;break e;case D:T=16,l=null;break e}T=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=Ms(T,r,i,f),i.elementType=t,i.type=l,i.lanes=p,i}function Fr(t,i,r,l){return t=Ms(7,t,l,i),t.lanes=r,t}function Tf(t,i,r){return t=Ms(6,t,null,i),t.lanes=r,t}function I_(t){var i=Ms(18,null,null,0);return i.stateNode=t,i}function bf(t,i,r){return i=Ms(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var k_=new WeakMap;function ti(t,i){if(typeof t=="object"&&t!==null){var r=k_.get(t);return r!==void 0?r:(i={value:t,source:i,stack:ja(i)},k_.set(t,i),i)}return{value:t,source:i,stack:ja(i)}}var Uo=[],Vo=0,au=null,Hl=0,ni=[],si=0,Fa=null,Oi=1,Mi="";function ia(t,i){Uo[Vo++]=Hl,Uo[Vo++]=au,au=t,Hl=i}function L_(t,i,r){ni[si++]=Oi,ni[si++]=Mi,ni[si++]=Fa,Fa=t;var l=Oi;t=Mi;var f=32-Gt(l)-1;l&=~(1<<f),r+=1;var p=32-Gt(i)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,Oi=1<<32-Gt(i)+f|r<<f|l,Mi=p+t}else Oi=1<<p|r<<f|l,Mi=t}function Sf(t){t.return!==null&&(ia(t,1),L_(t,1,0))}function Nf(t){for(;t===au;)au=Uo[--Vo],Uo[Vo]=null,Hl=Uo[--Vo],Uo[Vo]=null;for(;t===Fa;)Fa=ni[--si],ni[si]=null,Mi=ni[--si],ni[si]=null,Oi=ni[--si],ni[si]=null}function j_(t,i){ni[si++]=Oi,ni[si++]=Mi,ni[si++]=Fa,Oi=i.id,Mi=i.overflow,Fa=t}var Vn=null,Xt=null,gt=!1,za=null,ii=!1,wf=Error(a(519));function Ha(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(ti(i,t)),wf}function D_(t){var i=t.stateNode,r=t.type,l=t.memoizedProps;switch(i[dt]=t,i[on]=l,r){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(r=0;r<hc.length;r++)ct(hc[r],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),kr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),Ks(i,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||l.suppressHydrationWarning===!0||Wy(i.textContent,r)?(l.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),l.onScroll!=null&&ct("scroll",i),l.onScrollEnd!=null&&ct("scrollend",i),l.onClick!=null&&(i.onclick=Un),i=!0):i=!1,i||Ha(t,!0)}function O_(t){for(Vn=t.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Vn=Vn.return}}function Bo(t){if(t!==Vn)return!1;if(!gt)return O_(t),gt=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||zh(t.type,t.memoizedProps)),r=!r),r&&Xt&&Ha(t),O_(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Xt=rE(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Xt=rE(t)}else i===27?(i=Xt,ir(t.type)?(t=$h,$h=null,Xt=t):Xt=i):Xt=Vn?ri(t.stateNode.nextSibling):null;return!0}function zr(){Xt=Vn=null,gt=!1}function xf(){var t=za;return t!==null&&(Ss===null?Ss=t:Ss.push.apply(Ss,t),za=null),t}function Gl(t){za===null?za=[t]:za.push(t)}var Af=H(null),Hr=null,aa=null;function Ga(t,i,r){Se(Af,i._currentValue),i._currentValue=r}function ra(t){t._currentValue=Af.current,ue(Af)}function Rf(t,i,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===r)break;t=t.return}}function Cf(t,i,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=f;for(var P=0;P<i.length;P++)if(x.context===i[P]){p.lanes|=r,x=p.alternate,x!==null&&(x.lanes|=r),Rf(p.return,r,t),l||(T=null);break e}p=x.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(a(341));T.lanes|=r,p=T.alternate,p!==null&&(p.lanes|=r),Rf(T,r,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function qo(t,i,r,l){t=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var x=f.type;Os(f.pendingProps.value,T.value)||(t!==null?t.push(x):t=[x])}}else if(f===ot.current){if(T=f.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(yc):t=[yc])}f=f.return}t!==null&&Cf(i,t,r,l),i.flags|=262144}function ru(t){for(t=t.firstContext;t!==null;){if(!Os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gr(t){Hr=t,aa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bn(t){return M_(Hr,t)}function ou(t,i){return Hr===null&&Gr(t),M_(t,i)}function M_(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},aa===null){if(t===null)throw Error(a(308));aa=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else aa=aa.next=i;return r}var J1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},Z1=n.unstable_scheduleCallback,eS=n.unstable_NormalPriority,mn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new J1,data:new Map,refCount:0}}function Xl(t){t.refCount--,t.refCount===0&&Z1(eS,function(){t.controller.abort()})}var Yl=null,kf=0,Po=0,Fo=null;function tS(t,i){if(Yl===null){var r=Yl=[];kf=0,Po=Dh(),Fo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return kf++,i.then(U_,U_),i}function U_(){if(--kf===0&&Yl!==null){Fo!==null&&(Fo.status="fulfilled");var t=Yl;Yl=null,Po=0,Fo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function nS(t,i){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var V_=Y.S;Y.S=function(t,i){Ty=jn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&tS(t,i),V_!==null&&V_(t,i)};var Xr=H(null);function Lf(){var t=Xr.current;return t!==null?t:qt.pooledCache}function lu(t,i){i===null?Se(Xr,Xr.current):Se(Xr,i.pool)}function B_(){var t=Lf();return t===null?null:{parent:mn._currentValue,pool:t}}var zo=Error(a(460)),jf=Error(a(474)),cu=Error(a(542)),uu={then:function(){}};function q_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function P_(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(Un,Un),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,z_(t),t;default:if(typeof i.status=="string")i.then(Un,Un);else{if(t=qt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,z_(t),t}throw $r=i,zo}}function Yr(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?($r=r,zo):r}}var $r=null;function F_(){if($r===null)throw Error(a(459));var t=$r;return $r=null,t}function z_(t){if(t===zo||t===cu)throw Error(a(483))}var Ho=null,$l=0;function du(t){var i=$l;return $l+=1,Ho===null&&(Ho=[]),P_(Ho,t,i)}function Ql(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function fu(t,i){throw i.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function H_(t){function i(Q,G){if(t){var ee=Q.deletions;ee===null?(Q.deletions=[G],Q.flags|=16):ee.push(G)}}function r(Q,G){if(!t)return null;for(;G!==null;)i(Q,G),G=G.sibling;return null}function l(Q){for(var G=new Map;Q!==null;)Q.key!==null?G.set(Q.key,Q):G.set(Q.index,Q),Q=Q.sibling;return G}function f(Q,G){return Q=sa(Q,G),Q.index=0,Q.sibling=null,Q}function p(Q,G,ee){return Q.index=ee,t?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<G?(Q.flags|=67108866,G):ee):(Q.flags|=67108866,G)):(Q.flags|=1048576,G)}function T(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function x(Q,G,ee,de){return G===null||G.tag!==6?(G=Tf(ee,Q.mode,de),G.return=Q,G):(G=f(G,ee),G.return=Q,G)}function P(Q,G,ee,de){var Ve=ee.type;return Ve===O?ce(Q,G,ee.props.children,de,ee.key):G!==null&&(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===D&&Yr(Ve)===G.type)?(G=f(G,ee.props),Ql(G,ee),G.return=Q,G):(G=iu(ee.type,ee.key,ee.props,null,Q.mode,de),Ql(G,ee),G.return=Q,G)}function te(Q,G,ee,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==ee.containerInfo||G.stateNode.implementation!==ee.implementation?(G=bf(ee,Q.mode,de),G.return=Q,G):(G=f(G,ee.children||[]),G.return=Q,G)}function ce(Q,G,ee,de,Ve){return G===null||G.tag!==7?(G=Fr(ee,Q.mode,de,Ve),G.return=Q,G):(G=f(G,ee),G.return=Q,G)}function he(Q,G,ee){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Tf(""+G,Q.mode,ee),G.return=Q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case q:return ee=iu(G.type,G.key,G.props,null,Q.mode,ee),Ql(ee,G),ee.return=Q,ee;case X:return G=bf(G,Q.mode,ee),G.return=Q,G;case D:return G=Yr(G),he(Q,G,ee)}if(Qe(G)||L(G))return G=Fr(G,Q.mode,ee,null),G.return=Q,G;if(typeof G.then=="function")return he(Q,du(G),ee);if(G.$$typeof===Z)return he(Q,ou(Q,G),ee);fu(Q,G)}return null}function se(Q,G,ee,de){var Ve=G!==null?G.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ve!==null?null:x(Q,G,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case q:return ee.key===Ve?P(Q,G,ee,de):null;case X:return ee.key===Ve?te(Q,G,ee,de):null;case D:return ee=Yr(ee),se(Q,G,ee,de)}if(Qe(ee)||L(ee))return Ve!==null?null:ce(Q,G,ee,de,null);if(typeof ee.then=="function")return se(Q,G,du(ee),de);if(ee.$$typeof===Z)return se(Q,G,ou(Q,ee),de);fu(Q,ee)}return null}function oe(Q,G,ee,de,Ve){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(ee)||null,x(G,Q,""+de,Ve);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case q:return Q=Q.get(de.key===null?ee:de.key)||null,P(G,Q,de,Ve);case X:return Q=Q.get(de.key===null?ee:de.key)||null,te(G,Q,de,Ve);case D:return de=Yr(de),oe(Q,G,ee,de,Ve)}if(Qe(de)||L(de))return Q=Q.get(ee)||null,ce(G,Q,de,Ve,null);if(typeof de.then=="function")return oe(Q,G,ee,du(de),Ve);if(de.$$typeof===Z)return oe(Q,G,ee,ou(G,de),Ve);fu(G,de)}return null}function ke(Q,G,ee,de){for(var Ve=null,St=null,Oe=G,rt=G=0,mt=null;Oe!==null&&rt<ee.length;rt++){Oe.index>rt?(mt=Oe,Oe=null):mt=Oe.sibling;var Nt=se(Q,Oe,ee[rt],de);if(Nt===null){Oe===null&&(Oe=mt);break}t&&Oe&&Nt.alternate===null&&i(Q,Oe),G=p(Nt,G,rt),St===null?Ve=Nt:St.sibling=Nt,St=Nt,Oe=mt}if(rt===ee.length)return r(Q,Oe),gt&&ia(Q,rt),Ve;if(Oe===null){for(;rt<ee.length;rt++)Oe=he(Q,ee[rt],de),Oe!==null&&(G=p(Oe,G,rt),St===null?Ve=Oe:St.sibling=Oe,St=Oe);return gt&&ia(Q,rt),Ve}for(Oe=l(Oe);rt<ee.length;rt++)mt=oe(Oe,Q,rt,ee[rt],de),mt!==null&&(t&&mt.alternate!==null&&Oe.delete(mt.key===null?rt:mt.key),G=p(mt,G,rt),St===null?Ve=mt:St.sibling=mt,St=mt);return t&&Oe.forEach(function(cr){return i(Q,cr)}),gt&&ia(Q,rt),Ve}function Fe(Q,G,ee,de){if(ee==null)throw Error(a(151));for(var Ve=null,St=null,Oe=G,rt=G=0,mt=null,Nt=ee.next();Oe!==null&&!Nt.done;rt++,Nt=ee.next()){Oe.index>rt?(mt=Oe,Oe=null):mt=Oe.sibling;var cr=se(Q,Oe,Nt.value,de);if(cr===null){Oe===null&&(Oe=mt);break}t&&Oe&&cr.alternate===null&&i(Q,Oe),G=p(cr,G,rt),St===null?Ve=cr:St.sibling=cr,St=cr,Oe=mt}if(Nt.done)return r(Q,Oe),gt&&ia(Q,rt),Ve;if(Oe===null){for(;!Nt.done;rt++,Nt=ee.next())Nt=he(Q,Nt.value,de),Nt!==null&&(G=p(Nt,G,rt),St===null?Ve=Nt:St.sibling=Nt,St=Nt);return gt&&ia(Q,rt),Ve}for(Oe=l(Oe);!Nt.done;rt++,Nt=ee.next())Nt=oe(Oe,Q,rt,Nt.value,de),Nt!==null&&(t&&Nt.alternate!==null&&Oe.delete(Nt.key===null?rt:Nt.key),G=p(Nt,G,rt),St===null?Ve=Nt:St.sibling=Nt,St=Nt);return t&&Oe.forEach(function(hN){return i(Q,hN)}),gt&&ia(Q,rt),Ve}function Ut(Q,G,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===O&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case q:e:{for(var Ve=ee.key;G!==null;){if(G.key===Ve){if(Ve=ee.type,Ve===O){if(G.tag===7){r(Q,G.sibling),de=f(G,ee.props.children),de.return=Q,Q=de;break e}}else if(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===D&&Yr(Ve)===G.type){r(Q,G.sibling),de=f(G,ee.props),Ql(de,ee),de.return=Q,Q=de;break e}r(Q,G);break}else i(Q,G);G=G.sibling}ee.type===O?(de=Fr(ee.props.children,Q.mode,de,ee.key),de.return=Q,Q=de):(de=iu(ee.type,ee.key,ee.props,null,Q.mode,de),Ql(de,ee),de.return=Q,Q=de)}return T(Q);case X:e:{for(Ve=ee.key;G!==null;){if(G.key===Ve)if(G.tag===4&&G.stateNode.containerInfo===ee.containerInfo&&G.stateNode.implementation===ee.implementation){r(Q,G.sibling),de=f(G,ee.children||[]),de.return=Q,Q=de;break e}else{r(Q,G);break}else i(Q,G);G=G.sibling}de=bf(ee,Q.mode,de),de.return=Q,Q=de}return T(Q);case D:return ee=Yr(ee),Ut(Q,G,ee,de)}if(Qe(ee))return ke(Q,G,ee,de);if(L(ee)){if(Ve=L(ee),typeof Ve!="function")throw Error(a(150));return ee=Ve.call(ee),Fe(Q,G,ee,de)}if(typeof ee.then=="function")return Ut(Q,G,du(ee),de);if(ee.$$typeof===Z)return Ut(Q,G,ou(Q,ee),de);fu(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,G!==null&&G.tag===6?(r(Q,G.sibling),de=f(G,ee),de.return=Q,Q=de):(r(Q,G),de=Tf(ee,Q.mode,de),de.return=Q,Q=de),T(Q)):r(Q,G)}return function(Q,G,ee,de){try{$l=0;var Ve=Ut(Q,G,ee,de);return Ho=null,Ve}catch(Oe){if(Oe===zo||Oe===cu)throw Oe;var St=Ms(29,Oe,null,Q.mode);return St.lanes=de,St.return=Q,St}}}var Qr=H_(!0),G_=H_(!1),Xa=!1;function Df(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ya(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $a(t,i,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(xt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=su(t),R_(t,null,r),i}return nu(t,l,i,r),su(t)}function Kl(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,Da(t,r)}}function Mf(t,i){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Uf=!1;function Wl(){if(Uf){var t=Fo;if(t!==null)throw t}}function Jl(t,i,r,l){Uf=!1;var f=t.updateQueue;Xa=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var P=x,te=P.next;P.next=null,T===null?p=te:T.next=te,T=P;var ce=t.alternate;ce!==null&&(ce=ce.updateQueue,x=ce.lastBaseUpdate,x!==T&&(x===null?ce.firstBaseUpdate=te:x.next=te,ce.lastBaseUpdate=P))}if(p!==null){var he=f.baseState;T=0,ce=te=P=null,x=p;do{var se=x.lane&-536870913,oe=se!==x.lane;if(oe?(ht&se)===se:(l&se)===se){se!==0&&se===Po&&(Uf=!0),ce!==null&&(ce=ce.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ke=t,Fe=x;se=i;var Ut=r;switch(Fe.tag){case 1:if(ke=Fe.payload,typeof ke=="function"){he=ke.call(Ut,he,se);break e}he=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Fe.payload,se=typeof ke=="function"?ke.call(Ut,he,se):ke,se==null)break e;he=w({},he,se);break e;case 2:Xa=!0}}se=x.callback,se!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ce===null?(te=ce=oe,P=he):ce=ce.next=oe,T|=se;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;oe=x,x=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);ce===null&&(P=he),f.baseState=P,f.firstBaseUpdate=te,f.lastBaseUpdate=ce,p===null&&(f.shared.lanes=0),Za|=T,t.lanes=T,t.memoizedState=he}}function X_(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Y_(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)X_(r[t],i)}var Go=H(null),hu=H(0);function $_(t,i){t=pa,Se(hu,t),Se(Go,i),pa=t|i.baseLanes}function Vf(){Se(hu,pa),Se(Go,Go.current)}function Bf(){pa=hu.current,ue(Go),ue(hu)}var Us=H(null),ai=null;function Qa(t){var i=t.alternate;Se(cn,cn.current&1),Se(Us,t),ai===null&&(i===null||Go.current!==null||i.memoizedState!==null)&&(ai=t)}function qf(t){Se(cn,cn.current),Se(Us,t),ai===null&&(ai=t)}function Q_(t){t.tag===22?(Se(cn,cn.current),Se(Us,t),ai===null&&(ai=t)):Ka()}function Ka(){Se(cn,cn.current),Se(Us,Us.current)}function Vs(t){ue(Us),ai===t&&(ai=null),ue(cn)}var cn=H(0);function mu(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Xh(r)||Yh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oa=0,at=null,Ot=null,pn=null,pu=!1,Xo=!1,Kr=!1,_u=0,Zl=0,Yo=null,sS=0;function an(){throw Error(a(321))}function Pf(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Os(t[r],i[r]))return!1;return!0}function Ff(t,i,r,l,f,p){return oa=p,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?Lg:sh,Kr=!1,p=r(l,f),Kr=!1,Xo&&(p=W_(i,r,l,f)),K_(t),p}function K_(t){Y.H=nc;var i=Ot!==null&&Ot.next!==null;if(oa=0,pn=Ot=at=null,pu=!1,Zl=0,Yo=null,i)throw Error(a(300));t===null||_n||(t=t.dependencies,t!==null&&ru(t)&&(_n=!0))}function W_(t,i,r,l){at=t;var f=0;do{if(Xo&&(Yo=null),Zl=0,Xo=!1,25<=f)throw Error(a(301));if(f+=1,pn=Ot=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=jg,p=i(r,l)}while(Xo);return p}function iS(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?ec(i):i,t=t.useState()[0],(Ot!==null?Ot.memoizedState:null)!==t&&(at.flags|=1024),i}function zf(){var t=_u!==0;return _u=0,t}function Hf(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function Gf(t){if(pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}pu=!1}oa=0,pn=Ot=at=null,Xo=!1,Zl=_u=0,Yo=null}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?at.memoizedState=pn=t:pn=pn.next=t,pn}function un(){if(Ot===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var i=pn===null?at.memoizedState:pn.next;if(i!==null)pn=i,Ot=t;else{if(t===null)throw at.alternate===null?Error(a(467)):Error(a(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},pn===null?at.memoizedState=pn=t:pn=pn.next=t}return pn}function gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(t){var i=Zl;return Zl+=1,Yo===null&&(Yo=[]),t=P_(Yo,t,i),i=at,(pn===null?i.memoizedState:pn.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Lg:sh),t}function yu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ec(t);if(t.$$typeof===Z)return Bn(t)}throw Error(a(438,String(t)))}function Xf(t){var i=null,r=at.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var l=at.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=gu(),at.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),l=0;l<t;l++)r[l]=B;return i.index++,r}function la(t,i){return typeof i=="function"?i(t):i}function Eu(t){var i=un();return Yf(i,Ot,t)}function Yf(t,i,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{i=f.next;var x=T=null,P=null,te=i,ce=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(ht&he)===he:(oa&he)===he){var se=te.revertLane;if(se===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===Po&&(ce=!0);else if((oa&se)===se){te=te.next,se===Po&&(ce=!0);continue}else he={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},P===null?(x=P=he,T=p):P=P.next=he,at.lanes|=se,Za|=se;he=te.action,Kr&&r(p,he),p=te.hasEagerState?te.eagerState:r(p,he)}else se={lane:he,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},P===null?(x=P=se,T=p):P=P.next=se,at.lanes|=he,Za|=he;te=te.next}while(te!==null&&te!==i);if(P===null?T=p:P.next=x,!Os(p,t.memoizedState)&&(_n=!0,ce&&(r=Fo,r!==null)))throw r;t.memoizedState=p,t.baseState=T,t.baseQueue=P,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function $f(t){var i=un(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var T=f=f.next;do p=t(p,T.action),T=T.next;while(T!==f);Os(p,i.memoizedState)||(_n=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,l]}function J_(t,i,r){var l=at,f=un(),p=gt;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var T=!Os((Ot||f).memoizedState,r);if(T&&(f.memoizedState=r,_n=!0),f=f.queue,Wf(tg.bind(null,l,f,t),[t]),f.getSnapshot!==i||T||pn!==null&&pn.memoizedState.tag&1){if(l.flags|=2048,$o(9,{destroy:void 0},eg.bind(null,l,f,r,i),null),qt===null)throw Error(a(349));p||(oa&127)!==0||Z_(l,i,r)}return r}function Z_(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=at.updateQueue,i===null?(i=gu(),at.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function eg(t,i,r,l){i.value=r,i.getSnapshot=l,ng(i)&&sg(t)}function tg(t,i,r){return r(function(){ng(i)&&sg(t)})}function ng(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Os(t,r)}catch{return!0}}function sg(t){var i=Pr(t,2);i!==null&&Ns(i,t,2)}function Qf(t){var i=fs();if(typeof t=="function"){var r=t;if(t=r(),Kr){is(!0);try{r()}finally{is(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},i}function ig(t,i,r,l){return t.baseState=r,Yf(t,Ot,typeof l=="function"?l:la)}function aS(t,i,r,l,f){if(bu(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};Y.T!==null?r(!0):p.isTransition=!1,l(p),r=i.pending,r===null?(p.next=i.pending=p,ag(i,p)):(p.next=r.next,i.pending=r.next=p)}}function ag(t,i){var r=i.action,l=i.payload,f=t.state;if(i.isTransition){var p=Y.T,T={};Y.T=T;try{var x=r(f,l),P=Y.S;P!==null&&P(T,x),rg(t,i,x)}catch(te){Kf(t,i,te)}finally{p!==null&&T.types!==null&&(p.types=T.types),Y.T=p}}else try{p=r(f,l),rg(t,i,p)}catch(te){Kf(t,i,te)}}function rg(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){og(t,i,l)},function(l){return Kf(t,i,l)}):og(t,i,r)}function og(t,i,r){i.status="fulfilled",i.value=r,lg(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,ag(t,r)))}function Kf(t,i,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=r,lg(i),i=i.next;while(i!==l)}t.action=null}function lg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function cg(t,i){return i}function ug(t,i){if(gt){var r=qt.formState;if(r!==null){e:{var l=at;if(gt){if(Xt){t:{for(var f=Xt,p=ii;f.nodeType!==8;){if(!p){f=null;break t}if(f=ri(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Xt=ri(f.nextSibling),l=f.data==="F!";break e}}Ha(l)}l=!1}l&&(i=r[0])}}return r=fs(),r.memoizedState=r.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cg,lastRenderedState:i},r.queue=l,r=Cg.bind(null,at,l),l.dispatch=r,l=Qf(!1),p=nh.bind(null,at,!1,l.queue),l=fs(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,r=aS.bind(null,at,f,p,r),f.dispatch=r,l.memoizedState=t,[i,r,!1]}function dg(t){var i=un();return fg(i,Ot,t)}function fg(t,i,r){if(i=Yf(t,i,cg)[0],t=Eu(la)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ec(i)}catch(T){throw T===zo?cu:T}else l=i;i=un();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&(at.flags|=2048,$o(9,{destroy:void 0},rS.bind(null,f,r),null)),[l,p,t]}function rS(t,i){t.action=i}function hg(t){var i=un(),r=Ot;if(r!==null)return fg(i,r,t);un(),i=i.memoizedState,r=un();var l=r.queue.dispatch;return r.memoizedState=t,[i,l,!1]}function $o(t,i,r,l){return t={tag:t,create:r,deps:l,inst:i,next:null},i=at.updateQueue,i===null&&(i=gu(),at.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,i.lastEffect=t),t}function mg(){return un().memoizedState}function vu(t,i,r,l){var f=fs();at.flags|=t,f.memoizedState=$o(1|i,{destroy:void 0},r,l===void 0?null:l)}function Tu(t,i,r,l){var f=un();l=l===void 0?null:l;var p=f.memoizedState.inst;Ot!==null&&l!==null&&Pf(l,Ot.memoizedState.deps)?f.memoizedState=$o(i,p,r,l):(at.flags|=t,f.memoizedState=$o(1|i,p,r,l))}function pg(t,i){vu(8390656,8,t,i)}function Wf(t,i){Tu(2048,8,t,i)}function oS(t){at.flags|=4;var i=at.updateQueue;if(i===null)i=gu(),at.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function _g(t){var i=un().memoizedState;return oS({ref:i,nextImpl:t}),function(){if((xt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function gg(t,i){return Tu(4,2,t,i)}function yg(t,i){return Tu(4,4,t,i)}function Eg(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function vg(t,i,r){r=r!=null?r.concat([t]):null,Tu(4,4,Eg.bind(null,i,t),r)}function Jf(){}function Tg(t,i){var r=un();i=i===void 0?null:i;var l=r.memoizedState;return i!==null&&Pf(i,l[1])?l[0]:(r.memoizedState=[t,i],t)}function bg(t,i){var r=un();i=i===void 0?null:i;var l=r.memoizedState;if(i!==null&&Pf(i,l[1]))return l[0];if(l=t(),Kr){is(!0);try{t()}finally{is(!1)}}return r.memoizedState=[l,i],l}function Zf(t,i,r){return r===void 0||(oa&1073741824)!==0&&(ht&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=Sy(),at.lanes|=t,Za|=t,r)}function Sg(t,i,r,l){return Os(r,i)?r:Go.current!==null?(t=Zf(t,r,l),Os(t,i)||(_n=!0),t):(oa&42)===0||(oa&1073741824)!==0&&(ht&261930)===0?(_n=!0,t.memoizedState=r):(t=Sy(),at.lanes|=t,Za|=t,i)}function Ng(t,i,r,l,f){var p=ne.p;ne.p=p!==0&&8>p?p:8;var T=Y.T,x={};Y.T=x,nh(t,!1,i,r);try{var P=f(),te=Y.S;if(te!==null&&te(x,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ce=nS(P,l);tc(t,i,ce,Ps(t))}else tc(t,i,l,Ps(t))}catch(he){tc(t,i,{then:function(){},status:"rejected",reason:he},Ps())}finally{ne.p=p,T!==null&&x.types!==null&&(T.types=x.types),Y.T=T}}function lS(){}function eh(t,i,r,l){if(t.tag!==5)throw Error(a(476));var f=wg(t).queue;Ng(t,f,i,be,r===null?lS:function(){return xg(t),r(l)})}function wg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:be},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function xg(t){var i=wg(t);i.next===null&&(i=t.alternate.memoizedState),tc(t,i.next.queue,{},Ps())}function th(){return Bn(yc)}function Ag(){return un().memoizedState}function Rg(){return un().memoizedState}function cS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=Ps();t=Ya(r);var l=$a(i,t,r);l!==null&&(Ns(l,i,r),Kl(l,i,r)),i={cache:If()},t.payload=i;return}i=i.return}}function uS(t,i,r){var l=Ps();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},bu(t)?Ig(i,r):(r=Ef(t,i,r,l),r!==null&&(Ns(r,t,l),kg(r,i,l)))}function Cg(t,i,r){var l=Ps();tc(t,i,r,l)}function tc(t,i,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(bu(t))Ig(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,x=p(T,r);if(f.hasEagerState=!0,f.eagerState=x,Os(x,T))return nu(t,i,f,0),qt===null&&tu(),!1}catch{}if(r=Ef(t,i,f,l),r!==null)return Ns(r,t,l),kg(r,i,l),!0}return!1}function nh(t,i,r,l){if(l={lane:2,revertLane:Dh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(i)throw Error(a(479))}else i=Ef(t,r,l,2),i!==null&&Ns(i,t,2)}function bu(t){var i=t.alternate;return t===at||i!==null&&i===at}function Ig(t,i){Xo=pu=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function kg(t,i,r){if((r&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,r|=l,i.lanes=r,Da(t,r)}}var nc={readContext:Bn,use:yu,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};nc.useEffectEvent=an;var Lg={readContext:Bn,use:yu,useCallback:function(t,i){return fs().memoizedState=[t,i===void 0?null:i],t},useContext:Bn,useEffect:pg,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,vu(4194308,4,Eg.bind(null,i,t),r)},useLayoutEffect:function(t,i){return vu(4194308,4,t,i)},useInsertionEffect:function(t,i){vu(4,2,t,i)},useMemo:function(t,i){var r=fs();i=i===void 0?null:i;var l=t();if(Kr){is(!0);try{t()}finally{is(!1)}}return r.memoizedState=[l,i],l},useReducer:function(t,i,r){var l=fs();if(r!==void 0){var f=r(i);if(Kr){is(!0);try{r(i)}finally{is(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=uS.bind(null,at,t),[l.memoizedState,t]},useRef:function(t){var i=fs();return t={current:t},i.memoizedState=t},useState:function(t){t=Qf(t);var i=t.queue,r=Cg.bind(null,at,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:Jf,useDeferredValue:function(t,i){var r=fs();return Zf(r,t,i)},useTransition:function(){var t=Qf(!1);return t=Ng.bind(null,at,t.queue,!0,!1),fs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var l=at,f=fs();if(gt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),qt===null)throw Error(a(349));(ht&127)!==0||Z_(l,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,pg(tg.bind(null,l,p,t),[t]),l.flags|=2048,$o(9,{destroy:void 0},eg.bind(null,l,p,r,i),null),r},useId:function(){var t=fs(),i=qt.identifierPrefix;if(gt){var r=Mi,l=Oi;r=(l&~(1<<32-Gt(l)-1)).toString(32)+r,i="_"+i+"R_"+r,r=_u++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=sS++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:th,useFormState:ug,useActionState:ug,useOptimistic:function(t){var i=fs();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=nh.bind(null,at,!0,r),r.dispatch=i,[t,i]},useMemoCache:Xf,useCacheRefresh:function(){return fs().memoizedState=cS.bind(null,at)},useEffectEvent:function(t){var i=fs(),r={impl:t};return i.memoizedState=r,function(){if((xt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},sh={readContext:Bn,use:yu,useCallback:Tg,useContext:Bn,useEffect:Wf,useImperativeHandle:vg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:bg,useReducer:Eu,useRef:mg,useState:function(){return Eu(la)},useDebugValue:Jf,useDeferredValue:function(t,i){var r=un();return Sg(r,Ot.memoizedState,t,i)},useTransition:function(){var t=Eu(la)[0],i=un().memoizedState;return[typeof t=="boolean"?t:ec(t),i]},useSyncExternalStore:J_,useId:Ag,useHostTransitionStatus:th,useFormState:dg,useActionState:dg,useOptimistic:function(t,i){var r=un();return ig(r,Ot,t,i)},useMemoCache:Xf,useCacheRefresh:Rg};sh.useEffectEvent=_g;var jg={readContext:Bn,use:yu,useCallback:Tg,useContext:Bn,useEffect:Wf,useImperativeHandle:vg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:bg,useReducer:$f,useRef:mg,useState:function(){return $f(la)},useDebugValue:Jf,useDeferredValue:function(t,i){var r=un();return Ot===null?Zf(r,t,i):Sg(r,Ot.memoizedState,t,i)},useTransition:function(){var t=$f(la)[0],i=un().memoizedState;return[typeof t=="boolean"?t:ec(t),i]},useSyncExternalStore:J_,useId:Ag,useHostTransitionStatus:th,useFormState:hg,useActionState:hg,useOptimistic:function(t,i){var r=un();return Ot!==null?ig(r,Ot,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Xf,useCacheRefresh:Rg};jg.useEffectEvent=_g;function ih(t,i,r,l){i=t.memoizedState,r=r(l,i),r=r==null?i:w({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ah={enqueueSetState:function(t,i,r){t=t._reactInternals;var l=Ps(),f=Ya(l);f.payload=i,r!=null&&(f.callback=r),i=$a(t,f,l),i!==null&&(Ns(i,t,l),Kl(i,t,l))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var l=Ps(),f=Ya(l);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=$a(t,f,l),i!==null&&(Ns(i,t,l),Kl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=Ps(),l=Ya(r);l.tag=2,i!=null&&(l.callback=i),i=$a(t,l,r),i!==null&&(Ns(i,t,r),Kl(i,t,r))}};function Dg(t,i,r,l,f,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,T):i.prototype&&i.prototype.isPureReactComponent?!Fl(r,l)||!Fl(f,p):!0}function Og(t,i,r,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,l),i.state!==t&&ah.enqueueReplaceState(i,i.state,null)}function Wr(t,i){var r=i;if("ref"in i){r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}if(t=t.defaultProps){r===i&&(r=w({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function Mg(t){eu(t)}function Ug(t){console.error(t)}function Vg(t){eu(t)}function Su(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Bg(t,i,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function rh(t,i,r){return r=Ya(r),r.tag=3,r.payload={element:null},r.callback=function(){Su(t,i)},r}function qg(t){return t=Ya(t),t.tag=3,t}function Pg(t,i,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Bg(i,r,l)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Bg(i,r,l),typeof f!="function"&&(er===null?er=new Set([this]):er.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function dS(t,i,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=r.alternate,i!==null&&qo(i,r,f,!0),r=Us.current,r!==null){switch(r.tag){case 31:case 13:return ai===null?Ou():r.alternate===null&&rn===0&&(rn=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===uu?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([l]):i.add(l),kh(t,l,f)),!1;case 22:return r.flags|=65536,l===uu?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([l]):r.add(l)),kh(t,l,f)),!1}throw Error(a(435,r.tag))}return kh(t,l,f),Ou(),!1}if(gt)return i=Us.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==wf&&(t=Error(a(422),{cause:l}),Gl(ti(t,r)))):(l!==wf&&(i=Error(a(423),{cause:l}),Gl(ti(i,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ti(l,r),f=rh(t.stateNode,l,f),Mf(t,f),rn!==4&&(rn=2)),!1;var p=Error(a(520),{cause:l});if(p=ti(p,r),uc===null?uc=[p]:uc.push(p),rn!==4&&(rn=2),i===null)return!0;l=ti(l,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=rh(r.stateNode,l,t),Mf(r,t),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(er===null||!er.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=qg(f),Pg(f,t,r,l),Mf(r,f),!1}r=r.return}while(r!==null);return!1}var oh=Error(a(461)),_n=!1;function qn(t,i,r,l){i.child=t===null?G_(i,null,r,l):Qr(i,t.child,r,l)}function Fg(t,i,r,l,f){r=r.render;var p=i.ref;if("ref"in l){var T={};for(var x in l)x!=="ref"&&(T[x]=l[x])}else T=l;return Gr(i),l=Ff(t,i,r,T,p,f),x=zf(),t!==null&&!_n?(Hf(t,i,f),ca(t,i,f)):(gt&&x&&Sf(i),i.flags|=1,qn(t,i,l,f),i.child)}function zg(t,i,r,l,f){if(t===null){var p=r.type;return typeof p=="function"&&!vf(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,Hg(t,i,p,l,f)):(t=iu(r.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!ph(t,f)){var T=p.memoizedProps;if(r=r.compare,r=r!==null?r:Fl,r(T,l)&&t.ref===i.ref)return ca(t,i,f)}return i.flags|=1,t=sa(p,l),t.ref=i.ref,t.return=i,i.child=t}function Hg(t,i,r,l,f){if(t!==null){var p=t.memoizedProps;if(Fl(p,l)&&t.ref===i.ref)if(_n=!1,i.pendingProps=l=p,ph(t,f))(t.flags&131072)!==0&&(_n=!0);else return i.lanes=t.lanes,ca(t,i,f)}return lh(t,i,r,l,f)}function Gg(t,i,r,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,i.child=null;return Xg(t,i,p,r,l)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lu(i,p!==null?p.cachePool:null),p!==null?$_(i,p):Vf(),Q_(i);else return l=i.lanes=536870912,Xg(t,i,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(lu(i,p.cachePool),$_(i,p),Ka(),i.memoizedState=null):(t!==null&&lu(i,null),Vf(),Ka());return qn(t,i,f,r),i.child}function sc(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Xg(t,i,r,l,f){var p=Lf();return p=p===null?null:{parent:mn._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},t!==null&&lu(i,null),Vf(),Q_(i),t!==null&&qo(t,i,l,!0),i.childLanes=f,null}function Nu(t,i){return i=xu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Yg(t,i,r){return Qr(i,t.child,null,r),t=Nu(i,i.pendingProps),t.flags|=2,Vs(i),i.memoizedState=null,t}function fS(t,i,r){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(gt){if(l.mode==="hidden")return t=Nu(i,l),i.lanes=536870912,sc(null,t);if(qf(i),(t=Xt)?(t=aE(t,ii),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},r=I_(t),r.return=i,i.child=r,Vn=i,Xt=null)):t=null,t===null)throw Ha(i);return i.lanes=536870912,null}return Nu(i,l)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(qf(i),f)if(i.flags&256)i.flags&=-257,i=Yg(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(_n||qo(t,i,r,!1),f=(r&t.childLanes)!==0,_n||f){if(l=qt,l!==null&&(T=fn(l,r),T!==0&&T!==p.retryLane))throw p.retryLane=T,Pr(t,T),Ns(l,t,T),oh;Ou(),i=Yg(t,i,r)}else t=p.treeContext,Xt=ri(T.nextSibling),Vn=i,gt=!0,za=null,ii=!1,t!==null&&j_(i,t),i=Nu(i,l),i.flags|=4096;return i}return t=sa(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function wu(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function lh(t,i,r,l,f){return Gr(i),r=Ff(t,i,r,l,void 0,f),l=zf(),t!==null&&!_n?(Hf(t,i,f),ca(t,i,f)):(gt&&l&&Sf(i),i.flags|=1,qn(t,i,r,f),i.child)}function $g(t,i,r,l,f,p){return Gr(i),i.updateQueue=null,r=W_(i,l,r,f),K_(t),l=zf(),t!==null&&!_n?(Hf(t,i,p),ca(t,i,p)):(gt&&l&&Sf(i),i.flags|=1,qn(t,i,r,p),i.child)}function Qg(t,i,r,l,f){if(Gr(i),i.stateNode===null){var p=Mo,T=r.contextType;typeof T=="object"&&T!==null&&(p=Bn(T)),p=new r(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ah,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Df(i),T=r.contextType,p.context=typeof T=="object"&&T!==null?Bn(T):Mo,p.state=i.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(ih(i,r,T,l),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&ah.enqueueReplaceState(p,p.state,null),Jl(i,l,p,f),Wl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){p=i.stateNode;var x=i.memoizedProps,P=Wr(r,x);p.props=P;var te=p.context,ce=r.contextType;T=Mo,typeof ce=="object"&&ce!==null&&(T=Bn(ce));var he=r.getDerivedStateFromProps;ce=typeof he=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,ce||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||te!==T)&&Og(i,p,l,T),Xa=!1;var se=i.memoizedState;p.state=se,Jl(i,l,p,f),Wl(),te=i.memoizedState,x||se!==te||Xa?(typeof he=="function"&&(ih(i,r,he,l),te=i.memoizedState),(P=Xa||Dg(i,r,P,l,se,te,T))?(ce||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=te),p.props=l,p.state=te,p.context=T,l=P):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Of(t,i),T=i.memoizedProps,ce=Wr(r,T),p.props=ce,he=i.pendingProps,se=p.context,te=r.contextType,P=Mo,typeof te=="object"&&te!==null&&(P=Bn(te)),x=r.getDerivedStateFromProps,(te=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==he||se!==P)&&Og(i,p,l,P),Xa=!1,se=i.memoizedState,p.state=se,Jl(i,l,p,f),Wl();var oe=i.memoizedState;T!==he||se!==oe||Xa||t!==null&&t.dependencies!==null&&ru(t.dependencies)?(typeof x=="function"&&(ih(i,r,x,l),oe=i.memoizedState),(ce=Xa||Dg(i,r,ce,l,se,oe,P)||t!==null&&t.dependencies!==null&&ru(t.dependencies))?(te||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,oe,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,oe,P)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=oe),p.props=l,p.state=oe,p.context=P,l=ce):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&se===t.memoizedState||(i.flags|=1024),l=!1)}return p=l,wu(t,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&l?(i.child=Qr(i,t.child,null,f),i.child=Qr(i,null,r,f)):qn(t,i,r,f),i.memoizedState=p.state,t=i.child):t=ca(t,i,f),t}function Kg(t,i,r,l){return zr(),i.flags|=256,qn(t,i,r,l),i.child}var ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uh(t){return{baseLanes:t,cachePool:B_()}}function dh(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=qs),t}function Wg(t,i,r){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(cn.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(gt){if(f?Qa(i):Ka(),(t=Xt)?(t=aE(t,ii),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},r=I_(t),r.return=i,i.child=r,Vn=i,Xt=null)):t=null,t===null)throw Ha(i);return Yh(t)?i.lanes=32:i.lanes=536870912,null}var x=l.children;return l=l.fallback,f?(Ka(),f=i.mode,x=xu({mode:"hidden",children:x},f),l=Fr(l,f,r,null),x.return=i,l.return=i,x.sibling=l,i.child=x,l=i.child,l.memoizedState=uh(r),l.childLanes=dh(t,T,r),i.memoizedState=ch,sc(null,l)):(Qa(i),fh(i,x))}var P=t.memoizedState;if(P!==null&&(x=P.dehydrated,x!==null)){if(p)i.flags&256?(Qa(i),i.flags&=-257,i=hh(t,i,r)):i.memoizedState!==null?(Ka(),i.child=t.child,i.flags|=128,i=null):(Ka(),x=l.fallback,f=i.mode,l=xu({mode:"visible",children:l.children},f),x=Fr(x,f,r,null),x.flags|=2,l.return=i,x.return=i,l.sibling=x,i.child=l,Qr(i,t.child,null,r),l=i.child,l.memoizedState=uh(r),l.childLanes=dh(t,T,r),i.memoizedState=ch,i=sc(null,l));else if(Qa(i),Yh(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var te=T.dgst;T=te,l=Error(a(419)),l.stack="",l.digest=T,Gl({value:l,source:null,stack:null}),i=hh(t,i,r)}else if(_n||qo(t,i,r,!1),T=(r&t.childLanes)!==0,_n||T){if(T=qt,T!==null&&(l=fn(T,r),l!==0&&l!==P.retryLane))throw P.retryLane=l,Pr(t,l),Ns(T,t,l),oh;Xh(x)||Ou(),i=hh(t,i,r)}else Xh(x)?(i.flags|=192,i.child=t.child,i=null):(t=P.treeContext,Xt=ri(x.nextSibling),Vn=i,gt=!0,za=null,ii=!1,t!==null&&j_(i,t),i=fh(i,l.children),i.flags|=4096);return i}return f?(Ka(),x=l.fallback,f=i.mode,P=t.child,te=P.sibling,l=sa(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,te!==null?x=sa(te,x):(x=Fr(x,f,r,null),x.flags|=2),x.return=i,l.return=i,l.sibling=x,i.child=l,sc(null,l),l=i.child,x=t.child.memoizedState,x===null?x=uh(r):(f=x.cachePool,f!==null?(P=mn._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=B_(),x={baseLanes:x.baseLanes|r,cachePool:f}),l.memoizedState=x,l.childLanes=dh(t,T,r),i.memoizedState=ch,sc(t.child,l)):(Qa(i),r=t.child,t=r.sibling,r=sa(r,{mode:"visible",children:l.children}),r.return=i,r.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=r,i.memoizedState=null,r)}function fh(t,i){return i=xu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function xu(t,i){return t=Ms(22,t,null,i),t.lanes=0,t}function hh(t,i,r){return Qr(i,t.child,null,r),t=fh(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Jg(t,i,r){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Rf(t.return,i,r)}function mh(t,i,r,l,f,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:p}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=l,T.tail=r,T.tailMode=f,T.treeForkCount=p)}function Zg(t,i,r){var l=i.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var T=cn.current,x=(T&2)!==0;if(x?(T=T&1|2,i.flags|=128):T&=1,Se(cn,T),qn(t,i,l,r),l=gt?Hl:0,!x&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jg(t,r,i);else if(t.tag===19)Jg(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)t=r.alternate,t!==null&&mu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),mh(i,!1,f,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&mu(t)===null){i.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}mh(i,!0,r,null,p,l);break;case"together":mh(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ca(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),Za|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(qo(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=sa(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=sa(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function ph(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ru(t)))}function hS(t,i,r){switch(i.tag){case 3:nn(i,i.stateNode.containerInfo),Ga(i,mn,t.memoizedState.cache),zr();break;case 27:case 5:Si(i);break;case 4:nn(i,i.stateNode.containerInfo);break;case 10:Ga(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,qf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Qa(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Wg(t,i,r):(Qa(i),t=ca(t,i,r),t!==null?t.sibling:null);Qa(i);break;case 19:var f=(t.flags&128)!==0;if(l=(r&i.childLanes)!==0,l||(qo(t,i,r,!1),l=(r&i.childLanes)!==0),f){if(l)return Zg(t,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Se(cn,cn.current),l)break;return null;case 22:return i.lanes=0,Gg(t,i,r,i.pendingProps);case 24:Ga(i,mn,t.memoizedState.cache)}return ca(t,i,r)}function ey(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)_n=!0;else{if(!ph(t,r)&&(i.flags&128)===0)return _n=!1,hS(t,i,r);_n=(t.flags&131072)!==0}else _n=!1,gt&&(i.flags&1048576)!==0&&L_(i,Hl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Yr(i.elementType),i.type=t,typeof t=="function")vf(t)?(l=Wr(t,l),i.tag=1,i=Qg(null,i,t,l,r)):(i.tag=0,i=lh(null,i,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===ie){i.tag=11,i=Fg(null,i,t,l,r);break e}else if(f===M){i.tag=14,i=zg(null,i,t,l,r);break e}}throw i=ve(t)||t,Error(a(306,i,""))}}return i;case 0:return lh(t,i,i.type,i.pendingProps,r);case 1:return l=i.type,f=Wr(l,i.pendingProps),Qg(t,i,l,f,r);case 3:e:{if(nn(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,Of(t,i),Jl(i,l,null,r);var T=i.memoizedState;if(l=T.cache,Ga(i,mn,l),l!==p.cache&&Cf(i,[mn],r,!0),Wl(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Kg(t,i,l,r);break e}else if(l!==f){f=ti(Error(a(424)),i),Gl(f),i=Kg(t,i,l,r);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Xt=ri(t.firstChild),Vn=i,gt=!0,za=null,ii=!0,r=G_(i,null,l,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zr(),l===f){i=ca(t,i,r);break e}qn(t,i,l,r)}i=i.child}return i;case 26:return wu(t,i),t===null?(r=dE(i.type,null,i.pendingProps,null))?i.memoizedState=r:gt||(r=i.type,t=i.pendingProps,l=Fu(st.current).createElement(r),l[dt]=i,l[on]=t,Pn(l,r,t),Zt(l),i.stateNode=l):i.memoizedState=dE(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Si(i),t===null&&gt&&(l=i.stateNode=lE(i.type,i.pendingProps,st.current),Vn=i,ii=!0,f=Xt,ir(i.type)?($h=f,Xt=ri(l.firstChild)):Xt=f),qn(t,i,i.pendingProps.children,r),wu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&gt&&((f=l=Xt)&&(l=zS(l,i.type,i.pendingProps,ii),l!==null?(i.stateNode=l,Vn=i,Xt=ri(l.firstChild),ii=!1,f=!0):f=!1),f||Ha(i)),Si(i),f=i.type,p=i.pendingProps,T=t!==null?t.memoizedProps:null,l=p.children,zh(f,p)?l=null:T!==null&&zh(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=Ff(t,i,iS,null,null,r),yc._currentValue=f),wu(t,i),qn(t,i,l,r),i.child;case 6:return t===null&&gt&&((t=r=Xt)&&(r=HS(r,i.pendingProps,ii),r!==null?(i.stateNode=r,Vn=i,Xt=null,t=!0):t=!1),t||Ha(i)),null;case 13:return Wg(t,i,r);case 4:return nn(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Qr(i,null,l,r):qn(t,i,l,r),i.child;case 11:return Fg(t,i,i.type,i.pendingProps,r);case 7:return qn(t,i,i.pendingProps,r),i.child;case 8:return qn(t,i,i.pendingProps.children,r),i.child;case 12:return qn(t,i,i.pendingProps.children,r),i.child;case 10:return l=i.pendingProps,Ga(i,i.type,l.value),qn(t,i,l.children,r),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Gr(i),f=Bn(f),l=l(f),i.flags|=1,qn(t,i,l,r),i.child;case 14:return zg(t,i,i.type,i.pendingProps,r);case 15:return Hg(t,i,i.type,i.pendingProps,r);case 19:return Zg(t,i,r);case 31:return fS(t,i,r);case 22:return Gg(t,i,r,i.pendingProps);case 24:return Gr(i),l=Bn(mn),t===null?(f=Lf(),f===null&&(f=qt,p=If(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:l,cache:f},Df(i),Ga(i,mn,f)):((t.lanes&r)!==0&&(Of(t,i),Jl(i,null,null,r),Wl()),f=t.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ga(i,mn,l)):(l=p.cache,Ga(i,mn,l),l!==f.cache&&Cf(i,[mn],r,!0))),qn(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ua(t){t.flags|=4}function _h(t,i,r,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ay())t.flags|=8192;else throw $r=uu,jf}else t.flags&=-16777217}function ty(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_E(i))if(Ay())t.flags|=8192;else throw $r=uu,jf}function Au(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Dn():536870912,t.lanes|=i,Jo|=i)}function ic(t,i){if(!gt)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Yt(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(i)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,i}function mS(t,i,r){var l=i.pendingProps;switch(Nf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return Yt(i),null;case 3:return r=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ra(mn),Vt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bo(i)?ua(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xf())),Yt(i),null;case 26:var f=i.type,p=i.memoizedState;return t===null?(ua(i),p!==null?(Yt(i),ty(i,p)):(Yt(i),_h(i,f,null,l,r))):p?p!==t.memoizedState?(ua(i),Yt(i),ty(i,p)):(Yt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ua(i),Yt(i),_h(i,f,t,l,r)),null;case 27:if(ka(i),r=st.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ua(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}t=we.current,Bo(i)?D_(i):(t=lE(f,l,r),i.stateNode=t,ua(i))}return Yt(i),null;case 5:if(ka(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ua(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}if(p=we.current,Bo(i))D_(i);else{var T=Fu(st.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?T.createElement("select",{is:l.is}):T.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?T.createElement(f,{is:l.is}):T.createElement(f)}}p[dt]=i,p[on]=l;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=p;e:switch(Pn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ua(i)}}return Yt(i),_h(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ua(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=st.current,Bo(i)){if(t=i.stateNode,r=i.memoizedProps,l=null,f=Vn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=i,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Wy(t.nodeValue,r)),t||Ha(i,!0)}else t=Fu(t).createTextNode(l),t[dt]=i,i.stateNode=t}return Yt(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(l=Bo(i),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[dt]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),t=!1}else r=xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(Vs(i),i):(Vs(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Yt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Bo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[dt]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),f=!1}else f=xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vs(i),i):(Vs(i),null)}return Vs(i),(i.flags&128)!==0?(i.lanes=r,i):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),Au(i,i.updateQueue),Yt(i),null);case 4:return Vt(),t===null&&Vh(i.stateNode.containerInfo),Yt(i),null;case 10:return ra(i.type),Yt(i),null;case 19:if(ue(cn),l=i.memoizedState,l===null)return Yt(i),null;if(f=(i.flags&128)!==0,p=l.rendering,p===null)if(f)ic(l,!1);else{if(rn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=mu(t),p!==null){for(i.flags|=128,ic(l,!1),t=p.updateQueue,i.updateQueue=t,Au(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)C_(r,t),r=r.sibling;return Se(cn,cn.current&1|2),gt&&ia(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&jn()>Lu&&(i.flags|=128,f=!0,ic(l,!1),i.lanes=4194304)}else{if(!f)if(t=mu(p),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Au(i,t),ic(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!gt)return Yt(i),null}else 2*jn()-l.renderingStartTime>Lu&&r!==536870912&&(i.flags|=128,f=!0,ic(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(t=l.last,t!==null?t.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=jn(),t.sibling=null,r=cn.current,Se(cn,f?r&1|2:r&1),gt&&ia(i,l.treeForkCount),t):(Yt(i),null);case 22:case 23:return Vs(i),Bf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(r&536870912)!==0&&(i.flags&128)===0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),r=i.updateQueue,r!==null&&Au(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048),t!==null&&ue(Xr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),ra(mn),Yt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function pS(t,i){switch(Nf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ra(mn),Vt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ka(i),null;case 31:if(i.memoizedState!==null){if(Vs(i),i.alternate===null)throw Error(a(340));zr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Vs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));zr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(cn),null;case 4:return Vt(),null;case 10:return ra(i.type),null;case 22:case 23:return Vs(i),Bf(),t!==null&&ue(Xr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ra(mn),null;case 25:return null;default:return null}}function ny(t,i){switch(Nf(i),i.tag){case 3:ra(mn),Vt();break;case 26:case 27:case 5:ka(i);break;case 4:Vt();break;case 31:i.memoizedState!==null&&Vs(i);break;case 13:Vs(i);break;case 19:ue(cn);break;case 10:ra(i.type);break;case 22:case 23:Vs(i),Bf(),t!==null&&ue(Xr);break;case 24:ra(mn)}}function ac(t,i){try{var r=i.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var p=r.create,T=r.inst;l=p(),T.destroy=l}r=r.next}while(r!==f)}}catch(x){jt(i,i.return,x)}}function Wa(t,i,r){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var T=l.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,f=i;var P=r,te=x;try{te()}catch(ce){jt(f,P,ce)}}}l=l.next}while(l!==p)}}catch(ce){jt(i,i.return,ce)}}function sy(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{Y_(i,r)}catch(l){jt(t,t.return,l)}}}function iy(t,i,r){r.props=Wr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){jt(t,i,l)}}function rc(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){jt(t,i,f)}}function Ui(t,i){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){jt(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){jt(t,i,f)}else r.current=null}function ay(t){var i=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){jt(t,t.return,f)}}function gh(t,i,r){try{var l=t.stateNode;US(l,t.type,r,i),l[on]=i}catch(f){jt(t,t.return,f)}}function ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ir(t.type)||t.tag===4}function yh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eh(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Un));else if(l!==4&&(l===27&&ir(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(Eh(t,i,r),t=t.sibling;t!==null;)Eh(t,i,r),t=t.sibling}function Ru(t,i,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(l!==4&&(l===27&&ir(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Ru(t,i,r),t=t.sibling;t!==null;)Ru(t,i,r),t=t.sibling}function oy(t){var i=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Pn(i,l,r),i[dt]=t,i[on]=r}catch(p){jt(t,t.return,p)}}var da=!1,gn=!1,vh=!1,ly=typeof WeakSet=="function"?WeakSet:Set,In=null;function _S(t,i){if(t=t.containerInfo,Ph=Qu,t=v_(t),hf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var T=0,x=-1,P=-1,te=0,ce=0,he=t,se=null;t:for(;;){for(var oe;he!==r||f!==0&&he.nodeType!==3||(x=T+f),he!==p||l!==0&&he.nodeType!==3||(P=T+l),he.nodeType===3&&(T+=he.nodeValue.length),(oe=he.firstChild)!==null;)se=he,he=oe;for(;;){if(he===t)break t;if(se===r&&++te===f&&(x=T),se===p&&++ce===l&&(P=T),(oe=he.nextSibling)!==null)break;he=se,se=he.parentNode}he=oe}r=x===-1||P===-1?null:{start:x,end:P}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fh={focusedElem:t,selectionRange:r},Qu=!1,In=i;In!==null;)if(i=In,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,In=t;else for(;In!==null;){switch(i=In,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var ke=Wr(r.type,f);t=l.getSnapshotBeforeUpdate(ke,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Fe){jt(r,r.return,Fe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)Gh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,In=t;break}In=i.return}}function cy(t,i,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ha(t,r),l&4&&ac(5,r);break;case 1:if(ha(t,r),l&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(T){jt(r,r.return,T)}else{var f=Wr(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){jt(r,r.return,T)}}l&64&&sy(r),l&512&&rc(r,r.return);break;case 3:if(ha(t,r),l&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Y_(t,i)}catch(T){jt(r,r.return,T)}}break;case 27:i===null&&l&4&&oy(r);case 26:case 5:ha(t,r),i===null&&l&4&&ay(r),l&512&&rc(r,r.return);break;case 12:ha(t,r);break;case 31:ha(t,r),l&4&&fy(t,r);break;case 13:ha(t,r),l&4&&hy(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=wS.bind(null,r),GS(t,r))));break;case 22:if(l=r.memoizedState!==null||da,!l){i=i!==null&&i.memoizedState!==null||gn,f=da;var p=gn;da=l,(gn=i)&&!p?ma(t,r,(r.subtreeFlags&8772)!==0):ha(t,r),da=f,gn=p}break;case 30:break;default:ha(t,r)}}function uy(t){var i=t.alternate;i!==null&&(t.alternate=null,uy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ma(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Wt=null,vs=!1;function fa(t,i,r){for(r=r.child;r!==null;)dy(t,i,r),r=r.sibling}function dy(t,i,r){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Rs,r)}catch{}switch(r.tag){case 26:gn||Ui(r,i),fa(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:gn||Ui(r,i);var l=Wt,f=vs;ir(r.type)&&(Wt=r.stateNode,vs=!1),fa(t,i,r),pc(r.stateNode),Wt=l,vs=f;break;case 5:gn||Ui(r,i);case 6:if(l=Wt,f=vs,Wt=null,fa(t,i,r),Wt=l,vs=f,Wt!==null)if(vs)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(r.stateNode)}catch(p){jt(r,i,p)}else try{Wt.removeChild(r.stateNode)}catch(p){jt(r,i,p)}break;case 18:Wt!==null&&(vs?(t=Wt,sE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),rl(t)):sE(Wt,r.stateNode));break;case 4:l=Wt,f=vs,Wt=r.stateNode.containerInfo,vs=!0,fa(t,i,r),Wt=l,vs=f;break;case 0:case 11:case 14:case 15:Wa(2,r,i),gn||Wa(4,r,i),fa(t,i,r);break;case 1:gn||(Ui(r,i),l=r.stateNode,typeof l.componentWillUnmount=="function"&&iy(r,i,l)),fa(t,i,r);break;case 21:fa(t,i,r);break;case 22:gn=(l=gn)||r.memoizedState!==null,fa(t,i,r),gn=l;break;default:fa(t,i,r)}}function fy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{rl(t)}catch(r){jt(i,i.return,r)}}}function hy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{rl(t)}catch(r){jt(i,i.return,r)}}function gS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ly),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ly),i;default:throw Error(a(435,t.tag))}}function Cu(t,i){var r=gS(t);i.forEach(function(l){if(!r.has(l)){r.add(l);var f=xS.bind(null,t,l);l.then(f,f)}})}function Ts(t,i){var r=i.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],p=t,T=i,x=T;e:for(;x!==null;){switch(x.tag){case 27:if(ir(x.type)){Wt=x.stateNode,vs=!1;break e}break;case 5:Wt=x.stateNode,vs=!1;break e;case 3:case 4:Wt=x.stateNode.containerInfo,vs=!0;break e}x=x.return}if(Wt===null)throw Error(a(160));dy(p,T,f),Wt=null,vs=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)my(i,t),i=i.sibling}var yi=null;function my(t,i){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ts(i,t),bs(t),l&4&&(Wa(3,t,t.return),ac(3,t),Wa(5,t,t.return));break;case 1:Ts(i,t),bs(t),l&512&&(gn||r===null||Ui(r,r.return)),l&64&&da&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=yi;if(Ts(i,t),bs(t),l&512&&(gn||r===null||Ui(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[rs]||p[dt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Pn(p,l,r),p[dt]=t,Zt(p),l=p;break e;case"link":var T=mE("link","href",f).get(l+(r.href||""));if(T){for(var x=0;x<T.length;x++)if(p=T[x],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(x,1);break t}}p=f.createElement(l),Pn(p,l,r),f.head.appendChild(p);break;case"meta":if(T=mE("meta","content",f).get(l+(r.content||""))){for(x=0;x<T.length;x++)if(p=T[x],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(x,1);break t}}p=f.createElement(l),Pn(p,l,r),f.head.appendChild(p);break;default:throw Error(a(468,l))}p[dt]=t,Zt(p),l=p}t.stateNode=l}else pE(f,t.type,t.stateNode);else t.stateNode=hE(f,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?pE(f,t.type,t.stateNode):hE(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gh(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ts(i,t),bs(t),l&512&&(gn||r===null||Ui(r,r.return)),r!==null&&l&4&&gh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ts(i,t),bs(t),l&512&&(gn||r===null||Ui(r,r.return)),t.flags&32){f=t.stateNode;try{wn(f,"")}catch(ke){jt(t,t.return,ke)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,gh(t,f,r!==null?r.memoizedProps:f)),l&1024&&(vh=!0);break;case 6:if(Ts(i,t),bs(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(ke){jt(t,t.return,ke)}}break;case 3:if(Gu=null,f=yi,yi=zu(i.containerInfo),Ts(i,t),yi=f,bs(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{rl(i.containerInfo)}catch(ke){jt(t,t.return,ke)}vh&&(vh=!1,py(t));break;case 4:l=yi,yi=zu(t.stateNode.containerInfo),Ts(i,t),bs(t),yi=l;break;case 12:Ts(i,t),bs(t);break;case 31:Ts(i,t),bs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cu(t,l)));break;case 13:Ts(i,t),bs(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ku=jn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cu(t,l)));break;case 22:f=t.memoizedState!==null;var P=r!==null&&r.memoizedState!==null,te=da,ce=gn;if(da=te||f,gn=ce||P,Ts(i,t),gn=ce,da=te,bs(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||P||da||gn||Jr(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){P=r=i;try{if(p=P.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=P.stateNode;var he=P.memoizedProps.style,se=he!=null&&he.hasOwnProperty("display")?he.display:null;x.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ke){jt(P,P.return,ke)}}}else if(i.tag===6){if(r===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(ke){jt(P,P.return,ke)}}}else if(i.tag===18){if(r===null){P=i;try{var oe=P.stateNode;f?iE(oe,!0):iE(P.stateNode,!1)}catch(ke){jt(P,P.return,ke)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Cu(t,r))));break;case 19:Ts(i,t),bs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cu(t,l)));break;case 30:break;case 21:break;default:Ts(i,t),bs(t)}}function bs(t){var i=t.flags;if(i&2){try{for(var r,l=t.return;l!==null;){if(ry(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=yh(t);Ru(t,p,f);break;case 5:var T=r.stateNode;r.flags&32&&(wn(T,""),r.flags&=-33);var x=yh(t);Ru(t,x,T);break;case 3:case 4:var P=r.stateNode.containerInfo,te=yh(t);Eh(t,te,P);break;default:throw Error(a(161))}}catch(ce){jt(t,t.return,ce)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;py(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ha(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)cy(t,i.alternate,i),i=i.sibling}function Jr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Wa(4,i,i.return),Jr(i);break;case 1:Ui(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&iy(i,i.return,r),Jr(i);break;case 27:pc(i.stateNode);case 26:case 5:Ui(i,i.return),Jr(i);break;case 22:i.memoizedState===null&&Jr(i);break;case 30:Jr(i);break;default:Jr(i)}t=t.sibling}}function ma(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:ma(f,p,r),ac(4,p);break;case 1:if(ma(f,p,r),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){jt(l,l.return,te)}if(l=p,f=l.updateQueue,f!==null){var x=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)X_(P[f],x)}catch(te){jt(l,l.return,te)}}r&&T&64&&sy(p),rc(p,p.return);break;case 27:oy(p);case 26:case 5:ma(f,p,r),r&&l===null&&T&4&&ay(p),rc(p,p.return);break;case 12:ma(f,p,r);break;case 31:ma(f,p,r),r&&T&4&&fy(f,p);break;case 13:ma(f,p,r),r&&T&4&&hy(f,p);break;case 22:p.memoizedState===null&&ma(f,p,r),rc(p,p.return);break;case 30:break;default:ma(f,p,r)}i=i.sibling}}function Th(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Xl(r))}function bh(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xl(t))}function Ei(t,i,r,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_y(t,i,r,l),i=i.sibling}function _y(t,i,r,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ei(t,i,r,l),f&2048&&ac(9,i);break;case 1:Ei(t,i,r,l);break;case 3:Ei(t,i,r,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xl(t)));break;case 12:if(f&2048){Ei(t,i,r,l),t=i.stateNode;try{var p=i.memoizedProps,T=p.id,x=p.onPostCommit;typeof x=="function"&&x(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){jt(i,i.return,P)}}else Ei(t,i,r,l);break;case 31:Ei(t,i,r,l);break;case 13:Ei(t,i,r,l);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?Ei(t,i,r,l):oc(t,i):p._visibility&2?Ei(t,i,r,l):(p._visibility|=2,Qo(t,i,r,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Th(T,i);break;case 24:Ei(t,i,r,l),f&2048&&bh(i.alternate,i);break;default:Ei(t,i,r,l)}}function Qo(t,i,r,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,T=i,x=r,P=l,te=T.flags;switch(T.tag){case 0:case 11:case 15:Qo(p,T,x,P,f),ac(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Qo(p,T,x,P,f):oc(p,T):(ce._visibility|=2,Qo(p,T,x,P,f)),f&&te&2048&&Th(T.alternate,T);break;case 24:Qo(p,T,x,P,f),f&&te&2048&&bh(T.alternate,T);break;default:Qo(p,T,x,P,f)}i=i.sibling}}function oc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,l=i,f=l.flags;switch(l.tag){case 22:oc(r,l),f&2048&&Th(l.alternate,l);break;case 24:oc(r,l),f&2048&&bh(l.alternate,l);break;default:oc(r,l)}i=i.sibling}}var lc=8192;function Ko(t,i,r){if(t.subtreeFlags&lc)for(t=t.child;t!==null;)gy(t,i,r),t=t.sibling}function gy(t,i,r){switch(t.tag){case 26:Ko(t,i,r),t.flags&lc&&t.memoizedState!==null&&sN(r,yi,t.memoizedState,t.memoizedProps);break;case 5:Ko(t,i,r);break;case 3:case 4:var l=yi;yi=zu(t.stateNode.containerInfo),Ko(t,i,r),yi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=lc,lc=16777216,Ko(t,i,r),lc=l):Ko(t,i,r));break;default:Ko(t,i,r)}}function yy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function cc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];In=l,vy(l,t)}yy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ey(t),t=t.sibling}function Ey(t){switch(t.tag){case 0:case 11:case 15:cc(t),t.flags&2048&&Wa(9,t,t.return);break;case 3:cc(t);break;case 12:cc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Iu(t)):cc(t);break;default:cc(t)}}function Iu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];In=l,vy(l,t)}yy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Wa(8,i,i.return),Iu(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Iu(i));break;default:Iu(i)}t=t.sibling}}function vy(t,i){for(;In!==null;){var r=In;switch(r.tag){case 0:case 11:case 15:Wa(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,In=l;else e:for(r=t;In!==null;){l=In;var f=l.sibling,p=l.return;if(uy(l),l===r){In=null;break e}if(f!==null){f.return=p,In=f;break e}In=p}}}var yS={getCacheForType:function(t){var i=Bn(mn),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return Bn(mn).controller.signal}},ES=typeof WeakMap=="function"?WeakMap:Map,xt=0,qt=null,lt=null,ht=0,Lt=0,Bs=null,Ja=!1,Wo=!1,Sh=!1,pa=0,rn=0,Za=0,Zr=0,Nh=0,qs=0,Jo=0,uc=null,Ss=null,wh=!1,ku=0,Ty=0,Lu=1/0,ju=null,er=null,bn=0,tr=null,Zo=null,_a=0,xh=0,Ah=null,by=null,dc=0,Rh=null;function Ps(){return(xt&2)!==0&&ht!==0?ht&-ht:Y.T!==null?Dh():Rr()}function Sy(){if(qs===0)if((ht&536870912)===0||gt){var t=wi;wi<<=1,(wi&3932160)===0&&(wi=262144),qs=t}else qs=536870912;return t=Us.current,t!==null&&(t.flags|=32),qs}function Ns(t,i,r){(t===qt&&(Lt===2||Lt===9)||t.cancelPendingCommit!==null)&&(el(t,0),nr(t,ht,qs,!1)),hi(t,r),((xt&2)===0||t!==qt)&&(t===qt&&((xt&2)===0&&(Zr|=r),rn===4&&nr(t,ht,qs,!1)),Vi(t))}function Ny(t,i,r){if((xt&6)!==0)throw Error(a(327));var l=!r&&(i&127)===0&&(i&t.expiredLanes)===0||ks(t,i),f=l?bS(t,i):Ih(t,i,!0),p=l;do{if(f===0){Wo&&!l&&nr(t,i,0,!1);break}else{if(r=t.current.alternate,p&&!vS(r)){f=Ih(t,i,!1),p=!1;continue}if(f===2){if(p=i,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var x=t;f=uc;var P=x.current.memoizedState.isDehydrated;if(P&&(el(x,T).flags|=256),T=Ih(x,T,!1),T!==2){if(Sh&&!P){x.errorRecoveryDisabledLanes|=p,Zr|=p,f=4;break e}p=Ss,Ss=f,p!==null&&(Ss===null?Ss=p:Ss.push.apply(Ss,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){el(t,0),nr(t,i,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:nr(l,i,qs,!Ja);break e;case 2:Ss=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=ku+300-jn(),10<f)){if(nr(l,i,qs,!Ja),ge(l,0,!0)!==0)break e;_a=i,l.timeoutHandle=tE(wy.bind(null,l,r,Ss,ju,wh,i,qs,Zr,Jo,Ja,p,"Throttled",-0,0),f);break e}wy(l,r,Ss,ju,wh,i,qs,Zr,Jo,Ja,p,null,-0,0)}}break}while(!0);Vi(t)}function wy(t,i,r,l,f,p,T,x,P,te,ce,he,se,oe){if(t.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Un},gy(i,p,he);var ke=(p&62914560)===p?ku-jn():(p&4194048)===p?Ty-jn():0;if(ke=iN(he,ke),ke!==null){_a=p,t.cancelPendingCommit=ke(jy.bind(null,t,i,p,r,l,f,T,x,P,ce,he,null,se,oe)),nr(t,p,T,!te);return}}jy(t,i,p,r,l,f,T,x,P)}function vS(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],p=f.getSnapshot;f=f.value;try{if(!Os(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function nr(t,i,r,l){i&=~Nh,i&=~Zr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var p=31-Gt(f),T=1<<p;l[p]=-1,f&=~T}r!==0&&as(t,r,i)}function Du(){return(xt&6)===0?(fc(0),!1):!0}function Ch(){if(lt!==null){if(Lt===0)var t=lt.return;else t=lt,aa=Hr=null,Gf(t),Ho=null,$l=0,t=lt;for(;t!==null;)ny(t.alternate,t),t=t.return;lt=null}}function el(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,qS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),_a=0,Ch(),qt=t,lt=r=sa(t.current,null),ht=i,Lt=0,Bs=null,Ja=!1,Wo=ks(t,i),Sh=!1,Jo=qs=Nh=Zr=Za=rn=0,Ss=uc=null,wh=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Gt(l),p=1<<f;i|=t[f],l&=~p}return pa=i,tu(),r}function xy(t,i){at=null,Y.H=nc,i===zo||i===cu?(i=F_(),Lt=3):i===jf?(i=F_(),Lt=4):Lt=i===oh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bs=i,lt===null&&(rn=1,Su(t,ti(i,t.current)))}function Ay(){var t=Us.current;return t===null?!0:(ht&4194048)===ht?ai===null:(ht&62914560)===ht||(ht&536870912)!==0?t===ai:!1}function Ry(){var t=Y.H;return Y.H=nc,t===null?nc:t}function Cy(){var t=Y.A;return Y.A=yS,t}function Ou(){rn=4,Ja||(ht&4194048)!==ht&&Us.current!==null||(Wo=!0),(Za&134217727)===0&&(Zr&134217727)===0||qt===null||nr(qt,ht,qs,!1)}function Ih(t,i,r){var l=xt;xt|=2;var f=Ry(),p=Cy();(qt!==t||ht!==i)&&(ju=null,el(t,i)),i=!1;var T=rn;e:do try{if(Lt!==0&&lt!==null){var x=lt,P=Bs;switch(Lt){case 8:Ch(),T=6;break e;case 3:case 2:case 9:case 6:Us.current===null&&(i=!0);var te=Lt;if(Lt=0,Bs=null,tl(t,x,P,te),r&&Wo){T=0;break e}break;default:te=Lt,Lt=0,Bs=null,tl(t,x,P,te)}}TS(),T=rn;break}catch(ce){xy(t,ce)}while(!0);return i&&t.shellSuspendCounter++,aa=Hr=null,xt=l,Y.H=f,Y.A=p,lt===null&&(qt=null,ht=0,tu()),T}function TS(){for(;lt!==null;)Iy(lt)}function bS(t,i){var r=xt;xt|=2;var l=Ry(),f=Cy();qt!==t||ht!==i?(ju=null,Lu=jn()+500,el(t,i)):Wo=ks(t,i);e:do try{if(Lt!==0&&lt!==null){i=lt;var p=Bs;t:switch(Lt){case 1:Lt=0,Bs=null,tl(t,i,p,1);break;case 2:case 9:if(q_(p)){Lt=0,Bs=null,ky(i);break}i=function(){Lt!==2&&Lt!==9||qt!==t||(Lt=7),Vi(t)},p.then(i,i);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:q_(p)?(Lt=0,Bs=null,ky(i)):(Lt=0,Bs=null,tl(t,i,p,7));break;case 5:var T=null;switch(lt.tag){case 26:T=lt.memoizedState;case 5:case 27:var x=lt;if(T?_E(T):x.stateNode.complete){Lt=0,Bs=null;var P=x.sibling;if(P!==null)lt=P;else{var te=x.return;te!==null?(lt=te,Mu(te)):lt=null}break t}}Lt=0,Bs=null,tl(t,i,p,5);break;case 6:Lt=0,Bs=null,tl(t,i,p,6);break;case 8:Ch(),rn=6;break e;default:throw Error(a(462))}}SS();break}catch(ce){xy(t,ce)}while(!0);return aa=Hr=null,Y.H=l,Y.A=f,xt=r,lt!==null?0:(qt=null,ht=0,tu(),rn)}function SS(){for(;lt!==null&&!Vl();)Iy(lt)}function Iy(t){var i=ey(t.alternate,t,pa);t.memoizedProps=t.pendingProps,i===null?Mu(t):lt=i}function ky(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=$g(r,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=$g(r,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Gf(i);default:ny(r,i),i=lt=C_(i,pa),i=ey(r,i,pa)}t.memoizedProps=t.pendingProps,i===null?Mu(t):lt=i}function tl(t,i,r,l){aa=Hr=null,Gf(i),Ho=null,$l=0;var f=i.return;try{if(dS(t,f,i,r,ht)){rn=1,Su(t,ti(r,t.current)),lt=null;return}}catch(p){if(f!==null)throw lt=f,p;rn=1,Su(t,ti(r,t.current)),lt=null;return}i.flags&32768?(gt||l===1?t=!0:Wo||(ht&536870912)!==0?t=!1:(Ja=t=!0,(l===2||l===9||l===3||l===6)&&(l=Us.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ly(i,t)):Mu(i)}function Mu(t){var i=t;do{if((i.flags&32768)!==0){Ly(i,Ja);return}t=i.return;var r=mS(i.alternate,i,pa);if(r!==null){lt=r;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=t}while(i!==null);rn===0&&(rn=5)}function Ly(t,i){do{var r=pS(t.alternate,t);if(r!==null){r.flags&=32767,lt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){lt=t;return}lt=t=r}while(t!==null);rn=6,lt=null}function jy(t,i,r,l,f,p,T,x,P){t.cancelPendingCommit=null;do Uu();while(bn!==0);if((xt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=yf,Ar(t,r,p,T,x,P),t===qt&&(lt=qt=null,ht=0),Zo=i,tr=t,_a=r,xh=p,Ah=f,by=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,AS(fi,function(){return Vy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=ne.p,ne.p=2,T=xt,xt|=4;try{_S(t,i,r)}finally{xt=T,ne.p=f,Y.T=l}}bn=1,Dy(),Oy(),My()}}function Dy(){if(bn===1){bn=0;var t=tr,i=Zo,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=Y.T,Y.T=null;var l=ne.p;ne.p=2;var f=xt;xt|=4;try{my(i,t);var p=Fh,T=v_(t.containerInfo),x=p.focusedElem,P=p.selectionRange;if(T!==x&&x&&x.ownerDocument&&E_(x.ownerDocument.documentElement,x)){if(P!==null&&hf(x)){var te=P.start,ce=P.end;if(ce===void 0&&(ce=te),"selectionStart"in x)x.selectionStart=te,x.selectionEnd=Math.min(ce,x.value.length);else{var he=x.ownerDocument||document,se=he&&he.defaultView||window;if(se.getSelection){var oe=se.getSelection(),ke=x.textContent.length,Fe=Math.min(P.start,ke),Ut=P.end===void 0?Fe:Math.min(P.end,ke);!oe.extend&&Fe>Ut&&(T=Ut,Ut=Fe,Fe=T);var Q=y_(x,Fe),G=y_(x,Ut);if(Q&&G&&(oe.rangeCount!==1||oe.anchorNode!==Q.node||oe.anchorOffset!==Q.offset||oe.focusNode!==G.node||oe.focusOffset!==G.offset)){var ee=he.createRange();ee.setStart(Q.node,Q.offset),oe.removeAllRanges(),Fe>Ut?(oe.addRange(ee),oe.extend(G.node,G.offset)):(ee.setEnd(G.node,G.offset),oe.addRange(ee))}}}}for(he=[],oe=x;oe=oe.parentNode;)oe.nodeType===1&&he.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<he.length;x++){var de=he[x];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Qu=!!Ph,Fh=Ph=null}finally{xt=f,ne.p=l,Y.T=r}}t.current=i,bn=2}}function Oy(){if(bn===2){bn=0;var t=tr,i=Zo,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=Y.T,Y.T=null;var l=ne.p;ne.p=2;var f=xt;xt|=4;try{cy(t,i.alternate,i)}finally{xt=f,ne.p=l,Y.T=r}}bn=3}}function My(){if(bn===4||bn===3){bn=0,Nr();var t=tr,i=Zo,r=_a,l=by;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?bn=5:(bn=0,Zo=tr=null,Uy(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(er=null),$n(r),i=i.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Rs,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,f=ne.p,ne.p=2,Y.T=null;try{for(var p=t.onRecoverableError,T=0;T<l.length;T++){var x=l[T];p(x.value,{componentStack:x.stack})}}finally{Y.T=i,ne.p=f}}(_a&3)!==0&&Uu(),Vi(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Rh?dc++:(dc=0,Rh=t):dc=0,fc(0)}}function Uy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Xl(i)))}function Uu(){return Dy(),Oy(),My(),Vy()}function Vy(){if(bn!==5)return!1;var t=tr,i=xh;xh=0;var r=$n(_a),l=Y.T,f=ne.p;try{ne.p=32>r?32:r,Y.T=null,r=Ah,Ah=null;var p=tr,T=_a;if(bn=0,Zo=tr=null,_a=0,(xt&6)!==0)throw Error(a(331));var x=xt;if(xt|=4,Ey(p.current),_y(p,p.current,T,r),xt=x,fc(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Rs,p)}catch{}return!0}finally{ne.p=f,Y.T=l,Uy(t,i)}}function By(t,i,r){i=ti(r,i),i=rh(t.stateNode,i,2),t=$a(t,i,2),t!==null&&(hi(t,2),Vi(t))}function jt(t,i,r){if(t.tag===3)By(t,t,r);else for(;i!==null;){if(i.tag===3){By(i,t,r);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(er===null||!er.has(l))){t=ti(r,t),r=qg(2),l=$a(i,r,2),l!==null&&(Pg(r,l,i,t),hi(l,2),Vi(l));break}}i=i.return}}function kh(t,i,r){var l=t.pingCache;if(l===null){l=t.pingCache=new ES;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(r)||(Sh=!0,f.add(r),t=NS.bind(null,t,i,r),i.then(t,t))}function NS(t,i,r){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,qt===t&&(ht&r)===r&&(rn===4||rn===3&&(ht&62914560)===ht&&300>jn()-ku?(xt&2)===0&&el(t,0):Nh|=r,Jo===ht&&(Jo=0)),Vi(t)}function qy(t,i){i===0&&(i=Dn()),t=Pr(t,i),t!==null&&(hi(t,i),Vi(t))}function wS(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),qy(t,r)}function xS(t,i){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),qy(t,r)}function AS(t,i){return sn(t,i)}var Vu=null,nl=null,Lh=!1,Bu=!1,jh=!1,sr=0;function Vi(t){t!==nl&&t.next===null&&(nl===null?Vu=nl=t:nl=nl.next=t),Bu=!0,Lh||(Lh=!0,CS())}function fc(t,i){if(!jh&&Bu){jh=!0;do for(var r=!1,l=Vu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,x=l.pingedLanes;p=(1<<31-Gt(42|t)+1)-1,p&=f&~(T&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,Hy(l,p))}else p=ht,p=ge(l,l===qt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||ks(l,p)||(r=!0,Hy(l,p));l=l.next}while(r);jh=!1}}function RS(){Py()}function Py(){Bu=Lh=!1;var t=0;sr!==0&&BS()&&(t=sr);for(var i=jn(),r=null,l=Vu;l!==null;){var f=l.next,p=Fy(l,i);p===0?(l.next=null,r===null?Vu=f:r.next=f,f===null&&(nl=r)):(r=l,(t!==0||(p&3)!==0)&&(Bu=!0)),l=f}bn!==0&&bn!==5||fc(t),sr!==0&&(sr=0)}function Fy(t,i){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-Gt(p),x=1<<T,P=f[T];P===-1?((x&r)===0||(x&l)!==0)&&(f[T]=Bl(x,i)):P<=i&&(t.expiredLanes|=x),p&=~x}if(i=qt,r=ht,r=ge(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===i&&(Lt===2||Lt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&As(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||ks(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(l!==null&&As(l),$n(r)){case 2:case 8:r=ss;break;case 32:r=fi;break;case 268435456:r=wr;break;default:r=fi}return l=zy.bind(null,t),r=sn(r,l),t.callbackPriority=i,t.callbackNode=r,i}return l!==null&&l!==null&&As(l),t.callbackPriority=2,t.callbackNode=null,2}function zy(t,i){if(bn!==0&&bn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Uu()&&t.callbackNode!==r)return null;var l=ht;return l=ge(t,t===qt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ny(t,l,i),Fy(t,jn()),t.callbackNode!=null&&t.callbackNode===r?zy.bind(null,t):null)}function Hy(t,i){if(Uu())return null;Ny(t,i,!0)}function CS(){PS(function(){(xt&6)!==0?sn(di,RS):Py()})}function Dh(){if(sr===0){var t=Po;t===0&&(t=Tn,Tn<<=1,(Tn&261888)===0&&(Tn=256)),sr=t}return sr}function Gy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:cs(""+t)}function Xy(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function IS(t,i,r,l,f){if(i==="submit"&&r&&r.stateNode===f){var p=Gy((f[on]||null).action),T=l.submitter;T&&(i=(i=T[on]||null)?Gy(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var x=new bt("action","action",null,l,f);t.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sr!==0){var P=T?Xy(f,T):new FormData(f);eh(r,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(x.preventDefault(),P=T?Xy(f,T):new FormData(f),eh(r,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Oh=0;Oh<gf.length;Oh++){var Mh=gf[Oh],kS=Mh.toLowerCase(),LS=Mh[0].toUpperCase()+Mh.slice(1);gi(kS,"on"+LS)}gi(S_,"onAnimationEnd"),gi(N_,"onAnimationIteration"),gi(w_,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi($1,"onTransitionRun"),gi(Q1,"onTransitionStart"),gi(K1,"onTransitionCancel"),gi(x_,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hc));function Yy(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var T=l.length-1;0<=T;T--){var x=l[T],P=x.instance,te=x.currentTarget;if(x=x.listener,P!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=te;try{p(f)}catch(ce){eu(ce)}f.currentTarget=null,p=P}else for(T=0;T<l.length;T++){if(x=l[T],P=x.instance,te=x.currentTarget,x=x.listener,P!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=te;try{p(f)}catch(ce){eu(ce)}f.currentTarget=null,p=P}}}}function ct(t,i){var r=i[Ai];r===void 0&&(r=i[Ai]=new Set);var l=t+"__bubble";r.has(l)||($y(i,t,2,!1),r.add(l))}function Uh(t,i,r){var l=0;i&&(l|=4),$y(r,t,l,i)}var qu="_reactListening"+Math.random().toString(36).slice(2);function Vh(t){if(!t[qu]){t[qu]=!0,mi.forEach(function(r){r!=="selectionchange"&&(jS.has(r)||Uh(r,!1,t),Uh(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[qu]||(i[qu]=!0,Uh("selectionchange",!1,i))}}function $y(t,i,r,l){switch(SE(i)){case 2:var f=oN;break;case 8:f=lN;break;default:f=Zh}r=f.bind(null,i,r,t),f=void 0,!pi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,r,{capture:!0,passive:f}):t.addEventListener(i,r,!0):f!==void 0?t.addEventListener(i,r,{passive:f}):t.addEventListener(i,r,!1)}function Bh(t,i,r,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var x=l.stateNode.containerInfo;if(x===f)break;if(T===4)for(T=l.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;x!==null;){if(T=ln(x),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){l=p=T;continue e}x=x.parentNode}}l=l.return}ys(function(){var te=p,ce=xe(r),he=[];e:{var se=A_.get(t);if(se!==void 0){var oe=bt,ke=t;switch(t){case"keypress":if(W(r)===0)break e;case"keydown":case"keyup":oe=Io;break;case"focusin":ke="focus",oe=na;break;case"focusout":ke="blur",oe=na;break;case"beforeblur":case"afterblur":oe=na;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=bo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=E;break;case S_:case N_:case w_:oe=No;break;case x_:oe=I;break;case"scroll":case"scrollend":oe=qa;break;case"wheel":oe=ae;break;case"copy":case"cut":case"paste":oe=Ur;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=_i;break;case"toggle":case"beforetoggle":oe=$e}var Fe=(i&4)!==0,Ut=!Fe&&(t==="scroll"||t==="scrollend"),Q=Fe?se!==null?se+"Capture":null:se;Fe=[];for(var G=te,ee;G!==null;){var de=G;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Q===null||(de=hn(G,Q),de!=null&&Fe.push(mc(G,de,ee))),Ut)break;G=G.return}0<Fe.length&&(se=new oe(se,ke,null,r,ce),he.push({event:se,listeners:Fe}))}}if((i&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",se&&r!==Dr&&(ke=r.relatedTarget||r.fromElement)&&(ln(ke)||ke[Gs]))break e;if((oe||se)&&(se=ce.window===ce?ce:(se=ce.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(ke=r.relatedTarget||r.toElement,oe=te,ke=ke?ln(ke):null,ke!==null&&(Ut=u(ke),Fe=ke.tag,ke!==Ut||Fe!==5&&Fe!==27&&Fe!==6)&&(ke=null)):(oe=null,ke=te),oe!==ke)){if(Fe=Or,de="onMouseLeave",Q="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=_i,de="onPointerLeave",Q="onPointerEnter",G="pointer"),Ut=oe==null?se:Mn(oe),ee=ke==null?se:Mn(ke),se=new Fe(de,G+"leave",oe,r,ce),se.target=Ut,se.relatedTarget=ee,de=null,ln(ce)===te&&(Fe=new Fe(Q,G+"enter",ke,r,ce),Fe.target=ee,Fe.relatedTarget=Ut,de=Fe),Ut=de,oe&&ke)t:{for(Fe=DS,Q=oe,G=ke,ee=0,de=Q;de;de=Fe(de))ee++;de=0;for(var Ve=G;Ve;Ve=Fe(Ve))de++;for(;0<ee-de;)Q=Fe(Q),ee--;for(;0<de-ee;)G=Fe(G),de--;for(;ee--;){if(Q===G||G!==null&&Q===G.alternate){Fe=Q;break t}Q=Fe(Q),G=Fe(G)}Fe=null}else Fe=null;oe!==null&&Qy(he,se,oe,Fe,!1),ke!==null&&Ut!==null&&Qy(he,Ut,ke,Fe,!0)}}e:{if(se=te?Mn(te):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var St=f_;else if(Lo(se))if(h_)St=G1;else{St=z1;var Oe=F1}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&gs(te.elementType)&&(St=f_):St=H1;if(St&&(St=St(t,te))){Di(he,St,r,ce);break e}Oe&&Oe(t,se,te),t==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&Lr(se,"number",se.value)}switch(Oe=te?Mn(te):window,t){case"focusin":(Lo(Oe)||Oe.contentEditable==="true")&&(jo=Oe,mf=te,zl=null);break;case"focusout":zl=mf=jo=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,T_(he,r,ce);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":T_(he,r,ce)}var rt;if(Et)e:{switch(t){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Cn?Pe(t,r)&&(mt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(mt="onCompositionStart");mt&&(fe&&r.locale!=="ko"&&(Cn||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Cn&&(rt=F()):(y=ce,N="value"in y?y.value:y.textContent,Cn=!0)),Oe=Pu(te,mt),0<Oe.length&&(mt=new Zs(mt,t,null,r,ce),he.push({event:mt,listeners:Oe}),rt?mt.data=rt:(rt=ft(r),rt!==null&&(mt.data=rt)))),(rt=K?Es(t,r):ds(t,r))&&(mt=Pu(te,"onBeforeInput"),0<mt.length&&(Oe=new Zs("onBeforeInput","beforeinput",null,r,ce),he.push({event:Oe,listeners:mt}),Oe.data=rt)),IS(he,t,te,r,ce)}Yy(he,i)})}function mc(t,i,r){return{instance:t,listener:i,currentTarget:r}}function Pu(t,i){for(var r=i+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=hn(t,r),f!=null&&l.unshift(mc(t,f,p)),f=hn(t,i),f!=null&&l.push(mc(t,f,p))),t.tag===3)return l;t=t.return}return[]}function DS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Qy(t,i,r,l,f){for(var p=i._reactName,T=[];r!==null&&r!==l;){var x=r,P=x.alternate,te=x.stateNode;if(x=x.tag,P!==null&&P===l)break;x!==5&&x!==26&&x!==27||te===null||(P=te,f?(te=hn(r,p),te!=null&&T.unshift(mc(r,te,P))):f||(te=hn(r,p),te!=null&&T.push(mc(r,te,P)))),r=r.return}T.length!==0&&t.push({event:i,listeners:T})}var OS=/\r\n?/g,MS=/\u0000|\uFFFD/g;function Ky(t){return(typeof t=="string"?t:""+t).replace(OS,`
`).replace(MS,"")}function Wy(t,i){return i=Ky(i),Ky(t)===i}function Mt(t,i,r,l,f,p){switch(r){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&wn(t,""+l);break;case"className":ls(t,"class",l);break;case"tabIndex":ls(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(t,r,l);break;case"style":Ii(t,l,p);break;case"data":if(i!=="object"){ls(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=cs(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&Mt(t,i,"name",f.name,f,null),Mt(t,i,"formEncType",f.formEncType,f,null),Mt(t,i,"formMethod",f.formMethod,f,null),Mt(t,i,"formTarget",f.formTarget,f,null)):(Mt(t,i,"encType",f.encType,f,null),Mt(t,i,"method",f.method,f,null),Mt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=cs(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Un);break;case"onScroll":l!=null&&ct("scroll",t);break;case"onScrollEnd":l!=null&&ct("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=cs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":ct("beforetoggle",t),ct("toggle",t),Ki(t,"popover",l);break;case"xlinkActuate":kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":kt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":kt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":kt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":kt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ki(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ba.get(r)||r,Ki(t,r,l))}}function qh(t,i,r,l,f,p){switch(r){case"style":Ii(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&ct("scroll",t);break;case"onScrollEnd":l!=null&&ct("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ua.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=t[on]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Ki(t,r,l)}}}function Pn(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",t),ct("load",t);var l=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var T=r[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Mt(t,i,p,T,r,null)}}f&&Mt(t,i,"srcSet",r.srcSet,r,null),l&&Mt(t,i,"src",r.src,r,null);return;case"input":ct("invalid",t);var x=p=T=f=null,P=null,te=null;for(l in r)if(r.hasOwnProperty(l)){var ce=r[l];if(ce!=null)switch(l){case"name":f=ce;break;case"type":T=ce;break;case"checked":P=ce;break;case"defaultChecked":te=ce;break;case"value":p=ce;break;case"defaultValue":x=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,i));break;default:Mt(t,i,l,ce,r,null)}}kr(t,p,x,P,te,T,f,!1);return;case"select":ct("invalid",t),l=T=p=null;for(f in r)if(r.hasOwnProperty(f)&&(x=r[f],x!=null))switch(f){case"value":p=x;break;case"defaultValue":T=x;break;case"multiple":l=x;default:Mt(t,i,f,x,r,null)}i=p,r=T,t.multiple=!!l,i!=null?Qs(t,!!l,i,!1):r!=null&&Qs(t,!!l,r,!0);return;case"textarea":ct("invalid",t),p=f=l=null;for(T in r)if(r.hasOwnProperty(T)&&(x=r[T],x!=null))switch(T){case"value":l=x;break;case"defaultValue":f=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:Mt(t,i,T,x,r,null)}Ks(t,l,f,p);return;case"option":for(P in r)r.hasOwnProperty(P)&&(l=r[P],l!=null)&&(P==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Mt(t,i,P,l,r,null));return;case"dialog":ct("beforetoggle",t),ct("toggle",t),ct("cancel",t),ct("close",t);break;case"iframe":case"object":ct("load",t);break;case"video":case"audio":for(l=0;l<hc.length;l++)ct(hc[l],t);break;case"image":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"embed":case"source":case"link":ct("error",t),ct("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in r)if(r.hasOwnProperty(te)&&(l=r[te],l!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Mt(t,i,te,l,r,null)}return;default:if(gs(i)){for(ce in r)r.hasOwnProperty(ce)&&(l=r[ce],l!==void 0&&qh(t,i,ce,l,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(l=r[x],l!=null&&Mt(t,i,x,l,r,null))}function US(t,i,r,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,x=null,P=null,te=null,ce=null;for(oe in r){var he=r[oe];if(r.hasOwnProperty(oe)&&he!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":P=he;default:l.hasOwnProperty(oe)||Mt(t,i,oe,null,l,he)}}for(var se in l){var oe=l[se];if(he=r[se],l.hasOwnProperty(se)&&(oe!=null||he!=null))switch(se){case"type":p=oe;break;case"name":f=oe;break;case"checked":te=oe;break;case"defaultChecked":ce=oe;break;case"value":T=oe;break;case"defaultValue":x=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:oe!==he&&Mt(t,i,se,oe,l,he)}}$s(t,T,x,P,te,ce,p,f);return;case"select":oe=T=x=se=null;for(p in r)if(P=r[p],r.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":oe=P;default:l.hasOwnProperty(p)||Mt(t,i,p,null,l,P)}for(f in l)if(p=l[f],P=r[f],l.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":se=p;break;case"defaultValue":x=p;break;case"multiple":T=p;default:p!==P&&Mt(t,i,f,p,l,P)}i=x,r=T,l=oe,se!=null?Qs(t,!!r,se,!1):!!l!=!!r&&(i!=null?Qs(t,!!r,i,!0):Qs(t,!!r,r?[]:"",!1));return;case"textarea":oe=se=null;for(x in r)if(f=r[x],r.hasOwnProperty(x)&&f!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Mt(t,i,x,null,l,f)}for(T in l)if(f=l[T],p=r[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":se=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&Mt(t,i,T,f,l,p)}jr(t,se,oe);return;case"option":for(var ke in r)se=r[ke],r.hasOwnProperty(ke)&&se!=null&&!l.hasOwnProperty(ke)&&(ke==="selected"?t.selected=!1:Mt(t,i,ke,null,l,se));for(P in l)se=l[P],oe=r[P],l.hasOwnProperty(P)&&se!==oe&&(se!=null||oe!=null)&&(P==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":Mt(t,i,P,se,l,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in r)se=r[Fe],r.hasOwnProperty(Fe)&&se!=null&&!l.hasOwnProperty(Fe)&&Mt(t,i,Fe,null,l,se);for(te in l)if(se=l[te],oe=r[te],l.hasOwnProperty(te)&&se!==oe&&(se!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:Mt(t,i,te,se,l,oe)}return;default:if(gs(i)){for(var Ut in r)se=r[Ut],r.hasOwnProperty(Ut)&&se!==void 0&&!l.hasOwnProperty(Ut)&&qh(t,i,Ut,void 0,l,se);for(ce in l)se=l[ce],oe=r[ce],!l.hasOwnProperty(ce)||se===oe||se===void 0&&oe===void 0||qh(t,i,ce,se,l,oe);return}}for(var Q in r)se=r[Q],r.hasOwnProperty(Q)&&se!=null&&!l.hasOwnProperty(Q)&&Mt(t,i,Q,null,l,se);for(he in l)se=l[he],oe=r[he],!l.hasOwnProperty(he)||se===oe||se==null&&oe==null||Mt(t,i,he,se,l,oe)}function Jy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],p=f.transferSize,T=f.initiatorType,x=f.duration;if(p&&x&&Jy(T)){for(T=0,x=f.responseEnd,l+=1;l<r.length;l++){var P=r[l],te=P.startTime;if(te>x)break;var ce=P.transferSize,he=P.initiatorType;ce&&Jy(he)&&(P=P.responseEnd,T+=ce*(P<x?1:(x-te)/(P-te)))}if(--l,i+=8*(p+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ph=null,Fh=null;function Fu(t){return t.nodeType===9?t:t.ownerDocument}function Zy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eE(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function zh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hh=null;function BS(){var t=window.event;return t&&t.type==="popstate"?t===Hh?!1:(Hh=t,!0):(Hh=null,!1)}var tE=typeof setTimeout=="function"?setTimeout:void 0,qS=typeof clearTimeout=="function"?clearTimeout:void 0,nE=typeof Promise=="function"?Promise:void 0,PS=typeof queueMicrotask=="function"?queueMicrotask:typeof nE<"u"?function(t){return nE.resolve(null).then(t).catch(FS)}:tE;function FS(t){setTimeout(function(){throw t})}function ir(t){return t==="head"}function sE(t,i){var r=i,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),rl(i);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")pc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,pc(r);for(var p=r.firstChild;p;){var T=p.nextSibling,x=p.nodeName;p[rs]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=T}}else r==="body"&&pc(t.ownerDocument.body);r=f}while(r);rl(i)}function iE(t,i){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Gh(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Gh(r),Ma(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function zS(t,i,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[rs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=ri(t.nextSibling),t===null)break}return null}function HS(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ri(t.nextSibling),t===null))return null;return t}function aE(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ri(t.nextSibling),t===null))return null;return t}function Xh(t){return t.data==="$?"||t.data==="$~"}function Yh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function GS(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var l=function(){i(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ri(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var $h=null;function rE(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return ri(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function oE(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function lE(t,i,r){switch(i=Fu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function pc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ma(t)}var oi=new Map,cE=new Set;function zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ga=ne.d;ne.d={f:XS,r:YS,D:$S,C:QS,L:KS,m:WS,X:ZS,S:JS,M:eN};function XS(){var t=ga.f(),i=Du();return t||i}function YS(t){var i=On(t);i!==null&&i.tag===5&&i.type==="form"?xg(i):ga.r(t)}var sl=typeof document>"u"?null:document;function uE(t,i,r){var l=sl;if(l&&typeof i=="string"&&i){var f=Wn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),cE.has(f)||(cE.add(f),t={rel:t,crossOrigin:r,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Pn(i,"link",t),Zt(i),l.head.appendChild(i)))}}function $S(t){ga.D(t),uE("dns-prefetch",t,null)}function QS(t,i){ga.C(t,i),uE("preconnect",t,i)}function KS(t,i,r){ga.L(t,i,r);var l=sl;if(l&&t&&i){var f='link[rel="preload"][as="'+Wn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Wn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Wn(r.imageSizes)+'"]')):f+='[href="'+Wn(t)+'"]';var p=f;switch(i){case"style":p=il(t);break;case"script":p=al(t)}oi.has(p)||(t=w({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),oi.set(p,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(_c(p))||i==="script"&&l.querySelector(gc(p))||(i=l.createElement("link"),Pn(i,"link",t),Zt(i),l.head.appendChild(i)))}}function WS(t,i){ga.m(t,i);var r=sl;if(r&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Wn(l)+'"][href="'+Wn(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=al(t)}if(!oi.has(p)&&(t=w({rel:"modulepreload",href:t},i),oi.set(p,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(gc(p)))return}l=r.createElement("link"),Pn(l,"link",t),Zt(l),r.head.appendChild(l)}}}function JS(t,i,r){ga.S(t,i,r);var l=sl;if(l&&t){var f=Ls(l).hoistableStyles,p=il(t);i=i||"default";var T=f.get(p);if(!T){var x={loading:0,preload:null};if(T=l.querySelector(_c(p)))x.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},r),(r=oi.get(p))&&Qh(t,r);var P=T=l.createElement("link");Zt(P),Pn(P,"link",t),P._p=new Promise(function(te,ce){P.onload=te,P.onerror=ce}),P.addEventListener("load",function(){x.loading|=1}),P.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Hu(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:x},f.set(p,T)}}}function ZS(t,i){ga.X(t,i);var r=sl;if(r&&t){var l=Ls(r).hoistableScripts,f=al(t),p=l.get(f);p||(p=r.querySelector(gc(f)),p||(t=w({src:t,async:!0},i),(i=oi.get(f))&&Kh(t,i),p=r.createElement("script"),Zt(p),Pn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function eN(t,i){ga.M(t,i);var r=sl;if(r&&t){var l=Ls(r).hoistableScripts,f=al(t),p=l.get(f);p||(p=r.querySelector(gc(f)),p||(t=w({src:t,async:!0,type:"module"},i),(i=oi.get(f))&&Kh(t,i),p=r.createElement("script"),Zt(p),Pn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function dE(t,i,r,l){var f=(f=st.current)?zu(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=il(r.href),r=Ls(f).hoistableStyles,l=r.get(i),l||(l={type:"style",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=il(r.href);var p=Ls(f).hoistableStyles,T=p.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=f.querySelector(_c(t)))&&!p._p&&(T.instance=p,T.state.loading=5),oi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},oi.set(t,r),p||tN(f,t,r,T.state))),i&&l===null)throw Error(a(528,""));return T}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=al(r),r=Ls(f).hoistableScripts,l=r.get(i),l||(l={type:"script",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function il(t){return'href="'+Wn(t)+'"'}function _c(t){return'link[rel="stylesheet"]['+t+"]"}function fE(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function tN(t,i,r,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Pn(i,"link",r),Zt(i),t.head.appendChild(i))}function al(t){return'[src="'+Wn(t)+'"]'}function gc(t){return"script[async]"+t}function hE(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Wn(r.href)+'"]');if(l)return i.instance=l,Zt(l),l;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Zt(l),Pn(l,"style",f),Hu(l,r.precedence,t),i.instance=l;case"stylesheet":f=il(r.href);var p=t.querySelector(_c(f));if(p)return i.state.loading|=4,i.instance=p,Zt(p),p;l=fE(r),(f=oi.get(f))&&Qh(l,f),p=(t.ownerDocument||t).createElement("link"),Zt(p);var T=p;return T._p=new Promise(function(x,P){T.onload=x,T.onerror=P}),Pn(p,"link",l),i.state.loading|=4,Hu(p,r.precedence,t),i.instance=p;case"script":return p=al(r.src),(f=t.querySelector(gc(p)))?(i.instance=f,Zt(f),f):(l=r,(f=oi.get(p))&&(l=w({},r),Kh(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Zt(f),Pn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Hu(l,r.precedence,t));return i.instance}function Hu(t,i,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var x=l[T];if(x.dataset.precedence===i)p=x;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Qh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Kh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Gu=null;function mE(t,i,r){if(Gu===null){var l=new Map,f=Gu=new Map;f.set(r,l)}else f=Gu,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var p=r[f];if(!(p[rs]||p[dt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=t+T;var x=l.get(T);x?x.push(p):l.set(T,[p])}}return l}function pE(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function nN(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function _E(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function sN(t,i,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=il(l.href),p=i.querySelector(_c(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Xu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=p,Zt(p);return}p=i.ownerDocument||i,l=fE(l),(f=oi.get(f))&&Qh(l,f),p=p.createElement("link"),Zt(p);var T=p;T._p=new Promise(function(x,P){T.onload=x,T.onerror=P}),Pn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Xu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var Wh=0;function iN(t,i){return t.stylesheets&&t.count===0&&$u(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&$u(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&Wh===0&&(Wh=62500*VS());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&$u(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Wh?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yu=null;function $u(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yu=new Map,i.forEach(aN,t),Yu=null,Xu.call(t))}function aN(t,i){if(!(i.state.loading&4)){var r=Yu.get(t);if(r)var l=r.get(null);else{r=new Map,Yu.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),l=T)}l&&r.set(null,l)}f=i.instance,T=f.getAttribute("data-precedence"),p=r.get(T)||l,p===l&&r.set(null,f),r.set(T,f),this.count++,l=Xu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var yc={$$typeof:Z,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function rN(t,i,r,l,f,p,T,x,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.hiddenUpdates=ms(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function gE(t,i,r,l,f,p,T,x,P,te,ce,he){return t=new rN(t,i,r,T,P,te,ce,he,x),i=1,p===!0&&(i|=24),p=Ms(3,null,null,i),t.current=p,p.stateNode=t,i=If(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:i},Df(p),t}function yE(t){return t?(t=Mo,t):Mo}function EE(t,i,r,l,f,p){f=yE(f),l.context===null?l.context=f:l.pendingContext=f,l=Ya(i),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=$a(t,l,i),r!==null&&(Ns(r,t,i),Kl(r,t,i))}function vE(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function Jh(t,i){vE(t,i),(t=t.alternate)&&vE(t,i)}function TE(t){if(t.tag===13||t.tag===31){var i=Pr(t,67108864);i!==null&&Ns(i,t,67108864),Jh(t,67108864)}}function bE(t){if(t.tag===13||t.tag===31){var i=Ps();i=xi(i);var r=Pr(t,i);r!==null&&Ns(r,t,i),Jh(t,i)}}var Qu=!0;function oN(t,i,r,l){var f=Y.T;Y.T=null;var p=ne.p;try{ne.p=2,Zh(t,i,r,l)}finally{ne.p=p,Y.T=f}}function lN(t,i,r,l){var f=Y.T;Y.T=null;var p=ne.p;try{ne.p=8,Zh(t,i,r,l)}finally{ne.p=p,Y.T=f}}function Zh(t,i,r,l){if(Qu){var f=em(l);if(f===null)Bh(t,i,l,Ku,r),NE(t,l);else if(uN(f,t,i,r,l))l.stopPropagation();else if(NE(t,l),i&4&&-1<cN.indexOf(t)){for(;f!==null;){var p=On(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Is(p.pendingLanes);if(T!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var P=1<<31-Gt(T);x.entanglements[1]|=P,T&=~P}Vi(p),(xt&6)===0&&(Lu=jn()+500,fc(0))}}break;case 31:case 13:x=Pr(p,2),x!==null&&Ns(x,p,2),Du(),Jh(p,2)}if(p=em(l),p===null&&Bh(t,i,l,Ku,r),p===f)break;f=p}f!==null&&l.stopPropagation()}else Bh(t,i,l,null,r)}}function em(t){return t=xe(t),tm(t)}var Ku=null;function tm(t){if(Ku=null,t=ln(t),t!==null){var i=u(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=h(i),t!==null)return t;t=null}else if(r===31){if(t=g(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ku=t,null}function SE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ui()){case di:return 2;case ss:return 8;case fi:case go:return 32;case wr:return 268435456;default:return 32}default:return 32}}var nm=!1,ar=null,rr=null,or=null,Ec=new Map,vc=new Map,lr=[],cN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NE(t,i){switch(t){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":Ec.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(i.pointerId)}}function Tc(t,i,r,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=On(i),i!==null&&TE(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function uN(t,i,r,l,f){switch(i){case"focusin":return ar=Tc(ar,t,i,r,l,f),!0;case"dragenter":return rr=Tc(rr,t,i,r,l,f),!0;case"mouseover":return or=Tc(or,t,i,r,l,f),!0;case"pointerover":var p=f.pointerId;return Ec.set(p,Tc(Ec.get(p)||null,t,i,r,l,f)),!0;case"gotpointercapture":return p=f.pointerId,vc.set(p,Tc(vc.get(p)||null,t,i,r,l,f)),!0}return!1}function wE(t){var i=ln(t.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=h(r),i!==null){t.blockedOn=i,ps(t.priority,function(){bE(r)});return}}else if(i===31){if(i=g(r),i!==null){t.blockedOn=i,ps(t.priority,function(){bE(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=em(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);Dr=l,r.target.dispatchEvent(l),Dr=null}else return i=On(r),i!==null&&TE(i),t.blockedOn=r,!1;i.shift()}return!0}function xE(t,i,r){Wu(t)&&r.delete(i)}function dN(){nm=!1,ar!==null&&Wu(ar)&&(ar=null),rr!==null&&Wu(rr)&&(rr=null),or!==null&&Wu(or)&&(or=null),Ec.forEach(xE),vc.forEach(xE)}function Ju(t,i){t.blockedOn===i&&(t.blockedOn=null,nm||(nm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dN)))}var Zu=null;function AE(t){Zu!==t&&(Zu=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zu===t&&(Zu=null);for(var i=0;i<t.length;i+=3){var r=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(tm(l||r)===null)continue;break}var p=On(r);p!==null&&(t.splice(i,3),i-=3,eh(p,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function rl(t){function i(P){return Ju(P,t)}ar!==null&&Ju(ar,t),rr!==null&&Ju(rr,t),or!==null&&Ju(or,t),Ec.forEach(i),vc.forEach(i);for(var r=0;r<lr.length;r++){var l=lr[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<lr.length&&(r=lr[0],r.blockedOn===null);)wE(r),r.blockedOn===null&&lr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],p=r[l+1],T=f[on]||null;if(typeof p=="function")T||AE(r);else if(T){var x=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[on]||null)x=T.formAction;else if(tm(f)!==null)continue}else x=T.action;typeof x=="function"?r[l+1]=x:(r.splice(l,3),l-=3),AE(r)}}}function RE(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function sm(t){this._internalRoot=t}ed.prototype.render=sm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,l=Ps();EE(r,l,t,i,null,null)},ed.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;EE(t.current,2,null,t,null,null),Du(),i[Gs]=null}};function ed(t){this._internalRoot=t}ed.prototype.unstable_scheduleHydration=function(t){if(t){var i=Rr();t={blockedOn:null,target:t,priority:i};for(var r=0;r<lr.length&&i!==0&&i<lr[r].priority;r++);lr.splice(r,0,t),r===0&&wE(t)}};var CE=e.version;if(CE!=="19.2.4")throw Error(a(527,CE,"19.2.4"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var fN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Rs=td.inject(fN),Me=td}catch{}}return Sc.createRoot=function(t,i){if(!o(t))throw Error(a(299));var r=!1,l="",f=Mg,p=Ug,T=Vg;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=gE(t,1,!1,null,null,r,l,null,f,p,T,RE),t[Gs]=i.current,Vh(t),new sm(i)},Sc.hydrateRoot=function(t,i,r){if(!o(t))throw Error(a(299));var l=!1,f="",p=Mg,T=Ug,x=Vg,P=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.formState!==void 0&&(P=r.formState)),i=gE(t,1,!0,i,r??null,l,f,P,p,T,x,RE),i.context=yE(null),r=i.current,l=Ps(),l=xi(l),f=Ya(l),f.callback=null,$a(r,f,l),r=l,i.current.lanes=r,hi(i,r),Vi(i),t[Gs]=i.current,Vh(t),new ed(i)},Sc.version="19.2.4",Sc}var BE;function NN(){if(BE)return rm.exports;BE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rm.exports=SN(),rm.exports}var wN=NN(),um={exports:{}};const xN={},AN=Object.freeze(Object.defineProperty({__proto__:null,default:xN},Symbol.toStringTag,{value:"Module"})),qE=pN(AN);var PE;function RN(){return PE||(PE=1,(function(n,e){var s=void 0,a=function(o){return s||(s=new Promise(function(u,h){var g=typeof o<"u"?o:{},v=g.onAbort;g.onAbort=function(m){h(new Error(m)),v&&v(m)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),n=void 0;var _;_||=typeof g<"u"?g:{};var S=typeof window=="object",w=typeof WorkerGlobalScope<"u",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";_.onRuntimeInitialized=function(){function m(K,fe){switch(typeof fe){case"boolean":Ee(K,fe?1:0);break;case"number":b(K,fe);break;case"string":J(K,fe,-1,-1);break;case"object":if(fe===null)I(K);else if(fe.length!=null){var Ne=Ii(fe,Ci);ae(K,Ne,fe.length,-1),us(Ne)}else $e(K,"Wrong API use : tried to return a value of an unknown type ("+fe+").",-1);break;default:I(K)}}function y(K,fe){for(var Ne=[],De=0;De<K;De+=1){var Pe=Xn(fe+4*De,"i32"),ft=Io(Pe);if(ft===1||ft===2)Pe=E(Pe);else if(ft===3)Pe=_i(Pe);else if(ft===4){ft=Pe,Pe=ko(ft),ft=d(ft);for(var Cn=new Uint8Array(Pe),Es=0;Es<Pe;Es+=1)Cn[Es]=B[ft+Es];Pe=Cn}else Pe=null;Ne.push(Pe)}return Ne}function N(K,fe){this.Qa=K,this.db=fe,this.Oa=1,this.lb=[]}function R(K,fe){if(this.db=fe,fe=di(K)+1,this.eb=Ws(fe),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ss(K,A,this.eb,fe),this.kb=this.eb,this.Za=this.pb=null}function F(K){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),K!=null){var fe=this.filename,Ne="/",De=fe;if(Ne&&(Ne=typeof Ne=="string"?Ne:ms(Ne),De=fe?Qt(Ne+"/"+fe):Ne),fe=is(!0,!0),De=Ma(De,fe),K){if(typeof K=="string"){Ne=Array(K.length);for(var Pe=0,ft=K.length;Pe<ft;++Pe)Ne[Pe]=K.charCodeAt(Pe);K=Ne}os(De,fe|146),Ne=Xs(De,577),Ki(Ne,K,0,K.length,0),Qi(Ne),os(De,fe)}}this.handleError(Ie(this.filename,W)),this.db=Xn(W,"i32"),Et(this.db),this.fb={},this.Sa={}}var W=hn(4),le=_.cwrap,Ie=le("sqlite3_open","number",["string","number"]),Ue=le("sqlite3_close_v2","number",["number"]),ze=le("sqlite3_exec","number",["number","string","number","number","number"]),bt=le("sqlite3_changes","number",["number"]),en=le("sqlite3_prepare_v2","number",["number","string","number","number","number"]),qa=le("sqlite3_sql","string",["number"]),Li=le("sqlite3_normalized_sql","string",["number"]),Zi=le("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Js=le("sqlite3_bind_text","number",["number","number","number","number","number"]),ea=le("sqlite3_bind_blob","number",["number","number","number","number","number"]),Or=le("sqlite3_bind_double","number",["number","number","number"]),ta=le("sqlite3_bind_int","number",["number","number","number"]),bo=le("sqlite3_bind_parameter_index","number",["number","string"]),So=le("sqlite3_step","number",["number"]),na=le("sqlite3_errmsg","string",["number"]),Mr=le("sqlite3_column_count","number",["number"]),No=le("sqlite3_data_count","number",["number"]),Pa=le("sqlite3_column_double","number",["number","number"]),Ur=le("sqlite3_column_text","string",["number","number"]),wo=le("sqlite3_column_blob","number",["number","number"]),Zs=le("sqlite3_column_bytes","number",["number","number"]),xo=le("sqlite3_column_type","number",["number","number"]),Ao=le("sqlite3_column_name","string",["number","number"]),Ro=le("sqlite3_reset","number",["number"]),Co=le("sqlite3_clear_bindings","number",["number"]),ji=le("sqlite3_finalize","number",["number"]),Rn=le("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Io=le("sqlite3_value_type","number",["number"]),ko=le("sqlite3_value_bytes","number",["number"]),_i=le("sqlite3_value_text","string",["number"]),d=le("sqlite3_value_blob","number",["number"]),E=le("sqlite3_value_double","number",["number"]),b=le("sqlite3_result_double","",["number","number"]),I=le("sqlite3_result_null","",["number"]),J=le("sqlite3_result_text","",["number","string","number","number"]),ae=le("sqlite3_result_blob","",["number","number","number","number"]),Ee=le("sqlite3_result_int","",["number","number"]),$e=le("sqlite3_result_error","",["number","string","number"]),Kt=le("sqlite3_aggregate_context","number",["number","number"]),Et=le("RegisterExtensionFunctions","number",["number"]),Bt=le("sqlite3_update_hook","number",["number","number","number"]);N.prototype.bind=function(K){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(K)?this.Cb(K):K!=null&&typeof K=="object"?this.Db(K):!0},N.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var K=So(this.Qa);switch(K){case 100:return!0;case 101:return!1;default:throw this.db.handleError(K)}},N.prototype.wb=function(K){return K==null&&(K=this.Oa,this.Oa+=1),Pa(this.Qa,K)},N.prototype.Gb=function(K){if(K==null&&(K=this.Oa,this.Oa+=1),K=Ur(this.Qa,K),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(K)},N.prototype.Hb=function(K){return K==null&&(K=this.Oa,this.Oa+=1),Ur(this.Qa,K)},N.prototype.getBlob=function(K){K==null&&(K=this.Oa,this.Oa+=1);var fe=Zs(this.Qa,K);K=wo(this.Qa,K);for(var Ne=new Uint8Array(fe),De=0;De<fe;De+=1)Ne[De]=B[K+De];return Ne},N.prototype.get=function(K,fe){fe=fe||{},K!=null&&this.bind(K)&&this.step(),K=[];for(var Ne=No(this.Qa),De=0;De<Ne;De+=1)switch(xo(this.Qa,De)){case 1:var Pe=fe.useBigInt?this.Gb(De):this.wb(De);K.push(Pe);break;case 2:K.push(this.wb(De));break;case 3:K.push(this.Hb(De));break;case 4:K.push(this.getBlob(De));break;default:K.push(null)}return K},N.prototype.getColumnNames=function(){for(var K=[],fe=Mr(this.Qa),Ne=0;Ne<fe;Ne+=1)K.push(Ao(this.Qa,Ne));return K},N.prototype.getAsObject=function(K,fe){K=this.get(K,fe),fe=this.getColumnNames();for(var Ne={},De=0;De<fe.length;De+=1)Ne[fe[De]]=K[De];return Ne},N.prototype.getSQL=function(){return qa(this.Qa)},N.prototype.getNormalizedSQL=function(){return Li(this.Qa)},N.prototype.run=function(K){return K!=null&&this.bind(K),this.step(),this.reset()},N.prototype.sb=function(K,fe){fe==null&&(fe=this.Oa,this.Oa+=1),K=fi(K);var Ne=Ii(K,Ci);this.lb.push(Ne),this.db.handleError(Js(this.Qa,fe,Ne,K.length-1,0))},N.prototype.Bb=function(K,fe){fe==null&&(fe=this.Oa,this.Oa+=1);var Ne=Ii(K,Ci);this.lb.push(Ne),this.db.handleError(ea(this.Qa,fe,Ne,K.length,0))},N.prototype.rb=function(K,fe){fe==null&&(fe=this.Oa,this.Oa+=1),this.db.handleError((K===(K|0)?ta:Or)(this.Qa,fe,K))},N.prototype.Eb=function(K){K==null&&(K=this.Oa,this.Oa+=1),ea(this.Qa,K,0,0,0)},N.prototype.tb=function(K,fe){switch(fe==null&&(fe=this.Oa,this.Oa+=1),typeof K){case"string":this.sb(K,fe);return;case"number":this.rb(K,fe);return;case"bigint":this.sb(K.toString(),fe);return;case"boolean":this.rb(K+0,fe);return;case"object":if(K===null){this.Eb(fe);return}if(K.length!=null){this.Bb(K,fe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+K+")."},N.prototype.Db=function(K){var fe=this;return Object.keys(K).forEach(function(Ne){var De=bo(fe.Qa,Ne);De!==0&&fe.tb(K[Ne],De)}),!0},N.prototype.Cb=function(K){for(var fe=0;fe<K.length;fe+=1)this.tb(K[fe],fe+1);return!0},N.prototype.reset=function(){return this.freemem(),Co(this.Qa)===0&&Ro(this.Qa)===0},N.prototype.freemem=function(){for(var K;(K=this.lb.pop())!==void 0;)us(K)},N.prototype.free=function(){this.freemem();var K=ji(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,K},R.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var K=An(),fe=hn(4);Yn(W),Yn(fe);try{this.db.handleError(Zi(this.db.db,this.kb,-1,W,fe)),this.kb=Xn(fe,"i32");var Ne=Xn(W,"i32");return Ne===0?(this.mb(),{done:!0}):(this.Za=new N(Ne,this.db),this.db.fb[Ne]=this.Za,{value:this.Za,done:!1})}catch(De){throw this.pb=$i(this.kb),this.mb(),De}finally{ys(K)}},R.prototype.mb=function(){us(this.eb),this.eb=null},R.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:$i(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(R.prototype[Symbol.iterator]=function(){return this}),F.prototype.run=function(K,fe){if(!this.db)throw"Database closed";if(fe){K=this.prepare(K,fe);try{K.step()}finally{K.free()}}else this.handleError(ze(this.db,K,0,0,W));return this},F.prototype.exec=function(K,fe,Ne){if(!this.db)throw"Database closed";var De=An(),Pe=null;try{var ft=wn(K),Cn=hn(4);for(K=[];Xn(ft,"i8")!==0;){Yn(W),Yn(Cn),this.handleError(Zi(this.db,ft,-1,W,Cn));var Es=Xn(W,"i32");if(ft=Xn(Cn,"i32"),Es!==0){var ds=null;for(Pe=new N(Es,this),fe!=null&&Pe.bind(fe);Pe.step();)ds===null&&(ds={columns:Pe.getColumnNames(),values:[]},K.push(ds)),ds.values.push(Pe.get(null,Ne));Pe.free()}}return K}catch(Ds){throw Pe&&Pe.free(),Ds}finally{ys(De)}},F.prototype.each=function(K,fe,Ne,De,Pe){typeof fe=="function"&&(De=Ne,Ne=fe,fe=void 0),K=this.prepare(K,fe);try{for(;K.step();)Ne(K.getAsObject(null,Pe))}finally{K.free()}if(typeof De=="function")return De()},F.prototype.prepare=function(K,fe){if(Yn(W),this.handleError(en(this.db,K,-1,W,0)),K=Xn(W,"i32"),K===0)throw"Nothing to prepare";var Ne=new N(K,this);return fe!=null&&Ne.bind(fe),this.fb[K]=Ne},F.prototype.iterateStatements=function(K){return new R(K,this)},F.prototype.export=function(){Object.values(this.fb).forEach(function(fe){fe.free()}),Object.values(this.Sa).forEach(cs),this.Sa={},this.handleError(Ue(this.db));var K=ls(this.filename);return this.handleError(Ie(this.filename,W)),this.db=Xn(W,"i32"),Et(this.db),K},F.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(K){K.free()}),Object.values(this.Sa).forEach(cs),this.Sa={},this.Ya&&(cs(this.Ya),this.Ya=void 0),this.handleError(Ue(this.db)),Zt("/"+this.filename),this.db=null)},F.prototype.handleError=function(K){if(K===0)return null;throw K=na(this.db),Error(K)},F.prototype.getRowsModified=function(){return bt(this.db)},F.prototype.create_function=function(K,fe){Object.prototype.hasOwnProperty.call(this.Sa,K)&&(cs(this.Sa[K]),delete this.Sa[K]);var Ne=Un(function(De,Pe,ft){Pe=y(Pe,ft);try{var Cn=fe.apply(null,Pe)}catch(Es){$e(De,Es,-1);return}m(De,Cn)},"viii");return this.Sa[K]=Ne,this.handleError(Rn(this.db,K,fe.length,1,0,Ne,0,0,0)),this},F.prototype.create_aggregate=function(K,fe){var Ne=fe.init||function(){return null},De=fe.finalize||function(ds){return ds},Pe=fe.step;if(!Pe)throw"An aggregate function must have a step function in "+K;var ft={};Object.hasOwnProperty.call(this.Sa,K)&&(cs(this.Sa[K]),delete this.Sa[K]),fe=K+"__finalize",Object.hasOwnProperty.call(this.Sa,fe)&&(cs(this.Sa[fe]),delete this.Sa[fe]);var Cn=Un(function(ds,Ds,Lo){var Di=Kt(ds,1);Object.hasOwnProperty.call(ft,Di)||(ft[Di]=Ne()),Ds=y(Ds,Lo),Ds=[ft[Di]].concat(Ds);try{ft[Di]=Pe.apply(null,Ds)}catch(Vr){delete ft[Di],$e(ds,Vr,-1)}},"viii"),Es=Un(function(ds){var Ds=Kt(ds,1);try{var Lo=De(ft[Ds])}catch(Di){delete ft[Ds],$e(ds,Di,-1);return}m(ds,Lo),delete ft[Ds]},"vi");return this.Sa[K]=Cn,this.Sa[fe]=Es,this.handleError(Rn(this.db,K,Pe.length-1,1,0,0,Cn,Es,0)),this},F.prototype.updateHook=function(K){this.Ya&&(Bt(this.db,0,0),cs(this.Ya),this.Ya=void 0),K&&(this.Ya=Un(function(fe,Ne,De,Pe,ft){switch(Ne){case 18:fe="insert";break;case 23:fe="update";break;case 9:fe="delete";break;default:throw"unknown operationCode in updateHook callback: "+Ne}if(De=De?Rt(A,De):"",Pe=Pe?Rt(A,Pe):"",ft>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";K(fe,De,Pe,Number(ft))},"viiiij"),Bt(this.db,this.Ya,0))},_.Database=F};var q={..._},X="./this.program",O=(m,y)=>{throw y},V="",z,$;if(C){var Z=qE;V=__dirname+"/",$=m=>(m=be(m)?new URL(m):m,Z.readFileSync(m)),z=async m=>(m=be(m)?new URL(m):m,Z.readFileSync(m,void 0)),!_.thisProgram&&1<process.argv.length&&(X=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.exports=_,O=(m,y)=>{throw process.exitCode=m,y}}else(S||w)&&(w?V=self.location.href:typeof document<"u"&&document.currentScript&&(V=document.currentScript.src),V=V.startsWith("blob:")?"":V.slice(0,V.replace(/[?#].*/,"").lastIndexOf("/")+1),w&&($=m=>{var y=new XMLHttpRequest;return y.open("GET",m,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),z=async m=>{if(be(m))return new Promise((N,R)=>{var F=new XMLHttpRequest;F.open("GET",m,!0),F.responseType="arraybuffer",F.onload=()=>{F.status==200||F.status==0&&F.response?N(F.response):R(F.status)},F.onerror=R,F.send(null)});var y=await fetch(m,{credentials:"same-origin"});if(y.ok)return y.arrayBuffer();throw Error(y.status+" : "+y.url)});var ie=_.print||console.log.bind(console),_e=_.printErr||console.error.bind(console);Object.assign(_,q),q=null,_.thisProgram&&(X=_.thisProgram);var Te=_.wasmBinary,M,D=!1,U,B,A,L,k,ve,Qe,Y,ne,be=m=>m.startsWith("file://");function it(){var m=M.buffer;_.HEAP8=B=new Int8Array(m),_.HEAP16=L=new Int16Array(m),_.HEAPU8=A=new Uint8Array(m),_.HEAPU16=new Uint16Array(m),_.HEAP32=k=new Int32Array(m),_.HEAPU32=ve=new Uint32Array(m),_.HEAPF32=Qe=new Float32Array(m),_.HEAPF64=ne=new Float64Array(m),_.HEAP64=Y=new BigInt64Array(m),_.HEAPU64=new BigUint64Array(m)}var nt=0,H=null;function ue(m){throw _.onAbort?.(m),m="Aborted("+m+")",_e(m),D=!0,new WebAssembly.RuntimeError(m+". Build with -sASSERTIONS for more info.")}var Se;async function we(m){if(!Te)try{var y=await z(m);return new Uint8Array(y)}catch{}if(m==Se&&Te)m=new Uint8Array(Te);else if($)m=$(m);else throw"both async and sync fetching of the wasm failed";return m}async function Ye(m,y){try{var N=await we(m);return await WebAssembly.instantiate(N,y)}catch(R){_e(`failed to asynchronously prepare wasm: ${R}`),ue(R)}}async function st(m){var y=Se;if(!Te&&typeof WebAssembly.instantiateStreaming=="function"&&!be(y)&&!C)try{var N=fetch(y,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(N,m)}catch(R){_e(`wasm streaming compile failed: ${R}`),_e("falling back to ArrayBuffer instantiation")}return Ye(y,m)}class ot{name="ExitStatus";constructor(y){this.message=`Program terminated with exit(${y})`,this.status=y}}var nn=m=>{for(;0<m.length;)m.shift()(_)},Vt=[],Si=[],ka=()=>{var m=_.preRun.shift();Si.unshift(m)};function Xn(m,y="i8"){switch(y.endsWith("*")&&(y="*"),y){case"i1":return B[m];case"i8":return B[m];case"i16":return L[m>>1];case"i32":return k[m>>2];case"i64":return Y[m>>3];case"float":return Qe[m>>2];case"double":return ne[m>>3];case"*":return ve[m>>2];default:ue(`invalid type for getValue: ${y}`)}}var Ni=_.noExitRuntime||!0;function Yn(m){var y="i32";switch(y.endsWith("*")&&(y="*"),y){case"i1":B[m]=0;break;case"i8":B[m]=0;break;case"i16":L[m>>1]=0;break;case"i32":k[m>>2]=0;break;case"i64":Y[m>>3]=BigInt(0);break;case"float":Qe[m>>2]=0;break;case"double":ne[m>>3]=0;break;case"*":ve[m>>2]=0;break;default:ue(`invalid type for setValue: ${y}`)}}var La=typeof TextDecoder<"u"?new TextDecoder:void 0,Rt=(m,y=0,N=NaN)=>{var R=y+N;for(N=y;m[N]&&!(N>=R);)++N;if(16<N-y&&m.buffer&&La)return La.decode(m.subarray(y,N));for(R="";y<N;){var F=m[y++];if(F&128){var W=m[y++]&63;if((F&224)==192)R+=String.fromCharCode((F&31)<<6|W);else{var le=m[y++]&63;F=(F&240)==224?(F&15)<<12|W<<6|le:(F&7)<<18|W<<12|le<<6|m[y++]&63,65536>F?R+=String.fromCharCode(F):(F-=65536,R+=String.fromCharCode(55296|F>>10,56320|F&1023))}}else R+=String.fromCharCode(F)}return R},$i=(m,y)=>m?Rt(A,m,y):"",ja=(m,y)=>{for(var N=0,R=m.length-1;0<=R;R--){var F=m[R];F==="."?m.splice(R,1):F===".."?(m.splice(R,1),N++):N&&(m.splice(R,1),N--)}if(y)for(;N;N--)m.unshift("..");return m},Qt=m=>{var y=m.charAt(0)==="/",N=m.slice(-1)==="/";return(m=ja(m.split("/").filter(R=>!!R),!y).join("/"))||y||(m="."),m&&N&&(m+="/"),(y?"/":"")+m},sn=m=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(m).slice(1);return m=y[0],y=y[1],!m&&!y?".":(y&&=y.slice(0,-1),m+y)},As=m=>m&&m.match(/([^\/]+|\/)\/*$/)[1],Vl=()=>{if(C){var m=qE;return y=>m.randomFillSync(y)}return y=>crypto.getRandomValues(y)},Nr=m=>{(Nr=Vl())(m)},jn=(...m)=>{for(var y="",N=!1,R=m.length-1;-1<=R&&!N;R--){if(N=0<=R?m[R]:"/",typeof N!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!N)return"";y=N+"/"+y,N=N.charAt(0)==="/"}return y=ja(y.split("/").filter(F=>!!F),!N).join("/"),(N?"/":"")+y||"."},ui=[],di=m=>{for(var y=0,N=0;N<m.length;++N){var R=m.charCodeAt(N);127>=R?y++:2047>=R?y+=2:55296<=R&&57343>=R?(y+=4,++N):y+=3}return y},ss=(m,y,N,R)=>{if(!(0<R))return 0;var F=N;R=N+R-1;for(var W=0;W<m.length;++W){var le=m.charCodeAt(W);if(55296<=le&&57343>=le){var Ie=m.charCodeAt(++W);le=65536+((le&1023)<<10)|Ie&1023}if(127>=le){if(N>=R)break;y[N++]=le}else{if(2047>=le){if(N+1>=R)break;y[N++]=192|le>>6}else{if(65535>=le){if(N+2>=R)break;y[N++]=224|le>>12}else{if(N+3>=R)break;y[N++]=240|le>>18,y[N++]=128|le>>12&63}y[N++]=128|le>>6&63}y[N++]=128|le&63}}return y[N]=0,N-F},fi=(m,y)=>{var N=Array(di(m)+1);return m=ss(m,N,0,N.length),y&&(N.length=m),N},go=[];function wr(m,y){go[m]={input:[],output:[],cb:y},Oa(m,yo)}var yo={open(m){var y=go[m.node.rdev];if(!y)throw new ge(43);m.tty=y,m.seekable=!1},close(m){m.tty.cb.fsync(m.tty)},fsync(m){m.tty.cb.fsync(m.tty)},read(m,y,N,R){if(!m.tty||!m.tty.cb.xb)throw new ge(60);for(var F=0,W=0;W<R;W++){try{var le=m.tty.cb.xb(m.tty)}catch{throw new ge(29)}if(le===void 0&&F===0)throw new ge(6);if(le==null)break;F++,y[N+W]=le}return F&&(m.node.atime=Date.now()),F},write(m,y,N,R){if(!m.tty||!m.tty.cb.qb)throw new ge(60);try{for(var F=0;F<R;F++)m.tty.cb.qb(m.tty,y[N+F])}catch{throw new ge(29)}return R&&(m.node.mtime=m.node.ctime=Date.now()),F}},Eo={xb(){e:{if(!ui.length){var m=null;if(C){var y=Buffer.alloc(256),N=0,R=process.stdin.fd;try{N=Z.readSync(R,y,0,256)}catch(F){if(F.toString().includes("EOF"))N=0;else throw F}0<N&&(m=y.slice(0,N).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(m=window.prompt("Input: "),m!==null&&(m+=`
`));if(!m){m=null;break e}ui=fi(m,!0)}m=ui.shift()}return m},qb(m,y){y===null||y===10?(ie(Rt(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(ie(Rt(m.output)),m.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Rs={qb(m,y){y===null||y===10?(_e(Rt(m.output)),m.output=[]):y!=0&&m.output.push(y)},fsync(m){0<m.output?.length&&(_e(Rt(m.output)),m.output=[])}},Me={Wa:null,Xa(){return Me.createNode(null,"/",16895,0)},createNode(m,y,N,R){if((N&61440)===24576||(N&61440)===4096)throw new ge(63);return Me.Wa||(Me.Wa={dir:{node:{Ta:Me.La.Ta,Ua:Me.La.Ua,lookup:Me.La.lookup,hb:Me.La.hb,rename:Me.La.rename,unlink:Me.La.unlink,rmdir:Me.La.rmdir,readdir:Me.La.readdir,symlink:Me.La.symlink},stream:{Va:Me.Ma.Va}},file:{node:{Ta:Me.La.Ta,Ua:Me.La.Ua},stream:{Va:Me.Ma.Va,read:Me.Ma.read,write:Me.Ma.write,ib:Me.Ma.ib,jb:Me.Ma.jb}},link:{node:{Ta:Me.La.Ta,Ua:Me.La.Ua,readlink:Me.La.readlink},stream:{}},ub:{node:{Ta:Me.La.Ta,Ua:Me.La.Ua},stream:ql}}),N=Da(m,y,N,R),fn(N.mode)?(N.La=Me.Wa.dir.node,N.Ma=Me.Wa.dir.stream,N.Na={}):(N.mode&61440)===32768?(N.La=Me.Wa.file.node,N.Ma=Me.Wa.file.stream,N.Ra=0,N.Na=null):(N.mode&61440)===40960?(N.La=Me.Wa.link.node,N.Ma=Me.Wa.link.stream):(N.mode&61440)===8192&&(N.La=Me.Wa.ub.node,N.Ma=Me.Wa.ub.stream),N.atime=N.mtime=N.ctime=Date.now(),m&&(m.Na[y]=N,m.atime=m.mtime=m.ctime=N.atime),N},Sb(m){return m.Na?m.Na.subarray?m.Na.subarray(0,m.Ra):new Uint8Array(m.Na):new Uint8Array(0)},La:{Ta(m){var y={};return y.dev=(m.mode&61440)===8192?m.id:1,y.ino=m.id,y.mode=m.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=m.rdev,fn(m.mode)?y.size=4096:(m.mode&61440)===32768?y.size=m.Ra:(m.mode&61440)===40960?y.size=m.link.length:y.size=0,y.atime=new Date(m.atime),y.mtime=new Date(m.mtime),y.ctime=new Date(m.ctime),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},Ua(m,y){for(var N of["mode","atime","mtime","ctime"])y[N]!=null&&(m[N]=y[N]);y.size!==void 0&&(y=y.size,m.Ra!=y&&(y==0?(m.Na=null,m.Ra=0):(N=m.Na,m.Na=new Uint8Array(y),N&&m.Na.set(N.subarray(0,Math.min(y,m.Ra))),m.Ra=y)))},lookup(){throw Me.vb},hb(m,y,N,R){return Me.createNode(m,y,N,R)},rename(m,y,N){try{var R=as(y,N)}catch{}if(R){if(fn(m.mode))for(var F in R.Na)throw new ge(55);Ar(R)}delete m.parent.Na[m.name],y.Na[N]=m,m.name=N,y.ctime=y.mtime=m.parent.ctime=m.parent.mtime=Date.now()},unlink(m,y){delete m.Na[y],m.ctime=m.mtime=Date.now()},rmdir(m,y){var N=as(m,y),R;for(R in N.Na)throw new ge(55);delete m.Na[y],m.ctime=m.mtime=Date.now()},readdir(m){return[".","..",...Object.keys(m.Na)]},symlink(m,y,N){return m=Me.createNode(m,y,41471,0),m.link=N,m},readlink(m){if((m.mode&61440)!==40960)throw new ge(28);return m.link}},Ma:{read(m,y,N,R,F){var W=m.node.Na;if(F>=m.node.Ra)return 0;if(m=Math.min(m.node.Ra-F,R),8<m&&W.subarray)y.set(W.subarray(F,F+m),N);else for(R=0;R<m;R++)y[N+R]=W[F+R];return m},write(m,y,N,R,F,W){if(y.buffer===B.buffer&&(W=!1),!R)return 0;if(m=m.node,m.mtime=m.ctime=Date.now(),y.subarray&&(!m.Na||m.Na.subarray)){if(W)return m.Na=y.subarray(N,N+R),m.Ra=R;if(m.Ra===0&&F===0)return m.Na=y.slice(N,N+R),m.Ra=R;if(F+R<=m.Ra)return m.Na.set(y.subarray(N,N+R),F),R}W=F+R;var le=m.Na?m.Na.length:0;if(le>=W||(W=Math.max(W,le*(1048576>le?2:1.125)>>>0),le!=0&&(W=Math.max(W,256)),le=m.Na,m.Na=new Uint8Array(W),0<m.Ra&&m.Na.set(le.subarray(0,m.Ra),0)),m.Na.subarray&&y.subarray)m.Na.set(y.subarray(N,N+R),F);else for(W=0;W<R;W++)m.Na[F+W]=y[N+W];return m.Ra=Math.max(m.Ra,F+R),R},Va(m,y,N){if(N===1?y+=m.position:N===2&&(m.node.mode&61440)===32768&&(y+=m.node.Ra),0>y)throw new ge(28);return y},ib(m,y,N,R,F){if((m.node.mode&61440)!==32768)throw new ge(43);if(m=m.node.Na,F&2||!m||m.buffer!==B.buffer){F=!0,R=65536*Math.ceil(y/65536);var W=ki(65536,R);if(W&&A.fill(0,W,W+R),R=W,!R)throw new ge(48);m&&((0<N||N+y<m.length)&&(m.subarray?m=m.subarray(N,N+y):m=Array.prototype.slice.call(m,N,N+y)),B.set(m,R))}else F=!1,R=m.byteOffset;return{Kb:R,Ab:F}},jb(m,y,N,R){return Me.Ma.write(m,y,0,R,N,!1),0}}},is=(m,y)=>{var N=0;return m&&(N|=365),y&&(N|=146),N},Gt=null,xr={},Cs=[],vo=1,Tn=null,wi=!1,Jt=!0,Is={},ge=class{name="ErrnoError";constructor(m){this.Pa=m}},ks=class{gb={};node=null;get flags(){return this.gb.flags}set flags(m){this.gb.flags=m}get position(){return this.gb.position}set position(m){this.gb.position=m}},Bl=class{La={};Ma={};ab=null;constructor(m,y,N,R){m||=this,this.parent=m,this.Xa=m.Xa,this.id=vo++,this.name=y,this.mode=N,this.rdev=R,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(m){m?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(m){m?this.mode|=146:this.mode&=-147}};function Dn(m,y={}){if(!m)throw new ge(44);y.nb??(y.nb=!0),m.charAt(0)==="/"||(m="//"+m);var N=0;e:for(;40>N;N++){m=m.split("/").filter(Ie=>!!Ie);for(var R=Gt,F="/",W=0;W<m.length;W++){var le=W===m.length-1;if(le&&y.parent)break;if(m[W]!==".")if(m[W]==="..")F=sn(F),R=R.parent;else{F=Qt(F+"/"+m[W]);try{R=as(R,m[W])}catch(Ie){if(Ie?.Pa===44&&le&&y.Jb)return{path:F};throw Ie}if(!R.ab||le&&!y.nb||(R=R.ab.root),(R.mode&61440)===40960&&(!le||y.$a)){if(!R.La.readlink)throw new ge(52);R=R.La.readlink(R),R.charAt(0)==="/"||(R=sn(F)+"/"+R),m=R+"/"+m.slice(W+1).join("/");continue e}}}return{path:F,node:R}}throw new ge(32)}function ms(m){for(var y;;){if(m===m.parent)return m=m.Xa.zb,y?m[m.length-1]!=="/"?`${m}/${y}`:m+y:m;y=y?`${m.name}/${y}`:m.name,m=m.parent}}function hi(m,y){for(var N=0,R=0;R<y.length;R++)N=(N<<5)-N+y.charCodeAt(R)|0;return(m+N>>>0)%Tn.length}function Ar(m){var y=hi(m.parent.id,m.name);if(Tn[y]===m)Tn[y]=m.bb;else for(y=Tn[y];y;){if(y.bb===m){y.bb=m.bb;break}y=y.bb}}function as(m,y){var N=fn(m.mode)?(N=$n(m,"x"))?N:m.La.lookup?0:2:54;if(N)throw new ge(N);for(N=Tn[hi(m.id,y)];N;N=N.bb){var R=N.name;if(N.parent.id===m.id&&R===y)return N}return m.La.lookup(m,y)}function Da(m,y,N,R){return m=new Bl(m,y,N,R),y=hi(m.parent.id,m.name),m.bb=Tn[y],Tn[y]=m}function fn(m){return(m&61440)===16384}function xi(m){var y=["r","w","rw"][m&3];return m&512&&(y+="w"),y}function $n(m,y){if(Jt)return 0;if(!y.includes("r")||m.mode&292){if(y.includes("w")&&!(m.mode&146)||y.includes("x")&&!(m.mode&73))return 2}else return 2;return 0}function Rr(m,y){if(!fn(m.mode))return 54;try{return as(m,y),20}catch{}return $n(m,"wx")}function ps(m,y,N){try{var R=as(m,y)}catch(F){return F.Pa}if(m=$n(m,"wx"))return m;if(N){if(!fn(R.mode))return 54;if(R===R.parent||ms(R)==="/")return 10}else if(fn(R.mode))return 31;return 0}function Qn(m){if(!m)throw new ge(63);return m}function dt(m){if(m=Cs[m],!m)throw new ge(8);return m}function on(m,y=-1){if(m=Object.assign(new ks,m),y==-1)e:{for(y=0;4096>=y;y++)if(!Cs[y])break e;throw new ge(33)}return m.fd=y,Cs[y]=m}function Gs(m,y=-1){return m=on(m,y),m.Ma?.Rb?.(m),m}function Ai(m,y,N){var R=m?.Ma.Ua;m=R?m:y,R??=y.La.Ua,Qn(R),R(m,N)}var ql={open(m){m.Ma=xr[m.node.rdev].Ma,m.Ma.open?.(m)},Va(){throw new ge(70)}};function Oa(m,y){xr[m]={Ma:y}}function Cr(m,y){var N=y==="/";if(N&&Gt)throw new ge(10);if(!N&&y){var R=Dn(y,{nb:!1});if(y=R.path,R=R.node,R.ab)throw new ge(10);if(!fn(R.mode))throw new ge(54)}y={type:m,Wb:{},zb:y,Ib:[]},m=m.Xa(y),m.Xa=y,y.root=m,N?Gt=m:R&&(R.ab=y,R.Xa&&R.Xa.Ib.push(y))}function rs(m,y,N){var R=Dn(m,{parent:!0}).node;if(m=As(m),!m)throw new ge(28);if(m==="."||m==="..")throw new ge(20);var F=Rr(R,m);if(F)throw new ge(F);if(!R.La.hb)throw new ge(63);return R.La.hb(R,m,y,N)}function Ma(m,y=438){return rs(m,y&4095|32768,0)}function ln(m,y=511){return rs(m,y&1023|16384,0)}function On(m,y,N){typeof N>"u"&&(N=y,y=438),rs(m,y|8192,N)}function Mn(m,y){if(!jn(m))throw new ge(44);var N=Dn(y,{parent:!0}).node;if(!N)throw new ge(44);y=As(y);var R=Rr(N,y);if(R)throw new ge(R);if(!N.La.symlink)throw new ge(63);N.La.symlink(N,y,m)}function Ls(m){var y=Dn(m,{parent:!0}).node;m=As(m);var N=as(y,m),R=ps(y,m,!0);if(R)throw new ge(R);if(!y.La.rmdir)throw new ge(63);if(N.ab)throw new ge(10);y.La.rmdir(y,m),Ar(N)}function Zt(m){var y=Dn(m,{parent:!0}).node;if(!y)throw new ge(44);m=As(m);var N=as(y,m),R=ps(y,m,!1);if(R)throw new ge(R);if(!y.La.unlink)throw new ge(63);if(N.ab)throw new ge(10);y.La.unlink(y,m),Ar(N)}function mi(m,y){return m=Dn(m,{$a:!y}).node,Qn(m.La.Ta)(m)}function Ua(m,y,N,R){Ai(m,y,{mode:N&4095|y.mode&-4096,ctime:Date.now(),Fb:R})}function os(m,y){m=typeof m=="string"?Dn(m,{$a:!0}).node:m,Ua(null,m,y)}function js(m,y,N){if(fn(y.mode))throw new ge(31);if((y.mode&61440)!==32768)throw new ge(28);var R=$n(y,"w");if(R)throw new ge(R);Ai(m,y,{size:N,timestamp:Date.now()})}function Xs(m,y,N=438){if(m==="")throw new ge(44);if(typeof y=="string"){var R={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[y];if(typeof R>"u")throw Error(`Unknown file open mode: ${y}`);y=R}if(N=y&64?N&4095|32768:0,typeof m=="object")R=m;else{var F=m.endsWith("/");m=Dn(m,{$a:!(y&131072),Jb:!0}),R=m.node,m=m.path}var W=!1;if(y&64)if(R){if(y&128)throw new ge(20)}else{if(F)throw new ge(31);R=rs(m,N|511,0),W=!0}if(!R)throw new ge(44);if((R.mode&61440)===8192&&(y&=-513),y&65536&&!fn(R.mode))throw new ge(54);if(!W&&(F=R?(R.mode&61440)===40960?32:fn(R.mode)&&(xi(y)!=="r"||y&576)?31:$n(R,xi(y)):44))throw new ge(F);return y&512&&!W&&(F=R,F=typeof F=="string"?Dn(F,{$a:!0}).node:F,js(null,F,0)),y&=-131713,F=on({node:R,path:ms(R),flags:y,seekable:!0,position:0,Ma:R.Ma,Lb:[],error:!1}),F.Ma.open&&F.Ma.open(F),W&&os(R,N&511),!_.logReadFiles||y&1||m in Is||(Is[m]=1),F}function Qi(m){if(m.fd===null)throw new ge(8);m.ob&&(m.ob=null);try{m.Ma.close&&m.Ma.close(m)}catch(y){throw y}finally{Cs[m.fd]=null}m.fd=null}function Va(m,y,N){if(m.fd===null)throw new ge(8);if(!m.seekable||!m.Ma.Va)throw new ge(70);if(N!=0&&N!=1&&N!=2)throw new ge(28);m.position=m.Ma.Va(m,y,N),m.Lb=[]}function Ir(m,y,N,R,F){if(0>R||0>F)throw new ge(28);if(m.fd===null)throw new ge(8);if((m.flags&2097155)===1)throw new ge(8);if(fn(m.node.mode))throw new ge(31);if(!m.Ma.read)throw new ge(28);var W=typeof F<"u";if(!W)F=m.position;else if(!m.seekable)throw new ge(70);return y=m.Ma.read(m,y,N,R,F),W||(m.position+=y),y}function Ki(m,y,N,R,F){if(0>R||0>F)throw new ge(28);if(m.fd===null)throw new ge(8);if((m.flags&2097155)===0)throw new ge(8);if(fn(m.node.mode))throw new ge(31);if(!m.Ma.write)throw new ge(28);m.seekable&&m.flags&1024&&Va(m,0,2);var W=typeof F<"u";if(!W)F=m.position;else if(!m.seekable)throw new ge(70);return y=m.Ma.write(m,y,N,R,F,void 0),W||(m.position+=y),y}function ls(m){var y,N=Xs(m,N||0);m=mi(m).size;var R=new Uint8Array(m);return Ir(N,R,0,m,0),y=R,Qi(N),y}function kt(m,y,N){m=Qt("/dev/"+m);var R=is(!!y,!!N);kt.yb??(kt.yb=64);var F=kt.yb++<<8|0;Oa(F,{open(W){W.seekable=!1},close(){N?.buffer?.length&&N(10)},read(W,le,Ie,Ue){for(var ze=0,bt=0;bt<Ue;bt++){try{var en=y()}catch{throw new ge(29)}if(en===void 0&&ze===0)throw new ge(6);if(en==null)break;ze++,le[Ie+bt]=en}return ze&&(W.node.atime=Date.now()),ze},write(W,le,Ie,Ue){for(var ze=0;ze<Ue;ze++)try{N(le[Ie+ze])}catch{throw new ge(29)}return Ue&&(W.node.mtime=W.node.ctime=Date.now()),ze}}),On(m,R,F)}var Je={};function Kn(m,y,N){if(y.charAt(0)==="/")return y;if(m=m===-100?"/":dt(m).path,y.length==0){if(!N)throw new ge(44);return m}return m+"/"+y}function Ri(m,y){k[m>>2]=y.dev,k[m+4>>2]=y.mode,ve[m+8>>2]=y.nlink,k[m+12>>2]=y.uid,k[m+16>>2]=y.gid,k[m+20>>2]=y.rdev,Y[m+24>>3]=BigInt(y.size),k[m+32>>2]=4096,k[m+36>>2]=y.blocks;var N=y.atime.getTime(),R=y.mtime.getTime(),F=y.ctime.getTime();return Y[m+40>>3]=BigInt(Math.floor(N/1e3)),ve[m+48>>2]=N%1e3*1e6,Y[m+56>>3]=BigInt(Math.floor(R/1e3)),ve[m+64>>2]=R%1e3*1e6,Y[m+72>>3]=BigInt(Math.floor(F/1e3)),ve[m+80>>2]=F%1e3*1e6,Y[m+88>>3]=BigInt(y.ino),0}var yt=void 0,Ys=()=>{var m=k[+yt>>2];return yt+=4,m},_s=0,Wi=[0,31,60,91,121,152,182,213,244,274,305,335],Wn=[0,31,59,90,120,151,181,212,243,273,304,334],$s={},kr=m=>{U=m,Ni||0<_s||(_.onExit?.(m),D=!0),O(m,new ot(m))},Lr=m=>{if(!D)try{if(m(),!(Ni||0<_s))try{U=m=U,kr(m)}catch(y){y instanceof ot||y=="unwind"||O(1,y)}}catch(y){y instanceof ot||y=="unwind"||O(1,y)}},Qs={},jr=()=>{if(!Ks){var m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:X||"./this.program"},y;for(y in Qs)Qs[y]===void 0?delete m[y]:m[y]=Qs[y];var N=[];for(y in m)N.push(`${y}=${m[y]}`);Ks=N}return Ks},Ks,wn=m=>{var y=di(m)+1,N=hn(y);return ss(m,A,N,y),N},To=(m,y,N,R)=>{var F={string:ze=>{var bt=0;return ze!=null&&ze!==0&&(bt=wn(ze)),bt},array:ze=>{var bt=hn(ze.length);return B.set(ze,bt),bt}};m=_["_"+m];var W=[],le=0;if(R)for(var Ie=0;Ie<R.length;Ie++){var Ue=F[N[Ie]];Ue?(le===0&&(le=An()),W[Ie]=Ue(R[Ie])):W[Ie]=R[Ie]}return N=m(...W),N=(function(ze){return le!==0&&ys(le),y==="string"?ze?Rt(A,ze):"":y==="boolean"?!!ze:ze})(N)},Ci=0,Ii=(m,y)=>(y=y==1?hn(m.length):Ws(m.length),m.subarray||m.slice||(m=new Uint8Array(m)),A.set(m,y),y),gs,Ba=[],xn,cs=m=>{gs.delete(xn.get(m)),xn.set(m,null),Ba.push(m)},Un=(m,y)=>{if(!gs){gs=new WeakMap;var N=xn.length;if(gs)for(var R=0;R<0+N;R++){var F=xn.get(R);F&&gs.set(F,R)}}if(N=gs.get(m)||0)return N;if(Ba.length)N=Ba.pop();else{try{xn.grow(1)}catch(Ue){throw Ue instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ue}N=xn.length-1}try{xn.set(N,m)}catch(Ue){if(!(Ue instanceof TypeError))throw Ue;if(typeof WebAssembly.Function=="function"){var W=WebAssembly.Function;R={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},F={parameters:[],results:y[0]=="v"?[]:[R[y[0]]]};for(var le=1;le<y.length;++le)F.parameters.push(R[y[le]]);y=new W(F,m)}else{R=[1],F=y.slice(0,1),y=y.slice(1),le={i:127,p:127,j:126,f:125,d:124,e:111},R.push(96);var Ie=y.length;128>Ie?R.push(Ie):R.push(Ie%128|128,Ie>>7);for(W of y)R.push(le[W]);F=="v"?R.push(0):R.push(1,le[F]),y=[0,97,115,109,1,0,0,0,1],W=R.length,128>W?y.push(W):y.push(W%128|128,W>>7),y.push(...R),y.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),y=new WebAssembly.Module(new Uint8Array(y)),y=new WebAssembly.Instance(y,{e:{f:m}}).exports.f}xn.set(N,y)}return gs.set(m,N),N};Tn=Array(4096),Cr(Me,"/"),ln("/tmp"),ln("/home"),ln("/home/web_user"),(function(){ln("/dev"),Oa(259,{read:()=>0,write:(R,F,W,le)=>le,Va:()=>0}),On("/dev/null",259),wr(1280,Eo),wr(1536,Rs),On("/dev/tty",1280),On("/dev/tty1",1536);var m=new Uint8Array(1024),y=0,N=()=>(y===0&&(Nr(m),y=m.byteLength),m[--y]);kt("random",N),kt("urandom",N),ln("/dev/shm"),ln("/dev/shm/tmp")})(),(function(){ln("/proc");var m=ln("/proc/self");ln("/proc/self/fd"),Cr({Xa(){var y=Da(m,"fd",16895,73);return y.Ma={Va:Me.Ma.Va},y.La={lookup(N,R){N=+R;var F=dt(N);return N={parent:null,Xa:{zb:"fake"},La:{readlink:()=>F.path},id:N+1},N.parent=N},readdir(){return Array.from(Cs.entries()).filter(([,N])=>N).map(([N])=>N.toString())}},y}},"/proc/self/fd")})(),Me.vb=new ge(44),Me.vb.stack="<generic error, no stack>";var Dr={a:(m,y,N,R)=>ue(`Assertion failed: ${m?Rt(A,m):""}, at: `+[y?y?Rt(A,y):"":"unknown filename",N,R?R?Rt(A,R):"":"unknown function"]),i:function(m,y){try{return m=m?Rt(A,m):"",os(m,y),0}catch(N){if(typeof Je>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},L:function(m,y,N){try{if(y=y?Rt(A,y):"",y=Kn(m,y),N&-8)return-28;var R=Dn(y,{$a:!0}).node;return R?(m="",N&4&&(m+="r"),N&2&&(m+="w"),N&1&&(m+="x"),m&&$n(R,m)?-2:0):-44}catch(F){if(typeof Je>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},j:function(m,y){try{var N=dt(m);return Ua(N,N.node,y,!1),0}catch(R){if(typeof Je>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},h:function(m){try{var y=dt(m);return Ai(y,y.node,{timestamp:Date.now(),Fb:!1}),0}catch(N){if(typeof Je>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},b:function(m,y,N){yt=N;try{var R=dt(m);switch(y){case 0:var F=Ys();if(0>F)break;for(;Cs[F];)F++;return Gs(R,F).fd;case 1:case 2:return 0;case 3:return R.flags;case 4:return F=Ys(),R.flags|=F,0;case 12:return F=Ys(),L[F+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(W){if(typeof Je>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},g:function(m,y){try{var N=dt(m),R=N.node,F=N.Ma.Ta;m=F?N:R,F??=R.La.Ta,Qn(F);var W=F(m);return Ri(y,W)}catch(le){if(typeof Je>"u"||le.name!=="ErrnoError")throw le;return-le.Pa}},H:function(m,y){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var N=dt(m);if(0>y||(N.flags&2097155)===0)throw new ge(28);return js(N,N.node,y),0}catch(R){if(typeof Je>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},G:function(m,y){try{if(y===0)return-28;var N=di("/")+1;return y<N?-68:(ss("/",A,m,y),N)}catch(R){if(typeof Je>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},K:function(m,y){try{return m=m?Rt(A,m):"",Ri(y,mi(m,!0))}catch(N){if(typeof Je>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},C:function(m,y,N){try{return y=y?Rt(A,y):"",y=Kn(m,y),ln(y,N),0}catch(R){if(typeof Je>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},J:function(m,y,N,R){try{y=y?Rt(A,y):"";var F=R&256;return y=Kn(m,y,R&4096),Ri(N,F?mi(y,!0):mi(y))}catch(W){if(typeof Je>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},x:function(m,y,N,R){yt=R;try{y=y?Rt(A,y):"",y=Kn(m,y);var F=R?Ys():0;return Xs(y,N,F).fd}catch(W){if(typeof Je>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},v:function(m,y,N,R){try{if(y=y?Rt(A,y):"",y=Kn(m,y),0>=R)return-28;var F=Dn(y).node;if(!F)throw new ge(44);if(!F.La.readlink)throw new ge(28);var W=F.La.readlink(F),le=Math.min(R,di(W)),Ie=B[N+le];return ss(W,A,N,R+1),B[N+le]=Ie,le}catch(Ue){if(typeof Je>"u"||Ue.name!=="ErrnoError")throw Ue;return-Ue.Pa}},u:function(m){try{return m=m?Rt(A,m):"",Ls(m),0}catch(y){if(typeof Je>"u"||y.name!=="ErrnoError")throw y;return-y.Pa}},f:function(m,y){try{return m=m?Rt(A,m):"",Ri(y,mi(m))}catch(N){if(typeof Je>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},r:function(m,y,N){try{return y=y?Rt(A,y):"",y=Kn(m,y),N===0?Zt(y):N===512?Ls(y):ue("Invalid flags passed to unlinkat"),0}catch(R){if(typeof Je>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},q:function(m,y,N){try{y=y?Rt(A,y):"",y=Kn(m,y,!0);var R=Date.now(),F,W;if(N){var le=ve[N>>2]+4294967296*k[N+4>>2],Ie=k[N+8>>2];Ie==1073741823?F=R:Ie==1073741822?F=null:F=1e3*le+Ie/1e6,N+=16,le=ve[N>>2]+4294967296*k[N+4>>2],Ie=k[N+8>>2],Ie==1073741823?W=R:Ie==1073741822?W=null:W=1e3*le+Ie/1e6}else W=F=R;if((W??F)!==null){m=F;var Ue=Dn(y,{$a:!0}).node;Qn(Ue.La.Ua)(Ue,{atime:m,mtime:W})}return 0}catch(ze){if(typeof Je>"u"||ze.name!=="ErrnoError")throw ze;return-ze.Pa}},m:()=>ue(""),l:()=>{Ni=!1,_s=0},A:function(m,y){m=-9007199254740992>m||9007199254740992<m?NaN:Number(m),m=new Date(1e3*m),k[y>>2]=m.getSeconds(),k[y+4>>2]=m.getMinutes(),k[y+8>>2]=m.getHours(),k[y+12>>2]=m.getDate(),k[y+16>>2]=m.getMonth(),k[y+20>>2]=m.getFullYear()-1900,k[y+24>>2]=m.getDay();var N=m.getFullYear();k[y+28>>2]=(N%4!==0||N%100===0&&N%400!==0?Wn:Wi)[m.getMonth()]+m.getDate()-1|0,k[y+36>>2]=-(60*m.getTimezoneOffset()),N=new Date(m.getFullYear(),6,1).getTimezoneOffset();var R=new Date(m.getFullYear(),0,1).getTimezoneOffset();k[y+32>>2]=(N!=R&&m.getTimezoneOffset()==Math.min(R,N))|0},y:function(m,y,N,R,F,W,le){F=-9007199254740992>F||9007199254740992<F?NaN:Number(F);try{if(isNaN(F))return 61;var Ie=dt(R);if((y&2)!==0&&(N&2)===0&&(Ie.flags&2097155)!==2)throw new ge(2);if((Ie.flags&2097155)===1)throw new ge(2);if(!Ie.Ma.ib)throw new ge(43);if(!m)throw new ge(28);var Ue=Ie.Ma.ib(Ie,m,F,y,N),ze=Ue.Kb;return k[W>>2]=Ue.Ab,ve[le>>2]=ze,0}catch(bt){if(typeof Je>"u"||bt.name!=="ErrnoError")throw bt;return-bt.Pa}},z:function(m,y,N,R,F,W){W=-9007199254740992>W||9007199254740992<W?NaN:Number(W);try{var le=dt(F);if(N&2){if(N=W,(le.node.mode&61440)!==32768)throw new ge(43);if(!(R&2)){var Ie=A.slice(m,m+y);le.Ma.jb&&le.Ma.jb(le,Ie,N,y,R)}}}catch(Ue){if(typeof Je>"u"||Ue.name!=="ErrnoError")throw Ue;return-Ue.Pa}},n:(m,y)=>{if($s[m]&&(clearTimeout($s[m].id),delete $s[m]),!y)return 0;var N=setTimeout(()=>{delete $s[m],Lr(()=>Ji(m,performance.now()))},y);return $s[m]={id:N,Xb:y},0},B:(m,y,N,R)=>{var F=new Date().getFullYear(),W=new Date(F,0,1).getTimezoneOffset();F=new Date(F,6,1).getTimezoneOffset(),ve[m>>2]=60*Math.max(W,F),k[y>>2]=+(W!=F),y=le=>{var Ie=Math.abs(le);return`UTC${0<=le?"-":"+"}${String(Math.floor(Ie/60)).padStart(2,"0")}${String(Ie%60).padStart(2,"0")}`},m=y(W),y=y(F),F<W?(ss(m,A,N,17),ss(y,A,R,17)):(ss(m,A,R,17),ss(y,A,N,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:m=>{var y=A.length;if(m>>>=0,2147483648<m)return!1;for(var N=1;4>=N;N*=2){var R=y*(1+.2/N);R=Math.min(R,m+100663296);e:{R=(Math.min(2147483648,65536*Math.ceil(Math.max(m,R)/65536))-M.buffer.byteLength+65535)/65536|0;try{M.grow(R),it();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},E:(m,y)=>{var N=0;return jr().forEach((R,F)=>{var W=y+N;for(F=ve[m+4*F>>2]=W,W=0;W<R.length;++W)B[F++]=R.charCodeAt(W);B[F]=0,N+=R.length+1}),0},F:(m,y)=>{var N=jr();ve[m>>2]=N.length;var R=0;return N.forEach(F=>R+=F.length+1),ve[y>>2]=R,0},e:function(m){try{var y=dt(m);return Qi(y),0}catch(N){if(typeof Je>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},p:function(m,y){try{var N=dt(m);return B[y]=N.tty?2:fn(N.mode)?3:(N.mode&61440)===40960?7:4,L[y+2>>1]=0,Y[y+8>>3]=BigInt(0),Y[y+16>>3]=BigInt(0),0}catch(R){if(typeof Je>"u"||R.name!=="ErrnoError")throw R;return R.Pa}},w:function(m,y,N,R){try{e:{var F=dt(m);m=y;for(var W,le=y=0;le<N;le++){var Ie=ve[m>>2],Ue=ve[m+4>>2];m+=8;var ze=Ir(F,B,Ie,Ue,W);if(0>ze){var bt=-1;break e}if(y+=ze,ze<Ue)break;typeof W<"u"&&(W+=ze)}bt=y}return ve[R>>2]=bt,0}catch(en){if(typeof Je>"u"||en.name!=="ErrnoError")throw en;return en.Pa}},D:function(m,y,N,R){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y);try{if(isNaN(y))return 61;var F=dt(m);return Va(F,y,N),Y[R>>3]=BigInt(F.position),F.ob&&y===0&&N===0&&(F.ob=null),0}catch(W){if(typeof Je>"u"||W.name!=="ErrnoError")throw W;return W.Pa}},I:function(m){try{var y=dt(m);return y.Ma?.fsync?y.Ma.fsync(y):0}catch(N){if(typeof Je>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},t:function(m,y,N,R){try{e:{var F=dt(m);m=y;for(var W,le=y=0;le<N;le++){var Ie=ve[m>>2],Ue=ve[m+4>>2];m+=8;var ze=Ki(F,B,Ie,Ue,W);if(0>ze){var bt=-1;break e}if(y+=ze,ze<Ue)break;typeof W<"u"&&(W+=ze)}bt=y}return ve[R>>2]=bt,0}catch(en){if(typeof Je>"u"||en.name!=="ErrnoError")throw en;return en.Pa}},k:kr},xe;(async function(){function m(N){return xe=N.exports,M=xe.M,it(),xn=xe.O,nt--,_.monitorRunDependencies?.(nt),nt==0&&H&&(N=H,H=null,N()),xe}nt++,_.monitorRunDependencies?.(nt);var y={a:Dr};return _.instantiateWasm?new Promise(N=>{_.instantiateWasm(y,(R,F)=>{m(R),N(R.exports)})}):(Se??=_.locateFile?_.locateFile("sql-wasm.wasm",V):V+"sql-wasm.wasm",m((await st(y)).instance))})(),_._sqlite3_free=m=>(_._sqlite3_free=xe.P)(m),_._sqlite3_value_text=m=>(_._sqlite3_value_text=xe.Q)(m),_._sqlite3_prepare_v2=(m,y,N,R,F)=>(_._sqlite3_prepare_v2=xe.R)(m,y,N,R,F),_._sqlite3_step=m=>(_._sqlite3_step=xe.S)(m),_._sqlite3_reset=m=>(_._sqlite3_reset=xe.T)(m),_._sqlite3_exec=(m,y,N,R,F)=>(_._sqlite3_exec=xe.U)(m,y,N,R,F),_._sqlite3_finalize=m=>(_._sqlite3_finalize=xe.V)(m),_._sqlite3_column_name=(m,y)=>(_._sqlite3_column_name=xe.W)(m,y),_._sqlite3_column_text=(m,y)=>(_._sqlite3_column_text=xe.X)(m,y),_._sqlite3_column_type=(m,y)=>(_._sqlite3_column_type=xe.Y)(m,y),_._sqlite3_errmsg=m=>(_._sqlite3_errmsg=xe.Z)(m),_._sqlite3_clear_bindings=m=>(_._sqlite3_clear_bindings=xe._)(m),_._sqlite3_value_blob=m=>(_._sqlite3_value_blob=xe.$)(m),_._sqlite3_value_bytes=m=>(_._sqlite3_value_bytes=xe.aa)(m),_._sqlite3_value_double=m=>(_._sqlite3_value_double=xe.ba)(m),_._sqlite3_value_int=m=>(_._sqlite3_value_int=xe.ca)(m),_._sqlite3_value_type=m=>(_._sqlite3_value_type=xe.da)(m),_._sqlite3_result_blob=(m,y,N,R)=>(_._sqlite3_result_blob=xe.ea)(m,y,N,R),_._sqlite3_result_double=(m,y)=>(_._sqlite3_result_double=xe.fa)(m,y),_._sqlite3_result_error=(m,y,N)=>(_._sqlite3_result_error=xe.ga)(m,y,N),_._sqlite3_result_int=(m,y)=>(_._sqlite3_result_int=xe.ha)(m,y),_._sqlite3_result_int64=(m,y)=>(_._sqlite3_result_int64=xe.ia)(m,y),_._sqlite3_result_null=m=>(_._sqlite3_result_null=xe.ja)(m),_._sqlite3_result_text=(m,y,N,R)=>(_._sqlite3_result_text=xe.ka)(m,y,N,R),_._sqlite3_aggregate_context=(m,y)=>(_._sqlite3_aggregate_context=xe.la)(m,y),_._sqlite3_column_count=m=>(_._sqlite3_column_count=xe.ma)(m),_._sqlite3_data_count=m=>(_._sqlite3_data_count=xe.na)(m),_._sqlite3_column_blob=(m,y)=>(_._sqlite3_column_blob=xe.oa)(m,y),_._sqlite3_column_bytes=(m,y)=>(_._sqlite3_column_bytes=xe.pa)(m,y),_._sqlite3_column_double=(m,y)=>(_._sqlite3_column_double=xe.qa)(m,y),_._sqlite3_bind_blob=(m,y,N,R,F)=>(_._sqlite3_bind_blob=xe.ra)(m,y,N,R,F),_._sqlite3_bind_double=(m,y,N)=>(_._sqlite3_bind_double=xe.sa)(m,y,N),_._sqlite3_bind_int=(m,y,N)=>(_._sqlite3_bind_int=xe.ta)(m,y,N),_._sqlite3_bind_text=(m,y,N,R,F)=>(_._sqlite3_bind_text=xe.ua)(m,y,N,R,F),_._sqlite3_bind_parameter_index=(m,y)=>(_._sqlite3_bind_parameter_index=xe.va)(m,y),_._sqlite3_sql=m=>(_._sqlite3_sql=xe.wa)(m),_._sqlite3_normalized_sql=m=>(_._sqlite3_normalized_sql=xe.xa)(m),_._sqlite3_changes=m=>(_._sqlite3_changes=xe.ya)(m),_._sqlite3_close_v2=m=>(_._sqlite3_close_v2=xe.za)(m),_._sqlite3_create_function_v2=(m,y,N,R,F,W,le,Ie,Ue)=>(_._sqlite3_create_function_v2=xe.Aa)(m,y,N,R,F,W,le,Ie,Ue),_._sqlite3_update_hook=(m,y,N)=>(_._sqlite3_update_hook=xe.Ba)(m,y,N),_._sqlite3_open=(m,y)=>(_._sqlite3_open=xe.Ca)(m,y);var Ws=_._malloc=m=>(Ws=_._malloc=xe.Da)(m),us=_._free=m=>(us=_._free=xe.Ea)(m);_._RegisterExtensionFunctions=m=>(_._RegisterExtensionFunctions=xe.Fa)(m);var ki=(m,y)=>(ki=xe.Ga)(m,y),Ji=(m,y)=>(Ji=xe.Ha)(m,y),ys=m=>(ys=xe.Ia)(m),hn=m=>(hn=xe.Ja)(m),An=()=>(An=xe.Ka)();_.stackSave=()=>An(),_.stackRestore=m=>ys(m),_.stackAlloc=m=>hn(m),_.cwrap=(m,y,N,R)=>{var F=!N||N.every(W=>W==="number"||W==="boolean");return y!=="string"&&F&&!R?_["_"+m]:(...W)=>To(m,y,N,W)},_.addFunction=Un,_.removeFunction=cs,_.UTF8ToString=$i,_.ALLOC_NORMAL=Ci,_.allocate=Ii,_.allocateUTF8OnStack=wn;function pi(){function m(){if(_.calledRun=!0,!D){if(!_.noFSInit&&!wi){var y,N;wi=!0,R??=_.stdin,y??=_.stdout,N??=_.stderr,R?kt("stdin",R):Mn("/dev/tty","/dev/stdin"),y?kt("stdout",null,y):Mn("/dev/tty","/dev/stdout"),N?kt("stderr",null,N):Mn("/dev/tty1","/dev/stderr"),Xs("/dev/stdin",0),Xs("/dev/stdout",1),Xs("/dev/stderr",1)}if(xe.N(),Jt=!1,_.onRuntimeInitialized?.(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var R=_.postRun.shift();Vt.unshift(R)}nn(Vt)}}if(0<nt)H=pi;else{if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)ka();nn(Si),0<nt?H=pi:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),m()},1)):m()}}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return pi(),g}),s)};n.exports=a,n.exports.default=a})(um)),um.exports}var CN=RN();const HT=mN(CN),IN=`
CREATE TABLE IF NOT EXISTS domains (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  color TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  domain_id INTEGER NOT NULL REFERENCES domains(id),
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS quests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  goal_id INTEGER NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS steps (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  quest_id INTEGER NOT NULL REFERENCES quests(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'pending',
  sort_order INTEGER NOT NULL DEFAULT 0,
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS buff_definitions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  type TEXT NOT NULL DEFAULT 'buff',
  icon TEXT NOT NULL DEFAULT '',
  duration_hours INTEGER NOT NULL DEFAULT 24,
  stat_effects TEXT NOT NULL DEFAULT '{}',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS buff_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  definition_id INTEGER NOT NULL REFERENCES buff_definitions(id) ON DELETE CASCADE,
  activated_at TEXT NOT NULL DEFAULT (datetime('now')),
  expires_at TEXT NOT NULL,
  is_active INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS character (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  name TEXT NOT NULL DEFAULT 'Adventurer',
  total_xp INTEGER NOT NULL DEFAULT 0,
  level INTEGER NOT NULL DEFAULT 1,
  title TEXT NOT NULL DEFAULT 'Novice',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS xp_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount INTEGER NOT NULL,
  reason TEXT NOT NULL,
  source_type TEXT NOT NULL,
  source_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS planner_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  date TEXT NOT NULL,
  start_time TEXT,
  end_time TEXT,
  quest_id INTEGER REFERENCES quests(id) ON DELETE SET NULL,
  step_id INTEGER REFERENCES steps(id) ON DELETE SET NULL,
  is_completed INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);
`,kN=`
INSERT OR IGNORE INTO domains (id, name, icon, color) VALUES
  (1, 'Health', '', '#e74c3c'),
  (2, 'Career', '', '#c8a84e'),
  (3, 'Learning', '', '#3498db'),
  (4, 'Social', '', '#e67e22'),
  (5, 'Finance', '', '#2ecc71'),
  (6, 'Creative', '', '#9b59b6'),
  (7, 'Spiritual', '', '#1abc9c'),
  (8, 'Home', '', '#95a5a6');
`,LN=`
INSERT OR IGNORE INTO character (id, name, total_xp, level, title)
VALUES (1, 'Adventurer', 0, 1, 'Novice');
`,jN="goal-game-db",Tl="database",GT="main";let hs=null;function XT(){return new Promise((n,e)=>{const s=indexedDB.open(jN,1);s.onupgradeneeded=()=>{const a=s.result;a.objectStoreNames.contains(Tl)||a.createObjectStore(Tl)},s.onsuccess=()=>n(s.result),s.onerror=()=>e(s.error)})}async function DN(){const n=await XT();return new Promise((e,s)=>{const a=n.transaction(Tl,"readonly"),u=a.objectStore(Tl).get(GT);u.onsuccess=()=>e(u.result??null),u.onerror=()=>s(u.error),a.oncomplete=()=>n.close()})}async function ON(n){const e=await XT();return new Promise((s,a)=>{const o=e.transaction(Tl,"readwrite");o.objectStore(Tl).put(n,GT),o.oncomplete=()=>{e.close(),s()},o.onerror=()=>a(o.error)})}async function MN(){if(hs)return hs;const n=await HT({locateFile:()=>"/goal-game/sql-wasm.wasm"}),e=await DN();return e?hs=new n.Database(e):hs=new n.Database,hs.run(IN),hs.run(kN),hs.run(LN),await ye(),hs}async function ye(){if(!hs)return;const n=hs.export();await ON(n)}function re(){if(!hs)throw new Error("Database not initialized. Call getDatabase() first.");return hs}async function hp(){return re().export()}async function YT(n){const e=await HT({locateFile:()=>"/goal-game/sql-wasm.wasm"});hs&&hs.close(),hs=new e.Database(n),await ye()}const dm="migration_feb2026_billing_v1";async function UN(){if(localStorage.getItem(dm))return!1;const n=re(),e=n.exec("SELECT id FROM goals WHERE title = 'Bill 190 Hours - February 2026'");if(e.length>0&&e[0].values.length>0)return localStorage.setItem(dm,"true"),!1;n.run(`
    INSERT INTO goals (domain_id, title, description, status)
    VALUES (2, 'Bill 190 Hours - February 2026', 'Target: 8 hours on weekdays, ~4.5 hours on weekends. Started with 8 hours billed.', 'active')
  `);const a=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0],o=[{title:"Week 1: Feb 3-9",description:"First partial week. Target: ~41 hours (4 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-03",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-04",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-05",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-06",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-07",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-08",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 2: Feb 9-15",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-09",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-10",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-11",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-12",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-13",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-14",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-15",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 3: Feb 16-22",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-16",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-17",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-18",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-19",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-20",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-21",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-22",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 4: Feb 23-28",description:"Final partial week. Target: ~44.5 hours (5 weekdays  8 + 1 weekend day  4.5)",days:[{date:"2026-02-23",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-24",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-25",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-26",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-27",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-28",day:"Sat",hours:4.5,isWeekend:!0}]}];for(const u of o){n.run(`
      INSERT INTO quests (goal_id, title, description, priority, status)
      VALUES (?, ?, ?, 'high', 'active')
    `,[a,u.title,u.description]);const g=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(let v=0;v<u.days.length;v++){const _=u.days[v],S=`${_.day} ${_.date.slice(5)}: Bill ${_.hours} hours`;n.run(`
        INSERT INTO steps (quest_id, title, priority, status, sort_order)
        VALUES (?, ?, ?, 'pending', ?)
      `,[g,S,_.isWeekend?"low":"normal",v])}}return await ye(),localStorage.setItem(dm,"true"),!0}const FE="notifications_migration_v1";async function VN(){if(localStorage.getItem(FE))return;const n=re();try{(n.exec("PRAGMA table_info(planner_events)")[0]?.values.map(a=>a[1])||[]).includes("reminder_minutes")||n.run("ALTER TABLE planner_events ADD COLUMN reminder_minutes INTEGER DEFAULT NULL"),n.run(`
      CREATE TABLE IF NOT EXISTS notification_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        enabled INTEGER NOT NULL DEFAULT 0,
        default_reminder_minutes INTEGER NOT NULL DEFAULT 15,
        fcm_token TEXT,
        device_id TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await ye(),localStorage.setItem(FE,"true"),console.log("Notifications migration completed successfully")}catch(e){throw console.error("Failed to run notifications migration:",e),e}}const zE="body_fat_goal_seed_v4";async function BN(){if(localStorage.getItem(zE))return;const n=re();try{const e=n.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(e.length&&e[0].values.length){const _=e[0].values[0][0],S=n.exec("SELECT id FROM quests WHERE goal_id = ?",[_]);if(S.length)for(const w of S[0].values)n.run("DELETE FROM steps WHERE quest_id = ?",[w[0]]);n.run("DELETE FROM quests WHERE goal_id = ?",[_]),n.run("DELETE FROM goals WHERE id = ?",[_])}n.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[1,"Achieve 12% Body Fat","12-week transformation program starting Feb 4, 2026. From 18-19% to 12% body fat through consistent training and nutrition."]);const a=n.exec("SELECT last_insert_rowid()")[0].values[0][0],o=new Date(2026,1,4,12,0,0),u=[{title:"Week 1 - Build Foundation",desc:"Establish daily habits and set your baseline."},{title:"Week 2 - Gain Momentum",desc:"Lock in the routine. Consistency is key."},{title:"Week 3 - Stay Disciplined",desc:"Push through early challenges. Trust the process."},{title:"Week 4 - Complete Month 1",desc:"First month done! Take measurements and assess progress."},{title:"Week 5 - Intensify",desc:"Increase intensity. Your body is adapting."},{title:"Week 6 - Push Through",desc:"Mental toughness week. No excuses."},{title:"Week 7 - Halfway Point",desc:"You're halfway there! Stay focused."},{title:"Week 8 - Stay Strong",desc:"Month 2 complete. Reassess and adjust if needed."},{title:"Week 9 - Final Month Begins",desc:"Last 4 weeks. Time to lock in."},{title:"Week 10 - Home Stretch",desc:"You can see the finish line. Don't let up."},{title:"Week 11 - Almost There",desc:"One more week after this. Give it everything."},{title:"Week 12 - Finish Strong",desc:"Final week! Complete the transformation."}],h=[{dayName:"Wed",workout:"Light Cardio (20-30 min)",isGym:!1},{dayName:"Thu",workout:"Gym - Legs (Quads/Hams/Glutes)",isGym:!0},{dayName:"Fri",workout:"Gym - Upper Body",isGym:!0},{dayName:"Sat",workout:"Gym - Lower Body / Deadlifts",isGym:!0},{dayName:"Sun",workout:"Rest + Weekly Check-in",isGym:!1},{dayName:"Mon",workout:"Gym - Push (Chest/Shoulders/Triceps)",isGym:!0},{dayName:"Tue",workout:"Gym - Pull (Back/Biceps)",isGym:!0}],g=_=>{const S=_.getMonth()+1,w=_.getDate();return`${S}/${w}`};let v=new Date(o);for(let _=0;_<u.length;_++){const S=u[_],w=g(v),C=g(new Date(v.getTime()+8640*60*1e3));n.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[a,`${S.title} (${w} - ${C})`,S.desc,"high"]);const X=n.exec("SELECT last_insert_rowid()")[0].values[0][0];let O=1;for(let V=0;V<7;V++){const z=h[V],$=g(v);n.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[X,`${z.dayName} ${$}: ${z.workout}`,"normal",O++]),n.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[X,`${z.dayName} ${$}: Hit protein goal`,"normal",O++]),v.setDate(v.getDate()+1)}}await ye(),localStorage.setItem(zE,"true"),console.log("Body fat goal seeded successfully (v3 - starting Wed 2/4/2026)")}catch(e){throw console.error("Failed to seed body fat goal:",e),e}}const HE="daily_quests_migration_v1";async function qN(){if(localStorage.getItem(HE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS daily_quests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        quest_type TEXT NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        target_value INTEGER NOT NULL DEFAULT 1,
        current_value INTEGER NOT NULL DEFAULT 0,
        xp_reward INTEGER NOT NULL DEFAULT 25,
        is_completed INTEGER NOT NULL DEFAULT 0,
        completed_at TEXT
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS daily_quest_bonus (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL UNIQUE,
        claimed_at TEXT NOT NULL
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_daily_quests_date ON daily_quests(date)"),await ye(),localStorage.setItem(HE,"true"),console.log("Daily quests migration completed successfully")}catch(e){throw console.error("Failed to run daily quests migration:",e),e}}const GE="streak_migration_v1";async function PN(){if(localStorage.getItem(GE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS streak_shields (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        quantity INTEGER NOT NULL DEFAULT 0,
        earned_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.exec("SELECT COUNT(*) FROM streak_shields")[0].values[0][0]===0&&n.run("INSERT INTO streak_shields (quantity) VALUES (3)"),n.run(`
      CREATE TABLE IF NOT EXISTS streak_freezes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        freeze_date TEXT NOT NULL,
        reason TEXT,
        created_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE,
        UNIQUE(buff_definition_id, freeze_date)
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS streak_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL UNIQUE,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_milestone_claimed INTEGER NOT NULL DEFAULT 0,
        updated_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS streak_shield_uses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        used_date TEXT NOT NULL,
        streak_saved INTEGER NOT NULL,
        used_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_date ON streak_freezes(freeze_date)"),n.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_buff ON streak_freezes(buff_definition_id)"),await ye(),localStorage.setItem(GE,"true"),console.log("Streak migration completed successfully")}catch(e){throw console.error("Failed to run streak migration:",e),e}}const XE="weekly_boss_migration_v1";async function FN(){if(localStorage.getItem(XE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS weekly_boss (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        boss_type TEXT NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        max_hp INTEGER NOT NULL,
        current_hp INTEGER NOT NULL,
        is_defeated INTEGER NOT NULL DEFAULT 0,
        defeated_at TEXT,
        xp_reward INTEGER NOT NULL,
        bonus_shields INTEGER NOT NULL DEFAULT 0,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS boss_damage_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        boss_id INTEGER NOT NULL,
        damage_type TEXT NOT NULL,
        damage_amount INTEGER NOT NULL,
        source_description TEXT,
        dealt_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (boss_id) REFERENCES weekly_boss(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_weekly_boss_week ON weekly_boss(week_start)"),n.run("CREATE INDEX IF NOT EXISTS idx_boss_damage_log_boss ON boss_damage_log(boss_id)"),await ye(),localStorage.setItem(XE,"true"),console.log("Weekly boss migration completed successfully")}catch(e){throw console.error("Failed to run weekly boss migration:",e),e}}const zN={quests:"Quests & Goals",buffs:"Habits & Buffs",streaks:"Streaks",boss:"Boss Battles",levels:"Leveling",special:"Special"},HN={quests:"",buffs:"",streaks:"",boss:"",levels:"",special:""},GN=[{key:"first_step",name:"First Step",description:"Complete your first step",category:"quests",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"steps_completed",sort_order:1,is_hidden:!1},{key:"ten_steps",name:"On Your Way",description:"Complete 10 steps",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"steps_completed",sort_order:2,is_hidden:!1},{key:"hundred_steps",name:"Journey Master",description:"Complete 100 steps",category:"quests",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"steps_completed",sort_order:3,is_hidden:!1},{key:"first_quest",name:"Quest Beginner",description:"Complete your first quest",category:"quests",icon:"",xp_reward:50,requirement_type:"count",requirement_value:1,requirement_source:"quests_completed",sort_order:4,is_hidden:!1},{key:"ten_quests",name:"Quest Veteran",description:"Complete 10 quests",category:"quests",icon:"",xp_reward:150,requirement_type:"count",requirement_value:10,requirement_source:"quests_completed",sort_order:5,is_hidden:!1},{key:"first_goal",name:"Goal Getter",description:"Complete your first goal",category:"quests",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"goals_completed",sort_order:6,is_hidden:!1},{key:"first_buff",name:"Habit Former",description:"Activate your first buff",category:"buffs",icon:"",xp_reward:25,requirement_type:"count",requirement_value:1,requirement_source:"buffs_activated",sort_order:1,is_hidden:!1},{key:"ten_buffs",name:"Habit Builder",description:"Activate 10 buffs",category:"buffs",icon:"",xp_reward:50,requirement_type:"count",requirement_value:10,requirement_source:"buffs_activated",sort_order:2,is_hidden:!1},{key:"hundred_buffs",name:"Habit Master",description:"Activate 100 buffs",category:"buffs",icon:"",xp_reward:200,requirement_type:"count",requirement_value:100,requirement_source:"buffs_activated",sort_order:3,is_hidden:!1},{key:"week_streak",name:"Week Warrior",description:"Maintain a 7-day streak",category:"streaks",icon:"",xp_reward:75,requirement_type:"threshold",requirement_value:7,requirement_source:"buff_streak",sort_order:1,is_hidden:!1},{key:"month_streak",name:"Monthly Champion",description:"Maintain a 30-day streak",category:"streaks",icon:"",xp_reward:300,requirement_type:"threshold",requirement_value:30,requirement_source:"buff_streak",sort_order:2,is_hidden:!1},{key:"first_boss",name:"Dragon Slayer",description:"Defeat your first weekly boss",category:"boss",icon:"",xp_reward:100,requirement_type:"count",requirement_value:1,requirement_source:"bosses_defeated",sort_order:1,is_hidden:!1},{key:"five_bosses",name:"Boss Hunter",description:"Defeat 5 weekly bosses",category:"boss",icon:"",xp_reward:250,requirement_type:"count",requirement_value:5,requirement_source:"bosses_defeated",sort_order:2,is_hidden:!1},{key:"level_5",name:"Rising Star",description:"Reach level 5",category:"levels",icon:"",xp_reward:50,requirement_type:"threshold",requirement_value:5,requirement_source:"character_level",sort_order:1,is_hidden:!1},{key:"level_10",name:"Apprentice",description:"Reach level 10",category:"levels",icon:"",xp_reward:100,requirement_type:"threshold",requirement_value:10,requirement_source:"character_level",sort_order:2,is_hidden:!1},{key:"level_25",name:"Expert",description:"Reach level 25",category:"levels",icon:"",xp_reward:250,requirement_type:"threshold",requirement_value:25,requirement_source:"character_level",sort_order:3,is_hidden:!1},{key:"level_50",name:"Master",description:"Reach level 50",category:"levels",icon:"",xp_reward:500,requirement_type:"threshold",requirement_value:50,requirement_source:"character_level",sort_order:4,is_hidden:!1}],YE="achievement_migration_v1";async function XN(){if(localStorage.getItem(YE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS achievement_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        category TEXT NOT NULL,
        icon TEXT NOT NULL,
        xp_reward INTEGER NOT NULL DEFAULT 0,
        requirement_type TEXT NOT NULL,
        requirement_value INTEGER NOT NULL,
        requirement_source TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0,
        is_hidden INTEGER NOT NULL DEFAULT 0
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS achievement_unlocks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS achievement_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        definition_id INTEGER NOT NULL UNIQUE,
        current_value INTEGER NOT NULL DEFAULT 0,
        last_updated TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (definition_id) REFERENCES achievement_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_unlocks_def ON achievement_unlocks(definition_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_progress_def ON achievement_progress(definition_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_category ON achievement_definitions(category)"),n.run("CREATE INDEX IF NOT EXISTS idx_achievement_defs_source ON achievement_definitions(requirement_source)");for(const e of GN)n.run(`INSERT OR IGNORE INTO achievement_definitions
         (key, name, description, category, icon, xp_reward, requirement_type, requirement_value, requirement_source, sort_order, is_hidden)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.key,e.name,e.description,e.category,e.icon,e.xp_reward,e.requirement_type,e.requirement_value,e.requirement_source,e.sort_order,e.is_hidden?1:0]);await ye(),localStorage.setItem(YE,"true"),console.log("Achievement migration completed successfully")}catch(e){throw console.error("Failed to run achievement migration:",e),e}}const $T=10,pl=100,Um=20,Vm=5,YN={complete_step:5,activate_buff:3,start_focus_timer:10,deactivate_debuff:15},fm={name:"Fatigued",icon:"",effects:{focus:-2,willpower:-2}},hm={name:"Exhausted",icon:"",effects:{stamina:-3,willpower:-3,focus:-3,health:-1}},$E="energy_migration_v1";async function $N(){if(localStorage.getItem($E))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS energy_state (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        current_energy INTEGER NOT NULL DEFAULT ${pl},
        max_energy INTEGER NOT NULL DEFAULT ${pl},
        last_regen_at TEXT NOT NULL DEFAULT (datetime('now')),
        bonus_energy INTEGER NOT NULL DEFAULT 0
      )
    `),n.exec("SELECT COUNT(*) FROM energy_state")[0].values[0][0]===0&&n.run(`INSERT INTO energy_state (id, current_energy, max_energy) VALUES (1, ${pl}, ${pl})`),n.run(`
      CREATE TABLE IF NOT EXISTS energy_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        amount INTEGER NOT NULL,
        reason TEXT NOT NULL,
        source_type TEXT NOT NULL,
        source_id INTEGER,
        energy_before INTEGER NOT NULL,
        energy_after INTEGER NOT NULL,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS energy_costs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        action_type TEXT NOT NULL UNIQUE,
        base_cost INTEGER NOT NULL,
        description TEXT NOT NULL DEFAULT ''
      )
    `);for(const[s,a]of Object.entries(YN))n.run(`INSERT OR IGNORE INTO energy_costs (action_type, base_cost, description)
         VALUES (?, ?, ?)`,[s,a,`Cost for ${s.replace(/_/g," ")}`]);n.run("CREATE INDEX IF NOT EXISTS idx_energy_log_created ON energy_log(created_at)"),n.run("CREATE INDEX IF NOT EXISTS idx_energy_log_source ON energy_log(source_type)"),await ye(),localStorage.setItem($E,"true"),console.log("Energy migration completed successfully")}catch(e){throw console.error("Failed to run energy migration:",e),e}}const QN=15,KN=5,WN=10,Hs={work_duration:25,short_break:5,long_break:15,sessions_before_long_break:4,auto_start_breaks:!1,sound_enabled:!0},QE="focus_timer_migration_v1";async function JN(){if(localStorage.getItem(QE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS focus_sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        duration_minutes INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        status TEXT NOT NULL DEFAULT 'active',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        linked_step_id INTEGER,
        linked_quest_id INTEGER,
        break_taken INTEGER NOT NULL DEFAULT 0,
        notes TEXT NOT NULL DEFAULT '',
        FOREIGN KEY (linked_step_id) REFERENCES steps(id) ON DELETE SET NULL,
        FOREIGN KEY (linked_quest_id) REFERENCES quests(id) ON DELETE SET NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS focus_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        work_duration INTEGER NOT NULL DEFAULT ${Hs.work_duration},
        short_break INTEGER NOT NULL DEFAULT ${Hs.short_break},
        long_break INTEGER NOT NULL DEFAULT ${Hs.long_break},
        sessions_before_long_break INTEGER NOT NULL DEFAULT ${Hs.sessions_before_long_break},
        auto_start_breaks INTEGER NOT NULL DEFAULT ${Hs.auto_start_breaks?1:0},
        sound_enabled INTEGER NOT NULL DEFAULT ${Hs.sound_enabled?1:0}
      )
    `),n.exec("SELECT COUNT(*) FROM focus_settings")[0].values[0][0]===0&&n.run(`
        INSERT INTO focus_settings (id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled)
        VALUES (1, ?, ?, ?, ?, ?, ?)
      `,[Hs.work_duration,Hs.short_break,Hs.long_break,Hs.sessions_before_long_break,Hs.auto_start_breaks?1:0,Hs.sound_enabled?1:0]),n.run(`
      CREATE TABLE IF NOT EXISTS focus_stats (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        total_sessions INTEGER NOT NULL DEFAULT 0,
        total_minutes INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        current_streak INTEGER NOT NULL DEFAULT 0,
        today_sessions INTEGER NOT NULL DEFAULT 0,
        today_date TEXT NOT NULL DEFAULT (date('now'))
      )
    `),n.exec("SELECT COUNT(*) FROM focus_stats")[0].values[0][0]===0&&n.run("INSERT INTO focus_stats (id) VALUES (1)"),n.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_started ON focus_sessions(started_at)"),n.run("CREATE INDEX IF NOT EXISTS idx_focus_sessions_status ON focus_sessions(status)"),await ye(),localStorage.setItem(QE,"true"),console.log("Focus timer migration completed successfully")}catch(e){throw console.error("Failed to run focus timer migration:",e),e}}const KE="routine_migration_v1";async function ZN(){if(localStorage.getItem(KE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS routine_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        type TEXT NOT NULL DEFAULT 'custom',
        description TEXT NOT NULL DEFAULT '',
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_steps (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        linked_buff_id INTEGER,
        sort_order INTEGER NOT NULL DEFAULT 0,
        duration_minutes INTEGER NOT NULL DEFAULT 5,
        is_optional INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        FOREIGN KEY (linked_buff_id) REFERENCES buff_definitions(id) ON DELETE SET NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        started_at TEXT,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        steps_completed INTEGER NOT NULL DEFAULT 0,
        total_steps INTEGER NOT NULL DEFAULT 0,
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE,
        UNIQUE(routine_id, date)
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_step_logs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_log_id INTEGER NOT NULL,
        step_id INTEGER NOT NULL,
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        skipped INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (routine_log_id) REFERENCES routine_logs(id) ON DELETE CASCADE,
        FOREIGN KEY (step_id) REFERENCES routine_steps(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS routine_streaks (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        routine_id INTEGER NOT NULL UNIQUE,
        current_streak INTEGER NOT NULL DEFAULT 0,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_completed_date TEXT,
        FOREIGN KEY (routine_id) REFERENCES routine_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_routine_steps_routine ON routine_steps(routine_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_date ON routine_logs(date)"),n.run("CREATE INDEX IF NOT EXISTS idx_routine_logs_routine ON routine_logs(routine_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_routine_step_logs_log ON routine_step_logs(routine_log_id)"),await ye(),localStorage.setItem(KE,"true"),console.log("Routine migration completed successfully")}catch(e){throw console.error("Failed to run routine migration:",e),e}}const ew=[{name:"Wellness Warrior",description:"Activate Meditation, Exercise, and Healthy Meal buffs",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0},{name:"Focus Master",description:"Activate No Phone First Hour, Deep Work Session, and Read 30+ Minutes",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Early Bird",description:"Activate Morning Exercise, 8 Hours Sleep, and No Phone First Hour",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:35,is_active:!0},{name:"Mind & Body",description:"Activate Meditation, Yoga/Stretching, and Journaling",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:25,is_active:!0},{name:"Social Champion",description:"Activate Socialised, Helped Someone, and Gratitude Practice",icon:"",required_buffs:"[]",time_window_hours:24,bonus_xp:30,is_active:!0}],tw={"Wellness Warrior":["Meditation","Morning Exercise","Healthy Meal"],"Focus Master":["No Phone First Hour","Deep Work Session","Read 30+ Minutes"],"Early Bird":["Morning Exercise","8 Hours Sleep","No Phone First Hour"],"Mind & Body":["Meditation","Yoga / Stretching","Journaling"],"Social Champion":["Socialised","Helped Someone","Gratitude Practice"]},WE="combo_migration_v1";async function nw(){if(localStorage.getItem(WE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS combo_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL DEFAULT '',
        icon TEXT NOT NULL DEFAULT '',
        required_buffs TEXT NOT NULL DEFAULT '[]',
        time_window_hours INTEGER NOT NULL DEFAULT 24,
        bonus_xp INTEGER NOT NULL DEFAULT 25,
        is_active INTEGER NOT NULL DEFAULT 1
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS combo_activations (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        combo_id INTEGER NOT NULL,
        activated_at TEXT NOT NULL DEFAULT (datetime('now')),
        buffs_used TEXT NOT NULL DEFAULT '[]',
        FOREIGN KEY (combo_id) REFERENCES combo_definitions(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_combo ON combo_activations(combo_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_combo_activations_date ON combo_activations(activated_at)");for(const e of ew){const s=tw[e.name]||[],a=[];for(const o of s){const u=n.exec("SELECT id FROM buff_definitions WHERE name = ? AND type = 'buff' LIMIT 1",[o]);u.length&&u[0].values.length&&a.push(u[0].values[0][0])}a.length>=2&&n.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active)
           VALUES (?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,JSON.stringify(a),e.time_window_hours,e.bonus_xp,e.is_active?1:0])}await ye(),localStorage.setItem(WE,"true"),console.log("Combo migration completed successfully")}catch(e){throw console.error("Failed to run combo migration:",e),e}}const JE="weekly_review_migration_v1";async function sw(){if(localStorage.getItem(JE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS weekly_reviews (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        generated_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        is_completed INTEGER NOT NULL DEFAULT 0,
        summary_data TEXT NOT NULL DEFAULT '{}',
        wins TEXT NOT NULL DEFAULT '',
        challenges TEXT NOT NULL DEFAULT '',
        priorities TEXT NOT NULL DEFAULT '[]',
        notes TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_weekly_reviews_week ON weekly_reviews(week_start)"),await ye(),localStorage.setItem(JE,"true"),console.log("Weekly review migration completed successfully")}catch(e){throw console.error("Failed to run weekly review migration:",e),e}}const iw=[{name:"Double XP Hour",description:"All XP gains are doubled for the next hour!",type:"bonus",icon:"",duration_hours:1,effect_type:"xp_multiplier",effect_value:'{"multiplier": 2}',rarity:"rare",weight:10},{name:"Energy Surge",description:"Instantly restore 50 energy!",type:"bonus",icon:"",duration_hours:0,effect_type:"energy_restore",effect_value:'{"amount": 50}',rarity:"common",weight:30},{name:"Streak Shield Drop",description:"A free streak shield has appeared!",type:"bonus",icon:"",duration_hours:0,effect_type:"streak_shield",effect_value:'{"shields": 1}',rarity:"uncommon",weight:15},{name:"XP Bonus",description:"Receive a bonus of 25 XP!",type:"bonus",icon:"",duration_hours:0,effect_type:"xp_bonus",effect_value:'{"amount": 25}',rarity:"common",weight:25},{name:"Sprint Challenge",description:"Complete 5 steps in 2 hours for bonus XP!",type:"challenge",icon:"",duration_hours:2,effect_type:"step_challenge",effect_value:'{"target": 5, "reward_xp": 50}',rarity:"uncommon",weight:20},{name:"Habit Rush",description:"Activate 3 buffs in 4 hours for bonus XP!",type:"challenge",icon:"",duration_hours:4,effect_type:"buff_challenge",effect_value:'{"target": 3, "reward_xp": 40}',rarity:"common",weight:25},{name:"Focus Marathon",description:"Complete 2 focus sessions in 3 hours!",type:"challenge",icon:"",duration_hours:3,effect_type:"focus_challenge",effect_value:'{"target": 2, "reward_xp": 45}',rarity:"uncommon",weight:15},{name:"Stat Boost",description:"All stats increased by +2 for 6 hours!",type:"modifier",icon:"",duration_hours:6,effect_type:"stat_boost",effect_value:'{"all_stats": 2}',rarity:"rare",weight:10},{name:"Lucky Day",description:"Increased chance of rare events for 12 hours!",type:"modifier",icon:"",duration_hours:12,effect_type:"luck_boost",effect_value:'{"rare_chance_bonus": 0.5}',rarity:"epic",weight:5}],aw=.15,rw=4,ZE="random_event_migration_v1";async function ow(){if(localStorage.getItem(ZE))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS event_templates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        type TEXT NOT NULL,
        icon TEXT NOT NULL,
        duration_hours INTEGER NOT NULL DEFAULT 0,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        rarity TEXT NOT NULL DEFAULT 'common',
        weight INTEGER NOT NULL DEFAULT 10
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS active_events (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        expires_at TEXT NOT NULL,
        is_claimed INTEGER NOT NULL DEFAULT 0,
        claimed_at TEXT,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS event_history (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        template_id INTEGER NOT NULL,
        event_name TEXT NOT NULL,
        started_at TEXT NOT NULL DEFAULT (datetime('now')),
        result TEXT NOT NULL DEFAULT '',
        xp_earned INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (template_id) REFERENCES event_templates(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_active_events_expires ON active_events(expires_at)"),n.run("CREATE INDEX IF NOT EXISTS idx_event_history_started ON event_history(started_at)");for(const e of iw)n.run(`INSERT INTO event_templates (name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.type,e.icon,e.duration_hours,e.effect_type,e.effect_value,e.rarity,e.weight]);await ye(),localStorage.setItem(ZE,"true"),console.log("Random event migration completed successfully")}catch(e){throw console.error("Failed to run random event migration:",e),e}}const lw=[{name:"Productivity",description:"Quest and step bonuses",icon:"",color:"#3b82f6",sort_order:1},{name:"Health",description:"Energy and stamina bonuses",icon:"",color:"#ef4444",sort_order:2},{name:"Focus",description:"Timer and concentration bonuses",icon:"",color:"#8b5cf6",sort_order:3},{name:"Social",description:"Streak and charisma bonuses",icon:"",color:"#f97316",sort_order:4}],cw=[{branch_id:1,name:"Quick Learner",description:"+5% XP from steps",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"step_xp_bonus",effect_value:'{"percent": 5}',is_capstone:!1},{branch_id:1,name:"Efficient Worker",description:"+10% XP from quests",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:1,effect_type:"quest_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:1,name:"Goal Master",description:"+15% XP from goals",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:2,effect_type:"goal_xp_bonus",effect_value:'{"percent": 15}',is_capstone:!0},{branch_id:2,name:"Energized",description:"+10 max energy",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"max_energy",effect_value:'{"amount": 10}',is_capstone:!1},{branch_id:2,name:"Quick Recovery",description:"+2 energy regen/hour",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:4,effect_type:"energy_regen",effect_value:'{"amount": 2}',is_capstone:!1},{branch_id:2,name:"Vitality Master",description:"+2 stamina, +2 health",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:5,effect_type:"stat_bonus",effect_value:'{"stamina": 2, "health": 2}',is_capstone:!0},{branch_id:3,name:"Focused Mind",description:"+1 focus stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"focus": 1}',is_capstone:!1},{branch_id:3,name:"Deep Concentration",description:"+10% focus session XP",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:7,effect_type:"focus_xp_bonus",effect_value:'{"percent": 10}',is_capstone:!1},{branch_id:3,name:"Zen Master",description:"+3 focus, +2 willpower",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:8,effect_type:"stat_bonus",effect_value:'{"focus": 3, "willpower": 2}',is_capstone:!0},{branch_id:4,name:"Charismatic",description:"+1 charisma stat",icon:"",tier:1,position:0,xp_cost:100,prerequisite_node_id:null,effect_type:"stat_bonus",effect_value:'{"charisma": 1}',is_capstone:!1},{branch_id:4,name:"Streak Guardian",description:"Streaks last 1 extra day",icon:"",tier:2,position:0,xp_cost:250,prerequisite_node_id:10,effect_type:"streak_extension",effect_value:'{"days": 1}',is_capstone:!1},{branch_id:4,name:"Social Champion",description:"+3 charisma, +10% streak XP",icon:"",tier:3,position:0,xp_cost:500,prerequisite_node_id:11,effect_type:"combined",effect_value:'{"charisma": 3, "streak_xp_bonus": 10}',is_capstone:!0}],ev="skill_tree_migration_v1";async function uw(){if(localStorage.getItem(ev))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS skill_branches (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        color TEXT NOT NULL,
        sort_order INTEGER NOT NULL DEFAULT 0
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS skill_nodes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        branch_id INTEGER NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        tier INTEGER NOT NULL DEFAULT 1,
        position INTEGER NOT NULL DEFAULT 0,
        xp_cost INTEGER NOT NULL DEFAULT 100,
        prerequisite_node_id INTEGER,
        effect_type TEXT NOT NULL,
        effect_value TEXT NOT NULL DEFAULT '{}',
        is_capstone INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (branch_id) REFERENCES skill_branches(id) ON DELETE CASCADE,
        FOREIGN KEY (prerequisite_node_id) REFERENCES skill_nodes(id) ON DELETE SET NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS unlocked_skills (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        node_id INTEGER NOT NULL UNIQUE,
        unlocked_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (node_id) REFERENCES skill_nodes(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_skill_nodes_branch ON skill_nodes(branch_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_unlocked_skills_node ON unlocked_skills(node_id)");for(const e of lw)n.run(`INSERT INTO skill_branches (name, description, icon, color, sort_order)
         VALUES (?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.color,e.sort_order]);for(const e of cw)n.run(`INSERT INTO skill_nodes (branch_id, name, description, icon, tier, position, xp_cost, prerequisite_node_id, effect_type, effect_value, is_capstone)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.branch_id,e.name,e.description,e.icon,e.tier,e.position,e.xp_cost,e.prerequisite_node_id,e.effect_type,e.effect_value,e.is_capstone?1:0]);await ye(),localStorage.setItem(ev,"true"),console.log("Skill tree migration completed successfully")}catch(e){throw console.error("Failed to run skill tree migration:",e),e}}const dw=[{key:"warrior",name:"Warrior",description:"Masters of physical challenges and quest completion",icon:"",primary_stat:"stamina",stat_bonuses:'{"stamina": 3, "health": 2}',xp_bonus_type:"quest",xp_bonus_percent:10,special_ability:"Battlecry",special_ability_desc:"Once per day, complete a quest step instantly"},{key:"mage",name:"Mage",description:"Experts in habits and mental discipline",icon:"",primary_stat:"focus",stat_bonuses:'{"focus": 3, "willpower": 2}',xp_bonus_type:"buff",xp_bonus_percent:10,special_ability:"Arcane Focus",special_ability_desc:"Focus sessions grant 20% more XP"},{key:"ranger",name:"Ranger",description:"Specialists in maintaining streaks and consistency",icon:"",primary_stat:"willpower",stat_bonuses:'{"willpower": 3, "stamina": 1, "focus": 1}',xp_bonus_type:"streak",xp_bonus_percent:10,special_ability:"Tracking",special_ability_desc:"Streaks are protected for 1 extra day"},{key:"paladin",name:"Paladin",description:"Champions of boss battles and weekly challenges",icon:"",primary_stat:"health",stat_bonuses:'{"health": 2, "willpower": 2, "charisma": 1}',xp_bonus_type:"boss",xp_bonus_percent:10,special_ability:"Divine Shield",special_ability_desc:"Deal 25% more damage to weekly bosses"}],tv=3,nv="character_class_migration_v1";async function fw(){if(localStorage.getItem(nv))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS character_classes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        key TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        primary_stat TEXT NOT NULL,
        stat_bonuses TEXT NOT NULL DEFAULT '{}',
        xp_bonus_type TEXT NOT NULL,
        xp_bonus_percent INTEGER NOT NULL DEFAULT 0,
        special_ability TEXT NOT NULL,
        special_ability_desc TEXT NOT NULL
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS character_class_selection (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        class_id INTEGER,
        selected_at TEXT,
        last_changed_at TEXT,
        changes_remaining INTEGER NOT NULL DEFAULT ${tv},
        FOREIGN KEY (class_id) REFERENCES character_classes(id) ON DELETE SET NULL
      )
    `),n.exec("SELECT COUNT(*) FROM character_class_selection")[0].values[0][0]===0&&n.run(`INSERT INTO character_class_selection (id, changes_remaining) VALUES (1, ${tv})`);for(const s of dw)n.run(`INSERT INTO character_classes (key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[s.key,s.name,s.description,s.icon,s.primary_stat,s.stat_bonuses,s.xp_bonus_type,s.xp_bonus_percent,s.special_ability,s.special_ability_desc]);await ye(),localStorage.setItem(nv,"true"),console.log("Character class migration completed successfully")}catch(e){throw console.error("Failed to run character class migration:",e),e}}const hw=[{name:"The Awakening Glade",description:"Where every journey begins. A peaceful clearing filled with morning light.",icon:"",unlock_level:1,background_color:"#22c55e",position_x:50,position_y:80,connected_to:"[2]",challenges:'["Complete your first quest", "Activate 5 buffs", "Reach level 3"]',rewards:'{"xp": 100, "title": "Awakened"}'},{name:"Habit Highlands",description:"Rocky terrain where only consistent habits lead to the summit.",icon:"",unlock_level:5,background_color:"#a3a3a3",position_x:30,position_y:60,connected_to:"[1, 3]",challenges:'["Maintain a 7-day streak", "Complete 10 quests", "Defeat your first boss"]',rewards:'{"xp": 250, "title": "Highland Wanderer"}'},{name:"Focus Forest",description:"Dense woods where only the focused can find their way.",icon:"",unlock_level:10,background_color:"#166534",position_x:70,position_y:50,connected_to:"[2, 4]",challenges:'["Complete 10 focus sessions", "Reach level 15", "Unlock 3 skill nodes"]',rewards:'{"xp": 400, "title": "Forest Pathfinder"}'},{name:"Productivity Plains",description:"Vast open fields where goals are achieved and dreams realized.",icon:"",unlock_level:15,background_color:"#eab308",position_x:50,position_y:35,connected_to:"[3, 5]",challenges:'["Complete 5 goals", "Earn 5000 total XP", "Defeat 5 bosses"]',rewards:'{"xp": 600, "title": "Plains Champion"}'},{name:"Summit of Mastery",description:"The peak where only true masters stand. Your journey culminates here.",icon:"",unlock_level:25,background_color:"#7c3aed",position_x:50,position_y:15,connected_to:"[4]",challenges:'["Reach level 30", "Unlock all capstone skills", "Complete 50 quests"]',rewards:'{"xp": 1000, "title": "Summit Master"}'}],sv="territory_migration_v1";async function mw(){if(localStorage.getItem(sv))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS territories (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        unlock_level INTEGER NOT NULL DEFAULT 1,
        background_color TEXT NOT NULL DEFAULT '#333333',
        position_x INTEGER NOT NULL DEFAULT 50,
        position_y INTEGER NOT NULL DEFAULT 50,
        connected_to TEXT NOT NULL DEFAULT '[]',
        challenges TEXT NOT NULL DEFAULT '[]',
        rewards TEXT NOT NULL DEFAULT '{}'
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS territory_progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        territory_id INTEGER NOT NULL UNIQUE,
        discovered_at TEXT NOT NULL DEFAULT (datetime('now')),
        completed_at TEXT,
        challenges_completed TEXT NOT NULL DEFAULT '[]',
        is_current INTEGER NOT NULL DEFAULT 0,
        FOREIGN KEY (territory_id) REFERENCES territories(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_territory_progress_territory ON territory_progress(territory_id)");for(const e of hw)n.run(`INSERT INTO territories (name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.unlock_level,e.background_color,e.position_x,e.position_y,e.connected_to,e.challenges,e.rewards]);n.run("INSERT INTO territory_progress (territory_id, is_current) VALUES (1, 1)"),await ye(),localStorage.setItem(sv,"true"),console.log("Territory migration completed successfully")}catch(e){throw console.error("Failed to run territory migration:",e),e}}const pw=[{name:"Wooden Sword",description:"A basic training sword",icon:"",type:"equipment",slot:"weapon",rarity:"common",stat_effects:'{"stamina": 1}',special_effect:"",stack_limit:1},{name:"Iron Blade",description:"A sturdy iron sword",icon:"",type:"equipment",slot:"weapon",rarity:"uncommon",stat_effects:'{"stamina": 2, "willpower": 1}',special_effect:"",stack_limit:1},{name:"Focus Staff",description:"A staff that enhances concentration",icon:"",type:"equipment",slot:"weapon",rarity:"rare",stat_effects:'{"focus": 3, "willpower": 2}',special_effect:"+5% focus session XP",stack_limit:1},{name:"Dragon Slayer",description:"Legendary weapon forged from dragon scales",icon:"",type:"equipment",slot:"weapon",rarity:"legendary",stat_effects:'{"stamina": 5, "willpower": 3, "health": 2}',special_effect:"+25% boss damage",stack_limit:1},{name:"Leather Vest",description:"Basic protection",icon:"",type:"equipment",slot:"armor",rarity:"common",stat_effects:'{"health": 1}',special_effect:"",stack_limit:1},{name:"Chain Mail",description:"Linked metal rings for defense",icon:"",type:"equipment",slot:"armor",rarity:"uncommon",stat_effects:'{"health": 2, "stamina": 1}',special_effect:"",stack_limit:1},{name:"Mage Robes",description:"Enchanted robes of wisdom",icon:"",type:"equipment",slot:"armor",rarity:"rare",stat_effects:'{"willpower": 3, "focus": 2}',special_effect:"+10% buff duration",stack_limit:1},{name:"Lucky Charm",description:"Brings good fortune",icon:"",type:"equipment",slot:"accessory",rarity:"common",stat_effects:'{"charisma": 1}',special_effect:"",stack_limit:1},{name:"Ring of Focus",description:"Enhances mental clarity",icon:"",type:"equipment",slot:"accessory",rarity:"uncommon",stat_effects:'{"focus": 2}',special_effect:"",stack_limit:1},{name:"Amulet of Persistence",description:"Grants unwavering determination",icon:"",type:"equipment",slot:"accessory",rarity:"rare",stat_effects:'{"willpower": 3, "stamina": 1}',special_effect:"Streaks protected for +1 day",stack_limit:1},{name:"Energy Potion",description:"Restores 25 energy",icon:"",type:"consumable",slot:null,rarity:"common",stat_effects:"{}",special_effect:"restore_energy:25",stack_limit:10},{name:"XP Elixir",description:"Grants 50 bonus XP",icon:"",type:"consumable",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"grant_xp:50",stack_limit:5},{name:"Streak Shield Scroll",description:"Adds a streak shield",icon:"",type:"consumable",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"add_shield:1",stack_limit:3},{name:"First Blood Trophy",description:"Awarded for defeating your first boss",icon:"",type:"trophy",slot:null,rarity:"uncommon",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Streak Champion Medal",description:"Awarded for a 30-day streak",icon:"",type:"trophy",slot:null,rarity:"rare",stat_effects:"{}",special_effect:"",stack_limit:1},{name:"Mastery Crown",description:"Awarded for reaching level 50",icon:"",type:"trophy",slot:null,rarity:"legendary",stat_effects:"{}",special_effect:"",stack_limit:1}],iv="inventory_migration_v1";async function _w(){if(localStorage.getItem(iv))return;const n=re();try{n.run(`
      CREATE TABLE IF NOT EXISTS item_definitions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        type TEXT NOT NULL,
        slot TEXT,
        rarity TEXT NOT NULL DEFAULT 'common',
        stat_effects TEXT NOT NULL DEFAULT '{}',
        special_effect TEXT NOT NULL DEFAULT '',
        stack_limit INTEGER NOT NULL DEFAULT 1
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS inventory (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        item_id INTEGER NOT NULL,
        quantity INTEGER NOT NULL DEFAULT 1,
        acquired_at TEXT NOT NULL DEFAULT (datetime('now')),
        source TEXT NOT NULL DEFAULT 'unknown',
        FOREIGN KEY (item_id) REFERENCES item_definitions(id) ON DELETE CASCADE
      )
    `),n.run(`
      CREATE TABLE IF NOT EXISTS equipped_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        slot TEXT NOT NULL UNIQUE,
        inventory_id INTEGER NOT NULL,
        equipped_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (inventory_id) REFERENCES inventory(id) ON DELETE CASCADE
      )
    `),n.run("CREATE INDEX IF NOT EXISTS idx_inventory_item ON inventory(item_id)"),n.run("CREATE INDEX IF NOT EXISTS idx_equipped_items_slot ON equipped_items(slot)");for(const e of pw)n.run(`INSERT INTO item_definitions (name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.name,e.description,e.icon,e.type,e.slot,e.rarity,e.stat_effects,e.special_effect,e.stack_limit]);n.run("INSERT INTO inventory (item_id, source) VALUES (1, 'starter')"),n.run("INSERT INTO inventory (item_id, source) VALUES (5, 'starter')"),n.run("INSERT INTO inventory (item_id, quantity, source) VALUES (12, 3, 'starter')"),await ye(),localStorage.setItem(iv,"true"),console.log("Inventory migration completed successfully")}catch(e){throw console.error("Failed to run inventory migration:",e),e}}function gw(){const[n,e]=j.useState(!1),[s,a]=j.useState(null);return j.useEffect(()=>{MN().then(async()=>{await UN(),await VN(),await BN(),await qN(),await PN(),await FN(),await XN(),await $N(),await JN(),await ZN(),await nw(),await sw(),await ow(),await uw(),await fw(),await mw(),await _w(),e(!0)}).catch(o=>a(o.message))},[]),{ready:n,error:s}}function av(){const e=re().exec("SELECT id, name, total_xp, level, title, created_at FROM character WHERE id = 1");if(!e.length)throw new Error("Character not found");const s=e[0].values[0];return{id:s[0],name:s[1],total_xp:s[2],level:s[3],title:s[4],created_at:s[5]}}async function yw(n){re().run("UPDATE character SET name = ? WHERE id = 1",[n]),await ye()}function rv(n=50){const s=re().exec(`SELECT id, amount, reason, source_type, source_id, created_at
     FROM xp_log ORDER BY created_at DESC LIMIT ?`,[n]);return s.length?s[0].values.map(a=>({id:a[0],amount:a[1],reason:a[2],source_type:a[3],source_id:a[4],created_at:a[5]})):[]}const Bm=["stamina","willpower","health","focus","charisma"],ur=["Novice","Apprentice","Journeyman","Adept","Expert","Master","Legend","Dragonborn"],Ew={normal:10,important:15,legendary:20},vw=50,Tw=200,bw=5,Sw=25,Nw=1.8,ww=50;function mp(n){return Math.floor(ww*Math.pow(n,Nw))}function xw(n){let e=0;for(let s=1;s<n;s++)e+=mp(s);return e}function QT(n){let e=1,s=0;for(;;){if(s+=mp(e),n<s)return e;if(e++,e>100)return 100}}function pp(n){const e=QT(n),s=xw(e),a=n-s,o=mp(e);return{current:a,needed:o,percentage:Math.min(a/o*100,100)}}function Aw(n){return n>=50?ur[7]:n>=40?ur[6]:n>=30?ur[5]:n>=22?ur[4]:n>=15?ur[3]:n>=10?ur[2]:n>=5?ur[1]:ur[0]}async function Rw(n,e,s,a=null){const o=re(),u=o.exec("SELECT total_xp, level FROM character WHERE id = 1"),h=u[0].values[0][0],g=u[0].values[0][1],v=h+n,_=QT(v),S=Aw(_),w=_>g;return o.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[v,_,S]),o.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[n,e,s,a]),await ye(),{amount:n,newTotal:v,leveledUp:w,newLevel:_,newTitle:S}}function Cw(){const[n,e]=j.useState(()=>av()),[s,a]=j.useState(()=>rv()),[o,u]=j.useState(null),[h,g]=j.useState([]),v=j.useCallback(()=>{e(av()),a(rv())},[]),_=j.useCallback(async(C,q,X,O)=>{const V=await Rw(C,q,X,O??null);V.leveledUp&&u({level:V.newLevel,title:V.newTitle});const z=Date.now();return g($=>[...$,{id:z,amount:C}]),setTimeout(()=>g($=>$.filter(Z=>Z.id!==z)),1500),v(),V},[v]),S=j.useCallback(()=>u(null),[]),w=j.useCallback(async C=>{await yw(C),v()},[v]);return{character:n,xpLog:s,levelUpInfo:o,xpFloats:h,grantXP:_,dismissLevelUp:S,setName:w,refresh:v}}function KT(){const e=re().exec("SELECT id, name, icon, color FROM domains ORDER BY id");return e.length?e[0].values.map(s=>({id:s[0],name:s[1],icon:s[2],color:s[3]})):[]}function Iw(n,e){const s=re();let a="SELECT id, domain_id, title, description, status, created_at, completed_at FROM goals WHERE 1=1";const o=[];n&&(a+=" AND domain_id = ?",o.push(n)),e&&(a+=" AND status = ?",o.push(e)),a+=" ORDER BY created_at DESC";const u=s.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],domain_id:h[1],title:h[2],description:h[3],status:h[4],created_at:h[5],completed_at:h[6]})):[]}async function kw(n,e,s=""){const a=re();a.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[n,e,s]);const o=a.exec("SELECT last_insert_rowid()");return await ye(),o[0].values[0][0]}async function Lw(n,e){const s=re(),a=new Date().toISOString();s.run("UPDATE goals SET status = ?, completed_at = ? WHERE id = ?",[e,a,n]),await ye()}function _p(n,e){const s=re();let a="SELECT id, goal_id, title, description, priority, status, created_at, completed_at FROM quests WHERE 1=1";const o=[];n&&(a+=" AND goal_id = ?",o.push(n)),a+=" ORDER BY created_at DESC";const u=s.exec(a,o);return u.length?u[0].values.map(h=>({id:h[0],goal_id:h[1],title:h[2],description:h[3],priority:h[4],status:h[5],created_at:h[6],completed_at:h[7]})):[]}async function jw(n,e,s="",a="normal"){const o=re();o.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[n,e,s,a]);const u=o.exec("SELECT last_insert_rowid()");return await ye(),u[0].values[0][0]}async function Dw(n,e){const s=re(),a=new Date().toISOString();s.run("UPDATE quests SET status = ?, completed_at = ? WHERE id = ?",[e,a,n]),await ye()}function gp(n){const s=re().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at FROM steps WHERE quest_id = ? ORDER BY sort_order, id",[n]);return s.length?s[0].values.map(a=>({id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6]})):[]}async function Ow(n,e,s="normal"){const a=re(),u=a.exec("SELECT COALESCE(MAX(sort_order), 0) FROM steps WHERE quest_id = ?",[n])[0].values[0][0]+1;a.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[n,e,s,u]);const h=a.exec("SELECT last_insert_rowid()");return await ye(),h[0].values[0][0]}async function Mw(n){re().run("UPDATE steps SET status = 'completed', completed_at = datetime('now') WHERE id = ?",[n]),await ye()}async function Uw(n){re().run("UPDATE steps SET status = 'pending', completed_at = NULL WHERE id = ?",[n]),await ye()}async function Vw(n){re().run("DELETE FROM steps WHERE id = ?",[n]),await ye()}async function Bw(n){const e=re();e.run("DELETE FROM steps WHERE quest_id = ?",[n]),e.run("DELETE FROM quests WHERE id = ?",[n]),await ye()}async function qw(n){const e=re(),s=_p(n);for(const a of s)e.run("DELETE FROM steps WHERE quest_id = ?",[a.id]);e.run("DELETE FROM quests WHERE goal_id = ?",[n]),e.run("DELETE FROM goals WHERE id = ?",[n]),await ye()}function Pw(n){const s=re().exec(`SELECT q.id, q.goal_id, q.title, q.description, q.priority, q.status, q.created_at, q.completed_at,
            d.name as domain_name, d.icon as domain_icon, d.color as domain_color, g.title as goal_title
     FROM quests q
     JOIN goals g ON q.goal_id = g.id
     JOIN domains d ON g.domain_id = d.id
     WHERE q.id = ?`,[n]);if(!s.length)return null;const a=s[0].values[0];return{id:a[0],goal_id:a[1],title:a[2],description:a[3],priority:a[4],status:a[5],created_at:a[6],completed_at:a[7],domain_name:a[8],domain_icon:a[9],domain_color:a[10],goal_title:a[11],steps:gp(n)}}function Fw(n,e){const s=Iw(n,e),a=KT(),o=new Map(a.map(u=>[u.id,u]));return s.map(u=>{const h=o.get(u.domain_id),g=_p(u.id).map(v=>({...v,steps:gp(v.id),domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color,goal_title:u.title}));return{...u,quests:g,domain_name:h?.name,domain_icon:h?.icon,domain_color:h?.color}})}function zw({grantXP:n,onStepComplete:e,onQuestComplete:s,onGoalComplete:a}){const[o,u]=j.useState([]),[h]=j.useState(()=>KT()),[g,v]=j.useState(void 0),[_,S]=j.useState("active"),w=j.useCallback(()=>{u(Fw(g,_))},[g,_]);j.useEffect(()=>{w()},[w]);const C=j.useCallback(async(ie,_e,Te)=>{await kw(ie,_e,Te),w()},[w]),q=j.useCallback(async(ie,_e,Te,M)=>{await jw(ie,_e,Te,M),w()},[w]),X=j.useCallback(async(ie,_e,Te)=>{await Ow(ie,_e,Te),w()},[w]),O=j.useCallback(async(ie,_e,Te)=>{await Mw(ie);const M=Ew[Te]||10;await n(M,"Completed step","step",ie),e&&e();const D=gp(_e);if(D.every(B=>B.status==="completed")&&D.length>0){await Dw(_e,"completed"),await n(vw,"Completed quest","quest",_e),s&&s();const B=Pw(_e);B&&_p(B.goal_id).every(k=>k.status==="completed")&&(await Lw(B.goal_id,"completed"),await n(Tw,"Completed goal","goal",B.goal_id),a&&a())}w()},[w,n,e,s,a]),V=j.useCallback(async ie=>{await Uw(ie),w()},[w]),z=j.useCallback(async ie=>{await Vw(ie),w()},[w]),$=j.useCallback(async ie=>{await Bw(ie),w()},[w]),Z=j.useCallback(async ie=>{await qw(ie),w()},[w]);return{goals:o,domains:h,filterDomain:g,filterStatus:_,setFilterDomain:v,setFilterStatus:S,refresh:w,createGoal:C,createQuest:q,createStep:X,completeStep:O,uncompleteStep:V,deleteStep:z,deleteQuest:$,deleteGoal:Z}}function Hw(n){const e=re();let s="SELECT id, name, description, type, icon, duration_hours, stat_effects, created_at FROM buff_definitions";const a=[];s+=" ORDER BY name";const o=e.exec(s,a);return o.length?o[0].values.map(u=>({id:u[0],name:u[1],description:u[2],type:u[3],icon:u[4],duration_hours:u[5],stat_effects:u[6],created_at:u[7]})):[]}async function Gw(n,e,s,a,o,u){const h=re();h.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[n,e,s,a,o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ye(),g[0].values[0][0]}async function Xw(n){const e=re();e.run("DELETE FROM buff_log WHERE definition_id = ?",[n]),e.run("DELETE FROM buff_definitions WHERE id = ?",[n]),await ye()}async function Yw(n){const e=re(),s=e.exec("SELECT duration_hours FROM buff_definitions WHERE id = ?",[n]);if(!s.length)throw new Error("Buff definition not found");const a=s[0].values[0][0],o=e.exec(`SELECT id, expires_at FROM buff_log
     WHERE definition_id = ? AND is_active = 1 AND expires_at > datetime('now')
     ORDER BY expires_at DESC LIMIT 1`,[n]);if(o.length&&o[0].values.length){const _=o[0].values[0][0];e.run(`UPDATE buff_log SET expires_at = datetime(expires_at, '+' || ? || ' hours')
       WHERE id = ?`,[a,_]);const w=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[_])[0].values[0][0];return await ye(),{logId:_,isStacked:!0,newExpiresAt:w}}e.run(`INSERT INTO buff_log (definition_id, expires_at)
     VALUES (?, datetime('now', '+' || ? || ' hours'))`,[n,a]);const h=e.exec("SELECT last_insert_rowid()")[0].values[0][0],v=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[h])[0].values[0][0];return await ye(),{logId:h,isStacked:!1,newExpiresAt:v}}async function $w(n){re().run("UPDATE buff_log SET is_active = 0 WHERE id = ?",[n]),await ye()}function Qw(n){const s=re().exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-30 days')
     ORDER BY d DESC`,[n]);if(!s.length)return 0;let a=0;const o=new Date().toISOString().split("T")[0],u=s[0].values.map(v=>v[0]),h=new Date(Date.now()-864e5).toISOString().split("T")[0];if(!u.includes(o)&&!u.includes(h))return 0;let g=u.includes(o)?o:h;for(const v of u)if(v===g){a++;const _=new Date(g+"T00:00:00");_.setDate(_.getDate()-1),g=_.toISOString().split("T")[0]}return a}function Mc(n){try{return JSON.parse(n)}catch{return{}}}async function Kw(){re().run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1 AND expires_at <= datetime('now')"),await ye()}function Ww(){const e=re().exec(`
    SELECT bl.id, bl.definition_id, bl.activated_at, bl.expires_at, bl.is_active,
           bd.name, bd.description, bd.type, bd.icon, bd.stat_effects
    FROM buff_log bl
    JOIN buff_definitions bd ON bl.definition_id = bd.id
    WHERE bl.is_active = 1 AND bl.expires_at > datetime('now')
    ORDER BY bl.activated_at DESC
  `);return e.length?e[0].values.map(s=>({id:s[0],definition_id:s[1],activated_at:s[2],expires_at:s[3],is_active:!!s[4],name:s[5],description:s[6],type:s[7],icon:s[8],stat_effects:s[9]})):[]}function Jw(n){const e={stamina:10,willpower:10,health:10,focus:10,charisma:10};for(const s of n){const a=Mc(s.stat_effects);for(const[o,u]of Object.entries(a))o in e&&(e[o]+=u)}return e}function Zw({grantXP:n,scheduleBuffExpiry:e,cancelBuffExpiry:s,onBuffActivated:a}){const[o,u]=j.useState([]),[h,g]=j.useState([]),[v,_]=j.useState({stamina:10,willpower:10,health:10,focus:10,charisma:10}),S=j.useCallback(async()=>{await Kw(),u(Hw());const O=Ww();g(O),_(Jw(O))},[]);j.useEffect(()=>{const O=setInterval(S,6e4);return()=>clearInterval(O)},[S]);const w=j.useCallback(async(O,V,z,$,Z,ie)=>{await Gw(O,V,z,$,Z,ie),S()},[S]),C=j.useCallback(async O=>{await Xw(O),S()},[S]),q=j.useCallback(async O=>{const V=await Yw(O),z=o.find(Z=>Z.id===O),$=z&&z.stat_effects&&z.stat_effects!=="{}"&&(()=>{try{const Z=JSON.parse(z.stat_effects);return Object.values(Z).some(ie=>ie!==0)}catch{return!1}})();if(z&&z.type==="buff"&&!V.isStacked&&$){await n(bw,`Activated buff: ${z.name}`,"buff",V.logId);const Z=Qw(O);Z>0&&Z%7===0&&await n(Sw,`7-day streak: ${z.name}`,"streak",O)}z&&a&&$&&a(z.type),z&&e&&(V.isStacked&&s&&await s(V.logId),await e(V.logId,z.name,z.type,V.newExpiresAt)),S()},[S,o,n,e,s,a]),X=j.useCallback(async O=>{s&&await s(O),await $w(O),S()},[S,s]);return{definitions:o,activeBuffs:h,stats:v,refresh:S,createDefinition:w,deleteDefinition:C,activateBuff:q,deactivateBuff:X}}const ex=1440*60*1e3,WT="Goal Game Backup",Xc="github_gist_token",Ta="github_gist_id",Ud="github_last_backup";function tx(){return!!localStorage.getItem(Xc)}function JT(){return!!localStorage.getItem(Xc)}function Vd(){return localStorage.getItem(Xc)}function nx(n){localStorage.setItem(Xc,n)}function sx(){localStorage.removeItem(Xc),localStorage.removeItem(Ta),localStorage.removeItem(Ud)}function ix(){const n=localStorage.getItem(Ud);return n?Date.now()-Number(n)>ex:!0}function ZT(){const n=localStorage.getItem(Ud);return n?new Date(Number(n)):null}function ax(n){let e="";for(let s=0;s<n.length;s++)e+=String.fromCharCode(n[s]);return btoa(e)}function rx(n){const e=atob(n),s=new Uint8Array(e.length);for(let a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s}async function eb(n){try{const e=await fetch("https://api.github.com/gists?per_page=100",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}});if(!e.ok)return null;const s=await e.json();for(const a of s)if(a.description===WT)return a.id;return null}catch{return null}}async function ox(n){const e=localStorage.getItem(Ta);if(e){if((await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}})).ok)return e;localStorage.removeItem(Ta)}const s=await eb(n);if(s)return localStorage.setItem(Ta,s),s;const a=await fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({description:WT,public:!1,files:{"README.md":{content:`# Goal Game Backups

This gist contains automatic backups of your Goal Game data.

Backups are stored as base64-encoded database files.`}}})});if(!a.ok)throw new Error("Failed to create backup gist");const o=await a.json();return localStorage.setItem(Ta,o.id),o.id}async function tb(n){const e=Vd();if(!e)return{success:!1,error:"Not authenticated"};try{const s=await ox(e),o=`backup-${new Date().toISOString().replace(/[:.]/g,"-")}.db.b64`,u=ax(n),h=await fetch(`https://api.github.com/gists/${s}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:{[o]:{content:u}}})});return h.ok?(localStorage.setItem(Ud,String(Date.now())),{success:!0,fileName:o}):{success:!1,error:(await h.json()).message||"Upload failed"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async function nb(){const n=Vd();if(!n)return[];let e=localStorage.getItem(Ta);if(!e)if(e=await eb(n),e)localStorage.setItem(Ta,e);else return[];try{const s=await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}});if(!s.ok)return[];const a=await s.json(),o=[];for(const[u,h]of Object.entries(a.files))u.endsWith(".db.b64")&&o.push({fileName:u,size:h.size});return o.sort((u,h)=>h.fileName.localeCompare(u.fileName))}catch{return[]}}async function lx(n){const e=Vd();if(!e)return null;const s=localStorage.getItem(Ta);if(!s)return null;try{const a=await fetch(`https://api.github.com/gists/${s}`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json"}});if(!a.ok)return null;const u=(await a.json()).files[n];if(!u)return null;let h;return u.truncated?h=await(await fetch(u.raw_url,{headers:{Authorization:`Bearer ${e}`}})).text():h=u.content,rx(h)}catch{return null}}async function cx(n){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github+json"}})).ok}catch{return!1}}async function sb(n=7){const e=Vd();if(!e)return;const s=localStorage.getItem(Ta);if(s)try{const a=await nb();if(a.length<=n)return;const o=a.slice(n),u={};for(const h of o)u[h.fileName]=null;await fetch(`https://api.github.com/gists/${s}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:u})})}catch{}}function ux(){const[n,e]=j.useState("idle"),[s,a]=j.useState(null),[o,u]=j.useState(""),h=j.useRef(!1);return j.useEffect(()=>{if(h.current)return;h.current=!0;const v=setTimeout(async()=>{if(tx()&&JT()){if(!ix()){a(ZT());return}e("backing-up"),u("Auto-backing up to GitHub...");try{const _=await hp(),S=await tb(_);S.success?(e("success"),u("Auto-backup complete!"),a(new Date),await sb(7),setTimeout(()=>{e("idle"),u("")},5e3)):(e("error"),u(`Auto-backup failed: ${S.error}`))}catch(_){e("error"),u(`Auto-backup failed: ${_ instanceof Error?_.message:"Unknown error"}`)}}},3e3);return()=>clearTimeout(v)},[]),{status:n,lastBackup:s,message:o}}const dx=()=>{};var ov={};const ib=function(n){const e=[];let s=0;for(let a=0;a<n.length;a++){let o=n.charCodeAt(a);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++a)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},fx=function(n){const e=[];let s=0,a=0;for(;s<n.length;){const o=n[s++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[s++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[s++],h=n[s++],g=n[s++],v=((o&7)<<18|(u&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const u=n[s++],h=n[s++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<n.length;o+=3){const u=n[o],h=o+1<n.length,g=h?n[o+1]:0,v=o+2<n.length,_=v?n[o+2]:0,S=u>>2,w=(u&3)<<4|g>>4;let C=(g&15)<<2|_>>6,q=_&63;v||(q=64,h||(C=64)),a.push(s[S],s[w],s[C],s[q])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ib(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<n.length;){const u=s[n.charAt(o++)],g=o<n.length?s[n.charAt(o)]:0;++o;const _=o<n.length?s[n.charAt(o)]:64;++o;const w=o<n.length?s[n.charAt(o)]:64;if(++o,u==null||g==null||_==null||w==null)throw new hx;const C=u<<2|g>>4;if(a.push(C),_!==64){const q=g<<4&240|_>>2;if(a.push(q),w!==64){const X=_<<6&192|w;a.push(X)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mx=function(n){const e=ib(n);return ab.encodeByteArray(e,!0)},gd=function(n){return mx(n).replace(/\./g,"")},px=function(n){try{return ab.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _x(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gx=()=>_x().__FIREBASE_DEFAULTS__,yx=()=>{if(typeof process>"u"||typeof ov>"u")return;const n=ov.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ex=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&px(n[1]);return e&&JSON.parse(e)},yp=()=>{try{return dx()||gx()||yx()||Ex()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vx=n=>yp()?.emulatorHosts?.[n],Tx=n=>{const e=vx(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),a]:[e.substring(0,s),a]},rb=()=>yp()?.config;class bx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,a)=>{s?this.reject(s):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,a))}}}function Ep(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sx(n){return(await fetch(n,{credentials:"include"})).ok}function Nx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},a=e||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[gd(JSON.stringify(s)),gd(JSON.stringify(h)),""].join(".")}const Ic={};function wx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?n.emulator.push(e):n.prod.push(e);return n}function xx(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let lv=!1;function Ax(n,e){if(typeof window>"u"||typeof document>"u"||!Ep(window.location.host)||Ic[n]===e||Ic[n]||lv)return;Ic[n]=e;function s(C){return`__firebase__banner__${C}`}const a="__firebase__banner",u=wx().prod.length>0;function h(){const C=document.getElementById(a);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function v(C,q){C.setAttribute("width","24"),C.setAttribute("id",q),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{lv=!0,h()},C}function S(C,q){C.setAttribute("id",q),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=xx(a),q=s("text"),X=document.getElementById(q)||document.createElement("span"),O=s("learnmore"),V=document.getElementById(O)||document.createElement("a"),z=s("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Z=C.element;g(Z),S(V,O);const ie=_();v($,z),Z.append($,X,V,ie),document.body.appendChild(Z)}u?(X.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Rx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cx(){const n=yp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ix(){return!Cx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ob(){try{return typeof indexedDB=="object"}catch{return!1}}function lb(){return new Promise((n,e)=>{try{let s=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(a),n(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}function kx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Lx="FirebaseError";class co extends Error{constructor(e,s,a){super(s),this.code=e,this.customData=a,this.name=Lx,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bd.prototype.create)}}class Bd{constructor(e,s,a){this.service=e,this.serviceName=s,this.errors=a}create(e,...s){const a=s[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?jx(u,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new co(o,g,a)}}function jx(n,e){return n.replace(Dx,(s,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Dx=/\{\$([^}]+)}/g;function yd(n,e){if(n===e)return!0;const s=Object.keys(n),a=Object.keys(e);for(const o of s){if(!a.includes(o))return!1;const u=n[o],h=e[o];if(cv(u)&&cv(h)){if(!yd(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!s.includes(o))return!1;return!0}function cv(n){return n!==null&&typeof n=="object"}function wa(n){return n&&n._delegate?n._delegate:n}class xa{constructor(e,s,a){this.name=e,this.instanceFactory=s,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const to="[DEFAULT]";class Ox{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const a=new bx;if(this.instancesDeferred.set(s,a),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ux(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:s});for(const[u,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&h.resolve(o)}return o}onInit(e,s){const a=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const a=this.onInitCallbacks.get(s);if(a)for(const o of a)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Mx(e),options:s}),this.instances.set(e,a),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mx(n){return n===to?void 0:n}function Ux(n){return n.instantiationMode==="EAGER"}class Vx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Ox(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}var Tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Tt||(Tt={}));const Bx={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},qx=Tt.INFO,Px={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Fx=(n,e,...s)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),o=Px[e];if(o)console[o](`[${a}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cb{constructor(e){this.name=e,this._logLevel=qx,this._logHandler=Fx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const zx=(n,e)=>e.some(s=>n instanceof s);let uv,dv;function Hx(){return uv||(uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gx(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,qm=new WeakMap,db=new WeakMap,mm=new WeakMap,vp=new WeakMap;function Xx(n){const e=new Promise((s,a)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",h)},u=()=>{s(Sa(n.result)),o()},h=()=>{a(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",h)});return e.then(s=>{s instanceof IDBCursor&&ub.set(s,n)}).catch(()=>{}),vp.set(e,n),e}function Yx(n){if(qm.has(n))return;const e=new Promise((s,a)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",h),n.removeEventListener("abort",h)},u=()=>{s(),o()},h=()=>{a(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",h),n.addEventListener("abort",h)});qm.set(n,e)}let Pm={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return qm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||db.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Sa(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $x(n){Pm=n(Pm)}function Qx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const a=n.call(pm(this),e,...s);return db.set(a,e.sort?e.sort():[e]),Sa(a)}:Gx().includes(n)?function(...e){return n.apply(pm(this),e),Sa(ub.get(this))}:function(...e){return Sa(n.apply(pm(this),e))}}function Kx(n){return typeof n=="function"?Qx(n):(n instanceof IDBTransaction&&Yx(n),zx(n,Hx())?new Proxy(n,Pm):n)}function Sa(n){if(n instanceof IDBRequest)return Xx(n);if(mm.has(n))return mm.get(n);const e=Kx(n);return e!==n&&(mm.set(n,e),vp.set(e,n)),e}const pm=n=>vp.get(n);function qd(n,e,{blocked:s,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(n,e),g=Sa(h);return a&&h.addEventListener("upgradeneeded",v=>{a(Sa(h.result),v.oldVersion,v.newVersion,Sa(h.transaction),v)}),s&&h.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),g.then(v=>{u&&v.addEventListener("close",()=>u()),o&&v.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}function _m(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",a=>e(a.oldVersion,a)),Sa(s).then(()=>{})}const Wx=["get","getKey","getAll","getAllKeys","count"],Jx=["put","add","delete","clear"],gm=new Map;function fv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const s=e.replace(/FromIndex$/,""),a=e!==s,o=Jx.includes(s);if(!(s in(a?IDBIndex:IDBObjectStore).prototype)||!(o||Wx.includes(s)))return;const u=async function(h,...g){const v=this.transaction(h,o?"readwrite":"readonly");let _=v.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[s](...g),o&&v.done]))[0]};return gm.set(e,u),u}$x(n=>({...n,get:(e,s,a)=>fv(e,s)||n.get(e,s,a),has:(e,s)=>!!fv(e,s)||n.has(e,s)}));class Zx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(eA(s)){const a=s.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(s=>s).join(" ")}}function eA(n){return n.getComponent()?.type==="VERSION"}const Fm="@firebase/app",hv="0.14.7";const Aa=new cb("@firebase/app"),tA="@firebase/app-compat",nA="@firebase/analytics-compat",sA="@firebase/analytics",iA="@firebase/app-check-compat",aA="@firebase/app-check",rA="@firebase/auth",oA="@firebase/auth-compat",lA="@firebase/database",cA="@firebase/data-connect",uA="@firebase/database-compat",dA="@firebase/functions",fA="@firebase/functions-compat",hA="@firebase/installations",mA="@firebase/installations-compat",pA="@firebase/messaging",_A="@firebase/messaging-compat",gA="@firebase/performance",yA="@firebase/performance-compat",EA="@firebase/remote-config",vA="@firebase/remote-config-compat",TA="@firebase/storage",bA="@firebase/storage-compat",SA="@firebase/firestore",NA="@firebase/ai",wA="@firebase/firestore-compat",xA="firebase",AA="12.8.0";const zm="[DEFAULT]",RA={[Fm]:"fire-core",[tA]:"fire-core-compat",[sA]:"fire-analytics",[nA]:"fire-analytics-compat",[aA]:"fire-app-check",[iA]:"fire-app-check-compat",[rA]:"fire-auth",[oA]:"fire-auth-compat",[lA]:"fire-rtdb",[cA]:"fire-data-connect",[uA]:"fire-rtdb-compat",[dA]:"fire-fn",[fA]:"fire-fn-compat",[hA]:"fire-iid",[mA]:"fire-iid-compat",[pA]:"fire-fcm",[_A]:"fire-fcm-compat",[gA]:"fire-perf",[yA]:"fire-perf-compat",[EA]:"fire-rc",[vA]:"fire-rc-compat",[TA]:"fire-gcs",[bA]:"fire-gcs-compat",[SA]:"fire-fst",[wA]:"fire-fst-compat",[NA]:"fire-vertex","fire-js":"fire-js",[xA]:"fire-js-all"};const Ed=new Map,CA=new Map,Hm=new Map;function mv(n,e){try{n.container.addComponent(e)}catch(s){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function gr(n){const e=n.name;if(Hm.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,n);for(const s of Ed.values())mv(s,n);for(const s of CA.values())mv(s,n);return!0}function Pd(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function IA(n){return n==null?!1:n.settings!==void 0}const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new Bd("app","Firebase",kA);class LA{constructor(e,s,a){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const jA=AA;function fb(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const a={name:zm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw hr.create("bad-app-name",{appName:String(o)});if(s||(s=rb()),!s)throw hr.create("no-options");const u=Ed.get(o);if(u){if(yd(s,u.options)&&yd(a,u.config))return u;throw hr.create("duplicate-app",{appName:o})}const h=new Vx(o);for(const v of Hm.values())h.addComponent(v);const g=new LA(s,a,h);return Ed.set(o,g),g}function hb(n=zm){const e=Ed.get(n);if(!e&&n===zm&&rb())return fb();if(!e)throw hr.create("no-app",{appName:n});return e}function qi(n,e,s){let a=RA[n]??n;s&&(a+=`-${s}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(h.join(" "));return}gr(new xa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const DA="firebase-heartbeat-database",OA=1,Uc="firebase-heartbeat-store";let ym=null;function mb(){return ym||(ym=qd(DA,OA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uc)}catch(s){console.warn(s)}}}}).catch(n=>{throw hr.create("idb-open",{originalErrorMessage:n.message})})),ym}async function MA(n){try{const s=(await mb()).transaction(Uc),a=await s.objectStore(Uc).get(pb(n));return await s.done,a}catch(e){if(e instanceof co)Aa.warn(e.message);else{const s=hr.create("idb-get",{originalErrorMessage:e?.message});Aa.warn(s.message)}}}async function pv(n,e){try{const a=(await mb()).transaction(Uc,"readwrite");await a.objectStore(Uc).put(e,pb(n)),await a.done}catch(s){if(s instanceof co)Aa.warn(s.message);else{const a=hr.create("idb-set",{originalErrorMessage:s?.message});Aa.warn(a.message)}}}function pb(n){return`${n.name}!${n.options.appId}`}const UA=1024,VA=30;class BA{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new PA(s),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_v();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>VA){const o=FA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_v(),{heartbeatsToSend:s,unsentEntries:a}=qA(this._heartbeatsCache.heartbeats),o=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Aa.warn(e),""}}}function _v(){return new Date().toISOString().substring(0,10)}function qA(n,e=UA){const s=[];let a=n.slice();for(const o of n){const u=s.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),gv(s)>e){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),gv(s)>e){s.pop();break}a=a.slice(1)}return{heartbeatsToSend:s,unsentEntries:a}}class PA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ob()?lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await MA(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function gv(n){return gd(JSON.stringify({version:2,heartbeats:n})).length}function FA(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let a=1;a<n.length;a++)n[a].date<s&&(s=n[a].date,e=a);return e}function zA(n){gr(new xa("platform-logger",e=>new Zx(e),"PRIVATE")),gr(new xa("heartbeat",e=>new BA(e),"PRIVATE")),qi(Fm,hv,n),qi(Fm,hv,"esm2020"),qi("fire-js","")}zA("");var HA="firebase",GA="12.8.0";qi(HA,GA,"app");var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mr,_b;(function(){var n;function e(M,D){function U(){}U.prototype=D.prototype,M.F=D.prototype,M.prototype=new U,M.prototype.constructor=M,M.D=function(B,A,L){for(var k=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)k[ve-2]=arguments[ve];return D.prototype[A].apply(B,k)}}function s(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,s),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,D,U){U||(U=0);const B=Array(16);if(typeof D=="string")for(var A=0;A<16;++A)B[A]=D.charCodeAt(U++)|D.charCodeAt(U++)<<8|D.charCodeAt(U++)<<16|D.charCodeAt(U++)<<24;else for(A=0;A<16;++A)B[A]=D[U++]|D[U++]<<8|D[U++]<<16|D[U++]<<24;D=M.g[0],U=M.g[1],A=M.g[2];let L=M.g[3],k;k=D+(L^U&(A^L))+B[0]+3614090360&4294967295,D=U+(k<<7&4294967295|k>>>25),k=L+(A^D&(U^A))+B[1]+3905402710&4294967295,L=D+(k<<12&4294967295|k>>>20),k=A+(U^L&(D^U))+B[2]+606105819&4294967295,A=L+(k<<17&4294967295|k>>>15),k=U+(D^A&(L^D))+B[3]+3250441966&4294967295,U=A+(k<<22&4294967295|k>>>10),k=D+(L^U&(A^L))+B[4]+4118548399&4294967295,D=U+(k<<7&4294967295|k>>>25),k=L+(A^D&(U^A))+B[5]+1200080426&4294967295,L=D+(k<<12&4294967295|k>>>20),k=A+(U^L&(D^U))+B[6]+2821735955&4294967295,A=L+(k<<17&4294967295|k>>>15),k=U+(D^A&(L^D))+B[7]+4249261313&4294967295,U=A+(k<<22&4294967295|k>>>10),k=D+(L^U&(A^L))+B[8]+1770035416&4294967295,D=U+(k<<7&4294967295|k>>>25),k=L+(A^D&(U^A))+B[9]+2336552879&4294967295,L=D+(k<<12&4294967295|k>>>20),k=A+(U^L&(D^U))+B[10]+4294925233&4294967295,A=L+(k<<17&4294967295|k>>>15),k=U+(D^A&(L^D))+B[11]+2304563134&4294967295,U=A+(k<<22&4294967295|k>>>10),k=D+(L^U&(A^L))+B[12]+1804603682&4294967295,D=U+(k<<7&4294967295|k>>>25),k=L+(A^D&(U^A))+B[13]+4254626195&4294967295,L=D+(k<<12&4294967295|k>>>20),k=A+(U^L&(D^U))+B[14]+2792965006&4294967295,A=L+(k<<17&4294967295|k>>>15),k=U+(D^A&(L^D))+B[15]+1236535329&4294967295,U=A+(k<<22&4294967295|k>>>10),k=D+(A^L&(U^A))+B[1]+4129170786&4294967295,D=U+(k<<5&4294967295|k>>>27),k=L+(U^A&(D^U))+B[6]+3225465664&4294967295,L=D+(k<<9&4294967295|k>>>23),k=A+(D^U&(L^D))+B[11]+643717713&4294967295,A=L+(k<<14&4294967295|k>>>18),k=U+(L^D&(A^L))+B[0]+3921069994&4294967295,U=A+(k<<20&4294967295|k>>>12),k=D+(A^L&(U^A))+B[5]+3593408605&4294967295,D=U+(k<<5&4294967295|k>>>27),k=L+(U^A&(D^U))+B[10]+38016083&4294967295,L=D+(k<<9&4294967295|k>>>23),k=A+(D^U&(L^D))+B[15]+3634488961&4294967295,A=L+(k<<14&4294967295|k>>>18),k=U+(L^D&(A^L))+B[4]+3889429448&4294967295,U=A+(k<<20&4294967295|k>>>12),k=D+(A^L&(U^A))+B[9]+568446438&4294967295,D=U+(k<<5&4294967295|k>>>27),k=L+(U^A&(D^U))+B[14]+3275163606&4294967295,L=D+(k<<9&4294967295|k>>>23),k=A+(D^U&(L^D))+B[3]+4107603335&4294967295,A=L+(k<<14&4294967295|k>>>18),k=U+(L^D&(A^L))+B[8]+1163531501&4294967295,U=A+(k<<20&4294967295|k>>>12),k=D+(A^L&(U^A))+B[13]+2850285829&4294967295,D=U+(k<<5&4294967295|k>>>27),k=L+(U^A&(D^U))+B[2]+4243563512&4294967295,L=D+(k<<9&4294967295|k>>>23),k=A+(D^U&(L^D))+B[7]+1735328473&4294967295,A=L+(k<<14&4294967295|k>>>18),k=U+(L^D&(A^L))+B[12]+2368359562&4294967295,U=A+(k<<20&4294967295|k>>>12),k=D+(U^A^L)+B[5]+4294588738&4294967295,D=U+(k<<4&4294967295|k>>>28),k=L+(D^U^A)+B[8]+2272392833&4294967295,L=D+(k<<11&4294967295|k>>>21),k=A+(L^D^U)+B[11]+1839030562&4294967295,A=L+(k<<16&4294967295|k>>>16),k=U+(A^L^D)+B[14]+4259657740&4294967295,U=A+(k<<23&4294967295|k>>>9),k=D+(U^A^L)+B[1]+2763975236&4294967295,D=U+(k<<4&4294967295|k>>>28),k=L+(D^U^A)+B[4]+1272893353&4294967295,L=D+(k<<11&4294967295|k>>>21),k=A+(L^D^U)+B[7]+4139469664&4294967295,A=L+(k<<16&4294967295|k>>>16),k=U+(A^L^D)+B[10]+3200236656&4294967295,U=A+(k<<23&4294967295|k>>>9),k=D+(U^A^L)+B[13]+681279174&4294967295,D=U+(k<<4&4294967295|k>>>28),k=L+(D^U^A)+B[0]+3936430074&4294967295,L=D+(k<<11&4294967295|k>>>21),k=A+(L^D^U)+B[3]+3572445317&4294967295,A=L+(k<<16&4294967295|k>>>16),k=U+(A^L^D)+B[6]+76029189&4294967295,U=A+(k<<23&4294967295|k>>>9),k=D+(U^A^L)+B[9]+3654602809&4294967295,D=U+(k<<4&4294967295|k>>>28),k=L+(D^U^A)+B[12]+3873151461&4294967295,L=D+(k<<11&4294967295|k>>>21),k=A+(L^D^U)+B[15]+530742520&4294967295,A=L+(k<<16&4294967295|k>>>16),k=U+(A^L^D)+B[2]+3299628645&4294967295,U=A+(k<<23&4294967295|k>>>9),k=D+(A^(U|~L))+B[0]+4096336452&4294967295,D=U+(k<<6&4294967295|k>>>26),k=L+(U^(D|~A))+B[7]+1126891415&4294967295,L=D+(k<<10&4294967295|k>>>22),k=A+(D^(L|~U))+B[14]+2878612391&4294967295,A=L+(k<<15&4294967295|k>>>17),k=U+(L^(A|~D))+B[5]+4237533241&4294967295,U=A+(k<<21&4294967295|k>>>11),k=D+(A^(U|~L))+B[12]+1700485571&4294967295,D=U+(k<<6&4294967295|k>>>26),k=L+(U^(D|~A))+B[3]+2399980690&4294967295,L=D+(k<<10&4294967295|k>>>22),k=A+(D^(L|~U))+B[10]+4293915773&4294967295,A=L+(k<<15&4294967295|k>>>17),k=U+(L^(A|~D))+B[1]+2240044497&4294967295,U=A+(k<<21&4294967295|k>>>11),k=D+(A^(U|~L))+B[8]+1873313359&4294967295,D=U+(k<<6&4294967295|k>>>26),k=L+(U^(D|~A))+B[15]+4264355552&4294967295,L=D+(k<<10&4294967295|k>>>22),k=A+(D^(L|~U))+B[6]+2734768916&4294967295,A=L+(k<<15&4294967295|k>>>17),k=U+(L^(A|~D))+B[13]+1309151649&4294967295,U=A+(k<<21&4294967295|k>>>11),k=D+(A^(U|~L))+B[4]+4149444226&4294967295,D=U+(k<<6&4294967295|k>>>26),k=L+(U^(D|~A))+B[11]+3174756917&4294967295,L=D+(k<<10&4294967295|k>>>22),k=A+(D^(L|~U))+B[2]+718787259&4294967295,A=L+(k<<15&4294967295|k>>>17),k=U+(L^(A|~D))+B[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+L&4294967295}a.prototype.v=function(M,D){D===void 0&&(D=M.length);const U=D-this.blockSize,B=this.C;let A=this.h,L=0;for(;L<D;){if(A==0)for(;L<=U;)o(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<D;)if(B[A++]=M.charCodeAt(L++),A==this.blockSize){o(this,B),A=0;break}}else for(;L<D;)if(B[A++]=M[L++],A==this.blockSize){o(this,B),A=0;break}}this.h=A,this.o+=D},a.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;D=this.o*8;for(var U=M.length-8;U<M.length;++U)M[U]=D&255,D/=256;for(this.v(M),M=Array(16),D=0,U=0;U<4;++U)for(let B=0;B<32;B+=8)M[D++]=this.g[U]>>>B&255;return M};function u(M,D){var U=g;return Object.prototype.hasOwnProperty.call(U,M)?U[M]:U[M]=D(M)}function h(M,D){this.h=D;const U=[];let B=!0;for(let A=M.length-1;A>=0;A--){const L=M[A]|0;B&&L==D||(U[A]=L,B=!1)}this.g=U}var g={};function v(M){return-128<=M&&M<128?u(M,function(D){return new h([D|0],D<0?-1:0)}):new h([M|0],M<0?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return w;if(M<0)return V(_(-M));const D=[];let U=1;for(let B=0;M>=U;B++)D[B]=M/U|0,U*=4294967296;return new h(D,0)}function S(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return V(S(M.substring(1),D));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=_(Math.pow(D,8));let B=w;for(let L=0;L<M.length;L+=8){var A=Math.min(8,M.length-L);const k=parseInt(M.substring(L,L+A),D);A<8?(A=_(Math.pow(D,A)),B=B.j(A).add(_(k))):(B=B.j(U),B=B.add(_(k)))}return B}var w=v(0),C=v(1),q=v(16777216);n=h.prototype,n.m=function(){if(O(this))return-V(this).m();let M=0,D=1;for(let U=0;U<this.g.length;U++){const B=this.i(U);M+=(B>=0?B:4294967296+B)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(X(this))return"0";if(O(this))return"-"+V(this).toString(M);const D=_(Math.pow(M,6));var U=this;let B="";for(;;){const A=ie(U,D).g;U=z(U,A.j(D));let L=((U.g.length>0?U.g[0]:U.h)>>>0).toString(M);if(U=A,X(U))return L+B;for(;L.length<6;)L="0"+L;B=L+B}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function X(M){if(M.h!=0)return!1;for(let D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function O(M){return M.h==-1}n.l=function(M){return M=z(this,M),O(M)?-1:X(M)?0:1};function V(M){const D=M.g.length,U=[];for(let B=0;B<D;B++)U[B]=~M.g[B];return new h(U,~M.h).add(C)}n.abs=function(){return O(this)?V(this):this},n.add=function(M){const D=Math.max(this.g.length,M.g.length),U=[];let B=0;for(let A=0;A<=D;A++){let L=B+(this.i(A)&65535)+(M.i(A)&65535),k=(L>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);B=k>>>16,L&=65535,k&=65535,U[A]=k<<16|L}return new h(U,U[U.length-1]&-2147483648?-1:0)};function z(M,D){return M.add(V(D))}n.j=function(M){if(X(this)||X(M))return w;if(O(this))return O(M)?V(this).j(V(M)):V(V(this).j(M));if(O(M))return V(this.j(V(M)));if(this.l(q)<0&&M.l(q)<0)return _(this.m()*M.m());const D=this.g.length+M.g.length,U=[];for(var B=0;B<2*D;B++)U[B]=0;for(B=0;B<this.g.length;B++)for(let A=0;A<M.g.length;A++){const L=this.i(B)>>>16,k=this.i(B)&65535,ve=M.i(A)>>>16,Qe=M.i(A)&65535;U[2*B+2*A]+=k*Qe,$(U,2*B+2*A),U[2*B+2*A+1]+=L*Qe,$(U,2*B+2*A+1),U[2*B+2*A+1]+=k*ve,$(U,2*B+2*A+1),U[2*B+2*A+2]+=L*ve,$(U,2*B+2*A+2)}for(M=0;M<D;M++)U[M]=U[2*M+1]<<16|U[2*M];for(M=D;M<2*D;M++)U[M]=0;return new h(U,0)};function $(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function Z(M,D){this.g=M,this.h=D}function ie(M,D){if(X(D))throw Error("division by zero");if(X(M))return new Z(w,w);if(O(M))return D=ie(V(M),D),new Z(V(D.g),V(D.h));if(O(D))return D=ie(M,V(D)),new Z(V(D.g),D.h);if(M.g.length>30){if(O(M)||O(D))throw Error("slowDivide_ only works with positive integers.");for(var U=C,B=D;B.l(M)<=0;)U=_e(U),B=_e(B);var A=Te(U,1),L=Te(B,1);for(B=Te(B,2),U=Te(U,2);!X(B);){var k=L.add(B);k.l(M)<=0&&(A=A.add(U),L=k),B=Te(B,1),U=Te(U,1)}return D=z(M,A.j(D)),new Z(A,D)}for(A=w;M.l(D)>=0;){for(U=Math.max(1,Math.floor(M.m()/D.m())),B=Math.ceil(Math.log(U)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),L=_(U),k=L.j(D);O(k)||k.l(M)>0;)U-=B,L=_(U),k=L.j(D);X(L)&&(L=C),A=A.add(L),M=z(M,k)}return new Z(A,M)}n.B=function(M){return ie(this,M).h},n.and=function(M){const D=Math.max(this.g.length,M.g.length),U=[];for(let B=0;B<D;B++)U[B]=this.i(B)&M.i(B);return new h(U,this.h&M.h)},n.or=function(M){const D=Math.max(this.g.length,M.g.length),U=[];for(let B=0;B<D;B++)U[B]=this.i(B)|M.i(B);return new h(U,this.h|M.h)},n.xor=function(M){const D=Math.max(this.g.length,M.g.length),U=[];for(let B=0;B<D;B++)U[B]=this.i(B)^M.i(B);return new h(U,this.h^M.h)};function _e(M){const D=M.g.length+1,U=[];for(let B=0;B<D;B++)U[B]=M.i(B)<<1|M.i(B-1)>>>31;return new h(U,M.h)}function Te(M,D){const U=D>>5;D%=32;const B=M.g.length-U,A=[];for(let L=0;L<B;L++)A[L]=D>0?M.i(L+U)>>>D|M.i(L+U+1)<<32-D:M.i(L+U);return new h(A,M.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,_b=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=S,mr=h}).apply(typeof yv<"u"?yv:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var gb,Ac,yb,ud,Gm,Eb,vb,Tb;(function(){var n,e=Object.defineProperty;function s(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var E=0;E<d.length;++E){var b=d[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=s(this);function o(d,E){if(E)e:{var b=a;d=d.split(".");for(var I=0;I<d.length-1;I++){var J=d[I];if(!(J in b))break e;b=b[J]}d=d[d.length-1],I=b[d],E=E(I),E!=I&&E!=null&&e(b,d,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(E){var b=[],I;for(I in E)Object.prototype.hasOwnProperty.call(E,I)&&b.push([I,E[I]]);return b}});var u=u||{},h=this||self;function g(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function v(d,E,b){return d.call.apply(d.bind,arguments)}function _(d,E,b){return _=v,_.apply(null,arguments)}function S(d,E){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function w(d,E){function b(){}b.prototype=E.prototype,d.Z=E.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(I,J,ae){for(var Ee=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)Ee[$e-2]=arguments[$e];return E.prototype[J].apply(I,Ee)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function q(d){const E=d.length;if(E>0){const b=Array(E);for(let I=0;I<E;I++)b[I]=d[I];return b}return[]}function X(d,E){for(let I=1;I<arguments.length;I++){const J=arguments[I];var b=typeof J;if(b=b!="object"?b:J?Array.isArray(J)?"array":b:"null",b=="array"||b=="object"&&typeof J.length=="number"){b=d.length||0;const ae=J.length||0;d.length=b+ae;for(let Ee=0;Ee<ae;Ee++)d[b+Ee]=J[Ee]}else d.push(J)}}class O{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function V(d){h.setTimeout(()=>{throw d},0)}function z(){var d=M;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class ${constructor(){this.h=this.g=null}add(E,b){const I=Z.get();I.set(E,b),this.h?this.h.next=I:this.g=I,this.h=I}}var Z=new O(()=>new ie,d=>d.reset());class ie{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Te=!1,M=new $,D=()=>{const d=Promise.resolve(void 0);_e=()=>{d.then(U)}};function U(){for(var d;d=z();){try{d.h.call(d.g)}catch(b){V(b)}var E=Z;E.j(d),E.h<100&&(E.h++,d.next=E.g,E.g=d)}Te=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,E),h.removeEventListener("test",b,E)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function ve(d,E){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,E)}w(ve,A),ve.prototype.init=function(d,E){const b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget,E||(b=="mouseover"?E=d.fromElement:b=="mouseout"&&(E=d.toElement)),this.relatedTarget=E,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ne(d,E,b,I,J){this.listener=d,this.proxy=null,this.src=E,this.type=b,this.capture=!!I,this.ha=J,this.key=++Y,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function it(d,E,b){for(const I in d)E.call(b,d[I],I,d)}function nt(d,E){for(const b in d)E.call(void 0,d[b],b,d)}function H(d){const E={};for(const b in d)E[b]=d[b];return E}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(d,E){let b,I;for(let J=1;J<arguments.length;J++){I=arguments[J];for(b in I)d[b]=I[b];for(let ae=0;ae<ue.length;ae++)b=ue[ae],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function we(d){this.src=d,this.g={},this.h=0}we.prototype.add=function(d,E,b,I,J){const ae=d.toString();d=this.g[ae],d||(d=this.g[ae]=[],this.h++);const Ee=st(d,E,I,J);return Ee>-1?(E=d[Ee],b||(E.fa=!1)):(E=new ne(E,this.src,ae,!!I,J),E.fa=b,d.push(E)),E};function Ye(d,E){const b=E.type;if(b in d.g){var I=d.g[b],J=Array.prototype.indexOf.call(I,E,void 0),ae;(ae=J>=0)&&Array.prototype.splice.call(I,J,1),ae&&(be(E),d.g[b].length==0&&(delete d.g[b],d.h--))}}function st(d,E,b,I){for(let J=0;J<d.length;++J){const ae=d[J];if(!ae.da&&ae.listener==E&&ae.capture==!!b&&ae.ha==I)return J}return-1}var ot="closure_lm_"+(Math.random()*1e6|0),nn={};function Vt(d,E,b,I,J){if(Array.isArray(E)){for(let ae=0;ae<E.length;ae++)Vt(d,E[ae],b,I,J);return null}return b=ja(b),d&&d[Qe]?d.J(E,b,g(I)?!!I.capture:!1,J):Si(d,E,b,!1,I,J)}function Si(d,E,b,I,J,ae){if(!E)throw Error("Invalid event type");const Ee=g(J)?!!J.capture:!!J;let $e=Rt(d);if($e||(d[ot]=$e=new we(d)),b=$e.add(E,b,I,Ee,ae),b.proxy)return b;if(I=ka(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)L||(J=Ee),J===void 0&&(J=!1),d.addEventListener(E.toString(),I,J);else if(d.attachEvent)d.attachEvent(Yn(E.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ka(){function d(b){return E.call(d.src,d.listener,b)}const E=La;return d}function Xn(d,E,b,I,J){if(Array.isArray(E))for(var ae=0;ae<E.length;ae++)Xn(d,E[ae],b,I,J);else I=g(I)?!!I.capture:!!I,b=ja(b),d&&d[Qe]?(d=d.i,ae=String(E).toString(),ae in d.g&&(E=d.g[ae],b=st(E,b,I,J),b>-1&&(be(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete d.g[ae],d.h--)))):d&&(d=Rt(d))&&(E=d.g[E.toString()],d=-1,E&&(d=st(E,b,I,J)),(b=d>-1?E[d]:null)&&Ni(b))}function Ni(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[Qe])Ye(E.i,d);else{var b=d.type,I=d.proxy;E.removeEventListener?E.removeEventListener(b,I,d.capture):E.detachEvent?E.detachEvent(Yn(b),I):E.addListener&&E.removeListener&&E.removeListener(I),(b=Rt(E))?(Ye(b,d),b.h==0&&(b.src=null,E[ot]=null)):be(d)}}}function Yn(d){return d in nn?nn[d]:nn[d]="on"+d}function La(d,E){if(d.da)d=!0;else{E=new ve(E,this);const b=d.listener,I=d.ha||d.src;d.fa&&Ni(d),d=b.call(I,E)}return d}function Rt(d){return d=d[ot],d instanceof we?d:null}var $i="__closure_events_fn_"+(Math.random()*1e9>>>0);function ja(d){return typeof d=="function"?d:(d[$i]||(d[$i]=function(E){return d.handleEvent(E)}),d[$i])}function Qt(){B.call(this),this.i=new we(this),this.M=this,this.G=null}w(Qt,B),Qt.prototype[Qe]=!0,Qt.prototype.removeEventListener=function(d,E,b,I){Xn(this,d,E,b,I)};function sn(d,E){var b,I=d.G;if(I)for(b=[];I;I=I.G)b.push(I);if(d=d.M,I=E.type||E,typeof E=="string")E=new A(E,d);else if(E instanceof A)E.target=E.target||d;else{var J=E;E=new A(I,d),Se(E,J)}J=!0;let ae,Ee;if(b)for(Ee=b.length-1;Ee>=0;Ee--)ae=E.g=b[Ee],J=As(ae,I,!0,E)&&J;if(ae=E.g=d,J=As(ae,I,!0,E)&&J,J=As(ae,I,!1,E)&&J,b)for(Ee=0;Ee<b.length;Ee++)ae=E.g=b[Ee],J=As(ae,I,!1,E)&&J}Qt.prototype.N=function(){if(Qt.Z.N.call(this),this.i){var d=this.i;for(const E in d.g){const b=d.g[E];for(let I=0;I<b.length;I++)be(b[I]);delete d.g[E],d.h--}}this.G=null},Qt.prototype.J=function(d,E,b,I){return this.i.add(String(d),E,!1,b,I)},Qt.prototype.K=function(d,E,b,I){return this.i.add(String(d),E,!0,b,I)};function As(d,E,b,I){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();let J=!0;for(let ae=0;ae<E.length;++ae){const Ee=E[ae];if(Ee&&!Ee.da&&Ee.capture==b){const $e=Ee.listener,Kt=Ee.ha||Ee.src;Ee.fa&&Ye(d.i,Ee),J=$e.call(Kt,I)!==!1&&J}}return J&&!I.defaultPrevented}function Vl(d,E){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:h.setTimeout(d,E||0)}function Nr(d){d.g=Vl(()=>{d.g=null,d.i&&(d.i=!1,Nr(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class jn extends B{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(d){B.call(this),this.h=d,this.g={}}w(ui,B);var di=[];function ss(d){it(d.g,function(E,b){this.g.hasOwnProperty(b)&&Ni(E)},d),d.g={}}ui.prototype.N=function(){ui.Z.N.call(this),ss(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=h.JSON.stringify,go=h.JSON.parse,wr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function yo(){}function Eo(){}var Rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){A.call(this,"d")}w(Me,A);function is(){A.call(this,"c")}w(is,A);var Gt={},xr=null;function Cs(){return xr=xr||new Qt}Gt.Ia="serverreachability";function vo(d){A.call(this,Gt.Ia,d)}w(vo,A);function Tn(d){const E=Cs();sn(E,new vo(E))}Gt.STAT_EVENT="statevent";function wi(d,E){A.call(this,Gt.STAT_EVENT,d),this.stat=E}w(wi,A);function Jt(d){const E=Cs();sn(E,new wi(E,d))}Gt.Ja="timingevent";function Is(d,E){A.call(this,Gt.Ja,d),this.size=E}w(Is,A);function ge(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},E)}function ks(){this.g=!0}ks.prototype.ua=function(){this.g=!1};function Bl(d,E,b,I,J,ae){d.info(function(){if(d.g)if(ae){var Ee="",$e=ae.split("&");for(let Et=0;Et<$e.length;Et++){var Kt=$e[Et].split("=");if(Kt.length>1){const Bt=Kt[0];Kt=Kt[1];const K=Bt.split("_");Ee=K.length>=2&&K[1]=="type"?Ee+(Bt+"="+Kt+"&"):Ee+(Bt+"=redacted&")}}}else Ee=null;else Ee=ae;return"XMLHTTP REQ ("+I+") [attempt "+J+"]: "+E+`
`+b+`
`+Ee})}function Dn(d,E,b,I,J,ae,Ee){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+J+"]: "+E+`
`+b+`
`+ae+" "+Ee})}function ms(d,E,b,I){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ar(d,b)+(I?" "+I:"")})}function hi(d,E){d.info(function(){return"TIMEOUT: "+E})}ks.prototype.info=function(){};function Ar(d,E){if(!d.g)return E;if(!E)return null;try{const ae=JSON.parse(E);if(ae){for(d=0;d<ae.length;d++)if(Array.isArray(ae[d])){var b=ae[d];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var J=I[0];if(J!="noop"&&J!="stop"&&J!="close")for(let Ee=1;Ee<I.length;Ee++)I[Ee]=""}}}}return fi(ae)}catch{return E}}var as={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Da={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fn;function xi(){}w(xi,yo),xi.prototype.g=function(){return new XMLHttpRequest},fn=new xi;function $n(d){return encodeURIComponent(String(d))}function Rr(d){var E=1;d=d.split(":");const b=[];for(;E>0&&d.length;)b.push(d.shift()),E--;return d.length&&b.push(d.join(":")),b}function ps(d,E,b,I){this.j=d,this.i=E,this.l=b,this.S=I||1,this.V=new ui(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var dt={},on={};function Gs(d,E,b){d.M=1,d.A=Ys(kt(E)),d.u=b,d.R=!0,Ai(d,null)}function Ai(d,E){d.F=Date.now(),rs(d),d.B=kt(d.A);var b=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),gs(b.i,"t",I),d.C=0,b=d.j.L,d.h=new Qn,d.g=Ro(d.j,b?E:null,!d.u),d.P>0&&(d.O=new jn(_(d.Y,d,d.g),d.P)),E=d.V,b=d.g,I=d.ba;var J="readystatechange";Array.isArray(J)||(J&&(di[0]=J.toString()),J=di);for(let ae=0;ae<J.length;ae++){const Ee=Vt(b,J[ae],I||E.handleEvent,!1,E.h||E);if(!Ee)break;E.g[Ee.key]=Ee}E=d.J?H(d.J):{},d.u?(d.v||(d.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,E)):(d.v="GET",d.g.ea(d.B,d.v,null,E)),Tn(),Bl(d.i,d.v,d.B,d.l,d.S,d.u)}ps.prototype.ba=function(d){d=d.target;const E=this.O;E&&Ie(d)==3?E.j():this.Y(d)},ps.prototype.Y=function(d){try{if(d==this.g)e:{const $e=Ie(this.g),Kt=this.g.ya(),Et=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||Ue(this.g)))){this.K||$e!=4||Kt==7||(Kt==8||Et<=0?Tn(3):Tn(2)),ln(this);var E=this.g.ca();this.X=E;var b=ql(this);if(this.o=E==200,Dn(this.i,this.v,this.B,this.l,this.S,$e,E),this.o){if(this.U&&!this.L){t:{if(this.g){var I,J=this.g;if((I=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var ae=I;break t}}ae=null}if(d=ae)ms(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ls(this,d);else{this.o=!1,this.m=3,Jt(12),Mn(this),On(this);break e}}if(this.R){d=!0;let Bt;for(;!this.K&&this.C<b.length;)if(Bt=Cr(this,b),Bt==on){$e==4&&(this.m=4,Jt(14),d=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==dt){this.m=4,Jt(15),ms(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else ms(this.i,this.l,Bt,null),Ls(this,Bt);if(Oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||b.length!=0||this.h.h||(this.m=1,Jt(16),d=!1),this.o=this.o&&d,!d)ms(this.i,this.l,b,"[Invalid Chunked Response]"),Mn(this),On(this);else if(b.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Mr(Ee),Ee.P=!0,Jt(11))}}else ms(this.i,this.l,b,null),Ls(this,b);$e==4&&Mn(this),this.o&&!this.K&&($e==4?Ur(this.j,this):(this.o=!1,rs(this)))}else ze(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Mn(this),On(this)}}}catch{}};function ql(d){if(!Oa(d))return d.g.la();const E=Ue(d.g);if(E==="")return"";let b="";const I=E.length,J=Ie(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Mn(d),On(d),"";d.h.i=new h.TextDecoder}for(let ae=0;ae<I;ae++)d.h.h=!0,b+=d.h.i.decode(E[ae],{stream:!(J&&ae==I-1)});return E.length=0,d.h.g+=b,d.C=0,d.h.g}function Oa(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Cr(d,E){var b=d.C,I=E.indexOf(`
`,b);return I==-1?on:(b=Number(E.substring(b,I)),isNaN(b)?dt:(I+=1,I+b>E.length?on:(E=E.slice(I,I+b),d.C=I+b,E)))}ps.prototype.cancel=function(){this.K=!0,Mn(this)};function rs(d){d.T=Date.now()+d.H,Ma(d,d.H)}function Ma(d,E){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ge(_(d.aa,d),E)}function ln(d){d.D&&(h.clearTimeout(d.D),d.D=null)}ps.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(hi(this.i,this.B),this.M!=2&&(Tn(),Jt(17)),Mn(this),this.m=2,On(this)):Ma(this,this.T-d)};function On(d){d.j.I==0||d.K||Ur(d.j,d)}function Mn(d){ln(d);var E=d.O;E&&typeof E.dispose=="function"&&E.dispose(),d.O=null,ss(d.V),d.g&&(E=d.g,d.g=null,E.abort(),E.dispose())}function Ls(d,E){try{var b=d.j;if(b.I!=0&&(b.g==d||js(b.h,d))){if(!d.L&&js(b.h,d)&&b.I==3){try{var I=b.Ba.g.parse(E)}catch{I=null}if(Array.isArray(I)&&I.length==3){var J=I;if(J[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Pa(b),Li(b);else break e;na(b),Jt(18)}}else b.xa=J[1],0<b.xa-b.K&&J[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ge(_(b.Va,b),6e3));os(b.h)<=1&&b.ta&&(b.ta=void 0)}else Zs(b,11)}else if((d.L||b.g==d)&&Pa(b),!k(E))for(J=b.Ba.g.parse(E),E=0;E<J.length;E++){let Et=J[E];const Bt=Et[0];if(!(Bt<=b.K))if(b.K=Bt,Et=Et[1],b.I==2)if(Et[0]=="c"){b.M=Et[1],b.ba=Et[2];const K=Et[3];K!=null&&(b.ka=K,b.j.info("VER="+b.ka));const fe=Et[4];fe!=null&&(b.za=fe,b.j.info("SVER="+b.za));const Ne=Et[5];Ne!=null&&typeof Ne=="number"&&Ne>0&&(I=1.5*Ne,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const De=d.g;if(De){const Pe=De.g?De.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pe){var ae=I.h;ae.g||Pe.indexOf("spdy")==-1&&Pe.indexOf("quic")==-1&&Pe.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Xs(ae,ae.h),ae.h=null))}if(I.G){const ft=De.g?De.g.getResponseHeader("X-HTTP-Session-Id"):null;ft&&(I.wa=ft,yt(I.J,I.G,ft))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var Ee=d;if(I.na=Ao(I,I.L?I.ba:null,I.W),Ee.L){Qi(I.h,Ee);var $e=Ee,Kt=I.O;Kt&&($e.H=Kt),$e.D&&(ln($e),rs($e)),I.g=Ee}else So(I);b.i.length>0&&Js(b)}else Et[0]!="stop"&&Et[0]!="close"||Zs(b,7);else b.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?Zs(b,7):qa(b):Et[0]!="noop"&&b.l&&b.l.qa(Et),b.A=0)}}Tn(4)}catch{}}var Zt=class{constructor(d,E){this.g=d,this.map=E}};function mi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ua(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function os(d){return d.h?1:d.g?d.g.size:0}function js(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function Xs(d,E){d.g?d.g.add(E):d.h=E}function Qi(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}mi.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Va(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const b of d.g.values())E=E.concat(b.G);return E}return q(d.i)}var Ir=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ki(d,E){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const I=d[b].indexOf("=");let J,ae=null;I>=0?(J=d[b].substring(0,I),ae=d[b].substring(I+1)):J=d[b],E(J,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function ls(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;d instanceof ls?(this.l=d.l,Je(this,d.j),this.o=d.o,this.g=d.g,Kn(this,d.u),this.h=d.h,Ri(this,Ba(d.i)),this.m=d.m):d&&(E=String(d).match(Ir))?(this.l=!1,Je(this,E[1]||"",!0),this.o=_s(E[2]||""),this.g=_s(E[3]||"",!0),Kn(this,E[4]),this.h=_s(E[5]||"",!0),Ri(this,E[6]||"",!0),this.m=_s(E[7]||"")):(this.l=!1,this.i=new Ks(null,this.l))}ls.prototype.toString=function(){const d=[];var E=this.j;E&&d.push(Wi(E,$s,!0),":");var b=this.g;return(b||E=="file")&&(d.push("//"),(E=this.o)&&d.push(Wi(E,$s,!0),"@"),d.push($n(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Wi(b,b.charAt(0)=="/"?Lr:kr,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Wi(b,jr)),d.join("")},ls.prototype.resolve=function(d){const E=kt(this);let b=!!d.j;b?Je(E,d.j):b=!!d.o,b?E.o=d.o:b=!!d.g,b?E.g=d.g:b=d.u!=null;var I=d.h;if(b)Kn(E,d.u);else if(b=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var J=E.h.lastIndexOf("/");J!=-1&&(I=E.h.slice(0,J+1)+I)}if(J=I,J==".."||J==".")I="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){I=J.lastIndexOf("/",0)==0,J=J.split("/");const ae=[];for(let Ee=0;Ee<J.length;){const $e=J[Ee++];$e=="."?I&&Ee==J.length&&ae.push(""):$e==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),I&&Ee==J.length&&ae.push("")):(ae.push($e),I=!0)}I=ae.join("/")}else I=J}return b?E.h=I:b=d.i.toString()!=="",b?Ri(E,Ba(d.i)):b=!!d.m,b&&(E.m=d.m),E};function kt(d){return new ls(d)}function Je(d,E,b){d.j=b?_s(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Kn(d,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);d.u=E}else d.u=null}function Ri(d,E,b){E instanceof Ks?(d.i=E,cs(d.i,d.l)):(b||(E=Wi(E,Qs)),d.i=new Ks(E,d.l))}function yt(d,E,b){d.i.set(E,b)}function Ys(d){return yt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function _s(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Wi(d,E,b){return typeof d=="string"?(d=encodeURI(d).replace(E,Wn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $s=/[#\/\?@]/g,kr=/[#\?:]/g,Lr=/[#\?]/g,Qs=/[#\?@]/g,jr=/#/g;function Ks(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function wn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ki(d.i,function(E,b){d.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}n=Ks.prototype,n.add=function(d,E){wn(this),this.i=null,d=xn(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(E),this.h+=1,this};function To(d,E){wn(d),E=xn(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function Ci(d,E){return wn(d),E=xn(d,E),d.g.has(E)}n.forEach=function(d,E){wn(this),this.g.forEach(function(b,I){b.forEach(function(J){d.call(E,J,I,this)},this)},this)};function Ii(d,E){wn(d);let b=[];if(typeof E=="string")Ci(d,E)&&(b=b.concat(d.g.get(xn(d,E))));else for(d=Array.from(d.g.values()),E=0;E<d.length;E++)b=b.concat(d[E]);return b}n.set=function(d,E){return wn(this),this.i=null,d=xn(this,d),Ci(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},n.get=function(d,E){return d?(d=Ii(this,d),d.length>0?String(d[0]):E):E};function gs(d,E,b){To(d,E),b.length>0&&(d.i=null,d.g.set(xn(d,E),q(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(let I=0;I<E.length;I++){var b=E[I];const J=$n(b);b=Ii(this,b);for(let ae=0;ae<b.length;ae++){let Ee=J;b[ae]!==""&&(Ee+="="+$n(b[ae])),d.push(Ee)}}return this.i=d.join("&")};function Ba(d){const E=new Ks;return E.i=d.i,d.g&&(E.g=new Map(d.g),E.h=d.h),E}function xn(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function cs(d,E){E&&!d.j&&(wn(d),d.i=null,d.g.forEach(function(b,I){const J=I.toLowerCase();I!=J&&(To(this,I),gs(this,J,b))},d)),d.j=E}function Un(d,E){const b=new ks;if(h.Image){const I=new Image;I.onload=S(xe,b,"TestLoadImage: loaded",!0,E,I),I.onerror=S(xe,b,"TestLoadImage: error",!1,E,I),I.onabort=S(xe,b,"TestLoadImage: abort",!1,E,I),I.ontimeout=S(xe,b,"TestLoadImage: timeout",!1,E,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else E(!1)}function Dr(d,E){const b=new ks,I=new AbortController,J=setTimeout(()=>{I.abort(),xe(b,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:I.signal}).then(ae=>{clearTimeout(J),ae.ok?xe(b,"TestPingServer: ok",!0,E):xe(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),xe(b,"TestPingServer: error",!1,E)})}function xe(d,E,b,I,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),I(b)}catch{}}function Ws(){this.g=new wr}function us(d){this.i=d.Sb||null,this.h=d.ab||!1}w(us,yo),us.prototype.g=function(){return new ki(this.i,this.h)};function ki(d,E){Qt.call(this),this.H=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(ki,Qt),n=ki.prototype,n.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=E,this.readyState=1,hn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(E.body=d),(this.H||h).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,hn(this)),this.g&&(this.readyState=3,hn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ji(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ji(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?ys(this):hn(this),this.readyState==3&&Ji(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,ys(this))},n.Na=function(d){this.g&&(this.response=d,ys(this))},n.ga=function(){this.g&&ys(this)};function ys(d){d.readyState=4,d.l=null,d.j=null,d.B=null,hn(d)}n.setRequestHeader=function(d,E){this.A.append(d,E)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=E.next();return d.join(`\r
`)};function hn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function An(d){let E="";return it(d,function(b,I){E+=I,E+=":",E+=b,E+=`\r
`}),E}function pi(d,E,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=An(b),typeof d=="string"?b!=null&&$n(b):yt(d,E,b))}function m(d){Qt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(m,Qt);var y=/^https?$/i,N=["POST","PUT"];n=m.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,E,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fn.g(),this.g.onreadystatechange=C(_(this.Ca,this));try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(ae){R(this,ae);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var J in I)b.set(J,I[J]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ae of I.keys())b.set(ae,I.get(ae));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(ae=>ae.toLowerCase()=="content-type"),J=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(N,E,void 0)>=0)||I||J||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ee]of b)this.g.setRequestHeader(ae,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ae){R(this,ae)}};function R(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.o=5,F(d),le(d)}function F(d){d.A||(d.A=!0,sn(d,"complete"),sn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,sn(this,"complete"),sn(this,"abort"),le(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),le(this,!0)),m.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?W(this):this.Xa())},n.Xa=function(){W(this)};function W(d){if(d.h&&typeof u<"u"){if(d.v&&Ie(d)==4)setTimeout(d.Ca.bind(d),0);else if(sn(d,"readystatechange"),Ie(d)==4){d.h=!1;try{const ae=d.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var I;if(I=ae===0){let Ee=String(d.D).match(Ir)[1]||null;!Ee&&h.self&&h.self.location&&(Ee=h.self.location.protocol.slice(0,-1)),I=!y.test(Ee?Ee.toLowerCase():"")}b=I}if(b)sn(d,"complete"),sn(d,"success");else{d.o=6;try{var J=Ie(d)>2?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.ca()+"]",F(d)}}finally{le(d)}}}}function le(d,E){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,E||sn(d,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ie(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Ie(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),go(E)}};function Ue(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ze(d){const E={};d=(d.g&&Ie(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(k(d[I]))continue;var b=Rr(d[I]);const J=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const ae=E[J]||[];E[J]=ae,ae.push(b)}nt(E,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bt(d,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||E}function en(d){this.za=0,this.i=[],this.j=new ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bt("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bt("baseRetryDelayMs",5e3,d),this.Za=bt("retryDelaySeedMs",1e4,d),this.Ta=bt("forwardChannelMaxRetries",2,d),this.va=bt("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new mi(d&&d.concurrentRequestLimit),this.Ba=new Ws,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=en.prototype,n.ka=8,n.I=1,n.connect=function(d,E,b,I){Jt(0),this.W=d,this.H=E||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=Ao(this,null,this.W),Js(this)};function qa(d){if(Zi(d),d.I==3){var E=d.V++,b=kt(d.J);if(yt(b,"SID",d.M),yt(b,"RID",E),yt(b,"TYPE","terminate"),ta(d,b),E=new ps(d,d.j,E),E.M=2,E.A=Ys(kt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=E.A,b=!0),b||(E.g=Ro(E.j,null),E.g.ea(E.A)),E.F=Date.now(),rs(E)}xo(d)}function Li(d){d.g&&(Mr(d),d.g.cancel(),d.g=null)}function Zi(d){Li(d),d.v&&(h.clearTimeout(d.v),d.v=null),Pa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Js(d){if(!Ua(d.h)&&!d.m){d.m=!0;var E=d.Ea;_e||D(),Te||(_e(),Te=!0),M.add(E,d),d.D=0}}function ea(d,E){return os(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=E.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ge(_(d.Ea,d,E),wo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const J=new ps(this,this.j,d);let ae=this.o;if(this.U&&(ae?(ae=H(ae),Se(ae,this.U)):ae=this.U),this.u!==null||this.R||(J.J=ae,ae=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(E+=I,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=bo(this,J,E),b=kt(this.J),yt(b,"RID",d),yt(b,"CVER",22),this.G&&yt(b,"X-HTTP-Session-Id",this.G),ta(this,b),ae&&(this.R?E="headers="+$n(An(ae))+"&"+E:this.u&&pi(b,this.u,ae)),Xs(this.h,J),this.Ra&&yt(b,"TYPE","init"),this.S?(yt(b,"$req",E),yt(b,"SID","null"),J.U=!0,Gs(J,b,null)):Gs(J,b,E),this.I=2}}else this.I==3&&(d?Or(this,d):this.i.length==0||Ua(this.h)||Or(this))};function Or(d,E){var b;E?b=E.l:b=d.V++;const I=kt(d.J);yt(I,"SID",d.M),yt(I,"RID",b),yt(I,"AID",d.K),ta(d,I),d.u&&d.o&&pi(I,d.u,d.o),b=new ps(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),E&&(d.i=E.G.concat(d.i)),E=bo(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Xs(d.h,b),Gs(b,I,E)}function ta(d,E){d.H&&it(d.H,function(b,I){yt(E,I,b)}),d.l&&it({},function(b,I){yt(E,I,b)})}function bo(d,E,b){b=Math.min(d.i.length,b);const I=d.l?_(d.l.Ka,d.l,d):null;e:{var J=d.i;let $e=-1;for(;;){const Kt=["count="+b];$e==-1?b>0?($e=J[0].g,Kt.push("ofs="+$e)):$e=0:Kt.push("ofs="+$e);let Et=!0;for(let Bt=0;Bt<b;Bt++){var ae=J[Bt].g;const K=J[Bt].map;if(ae-=$e,ae<0)$e=Math.max(0,J[Bt].g-100),Et=!1;else try{ae="req"+ae+"_"||"";try{var Ee=K instanceof Map?K:Object.entries(K);for(const[fe,Ne]of Ee){let De=Ne;g(Ne)&&(De=fi(Ne)),Kt.push(ae+fe+"="+encodeURIComponent(De))}}catch(fe){throw Kt.push(ae+"type="+encodeURIComponent("_badmap")),fe}}catch{I&&I(K)}}if(Et){Ee=Kt.join("&");break e}}Ee=void 0}return d=d.i.splice(0,b),E.G=d,Ee}function So(d){if(!d.g&&!d.v){d.Y=1;var E=d.Da;_e||D(),Te||(_e(),Te=!0),M.add(E,d),d.A=0}}function na(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ge(_(d.Da,d),wo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,No(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ge(_(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Li(this),No(this))};function Mr(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function No(d){d.g=new ps(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var E=kt(d.na);yt(E,"RID","rpc"),yt(E,"SID",d.M),yt(E,"AID",d.K),yt(E,"CI",d.F?"0":"1"),!d.F&&d.ia&&yt(E,"TO",d.ia),yt(E,"TYPE","xmlhttp"),ta(d,E),d.u&&d.o&&pi(E,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Ys(kt(E)),b.u=null,b.R=!0,Ai(b,d)}n.Va=function(){this.C!=null&&(this.C=null,Li(this),na(this),Jt(19))};function Pa(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ur(d,E){var b=null;if(d.g==E){Pa(d),Mr(d),d.g=null;var I=2}else if(js(d.h,E))b=E.G,Qi(d.h,E),I=1;else return;if(d.I!=0){if(E.o)if(I==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var J=d.D;I=Cs(),sn(I,new Is(I,b)),Js(d)}else So(d);else if(J=E.m,J==3||J==0&&E.X>0||!(I==1&&ea(d,E)||I==2&&na(d)))switch(b&&b.length>0&&(E=d.h,E.i=E.i.concat(b)),J){case 1:Zs(d,5);break;case 4:Zs(d,10);break;case 3:Zs(d,6);break;default:Zs(d,2)}}}function wo(d,E){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*E}function Zs(d,E){if(d.j.info("Error code "+E),E==2){var b=_(d.bb,d),I=d.Ua;const J=!I;I=new ls(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Je(I,"https"),Ys(I),J?Un(I.toString(),b):Dr(I.toString(),b)}else Jt(2);d.I=0,d.l&&d.l.pa(E),xo(d),Zi(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function xo(d){if(d.I=0,d.ja=[],d.l){const E=Va(d.h);(E.length!=0||d.i.length!=0)&&(X(d.ja,E),X(d.ja,d.i),d.h.i.length=0,q(d.i),d.i.length=0),d.l.oa()}}function Ao(d,E,b){var I=b instanceof ls?kt(b):new ls(b);if(I.g!="")E&&(I.g=E+"."+I.g),Kn(I,I.u);else{var J=h.location;I=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;const ae=new ls(null);I&&Je(ae,I),E&&(ae.g=E),J&&Kn(ae,J),b&&(ae.h=b),I=ae}return b=d.G,E=d.wa,b&&E&&yt(I,b,E),yt(I,"VER",d.ka),ta(d,I),I}function Ro(d,E,b){if(E&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Aa&&!d.ma?new m(new us({ab:b})):new m(d.ma),E.Fa(d.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Co(){}n=Co.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ji(){}ji.prototype.g=function(d,E){return new Rn(d,E)};function Rn(d,E){Qt.call(this),this.g=new en(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(d?d["X-WebChannel-Client-Profile"]=E.sa:d={"X-WebChannel-Client-Profile":E.sa}),this.g.U=d,(d=E&&E.Qb)&&!k(d)&&(this.g.u=d),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!k(E)&&(this.g.G=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new _i(this)}w(Rn,Qt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){qa(this.g)},Rn.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=fi(d),d=b);E.i.push(new Zt(E.Ya++,d)),E.I==3&&Js(E)},Rn.prototype.N=function(){this.g.l=null,delete this.j,qa(this.g),delete this.g,Rn.Z.N.call(this)};function Io(d){Me.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const b in E){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}w(Io,Me);function ko(){is.call(this),this.status=1}w(ko,is);function _i(d){this.g=d}w(_i,Co),_i.prototype.ra=function(){sn(this.g,"a")},_i.prototype.qa=function(d){sn(this.g,new Io(d))},_i.prototype.pa=function(d){sn(this.g,new ko)},_i.prototype.oa=function(){sn(this.g,"b")},ji.prototype.createWebChannel=ji.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,Tb=function(){return new ji},vb=function(){return Cs()},Eb=Gt,Gm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,ud=as,Da.COMPLETE="complete",yb=Da,Eo.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",Qt.prototype.listen=Qt.prototype.J,Ac=Eo,m.prototype.listenOnce=m.prototype.K,m.prototype.getLastError=m.prototype.Ha,m.prototype.getLastErrorCode=m.prototype.ya,m.prototype.getStatus=m.prototype.ca,m.prototype.getResponseJson=m.prototype.La,m.prototype.getResponseText=m.prototype.la,m.prototype.send=m.prototype.ea,m.prototype.setWithCredentials=m.prototype.Fa,gb=m}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});class es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let Ll="12.8.0";function XA(n){Ll=n}const io=new cb("@firebase/firestore");function ul(){return io.logLevel}function Re(n,...e){if(io.logLevel<=Tt.DEBUG){const s=e.map(Tp);io.debug(`Firestore (${Ll}): ${n}`,...s)}}function Ra(n,...e){if(io.logLevel<=Tt.ERROR){const s=e.map(Tp);io.error(`Firestore (${Ll}): ${n}`,...s)}}function bl(n,...e){if(io.logLevel<=Tt.WARN){const s=e.map(Tp);io.warn(`Firestore (${Ll}): ${n}`,...s)}}function Tp(n){if(typeof n=="string")return n;try{return(function(s){return JSON.stringify(s)})(n)}catch{return n}}function Xe(n,e,s){let a="Unexpected state";typeof e=="string"?a=e:s=e,bb(n,a,s)}function bb(n,e,s){let a=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{a+=" CONTEXT: "+JSON.stringify(s)}catch{a+=" CONTEXT: "+s}throw Ra(a),new Error(a)}function It(n,e,s,a){let o="Unexpected state";typeof s=="string"?o=s:a=s,n||bb(e,o,a)}function tt(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends co{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}class Sb{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(es.UNAUTHENTICATED)))}shutdown(){}}class $A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class QA{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){It(this.o===void 0,42304);let a=this.i;const o=v=>this.i!==a?(a=this.i,s(v)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const v=u;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},g=v=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}}),0),h()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((a=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(It(typeof a.accessToken=="string",31837,{l:a}),new Sb(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new es(e)}}class KA{constructor(e,s,a){this.P=e,this.T=s,this.I=a,this.type="FirstParty",this.user=es.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class WA{constructor(e,s,a){this.P=e,this.T=s,this.I=a}getToken(){return Promise.resolve(new KA(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ev{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JA{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,IA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){It(this.o===void 0,3512);const a=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?s(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ev(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(It(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Ev(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ZA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let a=0;a<n;a++)s[a]=Math.floor(256*Math.random());return s}class bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=ZA(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<s&&(a+=e.charAt(o[u]%62))}return a}}function pt(n,e){return n<e?-1:n>e?1:0}function Xm(n,e){const s=Math.min(n.length,e.length);for(let a=0;a<s;a++){const o=n.charAt(a),u=e.charAt(a);if(o!==u)return Em(o)===Em(u)?pt(o,u):Em(o)?1:-1}return pt(n.length,e.length)}const eR=55296,tR=57343;function Em(n){const e=n.charCodeAt(0);return e>=eR&&e<=tR}function Sl(n,e,s){return n.length===e.length&&n.every(((a,o)=>s(a,e[o])))}const vv="__name__";class Bi{constructor(e,s,a){s===void 0?s=0:s>e.length&&Xe(637,{offset:s,range:e.length}),a===void 0?a=e.length-s:a>e.length-s&&Xe(1746,{length:a,range:e.length-s}),this.segments=e,this.offset=s,this.len=a}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((a=>{s.push(a)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,a=this.limit();s<a;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const a=Math.min(e.length,s.length);for(let o=0;o<a;o++){const u=Bi.compareSegments(e.get(o),s.get(o));if(u!==0)return u}return pt(e.length,s.length)}static compareSegments(e,s){const a=Bi.isNumericId(e),o=Bi.isNumericId(s);return a&&!o?-1:!a&&o?1:a&&o?Bi.extractNumericId(e).compare(Bi.extractNumericId(s)):Xm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class Ht extends Bi{construct(e,s,a){return new Ht(e,s,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ce(me.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);s.push(...a.split("/").filter((o=>o.length>0)))}return new Ht(s)}static emptyPath(){return new Ht([])}}const nR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Bi{construct(e,s,a){return new Hn(e,s,a)}static isValidIdentifier(e){return nR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vv}static keyField(){return new Hn([vv])}static fromServerFormat(e){const s=[];let a="",o=0;const u=()=>{if(a.length===0)throw new Ce(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ce(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ce(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(u(),o++)}if(u(),h)throw new Ce(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(s)}static emptyPath(){return new Hn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ht.fromString(e))}static fromName(e){return new Be(Ht.fromString(e).popFirst(5))}static empty(){return new Be(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ht.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ht(e.slice()))}}function Nb(n,e,s){if(!s)throw new Ce(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sR(n,e,s,a){if(e===!0&&a===!0)throw new Ce(me.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function Tv(n){if(!Be.isDocumentKey(n))throw new Ce(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bv(n){if(Be.isDocumentKey(n))throw new Ce(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Fd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe(12329,{type:typeof n})}function Nl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Fd(n);throw new Ce(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}function vn(n,e){const s={typeString:n};return e&&(s.value=e),s}function Yc(n,e){if(!wb(n))throw new Ce(me.INVALID_ARGUMENT,"JSON must be an object");let s;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){s=`JSON missing required field: '${a}'`;break}const h=n[a];if(o&&typeof h!==o){s=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){s=`Expected '${a}' field to equal '${u.value}'`;break}}if(s)throw new Ce(me.INVALID_ARGUMENT,s);return!0}const Sv=-62135596800,Nv=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),a=Math.floor((e-1e3*s)*Nv);return new $t(s,a)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Ce(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Ce(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Sv)throw new Ce(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nv}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:vn("string",$t._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new $t(0,0))}static max(){return new We(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vc=-1;function iR(n,e){const s=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,o=We.fromTimestamp(a===1e9?new $t(s+1,0):new $t(s,a));return new yr(o,Be.empty(),e)}function aR(n){return new yr(n.readTime,n.key,Vc)}class yr{constructor(e,s,a){this.readTime=e,this.documentKey=s,this.largestBatchId=a}static min(){return new yr(We.min(),Be.empty(),Vc)}static max(){return new yr(We.max(),Be.empty(),Vc)}}function rR(n,e){let s=n.readTime.compareTo(e.readTime);return s!==0?s:(s=Be.comparator(n.documentKey,e.documentKey),s!==0?s:pt(n.largestBatchId,e.largestBatchId))}const oR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jl(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==oR)throw n;Re("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new pe(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(a,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof pe?s:pe.resolve(s)}catch(s){return pe.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):pe.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):pe.reject(s)}static resolve(e){return new pe(((s,a)=>{s(e)}))}static reject(e){return new pe(((s,a)=>{a(e)}))}static waitFor(e){return new pe(((s,a)=>{let o=0,u=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++u,h&&u===o&&s()}),(v=>a(v)))})),h=!0,u===o&&s()}))}static or(e){let s=pe.resolve(!1);for(const a of e)s=s.next((o=>o?pe.resolve(o):a()));return s}static forEach(e,s){const a=[];return e.forEach(((o,u)=>{a.push(s.call(this,o,u))})),this.waitFor(a)}static mapArray(e,s){return new pe(((a,o)=>{const u=e.length,h=new Array(u);let g=0;for(let v=0;v<u;v++){const _=v;s(e[_]).next((S=>{h[_]=S,++g,g===u&&a(h)}),(S=>o(S)))}}))}static doWhile(e,s){return new pe(((a,o)=>{const u=()=>{e()===!0?s().next((()=>{u()}),o):a()};u()}))}}function cR(n){const e=n.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Dl(n){return n.name==="IndexedDbTransactionError"}class zd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>s.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zd.ce=-1;const Sp=-1;function Hd(n){return n==null}function vd(n){return n===0&&1/n==-1/0}function uR(n){return typeof n=="number"&&Number.isInteger(n)&&!vd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const xb="";function dR(n){let e="";for(let s=0;s<n.length;s++)e.length>0&&(e=wv(e)),e=fR(n.get(s),e);return wv(e)}function fR(n,e){let s=e;const a=n.length;for(let o=0;o<a;o++){const u=n.charAt(o);switch(u){case"\0":s+="";break;case xb:s+="";break;default:s+=u}}return s}function wv(n){return n+xb+""}function xv(n){let e=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e++;return e}function uo(n,e){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e(s,n[s])}function Ab(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tn{constructor(e,s){this.comparator=e,this.root=s||zn.EMPTY}insert(e,s){return new tn(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return s.value;a<0?s=s.left:a>0&&(s=s.right)}return null}indexOf(e){let s=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return s+a.left.size;o<0?a=a.left:(s+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,a)=>(e(s,a),!1)))}toString(){const e=[];return this.inorderTraversal(((s,a)=>(e.push(`${s}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,s,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=s?a(e.key,s):1,s&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,s,a,o,u){this.key=e,this.value=s,this.color=a??zn.RED,this.left=o??zn.EMPTY,this.right=u??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,a,o,u){return new zn(e??this.key,s??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,s,a),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let a,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return zn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,s,a,o,u){return this}insert(e,s,a){return new zn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,a)=>(e(s),!1)))}forEachInRange(e,s){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let a;for(a=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Av(this.data.getIterator())}getIteratorFrom(e){return new Av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((a=>{s=s.add(a)})),s}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const s=this.data.getIterator(),a=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Nn(this.comparator);return s.data=e,s}}class Av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vi{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new vi([])}unionWith(e){let s=new Nn(Hn.comparator);for(const a of this.fields)s=s.add(a);for(const a of e)s=s.add(a);return new vi(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((s,a)=>s.isEqual(a)))}}class Rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Rb("Invalid base64 string: "+u):u}})(e);return new Gn(s)}static fromUint8Array(e){const s=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Gn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const a=new Uint8Array(s.length);for(let o=0;o<s.length;o++)a[o]=s.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const hR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(It(!!n,39018),typeof n=="string"){let e=0;const s=hR.exec(n);if(It(!!s,46558,{timestamp:n}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:dn(n.seconds),nanos:dn(n.nanos)}}function dn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vr(n){return typeof n=="string"?Gn.fromBase64String(n):Gn.fromUint8Array(n)}const Cb="server_timestamp",Ib="__type__",kb="__previous_value__",Lb="__local_write_time__";function Np(n){return(n?.mapValue?.fields||{})[Ib]?.stringValue===Cb}function Gd(n){const e=n.mapValue.fields[kb];return Np(e)?Gd(e):e}function Bc(n){const e=Er(n.mapValue.fields[Lb].timestampValue);return new $t(e.seconds,e.nanos)}class mR{constructor(e,s,a,o,u,h,g,v,_,S,w){this.databaseId=e,this.appId=s,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=_,this.isUsingEmulator=S,this.apiKey=w}}const Td="(default)";class qc{constructor(e,s){this.projectId=e,this.database=s||Td}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===Td}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}function pR(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ce(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(n.options.projectId,e)}const jb="__type__",_R="__max__",id={mapValue:{}},Db="__vector__",bd="value";function Tr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Np(n)?4:yR(n)?9007199254740991:gR(n)?10:11:Xe(28295,{value:n})}function Gi(n,e){if(n===e)return!0;const s=Tr(n);if(s!==Tr(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bc(n).isEqual(Bc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Er(o.timestampValue),g=Er(u.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,u){return vr(o.bytesValue).isEqual(vr(u.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,u){return dn(o.geoPointValue.latitude)===dn(u.geoPointValue.latitude)&&dn(o.geoPointValue.longitude)===dn(u.geoPointValue.longitude)})(n,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return dn(o.integerValue)===dn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=dn(o.doubleValue),g=dn(u.doubleValue);return h===g?vd(h)===vd(g):isNaN(h)&&isNaN(g)}return!1})(n,e);case 9:return Sl(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},g=u.mapValue.fields||{};if(xv(h)!==xv(g))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(g[v]===void 0||!Gi(h[v],g[v])))return!1;return!0})(n,e);default:return Xe(52216,{left:n})}}function Pc(n,e){return(n.values||[]).find((s=>Gi(s,e)))!==void 0}function wl(n,e){if(n===e)return 0;const s=Tr(n),a=Tr(e);if(s!==a)return pt(s,a);switch(s){case 0:case 9007199254740991:return 0;case 1:return pt(n.booleanValue,e.booleanValue);case 2:return(function(u,h){const g=dn(u.integerValue||u.doubleValue),v=dn(h.integerValue||h.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(n,e);case 3:return Rv(n.timestampValue,e.timestampValue);case 4:return Rv(Bc(n),Bc(e));case 5:return Xm(n.stringValue,e.stringValue);case 6:return(function(u,h){const g=vr(u),v=vr(h);return g.compareTo(v)})(n.bytesValue,e.bytesValue);case 7:return(function(u,h){const g=u.split("/"),v=h.split("/");for(let _=0;_<g.length&&_<v.length;_++){const S=pt(g[_],v[_]);if(S!==0)return S}return pt(g.length,v.length)})(n.referenceValue,e.referenceValue);case 8:return(function(u,h){const g=pt(dn(u.latitude),dn(h.latitude));return g!==0?g:pt(dn(u.longitude),dn(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Cv(n.arrayValue,e.arrayValue);case 10:return(function(u,h){const g=u.fields||{},v=h.fields||{},_=g[bd]?.arrayValue,S=v[bd]?.arrayValue,w=pt(_?.values?.length||0,S?.values?.length||0);return w!==0?w:Cv(_,S)})(n.mapValue,e.mapValue);case 11:return(function(u,h){if(u===id.mapValue&&h===id.mapValue)return 0;if(u===id.mapValue)return 1;if(h===id.mapValue)return-1;const g=u.fields||{},v=Object.keys(g),_=h.fields||{},S=Object.keys(_);v.sort(),S.sort();for(let w=0;w<v.length&&w<S.length;++w){const C=Xm(v[w],S[w]);if(C!==0)return C;const q=wl(g[v[w]],_[S[w]]);if(q!==0)return q}return pt(v.length,S.length)})(n.mapValue,e.mapValue);default:throw Xe(23264,{he:s})}}function Rv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pt(n,e);const s=Er(n),a=Er(e),o=pt(s.seconds,a.seconds);return o!==0?o:pt(s.nanos,a.nanos)}function Cv(n,e){const s=n.values||[],a=e.values||[];for(let o=0;o<s.length&&o<a.length;++o){const u=wl(s[o],a[o]);if(u)return u}return pt(s.length,a.length)}function xl(n){return Ym(n)}function Ym(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(s){const a=Er(s);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(s){return vr(s).toBase64()})(n.bytesValue):"referenceValue"in n?(function(s){return Be.fromName(s).toString()})(n.referenceValue):"geoPointValue"in n?(function(s){return`geo(${s.latitude},${s.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(s){let a="[",o=!0;for(const u of s.values||[])o?o=!1:a+=",",a+=Ym(u);return a+"]"})(n.arrayValue):"mapValue"in n?(function(s){const a=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${Ym(s.fields[h])}`;return o+"}"})(n.mapValue):Xe(61005,{value:n})}function dd(n){switch(Tr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(n);return e?16+dd(e):16;case 5:return 2*n.stringValue.length;case 6:return vr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+dd(u)),0)})(n.arrayValue);case 10:case 11:return(function(a){let o=0;return uo(a.fields,((u,h)=>{o+=u.length+dd(h)})),o})(n.mapValue);default:throw Xe(13486,{value:n})}}function Iv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $m(n){return!!n&&"integerValue"in n}function wp(n){return!!n&&"arrayValue"in n}function kv(n){return!!n&&"nullValue"in n}function Lv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fd(n){return!!n&&"mapValue"in n}function gR(n){return(n?.mapValue?.fields||{})[jb]?.stringValue===Db}function kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return uo(n.mapValue.fields,((s,a)=>e.mapValue.fields[s]=kc(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=kc(n.arrayValue.values[s]);return e}return{...n}}function yR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_R}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let a=0;a<e.length-1;++a)if(s=(s.mapValue.fields||{})[e.get(a)],!fd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(s)}setAll(e){let s=Hn.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!s.isImmediateParentOf(g)){const v=this.getFieldsMap(s);this.applyChanges(v,a,o),a={},o=[],s=g.popLast()}h?a[g.lastSegment()]=kc(h):o.push(g.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,a,o)}delete(e){const s=this.field(e.popLast());fd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=s.mapValue.fields[e.get(a)];fd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(a)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,a){uo(s,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new li(kc(this.value))}}function Ob(n){const e=[];return uo(n.fields,((s,a)=>{const o=new Hn([s]);if(fd(a)){const u=Ob(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new vi(e)}class ts{constructor(e,s,a,o,u,h,g){this.key=e,this.documentType=s,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new ts(e,0,We.min(),We.min(),We.min(),li.empty(),0)}static newFoundDocument(e,s,a,o){return new ts(e,1,s,We.min(),a,o,0)}static newNoDocument(e,s){return new ts(e,2,s,We.min(),We.min(),li.empty(),0)}static newUnknownDocument(e,s){return new ts(e,3,s,We.min(),We.min(),li.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sd{constructor(e,s){this.position=e,this.inclusive=s}}function jv(n,e,s){let a=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(u.field.isKeyField()?a=Be.comparator(Be.fromName(h.referenceValue),s.key):a=wl(h,s.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Dv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!Gi(n.position[s],e.position[s]))return!1;return!0}class Nd{constructor(e,s="asc"){this.field=e,this.dir=s}}function ER(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Mb{}class En extends Mb{constructor(e,s,a){super(),this.field=e,this.op=s,this.value=a}static create(e,s,a){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,a):new TR(e,s,a):s==="array-contains"?new NR(e,a):s==="in"?new wR(e,a):s==="not-in"?new xR(e,a):s==="array-contains-any"?new AR(e,a):new En(e,s,a)}static createKeyFieldInFilter(e,s,a){return s==="in"?new bR(e,a):new SR(e,a)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(wl(s,this.value)):s!==null&&Tr(this.value)===Tr(s)&&this.matchesComparison(wl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends Mb{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new bi(e,s)}matches(e){return Ub(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ub(n){return n.op==="and"}function Vb(n){return vR(n)&&Ub(n)}function vR(n){for(const e of n.filters)if(e instanceof bi)return!1;return!0}function Qm(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+xl(n.value);if(Vb(n))return n.filters.map((e=>Qm(e))).join(",");{const e=n.filters.map((s=>Qm(s))).join(",");return`${n.op}(${e})`}}function Bb(n,e){return n instanceof En?(function(a,o){return o instanceof En&&a.op===o.op&&a.field.isEqual(o.field)&&Gi(a.value,o.value)})(n,e):n instanceof bi?(function(a,o){return o instanceof bi&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,g)=>u&&Bb(h,o.filters[g])),!0):!1})(n,e):void Xe(19439)}function qb(n){return n instanceof En?(function(s){return`${s.field.canonicalString()} ${s.op} ${xl(s.value)}`})(n):n instanceof bi?(function(s){return s.op.toString()+" {"+s.getFilters().map(qb).join(" ,")+"}"})(n):"Filter"}class TR extends En{constructor(e,s,a){super(e,s,a),this.key=Be.fromName(a.referenceValue)}matches(e){const s=Be.comparator(e.key,this.key);return this.matchesComparison(s)}}class bR extends En{constructor(e,s){super(e,"in",s),this.keys=Pb("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class SR extends En{constructor(e,s){super(e,"not-in",s),this.keys=Pb("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function Pb(n,e){return(e.arrayValue?.values||[]).map((s=>Be.fromName(s.referenceValue)))}class NR extends En{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return wp(s)&&Pc(s.arrayValue,this.value)}}class wR extends En{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Pc(this.value.arrayValue,s)}}class xR extends En{constructor(e,s){super(e,"not-in",s)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!Pc(this.value.arrayValue,s)}}class AR extends En{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!wp(s)||!s.arrayValue.values)&&s.arrayValue.values.some((a=>Pc(this.value.arrayValue,a)))}}class RR{constructor(e,s=null,a=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=s,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.Te=null}}function Ov(n,e=null,s=[],a=[],o=null,u=null,h=null){return new RR(n,e,s,a,o,u,h)}function xp(n){const e=tt(n);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((a=>Qm(a))).join(","),s+="|ob:",s+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Hd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((a=>xl(a))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((a=>xl(a))).join(",")),e.Te=s}return e.Te}function Ap(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!ER(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if(!Bb(n.filters[s],e.filters[s]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dv(n.startAt,e.startAt)&&Dv(n.endAt,e.endAt)}function Km(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class $c{constructor(e,s=null,a=[],o=[],u=null,h="F",g=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=v,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function CR(n,e,s,a,o,u,h,g){return new $c(n,e,s,a,o,u,h,g)}function Fb(n){return new $c(n)}function Mv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IR(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zb(n){return n.collectionGroup!==null}function Lc(n){const e=tt(n);if(e.Ie===null){e.Ie=[];const s=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),s.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Nn(Hn.comparator);return h.filters.forEach((v=>{v.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Nd(u,a))})),s.has(Hn.keyField().canonicalString())||e.Ie.push(new Nd(Hn.keyField(),a))}return e.Ie}function Pi(n){const e=tt(n);return e.Ee||(e.Ee=kR(e,Lc(n))),e.Ee}function kR(n,e){if(n.limitType==="F")return Ov(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Nd(o.field,u)}));const s=n.endAt?new Sd(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new Sd(n.startAt.position,n.startAt.inclusive):null;return Ov(n.path,n.collectionGroup,e,n.filters,n.limit,s,a)}}function Wm(n,e){const s=n.filters.concat([e]);return new $c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),s,n.limit,n.limitType,n.startAt,n.endAt)}function Jm(n,e,s){return new $c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,s,n.startAt,n.endAt)}function Xd(n,e){return Ap(Pi(n),Pi(e))&&n.limitType===e.limitType}function Hb(n){return`${xp(Pi(n))}|lt:${n.limitType}`}function dl(n){return`Query(target=${(function(s){let a=s.path.canonicalString();return s.collectionGroup!==null&&(a+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(a+=`, filters: [${s.filters.map((o=>qb(o))).join(", ")}]`),Hd(s.limit)||(a+=", limit: "+s.limit),s.orderBy.length>0&&(a+=`, orderBy: [${s.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),s.startAt&&(a+=", startAt: ",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map((o=>xl(o))).join(",")),s.endAt&&(a+=", endAt: ",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map((o=>xl(o))).join(",")),`Target(${a})`})(Pi(n))}; limitType=${n.limitType})`}function Yd(n,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Be.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(n,e)&&(function(a,o){for(const u of Lc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(n,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(n,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,v){const _=jv(h,g,v);return h.inclusive?_<=0:_<0})(a.startAt,Lc(a),o)||a.endAt&&!(function(h,g,v){const _=jv(h,g,v);return h.inclusive?_>=0:_>0})(a.endAt,Lc(a),o))})(n,e)}function LR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gb(n){return(e,s)=>{let a=!1;for(const o of Lc(n)){const u=jR(o,e,s);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function jR(n,e,s){const a=n.field.isKeyField()?Be.comparator(e.key,s.key):(function(u,h,g){const v=h.data.field(u),_=g.data.field(u);return v!==null&&_!==null?wl(v,_):Xe(42886)})(n.field,e,s);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Xe(19790,{direction:n.dir})}}class fo{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),a=this.inner[s];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,s){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[s]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,((s,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return Ab(this.inner)}size(){return this.innerSize}}const DR=new tn(Be.comparator);function Ca(){return DR}const Xb=new tn(Be.comparator);function Rc(...n){let e=Xb;for(const s of n)e=e.insert(s.key,s);return e}function Yb(n){let e=Xb;return n.forEach(((s,a)=>e=e.insert(s,a.overlayedDocument))),e}function no(){return jc()}function $b(){return jc()}function jc(){return new fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const OR=new tn(Be.comparator),MR=new Nn(Be.comparator);function _t(...n){let e=MR;for(const s of n)e=e.add(s);return e}const UR=new Nn(pt);function VR(){return UR}function Rp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vd(e)?"-0":e}}function Qb(n){return{integerValue:""+n}}function BR(n,e){return uR(e)?Qb(e):Rp(n,e)}class $d{constructor(){this._=void 0}}function qR(n,e,s){return n instanceof wd?(function(o,u){const h={fields:{[Ib]:{stringValue:Cb},[Lb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Np(u)&&(u=Gd(u)),u&&(h.fields[kb]=u),{mapValue:h}})(s,e):n instanceof Fc?Wb(n,e):n instanceof zc?Jb(n,e):(function(o,u){const h=Kb(o,u),g=Uv(h)+Uv(o.Ae);return $m(h)&&$m(o.Ae)?Qb(g):Rp(o.serializer,g)})(n,e)}function PR(n,e,s){return n instanceof Fc?Wb(n,e):n instanceof zc?Jb(n,e):s}function Kb(n,e){return n instanceof xd?(function(a){return $m(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class wd extends $d{}class Fc extends $d{constructor(e){super(),this.elements=e}}function Wb(n,e){const s=Zb(e);for(const a of n.elements)s.some((o=>Gi(o,a)))||s.push(a);return{arrayValue:{values:s}}}class zc extends $d{constructor(e){super(),this.elements=e}}function Jb(n,e){let s=Zb(e);for(const a of n.elements)s=s.filter((o=>!Gi(o,a)));return{arrayValue:{values:s}}}class xd extends $d{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function Uv(n){return dn(n.integerValue||n.doubleValue)}function Zb(n){return wp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function FR(n,e){return n.field.isEqual(e.field)&&(function(a,o){return a instanceof Fc&&o instanceof Fc||a instanceof zc&&o instanceof zc?Sl(a.elements,o.elements,Gi):a instanceof xd&&o instanceof xd?Gi(a.Ae,o.Ae):a instanceof wd&&o instanceof wd})(n.transform,e.transform)}class zR{constructor(e,s){this.version=e,this.transformResults=s}}class Fi{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qd{}function e0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cp(n.key,Fi.none()):new Qc(n.key,n.data,Fi.none());{const s=n.data,a=li.empty();let o=new Nn(Hn.comparator);for(let u of e.fields)if(!o.has(u)){let h=s.field(u);h===null&&u.length>1&&(u=u.popLast(),h=s.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new ho(n.key,a,new vi(o.toArray()),Fi.none())}}function HR(n,e,s){n instanceof Qc?(function(o,u,h){const g=o.value.clone(),v=Bv(o.fieldTransforms,u,h.transformResults);g.setAll(v),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(n,e,s):n instanceof ho?(function(o,u,h){if(!hd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const g=Bv(o.fieldTransforms,u,h.transformResults),v=u.data;v.setAll(t0(o)),v.setAll(g),u.convertToFoundDocument(h.version,v).setHasCommittedMutations()})(n,e,s):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,s)}function Dc(n,e,s,a){return n instanceof Qc?(function(u,h,g,v){if(!hd(u.precondition,h))return g;const _=u.value.clone(),S=qv(u.fieldTransforms,v,h);return _.setAll(S),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(n,e,s,a):n instanceof ho?(function(u,h,g,v){if(!hd(u.precondition,h))return g;const _=qv(u.fieldTransforms,v,h),S=h.data;return S.setAll(t0(u)),S.setAll(_),h.convertToFoundDocument(h.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(n,e,s,a):(function(u,h,g){return hd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(n,e,s)}function GR(n,e){let s=null;for(const a of n.fieldTransforms){const o=e.data.field(a.field),u=Kb(a.transform,o||null);u!=null&&(s===null&&(s=li.empty()),s.set(a.field,u))}return s||null}function Vv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Sl(a,o,((u,h)=>FR(u,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Qc extends Qd{constructor(e,s,a,o=[]){super(),this.key=e,this.value=s,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ho extends Qd{constructor(e,s,a,o,u=[]){super(),this.key=e,this.data=s,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function t0(n){const e=new Map;return n.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const a=n.data.field(s);e.set(s,a)}})),e}function Bv(n,e,s){const a=new Map;It(n.length===s.length,32656,{Ve:s.length,de:n.length});for(let o=0;o<s.length;o++){const u=n[o],h=u.transform,g=e.data.field(u.field);a.set(u.field,PR(h,g,s[o]))}return a}function qv(n,e,s){const a=new Map;for(const o of n){const u=o.transform,h=s.data.field(o.field);a.set(o.field,qR(u,h,e))}return a}class Cp extends Qd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XR extends Qd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YR{constructor(e,s,a,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,s){const a=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&HR(u,e,a[o])}}applyToLocalView(e,s){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(s=Dc(a,e,s,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(s=Dc(a,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const a=$b();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=s.has(o.key)?null:g;const v=e0(h,g);v!==null&&a.set(o.key,v),h.isValidDocument()||h.convertToNoDocument(We.min())})),a}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),_t())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((s,a)=>Vv(s,a)))&&Sl(this.baseMutations,e.baseMutations,((s,a)=>Vv(s,a)))}}class Ip{constructor(e,s,a,o){this.batch=e,this.commitVersion=s,this.mutationResults=a,this.docVersions=o}static from(e,s,a){It(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return OR})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new Ip(e,s,a,o)}}class $R{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class QR{constructor(e,s){this.count=e,this.unchangedNames=s}}var yn,vt;function KR(n){switch(n){case me.OK:return Xe(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Xe(15467,{code:n})}}function n0(n){if(n===void 0)return Ra("GRPC error has no .code"),me.UNKNOWN;switch(n){case yn.OK:return me.OK;case yn.CANCELLED:return me.CANCELLED;case yn.UNKNOWN:return me.UNKNOWN;case yn.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case yn.INTERNAL:return me.INTERNAL;case yn.UNAVAILABLE:return me.UNAVAILABLE;case yn.UNAUTHENTICATED:return me.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case yn.NOT_FOUND:return me.NOT_FOUND;case yn.ALREADY_EXISTS:return me.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return me.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case yn.ABORTED:return me.ABORTED;case yn.OUT_OF_RANGE:return me.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return me.UNIMPLEMENTED;case yn.DATA_LOSS:return me.DATA_LOSS;default:return Xe(39323,{code:n})}}(vt=yn||(yn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";function WR(){return new TextEncoder}const JR=new mr([4294967295,4294967295],0);function Pv(n){const e=WR().encode(n),s=new _b;return s.update(e),new Uint8Array(s.digest())}function Fv(n){const e=new DataView(n.buffer),s=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mr([s,a],0),new mr([o,u],0)]}class kp{constructor(e,s,a){if(this.bitmap=e,this.padding=s,this.hashCount=a,s<0||s>=8)throw new Cc(`Invalid padding: ${s}`);if(a<0)throw new Cc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${a}`);if(e.length===0&&s!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=mr.fromNumber(this.ge)}ye(e,s,a){let o=e.add(s.multiply(mr.fromNumber(a)));return o.compare(JR)===1&&(o=new mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Pv(e),[a,o]=Fv(s);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,s,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new kp(u,o,s);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const s=Pv(e),[a,o]=Fv(s);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.be(h)}}be(e){const s=Math.floor(e/8),a=e%8;this.bitmap[s]|=1<<a}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kd{constructor(e,s,a,o,u){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,s,a){const o=new Map;return o.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,s,a)),new Kd(We.min(),o,new tn(pt),Ca(),_t())}}class Kc{constructor(e,s,a,o,u){this.resumeToken=e,this.current=s,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,s,a){return new Kc(a,s,_t(),_t(),_t())}}class md{constructor(e,s,a,o){this.Se=e,this.removedTargetIds=s,this.key=a,this.De=o}}class s0{constructor(e,s){this.targetId=e,this.Ce=s}}class i0{constructor(e,s,a=Gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=a,this.cause=o}}class zv{constructor(){this.ve=0,this.Fe=Hv(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_t(),s=_t(),a=_t();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:a=a.add(o);break;default:Xe(38017,{changeType:u})}})),new Kc(this.Me,this.xe,e,s,a)}Ke(){this.Oe=!1,this.Fe=Hv()}qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ZR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ca(),this.He=ad(),this.Je=ad(),this.Ze=new tn(pt)}Xe(e){for(const s of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const a=this.nt(s);switch(e.state){case 0:this.rt(s)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),a.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((a,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,a=e.Ce.count,o=this.ot(s);if(o){const u=o.target;if(Km(u))if(a===0){const h=new Be(u.path);this.et(s,h,ts.newNoDocument(h,We.min()))}else It(a===1,20013,{expectedCount:a});else{const h=this._t(s);if(h!==a){const g=this.ut(e),v=g?this.ct(g,e,h):1;if(v!==0){this.it(s);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,_)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=s;let h,g;try{h=vr(a).toUint8Array()}catch(v){if(v instanceof Rb)return bl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new kp(h,o,u)}catch(v){return bl(v instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.ge===0?null:g}ct(e,s,a){return s.Ce.count===a-this.Pt(e,s.targetId)?0:2}Pt(e,s){const a=this.Ge.getRemoteKeysForTarget(s);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(s,u,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((u,h)=>{const g=this.ot(h);if(g){if(u.current&&Km(g.target)){const v=new Be(g.target.path);this.It(v).has(h)||this.Et(h,v)||this.et(h,v,ts.newNoDocument(v,e))}u.Be&&(s.set(h,u.ke()),u.Ke())}}));let a=_t();this.Je.forEach(((u,h)=>{let g=!0;h.forEachWhile((v=>{const _=this.ot(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Kd(e,s,this.Ze,this.je,a);return this.je=Ca(),this.He=ad(),this.Je=ad(),this.Ze=new tn(pt),o}Ye(e,s){if(!this.rt(e))return;const a=this.Et(e,s.key)?2:0;this.nt(e).qe(s.key,a),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(e)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(e))}et(e,s,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.qe(s,1):o.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(e)),this.Je=this.Je.insert(s,this.Rt(s).add(e)),a&&(this.je=this.je.insert(s,a))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let s=this.ze.get(e);return s||(s=new zv,this.ze.set(e,s)),s}Rt(e){let s=this.Je.get(e);return s||(s=new Nn(pt),this.Je=this.Je.insert(e,s)),s}It(e){let s=this.He.get(e);return s||(s=new Nn(pt),this.He=this.He.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Re("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zv),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function ad(){return new tn(Be.comparator)}function Hv(){return new tn(Be.comparator)}const eC={asc:"ASCENDING",desc:"DESCENDING"},tC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nC={and:"AND",or:"OR"};class sC{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Zm(n,e){return n.useProto3Json||Hd(e)?e:{value:e}}function Ad(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iC(n,e){return Ad(n,e.toTimestamp())}function zi(n){return It(!!n,49232),We.fromTimestamp((function(s){const a=Er(s);return new $t(a.seconds,a.nanos)})(n))}function Lp(n,e){return ep(n,e).canonicalString()}function ep(n,e){const s=(function(o){return new Ht(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?s:s.child(e)}function r0(n){const e=Ht.fromString(n);return It(d0(e),10190,{key:e.toString()}),e}function tp(n,e){return Lp(n.databaseId,e.path)}function vm(n,e){const s=r0(e);if(s.get(1)!==n.databaseId.projectId)throw new Ce(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new Ce(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new Be(l0(s))}function o0(n,e){return Lp(n.databaseId,e)}function aC(n){const e=r0(n);return e.length===4?Ht.emptyPath():l0(e)}function np(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l0(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gv(n,e,s){return{name:tp(n,e),fields:s.value.mapValue.fields}}function rC(n,e){let s;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Xe(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,S){return _.useProto3Json?(It(S===void 0||typeof S=="string",58123),Gn.fromBase64String(S||"")):(It(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Gn.fromUint8Array(S||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(_){const S=_.code===void 0?me.UNKNOWN:n0(_.code);return new Ce(S,_.message||"")})(h);s=new i0(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=vm(n,a.document.name),u=zi(a.document.updateTime),h=a.document.createTime?zi(a.document.createTime):We.min(),g=new li({mapValue:{fields:a.document.fields}}),v=ts.newFoundDocument(o,u,h,g),_=a.targetIds||[],S=a.removedTargetIds||[];s=new md(_,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=vm(n,a.document),u=a.readTime?zi(a.readTime):We.min(),h=ts.newNoDocument(o,u),g=a.removedTargetIds||[];s=new md([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=vm(n,a.document),u=a.removedTargetIds||[];s=new md([],u,o,null)}else{if(!("filter"in e))return Xe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new QR(o,u),g=a.targetId;s=new s0(g,h)}}return s}function oC(n,e){let s;if(e instanceof Qc)s={update:Gv(n,e.key,e.value)};else if(e instanceof Cp)s={delete:tp(n,e.key)};else if(e instanceof ho)s={update:Gv(n,e.key,e.data),updateMask:_C(e.fieldMask)};else{if(!(e instanceof XR))return Xe(16599,{dt:e.type});s={verify:tp(n,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const g=h.transform;if(g instanceof wd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Fc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof zc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof xd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Xe(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:iC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Xe(27497)})(n,e.precondition)),s}function lC(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map((s=>(function(o,u){let h=o.updateTime?zi(o.updateTime):zi(u);return h.isEqual(We.min())&&(h=zi(u)),new zR(h,o.transformResults||[])})(s,e)))):[]}function cC(n,e){return{documents:[o0(n,e.path)]}}function uC(n,e){const s={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=o0(n,o);const u=(function(_){if(_.length!==0)return u0(bi.create(_,"and"))})(e.filters);u&&(s.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((S=>(function(C){return{field:fl(C.field),direction:hC(C.dir)}})(S)))})(e.orderBy);h&&(s.structuredQuery.orderBy=h);const g=Zm(n,e.limit);return g!==null&&(s.structuredQuery.limit=g),e.startAt&&(s.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:s,parent:o}}function dC(n){let e=aC(n.parent);const s=n.structuredQuery,a=s.from?s.from.length:0;let o=null;if(a>0){It(a===1,65062);const S=s.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];s.where&&(u=(function(w){const C=c0(w);return C instanceof bi&&Vb(C)?C.getFilters():[C]})(s.where));let h=[];s.orderBy&&(h=(function(w){return w.map((C=>(function(X){return new Nd(hl(X.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(C)))})(s.orderBy));let g=null;s.limit&&(g=(function(w){let C;return C=typeof w=="object"?w.value:w,Hd(C)?null:C})(s.limit));let v=null;s.startAt&&(v=(function(w){const C=!!w.before,q=w.values||[];return new Sd(q,C)})(s.startAt));let _=null;return s.endAt&&(_=(function(w){const C=!w.before,q=w.values||[];return new Sd(q,C)})(s.endAt)),CR(e,o,h,u,g,"F",v,_)}function fC(n,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function c0(n){return n.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const a=hl(s.unaryFilter.field);return En.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=hl(s.unaryFilter.field);return En.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=hl(s.unaryFilter.field);return En.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=hl(s.unaryFilter.field);return En.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}})(n):n.fieldFilter!==void 0?(function(s){return En.create(hl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(s){return bi.create(s.compositeFilter.filters.map((a=>c0(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}})(s.compositeFilter.op))})(n):Xe(30097,{filter:n})}function hC(n){return eC[n]}function mC(n){return tC[n]}function pC(n){return nC[n]}function fl(n){return{fieldPath:n.canonicalString()}}function hl(n){return Hn.fromServerFormat(n.fieldPath)}function u0(n){return n instanceof En?(function(s){if(s.op==="=="){if(Lv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NAN"}};if(kv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Lv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NOT_NAN"}};if(kv(s.value))return{unaryFilter:{field:fl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(s.field),op:mC(s.op),value:s.value}}})(n):n instanceof bi?(function(s){const a=s.getFilters().map((o=>u0(o)));return a.length===1?a[0]:{compositeFilter:{op:pC(s.op),filters:a}}})(n):Xe(54877,{filter:n})}function _C(n){const e=[];return n.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function d0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function f0(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class fr{constructor(e,s,a,o,u=We.min(),h=We.min(),g=Gn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gC{constructor(e){this.yt=e}}function yC(n){const e=dC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jm(e,e.limit,"L"):e}class EC{constructor(){this.Sn=new vC}addToCollectionParentIndex(e,s){return this.Sn.add(s),pe.resolve()}getCollectionParents(e,s){return pe.resolve(this.Sn.getEntries(s))}addFieldIndex(e,s){return pe.resolve()}deleteFieldIndex(e,s){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,s){return pe.resolve()}getDocumentsMatchingTarget(e,s){return pe.resolve(null)}getIndexType(e,s){return pe.resolve(0)}getFieldIndexes(e,s){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,s){return pe.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,s){return pe.resolve(yr.min())}updateCollectionGroup(e,s,a){return pe.resolve()}updateIndexEntries(e,s){return pe.resolve()}}class vC{constructor(){this.index={}}add(e){const s=e.lastSegment(),a=e.popLast(),o=this.index[s]||new Nn(Ht.comparator),u=!o.has(a);return this.index[s]=o.add(a),u}has(e){const s=e.lastSegment(),a=e.popLast(),o=this.index[s];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Nn(Ht.comparator)).toArray()}}const Xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h0=41943040;class xs{static withCacheSize(e){return new xs(e,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=a}}xs.DEFAULT_COLLECTION_PERCENTILE=10,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xs.DEFAULT=new xs(h0,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xs.DISABLED=new xs(-1,0,0);class Al{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Al(0)}static ar(){return new Al(-1)}}const Yv="LruGarbageCollector",TC=1048576;function $v([n,e],[s,a]){const o=pt(n,s);return o===0?pt(e,a):o}class bC{constructor(e){this.Pr=e,this.buffer=new Nn($v),this.Tr=0}Ir(){return++this.Tr}Er(e){const s=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const a=this.buffer.last();$v(s,a)<0&&(this.buffer=this.buffer.delete(a).add(s))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(e,s,a){this.garbageCollector=e,this.asyncQueue=s,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(Yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Dl(s)?Re(Yv,"Ignoring IndexedDB error during garbage collection: ",s):await jl(s)}await this.Ar(3e5)}))}}class NC{constructor(e,s){this.Vr=e,this.params=s}calculateTargetCount(e,s){return this.Vr.dr(e).next((a=>Math.floor(s/100*a)))}nthSequenceNumber(e,s){if(s===0)return pe.resolve(zd.ce);const a=new bC(s);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,s,a){return this.Vr.removeTargets(e,s,a)}removeOrphanedDocuments(e,s){return this.Vr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Xv)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xv):this.gr(e,s)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,s){let a,o,u,h,g,v,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,s)))).next((w=>(u=w,v=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(_=Date.now(),ul()<=Tt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-S}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${u} targets in `+(v-g)+`ms
	Removed ${w} documents in `+(_-v)+`ms
Total Duration: ${_-S}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function wC(n,e){return new NC(n,e)}class xC{constructor(){this.changes=new fo((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,ts.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const a=this.changes.get(s);return a!==void 0?pe.resolve(a):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AC{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}class RC{constructor(e,s,a,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,s){let a=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(a!==null&&Dc(a.mutation,o,vi.empty(),$t.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((a=>this.getLocalViewOfDocuments(e,a,_t()).next((()=>a))))}getLocalViewOfDocuments(e,s,a=_t()){const o=no();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,a).next((u=>{let h=Rc();return u.forEach(((g,v)=>{h=h.insert(g,v.overlayedDocument)})),h}))))}getOverlayedDocuments(e,s){const a=no();return this.populateOverlays(e,a,s).next((()=>this.computeViews(e,s,a,_t())))}populateOverlays(e,s,a){const o=[];return a.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,g)=>{s.set(h,g)}))}))}computeViews(e,s,a,o){let u=Ca();const h=jc(),g=(function(){return jc()})();return s.forEach(((v,_)=>{const S=a.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof ho)?u=u.insert(_.key,_):S!==void 0?(h.set(_.key,S.mutation.getFieldMask()),Dc(S.mutation,_,S.mutation.getFieldMask(),$t.now())):h.set(_.key,vi.empty())})),this.recalculateAndSaveOverlays(e,u).next((v=>(v.forEach(((_,S)=>h.set(_,S))),s.forEach(((_,S)=>g.set(_,new AC(S,h.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,s){const a=jc();let o=new tn(((h,g)=>h-g)),u=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((h=>{for(const g of h)g.keys().forEach((v=>{const _=s.get(v);if(_===null)return;let S=a.get(v)||vi.empty();S=g.applyToLocalView(_,S),a.set(v,S);const w=(o.get(g.batchId)||_t()).add(v);o=o.insert(g.batchId,w)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),_=v.key,S=v.value,w=$b();S.forEach((C=>{if(!u.has(C)){const q=e0(s.get(C),a.get(C));q!==null&&w.set(C,q),u=u.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,w))}return pe.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,s,a,o){return IR(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):zb(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,a,o):this.getDocumentsMatchingCollectionQuery(e,s,a,o)}getNextDocuments(e,s,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,a.largestBatchId,o-u.size):pe.resolve(no());let g=Vc,v=u;return h.next((_=>pe.forEach(_,((S,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(S)?pe.resolve():this.remoteDocumentCache.getEntry(e,S).next((C=>{v=v.insert(S,C)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,v,_,_t()))).next((S=>({batchId:g,changes:Yb(S)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Be(s)).next((a=>{let o=Rc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,a,o){const u=s.collectionGroup;let h=Rc();return this.indexManager.getCollectionParents(e,u).next((g=>pe.forEach(g,(v=>{const _=(function(w,C){return new $c(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(s,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((S=>{S.forEach(((w,C)=>{h=h.insert(w,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,s,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,a,u,o)))).next((h=>{u.forEach(((v,_)=>{const S=_.getKey();h.get(S)===null&&(h=h.insert(S,ts.newInvalidDocument(S)))}));let g=Rc();return h.forEach(((v,_)=>{const S=u.get(v);S!==void 0&&Dc(S.mutation,_,vi.empty(),$t.now()),Yd(s,_)&&(g=g.insert(v,_))})),g}))}}class CC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,s){return pe.resolve(this.Nr.get(s))}saveBundleMetadata(e,s){return this.Nr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:zi(o.createTime)}})(s)),pe.resolve()}getNamedQuery(e,s){return pe.resolve(this.Br.get(s))}saveNamedQuery(e,s){return this.Br.set(s.name,(function(o){return{name:o.name,query:yC(o.bundledQuery),readTime:zi(o.readTime)}})(s)),pe.resolve()}}class IC{constructor(){this.overlays=new tn(Be.comparator),this.Lr=new Map}getOverlay(e,s){return pe.resolve(this.overlays.get(s))}getOverlays(e,s){const a=no();return pe.forEach(s,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,s,a){return a.forEach(((o,u)=>{this.bt(e,s,u)})),pe.resolve()}removeOverlaysForBatchId(e,s,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),pe.resolve()}getOverlaysForCollection(e,s,a){const o=no(),u=s.length+1,h=new Be(s.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const v=g.getNext().value,_=v.getKey();if(!s.isPrefixOf(_.path))break;_.path.length===u&&v.largestBatchId>a&&o.set(v.getKey(),v)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,s,a,o){let u=new tn(((_,S)=>_-S));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===s&&_.largestBatchId>a){let S=u.get(_.largestBatchId);S===null&&(S=no(),u=u.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=no(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=o)););return pe.resolve(g)}bt(e,s,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new $R(s,a));let u=this.Lr.get(s);u===void 0&&(u=_t(),this.Lr.set(s,u)),this.Lr.set(s,u.add(a.key))}}class kC{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,pe.resolve()}}class jp{constructor(){this.kr=new Nn(kn.Kr),this.qr=new Nn(kn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,s){const a=new kn(e,s);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,s){e.forEach((a=>this.addReference(a,s)))}removeReference(e,s){this.Wr(new kn(e,s))}Qr(e,s){e.forEach((a=>this.removeReference(a,s)))}Gr(e){const s=new Be(new Ht([])),a=new kn(s,e),o=new kn(s,e+1),u=[];return this.qr.forEachInRange([a,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const s=new Be(new Ht([])),a=new kn(s,e),o=new kn(s,e+1);let u=_t();return this.qr.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const s=new kn(e,0),a=this.kr.firstAfterOrEqual(s);return a!==null&&e.isEqual(a.key)}}class kn{constructor(e,s){this.key=e,this.Hr=s}static Kr(e,s){return Be.comparator(e.key,s.key)||pt(e.Hr,s.Hr)}static Ur(e,s){return pt(e.Hr,s.Hr)||Be.comparator(e.key,s.key)}}class LC{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new Nn(kn.Kr)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new YR(u,s,a,o);this.mutationQueue.push(h);for(const g of o)this.Jr=this.Jr.add(new kn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return pe.resolve(h)}lookupMutationBatch(e,s){return pe.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(e,s){const a=s+1,o=this.Xr(a),u=o<0?0:o;return pe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Sp:this.Yn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const a=new kn(s,0),o=new kn(s,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(h=>{const g=this.Zr(h.Hr);u.push(g)})),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,s){let a=new Nn(pt);return s.forEach((o=>{const u=new kn(o,0),h=new kn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(g=>{a=a.add(g.Hr)}))})),pe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,s){const a=s.path,o=a.length+1;let u=a;Be.isDocumentKey(u)||(u=u.child(""));const h=new kn(new Be(u),0);let g=new Nn(pt);return this.Jr.forEachWhile((v=>{const _=v.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(g=g.add(v.Hr)),!0)}),h),pe.resolve(this.Yr(g))}Yr(e){const s=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){It(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return pe.forEach(s.mutations,(o=>{const u=new kn(o.key,s.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,s){const a=new kn(s,0),o=this.Jr.firstAfterOrEqual(a);return pe.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ei(e,s){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const s=this.Xr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}class jC{constructor(e){this.ti=e,this.docs=(function(){return new tn(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const a=s.key,o=this.docs.get(a),u=o?o.size:0,h=this.ti(s);return this.docs=this.docs.insert(a,{document:s.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const a=this.docs.get(s);return pe.resolve(a?a.document.mutableCopy():ts.newInvalidDocument(s))}getEntries(e,s){let a=Ca();return s.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():ts.newInvalidDocument(o))})),pe.resolve(a)}getDocumentsMatchingQuery(e,s,a,o){let u=Ca();const h=s.path,g=new Be(h.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:_,value:{document:S}}=v.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||rR(aR(S),a)<=0||(o.has(S.key)||Yd(s,S))&&(u=u.insert(S.key,S.mutableCopy()))}return pe.resolve(u)}getAllFromCollectionGroup(e,s,a,o){Xe(9500)}ni(e,s){return pe.forEach(this.docs,(a=>s(a)))}newChangeBuffer(e){return new DC(this)}getSize(e){return pe.resolve(this.size)}}class DC extends xC{constructor(e){super(),this.Mr=e}applyChanges(e){const s=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?s.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),pe.waitFor(s)}getFromCache(e,s){return this.Mr.getEntry(e,s)}getAllFromCache(e,s){return this.Mr.getEntries(e,s)}}class OC{constructor(e){this.persistence=e,this.ri=new fo((s=>xp(s)),Ap),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new jp,this.targetCount=0,this.oi=Al._r()}forEachTarget(e,s){return this.ri.forEach(((a,o)=>s(o))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,s,a){return a&&(this.lastRemoteSnapshotVersion=a),s>this.ii&&(this.ii=s),pe.resolve()}lr(e){this.ri.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.oi=new Al(s),this.highestTargetId=s),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,s){return this.lr(s),this.targetCount+=1,pe.resolve()}updateTargetData(e,s){return this.lr(s),pe.resolve()}removeTargetData(e,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,s,a){let o=0;const u=[];return this.ri.forEach(((h,g)=>{g.sequenceNumber<=s&&a.get(g.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),pe.waitFor(u).next((()=>o))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,s){const a=this.ri.get(s)||null;return pe.resolve(a)}addMatchingKeys(e,s,a){return this.si.$r(s,a),pe.resolve()}removeMatchingKeys(e,s,a){this.si.Qr(s,a);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),pe.waitFor(u)}removeMatchingKeysForTargetId(e,s){return this.si.Gr(s),pe.resolve()}getMatchingKeysForTargetId(e,s){const a=this.si.jr(s);return pe.resolve(a)}containsKey(e,s){return pe.resolve(this.si.containsKey(s))}}class m0{constructor(e,s){this._i={},this.overlays={},this.ai=new zd(0),this.ui=!1,this.ui=!0,this.ci=new kC,this.referenceDelegate=e(this),this.li=new OC(this),this.indexManager=new EC,this.remoteDocumentCache=(function(o){return new jC(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new gC(s),this.Pi=new CC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new IC,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let a=this._i[e.toKey()];return a||(a=new LC(s,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,s,a){Re("MemoryPersistence","Starting transaction:",e);const o=new MC(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,s){return pe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,s))))}}class MC extends lR{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.Ri=new jp,this.Ai=null}static Vi(e){return new Dp(e)}get di(){if(this.Ai)return this.Ai;throw Xe(60996)}addReference(e,s,a){return this.Ri.addReference(a,s),this.di.delete(a.toString()),pe.resolve()}removeReference(e,s,a){return this.Ri.removeReference(a,s),this.di.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(e,s){return this.di.add(s.toString()),pe.resolve()}removeTarget(e,s){this.Ri.Gr(s.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,s)))}Ti(){this.Ai=new Set}Ii(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,(a=>{const o=Be.fromPath(a);return this.mi(e,o).next((u=>{u||s.removeEntry(o,We.min())}))})).next((()=>(this.Ai=null,s.apply(e))))}updateLimboDocument(e,s){return this.mi(e,s).next((a=>{a?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(e){return 0}mi(e,s){return pe.or([()=>pe.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ei(e,s)])}}class Rd{constructor(e,s){this.persistence=e,this.fi=new fo((a=>dR(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=wC(this,s)}static Vi(e,s){return new Rd(e,s)}Ti(){}Ii(e){return pe.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}dr(e){const s=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>s.next((o=>a+o))))}pr(e){let s=0;return this.mr(e,(a=>{s++})).next((()=>s))}mr(e,s){return pe.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?pe.resolve():s(o)))))}removeTargets(e,s,a){return this.persistence.getTargetCache().removeTargets(e,s,a)}removeOrphanedDocuments(e,s){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,s).next((g=>{g||(a++,u.removeEntry(h,We.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,s){return this.fi.set(s,e.currentSequenceNumber),pe.resolve()}removeTarget(e,s){const a=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,s,a){return this.fi.set(a,e.currentSequenceNumber),pe.resolve()}removeReference(e,s,a){return this.fi.set(a,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,s){return this.fi.set(s,e.currentSequenceNumber),pe.resolve()}hi(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=dd(e.data.value)),s}wr(e,s,a){return pe.or([()=>this.persistence.Ei(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.fi.get(s);return pe.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Op{constructor(e,s,a,o){this.targetId=e,this.fromCache=s,this.Ts=a,this.Is=o}static Es(e,s){let a=_t(),o=_t();for(const u of s.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Op(e,s.fromCache,a,o)}}class UC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class VC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Ix()?8:cR(Rx())>0?6:4})()}initialize(e,s){this.fs=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,a,o){const u={result:null};return this.gs(e,s).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,s,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new UC;return this.ys(e,s,h).next((g=>{if(u.result=g,this.As)return this.ws(e,s,h,g.size)}))})).next((()=>u.result))}ws(e,s,a,o){return a.documentReadCount<this.Vs?(ul()<=Tt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",dl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pe.resolve()):(ul()<=Tt.DEBUG&&Re("QueryEngine","Query:",dl(s),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(ul()<=Tt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",dl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(s))):pe.resolve())}gs(e,s){if(Mv(s))return pe.resolve(null);let a=Pi(s);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Jm(s,null,"F"),a=Pi(s)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=_t(...u);return this.fs.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((v=>{const _=this.bs(s,g);return this.Ss(s,_,h,v.readTime)?this.gs(e,Jm(s,null,"F")):this.Ds(e,_,s,v)}))))})))))}ps(e,s,a,o){return Mv(s)||o.isEqual(We.min())?pe.resolve(null):this.fs.getDocuments(e,a).next((u=>{const h=this.bs(s,u);return this.Ss(s,h,a,o)?pe.resolve(null):(ul()<=Tt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dl(s)),this.Ds(e,h,s,iR(o,Vc)).next((g=>g)))}))}bs(e,s){let a=new Nn(Gb(e));return s.forEach(((o,u)=>{Yd(e,u)&&(a=a.add(u))})),a}Ss(e,s,a,o){if(e.limit===null)return!1;if(a.size!==s.size)return!0;const u=e.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,s,a){return ul()<=Tt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",dl(s)),this.fs.getDocumentsMatchingQuery(e,s,yr.min(),a)}Ds(e,s,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(s.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Mp="LocalStore",BC=3e8;class qC{constructor(e,s,a,o){this.persistence=e,this.Cs=s,this.serializer=o,this.vs=new tn(pt),this.Fs=new fo((u=>xp(u)),Ap),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.vs)))}}function PC(n,e,s,a){return new qC(n,e,s,a)}async function p0(n,e){const s=tt(n);return await s.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return s.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,s.Os(e),s.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],g=[];let v=_t();for(const _ of o){h.push(_.batchId);for(const S of _.mutations)v=v.add(S.key)}for(const _ of u){g.push(_.batchId);for(const S of _.mutations)v=v.add(S.key)}return s.localDocuments.getDocuments(a,v).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:g})))}))}))}function FC(n,e){const s=tt(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=s.xs.newChangeBuffer({trackRemovals:!0});return(function(g,v,_,S){const w=_.batch,C=w.keys();let q=pe.resolve();return C.forEach((X=>{q=q.next((()=>S.getEntry(v,X))).next((O=>{const V=_.docVersions.get(X);It(V!==null,48541),O.version.compareTo(V)<0&&(w.applyToRemoteDocument(O,_),O.isValidDocument()&&(O.setReadTime(_.commitVersion),S.addEntry(O)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(v,w)))})(s,a,e,u).next((()=>u.apply(a))).next((()=>s.mutationQueue.performConsistencyCheck(a))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let v=_t();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(v=v.add(g.batch.mutations[_].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(a,o)))}))}function _0(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.li.getLastRemoteSnapshotVersion(s)))}function zC(n,e){const s=tt(n),a=e.snapshotVersion;let o=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=s.xs.newChangeBuffer({trackRemovals:!0});o=s.vs;const g=[];e.targetChanges.forEach(((S,w)=>{const C=o.get(w);if(!C)return;g.push(s.li.removeMatchingKeys(u,S.removedDocuments,w).next((()=>s.li.addMatchingKeys(u,S.addedDocuments,w))));let q=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?q=q.withResumeToken(Gn.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):S.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(S.resumeToken,a)),o=o.insert(w,q),(function(O,V,z){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=BC?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(C,q,S)&&g.push(s.li.updateTargetData(u,q))}));let v=Ca(),_=_t();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(s.persistence.referenceDelegate.updateLimboDocument(u,S))})),g.push(HC(u,h,e.documentUpdates).next((S=>{v=S.Bs,_=S.Ls}))),!a.isEqual(We.min())){const S=s.li.getLastRemoteSnapshotVersion(u).next((w=>s.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(S)}return pe.waitFor(g).next((()=>h.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,v,_))).next((()=>v))})).then((u=>(s.vs=o,u)))}function HC(n,e,s){let a=_t(),o=_t();return s.forEach((u=>a=a.add(u))),e.getEntries(n,a).next((u=>{let h=Ca();return s.forEach(((g,v)=>{const _=u.get(g);v.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(We.min())?(e.removeEntry(g,v.readTime),h=h.insert(g,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),h=h.insert(g,v)):Re(Mp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",v.version)})),{Bs:h,Ls:o}}))}function GC(n,e){const s=tt(n);return s.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Sp),s.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function XC(n,e){const s=tt(n);return s.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return s.li.getTargetData(a,e).next((u=>u?(o=u,pe.resolve(o)):s.li.allocateTargetId(a).next((h=>(o=new fr(e,h,"TargetPurposeListen",a.currentSequenceNumber),s.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=s.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.vs=s.vs.insert(a.targetId,a),s.Fs.set(e,a.targetId)),a}))}async function sp(n,e,s){const a=tt(n),o=a.vs.get(e),u=s?"readwrite":"readwrite-primary";try{s||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Dl(h))throw h;Re(Mp,`Failed to update sequence numbers for target ${e}: ${h}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function Qv(n,e,s){const a=tt(n);let o=We.min(),u=_t();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(v,_,S){const w=tt(v),C=w.Fs.get(S);return C!==void 0?pe.resolve(w.vs.get(C)):w.li.getTargetData(_,S)})(a,h,Pi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(h,g.targetId).next((v=>{u=v}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,s?o:We.min(),s?u:_t()))).next((g=>(YC(a,LR(e),g),{documents:g,ks:u})))))}function YC(n,e,s){let a=n.Ms.get(e)||We.min();s.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),n.Ms.set(e,a)}class Kv{constructor(){this.activeTargetIds=VR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $C{constructor(){this.vo=new Kv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,a){}addLocalQueryTarget(e,s=!0){return s&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,s,a){this.Fo[e]=s}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Kv,Promise.resolve()}handleUserChange(e,s,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QC{Mo(e){}shutdown(){}}const Wv="ConnectivityMonitor";class Jv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(Wv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(Wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rd=null;function ip(){return rd===null?rd=(function(){return 268435456+Math.round(2147483648*Math.random())})():rd++,"0x"+rd.toString(16)}const Tm="RestConnection",KC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class WC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===Td?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,s,a,o,u){const h=ip(),g=this.Qo(e,s.toUriEncodedString());Re(Tm,`Sending RPC '${e}' ${h}:`,g,a);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(v,o,u);const{host:_}=new URL(g),S=Ep(_);return this.zo(e,g,v,a,S).then((w=>(Re(Tm,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw bl(Tm,`RPC '${e}' ${h} failed with error: `,w,"url: ",g,"request:",a),w}))}jo(e,s,a,o,u,h){return this.Wo(e,s,a,o,u)}Go(e,s,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,s){const a=KC[e];let o=`${this.qo}/v1/${s}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class JC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Zn="WebChannelConnection",Nc=(n,e,s)=>{n.listen(e,(a=>{try{s(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class gl extends WC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!gl.c_){const e=vb();Nc(e,Eb.STAT_EVENT,(s=>{s.stat===Gm.PROXY?Re(Zn,"STAT_EVENT: detected buffering proxy"):s.stat===Gm.NOPROXY&&Re(Zn,"STAT_EVENT: detected no buffering proxy")})),gl.c_=!0}}zo(e,s,a,o,u){const h=ip();return new Promise(((g,v)=>{const _=new gb;_.setWithCredentials(!0),_.listenOnce(yb.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case ud.NO_ERROR:const w=_.getResponseJson();Re(Zn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),g(w);break;case ud.TIMEOUT:Re(Zn,`RPC '${e}' ${h} timed out`),v(new Ce(me.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const C=_.getStatus();if(Re(Zn,`RPC '${e}' ${h} failed with status:`,C,"response text:",_.getResponseText()),C>0){let q=_.getResponseJson();Array.isArray(q)&&(q=q[0]);const X=q?.error;if(X&&X.status&&X.message){const O=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf($)>=0?$:me.UNKNOWN})(X.status);v(new Ce(O,X.message))}else v(new Ce(me.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new Ce(me.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Re(Zn,`RPC '${e}' ${h} completed.`)}}));const S=JSON.stringify(o);Re(Zn,`RPC '${e}' ${h} sending request:`,o),_.send(s,"POST",S,a,15)}))}T_(e,s,a){const o=ip(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,s,a),g.encodeInitMessageHeaders=!0;const _=u.join("");Re(Zn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const S=h.createWebChannel(_,g);this.I_(S);let w=!1,C=!1;const q=new JC({Ho:X=>{C?Re(Zn,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(w||(Re(Zn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),Re(Zn,`RPC '${e}' stream ${o} sending:`,X),S.send(X))},Jo:()=>S.close()});return Nc(S,Ac.EventType.OPEN,(()=>{C||(Re(Zn,`RPC '${e}' stream ${o} transport opened.`),q.i_())})),Nc(S,Ac.EventType.CLOSE,(()=>{C||(C=!0,Re(Zn,`RPC '${e}' stream ${o} transport closed`),q.o_(),this.E_(S))})),Nc(S,Ac.EventType.ERROR,(X=>{C||(C=!0,bl(Zn,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),q.o_(new Ce(me.UNAVAILABLE,"The operation could not be completed")))})),Nc(S,Ac.EventType.MESSAGE,(X=>{if(!C){const O=X.data[0];It(!!O,16349);const V=O,z=V?.error||V[0]?.error;if(z){Re(Zn,`RPC '${e}' stream ${o} received error:`,z);const $=z.status;let Z=(function(Te){const M=yn[Te];if(M!==void 0)return n0(M)})($),ie=z.message;Z===void 0&&(Z=me.INTERNAL,ie="Unknown error status: "+$+" with message "+z.message),C=!0,q.o_(new Ce(Z,ie)),S.close()}else Re(Zn,`RPC '${e}' stream ${o} received:`,O),q.__(O)}})),gl.u_(),setTimeout((()=>{q.s_()}),0),q}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((s=>s===e))}Go(e,s,a){super.Go(e,s,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Tb()}}function ZC(n){return new gl(n)}function bm(){return typeof document<"u"?document:null}function Wd(n){return new sC(n,!0)}gl.c_=!1;class g0{constructor(e,s,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=s,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const s=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-a);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Zv="PersistentStream";class y0{constructor(e,s,a,o,u,h,g,v){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new g0(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===me.RESOURCE_EXHAUSTED?(Ra(s.toString()),Ra("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(s)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===s&&this.G_(a,o)}),(a=>{e((()=>{const o=new Ce(me.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,s){const a=this.Q_(this.D_);this.stream=this.j_(e,s),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(Zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return s=>{this.Ci.enqueueAndForget((()=>this.D_===e?s():(Re(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e2 extends y0{constructor(e,s,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,a,o,h),this.serializer=u}j_(e,s){return this.connection.T_("Listen",e,s)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=rC(this.serializer,e),a=(function(u){if(!("targetChange"in u))return We.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?We.min():h.readTime?zi(h.readTime):We.min()})(e);return this.listener.J_(s,a)}Z_(e){const s={};s.database=np(this.serializer),s.addTarget=(function(u,h){let g;const v=h.target;if(g=Km(v)?{documents:cC(u,v)}:{query:uC(u,v).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=a0(u,h.resumeToken);const _=Zm(u,h.expectedCount);_!==null&&(g.expectedCount=_)}else if(h.snapshotVersion.compareTo(We.min())>0){g.readTime=Ad(u,h.snapshotVersion.toTimestamp());const _=Zm(u,h.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const a=fC(this.serializer,e);a&&(s.labels=a),this.K_(s)}X_(e){const s={};s.database=np(this.serializer),s.removeTarget=e,this.K_(s)}}class t2 extends y0{constructor(e,s,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,a,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}H_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=lC(e.writeResults,e.commitTime),a=zi(e.commitTime);return this.listener.na(a,s)}ra(){const e={};e.database=np(this.serializer),this.K_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((a=>oC(this.serializer,a)))};this.K_(s)}}class n2{}class s2 extends n2{constructor(e,s,a,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ce(me.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,s,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,ep(s,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(me.UNKNOWN,u.toString())}))}jo(e,s,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.jo(e,ep(s,a),o,h,g,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ce(me.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function i2(n,e,s,a){return new s2(n,e,s,a)}class a2{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ra(s),this.aa=!1):Re("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ao="RemoteStore";class r2{constructor(e,s,a,o,u){this.localStore=e,this.datastore=s,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{a.enqueueAndForget((async()=>{mo(this)&&(Re(ao,"Restarting streams for network reachability change."),await(async function(v){const _=tt(v);_.Ea.add(4),await Wc(_),_.Va.set("Unknown"),_.Ea.delete(4),await Jd(_)})(this))}))})),this.Va=new a2(a,o)}}async function Jd(n){if(mo(n))for(const e of n.Ra)await e(!0)}async function Wc(n){for(const e of n.Ra)await e(!1)}function E0(n,e){const s=tt(n);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),qp(s)?Bp(s):Ol(s).O_()&&Vp(s,e))}function Up(n,e){const s=tt(n),a=Ol(s);s.Ia.delete(e),a.O_()&&v0(s,e),s.Ia.size===0&&(a.O_()?a.L_():mo(s)&&s.Va.set("Unknown"))}function Vp(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const s=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ol(n).Z_(e)}function v0(n,e){n.da.$e(e),Ol(n).X_(e)}function Bp(n){n.da=new ZR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ol(n).start(),n.Va.ua()}function qp(n){return mo(n)&&!Ol(n).x_()&&n.Ia.size>0}function mo(n){return tt(n).Ea.size===0}function T0(n){n.da=void 0}async function o2(n){n.Va.set("Online")}async function l2(n){n.Ia.forEach(((e,s)=>{Vp(n,e)}))}async function c2(n,e){T0(n),qp(n)?(n.Va.ha(e),Bp(n)):n.Va.set("Unknown")}async function u2(n,e,s){if(n.Va.set("Online"),e instanceof i0&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.da.removeTarget(g))})(n,e)}catch(a){Re(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Cd(n,a)}else if(e instanceof md?n.da.Xe(e):e instanceof s0?n.da.st(e):n.da.tt(e),!s.isEqual(We.min()))try{const a=await _0(n.localStore);s.compareTo(a)>=0&&await(function(u,h){const g=u.da.Tt(h);return g.targetChanges.forEach(((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const S=u.Ia.get(_);S&&u.Ia.set(_,S.withResumeToken(v.resumeToken,h))}})),g.targetMismatches.forEach(((v,_)=>{const S=u.Ia.get(v);if(!S)return;u.Ia.set(v,S.withResumeToken(Gn.EMPTY_BYTE_STRING,S.snapshotVersion)),v0(u,v);const w=new fr(S.target,v,_,S.sequenceNumber);Vp(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(n,s)}catch(a){Re(ao,"Failed to raise snapshot:",a),await Cd(n,a)}}async function Cd(n,e,s){if(!Dl(e))throw e;n.Ea.add(1),await Wc(n),n.Va.set("Offline"),s||(s=()=>_0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(ao,"Retrying IndexedDB access"),await s(),n.Ea.delete(1),await Jd(n)}))}function b0(n,e){return e().catch((s=>Cd(n,s,e)))}async function Zd(n){const e=tt(n),s=br(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sp;for(;d2(e);)try{const o=await GC(e.localStore,a);if(o===null){e.Ta.length===0&&s.L_();break}a=o.batchId,f2(e,o)}catch(o){await Cd(e,o)}S0(e)&&N0(e)}function d2(n){return mo(n)&&n.Ta.length<10}function f2(n,e){n.Ta.push(e);const s=br(n);s.O_()&&s.Y_&&s.ea(e.mutations)}function S0(n){return mo(n)&&!br(n).x_()&&n.Ta.length>0}function N0(n){br(n).start()}async function h2(n){br(n).ra()}async function m2(n){const e=br(n);for(const s of n.Ta)e.ea(s.mutations)}async function p2(n,e,s){const a=n.Ta.shift(),o=Ip.from(a,e,s);await b0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Zd(n)}async function _2(n,e){e&&br(n).Y_&&await(async function(a,o){if((function(h){return KR(h)&&h!==me.ABORTED})(o.code)){const u=a.Ta.shift();br(a).B_(),await b0(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Zd(a)}})(n,e),S0(n)&&N0(n)}async function eT(n,e){const s=tt(n);s.asyncQueue.verifyOperationInProgress(),Re(ao,"RemoteStore received new credentials");const a=mo(s);s.Ea.add(3),await Wc(s),a&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Jd(s)}async function g2(n,e){const s=tt(n);e?(s.Ea.delete(2),await Jd(s)):e||(s.Ea.add(2),await Wc(s),s.Va.set("Unknown"))}function Ol(n){return n.ma||(n.ma=(function(s,a,o){const u=tt(s);return u.sa(),new e2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Zo:o2.bind(null,n),Yo:l2.bind(null,n),t_:c2.bind(null,n),J_:u2.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),qp(n)?Bp(n):n.Va.set("Unknown")):(await n.ma.stop(),T0(n))}))),n.ma}function br(n){return n.fa||(n.fa=(function(s,a,o){const u=tt(s);return u.sa(),new t2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:h2.bind(null,n),t_:_2.bind(null,n),ta:m2.bind(null,n),na:p2.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Zd(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Pp{constructor(e,s,a,o,u){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,a,o,u){const h=Date.now()+a,g=new Pp(e,s,h,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fp(n,e){if(Ra("AsyncQueue",`${e}: ${n}`),Dl(n))return new Ce(me.UNAVAILABLE,`${e}: ${n}`);throw n}class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(s,a)=>e(s,a)||Be.comparator(s.key,a.key):(s,a)=>Be.comparator(s.key,a.key),this.keyedMap=Rc(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,a)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const a=new yl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=s,a}}class tT{constructor(){this.ga=new tn(Be.comparator)}track(e){const s=e.doc.key,a=this.ga.get(s);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(s,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(s,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(s):e.type===1&&a.type===2?this.ga=this.ga.insert(s,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Xe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,a)=>{e.push(a)})),e}}class Rl{constructor(e,s,a,o,u,h,g,v,_){this.query=e,this.docs=s,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,s,a,o,u){const h=[];return s.forEach((g=>{h.push({type:0,doc:g})})),new Rl(e,s,yl.emptySet(s),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,a=e.docChanges;if(s.length!==a.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==a[o].type||!s[o].doc.isEqual(a[o].doc))return!1;return!0}}class y2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class E2{constructor(){this.queries=nT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,a){const o=tt(s),u=o.queries;o.queries=nT(),u.forEach(((h,g)=>{for(const v of g.ba)v.onError(a)}))})(this,new Ce(me.ABORTED,"Firestore shutting down"))}}function nT(){return new fo((n=>Hb(n)),Xd)}async function v2(n,e){const s=tt(n);let a=3;const o=e.query;let u=s.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new y2,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(h){const g=Fp(h,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(g)}s.queries.set(o,u),u.ba.push(e),e.va(s.onlineState),u.wa&&e.Fa(u.wa)&&zp(s)}async function T2(n,e){const s=tt(n),a=e.query;let o=3;const u=s.queries.get(a);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(a),s.onUnlisten(a,!0);case 1:return s.queries.delete(a),s.onUnlisten(a,!1);case 2:return s.onLastRemoteStoreUnlisten(a);default:return}}function b2(n,e){const s=tt(n);let a=!1;for(const o of e){const u=o.query,h=s.queries.get(u);if(h){for(const g of h.ba)g.Fa(o)&&(a=!0);h.wa=o}}a&&zp(s)}function S2(n,e,s){const a=tt(n),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(s);a.queries.delete(e)}function zp(n){n.Ca.forEach((e=>{e.next()}))}var ap,sT;(sT=ap||(ap={})).Ma="default",sT.Cache="cache";class N2{constructor(e,s,a){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Rl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const a=s!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}class w0{constructor(e){this.key=e}}class x0{constructor(e){this.key=e}}class w2{constructor(e,s){this.query=e,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_t(),this.mutatedKeys=_t(),this.eu=Gb(e),this.tu=new yl(this.eu)}get nu(){return this.Za}ru(e,s){const a=s?s.iu:new tT,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,h=o,g=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,w)=>{const C=o.get(S),q=Yd(this.query,w)?w:null,X=!!C&&this.mutatedKeys.has(C.key),O=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let V=!1;C&&q?C.data.isEqual(q.data)?X!==O&&(a.track({type:3,doc:q}),V=!0):this.su(C,q)||(a.track({type:2,doc:q}),V=!0,(v&&this.eu(q,v)>0||_&&this.eu(q,_)<0)&&(g=!0)):!C&&q?(a.track({type:0,doc:q}),V=!0):C&&!q&&(a.track({type:1,doc:C}),V=!0,(v||_)&&(g=!0)),V&&(q?(h=h.add(q),u=O?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const S=this.query.limitType==="F"?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),a.track({type:1,doc:S})}return{tu:h,iu:a,Ss:g,mutatedKeys:u}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((S,w)=>(function(q,X){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Vt:V})}};return O(q)-O(X)})(S.type,w.type)||this.eu(S.doc,w.doc))),this.ou(a),o=o??!1;const g=s&&!o?this._u():[],v=this.Ya.size===0&&this.current&&!o?1:0,_=v!==this.Xa;return this.Xa=v,h.length!==0||_?{snapshot:new Rl(this.query,e.tu,u,h,e.mutatedKeys,v===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=_t(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const s=[];return e.forEach((a=>{this.Ya.has(a)||s.push(new x0(a))})),this.Ya.forEach((a=>{e.has(a)||s.push(new w0(a))})),s}cu(e){this.Za=e.ks,this.Ya=_t();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Hp="SyncEngine";class x2{constructor(e,s,a){this.query=e,this.targetId=s,this.view=a}}class A2{constructor(e){this.key=e,this.hu=!1}}class R2{constructor(e,s,a,o,u,h){this.localStore=e,this.remoteStore=s,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new fo((g=>Hb(g)),Xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new tn(Be.comparator),this.Au=new Map,this.Vu=new jp,this.du={},this.mu=new Map,this.fu=Al.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C2(n,e,s=!0){const a=L0(n);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await A0(a,e,s,!0),o}async function I2(n,e){const s=L0(n);await A0(s,e,!0,!1)}async function A0(n,e,s,a){const o=await XC(n.localStore,Pi(e)),u=o.targetId,h=n.sharedClientState.addLocalQueryTarget(u,s);let g;return a&&(g=await k2(n,e,u,h==="current",o.resumeToken)),n.isPrimaryClient&&s&&E0(n.remoteStore,o),g}async function k2(n,e,s,a,o){n.pu=(w,C,q)=>(async function(O,V,z,$){let Z=V.view.ru(z);Z.Ss&&(Z=await Qv(O.localStore,V.query,!1).then((({documents:M})=>V.view.ru(M,Z))));const ie=$&&$.targetChanges.get(V.targetId),_e=$&&$.targetMismatches.get(V.targetId)!=null,Te=V.view.applyChanges(Z,O.isPrimaryClient,ie,_e);return aT(O,V.targetId,Te.au),Te.snapshot})(n,w,C,q);const u=await Qv(n.localStore,e,!0),h=new w2(e,u.ks),g=h.ru(u.documents),v=Kc.createSynthesizedTargetChangeForCurrentChange(s,a&&n.onlineState!=="Offline",o),_=h.applyChanges(g,n.isPrimaryClient,v);aT(n,s,_.au);const S=new x2(e,s,h);return n.Tu.set(e,S),n.Iu.has(s)?n.Iu.get(s).push(e):n.Iu.set(s,[e]),_.snapshot}async function L2(n,e,s){const a=tt(n),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!Xd(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),s&&Up(a.remoteStore,o.targetId),rp(a,o.targetId)})).catch(jl)):(rp(a,o.targetId),await sp(a.localStore,o.targetId,!0))}async function j2(n,e){const s=tt(n),a=s.Tu.get(e),o=s.Iu.get(a.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(a.targetId),Up(s.remoteStore,a.targetId))}async function D2(n,e,s){const a=P2(n);try{const o=await(function(h,g){const v=tt(h),_=$t.now(),S=g.reduce(((q,X)=>q.add(X.key)),_t());let w,C;return v.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let X=Ca(),O=_t();return v.xs.getEntries(q,S).next((V=>{X=V,X.forEach(((z,$)=>{$.isValidDocument()||(O=O.add(z))}))})).next((()=>v.localDocuments.getOverlayedDocuments(q,X))).next((V=>{w=V;const z=[];for(const $ of g){const Z=GR($,w.get($.key).overlayedDocument);Z!=null&&z.push(new ho($.key,Z,Ob(Z.value.mapValue),Fi.exists(!0)))}return v.mutationQueue.addMutationBatch(q,_,z,g)})).next((V=>{C=V;const z=V.applyToLocalDocumentSet(w,O);return v.documentOverlayCache.saveOverlays(q,V.batchId,z)}))})).then((()=>({batchId:C.batchId,changes:Yb(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,v){let _=h.du[h.currentUser.toKey()];_||(_=new tn(pt)),_=_.insert(g,v),h.du[h.currentUser.toKey()]=_})(a,o.batchId,s),await Jc(a,o.changes),await Zd(a.remoteStore)}catch(o){const u=Fp(o,"Failed to persist write");s.reject(u)}}async function R0(n,e){const s=tt(n);try{const a=await zC(s.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=s.Au.get(u);h&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?It(h.hu,14607):o.removedDocuments.size>0&&(It(h.hu,42227),h.hu=!1))})),await Jc(s,a,e)}catch(a){await jl(a)}}function iT(n,e,s){const a=tt(n);if(a.isPrimaryClient&&s===0||!a.isPrimaryClient&&s===1){const o=[];a.Tu.forEach(((u,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const v=tt(h);v.onlineState=g;let _=!1;v.queries.forEach(((S,w)=>{for(const C of w.ba)C.va(g)&&(_=!0)})),_&&zp(v)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function O2(n,e,s){const a=tt(n);a.sharedClientState.updateQueryState(e,"rejected",s);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new tn(Be.comparator);h=h.insert(u,ts.newNoDocument(u,We.min()));const g=_t().add(u),v=new Kd(We.min(),new Map,new tn(pt),h,g);await R0(a,v),a.Ru=a.Ru.remove(u),a.Au.delete(e),Gp(a)}else await sp(a.localStore,e,!1).then((()=>rp(a,e,s))).catch(jl)}async function M2(n,e){const s=tt(n),a=e.batch.batchId;try{const o=await FC(s.localStore,e);I0(s,a,null),C0(s,a),s.sharedClientState.updateMutationState(a,"acknowledged"),await Jc(s,o)}catch(o){await jl(o)}}async function U2(n,e,s){const a=tt(n);try{const o=await(function(h,g){const v=tt(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return v.mutationQueue.lookupMutationBatch(_,g).next((w=>(It(w!==null,37113),S=w.keys(),v.mutationQueue.removeMutationBatch(_,w)))).next((()=>v.mutationQueue.performConsistencyCheck(_))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>v.localDocuments.getDocuments(_,S)))}))})(a.localStore,e);I0(a,e,s),C0(a,e),a.sharedClientState.updateMutationState(e,"rejected",s),await Jc(a,o)}catch(o){await jl(o)}}function C0(n,e){(n.mu.get(e)||[]).forEach((s=>{s.resolve()})),n.mu.delete(e)}function I0(n,e,s){const a=tt(n);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(s?u.reject(s):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function rp(n,e,s=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),s&&n.Pu.yu(a,s);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||k0(n,a)}))}function k0(n,e){n.Eu.delete(e.path.canonicalString());const s=n.Ru.get(e);s!==null&&(Up(n.remoteStore,s),n.Ru=n.Ru.remove(e),n.Au.delete(s),Gp(n))}function aT(n,e,s){for(const a of s)a instanceof w0?(n.Vu.addReference(a.key,e),V2(n,a)):a instanceof x0?(Re(Hp,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||k0(n,a.key)):Xe(19791,{wu:a})}function V2(n,e){const s=e.key,a=s.path.canonicalString();n.Ru.get(s)||n.Eu.has(a)||(Re(Hp,"New document in limbo: "+s),n.Eu.add(a),Gp(n))}function Gp(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const s=new Be(Ht.fromString(e)),a=n.fu.next();n.Au.set(a,new A2(s)),n.Ru=n.Ru.insert(s,a),E0(n.remoteStore,new fr(Pi(Fb(s.path)),a,"TargetPurposeLimboResolution",zd.ce))}}async function Jc(n,e,s){const a=tt(n),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,v)=>{h.push(a.pu(v,e,s).then((_=>{if((_||s)&&a.isPrimaryClient){const S=_?!_.fromCache:s?.targetChanges.get(v.targetId)?.current;a.sharedClientState.updateQueryState(v.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Op.Es(v.targetId,_);u.push(S)}})))})),await Promise.all(h),a.Pu.J_(o),await(async function(v,_){const S=tt(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>pe.forEach(_,(C=>pe.forEach(C.Ts,(q=>S.persistence.referenceDelegate.addReference(w,C.targetId,q))).next((()=>pe.forEach(C.Is,(q=>S.persistence.referenceDelegate.removeReference(w,C.targetId,q)))))))))}catch(w){if(!Dl(w))throw w;Re(Mp,"Failed to update sequence numbers: "+w)}for(const w of _){const C=w.targetId;if(!w.fromCache){const q=S.vs.get(C),X=q.snapshotVersion,O=q.withLastLimboFreeSnapshotVersion(X);S.vs=S.vs.insert(C,O)}}})(a.localStore,u))}async function B2(n,e){const s=tt(n);if(!s.currentUser.isEqual(e)){Re(Hp,"User change. New user:",e.toKey());const a=await p0(s.localStore,e);s.currentUser=e,(function(u,h){u.mu.forEach((g=>{g.forEach((v=>{v.reject(new Ce(me.CANCELLED,h))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Jc(s,a.Ns)}}function q2(n,e){const s=tt(n),a=s.Au.get(e);if(a&&a.hu)return _t().add(a.key);{let o=_t();const u=s.Iu.get(e);if(!u)return o;for(const h of u){const g=s.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function L0(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=R0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O2.bind(null,e),e.Pu.J_=b2.bind(null,e.eventManager),e.Pu.yu=S2.bind(null,e.eventManager),e}function P2(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U2.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return PC(this.persistence,new VC,e.initialUser,this.serializer)}Cu(e){return new m0(Dp.Vi,this.serializer)}Du(e){return new $C}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class F2 extends Id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){It(this.persistence.referenceDelegate instanceof Rd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new SC(a,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?xs.withCacheSize(this.cacheSizeBytes):xs.DEFAULT;return new m0((a=>Rd.Vi(a,s)),this.serializer)}}class op{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>iT(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=B2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new E2})()}createDatastore(e){const s=Wd(e.databaseInfo.databaseId),a=ZC(e.databaseInfo);return i2(e.authCredentials,e.appCheckCredentials,a,s)}createRemoteStore(e){return(function(a,o,u,h,g){return new r2(a,o,u,h,g)})(this.localStore,this.datastore,e.asyncQueue,(s=>iT(this.syncEngine,s,0)),(function(){return Jv.v()?new Jv:new QC})())}createSyncEngine(e,s){return(function(o,u,h,g,v,_,S){const w=new R2(o,u,h,g,v,_);return S&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const a=tt(s);Re(ao,"RemoteStore shutting down."),a.Ea.add(5),await Wc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}op.provider={build:()=>new op};class z2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ra("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}const Sr="FirestoreClient";class H2{constructor(e,s,a,o,u){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=a,this._databaseInfo=o,this.user=es.UNAUTHENTICATED,this.clientId=bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{Re(Sr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(Re(Sr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const a=Fp(s,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Sm(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Sr,"Initializing OfflineComponentProvider");const s=n.configuration;await e.initialize(s);let a=s.initialUser;n.setCredentialChangeListener((async o=>{a.isEqual(o)||(await p0(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function rT(n,e){n.asyncQueue.verifyOperationInProgress();const s=await G2(n);Re(Sr,"Initializing OnlineComponentProvider"),await e.initialize(s,n.configuration),n.setCredentialChangeListener((a=>eT(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,o)=>eT(e.remoteStore,o))),n._onlineComponents=e}async function G2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Sr,"Using user provided OfflineComponentProvider");try{await Sm(n,n._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===me.FAILED_PRECONDITION||o.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;bl("Error using user provided cache. Falling back to memory cache: "+s),await Sm(n,new Id)}}else Re(Sr,"Using default OfflineComponentProvider"),await Sm(n,new F2(void 0));return n._offlineComponents}async function j0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Sr,"Using user provided OnlineComponentProvider"),await rT(n,n._uninitializedComponentsProvider._online)):(Re(Sr,"Using default OnlineComponentProvider"),await rT(n,new op))),n._onlineComponents}function X2(n){return j0(n).then((e=>e.syncEngine))}async function Y2(n){const e=await j0(n),s=e.eventManager;return s.onListen=C2.bind(null,e.syncEngine),s.onUnlisten=L2.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=I2.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=j2.bind(null,e.syncEngine),s}function $2(n,e,s={}){const a=new pr;return n.asyncQueue.enqueueAndForget((async()=>(function(u,h,g,v,_){const S=new z2({next:C=>{S.Nu(),h.enqueueAndForget((()=>T2(u,w))),C.fromCache&&v.source==="server"?_.reject(new Ce(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),w=new N2(g,S,{includeMetadataChanges:!0,Ka:!0});return v2(u,w)})(await Y2(n),n.asyncQueue,e,s,a))),a.promise}function Q2(n,e){const s=new pr;return n.asyncQueue.enqueueAndForget((async()=>D2(await X2(n),e,s))),s.promise}function D0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const K2="ComponentProvider",oT=new Map;function W2(n,e,s,a,o){return new mR(n,e,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,D0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const O0="firestore.googleapis.com",lT=!0;class cT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O0,this.ssl=lT}else this.host=e.host,this.ssl=e.ssl??lT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TC)throw new Ce(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,s,a,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new YA;switch(a.type){case"firstParty":return new WA(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ce(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const a=oT.get(s);a&&(Re(K2,"Removing Datastore"),oT.delete(s),a.terminate())})(this),Promise.resolve()}}function J2(n,e,s,a={}){n=Nl(n,ef);const o=Ep(e),u=n._getSettings(),h={...u,emulatorOptions:n._getEmulatorOptions()},g=`${e}:${s}`;o&&(Sx(`https://${g}`),Ax("Firestore",!0)),u.host!==O0&&u.host!==g&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:g,ssl:o,emulatorOptions:a};if(!yd(v,h)&&(n._setSettings(v),a.mockUserToken)){let _,S;if(typeof a.mockUserToken=="string")_=a.mockUserToken,S=es.MOCK_USER;else{_=Nx(a.mockUserToken,n._app?.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new Ce(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new es(w)}n._authCredentials=new $A(new Sb(_,S))}}class Ml{constructor(e,s,a){this.converter=s,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class Sn{constructor(e,s,a){this.converter=s,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}toJSON(){return{type:Sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,a){if(Yc(s,Sn._jsonSchema))return new Sn(e,a||null,new Be(Ht.fromString(s.referencePath)))}}Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:vn("string",Sn._jsonSchemaVersion),referencePath:vn("string")};class _r extends Ml{constructor(e,s,a){super(e,s,Fb(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Be(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function Z2(n,e,...s){if(n=wa(n),Nb("collection","path",e),n instanceof ef){const a=Ht.fromString(e,...s);return bv(a),new _r(n,null,a)}{if(!(n instanceof Sn||n instanceof _r))throw new Ce(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ht.fromString(e,...s));return bv(a),new _r(n.firestore,null,a)}}function po(n,e,...s){if(n=wa(n),arguments.length===1&&(e=bp.newId()),Nb("doc","path",e),n instanceof ef){const a=Ht.fromString(e,...s);return Tv(a),new Sn(n,null,new Be(a))}{if(!(n instanceof Sn||n instanceof _r))throw new Ce(me.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ht.fromString(e,...s));return Tv(a),new Sn(n.firestore,n instanceof _r?n.converter:null,new Be(a))}}const uT="AsyncQueue";class dT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new g0(this,"async_queue_retry"),this._c=()=>{const a=bm();a&&Re(uT,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const s=bm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=bm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;Re(uT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Ra("INTERNAL UNHANDLED ERROR: ",fT(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=s,s}enqueueAfterDelay(e,s,a){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Pp.createAndSchedule(this,e,s,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Xe(47125,{Pc:fT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,a)=>s.targetTimeMs-a.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function fT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class tf extends ef{constructor(e,s,a,o){super(e,s,a,o),this.type="firestore",this._queue=new dT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dT(e),this._firestoreClient=void 0,await e}}}function eI(n,e){const s=typeof n=="object"?n:hb(),a=typeof n=="string"?n:Td,o=Pd(s,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Tx("firestore");u&&J2(o,...u)}return o}function M0(n){if(n._terminated)throw new Ce(me.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||tI(n),n._firestoreClient}function tI(n){const e=n._freezeSettings(),s=W2(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new H2(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(n._componentsProvider))}class ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ci(Gn.fromBase64String(e))}catch(s){throw new Ce(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ci(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,ci._jsonSchema))return ci.fromBase64String(e.bytes)}}ci._jsonSchemaVersion="firestore/bytes/1.0",ci._jsonSchema={type:vn("string",ci._jsonSchemaVersion),bytes:vn("string")};class U0{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Ce(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class V0{constructor(e){this._methodName=e}}class Hi{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Ce(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Ce(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:vn("string",Hi._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};class Ti{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Ti(e.vectorValues);throw new Ce(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:vn("string",Ti._jsonSchemaVersion),vectorValues:vn("object")};const nI=/^__.*__$/;class sI{constructor(e,s,a){this.data=e,this.fieldMask=s,this.fieldTransforms=a}toMutation(e,s){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,s,this.fieldTransforms):new Qc(e,this.data,s,this.fieldTransforms)}}function B0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{dataSource:n})}}class Xp{constructor(e,s,a,o,u,h){this.settings=e,this.databaseId=s,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Xp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const s=this.path?.child(e),a=this.contextWith({path:s,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const s=this.path?.child(e),a=this.contextWith({path:s,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return kd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(B0(this.dataSource)&&nI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iI{constructor(e,s,a){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=a||Wd(e)}createContext(e,s,a,o=!1){return new Xp({dataSource:e,methodName:s,targetDoc:a,path:Hn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q0(n){const e=n._freezeSettings(),s=Wd(n._databaseId);return new iI(n._databaseId,!!e.ignoreUndefinedProperties,s)}function aI(n,e,s,a,o,u={}){const h=n.createContext(u.merge||u.mergeFields?2:0,e,s,o);z0("Data must be an object, but it was:",h,a);const g=P0(a,h);let v,_;if(u.merge)v=new vi(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const w of u.mergeFields){const C=nf(e,w,s);if(!h.contains(C))throw new Ce(me.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);cI(S,C)||S.push(C)}v=new vi(S),_=h.fieldTransforms.filter((w=>v.covers(w.field)))}else v=null,_=h.fieldTransforms;return new sI(new li(g),v,_)}function rI(n,e,s,a=!1){return Yp(s,n.createContext(a?4:3,e))}function Yp(n,e){if(F0(n=wa(n)))return z0("Unsupported field value:",e,n),P0(n,e);if(n instanceof V0)return(function(a,o){if(!B0(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const g of a){let v=Yp(g,o.childContextForArray(h));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),h++}return{arrayValue:{values:u}}})(n,e)}return(function(a,o){if((a=wa(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return BR(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=$t.fromDate(a);return{timestampValue:Ad(o.serializer,u)}}if(a instanceof $t){const u=new $t(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Ad(o.serializer,u)}}if(a instanceof Hi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ci)return{bytesValue:a0(o.serializer,a._byteString)};if(a instanceof Sn){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Ti)return(function(h,g){const v=h instanceof Ti?h.toArray():h;return{mapValue:{fields:{[jb]:{stringValue:Db},[bd]:{arrayValue:{values:v.map((S=>{if(typeof S!="number")throw g.createError("VectorValues must only contain numeric values.");return Rp(g.serializer,S)}))}}}}}})(a,o);if(f0(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Fd(a)}`)})(n,e)}function P0(n,e){const s={};return Ab(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(n,((a,o)=>{const u=Yp(o,e.childContextForField(a));u!=null&&(s[a]=u)})),{mapValue:{fields:s}}}function F0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof Hi||n instanceof ci||n instanceof Sn||n instanceof V0||n instanceof Ti||f0(n))}function z0(n,e,s){if(!F0(s)||!wb(s)){const a=Fd(s);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function nf(n,e,s){if((e=wa(e))instanceof U0)return e._internalPath;if(typeof e=="string")return lI(n,e);throw kd("Field path arguments must be of type string or ",n,!1,void 0,s)}const oI=new RegExp("[~\\*/\\[\\]]");function lI(n,e,s){if(e.search(oI)>=0)throw kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new U0(...e.split("."))._internalPath}catch{throw kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function kd(n,e,s,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;s&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||h)&&(v+=" (found",u&&(v+=` in field ${a}`),h&&(v+=` in document ${o}`),v+=")"),new Ce(me.INVALID_ARGUMENT,g+n+v)}function cI(n,e){return n.some((s=>s.isEqual(e)))}class uI{convertValue(e,s="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const a={};return uo(e,((o,u)=>{a[o]=this.convertValue(u,s)})),a}convertVectorValue(e){const s=e.fields?.[bd].arrayValue?.values?.map((a=>dn(a.doubleValue)));return new Ti(s)}convertGeoPoint(e){return new Hi(dn(e.latitude),dn(e.longitude))}convertArray(e,s){return(e.values||[]).map((a=>this.convertValue(a,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const a=Gd(e);return a==null?null:this.convertValue(a,s);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const s=Er(e);return new $t(s.seconds,s.nanos)}convertDocumentKey(e,s){const a=Ht.fromString(e);It(d0(a),9688,{name:e});const o=new qc(a.get(1),a.get(3)),u=new Be(a.popFirst(5));return o.isEqual(s)||Ra(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}class dI extends uI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ci(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,s)}}const hT="@firebase/firestore",mT="4.10.0";class H0{constructor(e,s,a,o,u){this._firestore=e,this._userDataWriter=s,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const s=this._document.data.field(nf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class fI extends H0{data(){return super.data()}}function hI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $p{}class mI extends $p{}function pI(n,e,...s){let a=[];e instanceof $p&&a.push(e),a=a.concat(s),(function(u){const h=u.filter((v=>v instanceof Qp)).length,g=u.filter((v=>v instanceof sf)).length;if(h>1||h>0&&g>0)throw new Ce(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)n=o._apply(n);return n}class sf extends mI{constructor(e,s,a){super(),this._field=e,this._op=s,this._value=a,this.type="where"}static _create(e,s,a){return new sf(e,s,a)}_apply(e){const s=this._parse(e);return G0(e._query,s),new Ml(e.firestore,e.converter,Wm(e._query,s))}_parse(e){const s=q0(e.firestore);return(function(u,h,g,v,_,S,w){let C;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Ce(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){gT(w,S);const X=[];for(const O of w)X.push(_T(v,u,O));C={arrayValue:{values:X}}}else C=_T(v,u,w)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||gT(w,S),C=rI(g,h,w,S==="in"||S==="not-in");return En.create(_,S,C)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function pT(n,e,s){const a=e,o=nf("where",n);return sf._create(o,a,s)}class Qp extends $p{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Qp(e,s)}_parse(e){const s=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return s.length===1?s[0]:bi.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,u){let h=o;const g=u.getFlattenedFilters();for(const v of g)G0(h,v),h=Wm(h,v)})(e._query,s),new Ml(e.firestore,e.converter,Wm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _T(n,e,s){if(typeof(s=wa(s))=="string"){if(s==="")throw new Ce(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zb(e)&&s.indexOf("/")!==-1)throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const a=e.path.child(Ht.fromString(s));if(!Be.isDocumentKey(a))throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Iv(n,new Be(a))}if(s instanceof Sn)return Iv(n,s._key);throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(s)}.`)}function gT(n,e){if(!Array.isArray(n)||n.length===0)throw new Ce(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G0(n,e){const s=(function(o,u){for(const h of o)for(const g of h.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Ce(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}function _I(n,e,s){let a;return a=n?n.toFirestore(e):e,a}class od{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class El extends H0{constructor(e,s,a,o,u,h){super(e,s,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const a=this._document.data.field(nf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=El._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}El._jsonSchemaVersion="firestore/documentSnapshot/1.0",El._jsonSchema={type:vn("string",El._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class pd extends El{data(e={}){return super.data(e)}}class vl{constructor(e,s,a,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new od(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((a=>{e.call(s,new pd(this._firestore,this._userDataWriter,a.key,a,new od(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Ce(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const v=new pd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new od(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const v=new pd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new od(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return g.type!==0&&(_=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),S=h.indexOf(g.doc.key)),{type:gI(g.type),doc:v,oldIndex:_,newIndex:S}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:n})}}vl._jsonSchemaVersion="firestore/querySnapshot/1.0",vl._jsonSchema={type:vn("string",vl._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};function yI(n){n=Nl(n,Ml);const e=Nl(n.firestore,tf),s=M0(e),a=new dI(e);return hI(n._query),$2(s,n._query).then((o=>new vl(e,a,n,o)))}function Kp(n,e,s){n=Nl(n,Sn);const a=Nl(n.firestore,tf),o=_I(n.converter,e),u=q0(a);return X0(a,[aI(u,"setDoc",n._key,o,n.converter!==null,s).toMutation(n._key,Fi.none())])}function af(n){return X0(Nl(n.firestore,tf),[new Cp(n._key,Fi.none())])}function X0(n,e){const s=M0(n);return Q2(s,e)}(function(e,s=!0){XA(jA),gr(new xa("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),g=new tf(new QA(a.getProvider("auth-internal")),new JA(h,a.getProvider("app-check-internal")),pR(h,o),h);return u={useFetchStreams:s,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),qi(hT,mT,e),qi(hT,mT,"esm2020")})();const Y0="@firebase/installations",Wp="0.6.19";const $0=1e4,Q0=`w:${Wp}`,K0="FIS_v2",EI="https://firebaseinstallations.googleapis.com/v1",vI=3600*1e3,TI="installations",bI="Installations";const SI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ro=new Bd(TI,bI,SI);function W0(n){return n instanceof co&&n.code.includes("request-failed")}function J0({projectId:n}){return`${EI}/projects/${n}/installations`}function Z0(n){return{token:n.token,requestStatus:2,expiresIn:wI(n.expiresIn),creationTime:Date.now()}}async function e1(n,e){const a=(await e.json()).error;return ro.create("request-failed",{requestName:n,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function t1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function NI(n,{refreshToken:e}){const s=t1(n);return s.append("Authorization",xI(e)),s}async function n1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function wI(n){return Number(n.replace("s","000"))}function xI(n){return`${K0} ${n}`}async function AI({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const a=J0(n),o=t1(n),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={fid:s,authVersion:K0,appId:n.appId,sdkVersion:Q0},g={method:"POST",headers:o,body:JSON.stringify(h)},v=await n1(()=>fetch(a,g));if(v.ok){const _=await v.json();return{fid:_.fid||s,registrationStatus:2,refreshToken:_.refreshToken,authToken:Z0(_.authToken)}}else throw await e1("Create Installation",v)}function s1(n){return new Promise(e=>{setTimeout(e,n)})}function RI(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const CI=/^[cdef][\w-]{21}$/,lp="";function II(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=kI(n);return CI.test(s)?s:lp}catch{return lp}}function kI(n){return RI(n).substr(0,22)}function rf(n){return`${n.appName}!${n.appId}`}const i1=new Map;function a1(n,e){const s=rf(n);r1(s,e),LI(s,e)}function r1(n,e){const s=i1.get(n);if(s)for(const a of s)a(e)}function LI(n,e){const s=jI();s&&s.postMessage({key:n,fid:e}),DI()}let so=null;function jI(){return!so&&"BroadcastChannel"in self&&(so=new BroadcastChannel("[Firebase] FID Change"),so.onmessage=n=>{r1(n.data.key,n.data.fid)}),so}function DI(){i1.size===0&&so&&(so.close(),so=null)}const OI="firebase-installations-database",MI=1,oo="firebase-installations-store";let Nm=null;function Jp(){return Nm||(Nm=qd(OI,MI,{upgrade:(n,e)=>{e===0&&n.createObjectStore(oo)}})),Nm}async function Ld(n,e){const s=rf(n),o=(await Jp()).transaction(oo,"readwrite"),u=o.objectStore(oo),h=await u.get(s);return await u.put(e,s),await o.done,(!h||h.fid!==e.fid)&&a1(n,e.fid),e}async function o1(n){const e=rf(n),a=(await Jp()).transaction(oo,"readwrite");await a.objectStore(oo).delete(e),await a.done}async function of(n,e){const s=rf(n),o=(await Jp()).transaction(oo,"readwrite"),u=o.objectStore(oo),h=await u.get(s),g=e(h);return g===void 0?await u.delete(s):await u.put(g,s),await o.done,g&&(!h||h.fid!==g.fid)&&a1(n,g.fid),g}async function Zp(n){let e;const s=await of(n.appConfig,a=>{const o=UI(a),u=VI(n,o);return e=u.registrationPromise,u.installationEntry});return s.fid===lp?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function UI(n){const e=n||{fid:II(),registrationStatus:0};return l1(e)}function VI(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ro.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=BI(n,s);return{installationEntry:s,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qI(n)}:{installationEntry:e}}async function BI(n,e){try{const s=await AI(n,e);return Ld(n.appConfig,s)}catch(s){throw W0(s)&&s.customData.serverCode===409?await o1(n.appConfig):await Ld(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function qI(n){let e=await yT(n.appConfig);for(;e.registrationStatus===1;)await s1(100),e=await yT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:a}=await Zp(n);return a||s}return e}function yT(n){return of(n,e=>{if(!e)throw ro.create("installation-not-found");return l1(e)})}function l1(n){return PI(n)?{fid:n.fid,registrationStatus:0}:n}function PI(n){return n.registrationStatus===1&&n.registrationTime+$0<Date.now()}async function FI({appConfig:n,heartbeatServiceProvider:e},s){const a=zI(n,s),o=NI(n,s),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const h={installation:{sdkVersion:Q0,appId:n.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},v=await n1(()=>fetch(a,g));if(v.ok){const _=await v.json();return Z0(_)}else throw await e1("Generate Auth Token",v)}function zI(n,{fid:e}){return`${J0(n)}/${e}/authTokens:generate`}async function e_(n,e=!1){let s;const a=await of(n.appConfig,u=>{if(!c1(u))throw ro.create("not-registered");const h=u.authToken;if(!e&&XI(h))return u;if(h.requestStatus===1)return s=HI(n,e),u;{if(!navigator.onLine)throw ro.create("app-offline");const g=$I(u);return s=GI(n,g),g}});return s?await s:a.authToken}async function HI(n,e){let s=await ET(n.appConfig);for(;s.authToken.requestStatus===1;)await s1(100),s=await ET(n.appConfig);const a=s.authToken;return a.requestStatus===0?e_(n,e):a}function ET(n){return of(n,e=>{if(!c1(e))throw ro.create("not-registered");const s=e.authToken;return QI(s)?{...e,authToken:{requestStatus:0}}:e})}async function GI(n,e){try{const s=await FI(n,e),a={...e,authToken:s};return await Ld(n.appConfig,a),s}catch(s){if(W0(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await o1(n.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Ld(n.appConfig,a)}throw s}}function c1(n){return n!==void 0&&n.registrationStatus===2}function XI(n){return n.requestStatus===2&&!YI(n)}function YI(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+vI}function $I(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function QI(n){return n.requestStatus===1&&n.requestTime+$0<Date.now()}async function KI(n){const e=n,{installationEntry:s,registrationPromise:a}=await Zp(e);return a?a.catch(console.error):e_(e).catch(console.error),s.fid}async function WI(n,e=!1){const s=n;return await JI(s),(await e_(s,e)).token}async function JI(n){const{registrationPromise:e}=await Zp(n);e&&await e}function ZI(n){if(!n||!n.options)throw wm("App Configuration");if(!n.name)throw wm("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw wm(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function wm(n){return ro.create("missing-app-config-values",{valueName:n})}const u1="installations",ek="installations-internal",tk=n=>{const e=n.getProvider("app").getImmediate(),s=ZI(e),a=Pd(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},nk=n=>{const e=n.getProvider("app").getImmediate(),s=Pd(e,u1).getImmediate();return{getId:()=>KI(s),getToken:o=>WI(s,o)}};function sk(){gr(new xa(u1,tk,"PUBLIC")),gr(new xa(ek,nk,"PRIVATE"))}sk();qi(Y0,Wp);qi(Y0,Wp,"esm2020");const ik="/firebase-messaging-sw.js",ak="/firebase-cloud-messaging-push-scope",d1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rk="https://fcmregistrations.googleapis.com/v1",f1="google.c.a.c_id",ok="google.c.a.c_l",lk="google.c.a.ts",ck="google.c.a.e",vT=1e4;var TT;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(TT||(TT={}));var Hc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Hc||(Hc={}));function Ea(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uk(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(s),o=new Uint8Array(a.length);for(let u=0;u<a.length;++u)o[u]=a.charCodeAt(u);return o}const xm="fcm_token_details_db",dk=5,bT="fcm_token_object_Store";async function fk(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(xm))return null;let e=null;return(await qd(xm,dk,{upgrade:async(a,o,u,h)=>{if(o<2||!a.objectStoreNames.contains(bT))return;const g=h.objectStore(bT),v=await g.index("fcmSenderId").get(n);if(await g.clear(),!!v){if(o===2){const _=v;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:_.createTime??Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:Ea(_.vapidKey)}}}else if(o===3){const _=v;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:Ea(_.auth),p256dh:Ea(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:Ea(_.vapidKey)}}}else if(o===4){const _=v;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:Ea(_.auth),p256dh:Ea(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:Ea(_.vapidKey)}}}}}})).close(),await _m(xm),await _m("fcm_vapid_details_db"),await _m("undefined"),hk(e)?e:null}function hk(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const mk="firebase-messaging-database",pk=1,Gc="firebase-messaging-store";let Am=null;function h1(){return Am||(Am=qd(mk,pk,{upgrade:(n,e)=>{e===0&&n.createObjectStore(Gc)}})),Am}async function _k(n){const e=m1(n),a=await(await h1()).transaction(Gc).objectStore(Gc).get(e);if(a)return a;{const o=await fk(n.appConfig.senderId);if(o)return await t_(n,o),o}}async function t_(n,e){const s=m1(n),o=(await h1()).transaction(Gc,"readwrite");return await o.objectStore(Gc).put(e,s),await o.done,e}function m1({appConfig:n}){return n.appId}const gk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ns=new Bd("messaging","Messaging",gk);async function yk(n,e){const s=await s_(n),a=p1(e),o={method:"POST",headers:s,body:JSON.stringify(a)};let u;try{u=await(await fetch(n_(n.appConfig),o)).json()}catch(h){throw ns.create("token-subscribe-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ns.create("token-subscribe-failed",{errorInfo:h})}if(!u.token)throw ns.create("token-subscribe-no-token");return u.token}async function Ek(n,e){const s=await s_(n),a=p1(e.subscriptionOptions),o={method:"PATCH",headers:s,body:JSON.stringify(a)};let u;try{u=await(await fetch(`${n_(n.appConfig)}/${e.token}`,o)).json()}catch(h){throw ns.create("token-update-failed",{errorInfo:h?.toString()})}if(u.error){const h=u.error.message;throw ns.create("token-update-failed",{errorInfo:h})}if(!u.token)throw ns.create("token-update-no-token");return u.token}async function vk(n,e){const a={method:"DELETE",headers:await s_(n)};try{const u=await(await fetch(`${n_(n.appConfig)}/${e}`,a)).json();if(u.error){const h=u.error.message;throw ns.create("token-unsubscribe-failed",{errorInfo:h})}}catch(o){throw ns.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}}function n_({projectId:n}){return`${rk}/projects/${n}/registrations`}async function s_({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function p1({p256dh:n,auth:e,endpoint:s,vapidKey:a}){const o={web:{endpoint:s,auth:e,p256dh:n}};return a!==d1&&(o.web.applicationPubKey=a),o}const Tk=10080*60*1e3;async function bk(n){const e=await Nk(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ea(e.getKey("auth")),p256dh:Ea(e.getKey("p256dh"))},a=await _k(n.firebaseDependencies);if(a){if(wk(a.subscriptionOptions,s))return Date.now()>=a.createTime+Tk?Sk(n,{token:a.token,createTime:Date.now(),subscriptionOptions:s}):a.token;try{await vk(n.firebaseDependencies,a.token)}catch(o){console.warn(o)}return ST(n.firebaseDependencies,s)}else return ST(n.firebaseDependencies,s)}async function Sk(n,e){try{const s=await Ek(n.firebaseDependencies,e),a={...e,token:s,createTime:Date.now()};return await t_(n.firebaseDependencies,a),s}catch(s){throw s}}async function ST(n,e){const a={token:await yk(n,e),createTime:Date.now(),subscriptionOptions:e};return await t_(n,a),a.token}async function Nk(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uk(e)})}function wk(n,e){const s=e.vapidKey===n.vapidKey,a=e.endpoint===n.endpoint,o=e.auth===n.auth,u=e.p256dh===n.p256dh;return s&&a&&o&&u}function NT(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return xk(e,n),Ak(e,n),Rk(e,n),e}function xk(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const a=e.notification.body;a&&(n.notification.body=a);const o=e.notification.image;o&&(n.notification.image=o);const u=e.notification.icon;u&&(n.notification.icon=u)}function Ak(n,e){e.data&&(n.data=e.data)}function Rk(n,e){if(!e.fcmOptions&&!e.notification?.click_action)return;n.fcmOptions={};const s=e.fcmOptions?.link??e.notification?.click_action;s&&(n.fcmOptions.link=s);const a=e.fcmOptions?.analytics_label;a&&(n.fcmOptions.analyticsLabel=a)}function Ck(n){return typeof n=="object"&&!!n&&f1 in n}function Ik(n){if(!n||!n.options)throw Rm("App Configuration Object");if(!n.name)throw Rm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const a of e)if(!s[a])throw Rm(a);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function Rm(n){return ns.create("missing-app-config-values",{valueName:n})}class kk{constructor(e,s,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=Ik(e);this.firebaseDependencies={app:e,appConfig:o,installations:s,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function Lk(n){try{n.swRegistration=await navigator.serviceWorker.register(ik,{scope:ak}),n.swRegistration.update().catch(()=>{}),await jk(n.swRegistration)}catch(e){throw ns.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function jk(n){return new Promise((e,s)=>{const a=setTimeout(()=>s(new Error(`Service worker not registered after ${vT} ms`)),vT),o=n.installing||n.waiting;n.active?(clearTimeout(a),e()):o?o.onstatechange=u=>{u.target?.state==="activated"&&(o.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),s(new Error("No incoming service worker found.")))})}async function Dk(n,e){if(!e&&!n.swRegistration&&await Lk(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ns.create("invalid-sw-registration");n.swRegistration=e}}async function Ok(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=d1)}async function _1(n,e){if(!navigator)throw ns.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ns.create("permission-blocked");return await Ok(n,e?.vapidKey),await Dk(n,e?.serviceWorkerRegistration),bk(n)}async function Mk(n,e,s){const a=Uk(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:s[f1],message_name:s[ok],message_time:s[lk],message_device_time:Math.floor(Date.now()/1e3)})}function Uk(n){switch(n){case Hc.NOTIFICATION_CLICKED:return"notification_open";case Hc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function Vk(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===Hc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(NT(s)):n.onMessageHandler.next(NT(s)));const a=s.data;Ck(a)&&a[ck]==="1"&&await Mk(n,s.messageType,a)}const wT="@firebase/messaging",xT="0.12.23";const Bk=n=>{const e=new kk(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>Vk(e,s)),e},qk=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:a=>_1(e,a)}};function Pk(){gr(new xa("messaging",Bk,"PUBLIC")),gr(new xa("messaging-internal",qk,"PRIVATE")),qi(wT,xT),qi(wT,xT,"esm2020")}async function g1(){try{await lb()}catch{return!1}return typeof window<"u"&&ob()&&kx()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Fk(n,e){if(!navigator)throw ns.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}function zk(n=hb()){return g1().then(e=>{if(!e)throw ns.create("unsupported-browser")},e=>{throw ns.create("indexed-db-unsupported")}),Pd(wa(n),"messaging").getImmediate()}async function Hk(n,e){return n=wa(n),_1(n,e)}function Gk(n,e){return n=wa(n),Fk(n,e)}Pk();const _d={apiKey:"AIzaSyA3dJLU8Xw6vcqXtOhVbuI5aO_ImdT8upg",authDomain:"goal-game-7ad53.firebaseapp.com",projectId:"goal-game-7ad53",storageBucket:"goal-game-7ad53.firebasestorage.app",messagingSenderId:"86507800050",appId:"1:86507800050:web:f7674a55bc2291686f976b"},y1="BLD2XB0Bh-Y2EwwHU1YimB6-tzKQNrGh-bzoZHXbSWlvQt1mg6K5c7EJWfBIDrGY0cQJXO4LNrKD9MjlZhMsb3c";let Cm=null,Im=null,ld=null;function Yi(){return!!(_d.apiKey&&_d.projectId&&_d.messagingSenderId&&y1)}function E1(){if(!Cm){if(!Yi())throw new Error("Firebase is not configured. Please add your Firebase config to .env file.");Cm=fb(_d)}return Cm}function _o(){return Im||(Im=eI(E1())),Im}async function v1(){return ld||(await g1()?(ld=zk(E1()),ld):(console.warn("Firebase Messaging is not supported in this browser"),null))}function Ia(){let n=localStorage.getItem("goal-game-device-id");return n||(n=crypto.randomUUID(),localStorage.setItem("goal-game-device-id",n)),n}const Cl="scheduled_notifications",T1="fcm_tokens";async function Xk(n,e,s,a,o,u){if(!Yi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const h=_o(),g=Ia(),v=new Date(`${s}T${a}`),_=new Date(v.getTime()-o*60*1e3);if(_<=new Date)return console.warn("Notification trigger time is in the past, skipping"),null;const S=`${g}_event_${n}`,w={id:S,eventId:n,eventTitle:e,eventDate:s,eventTime:a,triggerAt:_.toISOString(),fcmToken:u,deviceId:g,status:"pending",createdAt:new Date().toISOString(),notificationType:"event"};try{return await Kp(po(h,Cl,S),w),S}catch(C){return console.error("Failed to schedule notification:",C),null}}async function Yk(n,e,s,a,o){if(!Yi())return console.warn("Firebase not configured, skipping notification scheduling"),null;const u=_o(),h=Ia(),g=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z",v=new Date(g);if(v<=new Date)return console.warn("Buff expiry time is in the past, skipping notification"),null;const _=`${h}_buff_${n}`,S={id:_,buffLogId:n,buffName:e,buffType:s,triggerAt:v.toISOString(),fcmToken:o,deviceId:h,status:"pending",createdAt:new Date().toISOString(),notificationType:"buff_expiry"};try{return await Kp(po(u,Cl,_),S),_}catch(w){return console.error("Failed to schedule buff expiry notification:",w),null}}async function $k(n){if(!Yi())return;const e=_o(),a=`${Ia()}_buff_${n}`;try{await af(po(e,Cl,a))}catch(o){console.error("Failed to cancel buff expiry notification:",o)}}async function Qk(n){if(!Yi())return;const e=_o(),a=`${Ia()}_event_${n}`;try{await af(po(e,Cl,a))}catch(o){console.error("Failed to cancel notification:",o)}}async function Kk(){if(!Yi())return;const n=_o(),e=Ia();try{const s=pI(Z2(n,Cl),pT("deviceId","==",e),pT("status","==","pending")),o=(await yI(s)).docs.map(u=>af(po(n,Cl,u.id)));await Promise.all(o)}catch(s){console.error("Failed to cancel all notifications:",s)}}async function Wk(n){if(!Yi())return;const e=_o(),s=Ia();try{await Kp(po(e,T1,s),{token:n,deviceId:s,updatedAt:new Date().toISOString(),platform:navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?"ios":navigator.userAgent.includes("Android")?"android":"web"})}catch(a){console.error("Failed to save FCM token:",a)}}async function Jk(){if(!Yi())return;const n=_o(),e=Ia();try{await af(po(n,T1,e))}catch(s){console.error("Failed to delete FCM token:",s)}}function Zk(){return"Notification"in window?Notification.permission:"unsupported"}function i_(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function a_(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}function r_(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function eL(){return a_()&&!r_()?!1:i_()}async function tL(){if(!Yi())return{success:!1,token:null,error:"Firebase is not configured"};if(!i_())return{success:!1,token:null,error:"Notifications are not supported in this browser"};if(a_()&&!r_())return{success:!1,token:null,error:"On iOS, you must add this app to your home screen first, then enable notifications"};try{if(await Notification.requestPermission()!=="granted")return{success:!1,token:null,error:"Notification permission was denied"};const e=await v1();if(!e)return{success:!1,token:null,error:"Failed to initialize Firebase Messaging"};const s=await navigator.serviceWorker.ready,a=await Hk(e,{vapidKey:y1,serviceWorkerRegistration:s});return a?(await Wk(a),{success:!0,token:a}):{success:!1,token:null,error:"Failed to get FCM token"}}catch(n){return console.error("Error requesting notification permission:",n),{success:!1,token:null,error:n instanceof Error?n.message:"Unknown error occurred"}}}async function nL(){try{await Jk(),await Kk()}catch(n){console.error("Error disabling notifications:",n)}}function sL(n){let e=null;return v1().then(s=>{s&&(e=Gk(s,a=>{if(console.log("Foreground message received:",a),n(a),a.notification){const{title:o,body:u}=a.notification;o&&new Notification(o,{body:u||"",icon:"/goal-game/icons/icon-192.png",badge:"/goal-game/icons/icon-192.png",tag:a.data?.eventId||"goal-game-notification"})}}))}),()=>{e&&e()}}function b1(){const n=re(),e=Ia(),s=n.exec("SELECT enabled, default_reminder_minutes, fcm_token, device_id FROM notification_settings WHERE id = 1");if(s.length===0||s[0].values.length===0)return n.run("INSERT OR REPLACE INTO notification_settings (id, enabled, default_reminder_minutes, fcm_token, device_id) VALUES (1, 0, 15, NULL, ?)",[e]),{enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:e};const a=s[0].values[0];return{enabled:!!a[0],defaultReminderMinutes:a[1],fcmToken:a[2],deviceId:a[3]}}async function km(n){const e=re(),s=Ia(),o={...b1(),...n};e.run(`UPDATE notification_settings SET
      enabled = ?,
      default_reminder_minutes = ?,
      fcm_token = ?,
      device_id = ?,
      updated_at = datetime('now')
    WHERE id = 1`,[o.enabled?1:0,o.defaultReminderMinutes,o.fcmToken,s]),await ye()}function S1(){const[n,e]=j.useState({enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:""}),[s,a]=j.useState("default"),[o,u]=j.useState(!1),[h,g]=j.useState(null),v=i_(),_=Yi(),S=eL(),w=a_(),C=r_();j.useEffect(()=>{try{const ie=b1();e(ie),a(Zk())}catch(ie){console.error("Failed to load notification settings:",ie)}},[]),j.useEffect(()=>!n.enabled||!n.fcmToken?void 0:sL(_e=>{console.log("Notification received in foreground:",_e)}),[n.enabled,n.fcmToken]);const q=j.useCallback(async()=>{u(!0),g(null);try{const ie=await tL();return ie.success?(await km({enabled:!0,fcmToken:ie.token}),e(_e=>({..._e,enabled:!0,fcmToken:ie.token})),a("granted"),!0):(g(ie.error||"Failed to enable notifications"),!1)}catch(ie){const _e=ie instanceof Error?ie.message:"Unknown error";return g(_e),!1}finally{u(!1)}},[]),X=j.useCallback(async()=>{u(!0),g(null);try{await nL(),await km({enabled:!1,fcmToken:null}),e(ie=>({...ie,enabled:!1,fcmToken:null}))}catch(ie){const _e=ie instanceof Error?ie.message:"Unknown error";g(_e)}finally{u(!1)}},[]),O=j.useCallback(async ie=>{await km({defaultReminderMinutes:ie}),e(_e=>({..._e,defaultReminderMinutes:ie}))},[]),V=j.useCallback(async(ie,_e,Te,M,D)=>{!n.enabled||!n.fcmToken||await Xk(ie,_e,Te,M,D,n.fcmToken)},[n.enabled,n.fcmToken]),z=j.useCallback(async ie=>{await Qk(ie)},[]),$=j.useCallback(async(ie,_e,Te,M)=>{!n.enabled||!n.fcmToken||await Yk(ie,_e,Te,M,n.fcmToken)},[n.enabled,n.fcmToken]),Z=j.useCallback(async ie=>{await $k(ie)},[]);return{settings:n,permissionState:s,isSupported:v,isConfigured:_,canEnable:S,isIOS:w,isStandalone:C,loading:o,error:h,enableNotifications:q,disableNotificationsHandler:X,setDefaultReminderMinutes:O,scheduleEventReminder:V,cancelEventReminder:z,scheduleBuffExpiry:$,cancelBuffExpiry:Z}}const iL=[{type:"activate_buffs",title:"Habit Builder",description:"Activate {target} buff(s) today",targetRange:[2,4],xpReward:25},{type:"complete_steps",title:"Step by Step",description:"Complete {target} quest step(s) today",targetRange:[3,7],xpReward:30},{type:"no_debuffs",title:"Clean Slate",description:"Avoid activating any debuffs today",targetRange:[1,1],xpReward:40},{type:"gym_session",title:"Iron Warrior",description:"Complete a gym workout today",targetRange:[1,1],xpReward:35},{type:"early_start",title:"Early Bird",description:"Complete a habit before 8 AM",targetRange:[1,1],xpReward:30},{type:"activate_specific",title:"Wellness Warrior",description:"Activate a health-related buff",targetRange:[1,1],xpReward:20}],AT=50;function Ul(){return new Date().toISOString().split("T")[0]}function RT(n){const e=re(),s=n||Ul(),a=e.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE date = ? ORDER BY id`,[s]);return a.length?a[0].values.map(o=>({id:o[0],date:o[1],quest_type:o[2],title:o[3],description:o[4],target_value:o[5],current_value:o[6],xp_reward:o[7],is_completed:!!o[8],completed_at:o[9]})):[]}function aL(n){const e=re(),s=Ul(),a=e.exec("SELECT id FROM daily_quest_bonus WHERE date = ?",[s]);return a.length>0&&a[0].values.length>0}async function rL(n){const e=re(),s=Ul();e.run("INSERT OR IGNORE INTO daily_quest_bonus (date, claimed_at) VALUES (?, datetime('now'))",[s]),await ye()}async function oL(){const n=re(),e=Ul(),s=RT(e);if(s.length>0)return s;const o=[...iL].sort(()=>Math.random()-.5).slice(0,3);for(const u of o){const h=u.targetRange[0]===u.targetRange[1]?u.targetRange[0]:Math.floor(Math.random()*(u.targetRange[1]-u.targetRange[0]+1))+u.targetRange[0],g=u.description.replace("{target}",h.toString());n.run(`INSERT INTO daily_quests (date, quest_type, title, description, target_value, xp_reward)
       VALUES (?, ?, ?, ?, ?, ?)`,[e,u.type,u.title,g,h,u.xpReward])}return await ye(),RT(e)}async function N1(n,e=1,s){const a=re(),o=s||Ul(),u=a.exec(`SELECT id, current_value, target_value, is_completed FROM daily_quests
     WHERE date = ? AND quest_type = ? AND is_completed = 0`,[o,n]);if(!u.length||!u[0].values.length)return null;const h=u[0].values[0][0],g=u[0].values[0][1],v=u[0].values[0][2],_=g+e,S=_>=v;a.run(`UPDATE daily_quests SET current_value = ?, is_completed = ?, completed_at = ?
     WHERE id = ?`,[_,S?1:0,S?new Date().toISOString():null,h]),await ye();const w=a.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE id = ?`,[h]);if(!w.length)return null;const C=w[0].values[0];return{id:C[0],date:C[1],quest_type:C[2],title:C[3],description:C[4],target_value:C[5],current_value:C[6],xp_reward:C[7],is_completed:!!C[8],completed_at:C[9]}}async function lL(n){const e=re(),s=Ul();(e.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) = ?`,[s])[0]?.values[0]?.[0]||0)===0&&await N1("no_debuffs",1,s)}function cL({grantXP:n}){const[e,s]=j.useState([]),[a,o]=j.useState(!1),[u,h]=j.useState(!0),g=j.useCallback(async()=>{const X=await oL();s(X),o(aL()),h(!1)},[]);j.useEffect(()=>{g()},[g]),j.useEffect(()=>{const O=setInterval(()=>{const V=new Date().toISOString().split("T")[0];e.length>0&&e[0].date!==V&&g()},6e4);return()=>clearInterval(O)},[e,g]);const v=j.useCallback(async(X,O=1)=>{const V=await N1(X,O);return V?.is_completed&&await n(V.xp_reward,`Daily Quest: ${V.title}`,"daily_quest",V.id),await g(),V},[n,g]),_=j.useCallback(async()=>!e.every(O=>O.is_completed)||a?!1:(await rL(),await n(AT,"Daily Quest Bonus: All quests completed!","daily_quest_bonus"),o(!0),!0),[e,a,n]),S=j.useCallback(async()=>{await lL(),await g()},[g]),w=e.every(X=>X.is_completed),C=e.filter(X=>X.is_completed).length,q=e.filter(X=>X.is_completed).reduce((X,O)=>X+O.xp_reward,0);return{quests:e,loading:u,allCompleted:w,completedCount:C,bonusClaimed:a,bonusXp:AT,totalXpEarned:q,refresh:g,updateProgress:v,claimBonus:_,checkNoDebuffs:S}}const w1=[{days:3,title:"Getting Started",bonusXp:15,icon:""},{days:7,title:"One Week Strong",bonusXp:50,icon:""},{days:14,title:"Two Week Warrior",bonusXp:75,icon:""},{days:21,title:"Habit Forming",bonusXp:100,icon:""},{days:30,title:"Monthly Master",bonusXp:150,icon:""},{days:60,title:"Two Month Champion",bonusXp:250,icon:""},{days:90,title:"Quarterly Legend",bonusXp:400,icon:""},{days:180,title:"Half Year Hero",bonusXp:750,icon:""},{days:365,title:"Annual Achiever",bonusXp:1500,icon:""}];function uL(n){return w1.filter(e=>e.days<=n)}function dL(n){const e=uL(n);return e.length>0?e[e.length-1]:null}function x1(){return new Date().toISOString().split("T")[0]}function fL(){const n=new Date;return n.setDate(n.getDate()-1),n.toISOString().split("T")[0]}function A1(n){const e=re(),s=x1(),a=fL(),o=e.exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-400 days')
     ORDER BY d DESC`,[n]),u=o.length?o[0].values.map(V=>V[0]):[],h=e.exec(`SELECT freeze_date FROM streak_freezes
     WHERE buff_definition_id = ? AND freeze_date >= date('now', '-400 days')`,[n]),g=h.length?h[0].values.map(V=>V[0]):[],v=e.exec(`SELECT used_date FROM streak_shield_uses
     WHERE buff_definition_id = ? AND used_date >= date('now', '-400 days')`,[n]),_=v.length?v[0].values.map(V=>V[0]):[];let S=0;const w=new Set([...u,...g,..._]);let C=s;if(!w.has(s))if(w.has(a))C=a;else if(g.includes(s))C=s;else return{buffDefinitionId:n,currentStreak:0,longestStreak:CT(n),lastActivatedDate:u[0]||null,isAtRisk:u.length>0&&u[0]===a,shieldActive:!1};for(;w.has(C);){S++;const V=new Date(C+"T12:00:00");V.setDate(V.getDate()-1),C=V.toISOString().split("T")[0]}const q=!u.includes(s)&&!g.includes(s)&&u.includes(a),X=_.includes(s),O=CT(n);return S>O&&hL(n,S),{buffDefinitionId:n,currentStreak:S,longestStreak:Math.max(S,O),lastActivatedDate:u[0]||null,isAtRisk:q,shieldActive:X}}function CT(n){const s=re().exec("SELECT longest_streak FROM streak_records WHERE buff_definition_id = ?",[n]);return s.length&&s[0].values.length?s[0].values[0][0]:0}async function hL(n,e){re().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, updated_at)
     VALUES (?, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       longest_streak = MAX(longest_streak, excluded.longest_streak),
       updated_at = datetime('now')`,[n,e]),await ye()}function R1(){const e=re().exec("SELECT SUM(quantity) FROM streak_shields");return e.length&&e[0].values.length&&e[0].values[0][0]||0}async function mL(n){re().run("INSERT INTO streak_shields (quantity) VALUES (?)",[n]),await ye()}async function pL(n){const e=re(),s=x1();if(R1()<=0)return!1;const o=e.exec("SELECT id FROM streak_shield_uses WHERE buff_definition_id = ? AND used_date = ?",[n,s]);if(o.length&&o[0].values.length)return!1;const u=A1(n);return e.run(`UPDATE streak_shields SET quantity = quantity - 1
     WHERE id = (SELECT id FROM streak_shields WHERE quantity > 0 ORDER BY earned_at LIMIT 1)`),e.run(`INSERT INTO streak_shield_uses (buff_definition_id, used_date, streak_saved)
     VALUES (?, ?, ?)`,[n,s,u.currentStreak]),e.run("DELETE FROM streak_shields WHERE quantity <= 0"),await ye(),!0}function _L(n){const s=re().exec(`SELECT id, buff_definition_id, freeze_date, reason, created_at
     FROM streak_freezes WHERE buff_definition_id = ? AND freeze_date >= date('now')
     ORDER BY freeze_date`,[n]);return s.length?s[0].values.map(a=>({id:a[0],buff_definition_id:a[1],freeze_date:a[2],reason:a[3],created_at:a[4]})):[]}async function gL(n,e,s){re().run(`INSERT OR IGNORE INTO streak_freezes (buff_definition_id, freeze_date, reason)
     VALUES (?, ?, ?)`,[n,e,s||null]),await ye()}async function yL(n){re().run("DELETE FROM streak_freezes WHERE id = ?",[n]),await ye()}function EL(n){const s=re().exec("SELECT last_milestone_claimed FROM streak_records WHERE buff_definition_id = ?",[n]);return s.length&&s[0].values.length?s[0].values[0][0]:0}async function vL(n,e){re().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, last_milestone_claimed, updated_at)
     VALUES (?, 0, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       last_milestone_claimed = ?,
       updated_at = datetime('now')`,[n,e,e]),await ye()}function IT(n,e){const s=EL(n);return w1.filter(a=>a.days<=e&&a.days>s)}function TL(){const e=re().exec("SELECT DISTINCT definition_id FROM buff_log WHERE definition_id IN (SELECT id FROM buff_definitions WHERE type = ?)",["buff"]),s=new Map;if(!e.length)return s;for(const a of e[0].values){const o=a[0];s.set(o,A1(o))}return s}function bL({grantXP:n}){const[e,s]=j.useState(new Map),[a,o]=j.useState(0),[u,h]=j.useState(!0),g=j.useCallback(()=>{s(TL()),o(R1()),h(!1)},[]);j.useEffect(()=>{g()},[g]);const v=j.useCallback(V=>e.get(V)||{buffDefinitionId:V,currentStreak:0,longestStreak:0,lastActivatedDate:null,isAtRisk:!1,shieldActive:!1},[e]),_=j.useCallback(async V=>{const z=await pL(V);return z&&g(),z},[g]),S=j.useCallback(async(V,z,$)=>{await gL(V,z,$),g()},[g]),w=j.useCallback(async V=>{await yL(V),g()},[g]),C=j.useCallback(V=>_L(V),[]),q=j.useCallback(async V=>{const z=v(V),$=IT(V,z.currentStreak);for(const Z of $)await n(Z.bonusXp,`Streak Milestone: ${Z.title} (${Z.days} days)`,"streak_milestone",V),await vL(V,Z.days);return g(),$},[v,n,g]),X=j.useCallback(V=>{const z=v(V);return IT(V,z.currentStreak)},[v]),O=j.useCallback(async V=>{await mL(V),g()},[g]);return{streakInfos:e,shieldCount:a,loading:u,refresh:g,getStreakForBuff:v,useShield:_,addFreeze:S,removeFreeze:w,getFreezes:C,claimMilestones:q,getUnclaimedMilestones:X,addShields:O}}const kT=[{type:"procrastination_dragon",name:"Procrastination Dragon",description:"A lazy beast that feeds on delayed tasks and broken promises.",icon:"",hpRange:[400,500],xpReward:200,bonusShields:1,difficulty:"medium"},{type:"distraction_demon",name:"Distraction Demon",description:"A cunning fiend that lures you away from your goals with endless diversions.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"},{type:"sloth_specter",name:"Sloth Specter",description:"A ghostly presence that drains your energy and willpower.",icon:"",hpRange:[300,400],xpReward:150,bonusShields:0,difficulty:"easy"},{type:"chaos_chimera",name:"Chaos Chimera",description:"A multi-headed monster representing disorganization and scattered focus.",icon:"",hpRange:[500,600],xpReward:250,bonusShields:2,difficulty:"hard"},{type:"anxiety_wyrm",name:"Anxiety Wyrm",description:"A serpentine creature that coils around your mind with worry and doubt.",icon:"",hpRange:[450,550],xpReward:225,bonusShields:1,difficulty:"hard"},{type:"comfort_zone_golem",name:"Comfort Zone Golem",description:"A stubborn construct that blocks the path to growth and change.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"}],ml={step_completed:10,buff_activated:25,quest_completed:50,goal_completed:100,daily_quest_completed:15,focus_session:20,routine_completed:30};function jd(n=new Date){const e=new Date(n),s=e.getDay(),a=e.getDate()-s+(s===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function SL(n){const e=new Date(n+"T12:00:00");return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}function LT(){const n=re(),e=jd(),s=n.exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE week_start = ?`,[e]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return C1(a)}function NL(n){const s=re().exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE id = ?`,[n]);return!s.length||!s[0].values.length?null:C1(s[0].values[0])}async function wL(){const n=re(),e=jd(),s=LT();if(s)return s;const a=kT[Math.floor(Math.random()*kT.length)],o=Math.floor(Math.random()*(a.hpRange[1]-a.hpRange[0]+1))+a.hpRange[0];return n.run(`INSERT INTO weekly_boss (week_start, boss_type, name, description, icon, max_hp, current_hp, xp_reward, bonus_shields)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,a.type,a.name,a.description,a.icon,o,o,a.xpReward,a.bonusShields]),await ye(),LT()}async function xL(n,e,s,a){const o=re(),u=NL(n);if(!u||u.is_defeated)return{newHp:u?.current_hp||0,isDefeated:u?.is_defeated||!1};const h=Math.max(0,u.current_hp-s),g=h===0;return o.run(`UPDATE weekly_boss SET current_hp = ?, is_defeated = ?, defeated_at = ?
     WHERE id = ?`,[h,g?1:0,g?new Date().toISOString():null,n]),o.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[n,e,s,a||null]),await ye(),{newHp:h,isDefeated:g}}function AL(){const e=re().exec("SELECT COUNT(*) FROM weekly_boss WHERE is_defeated = 1");return e.length&&e[0].values.length?e[0].values[0][0]:0}function C1(n){return{id:n[0],week_start:n[1],boss_type:n[2],name:n[3],description:n[4],icon:n[5],max_hp:n[6],current_hp:n[7],is_defeated:!!n[8],defeated_at:n[9],xp_reward:n[10],bonus_shields:n[11],created_at:n[12]}}function RL({grantXP:n,addShields:e}){const[s,a]=j.useState(null),[o,u]=j.useState(!0),[h,g]=j.useState(!1),v=j.useCallback(async()=>{const V=await wL();a(V),u(!1)},[]);j.useEffect(()=>{v()},[v]),j.useEffect(()=>{const z=setInterval(()=>{const $=jd();s&&s.week_start!==$&&v()},6e4);return()=>clearInterval(z)},[s,v]);const _=j.useCallback(async(V,z)=>{if(!s||s.is_defeated)return;const $=ml[V],Z=await xL(s.id,V,$,z);return a(ie=>ie?{...ie,current_hp:Z.newHp,is_defeated:Z.isDefeated}:null),Z.isDefeated&&!s.is_defeated&&(g(!0),await n(s.xp_reward,`Defeated ${s.name}!`,"boss",s.id),s.bonus_shields>0&&e&&await e(s.bonus_shields)),Z},[s,n,e]),S=j.useCallback(()=>{g(!1)},[]),w=s?.week_start||jd(),C=SL(w),q=s?Math.round(s.current_hp/s.max_hp*100):100,X=s?s.max_hp-s.current_hp:0,O=AL();return{boss:s,loading:o,justDefeated:h,weekStart:w,weekEnd:C,hpPercentage:q,damageDealt:X,totalDefeated:O,refresh:v,dealDamage:_,dismissDefeatNotification:S}}function CL(){const s=re().exec(`
    SELECT
      ad.id, ad.key, ad.name, ad.description, ad.category, ad.icon, ad.xp_reward,
      ad.requirement_type, ad.requirement_value, ad.requirement_source, ad.sort_order, ad.is_hidden,
      au.unlocked_at,
      COALESCE(ap.current_value, 0) as current_value
    FROM achievement_definitions ad
    LEFT JOIN achievement_unlocks au ON ad.id = au.definition_id
    LEFT JOIN achievement_progress ap ON ad.id = ap.definition_id
    ORDER BY ad.category, ad.sort_order
  `);return s.length?s[0].values.map(a=>{const o=a[8],u=a[13],h=a[12];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:o,requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11],unlocked:h!==null,unlocked_at:h,current_value:u,progress_percent:Math.min(100,Math.round(u/o*100))}}):[]}async function IL(n,e=1){const s=re(),a=s.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ?`,[n]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],v=s.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);if(v.length&&v[0].values.length)continue;const _=s.exec("SELECT current_value FROM achievement_progress WHERE definition_id = ?",[h]),w=(_.length&&_[0].values.length?_[0].values[0][0]:0)+e;s.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,w]),w>=g&&o.push(h)}return await ye(),o}async function kL(n,e){const s=re(),a=s.exec(`SELECT id, requirement_value FROM achievement_definitions
     WHERE requirement_source = ? AND requirement_type = 'threshold'`,[n]);if(!a.length)return[];const o=[];for(const u of a[0].values){const h=u[0],g=u[1],v=s.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[h]);v.length&&v[0].values.length||(s.run(`INSERT INTO achievement_progress (definition_id, current_value, last_updated)
       VALUES (?, ?, datetime('now'))
       ON CONFLICT(definition_id) DO UPDATE SET
       current_value = excluded.current_value,
       last_updated = excluded.last_updated`,[h,e]),e>=g&&o.push(h))}return await ye(),o}async function LL(n){const e=re(),s=e.exec("SELECT 1 FROM achievement_unlocks WHERE definition_id = ?",[n]);return s.length&&s[0].values.length?!1:(e.run("INSERT INTO achievement_unlocks (definition_id, unlocked_at) VALUES (?, datetime('now'))",[n]),await ye(),!0)}function jL(n){const s=re().exec(`SELECT id, key, name, description, category, icon, xp_reward,
     requirement_type, requirement_value, requirement_source, sort_order, is_hidden
     FROM achievement_definitions WHERE id = ?`,[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],key:a[1],name:a[2],description:a[3],category:a[4],icon:a[5],xp_reward:a[6],requirement_type:a[7],requirement_value:a[8],requirement_source:a[9],sort_order:a[10],is_hidden:!!a[11]}}function DL(){const n=re(),e=n.exec("SELECT COUNT(*), SUM(xp_reward) FROM achievement_definitions"),s=e.length?e[0].values[0][0]:0,a=e.length&&e[0].values[0][1]||0,o=n.exec(`
    SELECT COUNT(*), COALESCE(SUM(ad.xp_reward), 0)
    FROM achievement_unlocks au
    JOIN achievement_definitions ad ON au.definition_id = ad.id
  `),u=o.length?o[0].values[0][0]:0,h=o.length?o[0].values[0][1]:0;return{total:s,unlocked:u,totalXp:a,earnedXp:h}}function OL({grantXP:n}){const[e,s]=j.useState([]),[a,o]=j.useState({total:0,unlocked:0,totalXp:0,earnedXp:0}),[u,h]=j.useState([]),[g,v]=j.useState(!0),_=j.useCallback(()=>{s(CL()),o(DL()),v(!1)},[]);j.useEffect(()=>{_()},[_]);const S=j.useCallback(async V=>{const z=[];for(const $ of V)if(await LL($)){const ie=jL($);ie&&(await n(ie.xp_reward,`Achievement: ${ie.name}`,"achievement",$),z.push({achievement:ie,xpAwarded:ie.xp_reward}))}return z.length>0&&(h($=>[...$,...z]),_()),z},[n,_]),w=j.useCallback(async(V,z=1)=>{const $=await IL(V,z);$.length>0&&await S($),_()},[S,_]),C=j.useCallback(async(V,z)=>{const $=await kL(V,z);$.length>0&&await S($),_()},[S,_]),q=j.useCallback(V=>{h(z=>z.filter(($,Z)=>Z!==V))},[]),X=j.useCallback(()=>{h([])},[]),O=j.useCallback(V=>e.filter(z=>z.category===V),[e]);return{achievements:e,stats:a,loading:g,pendingUnlocks:u,refresh:_,incrementProgress:w,checkThreshold:C,dismissUnlock:q,dismissAllUnlocks:X,getAchievementsByCategory:O}}function lo(){const e=re().exec("SELECT id, current_energy, max_energy, last_regen_at, bonus_energy FROM energy_state WHERE id = 1");if(!e.length||!e[0].values.length)return{id:1,current_energy:pl,max_energy:pl,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19),bonus_energy:0};const s=e[0].values[0];return{id:s[0],current_energy:s[1],max_energy:s[2],last_regen_at:s[3],bonus_energy:s[4]}}async function lf(n,e,s,a=null){const o=re(),u=lo(),h=u.current_energy,g=u.max_energy+u.bonus_energy,v=Math.max(0,Math.min(g,u.current_energy+n));return o.run("UPDATE energy_state SET current_energy = ?, last_regen_at = datetime('now') WHERE id = 1",[v]),o.run(`INSERT INTO energy_log (amount, reason, source_type, source_id, energy_before, energy_after)
     VALUES (?, ?, ?, ?, ?, ?)`,[n,e,s,a,h,v]),await ye(),{...u,current_energy:v,last_regen_at:new Date().toISOString().replace("T"," ").slice(0,19)}}async function ML(n,e=null){const s=o_(n),a=lo();return a.current_energy<s?{success:!1,newState:a,cost:s}:{success:!0,newState:await lf(-s,`Spent on ${n.replace(/_/g," ")}`,n,e),cost:s}}function UL(n){const e=o_(n);return lo().current_energy>=e}function o_(n){const s=re().exec("SELECT base_cost FROM energy_costs WHERE action_type = ?",[n]);return!s.length||!s[0].values.length?0:s[0].values[0][0]}async function VL(){const n=re(),e=lo(),s=e.max_energy+e.bonus_energy;if(e.current_energy>=s)return n.run("UPDATE energy_state SET last_regen_at = datetime('now') WHERE id = 1"),await ye(),{regenerated:0,newState:e};const a=new Date(e.last_regen_at+"Z"),u=(new Date().getTime()-a.getTime())/(1e3*60*60),h=Math.floor(u*$T);if(h<=0)return{regenerated:0,newState:e};const v=Math.min(s,e.current_energy+h)-e.current_energy;if(v>0){const _=await lf(v,"Natural regeneration","regen");return{regenerated:v,newState:_}}return{regenerated:0,newState:e}}async function BL(){const n=lo(),s=n.max_energy+n.bonus_energy-n.current_energy;return s>0?await lf(s,"Full energy restore","restore"):n}function qL(){const[n,e]=j.useState(()=>lo()),[s,a]=j.useState(!0),o=j.useCallback(()=>{e(lo()),a(!1)},[]);j.useEffect(()=>{o()},[o]),j.useEffect(()=>{const O=async()=>{const{regenerated:z,newState:$}=await VL();z>0&&e($)};O();const V=setInterval(O,6e4);return()=>clearInterval(V)},[]);const u=j.useCallback(async(O,V=null)=>{const z=await ML(O,V);return z.success&&e(z.newState),z},[]),h=j.useCallback(async(O,V)=>{const z=await lf(O,V,"bonus");return e(z),z},[]),g=j.useCallback(async()=>{const O=await BL();return e(O),O},[]),v=j.useCallback(O=>UL(O),[]),_=j.useCallback(O=>o_(O),[]),S=j.useCallback(()=>{const O=[];return n.current_energy<=Vm?O.push({active:!0,name:hm.name,icon:hm.icon,effects:hm.effects}):n.current_energy<=Um&&O.push({active:!0,name:fm.name,icon:fm.icon,effects:fm.effects}),O},[n.current_energy]),w=j.useCallback(()=>{const O=S(),V={};for(const z of O)for(const[$,Z]of Object.entries(z.effects))V[$]=(V[$]||0)+Z;return V},[S]),C=Math.round(n.current_energy/(n.max_energy+n.bonus_energy)*100),q=n.current_energy<=Um,X=n.current_energy<=Vm;return{state:n,loading:s,refresh:o,spendEnergy:u,addEnergy:h,restoreFullEnergy:g,canAfford:v,getActionCost:_,getEnergyDebuffs:S,getEnergyStatPenalties:w,percentage:C,isLow:q,isEmpty:X}}function cp(){const e=re().exec(`
    SELECT id, work_duration, short_break, long_break, sessions_before_long_break, auto_start_breaks, sound_enabled
    FROM focus_settings WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,...Hs};const s=e[0].values[0];return{id:s[0],work_duration:s[1],short_break:s[2],long_break:s[3],sessions_before_long_break:s[4],auto_start_breaks:!!s[5],sound_enabled:!!s[6]}}async function PL(n){const e=re(),a={...cp(),...n};return e.run(`
    UPDATE focus_settings SET
      work_duration = ?,
      short_break = ?,
      long_break = ?,
      sessions_before_long_break = ?,
      auto_start_breaks = ?,
      sound_enabled = ?
    WHERE id = 1
  `,[a.work_duration,a.short_break,a.long_break,a.sessions_before_long_break,a.auto_start_breaks?1:0,a.sound_enabled?1:0]),await ye(),a}function up(){const e=re().exec(`
    SELECT id, total_sessions, total_minutes, longest_streak, current_streak, today_sessions, today_date
    FROM focus_stats WHERE id = 1
  `);if(!e.length||!e[0].values.length)return{id:1,total_sessions:0,total_minutes:0,longest_streak:0,current_streak:0,today_sessions:0,today_date:new Date().toISOString().split("T")[0]};const s=e[0].values[0];return{id:s[0],total_sessions:s[1],total_minutes:s[2],longest_streak:s[3],current_streak:s[4],today_sessions:s[5],today_date:s[6]}}async function FL(n,e=null,s=null){const a=re();a.run(`
    INSERT INTO focus_sessions (duration_minutes, linked_step_id, linked_quest_id, status)
    VALUES (?, ?, ?, 'active')
  `,[n,e,s]);const u=a.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ye(),l_(u)}async function zL(n,e,s=""){re().run(`
    UPDATE focus_sessions SET
      status = 'completed',
      completed_at = datetime('now'),
      xp_earned = ?,
      notes = ?
    WHERE id = ? AND status = 'active'
  `,[e,s,n]);const o=l_(n);return o&&await XL(o.duration_minutes),await ye(),o}async function HL(n){re().run("UPDATE focus_sessions SET status = 'cancelled', completed_at = datetime('now') WHERE id = ?",[n]),await ye()}function l_(n){const s=re().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE id = ?
  `,[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return c_(a)}function jT(){const e=re().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions WHERE status = 'active' ORDER BY started_at DESC LIMIT 1
  `);return!e.length||!e[0].values.length?null:c_(e[0].values[0])}function GL(n=10){const s=re().exec(`
    SELECT id, duration_minutes, started_at, completed_at, status, xp_earned, linked_step_id, linked_quest_id, break_taken, notes
    FROM focus_sessions ORDER BY started_at DESC LIMIT ?
  `,[n]);return s.length?s[0].values.map(c_):[]}async function XL(n){const e=re(),s=up(),a=new Date().toISOString().split("T")[0],u=s.today_date===a?s.today_sessions+1:1,h=s.current_streak+1,g=Math.max(s.longest_streak,h);e.run(`
    UPDATE focus_stats SET
      total_sessions = total_sessions + 1,
      total_minutes = total_minutes + ?,
      current_streak = ?,
      longest_streak = ?,
      today_sessions = ?,
      today_date = ?
    WHERE id = 1
  `,[n,h,g,u,a]),await ye()}function c_(n){return{id:n[0],duration_minutes:n[1],started_at:n[2],completed_at:n[3],status:n[4],xp_earned:n[5],linked_step_id:n[6],linked_quest_id:n[7],break_taken:!!n[8],notes:n[9]}}function YL({grantXP:n,onSessionComplete:e}){const[s,a]=j.useState(()=>cp()),[o,u]=j.useState(()=>up()),[h,g]=j.useState(()=>jT()),[v,_]=j.useState([]),[S,w]=j.useState({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:0}),C=j.useRef(null),q=j.useRef(h?.id||null),X=j.useCallback(()=>{a(cp()),u(up()),g(jT()),_(GL(10))},[]);j.useEffect(()=>{X()},[X]),j.useEffect(()=>{if(S.isRunning&&S.timeRemaining>0)return C.current=setInterval(()=>{w(D=>({...D,timeRemaining:Math.max(0,D.timeRemaining-1)}))},1e3),()=>{C.current&&clearInterval(C.current)}},[S.isRunning]),j.useEffect(()=>{S.timeRemaining===0&&S.isRunning&&O()},[S.timeRemaining,S.isRunning]);const O=async()=>{if(S.phase==="work"&&q.current){const D=l_(q.current);let U=QN;D?.linked_step_id&&(U+=KN);const B=S.sessionsCompleted+1;B%4===0&&(U+=WN),await zL(q.current,U),await n(U,"Focus session completed","focus",q.current),e?.(),s.sound_enabled&&DT();const A=B%s.sessions_before_long_break===0,L=A?"long_break":"short_break",k=A?s.long_break:s.short_break;w({phase:s.auto_start_breaks?L:"idle",timeRemaining:k*60,isRunning:s.auto_start_breaks,sessionsCompleted:B}),q.current=null,X()}else(S.phase==="short_break"||S.phase==="long_break")&&(s.sound_enabled&&DT(),w({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}))},V=j.useCallback(async(D=null,U=null)=>{const B=await FL(s.work_duration,D,U);q.current=B.id,g(B),w({phase:"work",timeRemaining:s.work_duration*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[s.work_duration,S.sessionsCompleted]),z=j.useCallback((D=!1)=>{const U=D?s.long_break:s.short_break;w({phase:D?"long_break":"short_break",timeRemaining:U*60,isRunning:!0,sessionsCompleted:S.sessionsCompleted})},[s.short_break,s.long_break,S.sessionsCompleted]),$=j.useCallback(()=>{w(D=>({...D,isRunning:!1}))},[]),Z=j.useCallback(()=>{w(D=>({...D,isRunning:!0}))},[]),ie=j.useCallback(async()=>{C.current&&clearInterval(C.current),q.current&&S.phase==="work"&&await HL(q.current),q.current=null,g(null),w({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted}),X()},[s.work_duration,S.phase,S.sessionsCompleted,X]),_e=j.useCallback(()=>{(S.phase==="short_break"||S.phase==="long_break")&&w({phase:"idle",timeRemaining:s.work_duration*60,isRunning:!1,sessionsCompleted:S.sessionsCompleted})},[s.work_duration,S.phase,S.sessionsCompleted]),Te=j.useCallback(async D=>{const U=await PL(D);a(U),S.phase==="idle"&&w(B=>({...B,timeRemaining:(D.work_duration||B.timeRemaining/60)*60}))},[S.phase]);return{settings:s,stats:o,timerState:S,currentSession:h,recentSessions:v,refresh:X,startWork:V,startBreak:z,pause:$,resume:Z,stop:ie,skipBreak:_e,updateSettings:Te,formatTime:D=>{const U=Math.floor(D/60),B=D%60;return`${U.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`}}}function DT(){try{const n=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdGCdqIyYY19lf6O3qJyAa3B1gqKvpZNyYW50iaS7s5yBaWx3g6C4t5uGc2l0gJy0t5qGcWl0gJyzrZOAbWp0gJyzrZaEc2p2gJixsJmGeWt3gJivsJmGd2x3gZitq5OAbWp0f5asrJaAdmp1f5aqq5aAdmp1f5aqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqq5aAdmp1gJaqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZSAdWl0f5OqqZOAdGlzfpKppZKAc2hyfpCmpZCAbGZxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY+lppGBbGVxfY6kpJCAa2RvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopCAbGRvfI2iopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoykopB/a2NueoyjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI5/amJseImjnI4=");n.volume=.5,n.play().catch(()=>{})}catch{}}const $L=25,OT=10;function QL(){const e=re().exec(`
    SELECT id, name, type, description, bonus_xp, is_active, created_at
    FROM routine_definitions WHERE is_active = 1 ORDER BY type, name
  `);return e.length?e[0].values.map(aj):[]}function KL(){return QL().map(e=>{const s=u_(e.id),a=Dd(e.id),o=Od(e.id);return{...e,steps:s,streak:a||void 0,todayLog:o||void 0}})}function u_(n){const s=re().exec(`
    SELECT id, routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional
    FROM routine_steps WHERE routine_id = ? ORDER BY sort_order
  `,[n]);return s.length?s[0].values.map(rj):[]}function Dd(n){const s=re().exec(`
    SELECT id, routine_id, current_streak, longest_streak, last_completed_date
    FROM routine_streaks WHERE routine_id = ?
  `,[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],routine_id:a[1],current_streak:a[2],longest_streak:a[3],last_completed_date:a[4]}}function Od(n){const s=re().exec(`
    SELECT id, routine_id, date, started_at, completed_at, is_completed, steps_completed, total_steps, xp_earned
    FROM routine_logs WHERE routine_id = ? AND date = date('now')
  `,[n]);return!s.length||!s[0].values.length?null:oj(s[0].values[0])}function WL(n){const s=re().exec(`
    SELECT id, routine_log_id, step_id, completed_at, is_completed, skipped
    FROM routine_step_logs WHERE routine_log_id = ?
  `,[n]);return s.length?s[0].values.map(a=>({id:a[0],routine_log_id:a[1],step_id:a[2],completed_at:a[3],is_completed:!!a[4],skipped:!!a[5]})):[]}function I1(n){const e=u_(n),s=Od(n);if(!s)return e.map(u=>({...u,is_completed:!1,skipped:!1,completed_at:null}));const a=WL(s.id),o=new Map(a.map(u=>[u.step_id,u]));return e.map(u=>{const h=o.get(u.id);return{...u,is_completed:h?.is_completed||!1,skipped:h?.skipped||!1,completed_at:h?.completed_at||null}})}async function JL(n,e,s,a){const o=re();o.run("INSERT INTO routine_definitions (name, type, description, bonus_xp) VALUES (?, ?, ?, ?)",[n,e,s,a]);const h=o.exec("SELECT last_insert_rowid()")[0].values[0][0];return o.run("INSERT INTO routine_streaks (routine_id) VALUES (?)",[h]),await ye(),h}async function ZL(n,e,s,a,o,u){const h=re(),v=h.exec("SELECT COALESCE(MAX(sort_order), -1) + 1 FROM routine_steps WHERE routine_id = ?",[n])[0].values[0][0];h.run(`INSERT INTO routine_steps (routine_id, title, description, linked_buff_id, sort_order, duration_minutes, is_optional)
     VALUES (?, ?, ?, ?, ?, ?, ?)`,[n,e,s,a,v,o,u?1:0]);const _=h.exec("SELECT last_insert_rowid()");return await ye(),_[0].values[0][0]}async function ej(n){re().run("DELETE FROM routine_steps WHERE id = ?",[n]),await ye()}async function tj(n){re().run("DELETE FROM routine_definitions WHERE id = ?",[n]),await ye()}async function nj(n){const e=re(),s=u_(n);let a=Od(n);if(!a){e.run(`INSERT INTO routine_logs (routine_id, date, started_at, total_steps)
       VALUES (?, date('now'), datetime('now'), ?)`,[n,s.length]);const u=e.exec("SELECT last_insert_rowid()")[0].values[0][0];for(const h of s)e.run("INSERT INTO routine_step_logs (routine_log_id, step_id) VALUES (?, ?)",[u,h.id]);await ye(),a=Od(n)}return a}async function sj(n,e){const s=re();s.run(`UPDATE routine_step_logs SET is_completed = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[n,e]);const o=s.exec("SELECT COUNT(*) FROM routine_step_logs WHERE routine_log_id = ? AND is_completed = 1",[n])[0].values[0][0];s.run("UPDATE routine_logs SET steps_completed = ? WHERE id = ?",[o,n]),await ye()}async function ij(n,e){re().run(`UPDATE routine_step_logs SET skipped = 1, completed_at = datetime('now')
     WHERE routine_log_id = ? AND step_id = ?`,[n,e]),await ye()}async function MT(n,e){const s=re(),a=new Date().toISOString().split("T")[0];s.run(`UPDATE routine_logs SET is_completed = 1, completed_at = datetime('now'), xp_earned = ?
     WHERE routine_id = ? AND date = date('now')`,[e,n]);const o=Dd(n);if(o){const u=new Date(Date.now()-864e5).toISOString().split("T")[0],g=o.last_completed_date===u?o.current_streak+1:1,v=Math.max(o.longest_streak,g);s.run(`UPDATE routine_streaks SET current_streak = ?, longest_streak = ?, last_completed_date = ?
       WHERE routine_id = ?`,[g,v,a,n])}await ye()}function UT(n){return I1(n).filter(a=>!a.is_optional).every(a=>a.is_completed||a.skipped)}function aj(n){return{id:n[0],name:n[1],type:n[2],description:n[3],bonus_xp:n[4],is_active:!!n[5],created_at:n[6]}}function rj(n){return{id:n[0],routine_id:n[1],title:n[2],description:n[3],linked_buff_id:n[4],sort_order:n[5],duration_minutes:n[6],is_optional:!!n[7]}}function oj(n){return{id:n[0],routine_id:n[1],date:n[2],started_at:n[3],completed_at:n[4],is_completed:!!n[5],steps_completed:n[6],total_steps:n[7],xp_earned:n[8]}}function lj({grantXP:n,onRoutineComplete:e}){const[s,a]=j.useState([]),[o,u]=j.useState(!0),h=j.useCallback(()=>{a(KL()),u(!1)},[]);j.useEffect(()=>{h()},[h]);const g=j.useCallback(async($,Z,ie,_e=$L)=>{await JL($,Z,ie,_e),h()},[h]),v=j.useCallback(async($,Z,ie,_e,Te,M)=>{await ZL($,Z,ie,_e,Te,M),h()},[h]),_=j.useCallback(async $=>{await ej($),h()},[h]),S=j.useCallback(async $=>{await tj($),h()},[h]),w=j.useCallback(async $=>{await nj($),h()},[h]),C=j.useCallback(async($,Z)=>{const ie=s.find(_e=>_e.id===$);if(ie?.todayLog){if(await sj(ie.todayLog.id,Z),UT($)){let _e=ie.bonus_xp;const Te=Dd($);Te&&Te.current_streak>0&&Te.current_streak%7===0&&(_e+=OT),await MT($,_e),await n(_e,`Completed routine: ${ie.name}`,"routine",$),e?.($)}h()}},[s,n,e,h]),q=j.useCallback(async($,Z)=>{const ie=s.find(_e=>_e.id===$);if(ie?.todayLog){if(await ij(ie.todayLog.id,Z),UT($)){let _e=ie.bonus_xp;const Te=Dd($);Te&&Te.current_streak>0&&Te.current_streak%7===0&&(_e+=OT),await MT($,_e),await n(_e,`Completed routine: ${ie.name}`,"routine",$),e?.($)}h()}},[s,n,e,h]),X=j.useCallback($=>I1($),[]),O=j.useCallback(()=>s.filter($=>$.type==="morning"),[s]),V=j.useCallback(()=>s.filter($=>$.type==="evening"),[s]),z=j.useCallback(()=>s.filter($=>$.type==="custom"),[s]);return{routines:s,loading:o,refresh:h,createRoutine:g,addStep:v,deleteStep:_,deleteRoutine:S,startRoutine:w,completeStep:C,skipStep:q,getStepsWithStatus:X,getMorningRoutines:O,getEveningRoutines:V,getCustomRoutines:z}}function cj(){const e=re().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE is_active = 1 ORDER BY name
  `);return e.length?e[0].values.map(L1):[]}function uj(n){const s=re().exec(`
    SELECT id, name, description, icon, required_buffs, time_window_hours, bonus_xp, is_active
    FROM combo_definitions WHERE id = ?
  `,[n]);return!s.length||!s[0].values.length?null:L1(s[0].values[0])}function k1(){const n=re();return cj().map(s=>{const a=JSON.parse(s.required_buffs),o=n.exec(`SELECT name FROM buff_definitions WHERE id IN (${a.join(",")||"0"})`),u=o.length?o[0].values.map(X=>X[0]):[],h=n.exec(`SELECT DISTINCT definition_id FROM buff_log
       WHERE is_active = 1
       AND definition_id IN (${a.join(",")||"0"})
       AND activated_at >= datetime('now', '-${s.time_window_hours} hours')`),g=h.length?h[0].values.map(X=>X[0]):[],v=n.exec(`SELECT activated_at FROM combo_activations
       WHERE combo_id = ? ORDER BY activated_at DESC LIMIT 1`,[s.id]),_=v.length&&v[0].values.length?v[0].values[0][0]:null,S=n.exec(`SELECT 1 FROM combo_activations
       WHERE combo_id = ? AND date(activated_at) = date('now')`,[s.id]),w=S.length&&S[0].values.length>0,C=a.length>0?Math.round(g.length/a.length*100):0,q=g.length===a.length&&!w;return{...s,required_buff_names:u,active_buff_ids:g,progress:C,is_ready:q,last_activated:_}})}function dj(){return k1().filter(n=>n.is_ready)}async function VT(n,e){const s=re();if(!uj(n))return null;s.run("INSERT INTO combo_activations (combo_id, buffs_used) VALUES (?, ?)",[n,JSON.stringify(e)]);const u=s.exec("SELECT last_insert_rowid()")[0].values[0][0];return await ye(),fj(u)}function fj(n){const s=re().exec("SELECT id, combo_id, activated_at, buffs_used FROM combo_activations WHERE id = ?",[n]);if(!s.length||!s[0].values.length)return null;const a=s[0].values[0];return{id:a[0],combo_id:a[1],activated_at:a[2],buffs_used:a[3]}}async function hj(n,e,s,a,o,u){const h=re();h.run(`INSERT INTO combo_definitions (name, description, icon, required_buffs, time_window_hours, bonus_xp)
     VALUES (?, ?, ?, ?, ?, ?)`,[n,e,s,JSON.stringify(a),o,u]);const g=h.exec("SELECT last_insert_rowid()");return await ye(),g[0].values[0][0]}async function mj(n){re().run("DELETE FROM combo_definitions WHERE id = ?",[n]),await ye()}function L1(n){return{id:n[0],name:n[1],description:n[2],icon:n[3],required_buffs:n[4],time_window_hours:n[5],bonus_xp:n[6],is_active:!!n[7]}}function pj({grantXP:n,onComboActivated:e}){const[s,a]=j.useState([]),[o,u]=j.useState(!0),h=j.useCallback(()=>{a(k1()),u(!1)},[]);j.useEffect(()=>{h()},[h]);const g=j.useCallback(async()=>{const q=dj(),X=[];for(const O of q)await VT(O.id,O.active_buff_ids),await n(O.bonus_xp,`Combo activated: ${O.name}`,"combo",O.id),X.push(O),e?.(O);return X.length>0&&h(),X},[n,e,h]),v=j.useCallback(async q=>{const X=s.find(O=>O.id===q);return!X||!X.is_ready?null:(await VT(q,X.active_buff_ids),await n(X.bonus_xp,`Combo activated: ${X.name}`,"combo",q),e?.(X),h(),X)},[s,n,e,h]),_=j.useCallback(async(q,X,O,V,z,$)=>{await hj(q,X,O,V,z,$),h()},[h]),S=j.useCallback(async q=>{await mj(q),h()},[h]),w=j.useCallback(()=>s.filter(q=>q.is_ready),[s]),C=j.useCallback(()=>s.filter(q=>q.progress>0&&q.progress<100&&!q.is_ready),[s]);return{combos:s,loading:o,refresh:h,checkAndActivateCombos:g,claimCombo:v,createCombo:_,deleteCombo:S,getReadyCombos:w,getInProgressCombos:C}}const _l=100,_j={steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0};function cf(n=new Date){const e=new Date(n),s=e.getDay(),a=e.getDate()-s+(s===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function dp(){const n=re(),e=cf(),s=n.exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews WHERE week_start = ?`,[e]);return!s.length||!s[0].values.length?null:j1(s[0].values[0])}function gj(n=10){const s=re().exec(`SELECT id, week_start, generated_at, completed_at, is_completed, summary_data, wins, challenges, priorities, notes, xp_earned
     FROM weekly_reviews ORDER BY week_start DESC LIMIT ?`,[n]);return s.length?s[0].values.map(j1):[]}async function yj(){const n=re(),e=cf(),s=new Date(e);s.setDate(s.getDate()+7);const a=s.toISOString().split("T")[0],o={..._j},u=n.exec(`SELECT COUNT(*) FROM steps WHERE completed_at IS NOT NULL
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.steps_completed=u.length?u[0].values[0][0]:0;const h=n.exec(`SELECT COUNT(*) FROM quests WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.quests_completed=h.length?h[0].values[0][0]:0;const g=n.exec(`SELECT COUNT(*) FROM goals WHERE status = 'completed'
     AND date(completed_at) >= ? AND date(completed_at) < ?`,[e,a]);o.goals_completed=g.length?g[0].values[0][0]:0;const v=n.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'buff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.buffs_activated=v.length?v[0].values[0][0]:0;const _=n.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) >= ? AND date(bl.activated_at) < ?`,[e,a]);o.debuffs_activated=_.length?_[0].values[0][0]:0;const S=n.exec(`SELECT COALESCE(SUM(amount), 0) FROM xp_log
     WHERE date(created_at) >= ? AND date(created_at) < ?`,[e,a]);o.xp_earned=S.length?S[0].values[0][0]:0;try{const w=n.exec(`SELECT COALESCE(SUM(damage), 0), MAX(CASE WHEN is_defeated = 1 THEN 1 ELSE 0 END)
       FROM weekly_boss WHERE week_start = ?`,[e]);w.length&&w[0].values.length&&(o.boss_damage_dealt=w[0].values[0][0],o.boss_defeated=!!w[0].values[0][1])}catch{}try{const w=n.exec(`SELECT COUNT(*), COALESCE(SUM(duration_minutes), 0) FROM focus_sessions
       WHERE status = 'completed' AND date(started_at) >= ? AND date(started_at) < ?`,[e,a]);w.length&&w[0].values.length&&(o.focus_sessions=w[0].values[0][0],o.focus_minutes=w[0].values[0][1])}catch{}try{const w=n.exec(`SELECT COUNT(*) FROM routine_logs
       WHERE is_completed = 1 AND date >= ? AND date < ?`,[e,a]);o.routines_completed=w.length?w[0].values[0][0]:0}catch{}try{const w=n.exec(`SELECT COUNT(*) FROM combo_activations
       WHERE date(activated_at) >= ? AND date(activated_at) < ?`,[e,a]);o.combos_activated=w.length?w[0].values[0][0]:0}catch{}try{const w=n.exec(`SELECT COUNT(*) FROM achievement_unlocks
       WHERE date(unlocked_at) >= ? AND date(unlocked_at) < ?`,[e,a]);o.achievements_unlocked=w.length?w[0].values[0][0]:0}catch{}return o}async function Ej(n){const e=re(),s=cf(),a=JSON.stringify(n),o=dp();return o?e.run("UPDATE weekly_reviews SET summary_data = ?, generated_at = datetime('now') WHERE id = ?",[a,o.id]):e.run("INSERT INTO weekly_reviews (week_start, summary_data) VALUES (?, ?)",[s,a]),await ye(),dp()}async function vj(n,e,s,a,o){re().run("UPDATE weekly_reviews SET wins = ?, challenges = ?, priorities = ?, notes = ? WHERE id = ?",[e,s,JSON.stringify(a),o,n]),await ye()}async function Tj(n,e){re().run("UPDATE weekly_reviews SET is_completed = 1, completed_at = datetime('now'), xp_earned = ? WHERE id = ?",[e,n]),await ye()}function j1(n){return{id:n[0],week_start:n[1],generated_at:n[2],completed_at:n[3],is_completed:!!n[4],summary_data:n[5],wins:n[6],challenges:n[7],priorities:n[8],notes:n[9],xp_earned:n[10]}}function bj({grantXP:n}){const[e,s]=j.useState(null),[a,o]=j.useState(null),[u,h]=j.useState([]),[g,v]=j.useState(!0),_=j.useCallback(async()=>{s(dp()),h(gj(10)),v(!1)},[]);j.useEffect(()=>{_()},[_]);const S=j.useCallback(async()=>{const V=await yj();o(V);const z=await Ej(V);return s(z),{summary:V,review:z}},[]),w=j.useCallback(async(V,z,$,Z)=>{e&&(await vj(e.id,V,z,$,Z),_())},[e,_]),C=j.useCallback(async()=>{!e||e.is_completed||(await Tj(e.id,_l),await n(_l,"Completed weekly review","weekly_review",e.id),_())},[e,n,_]),q=j.useCallback(()=>cf(),[]),X=j.useCallback(V=>{try{return JSON.parse(V.summary_data)}catch{return{steps_completed:0,quests_completed:0,goals_completed:0,buffs_activated:0,debuffs_activated:0,xp_earned:0,boss_damage_dealt:0,boss_defeated:!1,streaks_maintained:0,achievements_unlocked:0,focus_sessions:0,focus_minutes:0,routines_completed:0,combos_activated:0}}},[]),O=j.useCallback(V=>{try{return JSON.parse(V.priorities)}catch{return[]}},[]);return{currentReview:e,summaryData:a,recentReviews:u,loading:g,refresh:_,generateSummary:S,updateContent:w,completeReview:C,getWeekStart:q,getSummaryFromReview:X,getPrioritiesFromReview:O}}function Sj(){const e=re().exec(`
    SELECT id, name, description, type, icon, duration_hours, effect_type, effect_value, rarity, weight
    FROM event_templates ORDER BY rarity, name
  `);return e.length?e[0].values.map(Aj):[]}function d_(){const e=re().exec(`
    SELECT ae.id, ae.template_id, ae.started_at, ae.expires_at, ae.is_claimed, ae.claimed_at,
           et.id, et.name, et.description, et.type, et.icon, et.duration_hours, et.effect_type, et.effect_value, et.rarity, et.weight
    FROM active_events ae
    JOIN event_templates et ON ae.template_id = et.id
    WHERE ae.expires_at > datetime('now') OR (ae.is_claimed = 0 AND et.duration_hours = 0)
    ORDER BY ae.started_at DESC
  `);if(!e.length)return[];const s=Date.now();return e[0].values.map(a=>{const o=new Date(a[3]+"Z").getTime();return{id:a[0],template_id:a[1],started_at:a[2],expires_at:a[3],is_claimed:!!a[4],claimed_at:a[5],template:{id:a[6],name:a[7],description:a[8],type:a[9],icon:a[10],duration_hours:a[11],effect_type:a[12],effect_value:a[13],rarity:a[14],weight:a[15]},time_remaining:Math.max(0,Math.floor((o-s)/1e3))}})}async function Nj(){const n=re(),e=Sj();if(e.length===0)return null;const s=e.reduce((g,v)=>g+v.weight,0);let a=Math.random()*s,o=null;for(const g of e)if(a-=g.weight,a<=0){o=g;break}o||(o=e[0]);const u=o.duration_hours>0?`datetime('now', '+${o.duration_hours} hours')`:"datetime('now', '+24 hours')";return n.run(`INSERT INTO active_events (template_id, expires_at) VALUES (?, ${u})`,[o.id]),await ye(),d_().find(g=>g.template_id===o.id)||null}async function wj(n){const e=re(),a=d_().find(o=>o.id===n);if(!a||a.is_claimed)return{success:!1,effectValue:{}};e.run("UPDATE active_events SET is_claimed = 1, claimed_at = datetime('now') WHERE id = ?",[n]),e.run(`INSERT INTO event_history (template_id, event_name, result, xp_earned)
     VALUES (?, ?, 'claimed', 0)`,[a.template_id,a.template.name]),await ye();try{return{success:!0,effectValue:JSON.parse(a.template.effect_value)}}catch{return{success:!0,effectValue:{}}}}async function xj(){re().run(`
    DELETE FROM active_events
    WHERE expires_at <= datetime('now') AND is_claimed = 0
  `),await ye()}function Aj(n){return{id:n[0],name:n[1],description:n[2],type:n[3],icon:n[4],duration_hours:n[5],effect_type:n[6],effect_value:n[7],rarity:n[8],weight:n[9]}}const BT="last_event_check";function Rj({grantXP:n,addEnergy:e,addShields:s,onEventTriggered:a}){const[o,u]=j.useState([]),[h,g]=j.useState(!0),[v,_]=j.useState(null),S=j.useCallback(async()=>{await xj(),u(d_()),g(!1)},[]);j.useEffect(()=>{S()},[S]),j.useEffect(()=>{(async()=>{const $=localStorage.getItem(BT),Z=Date.now();if(!($&&(Z-parseInt($,10))/36e5<rw)){if(Math.random()<aw){const ie=await Nj();ie&&(_(ie),a?.(ie),S())}localStorage.setItem(BT,Z.toString())}})()},[a,S]);const w=j.useCallback(async z=>{const{success:$,effectValue:Z}=await wj(z);if(!$)return null;const ie=o.find(_e=>_e.id===z);if(!ie)return null;switch(ie.template.effect_type){case"xp_bonus":Z.amount&&await n(Z.amount,`Event: ${ie.template.name}`,"event",z);break;case"energy_restore":Z.amount&&e&&await e(Z.amount,`Event: ${ie.template.name}`);break;case"streak_shield":Z.shields&&s&&await s(Z.shields);break}return S(),ie},[o,n,e,s,S]),C=j.useCallback(()=>{_(null)},[]),q=j.useCallback(()=>o.filter(z=>!z.is_claimed),[o]),X=j.useCallback(()=>o.filter(z=>z.is_claimed&&z.template.type==="modifier"&&z.time_remaining>0),[o]),O=j.useCallback(()=>o.some(z=>z.is_claimed&&z.template.effect_type==="xp_multiplier"&&z.time_remaining>0),[o]),V=j.useCallback(()=>{const z=o.find($=>$.is_claimed&&$.template.effect_type==="xp_multiplier"&&$.time_remaining>0);if(!z)return 1;try{return JSON.parse(z.template.effect_value).multiplier||1}catch{return 1}},[o]);return{activeEvents:o,loading:h,pendingEvent:v,refresh:S,claimEvent:w,dismissPendingEvent:C,getUnclaimedEvents:q,getActiveModifiers:X,hasActiveXpMultiplier:O,getXpMultiplier:V}}function Cj(){const e=re().exec("SELECT id, name, description, icon, color, sort_order FROM skill_branches ORDER BY sort_order");return e.length?e[0].values.map(s=>({id:s[0],name:s[1],description:s[2],icon:s[3],color:s[4],sort_order:s[5]})):[]}function Ij(){const e=re().exec("SELECT id, node_id, unlocked_at FROM unlocked_skills");return e.length?e[0].values.map(s=>({id:s[0],node_id:s[1],unlocked_at:s[2]})):[]}function kj(){const e=re().exec(`
    SELECT sn.id, sn.branch_id, sn.name, sn.description, sn.icon, sn.tier, sn.position, sn.xp_cost,
           sn.prerequisite_node_id, sn.effect_type, sn.effect_value, sn.is_capstone,
           us.unlocked_at, sb.name as branch_name, sb.color as branch_color
    FROM skill_nodes sn
    LEFT JOIN unlocked_skills us ON sn.id = us.node_id
    JOIN skill_branches sb ON sn.branch_id = sb.id
    ORDER BY sb.sort_order, sn.tier, sn.position
  `);if(!e.length)return[];const s=new Set(Ij().map(a=>a.node_id));return e[0].values.map(a=>{const o=a[0],u=a[8],h=a[12]!==null,g=!h&&(u===null||s.has(u));return{id:o,branch_id:a[1],name:a[2],description:a[3],icon:a[4],tier:a[5],position:a[6],xp_cost:a[7],prerequisite_node_id:u,effect_type:a[9],effect_value:a[10],is_capstone:!!a[11],unlocked:h,unlocked_at:a[12],can_unlock:g,branch_name:a[13],branch_color:a[14]}})}async function Lj(n){const e=re(),s=e.exec("SELECT 1 FROM unlocked_skills WHERE node_id = ?",[n]);return s.length&&s[0].values.length?!1:(e.run("INSERT INTO unlocked_skills (node_id) VALUES (?)",[n]),await ye(),!0)}function jj(){const e=re().exec(`
    SELECT sn.effect_value FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
    WHERE sn.effect_type IN ('stat_bonus', 'combined')
  `);if(!e.length)return{};const s={};for(const a of e[0].values)try{const o=JSON.parse(a[0]);for(const[u,h]of Object.entries(o))typeof h=="number"&&!u.includes("_bonus")&&(s[u]=(s[u]||0)+h)}catch{}return s}function Lm(){const e=re().exec(`
    SELECT COALESCE(SUM(sn.xp_cost), 0) FROM skill_nodes sn
    JOIN unlocked_skills us ON sn.id = us.node_id
  `);return e.length?e[0].values[0][0]:0}function Dj({totalXP:n}){const[e,s]=j.useState([]),[a,o]=j.useState([]),[u,h]=j.useState(!0),g=j.useCallback(()=>{s(Cj()),o(kj()),h(!1)},[]);j.useEffect(()=>{g()},[g]);const v=j.useCallback(async O=>{const V=a.find(ie=>ie.id===O);if(!V||V.unlocked||!V.can_unlock)return!1;const z=Lm();if(n-z<V.xp_cost)return!1;const Z=await Lj(O);return Z&&g(),Z},[a,n,g]),_=j.useCallback(O=>a.filter(V=>V.branch_id===O),[a]),S=j.useCallback(()=>a.filter(O=>O.unlocked).length,[a]),w=j.useCallback(()=>a.length,[a]),C=j.useCallback(()=>jj(),[]),q=j.useCallback(()=>{const O=Lm();return n-O},[n]),X=j.useCallback(()=>Lm(),[]);return{branches:e,nodes:a,loading:u,refresh:g,unlockSkill:v,getNodesByBranch:_,getUnlockedCount:S,getTotalNodes:w,getStatBonuses:C,getAvailableXp:q,getXpSpent:X}}function Oj(){const e=re().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes ORDER BY name
  `);return e.length?e[0].values.map(O1):[]}function Mj(n){const s=re().exec(`
    SELECT id, key, name, description, icon, primary_stat, stat_bonuses, xp_bonus_type, xp_bonus_percent, special_ability, special_ability_desc
    FROM character_classes WHERE id = ?
  `,[n]);return!s.length||!s[0].values.length?null:O1(s[0].values[0])}function uf(){const e=re().exec(`
    SELECT id, class_id, selected_at, last_changed_at, changes_remaining
    FROM character_class_selection WHERE id = 1
  `);if(!e.length||!e[0].values.length)return null;const s=e[0].values[0];return{id:s[0],class_id:s[1],selected_at:s[2],last_changed_at:s[3],changes_remaining:s[4]}}function D1(){const n=uf();return!n||!n.class_id?null:Mj(n.class_id)}function Uj(){const n=Oj(),e=uf();return n.map(s=>({...s,is_selected:e?.class_id===s.id}))}async function Vj(n){const e=re(),s=uf();if(s?.class_id&&s.changes_remaining<=0)return!1;const a=s?.class_id?s.changes_remaining-1:s?.changes_remaining||3;return e.run("UPDATE character_class_selection SET class_id = ?, selected_at = COALESCE(selected_at, datetime('now')), last_changed_at = datetime('now'), changes_remaining = ? WHERE id = 1",[n,a]),await ye(),!0}function Bj(){const n=D1();if(!n)return{};try{return JSON.parse(n.stat_bonuses)}catch{return{}}}function qj(n){const e=D1();return e&&e.xp_bonus_type===n?e.xp_bonus_percent:0}function O1(n){return{id:n[0],key:n[1],name:n[2],description:n[3],icon:n[4],primary_stat:n[5],stat_bonuses:n[6],xp_bonus_type:n[7],xp_bonus_percent:n[8],special_ability:n[9],special_ability_desc:n[10]}}function Pj(){const[n,e]=j.useState([]),[s,a]=j.useState(null),[o,u]=j.useState(!0),h=j.useCallback(()=>{e(Uj()),a(uf()),u(!1)},[]);j.useEffect(()=>{h()},[h]);const g=j.useCallback(async C=>{const q=await Vj(C);return q&&h(),q},[h]),v=j.useCallback(()=>n.find(C=>C.is_selected)||null,[n]),_=j.useCallback(()=>Bj(),[]),S=j.useCallback(C=>qj(C),[]),w=j.useCallback(()=>!s||!s.class_id?!0:s.changes_remaining>0,[s]);return{classes:n,selection:s,loading:o,refresh:h,selectClass:g,getSelectedClass:v,getStatBonuses:_,getXpBonus:S,canChangeClass:w}}function M1(){const e=re().exec(`
    SELECT id, name, description, icon, unlock_level, background_color, position_x, position_y, connected_to, challenges, rewards
    FROM territories ORDER BY unlock_level
  `);return e.length?e[0].values.map($j):[]}function Fj(n){const e=re(),s=M1(),a=e.exec(`
    SELECT id, territory_id, discovered_at, completed_at, challenges_completed, is_current
    FROM territory_progress
  `),o=new Map;if(a.length)for(const u of a[0].values)o.set(u[1],{id:u[0],territory_id:u[1],discovered_at:u[2],completed_at:u[3],challenges_completed:u[4],is_current:!!u[5]});return s.map(u=>{const h=o.get(u.id);return{...u,discovered:!!h,discovered_at:h?.discovered_at||null,completed:!!h?.completed_at,completed_at:h?.completed_at||null,is_current:h?.is_current||!1,is_locked:u.unlock_level>n,challenges_completed:h?JSON.parse(h.challenges_completed):[]}})}function zj(){const e=re().exec(`
    SELECT t.id, t.name, t.description, t.icon, t.unlock_level, t.background_color, t.position_x, t.position_y, t.connected_to, t.challenges, t.rewards,
           tp.id, tp.discovered_at, tp.completed_at, tp.challenges_completed, tp.is_current
    FROM territories t
    JOIN territory_progress tp ON t.id = tp.territory_id
    WHERE tp.is_current = 1
  `);if(!e.length||!e[0].values.length)return null;const s=e[0].values[0];return{id:s[0],name:s[1],description:s[2],icon:s[3],unlock_level:s[4],background_color:s[5],position_x:s[6],position_y:s[7],connected_to:s[8],challenges:s[9],rewards:s[10],discovered:!0,discovered_at:s[12],completed:s[13]!==null,completed_at:s[13],is_current:!0,is_locked:!1,challenges_completed:JSON.parse(s[14])}}async function Hj(n){const e=re(),s=e.exec("SELECT 1 FROM territory_progress WHERE territory_id = ?",[n]);s.length&&s[0].values.length||(e.run("INSERT INTO territory_progress (territory_id) VALUES (?)",[n]),await ye())}async function Gj(n){const e=re();e.run("UPDATE territory_progress SET is_current = 0"),e.run("UPDATE territory_progress SET is_current = 1 WHERE territory_id = ?",[n]),await ye()}async function Xj(n,e){const s=re(),a=s.exec("SELECT challenges_completed FROM territory_progress WHERE territory_id = ?",[n]);if(!a.length||!a[0].values.length)return;const o=JSON.parse(a[0].values[0][0]);o.includes(e)||(o.push(e),s.run("UPDATE territory_progress SET challenges_completed = ? WHERE territory_id = ?",[JSON.stringify(o),n]),await ye())}async function Yj(n){re().run("UPDATE territory_progress SET completed_at = datetime('now') WHERE territory_id = ?",[n]),await ye()}function $j(n){return{id:n[0],name:n[1],description:n[2],icon:n[3],unlock_level:n[4],background_color:n[5],position_x:n[6],position_y:n[7],connected_to:n[8],challenges:n[9],rewards:n[10]}}function Qj({characterLevel:n,grantXP:e}){const[s,a]=j.useState([]),[o,u]=j.useState(null),[h,g]=j.useState(!0),v=j.useCallback(()=>{a(Fj(n)),u(zj()),g(!1)},[n]);j.useEffect(()=>{v()},[v]),j.useEffect(()=>{(async()=>{const O=M1();for(const V of O)V.unlock_level<=n&&(s.find($=>$.id===V.id)?.discovered||await Hj(V.id));v()})()},[n,s,v]);const _=j.useCallback(async X=>{const O=s.find(V=>V.id===X);return!O||O.is_locked||!O.discovered?!1:(await Gj(X),v(),!0)},[s,v]),S=j.useCallback(async(X,O)=>{await Xj(X,O),v()},[v]),w=j.useCallback(async X=>{const O=s.find(V=>V.id===X);if(!(!O||O.completed)){await Yj(X);try{const V=JSON.parse(O.rewards);V.xp&&await e(V.xp,`Completed territory: ${O.name}`,"territory",X)}catch{}v()}},[s,e,v]),C=j.useCallback(()=>s.filter(X=>X.discovered),[s]),q=j.useCallback(()=>s.filter(X=>X.completed),[s]);return{territories:s,currentTerritory:o,loading:h,refresh:v,travelTo:_,completeChallenge:S,completeTerritory:w,getDiscoveredTerritories:C,getCompletedTerritories:q}}function Kj(n){const s=re().exec(`
    SELECT id, name, description, icon, type, slot, rarity, stat_effects, special_effect, stack_limit
    FROM item_definitions WHERE id = ?
  `,[n]);return!s.length||!s[0].values.length?null:tD(s[0].values[0])}function U1(){const e=re().exec(`
    SELECT i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM inventory i
    JOIN item_definitions d ON i.item_id = d.id
    ORDER BY d.type, d.rarity DESC, d.name
  `);return e.length?e[0].values.map(s=>({id:s[0],item_id:s[1],quantity:s[2],acquired_at:s[3],source:s[4],definition:{id:s[5],name:s[6],description:s[7],icon:s[8],type:s[9],slot:s[10],rarity:s[11],stat_effects:s[12],special_effect:s[13],stack_limit:s[14]}})):[]}function V1(){const e=re().exec(`
    SELECT e.id, e.slot, e.inventory_id, e.equipped_at,
           i.id, i.item_id, i.quantity, i.acquired_at, i.source,
           d.id, d.name, d.description, d.icon, d.type, d.slot, d.rarity, d.stat_effects, d.special_effect, d.stack_limit
    FROM equipped_items e
    JOIN inventory i ON e.inventory_id = i.id
    JOIN item_definitions d ON i.item_id = d.id
  `);return e.length?e[0].values.map(s=>({id:s[0],slot:s[1],inventory_id:s[2],equipped_at:s[3],item:{id:s[4],item_id:s[5],quantity:s[6],acquired_at:s[7],source:s[8],definition:{id:s[9],name:s[10],description:s[11],icon:s[12],type:s[13],slot:s[14],rarity:s[15],stat_effects:s[16],special_effect:s[17],stack_limit:s[18]}}})):[]}async function Wj(n,e=1,s="unknown"){const a=re(),o=Kj(n);if(!o)throw new Error("Item not found");if(o.stack_limit>1){const h=a.exec("SELECT id, quantity FROM inventory WHERE item_id = ?",[n]);if(h.length&&h[0].values.length){const g=h[0].values[0][0],v=h[0].values[0][1],_=Math.min(v+e,o.stack_limit);return a.run("UPDATE inventory SET quantity = ? WHERE id = ?",[_,g]),await ye(),{id:g,item_id:n,quantity:_,acquired_at:"",source:s}}}a.run("INSERT INTO inventory (item_id, quantity, source) VALUES (?, ?, ?)",[n,e,s]);const u=a.exec("SELECT last_insert_rowid()");return await ye(),{id:u[0].values[0][0],item_id:n,quantity:e,acquired_at:"",source:s}}async function qT(n,e=1){const s=re(),a=s.exec("SELECT quantity FROM inventory WHERE id = ?",[n]);if(!a.length||!a[0].values.length)return;a[0].values[0][0]<=e?s.run("DELETE FROM inventory WHERE id = ?",[n]):s.run("UPDATE inventory SET quantity = quantity - ? WHERE id = ?",[e,n]),await ye()}async function Jj(n){const e=re(),s=U1().find(a=>a.id===n);!s||!s.definition.slot||(e.run("DELETE FROM equipped_items WHERE slot = ?",[s.definition.slot]),e.run("INSERT INTO equipped_items (slot, inventory_id) VALUES (?, ?)",[s.definition.slot,n]),await ye())}async function Zj(n){re().run("DELETE FROM equipped_items WHERE slot = ?",[n]),await ye()}function eD(){const n=V1(),e={};for(const s of n)try{const a=JSON.parse(s.item.definition.stat_effects);for(const[o,u]of Object.entries(a))typeof u=="number"&&(e[o]=(e[o]||0)+u)}catch{}return e}function tD(n){return{id:n[0],name:n[1],description:n[2],icon:n[3],type:n[4],slot:n[5],rarity:n[6],stat_effects:n[7],special_effect:n[8],stack_limit:n[9]}}function nD({grantXP:n,addEnergy:e,addShields:s}={}){const[a,o]=j.useState([]),[u,h]=j.useState([]),[g,v]=j.useState(!0),_=j.useCallback(()=>{o(U1()),h(V1()),v(!1)},[]);j.useEffect(()=>{_()},[_]);const S=j.useCallback(async($,Z=1,ie="reward")=>{await Wj($,Z,ie),_()},[_]),w=j.useCallback(async($,Z=1)=>{await qT($,Z),_()},[_]),C=j.useCallback(async $=>{await Jj($),_()},[_]),q=j.useCallback(async $=>{await Zj($),_()},[_]),X=j.useCallback(async $=>{const Z=a.find(D=>D.id===$);if(!Z||Z.definition.type!=="consumable")return!1;const ie=Z.definition.special_effect;if(!ie)return!1;const[_e,Te]=ie.split(":"),M=parseInt(Te,10);switch(_e){case"restore_energy":e&&await e(M,`Used ${Z.definition.name}`);break;case"grant_xp":n&&await n(M,`Used ${Z.definition.name}`,"consumable",$);break;case"add_shield":s&&await s(M);break;default:return!1}return await qT($,1),_(),!0},[a,n,e,s,_]),O=j.useCallback(()=>eD(),[]),V=j.useCallback($=>u.find(Z=>Z.slot===$)||null,[u]),z=j.useCallback($=>a.filter(Z=>Z.definition.type===$),[a]);return{inventory:a,equipped:u,loading:g,refresh:_,addItem:S,removeItem:w,equipItem:C,unequipItem:q,useConsumable:X,getStatBonuses:O,getEquipmentBySlot:V,getInventoryByType:z}}const sD="_appShell_w38qa_1",iD="_sidebar_w38qa_13",aD="_sidebarLogo_w38qa_41",rD="_logoTitle_w38qa_51",oD="_logoSubtitle_w38qa_67",lD="_sidebarNav_w38qa_81",cD="_navItem_w38qa_97",uD="_navItemActive_w38qa_147",dD="_navIcon_w38qa_179",fD="_header_w38qa_193",hD="_headerLeft_w38qa_227",mD="_characterName_w38qa_239",pD="_levelBadge_w38qa_253",_D="_headerXP_w38qa_283",gD="_headerEnergy_w38qa_291",yD="_headerRight_w38qa_299",ED="_main_w38qa_313",vD="_xpFloat_w38qa_331",Ln={appShell:sD,sidebar:iD,sidebarLogo:aD,logoTitle:rD,logoSubtitle:oD,sidebarNav:lD,navItem:cD,navItemActive:uD,navIcon:dD,header:fD,headerLeft:hD,characterName:mD,levelBadge:pD,headerXP:_D,headerEnergy:gD,headerRight:yD,main:ED,xpFloat:vD},TD=[{id:"character",label:"Character",icon:""},{id:"quests",label:"Quest Log",icon:""},{id:"buffs",label:"Buffs",icon:""},{id:"focus",label:"Focus Timer",icon:""},{id:"skills",label:"Skills",icon:""},{id:"inventory",label:"Inventory",icon:""}];function bD({activeTab:n,onTabChange:e}){return c.jsxs("aside",{className:Ln.sidebar,children:[c.jsxs("div",{className:Ln.sidebarLogo,children:[c.jsx("div",{className:Ln.logoTitle,children:"GOAL GAME"}),c.jsx("div",{className:Ln.logoSubtitle,children:"Life Management RPG"})]}),c.jsx("nav",{className:Ln.sidebarNav,children:TD.map(s=>c.jsxs("button",{className:`${Ln.navItem} ${n===s.id?Ln.navItemActive:""}`,onClick:()=>e(s.id),children:[c.jsx("span",{className:Ln.navIcon,children:s.icon}),s.label]},s.id))})]})}const SD="_progressContainer_1jr5p_1",ND="_progressLabel_1jr5p_9",wD="_track_1jr5p_33",xD="_fill_1jr5p_53",AD="_fillGold_1jr5p_67",RD="_fillGreen_1jr5p_77",CD="_fillBlue_1jr5p_85",ID="_shimmer_1jr5p_93",kD="_trackLarge_1jr5p_117",ya={progressContainer:SD,progressLabel:ND,track:wD,fill:xD,fillGold:AD,fillGreen:RD,fillBlue:CD,shimmer:ID,trackLarge:kD};function Oc({value:n,max:e,label:s,showValue:a=!0,color:o="gold",size:u="normal",shimmer:h=!1,className:g}){const v=e>0?Math.min(n/e*100,100):0,_=o==="gold"?ya.fillGold:o==="green"?ya.fillGreen:ya.fillBlue,S=[ya.track,u==="large"&&ya.trackLarge].filter(Boolean).join(" ");return c.jsxs("div",{className:`${ya.progressContainer} ${g||""}`,children:[(s||a)&&c.jsxs("div",{className:ya.progressLabel,children:[s&&c.jsx("span",{children:s}),a&&c.jsxs("span",{children:[n," / ",e]})]}),c.jsx("div",{className:S,children:c.jsx("div",{className:[_,ya.fill,h&&ya.shimmer].filter(Boolean).join(" "),style:{width:`${v}%`}})})]})}const LD="_energyContainer_1u07x_1",jD="_energyBar_1u07x_13",DD="_energyIcon_1u07x_33",OD="_energyTrack_1u07x_41",MD="_energyFill_1u07x_59",UD="_low_1u07x_73",VD="_empty_1u07x_81",BD="_energyText_1u07x_91",qD="_energyBarCompact_1u07x_125",PD="_energyDebuff_1u07x_175",FD="_exhausted_1u07x_199",zD="_debuffIcon_1u07x_207",HD="_energyTooltip_1u07x_217",GD="_tooltipRow_1u07x_251",XD="_tooltipLabel_1u07x_273",YD="_tooltipValue_1u07x_281",Pt={energyContainer:LD,energyBar:jD,energyIcon:DD,energyTrack:OD,energyFill:MD,low:UD,empty:VD,energyText:BD,energyBarCompact:qD,energyDebuff:PD,exhausted:FD,debuffIcon:zD,energyTooltip:HD,tooltipRow:GD,tooltipLabel:XD,tooltipValue:YD};function $D({state:n,percentage:e,isLow:s,isEmpty:a,debuffs:o=[],compact:u=!1}){const[h,g]=j.useState(!1),v=n.max_energy+n.bonus_energy,_=u?Pt.energyBarCompact:Pt.energyBar,S=`${Pt.energyFill} ${a?Pt.empty:s?Pt.low:""}`,w=`${Pt.energyText} ${a?Pt.empty:s?Pt.low:""}`;return c.jsxs("div",{className:Pt.energyContainer,children:[c.jsxs("div",{className:_,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{position:"relative"},children:[c.jsx("span",{className:Pt.energyIcon,children:""}),c.jsx("div",{className:Pt.energyTrack,children:c.jsx("div",{className:S,style:{width:`${e}%`}})}),c.jsxs("span",{className:w,children:[n.current_energy,"/",v]}),h&&c.jsxs("div",{className:Pt.energyTooltip,children:[c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Current"}),c.jsx("span",{className:Pt.tooltipValue,children:n.current_energy})]}),c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Max"}),c.jsx("span",{className:Pt.tooltipValue,children:n.max_energy})]}),n.bonus_energy>0&&c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Bonus"}),c.jsxs("span",{className:Pt.tooltipValue,children:["+",n.bonus_energy]})]}),c.jsxs("div",{className:Pt.tooltipRow,children:[c.jsx("span",{className:Pt.tooltipLabel,children:"Regen"}),c.jsxs("span",{className:Pt.tooltipValue,children:[$T,"/hr"]})]})]})]}),o.map((C,q)=>c.jsxs("div",{className:`${Pt.energyDebuff} ${C.name==="Exhausted"?Pt.exhausted:""}`,children:[c.jsx("span",{className:Pt.debuffIcon,children:C.icon}),C.name]},q))]})}function QD({character:n,energyState:e}){const s=pp(n.total_xp),a=e?e.current_energy/(e.max_energy+e.bonus_energy)*100:0,o=e?e.current_energy<=Um:!1,u=e?e.current_energy<=Vm:!1;return c.jsxs("header",{className:Ln.header,children:[c.jsxs("div",{className:Ln.headerLeft,children:[c.jsx("span",{className:Ln.characterName,children:n.name}),c.jsxs("span",{className:Ln.levelBadge,children:["Lv. ",n.level,"  ",n.title]})]}),c.jsxs("div",{className:Ln.headerRight,children:[e&&c.jsx("div",{className:Ln.headerEnergy,children:c.jsx($D,{state:e,percentage:a,isLow:o,isEmpty:u,compact:!0})}),c.jsx("div",{className:Ln.headerXP,children:c.jsx(Oc,{value:s.current,max:s.needed,label:"XP",shimmer:!0})})]})]})}const KD="_levelUpOverlay_dig0a_1",WD="_levelUpContent_dig0a_23",JD="_levelUpIcon_dig0a_33",ZD="_levelUpTitle_dig0a_47",eO="_levelUpLevel_dig0a_65",tO="_levelUpTitleName_dig0a_79",nO="_dismissText_dig0a_95",eo={levelUpOverlay:KD,levelUpContent:WD,levelUpIcon:JD,levelUpTitle:ZD,levelUpLevel:eO,levelUpTitleName:tO,dismissText:nO};function sO({level:n,title:e,onDismiss:s}){return j.useEffect(()=>{const a=setTimeout(s,5e3),o=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&s()};return window.addEventListener("keydown",o),()=>{clearTimeout(a),window.removeEventListener("keydown",o)}},[s]),c.jsx("div",{className:eo.levelUpOverlay,onClick:s,children:c.jsxs("div",{className:eo.levelUpContent,children:[c.jsx("span",{className:eo.levelUpIcon,children:""}),c.jsx("div",{className:eo.levelUpTitle,children:"LEVEL UP"}),c.jsxs("div",{className:eo.levelUpLevel,children:["Level ",n]}),c.jsx("div",{className:eo.levelUpTitleName,children:e}),c.jsx("div",{className:eo.dismissText,children:"Click or press any key to continue"})]})})}const iO="_panel_zw35t_1",aO="_panelHeader_zw35t_69",rO="_panelGlow_zw35t_93",jm={panel:iO,panelHeader:aO,panelGlow:rO};function wt({children:n,header:e,glow:s,className:a,style:o}){const u=[jm.panel,s&&jm.panelGlow,a].filter(Boolean).join(" ");return c.jsxs("div",{className:u,style:o,children:[e&&c.jsx("div",{className:jm.panelHeader,children:e}),n]})}const oO="_button_vi3e3_1",lO="_primary_vi3e3_61",cO="_danger_vi3e3_83",uO="_small_vi3e3_103",dO="_ghost_vi3e3_113",fO="_fullWidth_vi3e3_133",cd={button:oO,primary:lO,danger:cO,small:uO,ghost:dO,fullWidth:fO};function Le({variant:n="default",size:e="normal",fullWidth:s,children:a,className:o,...u}){const h=[cd.button,n!=="default"&&cd[n],e==="small"&&cd.small,s&&cd.fullWidth,o].filter(Boolean).join(" ");return c.jsx("button",{className:h,...u,children:a})}const hO="_inputGroup_1helv_1",mO="_label_1helv_13",pO="_input_1helv_1",_O="_select_1helv_31",gO="_textarea_1helv_31",Na={inputGroup:hO,label:mO,input:pO,select:_O,textarea:gO};function Xi({label:n,className:e,...s}){return c.jsxs("div",{className:Na.inputGroup,children:[n&&c.jsx("label",{className:Na.label,children:n}),c.jsx("input",{className:`${Na.input} ${e||""}`,...s})]})}function ba({label:n,children:e,className:s,...a}){return c.jsxs("div",{className:Na.inputGroup,children:[n&&c.jsx("label",{className:Na.label,children:n}),c.jsx("select",{className:`${Na.select} ${s||""}`,...a,children:e})]})}function Md({label:n,className:e,...s}){return c.jsxs("div",{className:Na.inputGroup,children:[n&&c.jsx("label",{className:Na.label,children:n}),c.jsx("textarea",{className:`${Na.textarea} ${e||""}`,...s})]})}const yO=[{minLevel:50,tier:7},{minLevel:40,tier:6},{minLevel:30,tier:5},{minLevel:22,tier:4},{minLevel:15,tier:3},{minLevel:10,tier:2},{minLevel:5,tier:1},{minLevel:1,tier:0}];function EO(n){for(const{minLevel:e,tier:s}of yO)if(n>=e)return s;return 0}function wc(n){if(n<5)return 0;const a=(n-5)/25;return Math.min(Math.pow(a,.7),1)}const xc={stamina:"#2ecc71",willpower:"#9b59b6",health:"#e74c3c",focus:"#3498db",charisma:"#e67e22"},B1={0:{primary:"#8b7355",secondary:"#6b5344",accent:"#a08060",skin:"#e8c4a0",hair:"#4a3728"},1:{primary:"#8b4513",secondary:"#654321",accent:"#cd853f",skin:"#e8c4a0",hair:"#4a3728"},2:{primary:"#708090",secondary:"#4a5568",accent:"#a0aec0",skin:"#e8c4a0",hair:"#4a3728"},3:{primary:"#5a6672",secondary:"#3d4852",accent:"#8892a0",skin:"#e8c4a0",hair:"#4a3728"},4:{primary:"#b8860b",secondary:"#8b6914",accent:"#daa520",skin:"#e8c4a0",hair:"#4a3728"},5:{primary:"#ffd700",secondary:"#b8860b",accent:"#ffed4a",skin:"#e8c4a0",hair:"#4a3728",glow:"#ffd700"},6:{primary:"#e6e6fa",secondary:"#9370db",accent:"#dda0dd",skin:"#e8c4a0",hair:"#4a3728",glow:"#9370db"},7:{primary:"#8b0000",secondary:"#4a0000",accent:"#ff4500",skin:"#e8c4a0",hair:"#ffd700",glow:"#ff4500",crown:"#ffd700"}},Il=64;function va(n,e,s,a,o=1){n.fillStyle=a,n.fillRect(e,s,o,o)}function Dt(n,e,s,a,o,u){n.fillStyle=u,n.fillRect(e,s,a,o)}function vO({ctx:n,palette:e}){Dt(n,27,7,10,4,e.hair),Dt(n,28,8,8,8,e.skin),Dt(n,28,7,8,2,e.hair),va(n,30,11,"#2c3e50"),va(n,33,11,"#2c3e50")}function TO({ctx:n,palette:e,tier:s}){Dt(n,26,16,12,16,e.primary),Dt(n,31,18,2,12,e.secondary),s>=2&&(Dt(n,24,16,3,4,e.accent),Dt(n,37,16,3,4,e.accent)),s>=1&&(Dt(n,26,28,12,2,e.secondary),va(n,31,28,e.accent,2)),s>=3&&(Dt(n,28,18,8,6,e.accent),Dt(n,30,19,4,4,e.secondary))}function bO({ctx:n,palette:e,tier:s}){Dt(n,22,18,4,12,e.primary),Dt(n,22,30,4,3,e.skin),Dt(n,38,18,4,12,e.primary),Dt(n,38,30,4,3,e.skin),s>=2&&(Dt(n,22,18,4,3,e.accent),Dt(n,38,18,4,3,e.accent)),s>=4&&(Dt(n,21,28,5,5,e.accent),Dt(n,38,28,5,5,e.accent))}function SO({ctx:n,palette:e,tier:s}){Dt(n,27,32,5,14,s>=3?e.secondary:e.primary),Dt(n,26,46,6,4,e.secondary),Dt(n,32,32,5,14,s>=3?e.secondary:e.primary),Dt(n,32,46,6,4,e.secondary),s>=2&&(Dt(n,26,46,6,2,e.accent),Dt(n,32,46,6,2,e.accent))}function NO({ctx:n,palette:e,tier:s}){if(s<3)return;const o={3:"#8b0000",4:"#4a0082",5:"#1a1a2e",6:"#4a0082",7:"#8b0000"}[s]||e.secondary;n.fillStyle=o,n.beginPath(),n.moveTo(24,16),n.lineTo(40,16),n.lineTo(42,48),n.lineTo(22,48),n.closePath(),n.fill(),n.fillStyle=e.accent,n.fillRect(22,16,2,32),n.fillRect(40,16,2,32)}function wO({ctx:n,palette:e,tier:s}){if(s<2)return;const a=28,o=8;s===2?Dt(n,a-1,o-2,10,3,e.secondary):s>=3&&s<7&&(Dt(n,a-2,o-3,12,5,e.accent),Dt(n,a,o+2,8,2,"#1a1a2e"),s>=4&&Dt(n,a+3,o-6,2,4,"#e74c3c"))}function xO({ctx:n,palette:e}){const s="crown"in e?e.crown:"#ffd700",a=28,o=8;Dt(n,a-2,o-4,12,3,s),va(n,a-1,o-6,s,2),va(n,a+3,o-7,s,2),va(n,a+7,o-6,s,2),va(n,a,o-5,"#e74c3c"),va(n,a+4,o-6,"#3498db"),va(n,a+8,o-5,"#2ecc71")}function AO({ctx:n}){const e="#8b0000",s="#ff4500";n.fillStyle=e,n.beginPath(),n.moveTo(22,20),n.lineTo(8,10),n.lineTo(6,16),n.lineTo(10,24),n.lineTo(14,32),n.lineTo(20,36),n.lineTo(22,28),n.closePath(),n.fill(),n.fillStyle=s,n.beginPath(),n.moveTo(20,22),n.lineTo(12,14),n.lineTo(12,20),n.lineTo(16,28),n.closePath(),n.fill(),n.fillStyle=e,n.beginPath(),n.moveTo(42,20),n.lineTo(56,10),n.lineTo(58,16),n.lineTo(54,24),n.lineTo(50,32),n.lineTo(44,36),n.lineTo(42,28),n.closePath(),n.fill(),n.fillStyle=s,n.beginPath(),n.moveTo(44,22),n.lineTo(52,14),n.lineTo(52,20),n.lineTo(48,28),n.closePath(),n.fill()}function RO(n,e){if(e<5)return;const s=B1[e],a="glow"in s?s.glow:"#ffd700",o=n.createRadialGradient(32,32,10,32,32,40);o.addColorStop(0,`${a}40`),o.addColorStop(.5,`${a}20`),o.addColorStop(1,`${a}00`),n.fillStyle=o,n.fillRect(0,0,Il,Il)}function CO(n,e){const s=Math.max(0,Math.min(7,e)),a=B1[s];n.clearRect(0,0,Il,Il),n.imageSmoothingEnabled=!1;const o={ctx:n,palette:a,tier:s};RO(n,s),s>=7&&AO(o),s>=3&&NO(o),SO(o),TO(o),bO(o),vO(o),s>=7?xO(o):s>=2&&wO(o)}const IO="_spriteContainer_1ozus_3",kO="_spriteCanvas_1ozus_25",LO="_auraStamina_1ozus_79",jO="_auraWillpower_1ozus_81",DO="_auraHealth_1ozus_83",OO="_auraFocus_1ozus_85",MO="_auraCharisma_1ozus_87",UO="_auraLayer_1ozus_99",VO="_small_1ozus_417",BO="_large_1ozus_489",ws={spriteContainer:IO,spriteCanvas:kO,auraStamina:LO,auraWillpower:jO,auraHealth:DO,auraFocus:OO,auraCharisma:MO,auraLayer:UO,small:VO,large:BO};function q1({level:n,stats:e,size:s="medium"}){const a=j.useRef(null),o=EO(n);j.useEffect(()=>{const v=a.current;if(!v)return;const _=v.getContext("2d");_&&CO(_,o)},[o]);const u={stamina:wc(e.stamina),willpower:wc(e.willpower),health:wc(e.health),focus:wc(e.focus),charisma:wc(e.charisma)},h={"--aura-stamina-intensity":u.stamina,"--aura-stamina-color":xc.stamina,"--aura-willpower-intensity":u.willpower,"--aura-willpower-color":xc.willpower,"--aura-health-intensity":u.health,"--aura-health-color":xc.health,"--aura-focus-intensity":u.focus,"--aura-focus-color":xc.focus,"--aura-charisma-intensity":u.charisma,"--aura-charisma-color":xc.charisma},g=s==="small"?ws.small:s==="large"?ws.large:"";return c.jsxs("div",{className:`${ws.spriteContainer} ${g}`,style:h,children:[u.stamina>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraStamina}`}),u.willpower>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraWillpower}`}),u.health>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraHealth}`}),u.focus>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraFocus}`}),u.charisma>0&&c.jsx("div",{className:`${ws.auraLayer} ${ws.auraCharisma}`}),c.jsx("canvas",{ref:a,width:Il,height:Il,className:ws.spriteCanvas})]})}const qO="_characterGrid_1frbt_1",PO="_characterMain_1frbt_13",FO="_characterSide_1frbt_25",zO="_profileSection_1frbt_37",HO="_characterNameDisplay_1frbt_61",GO="_characterTitleDisplay_1frbt_75",XO="_xpSection_1frbt_89",YO="_totalXP_1frbt_97",$O="_statsGrid_1frbt_113",QO="_statRow_1frbt_125",KO="_statName_1frbt_137",WO="_statBar_1frbt_157",JO="_statValue_1frbt_165",ZO="_buffsList_1frbt_185",e3="_activeBuff_1frbt_197",t3="_buffType_1frbt_219",n3="_debuffType_1frbt_229",s3="_buffIcon_1frbt_239",i3="_buffInfo_1frbt_247",a3="_buffName_1frbt_255",r3="_buffTimer_1frbt_265",o3="_emptyState_1frbt_275",l3="_nameEditRow_1frbt_291",c3="_xpLogList_1frbt_307",u3="_xpLogEntry_1frbt_323",d3="_xpLogReason_1frbt_343",f3="_xpLogAmount_1frbt_351",h3="_negative_1frbt_363",m3="_compactScreen_1frbt_385",p3="_compactStats_1frbt_397",_3="_compactStatsTitle_1frbt_409",g3="_compactStatsGrid_1frbt_425",y3="_compactStatItem_1frbt_437",E3="_compactStatName_1frbt_449",v3="_compactStatValue_1frbt_471",T3="_compactBuffs_1frbt_487",b3="_compactBuffsTitle_1frbt_497",S3="_compactBuffsList_1frbt_515",N3="_compactBuff_1frbt_487",w3="_compactBuffIcon_1frbt_555",x3="_compactBuffName_1frbt_563",A3="_compactBuffTimer_1frbt_575",R3="_compactXpLog_1frbt_585",C3="_compactXpEntry_1frbt_609",I3="_positive_1frbt_641",He={characterGrid:qO,characterMain:PO,characterSide:FO,profileSection:zO,characterNameDisplay:HO,characterTitleDisplay:GO,xpSection:XO,totalXP:YO,statsGrid:$O,statRow:QO,statName:KO,statBar:WO,statValue:JO,buffsList:ZO,activeBuff:e3,buffType:t3,debuffType:n3,buffIcon:s3,buffInfo:i3,buffName:a3,buffTimer:r3,emptyState:o3,nameEditRow:l3,xpLogList:c3,xpLogEntry:u3,xpLogReason:d3,xpLogAmount:f3,negative:h3,compactScreen:m3,compactStats:p3,compactStatsTitle:_3,compactStatsGrid:g3,compactStatItem:y3,compactStatName:E3,compactStatValue:v3,compactBuffs:T3,compactBuffsTitle:b3,compactBuffsList:S3,compactBuff:N3,compactBuffIcon:w3,compactBuffName:x3,compactBuffTimer:A3,compactXpLog:R3,compactXpEntry:C3,positive:I3},PT={stamina:"green",willpower:"blue",health:"gold",focus:"blue",charisma:"gold"};function k3({character:n,stats:e,activeBuffs:s,xpLog:a,onNameChange:o,compact:u=!1}){const h=pp(n.total_xp),[g,v]=j.useState(!1),[_,S]=j.useState(n.name),[w,C]=j.useState(!1),q=()=>{_.trim()&&(o(_.trim()),v(!1))};function X(O){const V=new Date,$=new Date(O+"Z").getTime()-V.getTime();if($<=0)return"Expired";const Z=Math.floor($/36e5),ie=Math.floor($%36e5/6e4);return Z>0?`${Z}h ${ie}m remaining`:`${ie}m remaining`}return u?c.jsxs("div",{className:He.compactScreen,children:[c.jsxs("div",{className:He.compactStats,children:[c.jsx("div",{className:He.compactStatsTitle,children:"Stats"}),c.jsx("div",{className:He.compactStatsGrid,children:Bm.map(O=>c.jsxs("div",{className:He.compactStatItem,children:[c.jsx("span",{className:He.compactStatName,children:O}),c.jsx(Oc,{value:e[O],max:30,showValue:!1,color:PT[O]||"gold"}),c.jsx("span",{className:He.compactStatValue,children:e[O]})]},O))})]}),s.length>0&&c.jsxs("div",{className:He.compactBuffs,children:[c.jsxs("div",{className:He.compactBuffsTitle,children:["Active Effects (",s.length,")"]}),c.jsx("div",{className:He.compactBuffsList,children:s.map(O=>{const V=Mc(O.stat_effects);return Object.entries(V).map(([z,$])=>`${$>0?"+":""}${$} ${z}`).join(", "),c.jsxs("div",{className:`${He.compactBuff} ${O.type==="buff"?He.buffType:He.debuffType}`,children:[c.jsx("span",{className:He.compactBuffIcon,children:O.icon}),c.jsx("span",{className:He.compactBuffName,children:O.name}),c.jsx("span",{className:He.compactBuffTimer,children:X(O.expires_at)})]},O.id)})})]}),c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>C(!w),style:{marginTop:12},children:w?"Hide XP History":"Show XP History"}),w&&a.length>0&&c.jsx("div",{className:He.compactXpLog,children:a.slice(0,10).map(O=>c.jsxs("div",{className:He.compactXpEntry,children:[c.jsx("span",{children:O.reason}),c.jsxs("span",{className:O.amount>0?He.positive:He.negative,children:[O.amount>0?"+":"",O.amount," XP"]})]},O.id))})]}):c.jsxs("div",{className:He.characterGrid,children:[c.jsxs("div",{className:He.characterMain,children:[c.jsx(wt,{children:c.jsxs("div",{className:He.profileSection,children:[c.jsx(q1,{level:n.level,stats:e}),g?c.jsxs("div",{className:He.nameEditRow,children:[c.jsx(Xi,{value:_,onChange:O=>S(O.target.value),onKeyDown:O=>O.key==="Enter"&&q(),autoFocus:!0}),c.jsx(Le,{size:"small",variant:"primary",onClick:q,children:"Save"}),c.jsx(Le,{size:"small",onClick:()=>v(!1),children:"Cancel"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:He.characterNameDisplay,children:n.name}),c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>v(!0),children:"Rename"})]}),c.jsxs("div",{className:He.characterTitleDisplay,children:["Level ",n.level,"  ",n.title]}),c.jsxs("div",{className:He.xpSection,children:[c.jsx(Oc,{value:h.current,max:h.needed,label:"Experience",size:"large",shimmer:!0}),c.jsxs("div",{className:He.totalXP,children:[n.total_xp," Total XP"]})]})]})}),c.jsx(wt,{header:"Stats",children:c.jsx("div",{className:He.statsGrid,children:Bm.map(O=>c.jsxs("div",{className:He.statRow,children:[c.jsx("span",{className:He.statName,children:O}),c.jsx("div",{className:He.statBar,children:c.jsx(Oc,{value:e[O],max:30,showValue:!1,color:PT[O]||"gold"})}),c.jsx("span",{className:He.statValue,children:e[O]})]},O))})})]}),c.jsxs("div",{className:He.characterSide,children:[c.jsx(wt,{header:"Active Effects",children:s.length===0?c.jsx("div",{className:He.emptyState,children:"No active buffs or debuffs"}):c.jsx("div",{className:He.buffsList,children:s.map(O=>{const V=Mc(O.stat_effects),z=Object.entries(V).map(([$,Z])=>`${Z>0?"+":""}${Z} ${$}`).join(", ");return c.jsxs("div",{className:`${He.activeBuff} ${O.type==="buff"?He.buffType:He.debuffType}`,children:[c.jsx("span",{className:He.buffIcon,children:O.icon}),c.jsxs("div",{className:He.buffInfo,children:[c.jsx("div",{className:He.buffName,children:O.name}),c.jsxs("div",{className:He.buffTimer,children:[X(O.expires_at),z&&`  ${z}`]})]})]},O.id)})})}),c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>C(!w),style:{width:"100%",marginTop:8},children:w?"Hide XP History":"Show XP History"}),w&&c.jsx(wt,{header:"XP History",style:{marginTop:8},children:a.length===0?c.jsx("div",{className:He.emptyState,children:"No XP earned yet. Complete steps to earn XP!"}):c.jsx("div",{className:He.xpLogList,children:a.slice(0,20).map(O=>c.jsxs("div",{className:He.xpLogEntry,children:[c.jsx("span",{className:He.xpLogReason,children:O.reason}),c.jsxs("span",{className:`${He.xpLogAmount} ${O.amount<0?He.negative:""}`,children:[O.amount>0?"+":"",O.amount," XP"]})]},O.id))})})]})]})}const L3="_header_1ln45_1",j3="_spriteContainer_1ln45_23",D3="_info_1ln45_31",O3="_nameRow_1ln45_41",M3="_name_1ln45_41",U3="_level_1ln45_71",V3="_title_1ln45_91",B3="_xpRow_1ln45_103",q3="_xpText_1ln45_125",P3="_quickStats_1ln45_137",F3="_quickStat_1ln45_137",z3="_statIcon_1ln45_169",H3="_statValue_1ln45_177",Fs={header:L3,spriteContainer:j3,info:D3,nameRow:O3,name:M3,level:U3,title:V3,xpRow:B3,xpText:q3,quickStats:P3,quickStat:F3,statIcon:z3,statValue:H3};function G3({character:n,stats:e}){const s=pp(n.total_xp);return c.jsxs("div",{className:Fs.header,children:[c.jsx("div",{className:Fs.spriteContainer,children:c.jsx(q1,{level:n.level,stats:e,size:"small"})}),c.jsxs("div",{className:Fs.info,children:[c.jsxs("div",{className:Fs.nameRow,children:[c.jsx("span",{className:Fs.name,children:n.name}),c.jsxs("span",{className:Fs.level,children:["Lv. ",n.level]}),c.jsx("span",{className:Fs.title,children:n.title})]}),c.jsxs("div",{className:Fs.xpRow,children:[c.jsx(Oc,{value:s.current,max:s.needed,showValue:!1,shimmer:!0}),c.jsxs("span",{className:Fs.xpText,children:[s.current," / ",s.needed," XP"]})]})]}),c.jsx("div",{className:Fs.quickStats,children:Object.entries(e).slice(0,5).map(([a,o])=>c.jsxs("div",{className:Fs.quickStat,children:[c.jsx("span",{className:Fs.statIcon,children:X3(a)}),c.jsx("span",{className:Fs.statValue,children:o})]},a))})]})}function X3(n){return{stamina:"",willpower:"",health:"",focus:"",charisma:""}[n]||""}const Y3="_section_1hgtf_1",$3="_expanded_1hgtf_27",Q3="_header_1hgtf_35",K3="_headerLeft_1hgtf_73",W3="_icon_1hgtf_85",J3="_title_1hgtf_93",Z3="_badge_1hgtf_107",e4="_gold_1hgtf_123",t4="_green_1hgtf_133",n4="_red_1hgtf_143",s4="_blue_1hgtf_153",i4="_headerContent_1hgtf_163",a4="_chevron_1hgtf_179",r4="_chevronUp_1hgtf_191",o4="_content_1hgtf_199",l4="_contentInner_1hgtf_219",c4="_miniProgress_1hgtf_239",u4="_miniProgressFill_1hgtf_255",zs={section:Y3,expanded:$3,header:Q3,headerLeft:K3,icon:W3,title:J3,badge:Z3,gold:e4,green:t4,red:n4,blue:s4,headerContent:i4,chevron:a4,chevronUp:r4,content:o4,contentInner:l4,miniProgress:c4,miniProgressFill:u4};function ol({title:n,badge:e,badgeColor:s="gold",icon:a,defaultExpanded:o=!1,children:u,headerContent:h}){const[g,v]=j.useState(o);return c.jsxs("div",{className:`${zs.section} ${g?zs.expanded:""}`,children:[c.jsxs("button",{className:zs.header,onClick:()=>v(!g),"aria-expanded":g,children:[c.jsxs("div",{className:zs.headerLeft,children:[a&&c.jsx("span",{className:zs.icon,children:a}),c.jsx("span",{className:zs.title,children:n}),e!==void 0&&c.jsx("span",{className:`${zs.badge} ${zs[s]}`,children:e})]}),h&&c.jsx("div",{className:zs.headerContent,children:h}),c.jsx("span",{className:`${zs.chevron} ${g?zs.chevronUp:""}`,children:""})]}),c.jsx("div",{className:zs.content,children:c.jsx("div",{className:zs.contentInner,children:u})})]})}const d4="_overlay_15bjw_1",f4="_modal_15bjw_25",h4="_modalHeader_15bjw_97",m4="_modalTitle_15bjw_111",p4="_closeButton_15bjw_123",_4="_modalActions_15bjw_153",ll={overlay:d4,modal:f4,modalHeader:h4,modalTitle:m4,closeButton:p4,modalActions:_4};function kl({open:n,onClose:e,title:s,children:a,actions:o}){return j.useEffect(()=>{if(!n)return;const u=h=>{h.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),n?c.jsx("div",{className:ll.overlay,onClick:e,children:c.jsxs("div",{className:ll.modal,onClick:u=>u.stopPropagation(),children:[s&&c.jsxs("div",{className:ll.modalHeader,children:[c.jsx("h3",{className:ll.modalTitle,children:s}),c.jsx("button",{className:ll.closeButton,onClick:e,children:""})]}),a,o&&c.jsx("div",{className:ll.modalActions,children:o})]})}):null}const g4="_checkbox_543u2_1",y4="_box_543u2_17",E4="_checked_543u2_53",v4="_checkmark_543u2_63",T4="_checkboxLabel_543u2_75",b4="_hidden_543u2_99",cl={checkbox:g4,box:y4,checked:E4,checkmark:v4,checkboxLabel:T4,hidden:b4};function S4({checked:n,onChange:e,label:s,className:a}){const o=[cl.checkbox,n&&cl.checked,a].filter(Boolean).join(" ");return c.jsxs("label",{className:o,onClick:u=>u.stopPropagation(),children:[c.jsx("input",{type:"checkbox",className:cl.hidden,checked:n,onChange:u=>e(u.target.checked)}),c.jsx("span",{className:cl.box,children:n&&c.jsx("span",{className:cl.checkmark,children:""})}),s&&c.jsx("span",{className:cl.checkboxLabel,children:s})]})}const N4="_questLog_1dd70_1",w4="_questToolbar_1dd70_13",x4="_questFilters_1dd70_27",A4="_goalSection_1dd70_39",R4="_goalHeader_1dd70_47",C4="_goalDomainIcon_1dd70_61",I4="_goalTitle_1dd70_69",k4="_goalDomain_1dd70_61",L4="_questsList_1dd70_99",j4="_questCard_1dd70_115",D4="_questCardHeader_1dd70_139",O4="_questPriority_1dd70_157",M4="_normal_1dd70_171",U4="_important_1dd70_173",V4="_legendary_1dd70_175",B4="_questTitle_1dd70_179",q4="_questCompleted_1dd70_191",P4="_questMeta_1dd70_201",F4="_questStepCount_1dd70_217",z4="_expandIcon_1dd70_233",H4="_expanded_1dd70_245",G4="_stepsSection_1dd70_255",X4="_stepsList_1dd70_265",Y4="_stepItem_1dd70_279",$4="_stepPriorityDot_1dd70_305",Q4="_stepTitle_1dd70_319",K4="_stepActions_1dd70_329",W4="_addStepRow_1dd70_347",J4="_addStepInput_1dd70_359",Z4="_formGrid_1dd70_369",e5="_formRow_1dd70_381",t5="_emptyState_1dd70_399",Ct={questLog:N4,questToolbar:w4,questFilters:x4,goalSection:A4,goalHeader:R4,goalDomainIcon:C4,goalTitle:I4,goalDomain:k4,questsList:L4,questCard:j4,questCardHeader:D4,questPriority:O4,normal:M4,important:U4,legendary:V4,questTitle:B4,questCompleted:q4,questMeta:P4,questStepCount:F4,expandIcon:z4,expanded:H4,stepsSection:G4,stepsList:X4,stepItem:Y4,stepPriorityDot:$4,stepTitle:Q4,stepActions:K4,addStepRow:W4,addStepInput:J4,formGrid:Z4,formRow:e5,emptyState:t5};function n5({quest:n,onCreateStep:e,onCompleteStep:s,onUncompleteStep:a,onDeleteStep:o,onDeleteQuest:u}){const[h,g]=j.useState(!1),[v,_]=j.useState(""),[S,w]=j.useState("normal"),C=n.steps.filter(z=>z.status==="completed").length,q=n.steps.length,X=n.status==="completed",O=()=>{v.trim()&&(e(n.id,v.trim(),S),_(""),w("normal"))},V=z=>z==="legendary"?"var(--priority-legendary)":z==="important"?"var(--priority-important)":"var(--priority-normal)";return c.jsxs("div",{className:`${Ct.questCard} ${X?Ct.questCompleted:""}`,children:[c.jsxs("div",{className:Ct.questCardHeader,onClick:()=>g(!h),children:[c.jsx("div",{className:`${Ct.questPriority} ${Ct[n.priority]}`}),c.jsx("span",{className:Ct.questTitle,children:n.title}),c.jsxs("span",{className:Ct.questMeta,children:[c.jsxs("span",{className:Ct.questStepCount,children:[C,"/",q]}),c.jsx(Le,{size:"small",variant:"danger",onClick:z=>{z.stopPropagation(),u(n.id)},children:""})]}),c.jsx("span",{className:`${Ct.expandIcon} ${h?Ct.expanded:""}`,children:""})]}),h&&c.jsxs("div",{className:Ct.stepsSection,children:[c.jsx("div",{className:Ct.stepsList,children:n.steps.map(z=>c.jsxs("div",{className:Ct.stepItem,children:[c.jsx("div",{className:Ct.stepPriorityDot,style:{background:V(z.priority)}}),c.jsx(S4,{checked:z.status==="completed",onChange:$=>{$?s(z.id,n.id,z.priority):a(z.id)},label:z.title}),c.jsx("div",{className:Ct.stepActions,children:c.jsx(Le,{size:"small",variant:"danger",onClick:()=>o(z.id),children:""})})]},z.id))}),!X&&c.jsxs("div",{className:Ct.addStepRow,children:[c.jsx("div",{className:Ct.addStepInput,children:c.jsx(Xi,{value:v,onChange:z=>_(z.target.value),placeholder:"Add a step...",onKeyDown:z=>z.key==="Enter"&&O()})}),c.jsxs(ba,{value:S,onChange:z=>w(z.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important"}),c.jsx("option",{value:"legendary",children:"Legendary"})]}),c.jsx(Le,{variant:"primary",onClick:O,children:"Add"})]})]})]})}function s5({goals:n,domains:e,filterDomain:s,filterStatus:a,onFilterDomain:o,onFilterStatus:u,onCreateGoal:h,onCreateQuest:g,onCreateStep:v,onCompleteStep:_,onUncompleteStep:S,onDeleteStep:w,onDeleteQuest:C,onDeleteGoal:q}){const[X,O]=j.useState(!1),[V,z]=j.useState(null),[$,Z]=j.useState(""),[ie,_e]=j.useState(""),[Te,M]=j.useState(1),[D,U]=j.useState(""),[B,A]=j.useState(""),[L,k]=j.useState("normal"),ve=()=>{$.trim()&&(h(Te,$.trim(),ie.trim()),Z(""),_e(""),O(!1))},Qe=()=>{!D.trim()||V===null||(g(V,D.trim(),B.trim(),L),U(""),A(""),k("normal"),z(null))};return c.jsxs("div",{className:Ct.questLog,children:[c.jsxs("div",{className:Ct.questToolbar,children:[c.jsxs("div",{className:Ct.questFilters,children:[c.jsxs(ba,{value:s??"",onChange:Y=>o(Y.target.value?Number(Y.target.value):void 0),children:[c.jsx("option",{value:"",children:"All Domains"}),e.map(Y=>c.jsxs("option",{value:Y.id,children:[Y.icon," ",Y.name]},Y.id))]}),c.jsxs(ba,{value:a??"",onChange:Y=>u(Y.target.value||void 0),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]})]}),c.jsx(Le,{variant:"primary",onClick:()=>O(!0),children:"+ New Goal"})]}),n.length===0?c.jsx(wt,{children:c.jsx("div",{className:Ct.emptyState,children:"No goals yet. Create your first goal to begin your adventure!"})}):n.map(Y=>c.jsx(wt,{children:c.jsxs("div",{className:Ct.goalSection,children:[c.jsxs("div",{className:Ct.goalHeader,children:[c.jsx("span",{className:Ct.goalDomainIcon,children:Y.domain_icon}),c.jsx("span",{className:Ct.goalTitle,children:Y.title}),c.jsx("span",{className:Ct.goalDomain,children:Y.domain_name}),c.jsx(Le,{size:"small",variant:"primary",onClick:()=>z(Y.id),children:"+ Quest"}),c.jsx(Le,{size:"small",variant:"danger",onClick:()=>q(Y.id),children:""})]}),Y.quests.length===0?c.jsx("div",{className:Ct.emptyState,children:"No quests yet. Add a quest to this goal."}):c.jsx("div",{className:Ct.questsList,children:Y.quests.map(ne=>c.jsx(n5,{quest:ne,onCreateStep:v,onCompleteStep:_,onUncompleteStep:S,onDeleteStep:w,onDeleteQuest:C},ne.id))})]})},Y.id)),c.jsx(kl,{open:X,onClose:()=>O(!1),title:"New Goal",actions:c.jsxs(c.Fragment,{children:[c.jsx(Le,{onClick:()=>O(!1),children:"Cancel"}),c.jsx(Le,{variant:"primary",onClick:ve,children:"Create Goal"})]}),children:c.jsxs("div",{className:Ct.formGrid,children:[c.jsx(ba,{label:"Domain",value:Te,onChange:Y=>M(Number(Y.target.value)),children:e.map(Y=>c.jsxs("option",{value:Y.id,children:[Y.icon," ",Y.name]},Y.id))}),c.jsx(Xi,{label:"Goal Title",value:$,onChange:Y=>Z(Y.target.value),placeholder:"e.g., Get in shape",onKeyDown:Y=>Y.key==="Enter"&&ve()}),c.jsx(Md,{label:"Description (optional)",value:ie,onChange:Y=>_e(Y.target.value),placeholder:"Describe your goal..."})]})}),c.jsx(kl,{open:V!==null,onClose:()=>z(null),title:"New Quest",actions:c.jsxs(c.Fragment,{children:[c.jsx(Le,{onClick:()=>z(null),children:"Cancel"}),c.jsx(Le,{variant:"primary",onClick:Qe,children:"Create Quest"})]}),children:c.jsxs("div",{className:Ct.formGrid,children:[c.jsx(Xi,{label:"Quest Title",value:D,onChange:Y=>U(Y.target.value),placeholder:"e.g., Run 5K",onKeyDown:Y=>Y.key==="Enter"&&Qe()}),c.jsx(Md,{label:"Description (optional)",value:B,onChange:Y=>A(Y.target.value),placeholder:"Describe this quest..."}),c.jsxs(ba,{label:"Priority",value:L,onChange:Y=>k(Y.target.value),children:[c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"important",children:"Important (1.5x XP)"}),c.jsx("option",{value:"legendary",children:"Legendary (2x XP)"})]})]})})]})}const i5="_buffTracker_10dzk_1",a5="_buffToolbar_10dzk_13",r5="_buffGrid_10dzk_33",o5="_buffSection_10dzk_45",l5="_buffCard_10dzk_59",c5="_buffCardIcon_10dzk_89",u5="_buffCardInfo_10dzk_99",d5="_buffCardName_10dzk_107",f5="_buffCardDesc_10dzk_119",h5="_buffCardMeta_10dzk_131",m5="_buffCardActions_10dzk_141",p5="_buffTypeBadge_10dzk_155",_5="_buffTypeBuff_10dzk_175",g5="_buffTypeDebuff_10dzk_187",y5="_activeSection_10dzk_201",E5="_activeBuffItem_10dzk_213",v5="_isBuff_10dzk_229",T5="_isDebuff_10dzk_241",b5="_activeBuffIcon_10dzk_253",S5="_activeBuffInfo_10dzk_261",N5="_activeBuffName_10dzk_269",w5="_activeBuffTimer_10dzk_277",x5="_activeBuffEffects_10dzk_287",A5="_formGrid_10dzk_299",R5="_formRow_10dzk_311",C5="_statEffectRow_10dzk_329",I5="_statEffectLabel_10dzk_341",k5="_statEffectInput_10dzk_355",L5="_divider_10dzk_363",j5="_emptyState_10dzk_375",D5="_streakBadge_10dzk_391",O5="_atRisk_10dzk_421",M5="_shieldActive_10dzk_435",U5="_streakIcon_10dzk_447",V5="_streakCount_10dzk_455",B5="_streakLabel_10dzk_463",q5="_shieldInventory_10dzk_483",P5="_shieldIcon_10dzk_505",F5="_shieldInfo_10dzk_513",z5="_shieldTitle_10dzk_521",H5="_shieldDesc_10dzk_533",G5="_shieldCount_10dzk_543",X5="_milestoneBadge_10dzk_563",Y5="_milestoneIcon_10dzk_589",$5="_claimMilestone_10dzk_619",Ge={buffTracker:i5,buffToolbar:a5,buffGrid:r5,buffSection:o5,buffCard:l5,buffCardIcon:c5,buffCardInfo:u5,buffCardName:d5,buffCardDesc:f5,buffCardMeta:h5,buffCardActions:m5,buffTypeBadge:p5,buffTypeBuff:_5,buffTypeDebuff:g5,activeSection:y5,activeBuffItem:E5,isBuff:v5,isDebuff:T5,activeBuffIcon:b5,activeBuffInfo:S5,activeBuffName:N5,activeBuffTimer:w5,activeBuffEffects:x5,formGrid:A5,formRow:R5,statEffectRow:C5,statEffectLabel:I5,statEffectInput:k5,divider:L5,emptyState:j5,streakBadge:D5,atRisk:O5,shieldActive:M5,streakIcon:U5,streakCount:V5,streakLabel:B5,shieldInventory:q5,shieldIcon:P5,shieldInfo:F5,shieldTitle:z5,shieldDesc:H5,shieldCount:G5,milestoneBadge:X5,milestoneIcon:Y5,claimMilestone:$5},Dm=[{name:"Morning Exercise",description:"Worked out in the morning",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2,willpower:1}},{name:"Cardio / Running",description:"Ran, cycled, swam, or did sustained cardio",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2}},{name:"Strength Training",description:"Lifted weights or did resistance training",type:"buff",icon:"",duration:24,stats:{stamina:2,health:1,willpower:2}},{name:"Yoga / Stretching",description:"Did yoga, stretching, or mobility work",type:"buff",icon:"",duration:24,stats:{health:2,focus:1,willpower:1}},{name:"8 Hours Sleep",description:"Got a full night of quality sleep",type:"buff",icon:"",duration:24,stats:{health:2,focus:2,stamina:1,willpower:1}},{name:"Meditation",description:"Practiced mindfulness or meditation",type:"buff",icon:"",duration:24,stats:{willpower:3,focus:2}},{name:"Healthy Meal",description:"Ate a balanced, nutritious meal",type:"buff",icon:"",duration:24,stats:{health:3,stamina:1}},{name:"Drank Enough Water",description:"Hit daily water intake goal",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Read 30+ Minutes",description:"Read a book, article, or educational material",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:1}},{name:"Studied / Learned",description:"Studied a course, skill, or new subject",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2}},{name:"Deep Work Session",description:"Focused work with no distractions for 90+ min",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2,stamina:1}},{name:"Journaling",description:"Wrote in journal or reflected on the day",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Cold Shower",description:"Took a cold shower or ice bath",type:"buff",icon:"",duration:24,stats:{willpower:3,stamina:1}},{name:"No Phone First Hour",description:"Avoided phone for first hour after waking",type:"buff",icon:"",duration:24,stats:{focus:2,willpower:2}},{name:"Socialised",description:"Had meaningful social interaction",type:"buff",icon:"",duration:24,stats:{charisma:3,willpower:1}},{name:"Helped Someone",description:"Did something kind or helpful for another person",type:"buff",icon:"",duration:24,stats:{charisma:2,willpower:1}},{name:"Creative Time",description:"Spent time on a creative pursuit",type:"buff",icon:"",duration:24,stats:{focus:2,charisma:1,willpower:1}},{name:"Sunlight / Nature",description:"Spent 20+ minutes outdoors in natural light",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Gratitude Practice",description:"Practiced gratitude  wrote or reflected on 3+",type:"buff",icon:"",duration:24,stats:{willpower:2,charisma:1}},{name:"Meal Prep",description:"Prepared healthy meals in advance",type:"buff",icon:"",duration:48,stats:{health:2,willpower:1,stamina:1}},{name:"Cleaned / Organised",description:"Cleaned home, desk, or organised belongings",type:"buff",icon:"",duration:24,stats:{focus:1,willpower:2}},{name:"Financial Check-In",description:"Reviewed budget, tracked expenses, or saved",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Junk Food",description:"Ate fast food, excessive sugar, or processed food",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-1}},{name:"Skipped Exercise",description:"Had planned to exercise but didn't",type:"debuff",icon:"",duration:24,stats:{stamina:-2,willpower:-2}},{name:"Poor Sleep",description:"Got less than 6 hours or very poor quality",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,stamina:-1,willpower:-1}},{name:"Doomscrolling",description:"Mindlessly scrolled social media for 30+ min",type:"debuff",icon:"",duration:24,stats:{focus:-3,willpower:-2}},{name:"Excessive Gaming",description:"Played video games for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-2,stamina:-1}},{name:"Binge Watching",description:"Watched TV/streaming for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-1,stamina:-1}},{name:"Alcohol",description:"Drank alcohol",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,willpower:-1}},{name:"Smoking / Vaping",description:"Smoked cigarettes or vaped",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-2}},{name:"Excessive Caffeine",description:"Had too much coffee or energy drinks",type:"debuff",icon:"",duration:24,stats:{health:-1,focus:-1,stamina:-1}},{name:"Procrastinated",description:"Avoided important tasks most of the day",type:"debuff",icon:"",duration:24,stats:{willpower:-3,focus:-2}},{name:"Skipped Meals",description:"Skipped a meal or barely ate",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-2,focus:-1}},{name:"Stayed Up Too Late",description:"Went to bed much later than planned",type:"debuff",icon:"",duration:24,stats:{health:-1,willpower:-2,stamina:-1}},{name:"Impulse Spending",description:"Made unnecessary or impulse purchases",type:"debuff",icon:"",duration:24,stats:{willpower:-2}},{name:"Negative Self-Talk",description:"Caught in self-criticism or negative thought loops",type:"debuff",icon:"",duration:24,stats:{willpower:-2,charisma:-2}},{name:"Social Isolation",description:"Avoided people or cancelled social plans",type:"debuff",icon:"",duration:24,stats:{charisma:-3,willpower:-1}},{name:"Sugary Drinks",description:"Had soda, energy drinks, or sugary beverages",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-1}},{name:"Lost Temper",description:"Got angry or had an emotional outburst",type:"debuff",icon:"",duration:24,stats:{charisma:-2,willpower:-2}}],Q5=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function K5(n){const e=Math.round(n*60);if(e<60)return`${e}m`;const s=Math.floor(e/60),a=e%60;return a===0?`${s}h`:`${s}h ${a}m`}function W5({definitions:n,activeBuffs:e,onCreateDefinition:s,onDeleteDefinition:a,onActivateBuff:o,onDeactivateBuff:u,streakInfos:h,shieldCount:g=0,onUseShield:v,getUnclaimedMilestones:_,onClaimMilestones:S}){const[w,C]=j.useState(!1),[q,X]=j.useState(""),[O,V]=j.useState(""),[z,$]=j.useState("buff"),[Z,ie]=j.useState(""),[_e,Te]=j.useState(1440),[M,D]=j.useState({}),U=ne=>{if(ne==="")return;const be=Dm[Number(ne)];be&&(X(be.name),V(be.description),$(be.type),ie(be.icon),Te(be.duration*60),D({...be.stats}))},B=()=>{X(""),V(""),$("buff"),ie(""),Te(1440),D({})},A=()=>{if(!q.trim())return;const ne=Object.fromEntries(Object.entries(M).filter(([,it])=>it!==0)),be=_e/60;s(q.trim(),O.trim(),z,Z,be,JSON.stringify(ne)),B(),C(!1)};function L(ne){const be=new Date,nt=new Date(ne+"Z").getTime()-be.getTime();if(nt<=0)return"Expired";const H=Math.floor(nt/36e5),ue=Math.floor(nt%36e5/6e4);return H>0?`${H}h ${ue}m`:`${ue}m`}const k=n.filter(ne=>ne.type==="buff"),ve=n.filter(ne=>ne.type==="debuff"),Qe=Dm.map((ne,be)=>({...ne,index:be})).filter(ne=>ne.type==="buff"),Y=Dm.map((ne,be)=>({...ne,index:be})).filter(ne=>ne.type==="debuff");return c.jsxs("div",{className:Ge.buffTracker,children:[c.jsxs("div",{className:Ge.buffToolbar,children:[c.jsx("div",{}),c.jsx(Le,{variant:"primary",onClick:()=>{B(),C(!0)},children:"+ New Buff/Debuff"})]}),c.jsxs("div",{className:Ge.shieldInventory,children:[c.jsx("span",{className:Ge.shieldIcon,children:""}),c.jsxs("div",{className:Ge.shieldInfo,children:[c.jsx("div",{className:Ge.shieldTitle,children:"Streak Shields"}),c.jsx("div",{className:Ge.shieldDesc,children:"Protects a streak if you miss a day"})]}),c.jsx("span",{className:Ge.shieldCount,children:g})]}),e.length>0&&c.jsx(wt,{header:"Active Effects",glow:!0,children:c.jsx("div",{className:Ge.activeSection,children:e.map(ne=>{const be=Mc(ne.stat_effects),it=Object.entries(be).map(([nt,H])=>`${H>0?"+":""}${H} ${nt}`).join(", ");return c.jsxs("div",{className:`${Ge.activeBuffItem} ${ne.type==="buff"?Ge.isBuff:Ge.isDebuff}`,children:[c.jsx("span",{className:Ge.activeBuffIcon,children:ne.icon}),c.jsxs("div",{className:Ge.activeBuffInfo,children:[c.jsx("div",{className:Ge.activeBuffName,children:ne.name}),c.jsxs("div",{className:Ge.activeBuffTimer,children:[L(ne.expires_at)," remaining"]}),it&&c.jsx("div",{className:Ge.activeBuffEffects,children:it})]}),c.jsx(Le,{size:"small",variant:"danger",onClick:()=>u(ne.id),children:"Remove"})]},ne.id)})})}),c.jsxs("div",{className:Ge.buffGrid,children:[c.jsx(wt,{header:"Buffs (Positive Habits)",children:k.length===0?c.jsx("div",{className:Ge.emptyState,children:"No buffs defined yet"}):c.jsx("div",{className:Ge.buffSection,children:k.map(ne=>c.jsx(FT,{definition:ne,onActivate:o,onDelete:a,streakInfo:h?.get(ne.id),shieldCount:g,onUseShield:v,unclaimedMilestones:_?.(ne.id)||[],onClaimMilestones:S},ne.id))})}),c.jsx(wt,{header:"Debuffs (Negative Habits)",children:ve.length===0?c.jsx("div",{className:Ge.emptyState,children:"No debuffs defined yet"}):c.jsx("div",{className:Ge.buffSection,children:ve.map(ne=>c.jsx(FT,{definition:ne,onActivate:o,onDelete:a},ne.id))})})]}),c.jsx(kl,{open:w,onClose:()=>C(!1),title:"New Buff / Debuff",actions:c.jsxs(c.Fragment,{children:[c.jsx(Le,{onClick:()=>C(!1),children:"Cancel"}),c.jsx(Le,{variant:"primary",onClick:A,children:"Create"})]}),children:c.jsxs("div",{className:Ge.formGrid,children:[c.jsxs(ba,{label:"Quick Select  Common Habits",value:"",onChange:ne=>U(ne.target.value),children:[c.jsx("option",{value:"",children:" Choose a preset to auto-fill "}),c.jsx("optgroup",{label:"Buffs (Positive Habits)",children:Qe.map(ne=>c.jsxs("option",{value:ne.index,children:[ne.icon," ",ne.name]},ne.index))}),c.jsx("optgroup",{label:"Debuffs (Negative Habits)",children:Y.map(ne=>c.jsxs("option",{value:ne.index,children:[ne.icon," ",ne.name]},ne.index))})]}),c.jsx("div",{className:Ge.divider}),c.jsxs("div",{className:Ge.formRow,children:[c.jsx(Xi,{label:"Name",value:q,onChange:ne=>X(ne.target.value),placeholder:"e.g., Morning Exercise"}),c.jsxs(ba,{label:"Type",value:z,onChange:ne=>$(ne.target.value),children:[c.jsx("option",{value:"buff",children:"Buff (Positive)"}),c.jsx("option",{value:"debuff",children:"Debuff (Negative)"})]})]}),c.jsx(Md,{label:"Description",value:O,onChange:ne=>V(ne.target.value),placeholder:"Describe this habit..."}),c.jsxs("div",{className:Ge.formRow,children:[c.jsx(ba,{label:"Icon",value:Z,onChange:ne=>ie(ne.target.value),children:Q5.map(ne=>c.jsx("option",{value:ne,children:ne},ne))}),c.jsx(Xi,{label:"Duration (minutes)",type:"number",value:_e,onChange:ne=>Te(Number(ne.target.value)),min:1,max:10080})]}),c.jsxs("div",{children:[c.jsx("label",{className:Ge.statEffectLabel,style:{display:"block",marginBottom:8,fontFamily:"var(--font-heading)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-secondary)"},children:"Stat Effects"}),Bm.map(ne=>c.jsxs("div",{className:Ge.statEffectRow,children:[c.jsx("span",{className:Ge.statEffectLabel,children:ne}),c.jsx("input",{type:"number",className:Ge.statEffectInput,value:M[ne]||0,onChange:be=>D({...M,[ne]:Number(be.target.value)}),style:{padding:"4px 8px",background:"var(--bg-dark)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontFamily:"var(--font-body)"}})]},ne))]})]})})]})}function FT({definition:n,onActivate:e,onDelete:s,streakInfo:a,shieldCount:o=0,onUseShield:u,unclaimedMilestones:h=[],onClaimMilestones:g}){const v=Mc(n.stat_effects),_=Object.entries(v).map(([V,z])=>`${z>0?"+":""}${z} ${V}`).join(", "),S=a?dL(a.currentStreak):null,w=a&&a.currentStreak>0,C=a?.isAtRisk&&!a?.shieldActive,q=a?.shieldActive,X=async()=>{u&&a&&await u(n.id)},O=async()=>{g&&await g(n.id)};return c.jsxs("div",{className:Ge.buffCard,children:[c.jsx("span",{className:Ge.buffCardIcon,children:n.icon}),c.jsxs("div",{className:Ge.buffCardInfo,children:[c.jsxs("div",{className:Ge.buffCardName,children:[n.name,S&&c.jsxs("span",{className:Ge.milestoneBadge,children:[c.jsx("span",{className:Ge.milestoneIcon,children:S.icon}),S.title]})]}),n.description&&c.jsx("div",{className:Ge.buffCardDesc,children:n.description}),c.jsxs("div",{className:Ge.buffCardMeta,children:[c.jsx("span",{className:`${Ge.buffTypeBadge} ${n.type==="buff"?Ge.buffTypeBuff:Ge.buffTypeDebuff}`,children:n.type})," ",K5(n.duration_hours),_&&`  ${_}`]}),n.type==="buff"&&w&&c.jsxs("div",{className:`${Ge.streakBadge} ${C?Ge.atRisk:""} ${q?Ge.shieldActive:""}`,children:[c.jsx("span",{className:Ge.streakIcon,children:q?"":""}),c.jsx("span",{className:Ge.streakCount,children:a.currentStreak}),c.jsxs("span",{className:Ge.streakLabel,children:["day streak",C&&" (at risk!)",q&&" (protected)"]})]}),C&&o>0&&u&&c.jsx(Le,{size:"small",variant:"ghost",onClick:X,style:{marginTop:6},children:" Use Shield"}),h.length>0&&g&&c.jsxs(Le,{size:"small",variant:"primary",onClick:O,className:Ge.claimMilestone,children:[" Claim ",h.length," Milestone",h.length>1?"s":"","!"]})]}),c.jsxs("div",{className:Ge.buffCardActions,children:[c.jsx(Le,{size:"small",variant:"primary",onClick:()=>e(n.id),children:"Activate"}),c.jsx(Le,{size:"small",variant:"danger",onClick:()=>s(n.id),children:"Delete"})]})]})}const J5="_container_e9q7r_1",Z5="_title_e9q7r_17",eM="_status_e9q7r_33",tM="_indicator_e9q7r_49",nM="_connected_e9q7r_61",sM="_disconnected_e9q7r_71",iM="_lastBackup_e9q7r_79",aM="_statusMessage_e9q7r_91",rM="_actions_e9q7r_121",oM="_button_e9q7r_135",lM="_buttonSecondary_e9q7r_167 _button_e9q7r_135",cM="_buttonDanger_e9q7r_187 _button_e9q7r_135",uM="_backupList_e9q7r_209",dM="_backupItem_e9q7r_233",fM="_backupName_e9q7r_255",hM="_backupDate_e9q7r_269",mM="_restoreButton_e9q7r_279",pM="_noBackups_e9q7r_307",_M="_tokenInputContainer_e9q7r_321",gM="_tokenHelp_e9q7r_329",yM="_tokenInput_e9q7r_321",EM="_tokenActions_e9q7r_393",At={container:J5,title:Z5,status:eM,indicator:tM,connected:nM,disconnected:sM,lastBackup:iM,statusMessage:aM,actions:rM,button:oM,buttonSecondary:lM,buttonDanger:cM,backupList:uM,backupItem:dM,backupName:fM,backupDate:hM,restoreButton:mM,noBackups:pM,tokenInputContainer:_M,tokenHelp:gM,tokenInput:yM,tokenActions:EM};function vM(){const[n,e]=j.useState(!1),[s,a]=j.useState(!0),[o,u]=j.useState(null),[h,g]=j.useState(""),[v,_]=j.useState([]),[S,w]=j.useState(!1),[C,q]=j.useState(""),[X,O]=j.useState(!1),[V,z]=j.useState(!1),[$,Z]=j.useState(""),ie=j.useCallback(()=>{e(JT()),u(ZT())},[]);j.useEffect(()=>{ie(),a(!1)},[ie]);const _e=async()=>{if(!C.trim()){g("Please enter a GitHub token");return}g("Verifying token..."),await cx(C.trim())?(nx(C.trim()),e(!0),O(!1),q(""),g("Connected to GitHub!")):g("Invalid token. Please check and try again.")},Te=()=>{sx(),e(!1),u(null),g("Disconnected"),_([])},M=async()=>{g("Backing up...");try{const L=await hp(),k=await tb(L);k.success?(g(`Backup saved: ${k.fileName}`),u(new Date),await sb(7)):g(`Backup failed: ${k.error}`)}catch(L){g(`Backup failed: ${L instanceof Error?L.message:"Unknown error"}`)}},D=async()=>{if(w(!S),!S){g("Loading backups...");const L=await nb();_(L),g("")}},U=()=>{const L=$.trim();if(!L){g("Please enter a gist ID");return}const k=L.match(/([a-f0-9]{32})/i);k?(localStorage.setItem("github_gist_id",k[1]),g('Gist ID set! Click "Restore from Backup" to see backups.'),z(!1),Z("")):g("Invalid gist ID. Paste the gist URL or ID.")},B=async L=>{if(confirm(`Restore from "${L}"? This will replace all current data.`)){g("Restoring...");try{const k=await lx(L);k?(await YT(k),g("Restored successfully! Refreshing..."),setTimeout(()=>window.location.reload(),1500)):g("Failed to download backup")}catch(k){g(`Restore failed: ${k instanceof Error?k.message:"Unknown error"}`)}}},A=L=>{const k=L.match(/backup-(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})/);if(k){const[,ve,Qe,Y,ne,be]=k;return`${ve}-${Qe}-${Y} ${ne}:${be}`}return L};return s?c.jsx("div",{className:At.container,children:"Loading..."}):c.jsxs("div",{className:At.container,children:[c.jsx("h3",{className:At.title,children:"Cloud Backup (GitHub)"}),c.jsxs("div",{className:At.status,children:[c.jsx("span",{className:`${At.indicator} ${n?At.connected:At.disconnected}`}),c.jsx("span",{children:n?"Connected to GitHub":"Not connected"})]}),o&&c.jsxs("p",{className:At.lastBackup,children:["Last backup: ",o.toLocaleString()]}),h&&c.jsx("p",{className:At.statusMessage,children:h}),c.jsx("div",{className:At.actions,children:n?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:M,className:At.button,children:"Backup Now"}),c.jsx("button",{onClick:D,className:At.buttonSecondary,children:S?"Hide Backups":"Restore from Backup"}),c.jsx("button",{onClick:()=>z(!V),className:At.buttonSecondary,children:V?"Cancel":"Link Existing Gist"}),c.jsx("button",{onClick:Te,className:At.buttonDanger,children:"Disconnect"}),V&&c.jsxs("div",{className:At.tokenInputContainer,children:[c.jsx("p",{className:At.tokenHelp,children:"Paste your gist URL or ID to restore from an existing backup:"}),c.jsx("input",{type:"text",value:$,onChange:L=>Z(L.target.value),placeholder:"https://gist.github.com/user/abc123... or just abc123...",className:At.tokenInput}),c.jsx("button",{onClick:U,className:At.button,children:"Link Gist"})]})]}):c.jsx(c.Fragment,{children:X?c.jsxs("div",{className:At.tokenInputContainer,children:[c.jsxs("p",{className:At.tokenHelp,children:["Create a token at ",c.jsx("a",{href:"https://github.com/settings/tokens/new?description=Goal%20Game%20Backup&scopes=gist",target:"_blank",rel:"noopener noreferrer",children:"GitHub Settings"})," with ",c.jsx("strong",{children:"gist"})," scope."]}),c.jsx("input",{type:"password",value:C,onChange:L=>q(L.target.value),placeholder:"Paste your GitHub token",className:At.tokenInput}),c.jsxs("div",{className:At.tokenActions,children:[c.jsx("button",{onClick:_e,className:At.button,children:"Save Token"}),c.jsx("button",{onClick:()=>{O(!1),q("")},className:At.buttonSecondary,children:"Cancel"})]})]}):c.jsx("button",{onClick:()=>O(!0),className:At.button,children:"Connect GitHub"})})}),S&&v.length>0&&c.jsxs("div",{className:At.backupList,children:[c.jsx("h4",{children:"Available Backups (Last 7 kept)"}),v.map(L=>c.jsxs("div",{className:At.backupItem,children:[c.jsx("span",{className:At.backupName,children:A(L.fileName)}),c.jsxs("span",{className:At.backupDate,children:[Math.round(L.size/1024)," KB"]}),c.jsx("button",{onClick:()=>B(L.fileName),className:At.restoreButton,children:"Restore"})]},L.fileName))]}),S&&v.length===0&&c.jsx("p",{className:At.noBackups,children:"No backups found"})]})}const TM=[{value:null,label:"No reminder"},{value:0,label:"At event time"},{value:5,label:"5 minutes before"},{value:10,label:"10 minutes before"},{value:15,label:"15 minutes before"},{value:30,label:"30 minutes before"},{value:60,label:"1 hour before"}],bM="_settingsPanel_zjhn0_1",SM="_settingsTitle_zjhn0_9",NM="_settingsDescription_zjhn0_23",wM="_settingRow_zjhn0_35",xM="_settingLabel_zjhn0_59",AM="_iosInstructions_zjhn0_71",RM="_iosTitle_zjhn0_87",CM="_iosText_zjhn0_99",IM="_iosList_zjhn0_111",kM="_deniedMessage_zjhn0_135",LM="_errorMessage_zjhn0_137",jM="_statusIndicator_zjhn0_169",DM="_statusDot_zjhn0_187",OM="_reminderSelect_zjhn0_251",MM="_debugInfo_zjhn0_317",UM="_debugLabel_zjhn0_335",VM="_debugToken_zjhn0_349",BM="_debugError_zjhn0_363",Ft={settingsPanel:bM,settingsTitle:SM,settingsDescription:NM,settingRow:wM,settingLabel:xM,iosInstructions:AM,iosTitle:RM,iosText:CM,iosList:IM,deniedMessage:kM,errorMessage:LM,statusIndicator:jM,statusDot:DM,reminderSelect:OM,debugInfo:MM,debugLabel:UM,debugToken:VM,debugError:BM};function qM(){const{settings:n,permissionState:e,isSupported:s,isConfigured:a,canEnable:o,isIOS:u,isStandalone:h,loading:g,error:v,enableNotifications:_,disableNotificationsHandler:S,setDefaultReminderMinutes:w}=S1();return a?s?c.jsxs(wt,{className:Ft.settingsPanel,children:[c.jsx("h3",{className:Ft.settingsTitle,children:"Push Notifications"}),u&&!h&&c.jsxs("div",{className:Ft.iosInstructions,children:[c.jsx("p",{className:Ft.iosTitle,children:"iOS Setup Required"}),c.jsx("p",{className:Ft.iosText,children:"To receive push notifications on iOS, you need to add this app to your home screen first:"}),c.jsxs("ol",{className:Ft.iosList,children:[c.jsx("li",{children:"Tap the Share button in Safari"}),c.jsx("li",{children:'Select "Add to Home Screen"'}),c.jsx("li",{children:"Open the app from your home screen"}),c.jsx("li",{children:"Then enable notifications here"})]})]}),e==="denied"&&c.jsx("div",{className:Ft.deniedMessage,children:c.jsx("p",{children:"Notifications are blocked. Please enable them in your browser settings."})}),v&&c.jsx("div",{className:Ft.errorMessage,children:c.jsx("p",{children:v})}),c.jsxs("div",{className:Ft.settingRow,children:[c.jsx("span",{className:Ft.settingLabel,children:"Event Reminders"}),n.enabled?c.jsx(Le,{variant:"danger",size:"small",onClick:S,disabled:g,children:g?"Disabling...":"Disable"}):c.jsx(Le,{variant:"primary",size:"small",onClick:_,disabled:g||!o||e==="denied",children:g?"Enabling...":"Enable"})]}),n.enabled&&c.jsxs("div",{className:Ft.settingRow,children:[c.jsx("span",{className:Ft.settingLabel,children:"Default Reminder"}),c.jsx("select",{className:Ft.reminderSelect,value:n.defaultReminderMinutes,onChange:C=>w(Number(C.target.value)),children:TM.filter(C=>C.value!==null).map(C=>c.jsx("option",{value:C.value,children:C.label},C.value))})]}),n.enabled&&c.jsxs("div",{className:Ft.statusIndicator,children:[c.jsx("span",{className:Ft.statusDot}),"Notifications enabled"]}),n.enabled&&c.jsxs("div",{className:Ft.debugInfo,children:[c.jsx("p",{className:Ft.debugLabel,children:"Token Status:"}),n.fcmToken?c.jsxs("p",{className:Ft.debugToken,children:[n.fcmToken.substring(0,20),"...",n.fcmToken.substring(n.fcmToken.length-10)]}):c.jsx("p",{className:Ft.debugError,children:"No token - notifications will not work!"}),c.jsxs("p",{className:Ft.debugLabel,children:["Device ID: ",n.deviceId.substring(0,8),"..."]})]}),n.enabled&&!n.fcmToken&&c.jsx("div",{className:Ft.errorMessage,children:c.jsx("p",{children:"Token missing! Try: Disable  Wait 5 sec  Re-enable"})})]}):c.jsxs(wt,{className:Ft.settingsPanel,children:[c.jsx("h3",{className:Ft.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Ft.settingsDescription,children:"Push notifications are not supported in this browser."})]}):c.jsxs(wt,{className:Ft.settingsPanel,children:[c.jsx("h3",{className:Ft.settingsTitle,children:"Push Notifications"}),c.jsx("p",{className:Ft.settingsDescription,children:"Push notifications are not configured. To enable them, add your Firebase configuration to the .env file."})]})}const PM="_dailyQuestsPanel_1fkrh_1",FM="_questsList_1fkrh_55",zM="_questItem_1fkrh_67",HM="_completed_1fkrh_89",GM="_questItemHeader_1fkrh_99",XM="_questCheckbox_1fkrh_111",YM="_questInfo_1fkrh_149",$M="_questTitleRow_1fkrh_159",QM="_questName_1fkrh_173",KM="_questXp_1fkrh_193",WM="_questDescription_1fkrh_223",JM="_progressContainer_1fkrh_235",ZM="_progressBar_1fkrh_247",e6="_progressFill_1fkrh_263",t6="_progressText_1fkrh_285",n6="_bonusSection_1fkrh_303",s6="_available_1fkrh_321",i6="_claimed_1fkrh_329",a6="_bonusTitle_1fkrh_349",r6="_bonusDescription_1fkrh_371",o6="_bonusXp_1fkrh_383",l6="_claimButton_1fkrh_403",c6="_loading_1fkrh_413",u6="_emptyState_1fkrh_429",d6="_compactPanel_1fkrh_445",f6="_questItemCompact_1fkrh_457",h6="_questCheckboxCompact_1fkrh_489",m6="_questNameCompact_1fkrh_511",p6="_progressBarCompact_1fkrh_541",_6="_progressFillCompact_1fkrh_559",g6="_progressTextCompact_1fkrh_581",y6="_compactBonus_1fkrh_595",E6="_compactBonusClaimed_1fkrh_629",ut={dailyQuestsPanel:PM,questsList:FM,questItem:zM,completed:HM,questItemHeader:GM,questCheckbox:XM,questInfo:YM,questTitleRow:$M,questName:QM,questXp:KM,questDescription:WM,progressContainer:JM,progressBar:ZM,progressFill:e6,progressText:t6,bonusSection:n6,available:s6,claimed:i6,bonusTitle:a6,bonusDescription:r6,bonusXp:o6,claimButton:l6,loading:c6,emptyState:u6,compactPanel:d6,questItemCompact:f6,questCheckboxCompact:h6,questNameCompact:m6,progressBarCompact:p6,progressFillCompact:_6,progressTextCompact:g6,compactBonus:y6,compactBonusClaimed:E6};function v6({quests:n,loading:e,allCompleted:s,completedCount:a,bonusClaimed:o,bonusXp:u,onClaimBonus:h,compact:g=!1}){const[v,_]=j.useState(!1);if(g)return e?c.jsx("div",{className:ut.loading,children:"Loading daily quests..."}):n.length===0?c.jsx("div",{className:ut.emptyState,children:"No daily quests available"}):c.jsxs("div",{className:ut.compactPanel,children:[c.jsx("div",{className:ut.questsList,children:n.map(w=>c.jsx(zT,{quest:w,compact:!0},w.id))}),s&&!o&&c.jsxs("div",{className:ut.compactBonus,children:[c.jsx("span",{children:"All quests complete!"}),c.jsxs(Le,{size:"small",onClick:h,children:["Claim +",u," XP"]})]}),o&&c.jsxs("div",{className:ut.compactBonusClaimed,children:[" Bonus claimed! +",u," XP"]})]});const S=e?"Daily Quests (Loading...)":`Daily Quests (${a}/${n.length})${s&&!o?" - Bonus Ready!":""}`;return c.jsxs("div",{className:ut.dailyQuestsPanel,children:[c.jsx(Le,{size:"small",variant:s&&!o?"primary":void 0,onClick:()=>_(!v),style:{width:"100%",marginBottom:v?8:0},children:v?"Hide Daily Quests":S}),v&&c.jsx(wt,{glow:s&&!o,children:e?c.jsx("div",{className:ut.loading,children:"Loading daily quests..."}):n.length===0?c.jsx("div",{className:ut.emptyState,children:"No daily quests available"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:ut.questsList,children:n.map(w=>c.jsx(zT,{quest:w},w.id))}),c.jsxs("div",{className:`${ut.bonusSection} ${s&&!o?ut.available:o?ut.claimed:""}`,children:[c.jsx("div",{className:ut.bonusTitle,children:o?"Bonus Claimed!":"Complete All Quests"}),c.jsx("div",{className:ut.bonusDescription,children:o?"Great work! See you tomorrow.":"Finish all 3 quests to earn a bonus"}),c.jsxs("div",{className:ut.bonusXp,children:["+",u," XP"]}),s&&!o&&c.jsx(Le,{className:ut.claimButton,size:"small",onClick:h,children:"Claim Bonus"})]})]})})]})}function zT({quest:n,compact:e=!1}){const s=Math.min(n.current_value/n.target_value*100,100);return e?c.jsxs("div",{className:`${ut.questItemCompact} ${n.is_completed?ut.completed:""}`,children:[c.jsx("div",{className:ut.questCheckboxCompact,children:n.is_completed?"":""}),c.jsx("span",{className:ut.questNameCompact,children:n.title}),c.jsx("div",{className:ut.progressBarCompact,children:c.jsx("div",{className:ut.progressFillCompact,style:{width:`${s}%`}})}),c.jsxs("span",{className:ut.progressTextCompact,children:[n.current_value,"/",n.target_value]})]}):c.jsxs("div",{className:`${ut.questItem} ${n.is_completed?ut.completed:""}`,children:[c.jsxs("div",{className:ut.questItemHeader,children:[c.jsx("div",{className:ut.questCheckbox,children:n.is_completed&&c.jsx("span",{children:""})}),c.jsxs("div",{className:ut.questInfo,children:[c.jsxs("div",{className:ut.questTitleRow,children:[c.jsx("span",{className:ut.questName,children:n.title}),c.jsxs("span",{className:ut.questXp,children:["+",n.xp_reward," XP"]})]}),c.jsx("div",{className:ut.questDescription,children:n.description})]})]}),c.jsxs("div",{className:ut.progressContainer,children:[c.jsx("div",{className:ut.progressBar,children:c.jsx("div",{className:ut.progressFill,style:{width:`${s}%`}})}),c.jsxs("span",{className:ut.progressText,children:[n.current_value,"/",n.target_value]})]})]})}const T6="_bossPanel_1pnzt_1",b6="_bossButton_1pnzt_9",S6="_bossContent_1pnzt_17",N6="_bossHeader_1pnzt_25",w6="_bossIcon_1pnzt_39",x6="_defeated_1pnzt_49",A6="_bossInfo_1pnzt_57",R6="_bossName_1pnzt_65",C6="_bossDescription_1pnzt_89",I6="_bossStatus_1pnzt_101",k6="_bossReward_1pnzt_109",L6="_hpSection_1pnzt_135",j6="_hpLabel_1pnzt_143",D6="_hpTitle_1pnzt_157",O6="_hpValue_1pnzt_171",M6="_hpBar_1pnzt_181",U6="_hpFill_1pnzt_199",V6="_low_1pnzt_237",B6="_damageStats_1pnzt_255",q6="_damageStat_1pnzt_255",P6="_damageStatValue_1pnzt_283",F6="_damageStatLabel_1pnzt_295",z6="_damageGuide_1pnzt_309",H6="_damageGuideTitle_1pnzt_323",G6="_damageGuideList_1pnzt_339",X6="_damageGuideItem_1pnzt_353",Y6="_damageGuideAmount_1pnzt_365",$6="_defeatedBanner_1pnzt_377",Q6="_defeatedTitle_1pnzt_395",K6="_defeatedText_1pnzt_409",W6="_defeatedRewards_1pnzt_419",J6="_weekInfo_1pnzt_433",Z6="_loading_1pnzt_449",eU="_compactBoss_1pnzt_465",tU="_compactHeader_1pnzt_477",nU="_compactIcon_1pnzt_489",sU="_compactInfo_1pnzt_509",iU="_compactName_1pnzt_519",aU="_compactDesc_1pnzt_533",rU="_compactReward_1pnzt_549",oU="_compactVictory_1pnzt_569",lU="_compactHp_1pnzt_595",cU="_compactHpBar_1pnzt_607",uU="_compactHpFill_1pnzt_623",dU="_compactHpText_1pnzt_645",fU="_compactStats_1pnzt_659",je={bossPanel:T6,bossButton:b6,bossContent:S6,bossHeader:N6,bossIcon:w6,defeated:x6,bossInfo:A6,bossName:R6,bossDescription:C6,bossStatus:I6,bossReward:k6,hpSection:L6,hpLabel:j6,hpTitle:D6,hpValue:O6,hpBar:M6,hpFill:U6,low:V6,damageStats:B6,damageStat:q6,damageStatValue:P6,damageStatLabel:F6,damageGuide:z6,damageGuideTitle:H6,damageGuideList:G6,damageGuideItem:X6,damageGuideAmount:Y6,defeatedBanner:$6,defeatedTitle:Q6,defeatedText:K6,defeatedRewards:W6,weekInfo:J6,loading:Z6,compactBoss:eU,compactHeader:tU,compactIcon:nU,compactInfo:sU,compactName:iU,compactDesc:aU,compactReward:rU,compactVictory:oU,compactHp:lU,compactHpBar:cU,compactHpFill:uU,compactHpText:dU,compactStats:fU};function hU({boss:n,loading:e,weekStart:s,weekEnd:a,hpPercentage:o,damageDealt:u,totalDefeated:h,compact:g=!1}){const[v,_]=j.useState(!1),S=C=>new Date(C+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});if(g)return e?c.jsx("div",{className:je.loading,children:"Loading boss..."}):n?c.jsxs("div",{className:je.compactBoss,children:[c.jsxs("div",{className:je.compactHeader,children:[c.jsx("span",{className:`${je.compactIcon} ${n.is_defeated?je.defeated:""}`,children:n.icon}),c.jsxs("div",{className:je.compactInfo,children:[c.jsx("div",{className:je.compactName,children:n.name}),c.jsx("div",{className:je.compactDesc,children:n.description})]}),c.jsxs("div",{className:je.compactReward,children:["+",n.xp_reward," XP"]})]}),n.is_defeated?c.jsxs("div",{className:je.compactVictory,children:[c.jsx("span",{children:""})," Victory! Boss defeated this week!"]}):c.jsxs("div",{className:je.compactHp,children:[c.jsx("div",{className:je.compactHpBar,children:c.jsx("div",{className:`${je.compactHpFill} ${o<30?je.low:""}`,style:{width:`${o}%`}})}),c.jsxs("span",{className:je.compactHpText,children:[n.current_hp,"/",n.max_hp," HP"]})]}),c.jsxs("div",{className:je.compactStats,children:[c.jsxs("span",{children:["Damage dealt: ",u]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Bosses defeated: ",h]})]})]}):c.jsx("div",{className:je.loading,children:"No boss found"});const w=e?"Weekly Boss (Loading...)":n?.is_defeated?`Weekly Boss - ${n.name} DEFEATED!`:`Weekly Boss - ${n?.name} (${n?.current_hp}/${n?.max_hp} HP)`;return c.jsxs("div",{className:je.bossPanel,children:[c.jsx(Le,{size:"small",variant:n?.is_defeated?"primary":void 0,onClick:()=>_(!v),className:je.bossButton,children:v?"Hide Weekly Boss":w}),v&&c.jsx(wt,{className:je.bossContent,glow:n?.is_defeated,children:e?c.jsx("div",{className:je.loading,children:"Summoning this week's boss..."}):n?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:je.bossHeader,children:[c.jsx("span",{className:`${je.bossIcon} ${n.is_defeated?je.defeated:""}`,children:n.icon}),c.jsxs("div",{className:je.bossInfo,children:[c.jsx("div",{className:`${je.bossName} ${n.is_defeated?je.defeated:""}`,children:n.name}),c.jsx("div",{className:je.bossDescription,children:n.description})]}),c.jsxs("div",{className:je.bossStatus,children:[c.jsxs("div",{className:je.bossReward,children:["+",n.xp_reward," XP"]}),n.bonus_shields>0&&c.jsxs("div",{className:je.bossReward,children:["+",n.bonus_shields," Shield",n.bonus_shields>1?"s":""]})]})]}),n.is_defeated&&c.jsxs("div",{className:je.defeatedBanner,children:[c.jsx("div",{className:je.defeatedTitle,children:"Victory!"}),c.jsxs("div",{className:je.defeatedText,children:["You defeated ",n.name," this week!"]}),c.jsxs("div",{className:je.defeatedRewards,children:["Rewards: +",n.xp_reward," XP",n.bonus_shields>0&&`, +${n.bonus_shields} Streak Shield${n.bonus_shields>1?"s":""}`]})]}),!n.is_defeated&&c.jsxs("div",{className:je.hpSection,children:[c.jsxs("div",{className:je.hpLabel,children:[c.jsx("span",{className:je.hpTitle,children:"Boss HP"}),c.jsxs("span",{className:je.hpValue,children:[n.current_hp," / ",n.max_hp]})]}),c.jsx("div",{className:je.hpBar,children:c.jsx("div",{className:`${je.hpFill} ${o<30?je.low:""}`,style:{width:`${o}%`}})})]}),c.jsxs("div",{className:je.damageStats,children:[c.jsxs("div",{className:je.damageStat,children:[c.jsx("div",{className:je.damageStatValue,children:u}),c.jsx("div",{className:je.damageStatLabel,children:"Damage Dealt"})]}),c.jsxs("div",{className:je.damageStat,children:[c.jsx("div",{className:je.damageStatValue,children:h}),c.jsx("div",{className:je.damageStatLabel,children:"Bosses Defeated"})]})]}),!n.is_defeated&&c.jsxs("div",{className:je.damageGuide,children:[c.jsx("div",{className:je.damageGuideTitle,children:"How to Deal Damage"}),c.jsxs("div",{className:je.damageGuideList,children:[c.jsxs("div",{className:je.damageGuideItem,children:[c.jsx("span",{children:"Complete Step"}),c.jsxs("span",{className:je.damageGuideAmount,children:["-",ml.step_completed," HP"]})]}),c.jsxs("div",{className:je.damageGuideItem,children:[c.jsx("span",{children:"Activate Buff"}),c.jsxs("span",{className:je.damageGuideAmount,children:["-",ml.buff_activated," HP"]})]}),c.jsxs("div",{className:je.damageGuideItem,children:[c.jsx("span",{children:"Complete Quest"}),c.jsxs("span",{className:je.damageGuideAmount,children:["-",ml.quest_completed," HP"]})]}),c.jsxs("div",{className:je.damageGuideItem,children:[c.jsx("span",{children:"Complete Goal"}),c.jsxs("span",{className:je.damageGuideAmount,children:["-",ml.goal_completed," HP"]})]}),c.jsxs("div",{className:je.damageGuideItem,children:[c.jsx("span",{children:"Daily Quest"}),c.jsxs("span",{className:je.damageGuideAmount,children:["-",ml.daily_quest_completed," HP"]})]})]})]}),c.jsxs("div",{className:je.weekInfo,children:["Week of ",S(s)," - ",S(a)]})]}):c.jsx("div",{className:je.loading,children:"No boss found"})})]})}const mU="_achievementPanel_13bl3_1",pU="_statsBar_13bl3_13",_U="_statItem_13bl3_33",gU="_statValue_13bl3_47",yU="_statLabel_13bl3_59",EU="_progressBarContainer_13bl3_73",vU="_progressLabel_13bl3_85",TU="_progressTrack_13bl3_99",bU="_progressFill_13bl3_115",SU="_categoryTabs_13bl3_129",NU="_categoryTab_13bl3_129",wU="_active_13bl3_183",xU="_categoryIcon_13bl3_195",AU="_categoryCount_13bl3_203",RU="_achievementGrid_13bl3_219",CU="_achievementCard_13bl3_231",IU="_unlocked_13bl3_261",kU="_locked_13bl3_271",LU="_hidden_13bl3_279",jU="_achievementIcon_13bl3_287",DU="_achievementInfo_13bl3_335",OU="_achievementName_13bl3_345",MU="_achievementDesc_13bl3_367",UU="_achievementMeta_13bl3_379",VU="_achievementXp_13bl3_393",BU="_achievementProgress_13bl3_409",qU="_achievementProgressTrack_13bl3_423",PU="_achievementProgressFill_13bl3_441",FU="_achievementProgressText_13bl3_455",zU="_achievementUnlockDate_13bl3_469",HU="_emptyState_13bl3_479",GU="_unlockModal_13bl3_531",XU="_unlockIcon_13bl3_539",YU="_unlockTitle_13bl3_551",$U="_unlockDesc_13bl3_565",QU="_unlockReward_13bl3_577",et={achievementPanel:mU,statsBar:pU,statItem:_U,statValue:gU,statLabel:yU,progressBarContainer:EU,progressLabel:vU,progressTrack:TU,progressFill:bU,categoryTabs:SU,categoryTab:NU,active:wU,categoryIcon:xU,categoryCount:AU,achievementGrid:RU,achievementCard:CU,unlocked:IU,locked:kU,hidden:LU,achievementIcon:jU,achievementInfo:DU,achievementName:OU,achievementDesc:MU,achievementMeta:UU,achievementXp:VU,achievementProgress:BU,achievementProgressTrack:qU,achievementProgressFill:PU,achievementProgressText:FU,achievementUnlockDate:zU,emptyState:HU,unlockModal:GU,unlockIcon:XU,unlockTitle:YU,unlockDesc:$U,unlockReward:QU},KU=["quests","buffs","streaks","boss","levels","special"];function WU({achievements:n,stats:e,loading:s,compact:a=!1}){const[o,u]=j.useState("all"),h=o==="all"?n:n.filter(_=>_.category===o),g=_=>{const S=n.filter(C=>C.category===_);return{unlocked:S.filter(C=>C.unlocked).length,total:S.length}},v=e.total>0?Math.round(e.unlocked/e.total*100):0;return s?c.jsx(wt,{header:"Achievements",children:c.jsx("div",{className:et.emptyState,children:"Loading achievements..."})}):c.jsx(wt,{header:"Achievements",glow:!0,children:c.jsxs("div",{className:et.achievementPanel,children:[c.jsxs("div",{className:et.statsBar,children:[c.jsxs("div",{className:et.statItem,children:[c.jsx("span",{className:et.statValue,children:e.unlocked}),c.jsx("span",{className:et.statLabel,children:"Unlocked"})]}),c.jsxs("div",{className:et.progressBarContainer,children:[c.jsxs("div",{className:et.progressLabel,children:[v,"% Complete"]}),c.jsx("div",{className:et.progressTrack,children:c.jsx("div",{className:et.progressFill,style:{width:`${v}%`}})})]}),c.jsxs("div",{className:et.statItem,children:[c.jsx("span",{className:et.statValue,children:e.earnedXp}),c.jsx("span",{className:et.statLabel,children:"XP Earned"})]})]}),c.jsxs("div",{className:et.categoryTabs,children:[c.jsxs("button",{className:`${et.categoryTab} ${o==="all"?et.active:""}`,onClick:()=>u("all"),children:[c.jsx("span",{className:et.categoryIcon,children:""}),"All",c.jsxs("span",{className:et.categoryCount,children:[e.unlocked,"/",e.total]})]}),KU.map(_=>{const S=g(_);return S.total===0?null:c.jsxs("button",{className:`${et.categoryTab} ${o===_?et.active:""}`,onClick:()=>u(_),children:[c.jsx("span",{className:et.categoryIcon,children:HN[_]}),zN[_],c.jsxs("span",{className:et.categoryCount,children:[S.unlocked,"/",S.total]})]},_)})]}),h.length===0?c.jsx("div",{className:et.emptyState,children:"No achievements in this category yet"}):c.jsx("div",{className:et.achievementGrid,children:h.map(_=>c.jsx(JU,{achievement:_},_.id))})]})})}function JU({achievement:n}){const e=`${et.achievementCard} ${n.unlocked?et.unlocked:et.locked} ${n.is_hidden&&!n.unlocked?et.hidden:""}`,s=a=>new Date(a+"Z").toLocaleDateString();return c.jsxs("div",{className:e,children:[c.jsx("div",{className:et.achievementIcon,children:n.icon}),c.jsxs("div",{className:et.achievementInfo,children:[c.jsx("div",{className:et.achievementName,children:n.is_hidden&&!n.unlocked?"???":n.name}),c.jsx("div",{className:et.achievementDesc,children:n.is_hidden&&!n.unlocked?"Hidden achievement":n.description}),c.jsxs("div",{className:et.achievementMeta,children:[c.jsxs("span",{className:et.achievementXp,children:["+",n.xp_reward," XP"]}),n.unlocked?c.jsxs("span",{className:et.achievementUnlockDate,children:["Unlocked ",s(n.unlocked_at)]}):c.jsxs("div",{className:et.achievementProgress,children:[c.jsx("div",{className:et.achievementProgressTrack,children:c.jsx("div",{className:et.achievementProgressFill,style:{width:`${n.progress_percent}%`}})}),c.jsxs("span",{className:et.achievementProgressText,children:[n.current_value,"/",n.requirement_value]})]})]})]})]})}function ZU({unlock:n,onDismiss:e}){return n?c.jsx(kl,{open:!0,onClose:e,title:"Achievement Unlocked!",actions:c.jsx(Le,{variant:"primary",onClick:e,children:"Awesome!"}),children:c.jsxs("div",{className:et.unlockModal,children:[c.jsx("div",{className:et.unlockIcon,children:n.achievement.icon}),c.jsx("div",{className:et.unlockTitle,children:n.achievement.name}),c.jsx("div",{className:et.unlockDesc,children:n.achievement.description}),c.jsxs("div",{className:et.unlockReward,children:["+",n.xpAwarded," XP"]})]})}):null}const e9="_focusTimerPanel_clj8g_1",t9="_timerContainer_clj8g_13",n9="_timerCircleWrapper_clj8g_33",s9="_timerCircle_clj8g_33",i9="_timerCircleBg_clj8g_55",a9="_timerCircleProgress_clj8g_67",r9="_work_clj8g_81",o9="_shortBreak_clj8g_89",l9="_longBreak_clj8g_97",c9="_idle_clj8g_105",u9="_timerDisplay_clj8g_113",d9="_timerTime_clj8g_129",f9="_timerPhase_clj8g_143",h9="_timerControls_clj8g_181",m9="_sessionCount_clj8g_191",p9="_sessionDot_clj8g_209",_9="_completed_clj8g_225",g9="_active_clj8g_235",y9="_statsGrid_clj8g_247",E9="_statCard_clj8g_259",v9="_statIcon_clj8g_279",T9="_statValue_clj8g_289",b9="_statLabel_clj8g_301",S9="_settingsGrid_clj8g_319",N9="_settingItem_clj8g_331",w9="_settingLabel_clj8g_343",x9="_settingInput_clj8g_353",A9="_toggleRow_clj8g_383",R9="_toggleLabel_clj8g_407",C9="_toggle_clj8g_383",I9="_toggleKnob_clj8g_449",k9="_sessionList_clj8g_483",L9="_sessionItem_clj8g_495",j9="_cancelled_clj8g_523",D9="_sessionTime_clj8g_533",O9="_sessionInfo_clj8g_547",M9="_sessionXp_clj8g_559",Ae={focusTimerPanel:e9,timerContainer:t9,timerCircleWrapper:n9,timerCircle:s9,timerCircleBg:i9,timerCircleProgress:a9,work:r9,shortBreak:o9,longBreak:l9,idle:c9,timerDisplay:u9,timerTime:d9,timerPhase:f9,timerControls:h9,sessionCount:m9,sessionDot:p9,completed:_9,active:g9,statsGrid:y9,statCard:E9,statIcon:v9,statValue:T9,statLabel:b9,settingsGrid:S9,settingItem:N9,settingLabel:w9,settingInput:x9,toggleRow:A9,toggleLabel:R9,toggle:C9,toggleKnob:I9,sessionList:k9,sessionItem:L9,cancelled:j9,sessionTime:D9,sessionInfo:O9,sessionXp:M9};function U9({timeRemaining:n,totalTime:e,phase:s,formattedTime:a}){const g=192*Math.PI,v=e>0?n/e:1,_=g*(1-v),S={work:"Focus",short_break:"Short Break",long_break:"Long Break",idle:"Ready"}[s];return c.jsxs("div",{className:Ae.timerCircleWrapper,children:[c.jsxs("svg",{className:Ae.timerCircle,width:200,height:200,children:[c.jsx("circle",{className:Ae.timerCircleBg,cx:200/2,cy:200/2,r:96}),c.jsx("circle",{className:`${Ae.timerCircleProgress} ${s==="work"?Ae.work:s==="short_break"?Ae.shortBreak:s==="long_break"?Ae.longBreak:Ae.idle}`,cx:200/2,cy:200/2,r:96,strokeDasharray:g,strokeDashoffset:_})]}),c.jsxs("div",{className:Ae.timerDisplay,children:[c.jsx("div",{className:Ae.timerTime,children:a}),c.jsx("div",{className:`${Ae.timerPhase} ${s==="work"?Ae.work:s==="short_break"?Ae.shortBreak:s==="long_break"?Ae.longBreak:""}`,children:S})]})]})}function V9({settings:n,onUpdateSettings:e}){return c.jsxs(wt,{header:"Timer Settings",children:[c.jsxs("div",{className:Ae.settingsGrid,children:[c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Work Duration (min)"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:n.work_duration,onChange:s=>e({work_duration:Number(s.target.value)}),min:1,max:120})]}),c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Short Break (min)"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:n.short_break,onChange:s=>e({short_break:Number(s.target.value)}),min:1,max:30})]}),c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Long Break (min)"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:n.long_break,onChange:s=>e({long_break:Number(s.target.value)}),min:1,max:60})]}),c.jsxs("div",{className:Ae.settingItem,children:[c.jsx("label",{className:Ae.settingLabel,children:"Sessions Before Long Break"}),c.jsx("input",{type:"number",className:Ae.settingInput,value:n.sessions_before_long_break,onChange:s=>e({sessions_before_long_break:Number(s.target.value)}),min:1,max:10})]})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{className:Ae.toggleRow,children:[c.jsx("span",{className:Ae.toggleLabel,children:"Auto-start breaks"}),c.jsx("div",{className:`${Ae.toggle} ${n.auto_start_breaks?Ae.active:""}`,onClick:()=>e({auto_start_breaks:!n.auto_start_breaks}),children:c.jsx("div",{className:Ae.toggleKnob})})]}),c.jsxs("div",{className:Ae.toggleRow,children:[c.jsx("span",{className:Ae.toggleLabel,children:"Sound notifications"}),c.jsx("div",{className:`${Ae.toggle} ${n.sound_enabled?Ae.active:""}`,onClick:()=>e({sound_enabled:!n.sound_enabled}),children:c.jsx("div",{className:Ae.toggleKnob})})]})]})]})}function B9({settings:n,stats:e,timerState:s,recentSessions:a,onStartWork:o,onStartBreak:u,onPause:h,onResume:g,onStop:v,onSkipBreak:_,onUpdateSettings:S,formatTime:w}){const[C,q]=j.useState(!1),X=()=>{switch(s.phase){case"work":return n.work_duration*60;case"short_break":return n.short_break*60;case"long_break":return n.long_break*60;default:return n.work_duration*60}},O=n.sessions_before_long_break-s.sessionsCompleted%n.sessions_before_long_break;return c.jsxs("div",{className:Ae.focusTimerPanel,children:[c.jsx(wt,{header:"Focus Timer",glow:!0,children:c.jsxs("div",{className:Ae.timerContainer,children:[c.jsx(U9,{timeRemaining:s.timeRemaining,totalTime:X(),phase:s.phase,formattedTime:w(s.timeRemaining)}),c.jsxs("div",{className:Ae.timerControls,children:[s.phase==="idle"&&c.jsx(Le,{variant:"primary",onClick:()=>o(),children:"Start Focus"}),s.phase==="work"&&s.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Le,{variant:"ghost",onClick:h,children:"Pause"}),c.jsx(Le,{variant:"danger",onClick:v,children:"Stop"})]}),s.phase==="work"&&!s.isRunning&&c.jsxs(c.Fragment,{children:[c.jsx(Le,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Le,{variant:"danger",onClick:v,children:"Stop"})]}),(s.phase==="short_break"||s.phase==="long_break")&&c.jsxs(c.Fragment,{children:[s.isRunning?c.jsx(Le,{variant:"ghost",onClick:h,children:"Pause"}):c.jsx(Le,{variant:"primary",onClick:g,children:"Resume"}),c.jsx(Le,{variant:"ghost",onClick:_,children:"Skip Break"})]})]}),c.jsxs("div",{className:Ae.sessionCount,children:[Array.from({length:n.sessions_before_long_break}).map((V,z)=>c.jsx("div",{className:`${Ae.sessionDot} ${z<s.sessionsCompleted%n.sessions_before_long_break?Ae.completed:""} ${z===s.sessionsCompleted%n.sessions_before_long_break&&s.phase==="work"?Ae.active:""}`},z)),c.jsxs("span",{style:{marginLeft:8},children:[O," until long break"]})]})]})}),c.jsxs("div",{className:Ae.statsGrid,children:[c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsx("span",{className:Ae.statValue,children:e.total_sessions}),c.jsx("span",{className:Ae.statLabel,children:"Total Sessions"})]}),c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsxs("span",{className:Ae.statValue,children:[Math.round(e.total_minutes/60),"h"]}),c.jsx("span",{className:Ae.statLabel,children:"Total Focus"})]}),c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsx("span",{className:Ae.statValue,children:e.current_streak}),c.jsx("span",{className:Ae.statLabel,children:"Current Streak"})]}),c.jsxs("div",{className:Ae.statCard,children:[c.jsx("span",{className:Ae.statIcon,children:""}),c.jsx("span",{className:Ae.statValue,children:e.today_sessions}),c.jsx("span",{className:Ae.statLabel,children:"Today"})]})]}),c.jsx(Le,{variant:"ghost",size:"small",onClick:()=>q(!C),children:C?"Hide Settings":"Timer Settings"}),C&&c.jsx(V9,{settings:n,onUpdateSettings:S}),a.length>0&&c.jsx(wt,{header:"Recent Sessions",children:c.jsx("div",{className:Ae.sessionList,children:a.slice(0,5).map(V=>c.jsxs("div",{className:`${Ae.sessionItem} ${V.status==="completed"?Ae.completed:Ae.cancelled}`,children:[c.jsxs("span",{className:Ae.sessionTime,children:[V.duration_minutes,"m"]}),c.jsx("span",{className:Ae.sessionInfo,children:new Date(V.started_at+"Z").toLocaleString()}),V.status==="completed"&&V.xp_earned>0&&c.jsxs("span",{className:Ae.sessionXp,children:["+",V.xp_earned," XP"]})]},V.id))})})]})}const q9="_routinePanel_1b2ro_1",P9="_routineGrid_1b2ro_13",F9="_routineCard_1b2ro_25",z9="_morning_1b2ro_53",H9="_evening_1b2ro_61",G9="_custom_1b2ro_69",X9="_completed_1b2ro_77",Y9="_routineHeader_1b2ro_87",$9="_routineInfo_1b2ro_101",Q9="_routineName_1b2ro_109",K9="_routineType_1b2ro_123",W9="_routineStreak_1b2ro_177",J9="_routineDesc_1b2ro_201",Z9="_routineProgress_1b2ro_213",eV="_progressTrack_1b2ro_227",tV="_progressFill_1b2ro_243",nV="_progressText_1b2ro_257",sV="_stepsList_1b2ro_271",iV="_stepItem_1b2ro_283",aV="_skipped_1b2ro_313",rV="_optional_1b2ro_323",oV="_stepCheckbox_1b2ro_331",lV="_checked_1b2ro_365",cV="_stepInfo_1b2ro_377",uV="_stepTitle_1b2ro_385",dV="_stepMeta_1b2ro_395",fV="_stepDuration_1b2ro_411",hV="_optionalBadge_1b2ro_423",mV="_stepActions_1b2ro_439",pV="_routineActions_1b2ro_449",_V="_formSection_1b2ro_467",gV="_formRow_1b2ro_487",yV="_emptyState_1b2ro_505",Ke={routinePanel:q9,routineGrid:P9,routineCard:F9,morning:z9,evening:H9,custom:G9,completed:X9,routineHeader:Y9,routineInfo:$9,routineName:Q9,routineType:K9,routineStreak:W9,routineDesc:J9,routineProgress:Z9,progressTrack:eV,progressFill:tV,progressText:nV,stepsList:sV,stepItem:iV,skipped:aV,optional:rV,stepCheckbox:oV,checked:lV,stepInfo:cV,stepTitle:uV,stepMeta:dV,stepDuration:fV,optionalBadge:hV,stepActions:mV,routineActions:pV,formSection:_V,formRow:gV,emptyState:yV};function EV({routines:n,loading:e,onCreateRoutine:s,onDeleteRoutine:a,onStartRoutine:o,onCompleteStep:u,onSkipStep:h,onAddStep:g,onDeleteStep:v,getStepsWithStatus:_,compact:S=!1}){const[w,C]=j.useState(!1),[q,X]=j.useState(null),[O,V]=j.useState(""),[z,$]=j.useState("morning"),[Z,ie]=j.useState(""),[_e,Te]=j.useState(25),M=()=>{V(""),$("morning"),ie(""),Te(25)},D=()=>{O.trim()&&(s(O.trim(),z,Z.trim(),_e),M(),C(!1))},U=n.filter(L=>L.type==="morning"),B=n.filter(L=>L.type==="evening"),A=n.filter(L=>L.type==="custom");return e?c.jsx(wt,{header:"Routines",children:c.jsx("div",{className:Ke.emptyState,children:"Loading routines..."})}):c.jsxs("div",{className:Ke.routinePanel,children:[c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:c.jsx(Le,{variant:"primary",onClick:()=>{M(),C(!0)},children:"+ New Routine"})}),n.length===0?c.jsx(wt,{header:"Routines",children:c.jsx("div",{className:Ke.emptyState,children:"No routines yet. Create your first morning or evening routine!"})}):c.jsxs(c.Fragment,{children:[U.length>0&&c.jsx(wt,{header:"Morning Routines",children:c.jsx("div",{className:Ke.routineGrid,children:U.map(L=>c.jsx(Om,{routine:L,stepsWithStatus:_(L.id),onStart:()=>o(L.id),onCompleteStep:k=>u(L.id,k),onSkipStep:k=>h(L.id,k),onEdit:()=>X(L.id),onDelete:()=>a(L.id)},L.id))})}),B.length>0&&c.jsx(wt,{header:"Evening Routines",children:c.jsx("div",{className:Ke.routineGrid,children:B.map(L=>c.jsx(Om,{routine:L,stepsWithStatus:_(L.id),onStart:()=>o(L.id),onCompleteStep:k=>u(L.id,k),onSkipStep:k=>h(L.id,k),onEdit:()=>X(L.id),onDelete:()=>a(L.id)},L.id))})}),A.length>0&&c.jsx(wt,{header:"Custom Routines",children:c.jsx("div",{className:Ke.routineGrid,children:A.map(L=>c.jsx(Om,{routine:L,stepsWithStatus:_(L.id),onStart:()=>o(L.id),onCompleteStep:k=>u(L.id,k),onSkipStep:k=>h(L.id,k),onEdit:()=>X(L.id),onDelete:()=>a(L.id)},L.id))})})]}),c.jsx(kl,{open:w,onClose:()=>C(!1),title:"Create Routine",actions:c.jsxs(c.Fragment,{children:[c.jsx(Le,{onClick:()=>C(!1),children:"Cancel"}),c.jsx(Le,{variant:"primary",onClick:D,children:"Create"})]}),children:c.jsxs("div",{className:Ke.formSection,children:[c.jsx(Xi,{label:"Name",value:O,onChange:L=>V(L.target.value),placeholder:"e.g., Morning Power-Up"}),c.jsxs("div",{className:Ke.formRow,children:[c.jsxs(ba,{label:"Type",value:z,onChange:L=>$(L.target.value),children:[c.jsx("option",{value:"morning",children:"Morning"}),c.jsx("option",{value:"evening",children:"Evening"}),c.jsx("option",{value:"custom",children:"Custom"})]}),c.jsx(Xi,{label:"Bonus XP",type:"number",value:_e,onChange:L=>Te(Number(L.target.value)),min:0,max:200})]}),c.jsx(Md,{label:"Description",value:Z,onChange:L=>ie(L.target.value),placeholder:"Describe this routine..."})]})}),q&&c.jsx(vV,{routine:n.find(L=>L.id===q),onClose:()=>X(null),onAddStep:g,onDeleteStep:v})]})}function Om({routine:n,stepsWithStatus:e,onStart:s,onCompleteStep:a,onSkipStep:o,onEdit:u,onDelete:h}){const g=n.todayLog!==void 0,v=n.todayLog?.is_completed||!1,_=e.filter(C=>C.is_completed).length,S=e.length,w=S>0?Math.round(_/S*100):0;return c.jsxs("div",{className:`${Ke.routineCard} ${Ke[n.type]} ${v?Ke.completed:""}`,children:[c.jsxs("div",{className:Ke.routineHeader,children:[c.jsxs("div",{className:Ke.routineInfo,children:[c.jsx("div",{className:Ke.routineName,children:n.name}),c.jsxs("span",{className:`${Ke.routineType} ${Ke[n.type]}`,children:[n.type==="morning"?"":n.type==="evening"?"":""," ",n.type]})]}),n.streak&&n.streak.current_streak>0&&c.jsxs("div",{className:Ke.routineStreak,children:[" ",n.streak.current_streak," day",n.streak.current_streak!==1?"s":""]})]}),n.description&&c.jsx("div",{className:Ke.routineDesc,children:n.description}),g&&c.jsxs("div",{className:Ke.routineProgress,children:[c.jsx("div",{className:Ke.progressTrack,children:c.jsx("div",{className:Ke.progressFill,style:{width:`${w}%`}})}),c.jsxs("span",{className:Ke.progressText,children:[_,"/",S]})]}),g&&e.length>0&&c.jsx("div",{className:Ke.stepsList,children:e.map(C=>c.jsxs("div",{className:`${Ke.stepItem} ${C.is_completed?Ke.completed:""} ${C.skipped?Ke.skipped:""} ${C.is_optional?Ke.optional:""}`,children:[c.jsx("div",{className:`${Ke.stepCheckbox} ${C.is_completed?Ke.checked:""}`,onClick:()=>!C.is_completed&&!C.skipped&&!v&&a(C.id),children:C.is_completed&&""}),c.jsxs("div",{className:Ke.stepInfo,children:[c.jsx("div",{className:Ke.stepTitle,children:C.title}),c.jsxs("div",{className:Ke.stepMeta,children:[c.jsxs("span",{className:Ke.stepDuration,children:[" ",C.duration_minutes,"m"]}),C.is_optional&&c.jsx("span",{className:Ke.optionalBadge,children:"Optional"})]})]}),!C.is_completed&&!C.skipped&&!v&&C.is_optional&&c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>o(C.id),children:"Skip"})]},C.id))}),c.jsxs("div",{className:Ke.routineActions,children:[!g&&n.steps.length>0&&c.jsx(Le,{variant:"primary",onClick:s,children:"Start Routine"}),v&&c.jsxs("span",{style:{color:"var(--buff-color)",fontFamily:"var(--font-heading)"},children:[" Completed Today (+",n.todayLog?.xp_earned||n.bonus_xp," XP)"]}),c.jsx("div",{style:{flex:1}}),c.jsx(Le,{size:"small",variant:"ghost",onClick:u,children:"Edit"}),c.jsx(Le,{size:"small",variant:"danger",onClick:h,children:"Delete"})]})]})}function vV({routine:n,onClose:e,onAddStep:s,onDeleteStep:a}){const[o,u]=j.useState(""),[h,g]=j.useState(""),[v,_]=j.useState(5),[S,w]=j.useState(!1),C=()=>{o.trim()&&(s(n.id,o.trim(),h.trim(),null,v,S),u(""),g(""),_(5),w(!1))};return c.jsx(kl,{open:!0,onClose:e,title:`Edit: ${n.name}`,actions:c.jsx(Le,{onClick:e,children:"Done"}),children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[c.jsxs("div",{className:Ke.formSection,children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Add Step"}),c.jsx(Xi,{label:"Step Title",value:o,onChange:q=>u(q.target.value),placeholder:"e.g., Drink water"}),c.jsxs("div",{className:Ke.formRow,children:[c.jsx(Xi,{label:"Duration (min)",type:"number",value:v,onChange:q=>_(Number(q.target.value)),min:1,max:120}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,paddingTop:20},children:[c.jsx("input",{type:"checkbox",checked:S,onChange:q=>w(q.target.checked)}),c.jsx("label",{children:"Optional"})]})]}),c.jsx(Le,{variant:"primary",onClick:C,children:"Add Step"})]}),n.steps.length>0&&c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 12px",color:"var(--text-gold)"},children:"Current Steps"}),c.jsx("div",{className:Ke.stepsList,children:n.steps.map((q,X)=>c.jsxs("div",{className:`${Ke.stepItem} ${q.is_optional?Ke.optional:""}`,children:[c.jsxs("span",{style:{color:"var(--text-dim)",minWidth:24},children:[X+1,"."]}),c.jsxs("div",{className:Ke.stepInfo,children:[c.jsx("div",{className:Ke.stepTitle,children:q.title}),c.jsxs("div",{className:Ke.stepMeta,children:[c.jsxs("span",{className:Ke.stepDuration,children:[" ",q.duration_minutes,"m"]}),q.is_optional&&c.jsx("span",{className:Ke.optionalBadge,children:"Optional"})]})]}),c.jsx(Le,{size:"small",variant:"danger",onClick:()=>a(q.id),children:"Remove"})]},q.id))})]})]})})}const TV="_comboPanel_1yu75_1",bV="_comboGrid_1yu75_13",SV="_comboCard_1yu75_25",NV="_ready_1yu75_53",wV="_inProgress_1yu75_65",xV="_comboHeader_1yu75_73",AV="_comboIcon_1yu75_87",RV="_comboInfo_1yu75_95",CV="_comboName_1yu75_103",IV="_comboXp_1yu75_115",kV="_comboDesc_1yu75_127",LV="_comboBuffs_1yu75_139",jV="_comboBuff_1yu75_139",DV="_active_1yu75_177",OV="_missing_1yu75_189",MV="_buffCheck_1yu75_197",UV="_comboProgress_1yu75_205",VV="_progressTrack_1yu75_219",BV="_progressFill_1yu75_235",qV="_complete_1yu75_249",PV="_progressText_1yu75_257",FV="_comboActions_1yu75_271",zV="_emptyState_1yu75_313",zt={comboPanel:TV,comboGrid:bV,comboCard:SV,ready:NV,inProgress:wV,comboHeader:xV,comboIcon:AV,comboInfo:RV,comboName:CV,comboXp:IV,comboDesc:kV,comboBuffs:LV,comboBuff:jV,active:DV,missing:OV,buffCheck:MV,comboProgress:UV,progressTrack:VV,progressFill:BV,complete:qV,progressText:PV,comboActions:FV,emptyState:zV};function HV({combos:n,loading:e,onClaimCombo:s,compact:a=!1}){const o=n.filter(g=>g.is_ready),u=n.filter(g=>g.progress>0&&!g.is_ready),h=n.filter(g=>g.progress===0);return e?c.jsx(wt,{header:"Habit Combos",children:c.jsx("div",{className:zt.emptyState,children:"Loading combos..."})}):n.length===0?c.jsx(wt,{header:"Habit Combos",children:c.jsx("div",{className:zt.emptyState,children:"No combos available. Create buff definitions to unlock combos!"})}):c.jsxs("div",{className:zt.comboPanel,children:[o.length>0&&c.jsx(wt,{header:"Ready to Claim!",glow:!0,children:c.jsx("div",{className:zt.comboGrid,children:o.map(g=>c.jsx(Mm,{combo:g,onClaim:()=>s(g.id)},g.id))})}),u.length>0&&c.jsx(wt,{header:"In Progress",children:c.jsx("div",{className:zt.comboGrid,children:u.map(g=>c.jsx(Mm,{combo:g},g.id))})}),h.length>0&&c.jsx(wt,{header:"Available Combos",children:c.jsx("div",{className:zt.comboGrid,children:h.map(g=>c.jsx(Mm,{combo:g},g.id))})})]})}function Mm({combo:n,onClaim:e}){const s=JSON.parse(n.required_buffs);return c.jsxs("div",{className:`${zt.comboCard} ${n.is_ready?zt.ready:n.progress>0?zt.inProgress:""}`,children:[c.jsxs("div",{className:zt.comboHeader,children:[c.jsx("span",{className:zt.comboIcon,children:n.icon}),c.jsxs("div",{className:zt.comboInfo,children:[c.jsx("div",{className:zt.comboName,children:n.name}),c.jsxs("div",{className:zt.comboXp,children:["+",n.bonus_xp," XP"]})]})]}),c.jsx("div",{className:zt.comboDesc,children:n.description}),c.jsx("div",{className:zt.comboBuffs,children:n.required_buff_names.map((a,o)=>{const u=s[o],h=n.active_buff_ids.includes(u);return c.jsxs("div",{className:`${zt.comboBuff} ${h?zt.active:zt.missing}`,children:[c.jsx("span",{className:zt.buffCheck,children:h?"":""}),a]},o)})}),c.jsxs("div",{className:zt.comboProgress,children:[c.jsx("div",{className:zt.progressTrack,children:c.jsx("div",{className:`${zt.progressFill} ${n.progress===100?zt.complete:""}`,style:{width:`${n.progress}%`}})}),c.jsxs("span",{className:zt.progressText,children:[n.progress,"%"]})]}),n.is_ready&&e&&c.jsx("div",{className:zt.comboActions,children:c.jsx(Le,{variant:"primary",onClick:e,style:{width:"100%"},children:"Claim Combo!"})}),n.last_activated&&!n.is_ready&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textAlign:"center"},children:["Last claimed: ",new Date(n.last_activated+"Z").toLocaleDateString()]})]})}const GV="_weeklyReviewPanel_1ro8g_1",XV="_weekHeader_1ro8g_13",YV="_weekTitle_1ro8g_27",$V="_weekDates_1ro8g_39",QV="_summaryGrid_1ro8g_49",KV="_summaryCard_1ro8g_61",WV="_summaryIcon_1ro8g_83",JV="_summaryValue_1ro8g_93",ZV="_summaryLabel_1ro8g_105",eB="_highlight_1ro8g_121",tB="_reflectionSection_1ro8g_131",nB="_reflectionField_1ro8g_143",sB="_reflectionLabel_1ro8g_155",iB="_reflectionIcon_1ro8g_173",aB="_reflectionTextarea_1ro8g_181",rB="_prioritiesSection_1ro8g_223",oB="_priorityInput_1ro8g_235",lB="_priorityList_1ro8g_277",cB="_priorityItem_1ro8g_289",uB="_priorityNumber_1ro8g_309",dB="_priorityText_1ro8g_321",fB="_removeBtn_1ro8g_331",hB="_completedBanner_1ro8g_357",mB="_completedIcon_1ro8g_385",pB="_actions_1ro8g_393",_B="_emptyState_1ro8g_497",gB="_compactPanel_1ro8g_533",yB="_compactMessage_1ro8g_545",EB="_compactCompletedBanner_1ro8g_559",vB="_compactSummary_1ro8g_587",TB="_compactStat_1ro8g_601",bB="_compactActions_1ro8g_631",qe={weeklyReviewPanel:GV,weekHeader:XV,weekTitle:YV,weekDates:$V,summaryGrid:QV,summaryCard:KV,summaryIcon:WV,summaryValue:JV,summaryLabel:ZV,highlight:eB,reflectionSection:tB,reflectionField:nB,reflectionLabel:sB,reflectionIcon:iB,reflectionTextarea:aB,prioritiesSection:rB,priorityInput:oB,priorityList:lB,priorityItem:cB,priorityNumber:uB,priorityText:dB,removeBtn:fB,completedBanner:hB,completedIcon:mB,actions:pB,emptyState:_B,compactPanel:gB,compactMessage:yB,compactCompletedBanner:EB,compactSummary:vB,compactStat:TB,compactActions:bB};function SB({currentReview:n,loading:e,onGenerateSummary:s,onUpdateContent:a,onCompleteReview:o,getSummaryFromReview:u,getPrioritiesFromReview:h,getWeekStart:g,compact:v=!1}){const[_,S]=j.useState(""),[w,C]=j.useState(""),[q,X]=j.useState([]),[O,V]=j.useState(""),[z,$]=j.useState(""),[Z,ie]=j.useState(null),[_e,Te]=j.useState(!1);j.useEffect(()=>{n&&(S(n.wins),C(n.challenges),X(h(n)),V(n.notes),ie(u(n)))},[n,u,h]);const M=async()=>{Te(!0);const{summary:ve}=await s();ie(ve),Te(!1)},D=()=>{if(!z.trim()||q.length>=5)return;const ve=[...q,z.trim()];X(ve),$(""),a(_,w,ve,O)},U=ve=>{const Qe=q.filter((Y,ne)=>ne!==ve);X(Qe),a(_,w,Qe,O)},B=()=>{a(_,w,q,O)},A=()=>{B(),o()},L=ve=>{const Qe=new Date(ve),Y=new Date(ve);return Y.setDate(Y.getDate()+6),`${Qe.toLocaleDateString()} - ${Y.toLocaleDateString()}`};if(e)return c.jsx(wt,{header:"Weekly Review",children:c.jsx("div",{className:qe.emptyState,children:"Loading..."})});if(v){const ve=n?.is_completed,Qe=n?u(n):Z;return!n&&!Z?c.jsxs("div",{className:qe.compactPanel,children:[c.jsx("p",{className:qe.compactMessage,children:"Generate your weekly summary to review your progress!"}),c.jsx(Le,{variant:"primary",size:"small",onClick:M,disabled:_e,children:_e?"Generating...":"Generate Summary"})]}):c.jsxs("div",{className:qe.compactPanel,children:[ve&&c.jsxs("div",{className:qe.compactCompletedBanner,children:[" Completed (+",n?.xp_earned||_l," XP)"]}),Qe&&c.jsxs("div",{className:qe.compactSummary,children:[c.jsxs("div",{className:qe.compactStat,children:[c.jsx("span",{children:""})," ",Qe.steps_completed," Steps"]}),c.jsxs("div",{className:qe.compactStat,children:[c.jsx("span",{children:""})," ",Qe.quests_completed," Quests"]}),c.jsxs("div",{className:qe.compactStat,children:[c.jsx("span",{children:""})," ",Qe.xp_earned," XP"]}),c.jsxs("div",{className:qe.compactStat,children:[c.jsx("span",{children:""})," ",Qe.focus_sessions," Focus"]})]}),!ve&&c.jsx("div",{className:qe.compactActions,children:c.jsxs(Le,{variant:"primary",size:"small",onClick:A,children:["Complete Review (+",_l," XP)"]})})]})}if(!n&&!Z)return c.jsx(wt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:qe.weeklyReviewPanel,children:[c.jsxs("div",{className:qe.weekHeader,children:[c.jsx("span",{className:qe.weekTitle,children:"This Week's Review"}),c.jsx("span",{className:qe.weekDates,children:L(g())})]}),c.jsxs("div",{className:qe.emptyState,children:[c.jsx("p",{children:"Generate your weekly summary to review your progress!"}),c.jsx(Le,{variant:"primary",onClick:M,disabled:_e,style:{marginTop:16},children:_e?"Generating...":"Generate Summary"})]})]})});const k=n?.is_completed;return c.jsx(wt,{header:"Weekly Review",glow:!0,children:c.jsxs("div",{className:qe.weeklyReviewPanel,children:[c.jsxs("div",{className:qe.weekHeader,children:[c.jsxs("span",{className:qe.weekTitle,children:["Week of ",n?.week_start||g()]}),c.jsx("span",{className:qe.weekDates,children:L(n?.week_start||g())})]}),k&&c.jsxs("div",{className:qe.completedBanner,children:[c.jsx("span",{className:qe.completedIcon,children:""}),"Review Completed (+",n?.xp_earned||_l," XP)"]}),Z&&c.jsxs("div",{className:qe.summaryGrid,children:[c.jsx(dr,{icon:"",value:Z.steps_completed,label:"Steps"}),c.jsx(dr,{icon:"",value:Z.quests_completed,label:"Quests"}),c.jsx(dr,{icon:"",value:Z.goals_completed,label:"Goals",highlight:!0}),c.jsx(dr,{icon:"",value:Z.buffs_activated,label:"Buffs"}),c.jsx(dr,{icon:"",value:Z.xp_earned,label:"XP Earned",highlight:!0}),c.jsx(dr,{icon:"",value:Z.boss_damage_dealt,label:"Boss Dmg"}),c.jsx(dr,{icon:"",value:Z.focus_sessions,label:"Focus"}),c.jsx(dr,{icon:"",value:Z.routines_completed,label:"Routines"})]}),c.jsxs("div",{className:qe.reflectionSection,children:[c.jsxs("div",{className:qe.reflectionField,children:[c.jsxs("label",{className:qe.reflectionLabel,children:[c.jsx("span",{className:qe.reflectionIcon,children:""}),"Wins This Week"]}),c.jsx("textarea",{className:qe.reflectionTextarea,value:_,onChange:ve=>S(ve.target.value),onBlur:B,placeholder:"What went well? What are you proud of?",disabled:k})]}),c.jsxs("div",{className:qe.reflectionField,children:[c.jsxs("label",{className:qe.reflectionLabel,children:[c.jsx("span",{className:qe.reflectionIcon,children:""}),"Challenges & Learnings"]}),c.jsx("textarea",{className:qe.reflectionTextarea,value:w,onChange:ve=>C(ve.target.value),onBlur:B,placeholder:"What was difficult? What did you learn?",disabled:k})]}),c.jsxs("div",{className:qe.reflectionField,children:[c.jsxs("label",{className:qe.reflectionLabel,children:[c.jsx("span",{className:qe.reflectionIcon,children:""}),"Priorities for Next Week (up to 5)"]}),c.jsxs("div",{className:qe.prioritiesSection,children:[!k&&q.length<5&&c.jsxs("div",{className:qe.priorityInput,children:[c.jsx("input",{type:"text",value:z,onChange:ve=>$(ve.target.value),placeholder:"Add a priority...",onKeyDown:ve=>ve.key==="Enter"&&D()}),c.jsx(Le,{size:"small",onClick:D,children:"Add"})]}),q.length>0&&c.jsx("div",{className:qe.priorityList,children:q.map((ve,Qe)=>c.jsxs("div",{className:qe.priorityItem,children:[c.jsxs("span",{className:qe.priorityNumber,children:[Qe+1,"."]}),c.jsx("span",{className:qe.priorityText,children:ve}),!k&&c.jsx("button",{className:qe.removeBtn,onClick:()=>U(Qe),children:""})]},Qe))})]})]}),c.jsxs("div",{className:qe.reflectionField,children:[c.jsxs("label",{className:qe.reflectionLabel,children:[c.jsx("span",{className:qe.reflectionIcon,children:""}),"Additional Notes"]}),c.jsx("textarea",{className:qe.reflectionTextarea,value:O,onChange:ve=>V(ve.target.value),onBlur:B,placeholder:"Any other thoughts or notes...",disabled:k})]})]}),!k&&c.jsxs("div",{className:qe.actions,children:[c.jsx(Le,{variant:"ghost",onClick:M,disabled:_e,children:"Refresh Summary"}),c.jsxs(Le,{variant:"primary",onClick:A,children:["Complete Review (+",_l," XP)"]})]})]})})}function dr({icon:n,value:e,label:s,highlight:a}){return c.jsxs("div",{className:`${qe.summaryCard} ${a?qe.highlight:""}`,children:[c.jsx("span",{className:qe.summaryIcon,children:n}),c.jsx("span",{className:qe.summaryValue,children:e}),c.jsx("span",{className:qe.summaryLabel,children:s})]})}const NB="_guideButton_1u1py_1",wB="_guideOverlay_1u1py_71",xB="_guideContainer_1u1py_95",AB="_guideHeader_1u1py_159",RB="_guideTitle_1u1py_177",CB="_closeButton_1u1py_191",IB="_guideContent_1u1py_229",kB="_table_1u1py_335",LB="_tocList_1u1py_393",jB="_tocItem_1u1py_411",Fn={guideButton:NB,guideOverlay:wB,guideContainer:xB,guideHeader:AB,guideTitle:RB,closeButton:CB,guideContent:IB,table:kB,tocList:LB,tocItem:jB};function DB(){const[n,e]=j.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:Fn.guideButton,onClick:()=>e(!0),title:"Open Guide",children:"?"}),n&&c.jsx(OB,{onClose:()=>e(!1)})]})}function OB({onClose:n}){const e=j.useRef(null);j.useEffect(()=>{const a=o=>{o.key==="Escape"&&n()};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=""}},[n]);const s=a=>{e.current?.querySelector(`#${a}`)?.scrollIntoView({behavior:"smooth"})};return c.jsx("div",{className:Fn.guideOverlay,onClick:n,children:c.jsxs("div",{className:Fn.guideContainer,onClick:a=>a.stopPropagation(),ref:e,children:[c.jsxs("div",{className:Fn.guideHeader,children:[c.jsx("span",{className:Fn.guideTitle,children:"Adventurer's Guide"}),c.jsx("button",{className:Fn.closeButton,onClick:n,children:"Close"})]}),c.jsx("ul",{className:Fn.tocList,children:["overview","character","quests","buffs","achievements","energy","focus","routines","combos","review","events","skills","classes","territory","inventory","xp","levels","stats","tips","data"].map(a=>c.jsx("li",{className:Fn.tocItem,onClick:()=>s(`guide-${a}`),children:{xp:"XP System",data:"Save Data",achievements:"Achievements",energy:"Energy",focus:"Focus Timer",routines:"Routines",combos:"Habit Combos",review:"Weekly Review",events:"Random Events",skills:"Skill Trees",classes:"Classes",territory:"Territory Map",inventory:"Inventory"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},a))}),c.jsxs("div",{className:Fn.guideContent,children:[c.jsx("h2",{id:"guide-overview",children:"Overview"}),c.jsxs("p",{children:["Goal Game turns your real-life goals into an RPG adventure. You create ",c.jsx("strong",{children:"Goals"})," (big-picture ambitions), break them into ",c.jsx("strong",{children:"Quests"})," (projects), and then into ",c.jsx("strong",{children:"Steps"})," (individual tasks). Completing steps earns ",c.jsx("strong",{children:"XP"}),", which levels up your character."]}),c.jsxs("p",{children:["Track daily habits as ",c.jsx("strong",{children:"Buffs"})," (positive) and ",c.jsx("strong",{children:"Debuffs"})," (negative) that affect your character's stats."]}),c.jsx("h2",{id:"guide-character",children:"Character Screen"}),c.jsx("p",{children:"Your character screen shows your current progress at a glance."}),c.jsx("h3",{children:"What you'll see"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Name"}),`  Tap "Rename" to change your character's name.`]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Level & Title"}),'  Your current level and rank title (e.g., "Novice", "Adept"). Titles change automatically as you level up.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP Bar"}),"  Shows progress toward your next level. The numbers show current XP in this level / XP needed for next level."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Total XP"}),"  Your lifetime XP earned across all activities."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Stats"}),"  Five attributes (Stamina, Willpower, Health, Focus, Charisma) that start at 10 and change based on your active buffs/debuffs."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Effects"}),"  Currently active buffs (green pulse) and debuffs (red throb) with time remaining."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"XP History"}),"  A log of your most recent XP gains showing what you earned and why."]})]}),c.jsx("h2",{id:"guide-quests",children:"Quest Log"}),c.jsx("p",{children:"This is where you organize everything you want to accomplish."}),c.jsx("h3",{children:"Hierarchy"}),c.jsx("p",{children:"Life is organized in three layers:"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Goals"}),'  Big-picture ambitions tied to a life domain. Example: "Get fit" in the Health domain.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),'  Specific projects within a goal. Example: "Run a 5K" under "Get fit".']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Steps"}),'  Individual actionable tasks within a quest. Example: "Run 1 mile without stopping" inside "Run a 5K".']})]}),c.jsx("h3",{children:"Domains"}),c.jsx("p",{children:"Every goal belongs to one of eight life domains:"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Icon"}),c.jsx("th",{children:"Domain"}),c.jsx("th",{children:"Examples"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Fitness, diet, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Career"}),c.jsx("td",{children:"Work projects, promotions, skills"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Learning"}),c.jsx("td",{children:"Courses, reading, certifications"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Social"}),c.jsx("td",{children:"Relationships, networking, community"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Finance"}),c.jsx("td",{children:"Saving, investing, budgeting"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Creative"}),c.jsx("td",{children:"Art, music, writing, hobbies"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Spiritual"}),c.jsx("td",{children:"Meditation, mindfulness, gratitude"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"Home"}),c.jsx("td",{children:"Cleaning, organizing, repairs"})]})]})]}),c.jsx("h3",{children:"Priority Levels"}),c.jsx("p",{children:"Quests and steps can have a priority that affects XP rewards:"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Priority"}),c.jsx("th",{children:"Color"}),c.jsx("th",{children:"Step XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Normal"}),c.jsx("td",{children:"Gray"}),c.jsx("td",{children:"10 XP"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Important"}),c.jsx("td",{children:"Gold"}),c.jsx("td",{children:"15 XP (1.5x)"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Legendary"}),c.jsx("td",{children:"Orange"}),c.jsx("td",{children:"20 XP (2x)"})]})]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Goal"}),"  pick a domain, give it a title."]}),c.jsxs("li",{children:["Inside a goal, tap ",c.jsx("strong",{children:"+ Quest"}),"  name the project, choose priority."]}),c.jsx("li",{children:'Tap a quest to expand it, then type steps in the "Add a step" field at the bottom.'}),c.jsx("li",{children:"Check off steps to earn XP. When all steps are done, the quest auto-completes for bonus XP. When all quests in a goal are done, the goal auto-completes for even more bonus XP."})]}),c.jsx("h3",{children:"Filters"}),c.jsx("p",{children:"Use the dropdowns at the top to filter by domain or status (Active / Completed / All)."}),c.jsx("h2",{id:"guide-buffs",children:"Buffs & Debuffs"}),c.jsx("p",{children:"Buffs and debuffs represent daily habits that affect your character."}),c.jsx("h3",{children:"Buffs (Positive Habits)"}),c.jsxs("p",{children:["Things you ",c.jsx("em",{children:"want"})," to do every day. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Morning Exercise  +2 Stamina, +1 Health"}),c.jsx("li",{children:" Meditation  +2 Willpower, +1 Focus"}),c.jsx("li",{children:" 8 Hours Sleep  +1 Health, +1 Focus, +1 Stamina"}),c.jsx("li",{children:" Read 30 Minutes  +2 Focus"})]}),c.jsxs("p",{children:["Activating a buff earns ",c.jsx("strong",{children:"5 XP"})," and applies its stat effects for the duration you set (e.g., 24 hours). After that, the buff expires and you need to activate it again the next day."]}),c.jsx("h3",{children:"Debuffs (Negative Habits)"}),c.jsxs("p",{children:["Things you want to be ",c.jsx("em",{children:"honest about tracking"}),". There is no XP penalty  this is for self-awareness. Examples:"]}),c.jsxs("ul",{children:[c.jsx("li",{children:" Junk Food  -1 Health, -1 Stamina"}),c.jsx("li",{children:" Doomscrolling  -2 Focus, -1 Willpower"}),c.jsx("li",{children:" Alcohol  -1 Health, -1 Focus"})]}),c.jsx("p",{children:"Debuffs still affect your stats while active, shown as red on your character screen."}),c.jsx("h3",{children:"Streaks"}),c.jsxs("p",{children:["Activate the same buff on consecutive days to build a streak. Every ",c.jsx("strong",{children:"7-day streak"})," earns a bonus ",c.jsx("strong",{children:"25 XP"}),"."]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Tap ",c.jsx("strong",{children:"+ New Buff/Debuff"})," to define a habit template."]}),c.jsx("li",{children:"Choose a name, type (buff or debuff), icon, duration in hours, and stat effects (positive numbers for buffs, negative for debuffs)."}),c.jsxs("li",{children:["Once created, it appears in the Buffs or Debuffs column. Tap ",c.jsx("strong",{children:"Activate"})," each day you do the habit."]}),c.jsx("li",{children:"Active effects appear at the top with a countdown timer and are reflected on your Character screen stats."})]}),c.jsx("h3",{children:"Expiry"}),c.jsxs("p",{children:["Buffs and debuffs expire automatically after their duration. The app checks every 60 seconds. You can also manually remove an active effect by tapping ",c.jsx("strong",{children:"Remove"}),"."]}),c.jsx("h2",{id:"guide-achievements",children:"Achievements"}),c.jsx("p",{children:"Unlock achievements by reaching milestones. Each achievement rewards XP when unlocked."}),c.jsx("h3",{children:"Categories"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Quests"}),"  Complete steps, quests, and goals"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Buffs"}),"  Activate habits regularly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Streaks"}),"  Maintain consecutive day streaks"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Boss"}),"  Defeat weekly bosses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Levels"}),"  Reach level milestones (5, 10, 25, 50)"]})]}),c.jsx("p",{children:"View your progress in the Achievements panel. Some achievements are hidden until unlocked!"}),c.jsx("h2",{id:"guide-energy",children:"Energy System"}),c.jsx("p",{children:"Energy represents your daily capacity for action."}),c.jsx("h3",{children:"Mechanics"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Max Energy"}),"  Starts at 100"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Regeneration"}),"  Recovers 10 energy per hour automatically"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Costs"}),"  Some actions cost energy (completing steps: 5, activating buffs: 3)"]})]}),c.jsx("h3",{children:"Energy Debuffs"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Threshold"}),c.jsx("th",{children:"Debuff"}),c.jsx("th",{children:"Effects"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Below 20"}),c.jsx("td",{children:"Fatigued"}),c.jsx("td",{children:"-2 Focus, -2 Willpower"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Below 5"}),c.jsx("td",{children:"Exhausted"}),c.jsx("td",{children:"-3 Stamina, -3 Willpower, -3 Focus, -1 Health"})]})]})]}),c.jsx("p",{children:"Keep your energy up to avoid stat penalties!"}),c.jsx("h2",{id:"guide-focus",children:"Focus Timer"}),c.jsx("p",{children:"A Pomodoro-style timer to boost productivity."}),c.jsx("h3",{children:"How it works"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Work sessions"}),"  Default 25 minutes of focused work"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Short breaks"}),"  5 minutes after each session"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Long breaks"}),"  15 minutes after 4 sessions"]})]}),c.jsx("h3",{children:"XP Rewards"}),c.jsxs("ul",{children:[c.jsx("li",{children:"+15 XP per completed focus session"}),c.jsx("li",{children:"+5 XP bonus if linked to a quest step"}),c.jsx("li",{children:"+10 XP bonus every 4 consecutive sessions"})]}),c.jsx("p",{children:"Customize timer durations in Settings."}),c.jsx("h2",{id:"guide-routines",children:"Morning/Evening Routines"}),c.jsx("p",{children:"Create routine chains to build powerful habits."}),c.jsx("h3",{children:"Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Morning"}),"  Start your day right"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Evening"}),"  Wind down properly"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Custom"}),"  Any time routines"]})]}),c.jsx("h3",{children:"How to use"}),c.jsxs("ol",{children:[c.jsx("li",{children:"Create a routine with a name and bonus XP reward"}),c.jsx("li",{children:"Add steps to the routine (can be linked to buffs)"}),c.jsx("li",{children:"Start the routine each day and complete steps in order"}),c.jsx("li",{children:"Complete all required steps to earn the bonus XP"})]}),c.jsx("p",{children:"Routine streaks earn extra XP every 7 days!"}),c.jsx("h2",{id:"guide-combos",children:"Habit Combos"}),c.jsx("p",{children:"Activate specific buff combinations for bonus XP."}),c.jsx("h3",{children:"Example Combos"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wellness Warrior"}),"  Meditation + Exercise + Healthy Meal = +30 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Master"}),"  No Phone + Deep Work + Reading = +25 XP"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Early Bird"}),"  Morning Exercise + 8 Hours Sleep + No Phone First Hour = +35 XP"]})]}),c.jsx("p",{children:"Combos can only be claimed once per day. Activate all required buffs within 24 hours to qualify."}),c.jsx("h2",{id:"guide-review",children:"Weekly Review"}),c.jsx("p",{children:"Reflect on your progress every week."}),c.jsx("h3",{children:"Summary Data"}),c.jsx("p",{children:"Auto-generated stats include: steps completed, quests completed, buffs activated, XP earned, boss damage dealt, focus sessions, and more."}),c.jsx("h3",{children:"Reflection Prompts"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Wins"}),"  What went well this week?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenges"}),"  What was difficult?"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Priorities"}),"  Set up to 5 priorities for next week"]})]}),c.jsxs("p",{children:["Completing your weekly review earns ",c.jsx("strong",{children:"100 XP"}),"."]}),c.jsx("h2",{id:"guide-events",children:"Random Events"}),c.jsx("p",{children:"Special limited-time opportunities that appear randomly."}),c.jsx("h3",{children:"Event Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Bonus"}),"  Instant rewards (XP, energy, shields)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Challenge"}),"  Complete objectives for rewards"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Modifier"}),"  Temporary boosts (double XP, stat increases)"]})]}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Events have different rarities: Common, Uncommon, Rare, Epic. Rarer events have better rewards!"}),c.jsx("p",{children:"Events have a 15% chance to trigger and a 4-hour cooldown between checks."}),c.jsx("h2",{id:"guide-skills",children:"Skill Trees"}),c.jsx("p",{children:"Spend XP to unlock permanent passive bonuses."}),c.jsx("h3",{children:"Branches"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity"})," (Blue)  Quest and step XP bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Health"})," (Red)  Energy and stamina bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus"})," (Purple)  Timer and concentration bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Social"})," (Orange)  Streak and charisma bonuses"]})]}),c.jsx("h3",{children:"How to unlock"}),c.jsx("p",{children:"Skills cost XP to unlock (100-500 XP per node). You must unlock prerequisite skills first. Capstone skills at the end of each branch provide the biggest bonuses."}),c.jsx("h2",{id:"guide-classes",children:"Character Classes"}),c.jsx("p",{children:"Choose a class to specialize your character."}),c.jsx("h3",{children:"Available Classes"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Class"}),c.jsx("th",{children:"Stat Bonuses"}),c.jsx("th",{children:"XP Bonus"}),c.jsx("th",{children:"Special"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Warrior"}),c.jsx("td",{children:"+3 Stamina, +2 Health"}),c.jsx("td",{children:"+10% Quest XP"}),c.jsx("td",{children:"Battlecry"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Mage"}),c.jsx("td",{children:"+3 Focus, +2 Willpower"}),c.jsx("td",{children:"+10% Buff XP"}),c.jsx("td",{children:"Arcane Focus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Ranger"}),c.jsx("td",{children:"+3 Willpower, +1 Stamina, +1 Focus"}),c.jsx("td",{children:"+10% Streak XP"}),c.jsx("td",{children:"Tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Paladin"}),c.jsx("td",{children:"+2 Health, +2 Willpower, +1 Charisma"}),c.jsx("td",{children:"+10% Boss XP"}),c.jsx("td",{children:"Divine Shield"})]})]})]}),c.jsx("p",{children:"You can change your class up to 3 times total."}),c.jsx("h2",{id:"guide-territory",children:"Territory Map"}),c.jsx("p",{children:"Explore regions as you level up."}),c.jsx("h3",{children:"Territories"}),c.jsxs("ol",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"The Awakening Glade"})," (Level 1)  Where every journey begins"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Habit Highlands"})," (Level 5)  Rocky terrain for consistent habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Focus Forest"})," (Level 10)  Dense woods for the focused"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Productivity Plains"})," (Level 15)  Vast fields for goal achievers"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Summit of Mastery"})," (Level 25)  The peak for true masters"]})]}),c.jsx("p",{children:"Complete territory challenges to unlock rewards and earn special titles!"}),c.jsx("h2",{id:"guide-inventory",children:"Inventory & Items"}),c.jsx("p",{children:"Collect and equip items for stat bonuses."}),c.jsx("h3",{children:"Item Types"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Equipment"}),"  Weapons, armor, accessories with stat bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Consumables"}),"  One-time use items (energy potions, XP elixirs)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Trophies"}),"  Special commemorative items from achievements"]})]}),c.jsx("h3",{children:"Equipment Slots"}),c.jsx("p",{children:"You can equip one item in each slot: Weapon, Armor, Accessory."}),c.jsx("h3",{children:"Rarity"}),c.jsx("p",{children:"Items come in 5 rarities: Common (gray), Uncommon (green), Rare (blue), Epic (purple), Legendary (orange)."}),c.jsx("p",{children:"Items drop from achievements, boss defeats, and random events."}),c.jsx("h2",{id:"guide-xp",children:"XP System"}),c.jsx("p",{children:"Everything you do earns experience points:"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Action"}),c.jsx("th",{children:"XP"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a normal step"}),c.jsx("td",{children:"+10"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete an important step"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a legendary step"}),c.jsx("td",{children:"+20"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a quest (all steps done)"}),c.jsx("td",{children:"+50 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a goal (all quests done)"}),c.jsx("td",{children:"+200 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a buff (daily habit)"}),c.jsx("td",{children:"+5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"7-day streak on any buff"}),c.jsx("td",{children:"+25 bonus"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a focus session"}),c.jsx("td",{children:"+15"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete a routine"}),c.jsx("td",{children:"+25"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Activate a habit combo"}),c.jsx("td",{children:"+25-35"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Complete weekly review"}),c.jsx("td",{children:"+100"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Unlock an achievement"}),c.jsx("td",{children:"+25-500"})]})]})]}),c.jsx("h2",{id:"guide-levels",children:"Levels & Titles"}),c.jsxs("p",{children:["XP needed per level increases as you grow. The formula is ",c.jsx("code",{children:"50  level^1.8"}),"."]}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Level"}),c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Approx. Timeline"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"14"}),c.jsx("td",{children:"Novice"}),c.jsx("td",{children:"Starting out"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"59"}),c.jsx("td",{children:"Apprentice"}),c.jsx("td",{children:"~12 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1014"}),c.jsx("td",{children:"Journeyman"}),c.jsx("td",{children:"~34 weeks"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"1521"}),c.jsx("td",{children:"Adept"}),c.jsx("td",{children:"~12 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2229"}),c.jsx("td",{children:"Expert"}),c.jsx("td",{children:"~24 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3039"}),c.jsx("td",{children:"Master"}),c.jsx("td",{children:"~48 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"4049"}),c.jsx("td",{children:"Legend"}),c.jsx("td",{children:"~812 months"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"50+"}),c.jsx("td",{children:"Dragonborn"}),c.jsx("td",{children:"~1 year+"})]})]})]}),c.jsx("p",{children:"When you level up, a golden overlay appears announcing your new level and title."}),c.jsx("h2",{id:"guide-stats",children:"Stats"}),c.jsxs("p",{children:["Your character has five stats, all starting at ",c.jsx("strong",{children:"10"}),":"]}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Stat"}),c.jsx("th",{children:"Represents"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"Stamina"}),c.jsx("td",{children:"Physical energy, endurance, exercise habits"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Willpower"}),c.jsx("td",{children:"Discipline, self-control, mental toughness"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Health"}),c.jsx("td",{children:"Physical wellbeing, nutrition, sleep"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Focus"}),c.jsx("td",{children:"Concentration, productivity, mental clarity"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Charisma"}),c.jsx("td",{children:"Social skills, confidence, communication"})]})]})]}),c.jsx("h3",{children:"Stat Sources"}),c.jsx("p",{children:"Your final stats are calculated from multiple sources:"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Base"}),"  10 in each stat"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Active Buffs/Debuffs"}),"  Temporary effects from habits"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Equipped Items"}),"  Bonuses from weapons, armor, accessories"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Skill Tree"}),"  Permanent passive bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Character Class"}),"  Class-specific bonuses"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Energy Debuffs"}),"  Penalties when energy is low"]})]}),c.jsx("p",{children:"Stats serve as a mirror of your current lifestyle  high Focus means you've been studying and avoiding distractions; low Health means you've been eating junk food or skipping sleep."}),c.jsx("h2",{id:"guide-tips",children:"Tips"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Start small."})," Create one goal with one quest and a few steps. Don't overload yourself on day one."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Be honest with debuffs."})," There's no punishment  tracking negative habits helps you see patterns."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Use priorities wisely."}),' Reserve "Legendary" for truly difficult or impactful tasks.']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Build streaks."})," The 7-day streak bonus compounds  maintaining 3 daily buffs earns 75 bonus XP per week on top of the daily 5 XP each."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Check your character screen daily."})," Your stats tell you how balanced your life is."]})]}),c.jsx("h2",{id:"guide-data",children:"Saving & Data"}),c.jsx("p",{children:"All your data is stored locally on this device in the browser's database. It persists across sessions  closing and reopening the app keeps everything."}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Export Save"}),"  Downloads your entire database as a .db file. Use this for backups."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Import Save"}),"  Loads a previously exported .db file, replacing all current data. Use this to restore a backup or transfer data between devices."]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Important:"})," Clearing your browser/app data will erase your progress. Export a backup regularly."]}),c.jsx("h3",{children:"Keyboard Shortcuts (Desktop)"}),c.jsxs("table",{className:Fn.table,children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Key"}),c.jsx("th",{children:"Action"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"1"}),c.jsx("td",{children:"Character screen"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2"}),c.jsx("td",{children:"Quest Log"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"3"}),c.jsx("td",{children:"Buffs"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"Esc"}),c.jsx("td",{children:"Close any open modal/popup"})]})]})]})]})]})})}function MB(){const{ready:n,error:e}=gw(),[s,a]=j.useState("character");return n?c.jsx(UB,{activeTab:s,setActiveTab:a}):c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a0f",color:"#c8a84e",fontFamily:"Cinzel, serif",fontSize:"1.2rem"},children:e?`Error: ${e}`:"Loading database..."})}function UB({activeTab:n,setActiveTab:e}){const s=Cw(),a=bL({grantXP:s.grantXP}),o=RL({grantXP:s.grantXP,addShields:a.addShields}),u=cL({grantXP:s.grantXP}),h=qL(),g=OL({grantXP:s.grantXP}),v=Dj({totalXP:s.character.total_xp}),_=Pj(),S=Qj({characterLevel:s.character.level,grantXP:s.grantXP}),w=nD({grantXP:s.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),C=YL({grantXP:s.grantXP,onSessionComplete:()=>{g.incrementProgress("focus_sessions_completed",1),o.dealDamage("focus_session","Focus session completed")}}),q=lj({grantXP:s.grantXP,onRoutineComplete:A=>{g.incrementProgress("routines_completed",1),o.dealDamage("routine_completed","Routine completed")}}),X=pj({grantXP:s.grantXP}),O=bj({grantXP:s.grantXP}),V=Rj({grantXP:s.grantXP,addEnergy:h.addEnergy,addShields:a.addShields}),z=zw({grantXP:s.grantXP,onStepComplete:()=>{u.updateProgress("complete_steps",1),o.dealDamage("step_completed","Completed a step"),g.incrementProgress("steps_completed",1)},onQuestComplete:()=>{o.dealDamage("quest_completed","Completed a quest"),g.incrementProgress("quests_completed",1)},onGoalComplete:()=>{o.dealDamage("goal_completed","Completed a goal"),g.incrementProgress("goals_completed",1)}}),$=S1(),Z=Zw({grantXP:s.grantXP,scheduleBuffExpiry:$.scheduleBuffExpiry,cancelBuffExpiry:$.cancelBuffExpiry,onBuffActivated:A=>{u.updateProgress("activate_buffs",1),new Date().getHours()<8&&u.updateProgress("early_start",1),A==="buff"&&(u.updateProgress("activate_specific",1),o.dealDamage("buff_activated","Activated a buff"),g.incrementProgress("buffs_activated",1)),a.refresh(),X.checkAndActivateCombos()}}),ie=ux(),[_e,Te]=j.useState(!1),[M,D]=j.useState(!1);j.useEffect(()=>{s.refresh(),n==="quests"&&z.refresh(),n==="buffs"&&(Z.refresh(),a.refresh(),X.refresh()),n==="focus"&&C.refresh(),n==="skills"&&(v.refresh(),_.refresh(),S.refresh()),n==="inventory"&&w.refresh()},[n]),j.useEffect(()=>{z.refresh(),Z.refresh(),a.refresh(),h.refresh(),g.refresh(),u.checkNoDebuffs()},[]),j.useEffect(()=>{g.checkThreshold("character_level",s.character.level)},[s.character.level]),j.useEffect(()=>{const A=L=>{L.target instanceof HTMLInputElement||L.target instanceof HTMLTextAreaElement||L.target instanceof HTMLSelectElement||(L.key==="1"&&e("character"),L.key==="2"&&e("quests"),L.key==="3"&&e("buffs"),L.key==="4"&&e("focus"),L.key==="5"&&e("skills"),L.key==="6"&&e("inventory"))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e]);const U=j.useCallback(async()=>{const A=await hp(),L=new Blob([new Uint8Array(A)],{type:"application/octet-stream"}),k=URL.createObjectURL(L),ve=document.createElement("a");ve.href=k,ve.download=`goal-game-backup-${new Date().toISOString().split("T")[0]}.db`,ve.click(),URL.revokeObjectURL(k)},[]),B=j.useCallback(async()=>{const A=document.createElement("input");A.type="file",A.accept=".db",A.onchange=async()=>{const L=A.files?.[0];if(!L)return;const k=await L.arrayBuffer();await YT(new Uint8Array(k)),window.location.reload()},A.click()},[]);return c.jsxs("div",{className:Ln.appShell,children:[c.jsx(bD,{activeTab:n,onTabChange:e}),c.jsx(QD,{character:s.character,energyState:h.state}),c.jsxs("main",{className:Ln.main,children:[n==="character"&&c.jsxs(c.Fragment,{children:[c.jsx(G3,{character:s.character,stats:Z.stats}),V.activeEvents.length>0&&c.jsx("div",{style:{marginBottom:12},children:V.activeEvents.map(A=>c.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(200,168,78,0.2), rgba(200,168,78,0.1))",border:"1px solid var(--border-gold)",borderRadius:8,padding:"10px 14px",marginBottom:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("span",{style:{fontSize:"1.1rem"},children:A.template.icon}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"var(--gold)",fontSize:"0.9rem"},children:A.template.name}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:A.template.description})]})]}),!A.is_claimed&&c.jsx(Le,{size:"small",onClick:()=>V.claimEvent(A.id),children:"Claim"})]},A.id))}),c.jsxs(ol,{title:"Today's Tasks",icon:"",badge:`${u.completedCount}/${u.quests.length}`,badgeColor:u.allCompleted?"green":"gold",defaultExpanded:!0,children:[c.jsx(v6,{quests:u.quests,loading:u.loading,allCompleted:u.allCompleted,completedCount:u.completedCount,bonusClaimed:u.bonusClaimed,bonusXp:u.bonusXp,totalXpEarned:u.totalXpEarned,onClaimBonus:async()=>{await u.claimBonus();for(const A of u.quests)A.is_completed&&o.dealDamage("daily_quest_completed",`Daily Quest: ${A.title}`)},compact:!0}),q.routines.length>0&&c.jsx("div",{style:{marginTop:16},children:c.jsx(EV,{routines:q.routines,loading:q.loading,onCreateRoutine:q.createRoutine,onDeleteRoutine:q.deleteRoutine,onStartRoutine:q.startRoutine,onCompleteStep:q.completeStep,onSkipStep:q.skipStep,onAddStep:q.addStep,onDeleteStep:q.deleteStep,getStepsWithStatus:q.getStepsWithStatus,compact:!0})})]}),c.jsx(ol,{title:"Weekly Boss",icon:"",badge:o.boss?.is_defeated?"Defeated!":`${o.hpPercentage}% HP`,badgeColor:o.boss?.is_defeated?"green":o.hpPercentage<30?"red":"gold",headerContent:!o.boss?.is_defeated&&c.jsx("div",{style:{width:80,height:6,background:"var(--bg-dark)",borderRadius:3,overflow:"hidden"},children:c.jsx("div",{style:{width:`${o.hpPercentage}%`,height:"100%",background:o.hpPercentage<30?"#ef4444":"#22c55e",borderRadius:3}})}),children:c.jsx(hU,{boss:o.boss,loading:o.loading,weekStart:o.weekStart,weekEnd:o.weekEnd,hpPercentage:o.hpPercentage,damageDealt:o.damageDealt,totalDefeated:o.totalDefeated,compact:!0})}),X.combos.length>0&&c.jsx(ol,{title:"Combos",icon:"",badge:X.combos.filter(A=>A.is_ready).length>0?`${X.combos.filter(A=>A.is_ready).length} ready!`:void 0,badgeColor:"green",children:c.jsx(HV,{combos:X.combos,loading:X.loading,onClaimCombo:X.claimCombo,compact:!0})}),c.jsx(ol,{title:"Character Stats",icon:"",badge:`Lv.${s.character.level}`,badgeColor:"gold",children:c.jsx(k3,{character:s.character,stats:Z.stats,activeBuffs:Z.activeBuffs,xpLog:s.xpLog,onNameChange:s.setName,compact:!0})}),c.jsx(ol,{title:"Achievements",icon:"",badge:`${g.stats.unlocked}/${g.stats.total}`,badgeColor:g.stats.unlocked===g.stats.total?"green":"gold",children:c.jsx(WU,{achievements:g.achievements,stats:g.stats,loading:g.loading,compact:!0})}),!O.currentReview?.is_completed&&c.jsx(ol,{title:"Weekly Review",icon:"",badge:"Due",badgeColor:"blue",children:c.jsx(SB,{currentReview:O.currentReview,loading:O.loading,onGenerateSummary:O.generateSummary,onUpdateContent:O.updateContent,onCompleteReview:O.completeReview,getSummaryFromReview:O.getSummaryFromReview,getPrioritiesFromReview:O.getPrioritiesFromReview,getWeekStart:O.getWeekStart,compact:!0})})]}),n==="quests"&&c.jsx(s5,{goals:z.goals,domains:z.domains,filterDomain:z.filterDomain,filterStatus:z.filterStatus,onFilterDomain:A=>{z.setFilterDomain(A)},onFilterStatus:A=>{z.setFilterStatus(A)},onCreateGoal:z.createGoal,onCreateQuest:z.createQuest,onCreateStep:z.createStep,onCompleteStep:z.completeStep,onUncompleteStep:z.uncompleteStep,onDeleteStep:z.deleteStep,onDeleteQuest:z.deleteQuest,onDeleteGoal:z.deleteGoal}),n==="buffs"&&c.jsx(W5,{definitions:Z.definitions,activeBuffs:Z.activeBuffs,onCreateDefinition:Z.createDefinition,onDeleteDefinition:Z.deleteDefinition,onActivateBuff:Z.activateBuff,onDeactivateBuff:Z.deactivateBuff,streakInfos:a.streakInfos,shieldCount:a.shieldCount,onUseShield:a.useShield,getUnclaimedMilestones:a.getUnclaimedMilestones,onClaimMilestones:a.claimMilestones}),n==="focus"&&c.jsx(B9,{timerState:C.timerState,settings:C.settings,stats:C.stats,recentSessions:C.recentSessions,onStartWork:C.startWork,onStartBreak:C.startBreak,onPause:C.pause,onResume:C.resume,onStop:C.stop,onSkipBreak:C.skipBreak,onUpdateSettings:C.updateSettings,formatTime:C.formatTime}),n==="skills"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Character Class"}),_.getSelectedClass()?c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[c.jsx("span",{style:{fontSize:"2rem"},children:_.getSelectedClass()?.icon}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--text-primary)",margin:0},children:_.getSelectedClass()?.name}),c.jsx("p",{style:{color:"var(--text-secondary)",margin:"4px 0 0 0"},children:_.getSelectedClass()?.description}),c.jsx("p",{style:{color:"var(--gold)",fontSize:"0.85rem",marginTop:8},children:_.getSelectedClass()?.special_ability_desc})]})]}):c.jsxs("div",{children:[c.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"Choose your class to gain unique bonuses:"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},children:_.classes.map(A=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,cursor:"pointer",transition:"all 0.2s"},onClick:()=>_.selectClass(A.id),onMouseEnter:L=>{L.currentTarget.style.borderColor="var(--border-gold)"},onMouseLeave:L=>{L.currentTarget.style.borderColor="var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:8},children:A.icon}),c.jsx("h4",{style:{color:"var(--gold)",margin:"0 0 4px 0"},children:A.name}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",margin:0},children:A.description})]},A.id))})]})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Skill Trees"}),c.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:["Spend XP to unlock passive bonuses. Total XP available: ",s.character.total_xp]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:16},children:v.branches.map(A=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${A.color}40`,borderRadius:8,padding:16},children:[c.jsxs("h3",{style:{color:A.color,marginBottom:12},children:[A.icon," ",A.name]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:v.nodes.filter(L=>L.branch_id===A.id).sort((L,k)=>L.tier-k.tier).map(L=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:L.unlocked?`${A.color}20`:"var(--bg-dark)",border:`1px solid ${L.unlocked?A.color:"var(--border-color)"}`,borderRadius:6,opacity:L.can_unlock||L.unlocked?1:.5},children:[c.jsxs("div",{children:[c.jsx("span",{style:{marginRight:8},children:L.icon}),c.jsx("span",{style:{color:L.unlocked?A.color:"var(--text-primary)"},children:L.name})]}),L.unlocked?c.jsx("span",{style:{color:"var(--success)",fontSize:"0.85rem"},children:"Unlocked"}):L.can_unlock?c.jsxs(Le,{size:"small",onClick:()=>v.unlockSkill(L.id),children:[L.xp_cost," XP"]}):c.jsxs("span",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:[L.xp_cost," XP"]})]},L.id))})]},A.id))})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Territory Map"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:S.territories.map(A=>c.jsxs("div",{style:{flex:"1 1 200px",maxWidth:250,background:A.is_current?`${A.background_color}30`:"var(--bg-medium)",border:`2px solid ${A.is_current?A.background_color:A.discovered?"var(--border-gold)":"var(--border-color)"}`,borderRadius:8,padding:16,opacity:A.is_locked?.5:1,cursor:A.discovered&&!A.is_current?"pointer":"default"},onClick:()=>{A.discovered&&!A.is_current&&S.travelTo(A.id)},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:8},children:A.icon}),c.jsx("h4",{style:{color:A.is_current?A.background_color:"var(--text-primary)",margin:"0 0 4px 0"},children:A.name}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",margin:0},children:A.is_locked?`Unlocks at Level ${A.unlock_level}`:A.description}),A.is_current&&c.jsx("span",{style:{display:"inline-block",marginTop:8,padding:"2px 8px",background:A.background_color,color:"#000",borderRadius:4,fontSize:"0.75rem",fontWeight:600},children:"Current"})]},A.id))})]})]}),n==="inventory"&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Equipment"}),c.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:["weapon","armor","accessory"].map(A=>{const L=w.getEquipmentBySlot(A);return c.jsxs("div",{style:{flex:"1 1 150px",maxWidth:200,background:"var(--bg-medium)",border:"1px solid var(--border-color)",borderRadius:8,padding:16,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-dim)",textTransform:"uppercase",marginBottom:8},children:A}),L?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:L.item.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",marginBottom:4},children:L.item.definition.name}),c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>w.unequipItem(A),children:"Unequip"})]}):c.jsx("div",{style:{color:"var(--text-dim)",fontSize:"0.85rem"},children:"Empty"})]},A)})})]}),c.jsxs("div",{className:"rpg-card",children:[c.jsx("h2",{style:{color:"var(--gold)",marginBottom:16},children:"Inventory"}),w.inventory.length===0?c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Your inventory is empty. Complete achievements and defeat bosses to earn items!"}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:12},children:w.inventory.map(A=>c.jsxs("div",{style:{background:"var(--bg-medium)",border:`1px solid ${A.definition.rarity==="legendary"?"#ff9800":A.definition.rarity==="epic"?"#9c27b0":A.definition.rarity==="rare"?"#2196f3":A.definition.rarity==="uncommon"?"#4caf50":"var(--border-color)"}`,borderRadius:8,padding:12,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.5rem",marginBottom:4},children:A.definition.icon}),c.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.85rem",marginBottom:4},children:A.definition.name}),A.quantity>1&&c.jsxs("div",{style:{color:"var(--text-dim)",fontSize:"0.75rem",marginBottom:4},children:["x",A.quantity]}),A.definition.type==="equipment"&&c.jsx(Le,{size:"small",onClick:()=>w.equipItem(A.id),children:"Equip"}),A.definition.type==="consumable"&&c.jsx(Le,{size:"small",onClick:()=>w.useConsumable(A.id),children:"Use"})]},A.id))})]})]}),c.jsxs("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:[M&&c.jsx(qM,{}),_e&&c.jsx(vM,{}),c.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>D(!M),children:M?"Hide Notifications":"Notifications"}),c.jsx(Le,{size:"small",variant:"ghost",onClick:()=>Te(!_e),children:_e?"Hide Cloud Backup":"Cloud Backup"}),c.jsx(Le,{size:"small",variant:"ghost",onClick:U,children:"Export Save"}),c.jsx(Le,{size:"small",variant:"ghost",onClick:B,children:"Import Save"})]})]})]}),s.xpFloats.map(A=>c.jsxs("div",{className:Ln.xpFloat,children:["+",A.amount," XP"]},A.id)),s.levelUpInfo&&c.jsx(sO,{level:s.levelUpInfo.level,title:s.levelUpInfo.title,onDismiss:s.dismissLevelUp}),c.jsx(ZU,{unlock:g.pendingUnlocks.length>0?g.pendingUnlocks[0]:null,onDismiss:()=>g.dismissUnlock(0)}),c.jsx(DB,{}),ie.message&&c.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 20px",background:ie.status==="error"?"rgba(231, 76, 60, 0.9)":"rgba(46, 204, 113, 0.9)",color:"#fff",borderRadius:8,fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:ie.message})]})}wN.createRoot(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(MB,{})}));
