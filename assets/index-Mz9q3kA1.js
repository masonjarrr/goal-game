(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();function dS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function hS(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var i=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var l=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(i,a,l.get?l:{enumerable:!0,get:function(){return s[a]}})}),i}var qh={exports:{}},lu={};var ev;function mS(){if(ev)return lu;ev=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,u){var m=null;if(u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:s,type:a,key:m,ref:l!==void 0?l:null,props:u}}return lu.Fragment=e,lu.jsx=i,lu.jsxs=i,lu}var tv;function pS(){return tv||(tv=1,qh.exports=mS()),qh.exports}var p=pS(),zh={exports:{}},Xe={};var nv;function gS(){if(nv)return Xe;nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),I=Symbol.iterator;function $(B){return B===null||typeof B!="object"?null:(B=I&&B[I]||B["@@iterator"],typeof B=="function"?B:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,G={};function z(B,re,ye){this.props=B,this.context=re,this.refs=G,this.updater=ye||W}z.prototype.isReactComponent={},z.prototype.setState=function(B,re){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,re,"setState")},z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function le(){}le.prototype=z.prototype;function me(B,re,ye){this.props=B,this.context=re,this.refs=G,this.updater=ye||W}var he=me.prototype=new le;he.constructor=me,ne(he,z.prototype),he.isPureReactComponent=!0;var Ae=Array.isArray;function xe(){}var O={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function j(B,re,ye){var Te=ye.ref;return{$$typeof:s,type:B,key:re,ref:Te!==void 0?Te:null,props:ye}}function V(B,re){return j(B.type,re,B.props)}function k(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function U(B){var re={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ye){return re[ye]})}var x=/\/+/g;function ve(B,re){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):re.toString(36)}function Tt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(xe,xe):(B.status="pending",B.then(function(re){B.status==="pending"&&(B.status="fulfilled",B.value=re)},function(re){B.status==="pending"&&(B.status="rejected",B.reason=re)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function P(B,re,ye,Te,Pe){var Ke=typeof B;(Ke==="undefined"||Ke==="boolean")&&(B=null);var tt=!1;if(B===null)tt=!0;else switch(Ke){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(B.$$typeof){case s:case e:tt=!0;break;case w:return tt=B._init,P(tt(B._payload),re,ye,Te,Pe)}}if(tt)return Pe=Pe(B),tt=Te===""?"."+ve(B,0):Te,Ae(Pe)?(ye="",tt!=null&&(ye=tt.replace(x,"$&/")+"/"),P(Pe,re,ye,"",function(ps){return ps})):Pe!=null&&(k(Pe)&&(Pe=V(Pe,ye+(Pe.key==null||B&&B.key===Pe.key?"":(""+Pe.key).replace(x,"$&/")+"/")+tt)),re.push(Pe)),1;tt=0;var Kt=Te===""?".":Te+":";if(Ae(B))for(var jt=0;jt<B.length;jt++)Te=B[jt],Ke=Kt+ve(Te,jt),tt+=P(Te,re,ye,Ke,Pe);else if(jt=$(B),typeof jt=="function")for(B=jt.call(B),jt=0;!(Te=B.next()).done;)Te=Te.value,Ke=Kt+ve(Te,jt++),tt+=P(Te,re,ye,Ke,Pe);else if(Ke==="object"){if(typeof B.then=="function")return P(Tt(B),re,ye,Te,Pe);throw re=String(B),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return tt}function J(B,re,ye){if(B==null)return B;var Te=[],Pe=0;return P(B,Te,"","",function(Ke){return re.call(ye,Ke,Pe++)}),Te}function _e(B){if(B._status===-1){var re=B._result;re=re(),re.then(function(ye){(B._status===0||B._status===-1)&&(B._status=1,B._result=ye)},function(ye){(B._status===0||B._status===-1)&&(B._status=2,B._result=ye)}),B._status===-1&&(B._status=0,B._result=re)}if(B._status===1)return B._result.default;throw B._result}var We=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},$e={map:J,forEach:function(B,re,ye){J(B,function(){re.apply(this,arguments)},ye)},count:function(B){var re=0;return J(B,function(){re++}),re},toArray:function(B){return J(B,function(re){return re})||[]},only:function(B){if(!k(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Xe.Activity=C,Xe.Children=$e,Xe.Component=z,Xe.Fragment=i,Xe.Profiler=l,Xe.PureComponent=me,Xe.StrictMode=a,Xe.Suspense=E,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return O.H.useMemoCache(B)}},Xe.cache=function(B){return function(){return B.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(B,re,ye){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Te=ne({},B.props),Pe=B.key;if(re!=null)for(Ke in re.key!==void 0&&(Pe=""+re.key),re)!D.call(re,Ke)||Ke==="key"||Ke==="__self"||Ke==="__source"||Ke==="ref"&&re.ref===void 0||(Te[Ke]=re[Ke]);var Ke=arguments.length-2;if(Ke===1)Te.children=ye;else if(1<Ke){for(var tt=Array(Ke),Kt=0;Kt<Ke;Kt++)tt[Kt]=arguments[Kt+2];Te.children=tt}return j(B.type,Pe,Te)},Xe.createContext=function(B){return B={$$typeof:m,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},Xe.createElement=function(B,re,ye){var Te,Pe={},Ke=null;if(re!=null)for(Te in re.key!==void 0&&(Ke=""+re.key),re)D.call(re,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Pe[Te]=re[Te]);var tt=arguments.length-2;if(tt===1)Pe.children=ye;else if(1<tt){for(var Kt=Array(tt),jt=0;jt<tt;jt++)Kt[jt]=arguments[jt+2];Pe.children=Kt}if(B&&B.defaultProps)for(Te in tt=B.defaultProps,tt)Pe[Te]===void 0&&(Pe[Te]=tt[Te]);return j(B,Ke,Pe)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(B){return{$$typeof:y,render:B}},Xe.isValidElement=k,Xe.lazy=function(B){return{$$typeof:w,_payload:{_status:-1,_result:B},_init:_e}},Xe.memo=function(B,re){return{$$typeof:g,type:B,compare:re===void 0?null:re}},Xe.startTransition=function(B){var re=O.T,ye={};O.T=ye;try{var Te=B(),Pe=O.S;Pe!==null&&Pe(ye,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(xe,We)}catch(Ke){We(Ke)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),O.T=re}},Xe.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Xe.use=function(B){return O.H.use(B)},Xe.useActionState=function(B,re,ye){return O.H.useActionState(B,re,ye)},Xe.useCallback=function(B,re){return O.H.useCallback(B,re)},Xe.useContext=function(B){return O.H.useContext(B)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(B,re){return O.H.useDeferredValue(B,re)},Xe.useEffect=function(B,re){return O.H.useEffect(B,re)},Xe.useEffectEvent=function(B){return O.H.useEffectEvent(B)},Xe.useId=function(){return O.H.useId()},Xe.useImperativeHandle=function(B,re,ye){return O.H.useImperativeHandle(B,re,ye)},Xe.useInsertionEffect=function(B,re){return O.H.useInsertionEffect(B,re)},Xe.useLayoutEffect=function(B,re){return O.H.useLayoutEffect(B,re)},Xe.useMemo=function(B,re){return O.H.useMemo(B,re)},Xe.useOptimistic=function(B,re){return O.H.useOptimistic(B,re)},Xe.useReducer=function(B,re,ye){return O.H.useReducer(B,re,ye)},Xe.useRef=function(B){return O.H.useRef(B)},Xe.useState=function(B){return O.H.useState(B)},Xe.useSyncExternalStore=function(B,re,ye){return O.H.useSyncExternalStore(B,re,ye)},Xe.useTransition=function(){return O.H.useTransition()},Xe.version="19.2.4",Xe}var iv;function zm(){return iv||(iv=1,zh.exports=gS()),zh.exports}var ee=zm(),Ph={exports:{}},uu={},Hh={exports:{}},Fh={};var sv;function _S(){return sv||(sv=1,(function(s){function e(P,J){var _e=P.length;P.push(J);e:for(;0<_e;){var We=_e-1>>>1,$e=P[We];if(0<l($e,J))P[We]=J,P[_e]=$e,_e=We;else break e}}function i(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var J=P[0],_e=P.pop();if(_e!==J){P[0]=_e;e:for(var We=0,$e=P.length,B=$e>>>1;We<B;){var re=2*(We+1)-1,ye=P[re],Te=re+1,Pe=P[Te];if(0>l(ye,_e))Te<$e&&0>l(Pe,ye)?(P[We]=Pe,P[Te]=_e,We=Te):(P[We]=ye,P[re]=_e,We=re);else if(Te<$e&&0>l(Pe,_e))P[We]=Pe,P[Te]=_e,We=Te;else break e}}return J}function l(P,J){var _e=P.sortIndex-J.sortIndex;return _e!==0?_e:P.id-J.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var m=Date,y=m.now();s.unstable_now=function(){return m.now()-y}}var E=[],g=[],w=1,C=null,I=3,$=!1,W=!1,ne=!1,G=!1,z=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function he(P){for(var J=i(g);J!==null;){if(J.callback===null)a(g);else if(J.startTime<=P)a(g),J.sortIndex=J.expirationTime,e(E,J);else break;J=i(g)}}function Ae(P){if(ne=!1,he(P),!W)if(i(E)!==null)W=!0,xe||(xe=!0,U());else{var J=i(g);J!==null&&Tt(Ae,J.startTime-P)}}var xe=!1,O=-1,D=5,j=-1;function V(){return G?!0:!(s.unstable_now()-j<D)}function k(){if(G=!1,xe){var P=s.unstable_now();j=P;var J=!0;try{e:{W=!1,ne&&(ne=!1,le(O),O=-1),$=!0;var _e=I;try{t:{for(he(P),C=i(E);C!==null&&!(C.expirationTime>P&&V());){var We=C.callback;if(typeof We=="function"){C.callback=null,I=C.priorityLevel;var $e=We(C.expirationTime<=P);if(P=s.unstable_now(),typeof $e=="function"){C.callback=$e,he(P),J=!0;break t}C===i(E)&&a(E),he(P)}else a(E);C=i(E)}if(C!==null)J=!0;else{var B=i(g);B!==null&&Tt(Ae,B.startTime-P),J=!1}}break e}finally{C=null,I=_e,$=!1}J=void 0}}finally{J?U():xe=!1}}}var U;if(typeof me=="function")U=function(){me(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ve=x.port2;x.port1.onmessage=k,U=function(){ve.postMessage(null)}}else U=function(){z(k,0)};function Tt(P,J){O=z(function(){P(s.unstable_now())},J)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(P){switch(I){case 1:case 2:case 3:var J=3;break;default:J=I}var _e=I;I=J;try{return P()}finally{I=_e}},s.unstable_requestPaint=function(){G=!0},s.unstable_runWithPriority=function(P,J){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var _e=I;I=P;try{return J()}finally{I=_e}},s.unstable_scheduleCallback=function(P,J,_e){var We=s.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?We+_e:We):_e=We,P){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=_e+$e,P={id:w++,callback:J,priorityLevel:P,startTime:_e,expirationTime:$e,sortIndex:-1},_e>We?(P.sortIndex=_e,e(g,P),i(E)===null&&P===i(g)&&(ne?(le(O),O=-1):ne=!0,Tt(Ae,_e-We))):(P.sortIndex=$e,e(E,P),W||$||(W=!0,xe||(xe=!0,U()))),P},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(P){var J=I;return function(){var _e=I;I=J;try{return P.apply(this,arguments)}finally{I=_e}}}})(Fh)),Fh}var av;function yS(){return av||(av=1,Hh.exports=_S()),Hh.exports}var Gh={exports:{}},Gn={};var rv;function vS(){if(rv)return Gn;rv=1;var s=zm();function e(E){var g="https://react.dev/errors/"+E;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+E+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(E,g,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:E,containerInfo:g,implementation:w}}var m=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(E,g){if(E==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Gn.createPortal=function(E,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(E,g,null,w)},Gn.flushSync=function(E){var g=m.T,w=a.p;try{if(m.T=null,a.p=2,E)return E()}finally{m.T=g,a.p=w,a.d.f()}},Gn.preconnect=function(E,g){typeof E=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(E,g))},Gn.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},Gn.preinit=function(E,g){if(typeof E=="string"&&g&&typeof g.as=="string"){var w=g.as,C=y(w,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,$=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;w==="style"?a.d.S(E,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:C,integrity:I,fetchPriority:$}):w==="script"&&a.d.X(E,{crossOrigin:C,integrity:I,fetchPriority:$,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Gn.preinitModule=function(E,g){if(typeof E=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var w=y(g.as,g.crossOrigin);a.d.M(E,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(E)},Gn.preload=function(E,g){if(typeof E=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var w=g.as,C=y(w,g.crossOrigin);a.d.L(E,w,{crossOrigin:C,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Gn.preloadModule=function(E,g){if(typeof E=="string")if(g){var w=y(g.as,g.crossOrigin);a.d.m(E,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(E)},Gn.requestFormReset=function(E){a.d.r(E)},Gn.unstable_batchedUpdates=function(E,g){return E(g)},Gn.useFormState=function(E,g,w){return m.H.useFormState(E,g,w)},Gn.useFormStatus=function(){return m.H.useHostTransitionStatus()},Gn.version="19.2.4",Gn}var ov;function ES(){if(ov)return Gh.exports;ov=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gh.exports=vS(),Gh.exports}var lv;function TS(){if(lv)return uu;lv=1;var s=yS(),e=zm(),i=ES();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function m(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function E(t){if(u(t)!==t)throw Error(a(188))}function g(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(a(188));return n!==t?null:t}for(var r=t,o=n;;){var f=r.return;if(f===null)break;var h=f.alternate;if(h===null){if(o=f.return,o!==null){r=o;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===r)return E(f),t;if(h===o)return E(f),n;h=h.sibling}throw Error(a(188))}if(r.return!==o.return)r=f,o=h;else{for(var T=!1,A=f.child;A;){if(A===r){T=!0,r=f,o=h;break}if(A===o){T=!0,o=f,r=h;break}A=A.sibling}if(!T){for(A=h.child;A;){if(A===r){T=!0,r=h,o=f;break}if(A===o){T=!0,o=h,r=f;break}A=A.sibling}if(!T)throw Error(a(189))}}if(r.alternate!==o)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:n}function w(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=w(t),n!==null)return n;t=t.sibling}return null}var C=Object.assign,I=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),me=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ne:return"Fragment";case z:return"Profiler";case G:return"StrictMode";case Ae:return"Suspense";case xe:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case me:return t.displayName||"Context";case le:return(t._context.displayName||"Context")+".Consumer";case he:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return n=t.displayName||null,n!==null?n:ve(t.type)||"Memo";case D:n=t._payload,t=t._init;try{return ve(t(n))}catch{}}return null}var Tt=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},We=[],$e=-1;function B(t){return{current:t}}function re(t){0>$e||(t.current=We[$e],We[$e]=null,$e--)}function ye(t,n){$e++,We[$e]=t.current,t.current=n}var Te=B(null),Pe=B(null),Ke=B(null),tt=B(null);function Kt(t,n){switch(ye(Ke,n),ye(Pe,t),ye(Te,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Sy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Sy(n),t=wy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(Te),ye(Te,t)}function jt(){re(Te),re(Pe),re(Ke)}function ps(t){t.memoizedState!==null&&ye(tt,t);var n=Te.current,r=wy(n,t.type);n!==r&&(ye(Pe,t),ye(Te,r))}function ba(t){Pe.current===t&&(re(Te),re(Pe)),tt.current===t&&(re(tt),su._currentValue=_e)}var Bn,gs;function qn(t){if(Bn===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Bn=n&&n[1]||"",gs=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+t+gs}var Sa=!1;function bt(t,n){if(!t||Sa)return"";Sa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ie){var Z=ie}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(ie){Z=ie}t.call(ce.prototype)}}else{try{throw Error()}catch(ie){Z=ie}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ie){if(ie&&Z&&typeof ie.stack=="string")return[ie.stack,Z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),T=h[0],A=h[1];if(T&&A){var L=T.split(`
`),K=A.split(`
`);for(f=o=0;o<L.length&&!L[o].includes("DetermineComponentFrameRoot");)o++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(o===L.length||f===K.length)for(o=L.length-1,f=K.length-1;1<=o&&0<=f&&L[o]!==K[f];)f--;for(;1<=o&&0<=f;o--,f--)if(L[o]!==K[f]){if(o!==1||f!==1)do if(o--,f--,0>f||L[o]!==K[f]){var ae=`
`+L[o].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=o&&0<=f);break}}}finally{Sa=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?qn(r):""}function qs(t,n){switch(t.tag){case 26:case 27:case 5:return qn(t.type);case 16:return qn("Lazy");case 13:return t.child!==n&&n!==null?qn("Suspense Fallback"):qn("Suspense");case 19:return qn("SuspenseList");case 0:case 15:return bt(t.type,!1);case 11:return bt(t.type.render,!1);case 1:return bt(t.type,!0);case 31:return qn("Activity");default:return""}}function wa(t){try{var n="",r=null;do n+=qs(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Pt=Object.prototype.hasOwnProperty,Wt=s.unstable_scheduleCallback,Ti=s.unstable_cancelCallback,wl=s.unstable_shouldYield,pr=s.unstable_requestPaint,Nn=s.unstable_now,ns=s.unstable_getCurrentPriorityLevel,is=s.unstable_ImmediatePriority,Kn=s.unstable_UserBlockingPriority,ss=s.unstable_NormalPriority,oo=s.unstable_LowPriority,gr=s.unstable_IdlePriority,lo=s.log,uo=s.unstable_setDisableYieldValue,bi=null,Oe=null;function Wn(t){if(typeof lo=="function"&&uo(t),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(bi,t)}catch{}}var Ut=Math.clz32?Math.clz32:co,_r=Math.log,Si=Math.LN2;function co(t){return t>>>=0,t===0?32:31-(_r(t)/Si|0)|0}var pn=256,_s=262144,Xt=4194304;function wi(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function pe(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var f=0,h=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=o&134217727;return A!==0?(o=A&~h,o!==0?f=wi(o):(T&=A,T!==0?f=wi(T):r||(r=A&~t,r!==0&&(f=wi(r))))):(A=o&~h,A!==0?f=wi(A):T!==0?f=wi(T):r||(r=o&~t,r!==0&&(f=wi(r)))),f===0?0:n!==0&&n!==f&&(n&h)===0&&(h=f&-f,r=n&-n,h>=r||h===32&&(r&4194048)!==0)?n:f}function Ai(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Al(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(){var t=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),t}function ui(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function as(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function yr(t,n,r,o,f,h){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,L=t.expirationTimes,K=t.hiddenUpdates;for(r=T&~r;0<r;){var ae=31-Ut(r),ce=1<<ae;A[ae]=0,L[ae]=-1;var Z=K[ae];if(Z!==null)for(K[ae]=null,ae=0;ae<Z.length;ae++){var ie=Z[ae];ie!==null&&(ie.lane&=-536870913)}r&=~ce}o!==0&&Zn(t,o,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(T&~n))}function Zn(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-Ut(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function Aa(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-Ut(r),f=1<<o;f&n|t[o]&n&&(t[o]|=n),r&=~f}}function rn(t,n){var r=n&-n;return r=(r&42)!==0?1:ys(r),(r&(t.suspendedLanes|n))!==0?0:r}function ys(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function zn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function vr(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:Yy(t.type))}function ci(t,n){var r=J.p;try{return J.p=t,n()}finally{J.p=r}}var Pn=Math.random().toString(36).slice(2),at="__reactFiber$"+Pn,en="__reactProps$"+Pn,Mi="__reactContainer$"+Pn,vs="__reactEvents$"+Pn,Nl="__reactListeners$"+Pn,Na="__reactHandles$"+Pn,Er="__reactResources$"+Pn,Jn="__reactMarker$"+Pn;function Ra(t){delete t[at],delete t[en],delete t[vs],delete t[Nl],delete t[Na]}function tn(t){var n=t[at];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Mi]||r[at]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Iy(t);t!==null;){if(r=t[at])return r;t=Iy(t)}return n}t=r,r=t.parentNode}return null}function Cn(t){if(t=t[at]||t[Mi]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function xn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ni(t){var n=t[Er];return n||(n=t[Er]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Yt(t){t[Jn]=!0}var rs=new Set,Ca={};function ei(t,n){Ri(t,n),Ri(t+"Capture",n)}function Ri(t,n){for(Ca[t]=n,t=0;t<n.length;t++)rs.add(n[t])}var Vi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zs={},xa={};function Tr(t){return Pt.call(xa,t)?!0:Pt.call(zs,t)?!1:Vi.test(t)?xa[t]=!0:(zs[t]=!0,!1)}function Ps(t,n,r){if(Tr(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function ti(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Nt(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function Ge(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hn(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Es(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(T){r=""+T,h.call(this,T)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function dt(t){if(!t._valueTracker){var n=Hn(t)?"checked":"value";t._valueTracker=Es(t,n,""+t[n])}}function Ui(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=Hn(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function fi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Hs=/[\n"\\]/g;function Fn(t){return t.replace(Hs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Bi(t,n,r,o,f,h,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),n!=null?T==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ge(n)):t.value!==""+Ge(n)&&(t.value=""+Ge(n)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),n!=null?Sr(t,T,Ge(n)):r!=null?Sr(t,T,Ge(r)):o!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Ge(A):t.removeAttribute("name")}function br(t,n,r,o,f,h,T,A){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),n!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){dt(t);return}r=r!=null?""+Ge(r):"",n=n!=null?""+Ge(n):r,A||n===t.value||(t.value=n),t.defaultValue=n}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=A?t.checked:!!o,t.defaultChecked=!!o,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),dt(t)}function Sr(t,n,r){n==="number"&&fi(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function qi(t,n,r,o){if(t=t.options,n){n={};for(var f=0;f<r.length;f++)n["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=n.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Ge(r),n=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function wr(t,n,r){if(n!=null&&(n=""+Ge(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Ge(r):""}function zi(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(a(92));if(Tt(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Ge(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),dt(t)}function vn(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var fo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ts(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||fo.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function bs(t,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in n)o=n[f],n.hasOwnProperty(f)&&r[f]!==o&&Ts(t,f,o)}else for(var h in n)n.hasOwnProperty(h)&&Ts(t,h,n[h])}function di(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Da=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),En=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ni(t){return En.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Dn(){}var Ar=null;function be(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pi=null,ii=null;function Ss(t){var n=Cn(t);if(n&&(t=n.stateNode)){var r=t[en]||null;e:switch(t=n.stateNode,n.type){case"input":if(Bi(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Fn(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var f=o[en]||null;if(!f)throw Error(a(90));Bi(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&Ui(o)}break e;case"textarea":wr(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&qi(t,!!r.multiple,n,!1)}}}var Fs=!1;function hi(t,n,r){if(Fs)return t(n,r);Fs=!0;try{var o=t(n);return o}finally{if(Fs=!1,(Pi!==null||ii!==null)&&(yc(),Pi&&(n=Pi,t=ii,ii=Pi=null,Ss(n),t)))for(n=0;n<t.length;n++)Ss(t[n])}}function on(t,n){var r=t.stateNode;if(r===null)return null;var o=r[en]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),os=!1;if(Tn)try{var d={};Object.defineProperty(d,"passive",{get:function(){os=!0}}),window.addEventListener("test",d,d),window.removeEventListener("test",d,d)}catch{os=!1}var _=null,S=null,N=null;function M(){if(N)return N;var t,n=S,r=n.length,o,f="value"in _?_.value:_.textContent,h=f.length;for(t=0;t<r&&n[t]===f[t];t++);var T=r-t;for(o=1;o<=T&&n[r-o]===f[h-o];o++);return N=f.slice(t,1<o?1-o:void 0)}function X(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function se(){return!0}function Ne(){return!1}function ke(t){function n(r,o,f,h,T){this._reactName=r,this._targetInst=f,this.type=o,this.nativeEvent=h,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(h):h[A]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?se:Ne,this.isPropagationStopped=Ne,this}return C(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),n}var Ue={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gt=ke(Ue),Qt=C({},Ue,{view:0,detail:0}),Ia=ke(Qt),ws,Gs,Hi,Xs=C({},Qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hi&&(Hi&&t.type==="mousemove"?(ws=t.screenX-Hi.screenX,Gs=t.screenY-Hi.screenY):Gs=ws=0,Hi=t),ws)},movementY:function(t){return"movementY"in t?t.movementY:Gs}}),Nr=ke(Xs),Ys=C({},Xs,{dataTransfer:0}),ho=ke(Ys),mo=C({},Qt,{relatedTarget:0}),Qs=ke(mo),Rr=C({},Ue,{animationName:0,elapsedTime:0,pseudoElement:0}),po=ke(Rr),Oa=C({},Ue,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cr=ke(Oa),go=C({},Ue,{data:0}),Fi=ke(go),_o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=vo[t])?!!n[t]:!1}function As(){return Eo}var bn=C({},Qt,{key:function(t){if(t.key){var n=_o[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=X(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(t){return t.type==="keypress"?X(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?X(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),To=ke(bn),bo=C({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ls=ke(bo),c=C({},Qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),v=ke(c),b=C({},Ue,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=ke(b),Y=C({},Xs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),te=ke(Y),ge=C({},Ue,{newState:0,oldState:0}),He=ke(ge),Ht=[9,13,27,32],ht=Tn&&"CompositionEvent"in window,Lt=null;Tn&&"documentMode"in document&&(Lt=document.documentMode);var F=Tn&&"TextEvent"in window&&!Lt,ue=Tn&&(!ht||Lt&&8<Lt&&11>=Lt),Ee=" ",De=!1;function Me(t,n){switch(t){case"keyup":return Ht.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sn=!1;function mi(t,n){switch(t){case"compositionend":return rt(n);case"keypress":return n.which!==32?null:(De=!0,Ee);case"textInput":return t=n.data,t===Ee&&De?null:t;default:return null}}function si(t,n){if(Sn)return t==="compositionend"||!ht&&Me(t,n)?(t=M(),N=S=_=null,Sn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ue&&n.locale!=="ko"?null:n.data;default:return null}}var Ci={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function So(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ci[t.type]:n==="textarea"}function Ns(t,n,r,o){Pi?ii?ii.push(o):ii=[o]:Pi=o,n=Ac(n,"onChange"),0<n.length&&(r=new gt("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var xr=null,Rl=null;function Bb(t){_y(t,0)}function Vu(t){var n=xn(t);if(Ui(n))return t}function Mp(t,n){if(t==="change")return n}var Vp=!1;if(Tn){var Yf;if(Tn){var Qf="oninput"in document;if(!Qf){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),Qf=typeof Up.oninput=="function"}Yf=Qf}else Yf=!1;Vp=Yf&&(!document.documentMode||9<document.documentMode)}function Bp(){xr&&(xr.detachEvent("onpropertychange",qp),Rl=xr=null)}function qp(t){if(t.propertyName==="value"&&Vu(Rl)){var n=[];Ns(n,Rl,t,be(t)),hi(Bb,n)}}function qb(t,n,r){t==="focusin"?(Bp(),xr=n,Rl=r,xr.attachEvent("onpropertychange",qp)):t==="focusout"&&Bp()}function zb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu(Rl)}function Pb(t,n){if(t==="click")return Vu(n)}function Hb(t,n){if(t==="input"||t==="change")return Vu(n)}function Fb(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var xi=typeof Object.is=="function"?Object.is:Fb;function Cl(t,n){if(xi(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var f=r[o];if(!Pt.call(n,f)||!xi(t[f],n[f]))return!1}return!0}function zp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pp(t,n){var r=zp(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zp(r)}}function Hp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Hp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Fp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=fi(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=fi(t.document)}return n}function $f(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Gb=Tn&&"documentMode"in document&&11>=document.documentMode,wo=null,Kf=null,xl=null,Wf=!1;function Gp(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wf||wo==null||wo!==fi(o)||(o=wo,"selectionStart"in o&&$f(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xl&&Cl(xl,o)||(xl=o,o=Ac(Kf,"onSelect"),0<o.length&&(n=new gt("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=wo)))}function Dr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Ao={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},Zf={},Xp={};Tn&&(Xp=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Ir(t){if(Zf[t])return Zf[t];if(!Ao[t])return t;var n=Ao[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Xp)return Zf[t]=n[r];return t}var Yp=Ir("animationend"),Qp=Ir("animationiteration"),$p=Ir("animationstart"),Xb=Ir("transitionrun"),Yb=Ir("transitionstart"),Qb=Ir("transitioncancel"),Kp=Ir("transitionend"),Wp=new Map,Jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jf.push("scrollEnd");function us(t,n){Wp.set(t,n),ei(n,[t])}var Uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Gi=[],No=0,ed=0;function Bu(){for(var t=No,n=ed=No=0;n<t;){var r=Gi[n];Gi[n++]=null;var o=Gi[n];Gi[n++]=null;var f=Gi[n];Gi[n++]=null;var h=Gi[n];if(Gi[n++]=null,o!==null&&f!==null){var T=o.pending;T===null?f.next=f:(f.next=T.next,T.next=f),o.pending=f}h!==0&&Zp(r,f,h)}}function qu(t,n,r,o){Gi[No++]=t,Gi[No++]=n,Gi[No++]=r,Gi[No++]=o,ed|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function td(t,n,r,o){return qu(t,n,r,o),zu(t)}function Or(t,n){return qu(t,null,null,n),zu(t)}function Zp(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var f=!1,h=t.return;h!==null;)h.childLanes|=r,o=h.alternate,o!==null&&(o.childLanes|=r),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,f&&n!==null&&(f=31-Ut(r),t=h.hiddenUpdates,o=t[f],o===null?t[f]=[n]:o.push(n),n.lane=r|536870912),h):null}function zu(t){if(50<Wl)throw Wl=0,ch=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ro={};function $b(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(t,n,r,o){return new $b(t,n,r,o)}function nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $s(t,n){var r=t.alternate;return r===null?(r=Di(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Jp(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Pu(t,n,r,o,f,h){var T=0;if(o=t,typeof t=="function")nd(t)&&(T=1);else if(typeof t=="string")T=eS(t,r,Te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Di(31,r,n,f),t.elementType=j,t.lanes=h,t;case ne:return kr(r.children,f,h,n);case G:T=8,f|=24;break;case z:return t=Di(12,r,n,f|2),t.elementType=z,t.lanes=h,t;case Ae:return t=Di(13,r,n,f),t.elementType=Ae,t.lanes=h,t;case xe:return t=Di(19,r,n,f),t.elementType=xe,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:T=10;break e;case le:T=9;break e;case he:T=11;break e;case O:T=14;break e;case D:T=16,o=null;break e}T=29,r=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=Di(T,r,n,f),n.elementType=t,n.type=o,n.lanes=h,n}function kr(t,n,r,o){return t=Di(7,t,o,n),t.lanes=r,t}function id(t,n,r){return t=Di(6,t,null,n),t.lanes=r,t}function eg(t){var n=Di(18,null,null,0);return n.stateNode=t,n}function sd(t,n,r){return n=Di(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var tg=new WeakMap;function Xi(t,n){if(typeof t=="object"&&t!==null){var r=tg.get(t);return r!==void 0?r:(n={value:t,source:n,stack:wa(n)},tg.set(t,n),n)}return{value:t,source:n,stack:wa(n)}}var Co=[],xo=0,Hu=null,Dl=0,Yi=[],Qi=0,ka=null,Rs=1,Cs="";function Ks(t,n){Co[xo++]=Dl,Co[xo++]=Hu,Hu=t,Dl=n}function ng(t,n,r){Yi[Qi++]=Rs,Yi[Qi++]=Cs,Yi[Qi++]=ka,ka=t;var o=Rs;t=Cs;var f=32-Ut(o)-1;o&=~(1<<f),r+=1;var h=32-Ut(n)+f;if(30<h){var T=f-f%5;h=(o&(1<<T)-1).toString(32),o>>=T,f-=T,Rs=1<<32-Ut(n)+f|r<<f|o,Cs=h+t}else Rs=1<<h|r<<f|o,Cs=t}function ad(t){t.return!==null&&(Ks(t,1),ng(t,1,0))}function rd(t){for(;t===Hu;)Hu=Co[--xo],Co[xo]=null,Dl=Co[--xo],Co[xo]=null;for(;t===ka;)ka=Yi[--Qi],Yi[Qi]=null,Cs=Yi[--Qi],Yi[Qi]=null,Rs=Yi[--Qi],Yi[Qi]=null}function ig(t,n){Yi[Qi++]=Rs,Yi[Qi++]=Cs,Yi[Qi++]=ka,Rs=n.id,Cs=n.overflow,ka=t}var In=null,Bt=null,ft=!1,ja=null,$i=!1,od=Error(a(519));function La(t){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(Xi(n,t)),od}function sg(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[at]=t,n[en]=o,r){case"dialog":it("cancel",n),it("close",n);break;case"iframe":case"object":case"embed":it("load",n);break;case"video":case"audio":for(r=0;r<Jl.length;r++)it(Jl[r],n);break;case"source":it("error",n);break;case"img":case"image":case"link":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"input":it("invalid",n),br(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":it("invalid",n);break;case"textarea":it("invalid",n),zi(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||Ty(n.textContent,r)?(o.popover!=null&&(it("beforetoggle",n),it("toggle",n)),o.onScroll!=null&&it("scroll",n),o.onScrollEnd!=null&&it("scrollend",n),o.onClick!=null&&(n.onclick=Dn),n=!0):n=!1,n||La(t,!0)}function ag(t){for(In=t.return;In;)switch(In.tag){case 5:case 31:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:In=In.return}}function Do(t){if(t!==In)return!1;if(!ft)return ag(t),ft=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Ah(t.type,t.memoizedProps)),r=!r),r&&Bt&&La(t),ag(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Bt=Dy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Bt=Dy(t)}else n===27?(n=Bt,$a(t.type)?(t=Dh,Dh=null,Bt=t):Bt=n):Bt=In?Wi(t.stateNode.nextSibling):null;return!0}function jr(){Bt=In=null,ft=!1}function ld(){var t=ja;return t!==null&&(yi===null?yi=t:yi.push.apply(yi,t),ja=null),t}function Il(t){ja===null?ja=[t]:ja.push(t)}var ud=B(null),Lr=null,Ws=null;function Ma(t,n,r){ye(ud,n._currentValue),n._currentValue=r}function Zs(t){t._currentValue=ud.current,re(ud)}function cd(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function fd(t,n,r,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var T=f.child;h=h.firstContext;e:for(;h!==null;){var A=h;h=f;for(var L=0;L<n.length;L++)if(A.context===n[L]){h.lanes|=r,A=h.alternate,A!==null&&(A.lanes|=r),cd(h.return,r,t),o||(T=null);break e}h=A.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(a(341));T.lanes|=r,h=T.alternate,h!==null&&(h.lanes|=r),cd(T,r,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Io(t,n,r,o){t=null;for(var f=n,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var A=f.type;xi(f.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(f===tt.current){if(T=f.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(su):t=[su])}f=f.return}t!==null&&fd(n,t,r,o),n.flags|=262144}function Fu(t){for(t=t.firstContext;t!==null;){if(!xi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mr(t){Lr=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function On(t){return rg(Lr,t)}function Gu(t,n){return Lr===null&&Mr(t),rg(t,n)}function rg(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ws===null){if(t===null)throw Error(a(308));Ws=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ws=Ws.next=n;return r}var Kb=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},Wb=s.unstable_scheduleCallback,Zb=s.unstable_NormalPriority,ln={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new Kb,data:new Map,refCount:0}}function Ol(t){t.refCount--,t.refCount===0&&Wb(Zb,function(){t.controller.abort()})}var kl=null,hd=0,Oo=0,ko=null;function Jb(t,n){if(kl===null){var r=kl=[];hd=0,Oo=gh(),ko={status:"pending",value:void 0,then:function(o){r.push(o)}}}return hd++,n.then(og,og),n}function og(){if(--hd===0&&kl!==null){ko!==null&&(ko.status="fulfilled");var t=kl;kl=null,Oo=0,ko=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function e1(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var f=0;f<r.length;f++)(0,r[f])(n)},function(f){for(o.status="rejected",o.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),o}var lg=P.S;P.S=function(t,n){G_=Nn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Jb(t,n),lg!==null&&lg(t,n)};var Vr=B(null);function md(){var t=Vr.current;return t!==null?t:Mt.pooledCache}function Xu(t,n){n===null?ye(Vr,Vr.current):ye(Vr,n.pool)}function ug(){var t=md();return t===null?null:{parent:ln._currentValue,pool:t}}var jo=Error(a(460)),pd=Error(a(474)),Yu=Error(a(542)),Qu={then:function(){}};function cg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fg(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Dn,Dn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,hg(t),t;default:if(typeof n.status=="string")n.then(Dn,Dn);else{if(t=Mt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=o}},function(o){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,hg(t),t}throw Br=n,jo}}function Ur(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Br=r,jo):r}}var Br=null;function dg(){if(Br===null)throw Error(a(459));var t=Br;return Br=null,t}function hg(t){if(t===jo||t===Yu)throw Error(a(483))}var Lo=null,jl=0;function $u(t){var n=jl;return jl+=1,Lo===null&&(Lo=[]),fg(Lo,t,n)}function Ll(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Ku(t,n){throw n.$$typeof===I?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function mg(t){function n(H,q){if(t){var Q=H.deletions;Q===null?(H.deletions=[q],H.flags|=16):Q.push(q)}}function r(H,q){if(!t)return null;for(;q!==null;)n(H,q),q=q.sibling;return null}function o(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function f(H,q){return H=$s(H,q),H.index=0,H.sibling=null,H}function h(H,q,Q){return H.index=Q,t?(Q=H.alternate,Q!==null?(Q=Q.index,Q<q?(H.flags|=67108866,q):Q):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function T(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function A(H,q,Q,oe){return q===null||q.tag!==6?(q=id(Q,H.mode,oe),q.return=H,q):(q=f(q,Q),q.return=H,q)}function L(H,q,Q,oe){var je=Q.type;return je===ne?ae(H,q,Q.props.children,oe,Q.key):q!==null&&(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===D&&Ur(je)===q.type)?(q=f(q,Q.props),Ll(q,Q),q.return=H,q):(q=Pu(Q.type,Q.key,Q.props,null,H.mode,oe),Ll(q,Q),q.return=H,q)}function K(H,q,Q,oe){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=sd(Q,H.mode,oe),q.return=H,q):(q=f(q,Q.children||[]),q.return=H,q)}function ae(H,q,Q,oe,je){return q===null||q.tag!==7?(q=kr(Q,H.mode,oe,je),q.return=H,q):(q=f(q,Q),q.return=H,q)}function ce(H,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=id(""+q,H.mode,Q),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case $:return Q=Pu(q.type,q.key,q.props,null,H.mode,Q),Ll(Q,q),Q.return=H,Q;case W:return q=sd(q,H.mode,Q),q.return=H,q;case D:return q=Ur(q),ce(H,q,Q)}if(Tt(q)||U(q))return q=kr(q,H.mode,Q,null),q.return=H,q;if(typeof q.then=="function")return ce(H,$u(q),Q);if(q.$$typeof===me)return ce(H,Gu(H,q),Q);Ku(H,q)}return null}function Z(H,q,Q,oe){var je=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return je!==null?null:A(H,q,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return Q.key===je?L(H,q,Q,oe):null;case W:return Q.key===je?K(H,q,Q,oe):null;case D:return Q=Ur(Q),Z(H,q,Q,oe)}if(Tt(Q)||U(Q))return je!==null?null:ae(H,q,Q,oe,null);if(typeof Q.then=="function")return Z(H,q,$u(Q),oe);if(Q.$$typeof===me)return Z(H,q,Gu(H,Q),oe);Ku(H,Q)}return null}function ie(H,q,Q,oe,je){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(Q)||null,A(q,H,""+oe,je);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case $:return H=H.get(oe.key===null?Q:oe.key)||null,L(q,H,oe,je);case W:return H=H.get(oe.key===null?Q:oe.key)||null,K(q,H,oe,je);case D:return oe=Ur(oe),ie(H,q,Q,oe,je)}if(Tt(oe)||U(oe))return H=H.get(Q)||null,ae(q,H,oe,je,null);if(typeof oe.then=="function")return ie(H,q,Q,$u(oe),je);if(oe.$$typeof===me)return ie(H,q,Q,Gu(q,oe),je);Ku(q,oe)}return null}function Re(H,q,Q,oe){for(var je=null,_t=null,Ie=q,et=q=0,lt=null;Ie!==null&&et<Q.length;et++){Ie.index>et?(lt=Ie,Ie=null):lt=Ie.sibling;var yt=Z(H,Ie,Q[et],oe);if(yt===null){Ie===null&&(Ie=lt);break}t&&Ie&&yt.alternate===null&&n(H,Ie),q=h(yt,q,et),_t===null?je=yt:_t.sibling=yt,_t=yt,Ie=lt}if(et===Q.length)return r(H,Ie),ft&&Ks(H,et),je;if(Ie===null){for(;et<Q.length;et++)Ie=ce(H,Q[et],oe),Ie!==null&&(q=h(Ie,q,et),_t===null?je=Ie:_t.sibling=Ie,_t=Ie);return ft&&Ks(H,et),je}for(Ie=o(Ie);et<Q.length;et++)lt=ie(Ie,H,et,Q[et],oe),lt!==null&&(t&&lt.alternate!==null&&Ie.delete(lt.key===null?et:lt.key),q=h(lt,q,et),_t===null?je=lt:_t.sibling=lt,_t=lt);return t&&Ie.forEach(function(er){return n(H,er)}),ft&&Ks(H,et),je}function Ve(H,q,Q,oe){if(Q==null)throw Error(a(151));for(var je=null,_t=null,Ie=q,et=q=0,lt=null,yt=Q.next();Ie!==null&&!yt.done;et++,yt=Q.next()){Ie.index>et?(lt=Ie,Ie=null):lt=Ie.sibling;var er=Z(H,Ie,yt.value,oe);if(er===null){Ie===null&&(Ie=lt);break}t&&Ie&&er.alternate===null&&n(H,Ie),q=h(er,q,et),_t===null?je=er:_t.sibling=er,_t=er,Ie=lt}if(yt.done)return r(H,Ie),ft&&Ks(H,et),je;if(Ie===null){for(;!yt.done;et++,yt=Q.next())yt=ce(H,yt.value,oe),yt!==null&&(q=h(yt,q,et),_t===null?je=yt:_t.sibling=yt,_t=yt);return ft&&Ks(H,et),je}for(Ie=o(Ie);!yt.done;et++,yt=Q.next())yt=ie(Ie,H,et,yt.value,oe),yt!==null&&(t&&yt.alternate!==null&&Ie.delete(yt.key===null?et:yt.key),q=h(yt,q,et),_t===null?je=yt:_t.sibling=yt,_t=yt);return t&&Ie.forEach(function(fS){return n(H,fS)}),ft&&Ks(H,et),je}function kt(H,q,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===ne&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:e:{for(var je=Q.key;q!==null;){if(q.key===je){if(je=Q.type,je===ne){if(q.tag===7){r(H,q.sibling),oe=f(q,Q.props.children),oe.return=H,H=oe;break e}}else if(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===D&&Ur(je)===q.type){r(H,q.sibling),oe=f(q,Q.props),Ll(oe,Q),oe.return=H,H=oe;break e}r(H,q);break}else n(H,q);q=q.sibling}Q.type===ne?(oe=kr(Q.props.children,H.mode,oe,Q.key),oe.return=H,H=oe):(oe=Pu(Q.type,Q.key,Q.props,null,H.mode,oe),Ll(oe,Q),oe.return=H,H=oe)}return T(H);case W:e:{for(je=Q.key;q!==null;){if(q.key===je)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){r(H,q.sibling),oe=f(q,Q.children||[]),oe.return=H,H=oe;break e}else{r(H,q);break}else n(H,q);q=q.sibling}oe=sd(Q,H.mode,oe),oe.return=H,H=oe}return T(H);case D:return Q=Ur(Q),kt(H,q,Q,oe)}if(Tt(Q))return Re(H,q,Q,oe);if(U(Q)){if(je=U(Q),typeof je!="function")throw Error(a(150));return Q=je.call(Q),Ve(H,q,Q,oe)}if(typeof Q.then=="function")return kt(H,q,$u(Q),oe);if(Q.$$typeof===me)return kt(H,q,Gu(H,Q),oe);Ku(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(r(H,q.sibling),oe=f(q,Q),oe.return=H,H=oe):(r(H,q),oe=id(Q,H.mode,oe),oe.return=H,H=oe),T(H)):r(H,q)}return function(H,q,Q,oe){try{jl=0;var je=kt(H,q,Q,oe);return Lo=null,je}catch(Ie){if(Ie===jo||Ie===Yu)throw Ie;var _t=Di(29,Ie,null,H.mode);return _t.lanes=oe,_t.return=H,_t}}}var qr=mg(!0),pg=mg(!1),Va=!1;function gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _d(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(vt&2)!==0){var f=o.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),o.pending=n,n=zu(t),Zp(t,null,r),n}return qu(t,o,n,r),zu(t)}function Ml(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,Aa(t,r)}}function yd(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var f=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?f=h=T:h=h.next=T,r=r.next}while(r!==null);h===null?f=h=n:h=h.next=n}else f=h=n;r={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var vd=!1;function Vl(){if(vd){var t=ko;if(t!==null)throw t}}function Ul(t,n,r,o){vd=!1;var f=t.updateQueue;Va=!1;var h=f.firstBaseUpdate,T=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var L=A,K=L.next;L.next=null,T===null?h=K:T.next=K,T=L;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==T&&(A===null?ae.firstBaseUpdate=K:A.next=K,ae.lastBaseUpdate=L))}if(h!==null){var ce=f.baseState;T=0,ae=K=L=null,A=h;do{var Z=A.lane&-536870913,ie=Z!==A.lane;if(ie?(ot&Z)===Z:(o&Z)===Z){Z!==0&&Z===Oo&&(vd=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=t,Ve=A;Z=n;var kt=r;switch(Ve.tag){case 1:if(Re=Ve.payload,typeof Re=="function"){ce=Re.call(kt,ce,Z);break e}ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ve.payload,Z=typeof Re=="function"?Re.call(kt,ce,Z):Re,Z==null)break e;ce=C({},ce,Z);break e;case 2:Va=!0}}Z=A.callback,Z!==null&&(t.flags|=64,ie&&(t.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[Z]:ie.push(Z))}else ie={lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(K=ae=ie,L=ce):ae=ae.next=ie,T|=Z;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ie=A,A=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);ae===null&&(L=ce),f.baseState=L,f.firstBaseUpdate=K,f.lastBaseUpdate=ae,h===null&&(f.shared.lanes=0),Fa|=T,t.lanes=T,t.memoizedState=ce}}function gg(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function _g(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)gg(r[t],n)}var Mo=B(null),Wu=B(0);function yg(t,n){t=oa,ye(Wu,t),ye(Mo,n),oa=t|n.baseLanes}function Ed(){ye(Wu,oa),ye(Mo,Mo.current)}function Td(){oa=Wu.current,re(Mo),re(Wu)}var Ii=B(null),Ki=null;function qa(t){var n=t.alternate;ye(nn,nn.current&1),ye(Ii,t),Ki===null&&(n===null||Mo.current!==null||n.memoizedState!==null)&&(Ki=t)}function bd(t){ye(nn,nn.current),ye(Ii,t),Ki===null&&(Ki=t)}function vg(t){t.tag===22?(ye(nn,nn.current),ye(Ii,t),Ki===null&&(Ki=t)):za()}function za(){ye(nn,nn.current),ye(Ii,Ii.current)}function Oi(t){re(Ii),Ki===t&&(Ki=null),re(nn)}var nn=B(0);function Zu(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Ch(r)||xh(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Js=0,Ze=null,It=null,un=null,Ju=!1,Vo=!1,zr=!1,ec=0,Bl=0,Uo=null,t1=0;function Zt(){throw Error(a(321))}function Sd(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!xi(t[r],n[r]))return!1;return!0}function wd(t,n,r,o,f,h){return Js=h,Ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=t===null||t.memoizedState===null?n_:Bd,zr=!1,h=r(o,f),zr=!1,Vo&&(h=Tg(n,r,o,f)),Eg(t),h}function Eg(t){P.H=Pl;var n=It!==null&&It.next!==null;if(Js=0,un=It=Ze=null,Ju=!1,Bl=0,Uo=null,n)throw Error(a(300));t===null||cn||(t=t.dependencies,t!==null&&Fu(t)&&(cn=!0))}function Tg(t,n,r,o){Ze=t;var f=0;do{if(Vo&&(Uo=null),Bl=0,Vo=!1,25<=f)throw Error(a(301));if(f+=1,un=It=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}P.H=i_,h=n(r,o)}while(Vo);return h}function n1(){var t=P.H,n=t.useState()[0];return n=typeof n.then=="function"?ql(n):n,t=t.useState()[0],(It!==null?It.memoizedState:null)!==t&&(Ze.flags|=1024),n}function Ad(){var t=ec!==0;return ec=0,t}function Nd(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Rd(t){if(Ju){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ju=!1}Js=0,un=It=Ze=null,Vo=!1,Bl=ec=0,Uo=null}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Ze.memoizedState=un=t:un=un.next=t,un}function sn(){if(It===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var n=un===null?Ze.memoizedState:un.next;if(n!==null)un=n,It=t;else{if(t===null)throw Ze.alternate===null?Error(a(467)):Error(a(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},un===null?Ze.memoizedState=un=t:un=un.next=t}return un}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(t){var n=Bl;return Bl+=1,Uo===null&&(Uo=[]),t=fg(Uo,t,n),n=Ze,(un===null?n.memoizedState:un.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?n_:Bd),t}function nc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ql(t);if(t.$$typeof===me)return On(t)}throw Error(a(438,String(t)))}function Cd(t){var n=null,r=Ze.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=Ze.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=tc(),Ze.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=V;return n.index++,r}function ea(t,n){return typeof n=="function"?n(t):n}function ic(t){var n=sn();return xd(n,It,t)}function xd(t,n,r){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var f=t.baseQueue,h=o.pending;if(h!==null){if(f!==null){var T=f.next;f.next=h.next,h.next=T}n.baseQueue=f=h,o.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{n=f.next;var A=T=null,L=null,K=n,ae=!1;do{var ce=K.lane&-536870913;if(ce!==K.lane?(ot&ce)===ce:(Js&ce)===ce){var Z=K.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ce===Oo&&(ae=!0);else if((Js&Z)===Z){K=K.next,Z===Oo&&(ae=!0);continue}else ce={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(A=L=ce,T=h):L=L.next=ce,Ze.lanes|=Z,Fa|=Z;ce=K.action,zr&&r(h,ce),h=K.hasEagerState?K.eagerState:r(h,ce)}else Z={lane:ce,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(A=L=Z,T=h):L=L.next=Z,Ze.lanes|=ce,Fa|=ce;K=K.next}while(K!==null&&K!==n);if(L===null?T=h:L.next=A,!xi(h,t.memoizedState)&&(cn=!0,ae&&(r=ko,r!==null)))throw r;t.memoizedState=h,t.baseState=T,t.baseQueue=L,o.lastRenderedState=h}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Dd(t){var n=sn(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var o=r.dispatch,f=r.pending,h=n.memoizedState;if(f!==null){r.pending=null;var T=f=f.next;do h=t(h,T.action),T=T.next;while(T!==f);xi(h,n.memoizedState)||(cn=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,o]}function bg(t,n,r){var o=Ze,f=sn(),h=ft;if(h){if(r===void 0)throw Error(a(407));r=r()}else r=n();var T=!xi((It||f).memoizedState,r);if(T&&(f.memoizedState=r,cn=!0),f=f.queue,kd(Ag.bind(null,o,f,t),[t]),f.getSnapshot!==n||T||un!==null&&un.memoizedState.tag&1){if(o.flags|=2048,Bo(9,{destroy:void 0},wg.bind(null,o,f,r,n),null),Mt===null)throw Error(a(349));h||(Js&127)!==0||Sg(o,n,r)}return r}function Sg(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=Ze.updateQueue,n===null?(n=tc(),Ze.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function wg(t,n,r,o){n.value=r,n.getSnapshot=o,Ng(n)&&Rg(t)}function Ag(t,n,r){return r(function(){Ng(n)&&Rg(t)})}function Ng(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!xi(t,r)}catch{return!0}}function Rg(t){var n=Or(t,2);n!==null&&vi(n,t,2)}function Id(t){var n=ai();if(typeof t=="function"){var r=t;if(t=r(),zr){Wn(!0);try{r()}finally{Wn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},n}function Cg(t,n,r,o){return t.baseState=r,xd(t,It,typeof o=="function"?o:ea)}function i1(t,n,r,o,f){if(rc(t))throw Error(a(485));if(t=n.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){h.listeners.push(T)}};P.T!==null?r(!0):h.isTransition=!1,o(h),r=n.pending,r===null?(h.next=n.pending=h,xg(n,h)):(h.next=r.next,n.pending=r.next=h)}}function xg(t,n){var r=n.action,o=n.payload,f=t.state;if(n.isTransition){var h=P.T,T={};P.T=T;try{var A=r(f,o),L=P.S;L!==null&&L(T,A),Dg(t,n,A)}catch(K){Od(t,n,K)}finally{h!==null&&T.types!==null&&(h.types=T.types),P.T=h}}else try{h=r(f,o),Dg(t,n,h)}catch(K){Od(t,n,K)}}function Dg(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Ig(t,n,o)},function(o){return Od(t,n,o)}):Ig(t,n,r)}function Ig(t,n,r){n.status="fulfilled",n.value=r,Og(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,xg(t,r)))}function Od(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,Og(n),n=n.next;while(n!==o)}t.action=null}function Og(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function kg(t,n){return n}function jg(t,n){if(ft){var r=Mt.formState;if(r!==null){e:{var o=Ze;if(ft){if(Bt){t:{for(var f=Bt,h=$i;f.nodeType!==8;){if(!h){f=null;break t}if(f=Wi(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Bt=Wi(f.nextSibling),o=f.data==="F!";break e}}La(o)}o=!1}o&&(n=r[0])}}return r=ai(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:n},r.queue=o,r=Jg.bind(null,Ze,o),o.dispatch=r,o=Id(!1),h=Ud.bind(null,Ze,!1,o.queue),o=ai(),f={state:n,dispatch:null,action:t,pending:null},o.queue=f,r=i1.bind(null,Ze,f,h,r),f.dispatch=r,o.memoizedState=t,[n,r,!1]}function Lg(t){var n=sn();return Mg(n,It,t)}function Mg(t,n,r){if(n=xd(t,n,kg)[0],t=ic(ea)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ql(n)}catch(T){throw T===jo?Yu:T}else o=n;n=sn();var f=n.queue,h=f.dispatch;return r!==n.memoizedState&&(Ze.flags|=2048,Bo(9,{destroy:void 0},s1.bind(null,f,r),null)),[o,h,t]}function s1(t,n){t.action=n}function Vg(t){var n=sn(),r=It;if(r!==null)return Mg(n,r,t);sn(),n=n.memoizedState,r=sn();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function Bo(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=Ze.updateQueue,n===null&&(n=tc(),Ze.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function Ug(){return sn().memoizedState}function sc(t,n,r,o){var f=ai();Ze.flags|=t,f.memoizedState=Bo(1|n,{destroy:void 0},r,o===void 0?null:o)}function ac(t,n,r,o){var f=sn();o=o===void 0?null:o;var h=f.memoizedState.inst;It!==null&&o!==null&&Sd(o,It.memoizedState.deps)?f.memoizedState=Bo(n,h,r,o):(Ze.flags|=t,f.memoizedState=Bo(1|n,h,r,o))}function Bg(t,n){sc(8390656,8,t,n)}function kd(t,n){ac(2048,8,t,n)}function a1(t){Ze.flags|=4;var n=Ze.updateQueue;if(n===null)n=tc(),Ze.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function qg(t){var n=sn().memoizedState;return a1({ref:n,nextImpl:t}),function(){if((vt&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function zg(t,n){return ac(4,2,t,n)}function Pg(t,n){return ac(4,4,t,n)}function Hg(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Fg(t,n,r){r=r!=null?r.concat([t]):null,ac(4,4,Hg.bind(null,n,t),r)}function jd(){}function Gg(t,n){var r=sn();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Sd(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function Xg(t,n){var r=sn();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Sd(n,o[1]))return o[0];if(o=t(),zr){Wn(!0);try{t()}finally{Wn(!1)}}return r.memoizedState=[o,n],o}function Ld(t,n,r){return r===void 0||(Js&1073741824)!==0&&(ot&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=Y_(),Ze.lanes|=t,Fa|=t,r)}function Yg(t,n,r,o){return xi(r,n)?r:Mo.current!==null?(t=Ld(t,r,o),xi(t,n)||(cn=!0),t):(Js&42)===0||(Js&1073741824)!==0&&(ot&261930)===0?(cn=!0,t.memoizedState=r):(t=Y_(),Ze.lanes|=t,Fa|=t,n)}function Qg(t,n,r,o,f){var h=J.p;J.p=h!==0&&8>h?h:8;var T=P.T,A={};P.T=A,Ud(t,!1,n,r);try{var L=f(),K=P.S;if(K!==null&&K(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ae=e1(L,o);zl(t,n,ae,Li(t))}else zl(t,n,o,Li(t))}catch(ce){zl(t,n,{then:function(){},status:"rejected",reason:ce},Li())}finally{J.p=h,T!==null&&A.types!==null&&(T.types=A.types),P.T=T}}function r1(){}function Md(t,n,r,o){if(t.tag!==5)throw Error(a(476));var f=$g(t).queue;Qg(t,f,n,_e,r===null?r1:function(){return Kg(t),r(o)})}function $g(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:_e},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Kg(t){var n=$g(t);n.next===null&&(n=t.alternate.memoizedState),zl(t,n.next.queue,{},Li())}function Vd(){return On(su)}function Wg(){return sn().memoizedState}function Zg(){return sn().memoizedState}function o1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Li();t=Ua(r);var o=Ba(n,t,r);o!==null&&(vi(o,n,r),Ml(o,n,r)),n={cache:dd()},t.payload=n;return}n=n.return}}function l1(t,n,r){var o=Li();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},rc(t)?e_(n,r):(r=td(t,n,r,o),r!==null&&(vi(r,t,o),t_(r,n,o)))}function Jg(t,n,r){var o=Li();zl(t,n,r,o)}function zl(t,n,r,o){var f={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(rc(t))e_(n,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var T=n.lastRenderedState,A=h(T,r);if(f.hasEagerState=!0,f.eagerState=A,xi(A,T))return qu(t,n,f,0),Mt===null&&Bu(),!1}catch{}if(r=td(t,n,f,o),r!==null)return vi(r,t,o),t_(r,n,o),!0}return!1}function Ud(t,n,r,o){if(o={lane:2,revertLane:gh(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},rc(t)){if(n)throw Error(a(479))}else n=td(t,r,o,2),n!==null&&vi(n,t,2)}function rc(t){var n=t.alternate;return t===Ze||n!==null&&n===Ze}function e_(t,n){Vo=Ju=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function t_(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,Aa(t,r)}}var Pl={readContext:On,use:nc,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};Pl.useEffectEvent=Zt;var n_={readContext:On,use:nc,useCallback:function(t,n){return ai().memoizedState=[t,n===void 0?null:n],t},useContext:On,useEffect:Bg,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,sc(4194308,4,Hg.bind(null,n,t),r)},useLayoutEffect:function(t,n){return sc(4194308,4,t,n)},useInsertionEffect:function(t,n){sc(4,2,t,n)},useMemo:function(t,n){var r=ai();n=n===void 0?null:n;var o=t();if(zr){Wn(!0);try{t()}finally{Wn(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=ai();if(r!==void 0){var f=r(n);if(zr){Wn(!0);try{r(n)}finally{Wn(!1)}}}else f=n;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=l1.bind(null,Ze,t),[o.memoizedState,t]},useRef:function(t){var n=ai();return t={current:t},n.memoizedState=t},useState:function(t){t=Id(t);var n=t.queue,r=Jg.bind(null,Ze,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:jd,useDeferredValue:function(t,n){var r=ai();return Ld(r,t,n)},useTransition:function(){var t=Id(!1);return t=Qg.bind(null,Ze,t.queue,!0,!1),ai().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=Ze,f=ai();if(ft){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),Mt===null)throw Error(a(349));(ot&127)!==0||Sg(o,n,r)}f.memoizedState=r;var h={value:r,getSnapshot:n};return f.queue=h,Bg(Ag.bind(null,o,h,t),[t]),o.flags|=2048,Bo(9,{destroy:void 0},wg.bind(null,o,h,r,n),null),r},useId:function(){var t=ai(),n=Mt.identifierPrefix;if(ft){var r=Cs,o=Rs;r=(o&~(1<<32-Ut(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=ec++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=t1++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Vd,useFormState:jg,useActionState:jg,useOptimistic:function(t){var n=ai();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Ud.bind(null,Ze,!0,r),r.dispatch=n,[t,n]},useMemoCache:Cd,useCacheRefresh:function(){return ai().memoizedState=o1.bind(null,Ze)},useEffectEvent:function(t){var n=ai(),r={impl:t};return n.memoizedState=r,function(){if((vt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Bd={readContext:On,use:nc,useCallback:Gg,useContext:On,useEffect:kd,useImperativeHandle:Fg,useInsertionEffect:zg,useLayoutEffect:Pg,useMemo:Xg,useReducer:ic,useRef:Ug,useState:function(){return ic(ea)},useDebugValue:jd,useDeferredValue:function(t,n){var r=sn();return Yg(r,It.memoizedState,t,n)},useTransition:function(){var t=ic(ea)[0],n=sn().memoizedState;return[typeof t=="boolean"?t:ql(t),n]},useSyncExternalStore:bg,useId:Wg,useHostTransitionStatus:Vd,useFormState:Lg,useActionState:Lg,useOptimistic:function(t,n){var r=sn();return Cg(r,It,t,n)},useMemoCache:Cd,useCacheRefresh:Zg};Bd.useEffectEvent=qg;var i_={readContext:On,use:nc,useCallback:Gg,useContext:On,useEffect:kd,useImperativeHandle:Fg,useInsertionEffect:zg,useLayoutEffect:Pg,useMemo:Xg,useReducer:Dd,useRef:Ug,useState:function(){return Dd(ea)},useDebugValue:jd,useDeferredValue:function(t,n){var r=sn();return It===null?Ld(r,t,n):Yg(r,It.memoizedState,t,n)},useTransition:function(){var t=Dd(ea)[0],n=sn().memoizedState;return[typeof t=="boolean"?t:ql(t),n]},useSyncExternalStore:bg,useId:Wg,useHostTransitionStatus:Vd,useFormState:Vg,useActionState:Vg,useOptimistic:function(t,n){var r=sn();return It!==null?Cg(r,It,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Cd,useCacheRefresh:Zg};i_.useEffectEvent=qg;function qd(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:C({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Li(),f=Ua(o);f.payload=n,r!=null&&(f.callback=r),n=Ba(t,f,o),n!==null&&(vi(n,t,o),Ml(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Li(),f=Ua(o);f.tag=1,f.payload=n,r!=null&&(f.callback=r),n=Ba(t,f,o),n!==null&&(vi(n,t,o),Ml(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Li(),o=Ua(r);o.tag=2,n!=null&&(o.callback=n),n=Ba(t,o,r),n!==null&&(vi(n,t,r),Ml(n,t,r))}};function s_(t,n,r,o,f,h,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,T):n.prototype&&n.prototype.isPureReactComponent?!Cl(r,o)||!Cl(f,h):!0}function a_(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&zd.enqueueReplaceState(n,n.state,null)}function Pr(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=C({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function r_(t){Uu(t)}function o_(t){console.error(t)}function l_(t){Uu(t)}function oc(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function u_(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pd(t,n,r){return r=Ua(r),r.tag=3,r.payload={element:null},r.callback=function(){oc(t,n)},r}function c_(t){return t=Ua(t),t.tag=3,t}function f_(t,n,r,o){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var h=o.value;t.payload=function(){return f(h)},t.callback=function(){u_(n,r,o)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){u_(n,r,o),typeof f!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})})}function u1(t,n,r,o,f){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Io(n,r,f,!0),r=Ii.current,r!==null){switch(r.tag){case 31:case 13:return Ki===null?vc():r.alternate===null&&Jt===0&&(Jt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,o===Qu?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),hh(t,o,f)),!1;case 22:return r.flags|=65536,o===Qu?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),hh(t,o,f)),!1}throw Error(a(435,r.tag))}return hh(t,o,f),vc(),!1}if(ft)return n=Ii.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,o!==od&&(t=Error(a(422),{cause:o}),Il(Xi(t,r)))):(o!==od&&(n=Error(a(423),{cause:o}),Il(Xi(n,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=Xi(o,r),f=Pd(t.stateNode,o,f),yd(t,f),Jt!==4&&(Jt=2)),!1;var h=Error(a(520),{cause:o});if(h=Xi(h,r),Kl===null?Kl=[h]:Kl.push(h),Jt!==4&&(Jt=2),n===null)return!0;o=Xi(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Pd(r.stateNode,o,t),yd(r,t),!1;case 1:if(n=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ga===null||!Ga.has(h))))return r.flags|=65536,f&=-f,r.lanes|=f,f=c_(f),f_(f,t,r,o),yd(r,f),!1}r=r.return}while(r!==null);return!1}var Hd=Error(a(461)),cn=!1;function kn(t,n,r,o){n.child=t===null?pg(n,null,r,o):qr(n,t.child,r,o)}function d_(t,n,r,o,f){r=r.render;var h=n.ref;if("ref"in o){var T={};for(var A in o)A!=="ref"&&(T[A]=o[A])}else T=o;return Mr(n),o=wd(t,n,r,T,h,f),A=Ad(),t!==null&&!cn?(Nd(t,n,f),ta(t,n,f)):(ft&&A&&ad(n),n.flags|=1,kn(t,n,o,f),n.child)}function h_(t,n,r,o,f){if(t===null){var h=r.type;return typeof h=="function"&&!nd(h)&&h.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=h,m_(t,n,h,o,f)):(t=Pu(r.type,null,o,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(h=t.child,!Wd(t,f)){var T=h.memoizedProps;if(r=r.compare,r=r!==null?r:Cl,r(T,o)&&t.ref===n.ref)return ta(t,n,f)}return n.flags|=1,t=$s(h,o),t.ref=n.ref,t.return=n,n.child=t}function m_(t,n,r,o,f){if(t!==null){var h=t.memoizedProps;if(Cl(h,o)&&t.ref===n.ref)if(cn=!1,n.pendingProps=o=h,Wd(t,f))(t.flags&131072)!==0&&(cn=!0);else return n.lanes=t.lanes,ta(t,n,f)}return Fd(t,n,r,o,f)}function p_(t,n,r,o){var f=o.children,h=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,t!==null){for(o=n.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~h}else o=0,n.child=null;return g_(t,n,h,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xu(n,h!==null?h.cachePool:null),h!==null?yg(n,h):Ed(),vg(n);else return o=n.lanes=536870912,g_(t,n,h!==null?h.baseLanes|r:r,r,o)}else h!==null?(Xu(n,h.cachePool),yg(n,h),za(),n.memoizedState=null):(t!==null&&Xu(n,null),Ed(),za());return kn(t,n,f,r),n.child}function Hl(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function g_(t,n,r,o,f){var h=md();return h=h===null?null:{parent:ln._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},t!==null&&Xu(n,null),Ed(),vg(n),t!==null&&Io(t,n,o,!0),n.childLanes=f,null}function lc(t,n){return n=cc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function __(t,n,r){return qr(n,t.child,null,r),t=lc(n,n.pendingProps),t.flags|=2,Oi(n),n.memoizedState=null,t}function c1(t,n,r){var o=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(ft){if(o.mode==="hidden")return t=lc(n,o),n.lanes=536870912,Hl(null,t);if(bd(n),(t=Bt)?(t=xy(t,$i),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ka!==null?{id:Rs,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},r=eg(t),r.return=n,n.child=r,In=n,Bt=null)):t=null,t===null)throw La(n);return n.lanes=536870912,null}return lc(n,o)}var h=t.memoizedState;if(h!==null){var T=h.dehydrated;if(bd(n),f)if(n.flags&256)n.flags&=-257,n=__(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(a(558));else if(cn||Io(t,n,r,!1),f=(r&t.childLanes)!==0,cn||f){if(o=Mt,o!==null&&(T=rn(o,r),T!==0&&T!==h.retryLane))throw h.retryLane=T,Or(t,T),vi(o,t,T),Hd;vc(),n=__(t,n,r)}else t=h.treeContext,Bt=Wi(T.nextSibling),In=n,ft=!0,ja=null,$i=!1,t!==null&&ig(n,t),n=lc(n,o),n.flags|=4096;return n}return t=$s(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function uc(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Fd(t,n,r,o,f){return Mr(n),r=wd(t,n,r,o,void 0,f),o=Ad(),t!==null&&!cn?(Nd(t,n,f),ta(t,n,f)):(ft&&o&&ad(n),n.flags|=1,kn(t,n,r,f),n.child)}function y_(t,n,r,o,f,h){return Mr(n),n.updateQueue=null,r=Tg(n,o,r,f),Eg(t),o=Ad(),t!==null&&!cn?(Nd(t,n,h),ta(t,n,h)):(ft&&o&&ad(n),n.flags|=1,kn(t,n,r,h),n.child)}function v_(t,n,r,o,f){if(Mr(n),n.stateNode===null){var h=Ro,T=r.contextType;typeof T=="object"&&T!==null&&(h=On(T)),h=new r(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=zd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},gd(n),T=r.contextType,h.context=typeof T=="object"&&T!==null?On(T):Ro,h.state=n.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(qd(n,r,T,o),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(T=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),T!==h.state&&zd.enqueueReplaceState(h,h.state,null),Ul(n,o,h,f),Vl(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){h=n.stateNode;var A=n.memoizedProps,L=Pr(r,A);h.props=L;var K=h.context,ae=r.contextType;T=Ro,typeof ae=="object"&&ae!==null&&(T=On(ae));var ce=r.getDerivedStateFromProps;ae=typeof ce=="function"||typeof h.getSnapshotBeforeUpdate=="function",A=n.pendingProps!==A,ae||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(A||K!==T)&&a_(n,h,o,T),Va=!1;var Z=n.memoizedState;h.state=Z,Ul(n,o,h,f),Vl(),K=n.memoizedState,A||Z!==K||Va?(typeof ce=="function"&&(qd(n,r,ce,o),K=n.memoizedState),(L=Va||s_(n,r,L,o,Z,K,T))?(ae||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=K),h.props=o,h.state=K,h.context=T,o=L):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,_d(t,n),T=n.memoizedProps,ae=Pr(r,T),h.props=ae,ce=n.pendingProps,Z=h.context,K=r.contextType,L=Ro,typeof K=="object"&&K!==null&&(L=On(K)),A=r.getDerivedStateFromProps,(K=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(T!==ce||Z!==L)&&a_(n,h,o,L),Va=!1,Z=n.memoizedState,h.state=Z,Ul(n,o,h,f),Vl();var ie=n.memoizedState;T!==ce||Z!==ie||Va||t!==null&&t.dependencies!==null&&Fu(t.dependencies)?(typeof A=="function"&&(qd(n,r,A,o),ie=n.memoizedState),(ae=Va||s_(n,r,ae,o,Z,ie,L)||t!==null&&t.dependencies!==null&&Fu(t.dependencies))?(K||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,ie,L),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,ie,L)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ie),h.props=o,h.state=ie,h.context=L,o=ae):(typeof h.componentDidUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(n.flags|=1024),o=!1)}return h=o,uc(t,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,t!==null&&o?(n.child=qr(n,t.child,null,f),n.child=qr(n,null,r,f)):kn(t,n,r,f),n.memoizedState=h.state,t=n.child):t=ta(t,n,f),t}function E_(t,n,r,o){return jr(),n.flags|=256,kn(t,n,r,o),n.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(t){return{baseLanes:t,cachePool:ug()}}function Yd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=ji),t}function T_(t,n,r){var o=n.pendingProps,f=!1,h=(n.flags&128)!==0,T;if((T=h)||(T=t!==null&&t.memoizedState===null?!1:(nn.current&2)!==0),T&&(f=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,t===null){if(ft){if(f?qa(n):za(),(t=Bt)?(t=xy(t,$i),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ka!==null?{id:Rs,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},r=eg(t),r.return=n,n.child=r,In=n,Bt=null)):t=null,t===null)throw La(n);return xh(t)?n.lanes=32:n.lanes=536870912,null}var A=o.children;return o=o.fallback,f?(za(),f=n.mode,A=cc({mode:"hidden",children:A},f),o=kr(o,f,r,null),A.return=n,o.return=n,A.sibling=o,n.child=A,o=n.child,o.memoizedState=Xd(r),o.childLanes=Yd(t,T,r),n.memoizedState=Gd,Hl(null,o)):(qa(n),Qd(n,A))}var L=t.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(h)n.flags&256?(qa(n),n.flags&=-257,n=$d(t,n,r)):n.memoizedState!==null?(za(),n.child=t.child,n.flags|=128,n=null):(za(),A=o.fallback,f=n.mode,o=cc({mode:"visible",children:o.children},f),A=kr(A,f,r,null),A.flags|=2,o.return=n,A.return=n,o.sibling=A,n.child=o,qr(n,t.child,null,r),o=n.child,o.memoizedState=Xd(r),o.childLanes=Yd(t,T,r),n.memoizedState=Gd,n=Hl(null,o));else if(qa(n),xh(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var K=T.dgst;T=K,o=Error(a(419)),o.stack="",o.digest=T,Il({value:o,source:null,stack:null}),n=$d(t,n,r)}else if(cn||Io(t,n,r,!1),T=(r&t.childLanes)!==0,cn||T){if(T=Mt,T!==null&&(o=rn(T,r),o!==0&&o!==L.retryLane))throw L.retryLane=o,Or(t,o),vi(T,t,o),Hd;Ch(A)||vc(),n=$d(t,n,r)}else Ch(A)?(n.flags|=192,n.child=t.child,n=null):(t=L.treeContext,Bt=Wi(A.nextSibling),In=n,ft=!0,ja=null,$i=!1,t!==null&&ig(n,t),n=Qd(n,o.children),n.flags|=4096);return n}return f?(za(),A=o.fallback,f=n.mode,L=t.child,K=L.sibling,o=$s(L,{mode:"hidden",children:o.children}),o.subtreeFlags=L.subtreeFlags&65011712,K!==null?A=$s(K,A):(A=kr(A,f,r,null),A.flags|=2),A.return=n,o.return=n,o.sibling=A,n.child=o,Hl(null,o),o=n.child,A=t.child.memoizedState,A===null?A=Xd(r):(f=A.cachePool,f!==null?(L=ln._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=ug(),A={baseLanes:A.baseLanes|r,cachePool:f}),o.memoizedState=A,o.childLanes=Yd(t,T,r),n.memoizedState=Gd,Hl(t.child,o)):(qa(n),r=t.child,t=r.sibling,r=$s(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(T=n.deletions,T===null?(n.deletions=[t],n.flags|=16):T.push(t)),n.child=r,n.memoizedState=null,r)}function Qd(t,n){return n=cc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function cc(t,n){return t=Di(22,t,null,n),t.lanes=0,t}function $d(t,n,r){return qr(n,t.child,null,r),t=Qd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function b_(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),cd(t.return,n,r)}function Kd(t,n,r,o,f,h){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:f,treeForkCount:h}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=o,T.tail=r,T.tailMode=f,T.treeForkCount=h)}function S_(t,n,r){var o=n.pendingProps,f=o.revealOrder,h=o.tail;o=o.children;var T=nn.current,A=(T&2)!==0;if(A?(T=T&1|2,n.flags|=128):T&=1,ye(nn,T),kn(t,n,o,r),o=ft?Dl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b_(t,r,n);else if(t.tag===19)b_(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=n.child,f=null;r!==null;)t=r.alternate,t!==null&&Zu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=n.child,n.child=null):(f=r.sibling,r.sibling=null),Kd(n,!1,f,r,h,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&Zu(t)===null){n.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}Kd(n,!0,r,null,h,o);break;case"together":Kd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function ta(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Fa|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(Io(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,r=$s(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=$s(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Wd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Fu(t)))}function f1(t,n,r){switch(n.tag){case 3:Kt(n,n.stateNode.containerInfo),Ma(n,ln,t.memoizedState.cache),jr();break;case 27:case 5:ps(n);break;case 4:Kt(n,n.stateNode.containerInfo);break;case 10:Ma(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,bd(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(qa(n),n.flags|=128,null):(r&n.child.childLanes)!==0?T_(t,n,r):(qa(n),t=ta(t,n,r),t!==null?t.sibling:null);qa(n);break;case 19:var f=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Io(t,n,r,!1),o=(r&n.childLanes)!==0),f){if(o)return S_(t,n,r);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ye(nn,nn.current),o)break;return null;case 22:return n.lanes=0,p_(t,n,r,n.pendingProps);case 24:Ma(n,ln,t.memoizedState.cache)}return ta(t,n,r)}function w_(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)cn=!0;else{if(!Wd(t,r)&&(n.flags&128)===0)return cn=!1,f1(t,n,r);cn=(t.flags&131072)!==0}else cn=!1,ft&&(n.flags&1048576)!==0&&ng(n,Dl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Ur(n.elementType),n.type=t,typeof t=="function")nd(t)?(o=Pr(t,o),n.tag=1,n=v_(null,n,t,o,r)):(n.tag=0,n=Fd(null,n,t,o,r));else{if(t!=null){var f=t.$$typeof;if(f===he){n.tag=11,n=d_(null,n,t,o,r);break e}else if(f===O){n.tag=14,n=h_(null,n,t,o,r);break e}}throw n=ve(t)||t,Error(a(306,n,""))}}return n;case 0:return Fd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,f=Pr(o,n.pendingProps),v_(t,n,o,f,r);case 3:e:{if(Kt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var h=n.memoizedState;f=h.element,_d(t,n),Ul(n,o,null,r);var T=n.memoizedState;if(o=T.cache,Ma(n,ln,o),o!==h.cache&&fd(n,[ln],r,!0),Vl(),o=T.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=E_(t,n,o,r);break e}else if(o!==f){f=Xi(Error(a(424)),n),Il(f),n=E_(t,n,o,r);break e}else for(t=n.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Bt=Wi(t.firstChild),In=n,ft=!0,ja=null,$i=!0,r=pg(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(jr(),o===f){n=ta(t,n,r);break e}kn(t,n,o,r)}n=n.child}return n;case 26:return uc(t,n),t===null?(r=Ly(n.type,null,n.pendingProps,null))?n.memoizedState=r:ft||(r=n.type,t=n.pendingProps,o=Nc(Ke.current).createElement(r),o[at]=n,o[en]=t,jn(o,r,t),Yt(o),n.stateNode=o):n.memoizedState=Ly(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ps(n),t===null&&ft&&(o=n.stateNode=Oy(n.type,n.pendingProps,Ke.current),In=n,$i=!0,f=Bt,$a(n.type)?(Dh=f,Bt=Wi(o.firstChild)):Bt=f),kn(t,n,n.pendingProps.children,r),uc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ft&&((f=o=Bt)&&(o=z1(o,n.type,n.pendingProps,$i),o!==null?(n.stateNode=o,In=n,Bt=Wi(o.firstChild),$i=!1,f=!0):f=!1),f||La(n)),ps(n),f=n.type,h=n.pendingProps,T=t!==null?t.memoizedProps:null,o=h.children,Ah(f,h)?o=null:T!==null&&Ah(f,T)&&(n.flags|=32),n.memoizedState!==null&&(f=wd(t,n,n1,null,null,r),su._currentValue=f),uc(t,n),kn(t,n,o,r),n.child;case 6:return t===null&&ft&&((t=r=Bt)&&(r=P1(r,n.pendingProps,$i),r!==null?(n.stateNode=r,In=n,Bt=null,t=!0):t=!1),t||La(n)),null;case 13:return T_(t,n,r);case 4:return Kt(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=qr(n,null,o,r):kn(t,n,o,r),n.child;case 11:return d_(t,n,n.type,n.pendingProps,r);case 7:return kn(t,n,n.pendingProps,r),n.child;case 8:return kn(t,n,n.pendingProps.children,r),n.child;case 12:return kn(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Ma(n,n.type,o.value),kn(t,n,o.children,r),n.child;case 9:return f=n.type._context,o=n.pendingProps.children,Mr(n),f=On(f),o=o(f),n.flags|=1,kn(t,n,o,r),n.child;case 14:return h_(t,n,n.type,n.pendingProps,r);case 15:return m_(t,n,n.type,n.pendingProps,r);case 19:return S_(t,n,r);case 31:return c1(t,n,r);case 22:return p_(t,n,r,n.pendingProps);case 24:return Mr(n),o=On(ln),t===null?(f=md(),f===null&&(f=Mt,h=dd(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=r),f=h),n.memoizedState={parent:o,cache:f},gd(n),Ma(n,ln,f)):((t.lanes&r)!==0&&(_d(t,n),Ul(n,null,null,r),Vl()),f=t.memoizedState,h=n.memoizedState,f.parent!==o?(f={parent:o,cache:o},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Ma(n,ln,o)):(o=h.cache,Ma(n,ln,o),o!==f.cache&&fd(n,[ln],r,!0))),kn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function na(t){t.flags|=4}function Zd(t,n,r,o,f){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(W_())t.flags|=8192;else throw Br=Qu,pd}else t.flags&=-16777217}function A_(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!qy(n))if(W_())t.flags|=8192;else throw Br=Qu,pd}function fc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Rn():536870912,t.lanes|=n,Ho|=n)}function Fl(t,n){if(!ft)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function qt(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function d1(t,n,r){var o=n.pendingProps;switch(rd(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(n),null;case 1:return qt(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Zs(ln),jt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Do(n)?na(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ld())),qt(n),null;case 26:var f=n.type,h=n.memoizedState;return t===null?(na(n),h!==null?(qt(n),A_(n,h)):(qt(n),Zd(n,f,null,o,r))):h?h!==t.memoizedState?(na(n),qt(n),A_(n,h)):(qt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&na(n),qt(n),Zd(n,f,t,o,r)),null;case 27:if(ba(n),r=Ke.current,f=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&na(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return qt(n),null}t=Te.current,Do(n)?sg(n):(t=Oy(f,o,r),n.stateNode=t,na(n))}return qt(n),null;case 5:if(ba(n),f=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&na(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return qt(n),null}if(h=Te.current,Do(n))sg(n);else{var T=Nc(Ke.current);switch(h){case 1:h=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=T.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?T.createElement("select",{is:o.is}):T.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?T.createElement(f,{is:o.is}):T.createElement(f)}}h[at]=n,h[en]=o;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)h.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=h;e:switch(jn(h,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&na(n)}}return qt(n),Zd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&na(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=Ke.current,Do(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,f=In,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[at]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Ty(t.nodeValue,r)),t||La(n,!0)}else t=Nc(t).createTextNode(o),t[at]=n,n.stateNode=t}return qt(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=Do(n),r!==null){if(t===null){if(!o)throw Error(a(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[at]=n}else jr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),t=!1}else r=ld(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Oi(n),n):(Oi(n),null);if((n.flags&128)!==0)throw Error(a(558))}return qt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Do(n),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[at]=n}else jr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),f=!1}else f=ld(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Oi(n),n):(Oi(n),null)}return Oi(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==f&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),fc(n,n.updateQueue),qt(n),null);case 4:return jt(),t===null&&Eh(n.stateNode.containerInfo),qt(n),null;case 10:return Zs(n.type),qt(n),null;case 19:if(re(nn),o=n.memoizedState,o===null)return qt(n),null;if(f=(n.flags&128)!==0,h=o.rendering,h===null)if(f)Fl(o,!1);else{if(Jt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=Zu(t),h!==null){for(n.flags|=128,Fl(o,!1),t=h.updateQueue,n.updateQueue=t,fc(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Jp(r,t),r=r.sibling;return ye(nn,nn.current&1|2),ft&&Ks(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&Nn()>gc&&(n.flags|=128,f=!0,Fl(o,!1),n.lanes=4194304)}else{if(!f)if(t=Zu(h),t!==null){if(n.flags|=128,f=!0,t=t.updateQueue,n.updateQueue=t,fc(n,t),Fl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!ft)return qt(n),null}else 2*Nn()-o.renderingStartTime>gc&&r!==536870912&&(n.flags|=128,f=!0,Fl(o,!1),n.lanes=4194304);o.isBackwards?(h.sibling=n.child,n.child=h):(t=o.last,t!==null?t.sibling=h:n.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Nn(),t.sibling=null,r=nn.current,ye(nn,f?r&1|2:r&1),ft&&Ks(n,o.treeForkCount),t):(qt(n),null);case 22:case 23:return Oi(n),Td(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(qt(n),n.subtreeFlags&6&&(n.flags|=8192)):qt(n),r=n.updateQueue,r!==null&&fc(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&re(Vr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Zs(ln),qt(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function h1(t,n){switch(rd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Zs(ln),jt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return ba(n),null;case 31:if(n.memoizedState!==null){if(Oi(n),n.alternate===null)throw Error(a(340));jr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Oi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));jr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return re(nn),null;case 4:return jt(),null;case 10:return Zs(n.type),null;case 22:case 23:return Oi(n),Td(),t!==null&&re(Vr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Zs(ln),null;case 25:return null;default:return null}}function N_(t,n){switch(rd(n),n.tag){case 3:Zs(ln),jt();break;case 26:case 27:case 5:ba(n);break;case 4:jt();break;case 31:n.memoizedState!==null&&Oi(n);break;case 13:Oi(n);break;case 19:re(nn);break;case 10:Zs(n.type);break;case 22:case 23:Oi(n),Td(),t!==null&&re(Vr);break;case 24:Zs(ln)}}function Gl(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var f=o.next;r=f;do{if((r.tag&t)===t){o=void 0;var h=r.create,T=r.inst;o=h(),T.destroy=o}r=r.next}while(r!==f)}}catch(A){Ct(n,n.return,A)}}function Pa(t,n,r){try{var o=n.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var h=f.next;o=h;do{if((o.tag&t)===t){var T=o.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,f=n;var L=r,K=A;try{K()}catch(ae){Ct(f,L,ae)}}}o=o.next}while(o!==h)}}catch(ae){Ct(n,n.return,ae)}}function R_(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{_g(n,r)}catch(o){Ct(t,t.return,o)}}}function C_(t,n,r){r.props=Pr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){Ct(t,n,o)}}function Xl(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(f){Ct(t,n,f)}}function xs(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(f){Ct(t,n,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ct(t,n,f)}else r.current=null}function x_(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(f){Ct(t,t.return,f)}}function Jd(t,n,r){try{var o=t.stateNode;L1(o,t.type,r,n),o[en]=n}catch(f){Ct(t,t.return,f)}}function D_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$a(t.type)||t.tag===4}function eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$a(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function th(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Dn));else if(o!==4&&(o===27&&$a(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(th(t,n,r),t=t.sibling;t!==null;)th(t,n,r),t=t.sibling}function dc(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&$a(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(dc(t,n,r),t=t.sibling;t!==null;)dc(t,n,r),t=t.sibling}function I_(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);jn(n,o,r),n[at]=t,n[en]=r}catch(h){Ct(t,t.return,h)}}var ia=!1,fn=!1,nh=!1,O_=typeof WeakSet=="function"?WeakSet:Set,wn=null;function m1(t,n){if(t=t.containerInfo,Sh=kc,t=Fp(t),$f(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var f=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var T=0,A=-1,L=-1,K=0,ae=0,ce=t,Z=null;t:for(;;){for(var ie;ce!==r||f!==0&&ce.nodeType!==3||(A=T+f),ce!==h||o!==0&&ce.nodeType!==3||(L=T+o),ce.nodeType===3&&(T+=ce.nodeValue.length),(ie=ce.firstChild)!==null;)Z=ce,ce=ie;for(;;){if(ce===t)break t;if(Z===r&&++K===f&&(A=T),Z===h&&++ae===o&&(L=T),(ie=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=ie}r=A===-1||L===-1?null:{start:A,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(wh={focusedElem:t,selectionRange:r},kc=!1,wn=n;wn!==null;)if(n=wn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,wn=t;else for(;wn!==null;){switch(n=wn,h=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,r=n,f=h.memoizedProps,h=h.memoizedState,o=r.stateNode;try{var Re=Pr(r.type,f);t=o.getSnapshotBeforeUpdate(Re,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ve){Ct(r,r.return,Ve)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)Rh(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Rh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,wn=t;break}wn=n.return}}function k_(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:aa(t,r),o&4&&Gl(5,r);break;case 1:if(aa(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(T){Ct(r,r.return,T)}else{var f=Pr(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(f,n,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ct(r,r.return,T)}}o&64&&R_(r),o&512&&Xl(r,r.return);break;case 3:if(aa(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{_g(t,n)}catch(T){Ct(r,r.return,T)}}break;case 27:n===null&&o&4&&I_(r);case 26:case 5:aa(t,r),n===null&&o&4&&x_(r),o&512&&Xl(r,r.return);break;case 12:aa(t,r);break;case 31:aa(t,r),o&4&&M_(t,r);break;case 13:aa(t,r),o&4&&V_(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=S1.bind(null,r),H1(t,r))));break;case 22:if(o=r.memoizedState!==null||ia,!o){n=n!==null&&n.memoizedState!==null||fn,f=ia;var h=fn;ia=o,(fn=n)&&!h?ra(t,r,(r.subtreeFlags&8772)!==0):aa(t,r),ia=f,fn=h}break;case 30:break;default:aa(t,r)}}function j_(t){var n=t.alternate;n!==null&&(t.alternate=null,j_(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ra(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ft=null,pi=!1;function sa(t,n,r){for(r=r.child;r!==null;)L_(t,n,r),r=r.sibling}function L_(t,n,r){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(bi,r)}catch{}switch(r.tag){case 26:fn||xs(r,n),sa(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:fn||xs(r,n);var o=Ft,f=pi;$a(r.type)&&(Ft=r.stateNode,pi=!1),sa(t,n,r),tu(r.stateNode),Ft=o,pi=f;break;case 5:fn||xs(r,n);case 6:if(o=Ft,f=pi,Ft=null,sa(t,n,r),Ft=o,pi=f,Ft!==null)if(pi)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(r.stateNode)}catch(h){Ct(r,n,h)}else try{Ft.removeChild(r.stateNode)}catch(h){Ct(r,n,h)}break;case 18:Ft!==null&&(pi?(t=Ft,Ry(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Wo(t)):Ry(Ft,r.stateNode));break;case 4:o=Ft,f=pi,Ft=r.stateNode.containerInfo,pi=!0,sa(t,n,r),Ft=o,pi=f;break;case 0:case 11:case 14:case 15:Pa(2,r,n),fn||Pa(4,r,n),sa(t,n,r);break;case 1:fn||(xs(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&C_(r,n,o)),sa(t,n,r);break;case 21:sa(t,n,r);break;case 22:fn=(o=fn)||r.memoizedState!==null,sa(t,n,r),fn=o;break;default:sa(t,n,r)}}function M_(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Wo(t)}catch(r){Ct(n,n.return,r)}}}function V_(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wo(t)}catch(r){Ct(n,n.return,r)}}function p1(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new O_),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new O_),n;default:throw Error(a(435,t.tag))}}function hc(t,n){var r=p1(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var f=w1.bind(null,t,o);o.then(f,f)}})}function gi(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var f=r[o],h=t,T=n,A=T;e:for(;A!==null;){switch(A.tag){case 27:if($a(A.type)){Ft=A.stateNode,pi=!1;break e}break;case 5:Ft=A.stateNode,pi=!1;break e;case 3:case 4:Ft=A.stateNode.containerInfo,pi=!0;break e}A=A.return}if(Ft===null)throw Error(a(160));L_(h,T,f),Ft=null,pi=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)U_(n,t),n=n.sibling}var cs=null;function U_(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gi(n,t),_i(t),o&4&&(Pa(3,t,t.return),Gl(3,t),Pa(5,t,t.return));break;case 1:gi(n,t),_i(t),o&512&&(fn||r===null||xs(r,r.return)),o&64&&ia&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var f=cs;if(gi(n,t),_i(t),o&512&&(fn||r===null||xs(r,r.return)),o&4){var h=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Jn]||h[at]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(o),f.head.insertBefore(h,f.querySelector("head > title"))),jn(h,o,r),h[at]=t,Yt(h),o=h;break e;case"link":var T=Uy("link","href",f).get(o+(r.href||""));if(T){for(var A=0;A<T.length;A++)if(h=T[A],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(A,1);break t}}h=f.createElement(o),jn(h,o,r),f.head.appendChild(h);break;case"meta":if(T=Uy("meta","content",f).get(o+(r.content||""))){for(A=0;A<T.length;A++)if(h=T[A],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(A,1);break t}}h=f.createElement(o),jn(h,o,r),f.head.appendChild(h);break;default:throw Error(a(468,o))}h[at]=t,Yt(h),o=h}t.stateNode=o}else By(f,t.type,t.stateNode);else t.stateNode=Vy(f,o,t.memoizedProps);else h!==o?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,o===null?By(f,t.type,t.stateNode):Vy(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Jd(t,t.memoizedProps,r.memoizedProps)}break;case 27:gi(n,t),_i(t),o&512&&(fn||r===null||xs(r,r.return)),r!==null&&o&4&&Jd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(gi(n,t),_i(t),o&512&&(fn||r===null||xs(r,r.return)),t.flags&32){f=t.stateNode;try{vn(f,"")}catch(Re){Ct(t,t.return,Re)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,Jd(t,f,r!==null?r.memoizedProps:f)),o&1024&&(nh=!0);break;case 6:if(gi(n,t),_i(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Re){Ct(t,t.return,Re)}}break;case 3:if(xc=null,f=cs,cs=Rc(n.containerInfo),gi(n,t),cs=f,_i(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Wo(n.containerInfo)}catch(Re){Ct(t,t.return,Re)}nh&&(nh=!1,B_(t));break;case 4:o=cs,cs=Rc(t.stateNode.containerInfo),gi(n,t),_i(t),cs=o;break;case 12:gi(n,t),_i(t);break;case 31:gi(n,t),_i(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 13:gi(n,t),_i(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(pc=Nn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 22:f=t.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,K=ia,ae=fn;if(ia=K||f,fn=ae||L,gi(n,t),fn=ae,ia=K,_i(t),o&8192)e:for(n=t.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(r===null||L||ia||fn||Hr(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){L=r=n;try{if(h=L.stateNode,f)T=h.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=L.stateNode;var ce=L.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Re){Ct(L,L.return,Re)}}}else if(n.tag===6){if(r===null){L=n;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Re){Ct(L,L.return,Re)}}}else if(n.tag===18){if(r===null){L=n;try{var ie=L.stateNode;f?Cy(ie,!0):Cy(L.stateNode,!1)}catch(Re){Ct(L,L.return,Re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,hc(t,r))));break;case 19:gi(n,t),_i(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 30:break;case 21:break;default:gi(n,t),_i(t)}}function _i(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(D_(o)){r=o;break}o=o.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,h=eh(t);dc(t,h,f);break;case 5:var T=r.stateNode;r.flags&32&&(vn(T,""),r.flags&=-33);var A=eh(t);dc(t,A,T);break;case 3:case 4:var L=r.stateNode.containerInfo,K=eh(t);th(t,K,L);break;default:throw Error(a(161))}}catch(ae){Ct(t,t.return,ae)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function B_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;B_(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function aa(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)k_(t,n.alternate,n),n=n.sibling}function Hr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Pa(4,n,n.return),Hr(n);break;case 1:xs(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&C_(n,n.return,r),Hr(n);break;case 27:tu(n.stateNode);case 26:case 5:xs(n,n.return),Hr(n);break;case 22:n.memoizedState===null&&Hr(n);break;case 30:Hr(n);break;default:Hr(n)}t=t.sibling}}function ra(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,f=t,h=n,T=h.flags;switch(h.tag){case 0:case 11:case 15:ra(f,h,r),Gl(4,h);break;case 1:if(ra(f,h,r),o=h,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){Ct(o,o.return,K)}if(o=h,f=o.updateQueue,f!==null){var A=o.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)gg(L[f],A)}catch(K){Ct(o,o.return,K)}}r&&T&64&&R_(h),Xl(h,h.return);break;case 27:I_(h);case 26:case 5:ra(f,h,r),r&&o===null&&T&4&&x_(h),Xl(h,h.return);break;case 12:ra(f,h,r);break;case 31:ra(f,h,r),r&&T&4&&M_(f,h);break;case 13:ra(f,h,r),r&&T&4&&V_(f,h);break;case 22:h.memoizedState===null&&ra(f,h,r),Xl(h,h.return);break;case 30:break;default:ra(f,h,r)}n=n.sibling}}function ih(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Ol(r))}function sh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ol(t))}function fs(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)q_(t,n,r,o),n=n.sibling}function q_(t,n,r,o){var f=n.flags;switch(n.tag){case 0:case 11:case 15:fs(t,n,r,o),f&2048&&Gl(9,n);break;case 1:fs(t,n,r,o);break;case 3:fs(t,n,r,o),f&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ol(t)));break;case 12:if(f&2048){fs(t,n,r,o),t=n.stateNode;try{var h=n.memoizedProps,T=h.id,A=h.onPostCommit;typeof A=="function"&&A(T,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){Ct(n,n.return,L)}}else fs(t,n,r,o);break;case 31:fs(t,n,r,o);break;case 13:fs(t,n,r,o);break;case 23:break;case 22:h=n.stateNode,T=n.alternate,n.memoizedState!==null?h._visibility&2?fs(t,n,r,o):Yl(t,n):h._visibility&2?fs(t,n,r,o):(h._visibility|=2,qo(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),f&2048&&ih(T,n);break;case 24:fs(t,n,r,o),f&2048&&sh(n.alternate,n);break;default:fs(t,n,r,o)}}function qo(t,n,r,o,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=t,T=n,A=r,L=o,K=T.flags;switch(T.tag){case 0:case 11:case 15:qo(h,T,A,L,f),Gl(8,T);break;case 23:break;case 22:var ae=T.stateNode;T.memoizedState!==null?ae._visibility&2?qo(h,T,A,L,f):Yl(h,T):(ae._visibility|=2,qo(h,T,A,L,f)),f&&K&2048&&ih(T.alternate,T);break;case 24:qo(h,T,A,L,f),f&&K&2048&&sh(T.alternate,T);break;default:qo(h,T,A,L,f)}n=n.sibling}}function Yl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,f=o.flags;switch(o.tag){case 22:Yl(r,o),f&2048&&ih(o.alternate,o);break;case 24:Yl(r,o),f&2048&&sh(o.alternate,o);break;default:Yl(r,o)}n=n.sibling}}var Ql=8192;function zo(t,n,r){if(t.subtreeFlags&Ql)for(t=t.child;t!==null;)z_(t,n,r),t=t.sibling}function z_(t,n,r){switch(t.tag){case 26:zo(t,n,r),t.flags&Ql&&t.memoizedState!==null&&tS(r,cs,t.memoizedState,t.memoizedProps);break;case 5:zo(t,n,r);break;case 3:case 4:var o=cs;cs=Rc(t.stateNode.containerInfo),zo(t,n,r),cs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ql,Ql=16777216,zo(t,n,r),Ql=o):zo(t,n,r));break;default:zo(t,n,r)}}function P_(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function $l(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];wn=o,F_(o,t)}P_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)H_(t),t=t.sibling}function H_(t){switch(t.tag){case 0:case 11:case 15:$l(t),t.flags&2048&&Pa(9,t,t.return);break;case 3:$l(t);break;case 12:$l(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,mc(t)):$l(t);break;default:$l(t)}}function mc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];wn=o,F_(o,t)}P_(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Pa(8,n,n.return),mc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,mc(n));break;default:mc(n)}t=t.sibling}}function F_(t,n){for(;wn!==null;){var r=wn;switch(r.tag){case 0:case 11:case 15:Pa(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ol(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,wn=o;else e:for(r=t;wn!==null;){o=wn;var f=o.sibling,h=o.return;if(j_(o),o===r){wn=null;break e}if(f!==null){f.return=h,wn=f;break e}wn=h}}}var g1={getCacheForType:function(t){var n=On(ln),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return On(ln).controller.signal}},_1=typeof WeakMap=="function"?WeakMap:Map,vt=0,Mt=null,nt=null,ot=0,Rt=0,ki=null,Ha=!1,Po=!1,ah=!1,oa=0,Jt=0,Fa=0,Fr=0,rh=0,ji=0,Ho=0,Kl=null,yi=null,oh=!1,pc=0,G_=0,gc=1/0,_c=null,Ga=null,gn=0,Xa=null,Fo=null,la=0,lh=0,uh=null,X_=null,Wl=0,ch=null;function Li(){return(vt&2)!==0&&ot!==0?ot&-ot:P.T!==null?gh():vr()}function Y_(){if(ji===0)if((ot&536870912)===0||ft){var t=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),ji=t}else ji=536870912;return t=Ii.current,t!==null&&(t.flags|=32),ji}function vi(t,n,r){(t===Mt&&(Rt===2||Rt===9)||t.cancelPendingCommit!==null)&&(Go(t,0),Ya(t,ot,ji,!1)),as(t,r),((vt&2)===0||t!==Mt)&&(t===Mt&&((vt&2)===0&&(Fr|=r),Jt===4&&Ya(t,ot,ji,!1)),Ds(t))}function Q_(t,n,r){if((vt&6)!==0)throw Error(a(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Ai(t,n),f=o?E1(t,n):dh(t,n,!0),h=o;do{if(f===0){Po&&!o&&Ya(t,n,0,!1);break}else{if(r=t.current.alternate,h&&!y1(r)){f=dh(t,n,!1),h=!1;continue}if(f===2){if(h=n,t.errorRecoveryDisabledLanes&h)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var A=t;f=Kl;var L=A.current.memoizedState.isDehydrated;if(L&&(Go(A,T).flags|=256),T=dh(A,T,!1),T!==2){if(ah&&!L){A.errorRecoveryDisabledLanes|=h,Fr|=h,f=4;break e}h=yi,yi=f,h!==null&&(yi===null?yi=h:yi.push.apply(yi,h))}f=T}if(h=!1,f!==2)continue}}if(f===1){Go(t,0),Ya(t,n,0,!0);break}e:{switch(o=t,h=f,h){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Ya(o,n,ji,!Ha);break e;case 2:yi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(f=pc+300-Nn(),10<f)){if(Ya(o,n,ji,!Ha),pe(o,0,!0)!==0)break e;la=n,o.timeoutHandle=Ay($_.bind(null,o,r,yi,_c,oh,n,ji,Fr,Ho,Ha,h,"Throttled",-0,0),f);break e}$_(o,r,yi,_c,oh,n,ji,Fr,Ho,Ha,h,null,-0,0)}}break}while(!0);Ds(t)}function $_(t,n,r,o,f,h,T,A,L,K,ae,ce,Z,ie){if(t.timeoutHandle=-1,ce=n.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},z_(n,h,ce);var Re=(h&62914560)===h?pc-Nn():(h&4194048)===h?G_-Nn():0;if(Re=nS(ce,Re),Re!==null){la=h,t.cancelPendingCommit=Re(iy.bind(null,t,n,h,r,o,f,T,A,L,ae,ce,null,Z,ie)),Ya(t,h,T,!K);return}}iy(t,n,h,r,o,f,T,A,L)}function y1(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var f=r[o],h=f.getSnapshot;f=f.value;try{if(!xi(h(),f))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ya(t,n,r,o){n&=~rh,n&=~Fr,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var f=n;0<f;){var h=31-Ut(f),T=1<<h;o[h]=-1,f&=~T}r!==0&&Zn(t,r,n)}function yc(){return(vt&6)===0?(Zl(0),!1):!0}function fh(){if(nt!==null){if(Rt===0)var t=nt.return;else t=nt,Ws=Lr=null,Rd(t),Lo=null,jl=0,t=nt;for(;t!==null;)N_(t.alternate,t),t=t.return;nt=null}}function Go(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,U1(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),la=0,fh(),Mt=t,nt=r=$s(t.current,null),ot=n,Rt=0,ki=null,Ha=!1,Po=Ai(t,n),ah=!1,Ho=ji=rh=Fr=Fa=Jt=0,yi=Kl=null,oh=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var f=31-Ut(o),h=1<<f;n|=t[f],o&=~h}return oa=n,Bu(),r}function K_(t,n){Ze=null,P.H=Pl,n===jo||n===Yu?(n=dg(),Rt=3):n===pd?(n=dg(),Rt=4):Rt=n===Hd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ki=n,nt===null&&(Jt=1,oc(t,Xi(n,t.current)))}function W_(){var t=Ii.current;return t===null?!0:(ot&4194048)===ot?Ki===null:(ot&62914560)===ot||(ot&536870912)!==0?t===Ki:!1}function Z_(){var t=P.H;return P.H=Pl,t===null?Pl:t}function J_(){var t=P.A;return P.A=g1,t}function vc(){Jt=4,Ha||(ot&4194048)!==ot&&Ii.current!==null||(Po=!0),(Fa&134217727)===0&&(Fr&134217727)===0||Mt===null||Ya(Mt,ot,ji,!1)}function dh(t,n,r){var o=vt;vt|=2;var f=Z_(),h=J_();(Mt!==t||ot!==n)&&(_c=null,Go(t,n)),n=!1;var T=Jt;e:do try{if(Rt!==0&&nt!==null){var A=nt,L=ki;switch(Rt){case 8:fh(),T=6;break e;case 3:case 2:case 9:case 6:Ii.current===null&&(n=!0);var K=Rt;if(Rt=0,ki=null,Xo(t,A,L,K),r&&Po){T=0;break e}break;default:K=Rt,Rt=0,ki=null,Xo(t,A,L,K)}}v1(),T=Jt;break}catch(ae){K_(t,ae)}while(!0);return n&&t.shellSuspendCounter++,Ws=Lr=null,vt=o,P.H=f,P.A=h,nt===null&&(Mt=null,ot=0,Bu()),T}function v1(){for(;nt!==null;)ey(nt)}function E1(t,n){var r=vt;vt|=2;var o=Z_(),f=J_();Mt!==t||ot!==n?(_c=null,gc=Nn()+500,Go(t,n)):Po=Ai(t,n);e:do try{if(Rt!==0&&nt!==null){n=nt;var h=ki;t:switch(Rt){case 1:Rt=0,ki=null,Xo(t,n,h,1);break;case 2:case 9:if(cg(h)){Rt=0,ki=null,ty(n);break}n=function(){Rt!==2&&Rt!==9||Mt!==t||(Rt=7),Ds(t)},h.then(n,n);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:cg(h)?(Rt=0,ki=null,ty(n)):(Rt=0,ki=null,Xo(t,n,h,7));break;case 5:var T=null;switch(nt.tag){case 26:T=nt.memoizedState;case 5:case 27:var A=nt;if(T?qy(T):A.stateNode.complete){Rt=0,ki=null;var L=A.sibling;if(L!==null)nt=L;else{var K=A.return;K!==null?(nt=K,Ec(K)):nt=null}break t}}Rt=0,ki=null,Xo(t,n,h,5);break;case 6:Rt=0,ki=null,Xo(t,n,h,6);break;case 8:fh(),Jt=6;break e;default:throw Error(a(462))}}T1();break}catch(ae){K_(t,ae)}while(!0);return Ws=Lr=null,P.H=o,P.A=f,vt=r,nt!==null?0:(Mt=null,ot=0,Bu(),Jt)}function T1(){for(;nt!==null&&!wl();)ey(nt)}function ey(t){var n=w_(t.alternate,t,oa);t.memoizedProps=t.pendingProps,n===null?Ec(t):nt=n}function ty(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=y_(r,n,n.pendingProps,n.type,void 0,ot);break;case 11:n=y_(r,n,n.pendingProps,n.type.render,n.ref,ot);break;case 5:Rd(n);default:N_(r,n),n=nt=Jp(n,oa),n=w_(r,n,oa)}t.memoizedProps=t.pendingProps,n===null?Ec(t):nt=n}function Xo(t,n,r,o){Ws=Lr=null,Rd(n),Lo=null,jl=0;var f=n.return;try{if(u1(t,f,n,r,ot)){Jt=1,oc(t,Xi(r,t.current)),nt=null;return}}catch(h){if(f!==null)throw nt=f,h;Jt=1,oc(t,Xi(r,t.current)),nt=null;return}n.flags&32768?(ft||o===1?t=!0:Po||(ot&536870912)!==0?t=!1:(Ha=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ii.current,o!==null&&o.tag===13&&(o.flags|=16384))),ny(n,t)):Ec(n)}function Ec(t){var n=t;do{if((n.flags&32768)!==0){ny(n,Ha);return}t=n.return;var r=d1(n.alternate,n,oa);if(r!==null){nt=r;return}if(n=n.sibling,n!==null){nt=n;return}nt=n=t}while(n!==null);Jt===0&&(Jt=5)}function ny(t,n){do{var r=h1(t.alternate,t);if(r!==null){r.flags&=32767,nt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){nt=t;return}nt=t=r}while(t!==null);Jt=6,nt=null}function iy(t,n,r,o,f,h,T,A,L){t.cancelPendingCommit=null;do Tc();while(gn!==0);if((vt&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(h=n.lanes|n.childLanes,h|=ed,yr(t,r,h,T,A,L),t===Mt&&(nt=Mt=null,ot=0),Fo=n,Xa=t,la=r,lh=h,uh=f,X_=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,A1(ss,function(){return ly(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=P.T,P.T=null,f=J.p,J.p=2,T=vt,vt|=4;try{m1(t,n,r)}finally{vt=T,J.p=f,P.T=o}}gn=1,sy(),ay(),ry()}}function sy(){if(gn===1){gn=0;var t=Xa,n=Fo,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var o=J.p;J.p=2;var f=vt;vt|=4;try{U_(n,t);var h=wh,T=Fp(t.containerInfo),A=h.focusedElem,L=h.selectionRange;if(T!==A&&A&&A.ownerDocument&&Hp(A.ownerDocument.documentElement,A)){if(L!==null&&$f(A)){var K=L.start,ae=L.end;if(ae===void 0&&(ae=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(ae,A.value.length);else{var ce=A.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var ie=Z.getSelection(),Re=A.textContent.length,Ve=Math.min(L.start,Re),kt=L.end===void 0?Ve:Math.min(L.end,Re);!ie.extend&&Ve>kt&&(T=kt,kt=Ve,Ve=T);var H=Pp(A,Ve),q=Pp(A,kt);if(H&&q&&(ie.rangeCount!==1||ie.anchorNode!==H.node||ie.anchorOffset!==H.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var Q=ce.createRange();Q.setStart(H.node,H.offset),ie.removeAllRanges(),Ve>kt?(ie.addRange(Q),ie.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),ie.addRange(Q))}}}}for(ce=[],ie=A;ie=ie.parentNode;)ie.nodeType===1&&ce.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var oe=ce[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}kc=!!Sh,wh=Sh=null}finally{vt=f,J.p=o,P.T=r}}t.current=n,gn=2}}function ay(){if(gn===2){gn=0;var t=Xa,n=Fo,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var o=J.p;J.p=2;var f=vt;vt|=4;try{k_(t,n.alternate,n)}finally{vt=f,J.p=o,P.T=r}}gn=3}}function ry(){if(gn===4||gn===3){gn=0,pr();var t=Xa,n=Fo,r=la,o=X_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?gn=5:(gn=0,Fo=Xa=null,oy(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ga=null),zn(r),n=n.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(bi,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=P.T,f=J.p,J.p=2,P.T=null;try{for(var h=t.onRecoverableError,T=0;T<o.length;T++){var A=o[T];h(A.value,{componentStack:A.stack})}}finally{P.T=n,J.p=f}}(la&3)!==0&&Tc(),Ds(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===ch?Wl++:(Wl=0,ch=t):Wl=0,Zl(0)}}function oy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ol(n)))}function Tc(){return sy(),ay(),ry(),ly()}function ly(){if(gn!==5)return!1;var t=Xa,n=lh;lh=0;var r=zn(la),o=P.T,f=J.p;try{J.p=32>r?32:r,P.T=null,r=uh,uh=null;var h=Xa,T=la;if(gn=0,Fo=Xa=null,la=0,(vt&6)!==0)throw Error(a(331));var A=vt;if(vt|=4,H_(h.current),q_(h,h.current,T,r),vt=A,Zl(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(bi,h)}catch{}return!0}finally{J.p=f,P.T=o,oy(t,n)}}function uy(t,n,r){n=Xi(r,n),n=Pd(t.stateNode,n,2),t=Ba(t,n,2),t!==null&&(as(t,2),Ds(t))}function Ct(t,n,r){if(t.tag===3)uy(t,t,r);else for(;n!==null;){if(n.tag===3){uy(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ga===null||!Ga.has(o))){t=Xi(r,t),r=c_(2),o=Ba(n,r,2),o!==null&&(f_(r,o,n,t),as(o,2),Ds(o));break}}n=n.return}}function hh(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new _1;var f=new Set;o.set(n,f)}else f=o.get(n),f===void 0&&(f=new Set,o.set(n,f));f.has(r)||(ah=!0,f.add(r),t=b1.bind(null,t,n,r),n.then(t,t))}function b1(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Mt===t&&(ot&r)===r&&(Jt===4||Jt===3&&(ot&62914560)===ot&&300>Nn()-pc?(vt&2)===0&&Go(t,0):rh|=r,Ho===ot&&(Ho=0)),Ds(t)}function cy(t,n){n===0&&(n=Rn()),t=Or(t,n),t!==null&&(as(t,n),Ds(t))}function S1(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),cy(t,r)}function w1(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),cy(t,r)}function A1(t,n){return Wt(t,n)}var bc=null,Yo=null,mh=!1,Sc=!1,ph=!1,Qa=0;function Ds(t){t!==Yo&&t.next===null&&(Yo===null?bc=Yo=t:Yo=Yo.next=t),Sc=!0,mh||(mh=!0,R1())}function Zl(t,n){if(!ph&&Sc){ph=!0;do for(var r=!1,o=bc;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var h=0;else{var T=o.suspendedLanes,A=o.pingedLanes;h=(1<<31-Ut(42|t)+1)-1,h&=f&~(T&~A),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,my(o,h))}else h=ot,h=pe(o,o===Mt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Ai(o,h)||(r=!0,my(o,h));o=o.next}while(r);ph=!1}}function N1(){fy()}function fy(){Sc=mh=!1;var t=0;Qa!==0&&V1()&&(t=Qa);for(var n=Nn(),r=null,o=bc;o!==null;){var f=o.next,h=dy(o,n);h===0?(o.next=null,r===null?bc=f:r.next=f,f===null&&(Yo=r)):(r=o,(t!==0||(h&3)!==0)&&(Sc=!0)),o=f}gn!==0&&gn!==5||Zl(t),Qa!==0&&(Qa=0)}function dy(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var T=31-Ut(h),A=1<<T,L=f[T];L===-1?((A&r)===0||(A&o)!==0)&&(f[T]=Al(A,n)):L<=n&&(t.expiredLanes|=A),h&=~A}if(n=Mt,r=ot,r=pe(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(Rt===2||Rt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Ti(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Ai(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&Ti(o),zn(r)){case 2:case 8:r=Kn;break;case 32:r=ss;break;case 268435456:r=gr;break;default:r=ss}return o=hy.bind(null,t),r=Wt(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&Ti(o),t.callbackPriority=2,t.callbackNode=null,2}function hy(t,n){if(gn!==0&&gn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Tc()&&t.callbackNode!==r)return null;var o=ot;return o=pe(t,t===Mt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Q_(t,o,n),dy(t,Nn()),t.callbackNode!=null&&t.callbackNode===r?hy.bind(null,t):null)}function my(t,n){if(Tc())return null;Q_(t,n,!0)}function R1(){B1(function(){(vt&6)!==0?Wt(is,N1):fy()})}function gh(){if(Qa===0){var t=Oo;t===0&&(t=pn,pn<<=1,(pn&261888)===0&&(pn=256)),Qa=t}return Qa}function py(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ni(""+t)}function gy(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function C1(t,n,r,o,f){if(n==="submit"&&r&&r.stateNode===f){var h=py((f[en]||null).action),T=o.submitter;T&&(n=(n=T[en]||null)?py(n.formAction):T.getAttribute("formAction"),n!==null&&(h=n,T=null));var A=new gt("action","action",null,o,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Qa!==0){var L=T?gy(f,T):new FormData(f);Md(r,{pending:!0,data:L,method:f.method,action:h},null,L)}}else typeof h=="function"&&(A.preventDefault(),L=T?gy(f,T):new FormData(f),Md(r,{pending:!0,data:L,method:f.method,action:h},h,L))},currentTarget:f}]})}}for(var _h=0;_h<Jf.length;_h++){var yh=Jf[_h],x1=yh.toLowerCase(),D1=yh[0].toUpperCase()+yh.slice(1);us(x1,"on"+D1)}us(Yp,"onAnimationEnd"),us(Qp,"onAnimationIteration"),us($p,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(Xb,"onTransitionRun"),us(Yb,"onTransitionStart"),us(Qb,"onTransitionCancel"),us(Kp,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function _y(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],f=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var T=o.length-1;0<=T;T--){var A=o[T],L=A.instance,K=A.currentTarget;if(A=A.listener,L!==h&&f.isPropagationStopped())break e;h=A,f.currentTarget=K;try{h(f)}catch(ae){Uu(ae)}f.currentTarget=null,h=L}else for(T=0;T<o.length;T++){if(A=o[T],L=A.instance,K=A.currentTarget,A=A.listener,L!==h&&f.isPropagationStopped())break e;h=A,f.currentTarget=K;try{h(f)}catch(ae){Uu(ae)}f.currentTarget=null,h=L}}}}function it(t,n){var r=n[vs];r===void 0&&(r=n[vs]=new Set);var o=t+"__bubble";r.has(o)||(yy(n,t,2,!1),r.add(o))}function vh(t,n,r){var o=0;n&&(o|=4),yy(r,t,o,n)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Eh(t){if(!t[wc]){t[wc]=!0,rs.forEach(function(r){r!=="selectionchange"&&(I1.has(r)||vh(r,!1,t),vh(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[wc]||(n[wc]=!0,vh("selectionchange",!1,n))}}function yy(t,n,r,o){switch(Yy(n)){case 2:var f=aS;break;case 8:f=rS;break;default:f=Lh}r=f.bind(null,n,r,t),f=void 0,!os||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(n,r,{capture:!0,passive:f}):t.addEventListener(n,r,!0):f!==void 0?t.addEventListener(n,r,{passive:f}):t.addEventListener(n,r,!1)}function Th(t,n,r,o,f){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var T=o.tag;if(T===3||T===4){var A=o.stateNode.containerInfo;if(A===f)break;if(T===4)for(T=o.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;A!==null;){if(T=tn(A),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){o=h=T;continue e}A=A.parentNode}}o=o.return}hi(function(){var K=h,ae=be(r),ce=[];e:{var Z=Wp.get(t);if(Z!==void 0){var ie=gt,Re=t;switch(t){case"keypress":if(X(r)===0)break e;case"keydown":case"keyup":ie=To;break;case"focusin":Re="focus",ie=Qs;break;case"focusout":Re="blur",ie=Qs;break;case"beforeblur":case"afterblur":ie=Qs;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=v;break;case Yp:case Qp:case $p:ie=po;break;case Kp:ie=R;break;case"scroll":case"scrollend":ie=Ia;break;case"wheel":ie=te;break;case"copy":case"cut":case"paste":ie=Cr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ls;break;case"toggle":case"beforetoggle":ie=He}var Ve=(n&4)!==0,kt=!Ve&&(t==="scroll"||t==="scrollend"),H=Ve?Z!==null?Z+"Capture":null:Z;Ve=[];for(var q=K,Q;q!==null;){var oe=q;if(Q=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Q===null||H===null||(oe=on(q,H),oe!=null&&Ve.push(eu(q,oe,Q))),kt)break;q=q.return}0<Ve.length&&(Z=new ie(Z,Re,null,r,ae),ce.push({event:Z,listeners:Ve}))}}if((n&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",Z&&r!==Ar&&(Re=r.relatedTarget||r.fromElement)&&(tn(Re)||Re[Mi]))break e;if((ie||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,ie?(Re=r.relatedTarget||r.toElement,ie=K,Re=Re?tn(Re):null,Re!==null&&(kt=u(Re),Ve=Re.tag,Re!==kt||Ve!==5&&Ve!==27&&Ve!==6)&&(Re=null)):(ie=null,Re=K),ie!==Re)){if(Ve=Nr,oe="onMouseLeave",H="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=ls,oe="onPointerLeave",H="onPointerEnter",q="pointer"),kt=ie==null?Z:xn(ie),Q=Re==null?Z:xn(Re),Z=new Ve(oe,q+"leave",ie,r,ae),Z.target=kt,Z.relatedTarget=Q,oe=null,tn(ae)===K&&(Ve=new Ve(H,q+"enter",Re,r,ae),Ve.target=Q,Ve.relatedTarget=kt,oe=Ve),kt=oe,ie&&Re)t:{for(Ve=O1,H=ie,q=Re,Q=0,oe=H;oe;oe=Ve(oe))Q++;oe=0;for(var je=q;je;je=Ve(je))oe++;for(;0<Q-oe;)H=Ve(H),Q--;for(;0<oe-Q;)q=Ve(q),oe--;for(;Q--;){if(H===q||q!==null&&H===q.alternate){Ve=H;break t}H=Ve(H),q=Ve(q)}Ve=null}else Ve=null;ie!==null&&vy(ce,Z,ie,Ve,!1),Re!==null&&kt!==null&&vy(ce,kt,Re,Ve,!0)}}e:{if(Z=K?xn(K):window,ie=Z.nodeName&&Z.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Z.type==="file")var _t=Mp;else if(So(Z))if(Vp)_t=Hb;else{_t=zb;var Ie=qb}else ie=Z.nodeName,!ie||ie.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?K&&di(K.elementType)&&(_t=Mp):_t=Pb;if(_t&&(_t=_t(t,K))){Ns(ce,_t,r,ae);break e}Ie&&Ie(t,Z,K),t==="focusout"&&K&&Z.type==="number"&&K.memoizedProps.value!=null&&Sr(Z,"number",Z.value)}switch(Ie=K?xn(K):window,t){case"focusin":(So(Ie)||Ie.contentEditable==="true")&&(wo=Ie,Kf=K,xl=null);break;case"focusout":xl=Kf=wo=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,Gp(ce,r,ae);break;case"selectionchange":if(Gb)break;case"keydown":case"keyup":Gp(ce,r,ae)}var et;if(ht)e:{switch(t){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Sn?Me(t,r)&&(lt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(lt="onCompositionStart");lt&&(ue&&r.locale!=="ko"&&(Sn||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Sn&&(et=M()):(_=ae,S="value"in _?_.value:_.textContent,Sn=!0)),Ie=Ac(K,lt),0<Ie.length&&(lt=new Fi(lt,t,null,r,ae),ce.push({event:lt,listeners:Ie}),et?lt.data=et:(et=rt(r),et!==null&&(lt.data=et)))),(et=F?mi(t,r):si(t,r))&&(lt=Ac(K,"onBeforeInput"),0<lt.length&&(Ie=new Fi("onBeforeInput","beforeinput",null,r,ae),ce.push({event:Ie,listeners:lt}),Ie.data=et)),C1(ce,t,K,r,ae)}_y(ce,n)})}function eu(t,n,r){return{instance:t,listener:n,currentTarget:r}}function Ac(t,n){for(var r=n+"Capture",o=[];t!==null;){var f=t,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=on(t,r),f!=null&&o.unshift(eu(t,f,h)),f=on(t,n),f!=null&&o.push(eu(t,f,h))),t.tag===3)return o;t=t.return}return[]}function O1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function vy(t,n,r,o,f){for(var h=n._reactName,T=[];r!==null&&r!==o;){var A=r,L=A.alternate,K=A.stateNode;if(A=A.tag,L!==null&&L===o)break;A!==5&&A!==26&&A!==27||K===null||(L=K,f?(K=on(r,h),K!=null&&T.unshift(eu(r,K,L))):f||(K=on(r,h),K!=null&&T.push(eu(r,K,L)))),r=r.return}T.length!==0&&t.push({event:n,listeners:T})}var k1=/\r\n?/g,j1=/\u0000|\uFFFD/g;function Ey(t){return(typeof t=="string"?t:""+t).replace(k1,`
`).replace(j1,"")}function Ty(t,n){return n=Ey(n),Ey(t)===n}function Ot(t,n,r,o,f,h){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||vn(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&vn(t,""+o);break;case"className":ti(t,"class",o);break;case"tabIndex":ti(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(t,r,o);break;case"style":bs(t,o,h);break;case"data":if(n!=="object"){ti(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=ni(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(n!=="input"&&Ot(t,n,"name",f.name,f,null),Ot(t,n,"formEncType",f.formEncType,f,null),Ot(t,n,"formMethod",f.formMethod,f,null),Ot(t,n,"formTarget",f.formTarget,f,null)):(Ot(t,n,"encType",f.encType,f,null),Ot(t,n,"method",f.method,f,null),Ot(t,n,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=ni(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Dn);break;case"onScroll":o!=null&&it("scroll",t);break;case"onScrollEnd":o!=null&&it("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=ni(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":it("beforetoggle",t),it("toggle",t),Ps(t,"popover",o);break;case"xlinkActuate":Nt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Nt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Nt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Nt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Nt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Nt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ps(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Da.get(r)||r,Ps(t,r,o))}}function bh(t,n,r,o,f,h){switch(r){case"style":bs(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof o=="string"?vn(t,o):(typeof o=="number"||typeof o=="bigint")&&vn(t,""+o);break;case"onScroll":o!=null&&it("scroll",t);break;case"onScrollEnd":o!=null&&it("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),n=r.slice(2,f?r.length-7:void 0),h=t[en]||null,h=h!=null?h[r]:null,typeof h=="function"&&t.removeEventListener(n,h,f),typeof o=="function")){typeof h!="function"&&h!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,f);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):Ps(t,r,o)}}}function jn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",t),it("load",t);var o=!1,f=!1,h;for(h in r)if(r.hasOwnProperty(h)){var T=r[h];if(T!=null)switch(h){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ot(t,n,h,T,r,null)}}f&&Ot(t,n,"srcSet",r.srcSet,r,null),o&&Ot(t,n,"src",r.src,r,null);return;case"input":it("invalid",t);var A=h=T=f=null,L=null,K=null;for(o in r)if(r.hasOwnProperty(o)){var ae=r[o];if(ae!=null)switch(o){case"name":f=ae;break;case"type":T=ae;break;case"checked":L=ae;break;case"defaultChecked":K=ae;break;case"value":h=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,n));break;default:Ot(t,n,o,ae,r,null)}}br(t,h,A,L,K,T,f,!1);return;case"select":it("invalid",t),o=T=h=null;for(f in r)if(r.hasOwnProperty(f)&&(A=r[f],A!=null))switch(f){case"value":h=A;break;case"defaultValue":T=A;break;case"multiple":o=A;default:Ot(t,n,f,A,r,null)}n=h,r=T,t.multiple=!!o,n!=null?qi(t,!!o,n,!1):r!=null&&qi(t,!!o,r,!0);return;case"textarea":it("invalid",t),h=f=o=null;for(T in r)if(r.hasOwnProperty(T)&&(A=r[T],A!=null))switch(T){case"value":o=A;break;case"defaultValue":f=A;break;case"children":h=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Ot(t,n,T,A,r,null)}zi(t,o,f,h);return;case"option":for(L in r)r.hasOwnProperty(L)&&(o=r[L],o!=null)&&(L==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":Ot(t,n,L,o,r,null));return;case"dialog":it("beforetoggle",t),it("toggle",t),it("cancel",t),it("close",t);break;case"iframe":case"object":it("load",t);break;case"video":case"audio":for(o=0;o<Jl.length;o++)it(Jl[o],t);break;case"image":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"embed":case"source":case"link":it("error",t),it("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(o=r[K],o!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ot(t,n,K,o,r,null)}return;default:if(di(n)){for(ae in r)r.hasOwnProperty(ae)&&(o=r[ae],o!==void 0&&bh(t,n,ae,o,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(o=r[A],o!=null&&Ot(t,n,A,o,r,null))}function L1(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,T=null,A=null,L=null,K=null,ae=null;for(ie in r){var ce=r[ie];if(r.hasOwnProperty(ie)&&ce!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":L=ce;default:o.hasOwnProperty(ie)||Ot(t,n,ie,null,o,ce)}}for(var Z in o){var ie=o[Z];if(ce=r[Z],o.hasOwnProperty(Z)&&(ie!=null||ce!=null))switch(Z){case"type":h=ie;break;case"name":f=ie;break;case"checked":K=ie;break;case"defaultChecked":ae=ie;break;case"value":T=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,n));break;default:ie!==ce&&Ot(t,n,Z,ie,o,ce)}}Bi(t,T,A,L,K,ae,h,f);return;case"select":ie=T=A=Z=null;for(h in r)if(L=r[h],r.hasOwnProperty(h)&&L!=null)switch(h){case"value":break;case"multiple":ie=L;default:o.hasOwnProperty(h)||Ot(t,n,h,null,o,L)}for(f in o)if(h=o[f],L=r[f],o.hasOwnProperty(f)&&(h!=null||L!=null))switch(f){case"value":Z=h;break;case"defaultValue":A=h;break;case"multiple":T=h;default:h!==L&&Ot(t,n,f,h,o,L)}n=A,r=T,o=ie,Z!=null?qi(t,!!r,Z,!1):!!o!=!!r&&(n!=null?qi(t,!!r,n,!0):qi(t,!!r,r?[]:"",!1));return;case"textarea":ie=Z=null;for(A in r)if(f=r[A],r.hasOwnProperty(A)&&f!=null&&!o.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ot(t,n,A,null,o,f)}for(T in o)if(f=o[T],h=r[T],o.hasOwnProperty(T)&&(f!=null||h!=null))switch(T){case"value":Z=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==h&&Ot(t,n,T,f,o,h)}wr(t,Z,ie);return;case"option":for(var Re in r)Z=r[Re],r.hasOwnProperty(Re)&&Z!=null&&!o.hasOwnProperty(Re)&&(Re==="selected"?t.selected=!1:Ot(t,n,Re,null,o,Z));for(L in o)Z=o[L],ie=r[L],o.hasOwnProperty(L)&&Z!==ie&&(Z!=null||ie!=null)&&(L==="selected"?t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":Ot(t,n,L,Z,o,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in r)Z=r[Ve],r.hasOwnProperty(Ve)&&Z!=null&&!o.hasOwnProperty(Ve)&&Ot(t,n,Ve,null,o,Z);for(K in o)if(Z=o[K],ie=r[K],o.hasOwnProperty(K)&&Z!==ie&&(Z!=null||ie!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,n));break;default:Ot(t,n,K,Z,o,ie)}return;default:if(di(n)){for(var kt in r)Z=r[kt],r.hasOwnProperty(kt)&&Z!==void 0&&!o.hasOwnProperty(kt)&&bh(t,n,kt,void 0,o,Z);for(ae in o)Z=o[ae],ie=r[ae],!o.hasOwnProperty(ae)||Z===ie||Z===void 0&&ie===void 0||bh(t,n,ae,Z,o,ie);return}}for(var H in r)Z=r[H],r.hasOwnProperty(H)&&Z!=null&&!o.hasOwnProperty(H)&&Ot(t,n,H,null,o,Z);for(ce in o)Z=o[ce],ie=r[ce],!o.hasOwnProperty(ce)||Z===ie||Z==null&&ie==null||Ot(t,n,ce,Z,o,ie)}function by(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var f=r[o],h=f.transferSize,T=f.initiatorType,A=f.duration;if(h&&A&&by(T)){for(T=0,A=f.responseEnd,o+=1;o<r.length;o++){var L=r[o],K=L.startTime;if(K>A)break;var ae=L.transferSize,ce=L.initiatorType;ae&&by(ce)&&(L=L.responseEnd,T+=ae*(L<A?1:(A-K)/(L-K)))}if(--o,n+=8*(h+T)/(f.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Sh=null,wh=null;function Nc(t){return t.nodeType===9?t:t.ownerDocument}function Sy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ah(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Nh=null;function V1(){var t=window.event;return t&&t.type==="popstate"?t===Nh?!1:(Nh=t,!0):(Nh=null,!1)}var Ay=typeof setTimeout=="function"?setTimeout:void 0,U1=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(t){return Ny.resolve(null).then(t).catch(q1)}:Ay;function q1(t){setTimeout(function(){throw t})}function $a(t){return t==="head"}function Ry(t,n){var r=n,o=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(f),Wo(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")tu(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,tu(r);for(var h=r.firstChild;h;){var T=h.nextSibling,A=h.nodeName;h[Jn]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=T}}else r==="body"&&tu(t.ownerDocument.body);r=f}while(r);Wo(n)}function Cy(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Rh(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Rh(r),Ra(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function z1(t,n,r,o){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Jn])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Wi(t.nextSibling),t===null)break}return null}function P1(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Wi(t.nextSibling),t===null))return null;return t}function xy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Wi(t.nextSibling),t===null))return null;return t}function Ch(t){return t.data==="$?"||t.data==="$~"}function xh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function H1(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Wi(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Dh=null;function Dy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Wi(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function Iy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function Oy(t,n,r){switch(n=Nc(r),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function tu(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ra(t)}var Zi=new Map,ky=new Set;function Rc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ua=J.d;J.d={f:F1,r:G1,D:X1,C:Y1,L:Q1,m:$1,X:W1,S:K1,M:Z1};function F1(){var t=ua.f(),n=yc();return t||n}function G1(t){var n=Cn(t);n!==null&&n.tag===5&&n.type==="form"?Kg(n):ua.r(t)}var Qo=typeof document>"u"?null:document;function jy(t,n,r){var o=Qo;if(o&&typeof n=="string"&&n){var f=Fn(n);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),ky.has(f)||(ky.add(f),t={rel:t,crossOrigin:r,href:n},o.querySelector(f)===null&&(n=o.createElement("link"),jn(n,"link",t),Yt(n),o.head.appendChild(n)))}}function X1(t){ua.D(t),jy("dns-prefetch",t,null)}function Y1(t,n){ua.C(t,n),jy("preconnect",t,n)}function Q1(t,n,r){ua.L(t,n,r);var o=Qo;if(o&&t&&n){var f='link[rel="preload"][as="'+Fn(n)+'"]';n==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Fn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Fn(r.imageSizes)+'"]')):f+='[href="'+Fn(t)+'"]';var h=f;switch(n){case"style":h=$o(t);break;case"script":h=Ko(t)}Zi.has(h)||(t=C({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Zi.set(h,t),o.querySelector(f)!==null||n==="style"&&o.querySelector(nu(h))||n==="script"&&o.querySelector(iu(h))||(n=o.createElement("link"),jn(n,"link",t),Yt(n),o.head.appendChild(n)))}}function $1(t,n){ua.m(t,n);var r=Qo;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Fn(o)+'"][href="'+Fn(t)+'"]',h=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ko(t)}if(!Zi.has(h)&&(t=C({rel:"modulepreload",href:t},n),Zi.set(h,t),r.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(iu(h)))return}o=r.createElement("link"),jn(o,"link",t),Yt(o),r.head.appendChild(o)}}}function K1(t,n,r){ua.S(t,n,r);var o=Qo;if(o&&t){var f=Ni(o).hoistableStyles,h=$o(t);n=n||"default";var T=f.get(h);if(!T){var A={loading:0,preload:null};if(T=o.querySelector(nu(h)))A.loading=5;else{t=C({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Zi.get(h))&&Ih(t,r);var L=T=o.createElement("link");Yt(L),jn(L,"link",t),L._p=new Promise(function(K,ae){L.onload=K,L.onerror=ae}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Cc(T,n,o)}T={type:"stylesheet",instance:T,count:1,state:A},f.set(h,T)}}}function W1(t,n){ua.X(t,n);var r=Qo;if(r&&t){var o=Ni(r).hoistableScripts,f=Ko(t),h=o.get(f);h||(h=r.querySelector(iu(f)),h||(t=C({src:t,async:!0},n),(n=Zi.get(f))&&Oh(t,n),h=r.createElement("script"),Yt(h),jn(h,"link",t),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function Z1(t,n){ua.M(t,n);var r=Qo;if(r&&t){var o=Ni(r).hoistableScripts,f=Ko(t),h=o.get(f);h||(h=r.querySelector(iu(f)),h||(t=C({src:t,async:!0,type:"module"},n),(n=Zi.get(f))&&Oh(t,n),h=r.createElement("script"),Yt(h),jn(h,"link",t),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function Ly(t,n,r,o){var f=(f=Ke.current)?Rc(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=$o(r.href),r=Ni(f).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=$o(r.href);var h=Ni(f).hoistableStyles,T=h.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,T),(h=f.querySelector(nu(t)))&&!h._p&&(T.instance=h,T.state.loading=5),Zi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Zi.set(t,r),h||J1(f,t,r,T.state))),n&&o===null)throw Error(a(528,""));return T}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ko(r),r=Ni(f).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function $o(t){return'href="'+Fn(t)+'"'}function nu(t){return'link[rel="stylesheet"]['+t+"]"}function My(t){return C({},t,{"data-precedence":t.precedence,precedence:null})}function J1(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),jn(n,"link",r),Yt(n),t.head.appendChild(n))}function Ko(t){return'[src="'+Fn(t)+'"]'}function iu(t){return"script[async]"+t}function Vy(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Fn(r.href)+'"]');if(o)return n.instance=o,Yt(o),o;var f=C({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Yt(o),jn(o,"style",f),Cc(o,r.precedence,t),n.instance=o;case"stylesheet":f=$o(r.href);var h=t.querySelector(nu(f));if(h)return n.state.loading|=4,n.instance=h,Yt(h),h;o=My(r),(f=Zi.get(f))&&Ih(o,f),h=(t.ownerDocument||t).createElement("link"),Yt(h);var T=h;return T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),jn(h,"link",o),n.state.loading|=4,Cc(h,r.precedence,t),n.instance=h;case"script":return h=Ko(r.src),(f=t.querySelector(iu(h)))?(n.instance=f,Yt(f),f):(o=r,(f=Zi.get(h))&&(o=C({},r),Oh(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Yt(f),jn(f,"link",o),t.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Cc(o,r.precedence,t));return n.instance}function Cc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,h=f,T=0;T<o.length;T++){var A=o[T];if(A.dataset.precedence===n)h=A;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Ih(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Oh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var xc=null;function Uy(t,n,r){if(xc===null){var o=new Map,f=xc=new Map;f.set(r,o)}else f=xc,o=f.get(r),o||(o=new Map,f.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var h=r[f];if(!(h[Jn]||h[at]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var T=h.getAttribute(n)||"";T=t+T;var A=o.get(T);A?A.push(h):o.set(T,[h])}}return o}function By(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function eS(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(t=n.disabled,typeof n.precedence=="string"&&t==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function qy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tS(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=$o(o.href),h=n.querySelector(nu(f));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Dc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=h,Yt(h);return}h=n.ownerDocument||n,o=My(o),(f=Zi.get(f))&&Ih(o,f),h=h.createElement("link"),Yt(h);var T=h;T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),jn(h,"link",o),r.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Dc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var kh=0;function nS(t,n){return t.stylesheets&&t.count===0&&Oc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&Oc(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+n);0<t.imgBytes&&kh===0&&(kh=62500*M1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Oc(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>kh?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Dc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ic=null;function Oc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ic=new Map,n.forEach(iS,t),Ic=null,Dc.call(t))}function iS(t,n){if(!(n.state.loading&4)){var r=Ic.get(t);if(r)var o=r.get(null);else{r=new Map,Ic.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var T=f[h];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),o=T)}o&&r.set(null,o)}f=n.instance,T=f.getAttribute("data-precedence"),h=r.get(T)||o,h===o&&r.set(null,f),r.set(T,f),this.count++,o=Dc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),n.state.loading|=4}}var su={$$typeof:me,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function sS(t,n,r,o,f,h,T,A,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.hiddenUpdates=ui(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function zy(t,n,r,o,f,h,T,A,L,K,ae,ce){return t=new sS(t,n,r,T,L,K,ae,ce,A),n=1,h===!0&&(n|=24),h=Di(3,null,null,n),t.current=h,h.stateNode=t,n=dd(),n.refCount++,t.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:r,cache:n},gd(h),t}function Py(t){return t?(t=Ro,t):Ro}function Hy(t,n,r,o,f,h){f=Py(f),o.context===null?o.context=f:o.pendingContext=f,o=Ua(n),o.payload={element:r},h=h===void 0?null:h,h!==null&&(o.callback=h),r=Ba(t,o,n),r!==null&&(vi(r,t,n),Ml(r,t,n))}function Fy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function jh(t,n){Fy(t,n),(t=t.alternate)&&Fy(t,n)}function Gy(t){if(t.tag===13||t.tag===31){var n=Or(t,67108864);n!==null&&vi(n,t,67108864),jh(t,67108864)}}function Xy(t){if(t.tag===13||t.tag===31){var n=Li();n=ys(n);var r=Or(t,n);r!==null&&vi(r,t,n),jh(t,n)}}var kc=!0;function aS(t,n,r,o){var f=P.T;P.T=null;var h=J.p;try{J.p=2,Lh(t,n,r,o)}finally{J.p=h,P.T=f}}function rS(t,n,r,o){var f=P.T;P.T=null;var h=J.p;try{J.p=8,Lh(t,n,r,o)}finally{J.p=h,P.T=f}}function Lh(t,n,r,o){if(kc){var f=Mh(o);if(f===null)Th(t,n,o,jc,r),Qy(t,o);else if(lS(f,t,n,r,o))o.stopPropagation();else if(Qy(t,o),n&4&&-1<oS.indexOf(t)){for(;f!==null;){var h=Cn(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var T=wi(h.pendingLanes);if(T!==0){var A=h;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var L=1<<31-Ut(T);A.entanglements[1]|=L,T&=~L}Ds(h),(vt&6)===0&&(gc=Nn()+500,Zl(0))}}break;case 31:case 13:A=Or(h,2),A!==null&&vi(A,h,2),yc(),jh(h,2)}if(h=Mh(o),h===null&&Th(t,n,o,jc,r),h===f)break;f=h}f!==null&&o.stopPropagation()}else Th(t,n,o,null,r)}}function Mh(t){return t=be(t),Vh(t)}var jc=null;function Vh(t){if(jc=null,t=tn(t),t!==null){var n=u(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=m(n),t!==null)return t;t=null}else if(r===31){if(t=y(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return jc=t,null}function Yy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ns()){case is:return 2;case Kn:return 8;case ss:case oo:return 32;case gr:return 268435456;default:return 32}default:return 32}}var Uh=!1,Ka=null,Wa=null,Za=null,au=new Map,ru=new Map,Ja=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qy(t,n){switch(t){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":au.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(n.pointerId)}}function ou(t,n,r,o,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[f]},n!==null&&(n=Cn(n),n!==null&&Gy(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function lS(t,n,r,o,f){switch(n){case"focusin":return Ka=ou(Ka,t,n,r,o,f),!0;case"dragenter":return Wa=ou(Wa,t,n,r,o,f),!0;case"mouseover":return Za=ou(Za,t,n,r,o,f),!0;case"pointerover":var h=f.pointerId;return au.set(h,ou(au.get(h)||null,t,n,r,o,f)),!0;case"gotpointercapture":return h=f.pointerId,ru.set(h,ou(ru.get(h)||null,t,n,r,o,f)),!0}return!1}function $y(t){var n=tn(t.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=m(r),n!==null){t.blockedOn=n,ci(t.priority,function(){Xy(r)});return}}else if(n===31){if(n=y(r),n!==null){t.blockedOn=n,ci(t.priority,function(){Xy(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Mh(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Ar=o,r.target.dispatchEvent(o),Ar=null}else return n=Cn(r),n!==null&&Gy(n),t.blockedOn=r,!1;n.shift()}return!0}function Ky(t,n,r){Lc(t)&&r.delete(n)}function uS(){Uh=!1,Ka!==null&&Lc(Ka)&&(Ka=null),Wa!==null&&Lc(Wa)&&(Wa=null),Za!==null&&Lc(Za)&&(Za=null),au.forEach(Ky),ru.forEach(Ky)}function Mc(t,n){t.blockedOn===n&&(t.blockedOn=null,Uh||(Uh=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,uS)))}var Vc=null;function Wy(t){Vc!==t&&(Vc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vc===t&&(Vc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],f=t[n+2];if(typeof o!="function"){if(Vh(o||r)===null)continue;break}var h=Cn(r);h!==null&&(t.splice(n,3),n-=3,Md(h,{pending:!0,data:f,method:r.method,action:o},o,f))}}))}function Wo(t){function n(L){return Mc(L,t)}Ka!==null&&Mc(Ka,t),Wa!==null&&Mc(Wa,t),Za!==null&&Mc(Za,t),au.forEach(n),ru.forEach(n);for(var r=0;r<Ja.length;r++){var o=Ja[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ja.length&&(r=Ja[0],r.blockedOn===null);)$y(r),r.blockedOn===null&&Ja.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var f=r[o],h=r[o+1],T=f[en]||null;if(typeof h=="function")T||Wy(r);else if(T){var A=null;if(h&&h.hasAttribute("formAction")){if(f=h,T=h[en]||null)A=T.formAction;else if(Vh(f)!==null)continue}else A=T.action;typeof A=="function"?r[o+1]=A:(r.splice(o,3),o-=3),Wy(r)}}}function Zy(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Bh(t){this._internalRoot=t}Uc.prototype.render=Bh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,o=Li();Hy(r,o,t,n,null,null)},Uc.prototype.unmount=Bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Hy(t.current,2,null,t,null,null),yc(),n[Mi]=null}};function Uc(t){this._internalRoot=t}Uc.prototype.unstable_scheduleHydration=function(t){if(t){var n=vr();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Ja.length&&n!==0&&n<Ja[r].priority;r++);Ja.splice(r,0,t),r===0&&$y(t)}};var Jy=e.version;if(Jy!=="19.2.4")throw Error(a(527,Jy,"19.2.4"));J.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(n),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var cS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{bi=Bc.inject(cS),Oe=Bc}catch{}}return uu.createRoot=function(t,n){if(!l(t))throw Error(a(299));var r=!1,o="",f=r_,h=o_,T=l_;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=zy(t,1,!1,null,null,r,o,null,f,h,T,Zy),t[Mi]=n.current,Eh(t),new Bh(n)},uu.hydrateRoot=function(t,n,r){if(!l(t))throw Error(a(299));var o=!1,f="",h=r_,T=o_,A=l_,L=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(L=r.formState)),n=zy(t,1,!0,n,r??null,o,f,L,h,T,A,Zy),n.context=Py(null),r=n.current,o=Li(),o=ys(o),f=Ua(o),f.callback=null,Ba(r,f,o),r=o,n.current.lanes=r,as(n,r),Ds(n),t[Mi]=n.current,Eh(t),new Uc(n)},uu.version="19.2.4",uu}var uv;function bS(){if(uv)return Ph.exports;uv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ph.exports=TS(),Ph.exports}var SS=bS(),Xh={exports:{}};const wS={},AS=Object.freeze(Object.defineProperty({__proto__:null,default:wS},Symbol.toStringTag,{value:"Module"})),cv=hS(AS);var fv;function NS(){return fv||(fv=1,(function(s,e){var i=void 0,a=function(l){return i||(i=new Promise(function(u,m){var y=typeof l<"u"?l:{},E=y.onAbort;y.onAbort=function(d){m(new Error(d)),E&&E(d)},y.postRun=y.postRun||[],y.postRun.push(function(){u(y)}),s=void 0;var g;g||=typeof y<"u"?y:{};var w=typeof window=="object",C=typeof WorkerGlobalScope<"u",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";g.onRuntimeInitialized=function(){function d(F,ue){switch(typeof ue){case"boolean":ge(F,ue?1:0);break;case"number":b(F,ue);break;case"string":Y(F,ue,-1,-1);break;case"object":if(ue===null)R(F);else if(ue.length!=null){var Ee=bs(ue,Ts);te(F,Ee,ue.length,-1),ii(Ee)}else He(F,"Wrong API use : tried to return a value of an unknown type ("+ue+").",-1);break;default:R(F)}}function _(F,ue){for(var Ee=[],De=0;De<F;De+=1){var Me=Bn(ue+4*De,"i32"),rt=To(Me);if(rt===1||rt===2)Me=v(Me);else if(rt===3)Me=ls(Me);else if(rt===4){rt=Me,Me=bo(rt),rt=c(rt);for(var Sn=new Uint8Array(Me),mi=0;mi<Me;mi+=1)Sn[mi]=V[rt+mi];Me=Sn}else Me=null;Ee.push(Me)}return Ee}function S(F,ue){this.Qa=F,this.db=ue,this.Oa=1,this.lb=[]}function N(F,ue){if(this.db=ue,ue=is(F)+1,this.eb=Pi(ue),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Kn(F,k,this.eb,ue),this.kb=this.eb,this.Za=this.pb=null}function M(F){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),F!=null){var ue=this.filename,Ee="/",De=ue;if(Ee&&(Ee=typeof Ee=="string"?Ee:ui(Ee),De=ue?Pt(Ee+"/"+ue):Ee),ue=Wn(!0,!0),De=Ra(De,ue),F){if(typeof F=="string"){Ee=Array(F.length);for(var Me=0,rt=F.length;Me<rt;++Me)Ee[Me]=F.charCodeAt(Me);F=Ee}ei(De,ue|146),Ee=Vi(De,577),Ps(Ee,F,0,F.length,0),zs(Ee),ei(De,ue)}}this.handleError(Ne(this.filename,X)),this.db=Bn(X,"i32"),ht(this.db),this.fb={},this.Sa={}}var X=on(4),se=g.cwrap,Ne=se("sqlite3_open","number",["string","number"]),ke=se("sqlite3_close_v2","number",["number"]),Ue=se("sqlite3_exec","number",["number","string","number","number","number"]),gt=se("sqlite3_changes","number",["number"]),Qt=se("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ia=se("sqlite3_sql","string",["number"]),ws=se("sqlite3_normalized_sql","string",["number"]),Gs=se("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Hi=se("sqlite3_bind_text","number",["number","number","number","number","number"]),Xs=se("sqlite3_bind_blob","number",["number","number","number","number","number"]),Nr=se("sqlite3_bind_double","number",["number","number","number"]),Ys=se("sqlite3_bind_int","number",["number","number","number"]),ho=se("sqlite3_bind_parameter_index","number",["number","string"]),mo=se("sqlite3_step","number",["number"]),Qs=se("sqlite3_errmsg","string",["number"]),Rr=se("sqlite3_column_count","number",["number"]),po=se("sqlite3_data_count","number",["number"]),Oa=se("sqlite3_column_double","number",["number","number"]),Cr=se("sqlite3_column_text","string",["number","number"]),go=se("sqlite3_column_blob","number",["number","number"]),Fi=se("sqlite3_column_bytes","number",["number","number"]),_o=se("sqlite3_column_type","number",["number","number"]),yo=se("sqlite3_column_name","string",["number","number"]),vo=se("sqlite3_reset","number",["number"]),Eo=se("sqlite3_clear_bindings","number",["number"]),As=se("sqlite3_finalize","number",["number"]),bn=se("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),To=se("sqlite3_value_type","number",["number"]),bo=se("sqlite3_value_bytes","number",["number"]),ls=se("sqlite3_value_text","string",["number"]),c=se("sqlite3_value_blob","number",["number"]),v=se("sqlite3_value_double","number",["number"]),b=se("sqlite3_result_double","",["number","number"]),R=se("sqlite3_result_null","",["number"]),Y=se("sqlite3_result_text","",["number","string","number","number"]),te=se("sqlite3_result_blob","",["number","number","number","number"]),ge=se("sqlite3_result_int","",["number","number"]),He=se("sqlite3_result_error","",["number","string","number"]),Ht=se("sqlite3_aggregate_context","number",["number","number"]),ht=se("RegisterExtensionFunctions","number",["number"]),Lt=se("sqlite3_update_hook","number",["number","number","number"]);S.prototype.bind=function(F){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(F)?this.Cb(F):F!=null&&typeof F=="object"?this.Db(F):!0},S.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var F=mo(this.Qa);switch(F){case 100:return!0;case 101:return!1;default:throw this.db.handleError(F)}},S.prototype.wb=function(F){return F==null&&(F=this.Oa,this.Oa+=1),Oa(this.Qa,F)},S.prototype.Gb=function(F){if(F==null&&(F=this.Oa,this.Oa+=1),F=Cr(this.Qa,F),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(F)},S.prototype.Hb=function(F){return F==null&&(F=this.Oa,this.Oa+=1),Cr(this.Qa,F)},S.prototype.getBlob=function(F){F==null&&(F=this.Oa,this.Oa+=1);var ue=Fi(this.Qa,F);F=go(this.Qa,F);for(var Ee=new Uint8Array(ue),De=0;De<ue;De+=1)Ee[De]=V[F+De];return Ee},S.prototype.get=function(F,ue){ue=ue||{},F!=null&&this.bind(F)&&this.step(),F=[];for(var Ee=po(this.Qa),De=0;De<Ee;De+=1)switch(_o(this.Qa,De)){case 1:var Me=ue.useBigInt?this.Gb(De):this.wb(De);F.push(Me);break;case 2:F.push(this.wb(De));break;case 3:F.push(this.Hb(De));break;case 4:F.push(this.getBlob(De));break;default:F.push(null)}return F},S.prototype.getColumnNames=function(){for(var F=[],ue=Rr(this.Qa),Ee=0;Ee<ue;Ee+=1)F.push(yo(this.Qa,Ee));return F},S.prototype.getAsObject=function(F,ue){F=this.get(F,ue),ue=this.getColumnNames();for(var Ee={},De=0;De<ue.length;De+=1)Ee[ue[De]]=F[De];return Ee},S.prototype.getSQL=function(){return Ia(this.Qa)},S.prototype.getNormalizedSQL=function(){return ws(this.Qa)},S.prototype.run=function(F){return F!=null&&this.bind(F),this.step(),this.reset()},S.prototype.sb=function(F,ue){ue==null&&(ue=this.Oa,this.Oa+=1),F=ss(F);var Ee=bs(F,Ts);this.lb.push(Ee),this.db.handleError(Hi(this.Qa,ue,Ee,F.length-1,0))},S.prototype.Bb=function(F,ue){ue==null&&(ue=this.Oa,this.Oa+=1);var Ee=bs(F,Ts);this.lb.push(Ee),this.db.handleError(Xs(this.Qa,ue,Ee,F.length,0))},S.prototype.rb=function(F,ue){ue==null&&(ue=this.Oa,this.Oa+=1),this.db.handleError((F===(F|0)?Ys:Nr)(this.Qa,ue,F))},S.prototype.Eb=function(F){F==null&&(F=this.Oa,this.Oa+=1),Xs(this.Qa,F,0,0,0)},S.prototype.tb=function(F,ue){switch(ue==null&&(ue=this.Oa,this.Oa+=1),typeof F){case"string":this.sb(F,ue);return;case"number":this.rb(F,ue);return;case"bigint":this.sb(F.toString(),ue);return;case"boolean":this.rb(F+0,ue);return;case"object":if(F===null){this.Eb(ue);return}if(F.length!=null){this.Bb(F,ue);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+F+")."},S.prototype.Db=function(F){var ue=this;return Object.keys(F).forEach(function(Ee){var De=ho(ue.Qa,Ee);De!==0&&ue.tb(F[Ee],De)}),!0},S.prototype.Cb=function(F){for(var ue=0;ue<F.length;ue+=1)this.tb(F[ue],ue+1);return!0},S.prototype.reset=function(){return this.freemem(),Eo(this.Qa)===0&&vo(this.Qa)===0},S.prototype.freemem=function(){for(var F;(F=this.lb.pop())!==void 0;)ii(F)},S.prototype.free=function(){this.freemem();var F=As(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,F},N.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var F=Tn(),ue=on(4);qn(X),qn(ue);try{this.db.handleError(Gs(this.db.db,this.kb,-1,X,ue)),this.kb=Bn(ue,"i32");var Ee=Bn(X,"i32");return Ee===0?(this.mb(),{done:!0}):(this.Za=new S(Ee,this.db),this.db.fb[Ee]=this.Za,{value:this.Za,done:!1})}catch(De){throw this.pb=qs(this.kb),this.mb(),De}finally{hi(F)}},N.prototype.mb=function(){ii(this.eb),this.eb=null},N.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:qs(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(N.prototype[Symbol.iterator]=function(){return this}),M.prototype.run=function(F,ue){if(!this.db)throw"Database closed";if(ue){F=this.prepare(F,ue);try{F.step()}finally{F.free()}}else this.handleError(Ue(this.db,F,0,0,X));return this},M.prototype.exec=function(F,ue,Ee){if(!this.db)throw"Database closed";var De=Tn(),Me=null;try{var rt=vn(F),Sn=on(4);for(F=[];Bn(rt,"i8")!==0;){qn(X),qn(Sn),this.handleError(Gs(this.db,rt,-1,X,Sn));var mi=Bn(X,"i32");if(rt=Bn(Sn,"i32"),mi!==0){var si=null;for(Me=new S(mi,this),ue!=null&&Me.bind(ue);Me.step();)si===null&&(si={columns:Me.getColumnNames(),values:[]},F.push(si)),si.values.push(Me.get(null,Ee));Me.free()}}return F}catch(Ci){throw Me&&Me.free(),Ci}finally{hi(De)}},M.prototype.each=function(F,ue,Ee,De,Me){typeof ue=="function"&&(De=Ee,Ee=ue,ue=void 0),F=this.prepare(F,ue);try{for(;F.step();)Ee(F.getAsObject(null,Me))}finally{F.free()}if(typeof De=="function")return De()},M.prototype.prepare=function(F,ue){if(qn(X),this.handleError(Qt(this.db,F,-1,X,0)),F=Bn(X,"i32"),F===0)throw"Nothing to prepare";var Ee=new S(F,this);return ue!=null&&Ee.bind(ue),this.fb[F]=Ee},M.prototype.iterateStatements=function(F){return new N(F,this)},M.prototype.export=function(){Object.values(this.fb).forEach(function(ue){ue.free()}),Object.values(this.Sa).forEach(ni),this.Sa={},this.handleError(ke(this.db));var F=ti(this.filename);return this.handleError(Ne(this.filename,X)),this.db=Bn(X,"i32"),ht(this.db),F},M.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(F){F.free()}),Object.values(this.Sa).forEach(ni),this.Sa={},this.Ya&&(ni(this.Ya),this.Ya=void 0),this.handleError(ke(this.db)),Yt("/"+this.filename),this.db=null)},M.prototype.handleError=function(F){if(F===0)return null;throw F=Qs(this.db),Error(F)},M.prototype.getRowsModified=function(){return gt(this.db)},M.prototype.create_function=function(F,ue){Object.prototype.hasOwnProperty.call(this.Sa,F)&&(ni(this.Sa[F]),delete this.Sa[F]);var Ee=Dn(function(De,Me,rt){Me=_(Me,rt);try{var Sn=ue.apply(null,Me)}catch(mi){He(De,mi,-1);return}d(De,Sn)},"viii");return this.Sa[F]=Ee,this.handleError(bn(this.db,F,ue.length,1,0,Ee,0,0,0)),this},M.prototype.create_aggregate=function(F,ue){var Ee=ue.init||function(){return null},De=ue.finalize||function(si){return si},Me=ue.step;if(!Me)throw"An aggregate function must have a step function in "+F;var rt={};Object.hasOwnProperty.call(this.Sa,F)&&(ni(this.Sa[F]),delete this.Sa[F]),ue=F+"__finalize",Object.hasOwnProperty.call(this.Sa,ue)&&(ni(this.Sa[ue]),delete this.Sa[ue]);var Sn=Dn(function(si,Ci,So){var Ns=Ht(si,1);Object.hasOwnProperty.call(rt,Ns)||(rt[Ns]=Ee()),Ci=_(Ci,So),Ci=[rt[Ns]].concat(Ci);try{rt[Ns]=Me.apply(null,Ci)}catch(xr){delete rt[Ns],He(si,xr,-1)}},"viii"),mi=Dn(function(si){var Ci=Ht(si,1);try{var So=De(rt[Ci])}catch(Ns){delete rt[Ci],He(si,Ns,-1);return}d(si,So),delete rt[Ci]},"vi");return this.Sa[F]=Sn,this.Sa[ue]=mi,this.handleError(bn(this.db,F,Me.length-1,1,0,0,Sn,mi,0)),this},M.prototype.updateHook=function(F){this.Ya&&(Lt(this.db,0,0),ni(this.Ya),this.Ya=void 0),F&&(this.Ya=Dn(function(ue,Ee,De,Me,rt){switch(Ee){case 18:ue="insert";break;case 23:ue="update";break;case 9:ue="delete";break;default:throw"unknown operationCode in updateHook callback: "+Ee}if(De=De?bt(k,De):"",Me=Me?bt(k,Me):"",rt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";F(ue,De,Me,Number(rt))},"viiiij"),Lt(this.db,this.Ya,0))},g.Database=M};var $={...g},W="./this.program",ne=(d,_)=>{throw _},G="",z,le;if(I){var me=cv;G=__dirname+"/",le=d=>(d=_e(d)?new URL(d):d,me.readFileSync(d)),z=async d=>(d=_e(d)?new URL(d):d,me.readFileSync(d,void 0)),!g.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),s.exports=g,ne=(d,_)=>{throw process.exitCode=d,_}}else(w||C)&&(C?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),G=G.startsWith("blob:")?"":G.slice(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1),C&&(le=d=>{var _=new XMLHttpRequest;return _.open("GET",d,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),z=async d=>{if(_e(d))return new Promise((S,N)=>{var M=new XMLHttpRequest;M.open("GET",d,!0),M.responseType="arraybuffer",M.onload=()=>{M.status==200||M.status==0&&M.response?S(M.response):N(M.status)},M.onerror=N,M.send(null)});var _=await fetch(d,{credentials:"same-origin"});if(_.ok)return _.arrayBuffer();throw Error(_.status+" : "+_.url)});var he=g.print||console.log.bind(console),Ae=g.printErr||console.error.bind(console);Object.assign(g,$),$=null,g.thisProgram&&(W=g.thisProgram);var xe=g.wasmBinary,O,D=!1,j,V,k,U,x,ve,Tt,P,J,_e=d=>d.startsWith("file://");function We(){var d=O.buffer;g.HEAP8=V=new Int8Array(d),g.HEAP16=U=new Int16Array(d),g.HEAPU8=k=new Uint8Array(d),g.HEAPU16=new Uint16Array(d),g.HEAP32=x=new Int32Array(d),g.HEAPU32=ve=new Uint32Array(d),g.HEAPF32=Tt=new Float32Array(d),g.HEAPF64=J=new Float64Array(d),g.HEAP64=P=new BigInt64Array(d),g.HEAPU64=new BigUint64Array(d)}var $e=0,B=null;function re(d){throw g.onAbort?.(d),d="Aborted("+d+")",Ae(d),D=!0,new WebAssembly.RuntimeError(d+". Build with -sASSERTIONS for more info.")}var ye;async function Te(d){if(!xe)try{var _=await z(d);return new Uint8Array(_)}catch{}if(d==ye&&xe)d=new Uint8Array(xe);else if(le)d=le(d);else throw"both async and sync fetching of the wasm failed";return d}async function Pe(d,_){try{var S=await Te(d);return await WebAssembly.instantiate(S,_)}catch(N){Ae(`failed to asynchronously prepare wasm: ${N}`),re(N)}}async function Ke(d){var _=ye;if(!xe&&typeof WebAssembly.instantiateStreaming=="function"&&!_e(_)&&!I)try{var S=fetch(_,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(S,d)}catch(N){Ae(`wasm streaming compile failed: ${N}`),Ae("falling back to ArrayBuffer instantiation")}return Pe(_,d)}class tt{name="ExitStatus";constructor(_){this.message=`Program terminated with exit(${_})`,this.status=_}}var Kt=d=>{for(;0<d.length;)d.shift()(g)},jt=[],ps=[],ba=()=>{var d=g.preRun.shift();ps.unshift(d)};function Bn(d,_="i8"){switch(_.endsWith("*")&&(_="*"),_){case"i1":return V[d];case"i8":return V[d];case"i16":return U[d>>1];case"i32":return x[d>>2];case"i64":return P[d>>3];case"float":return Tt[d>>2];case"double":return J[d>>3];case"*":return ve[d>>2];default:re(`invalid type for getValue: ${_}`)}}var gs=g.noExitRuntime||!0;function qn(d){var _="i32";switch(_.endsWith("*")&&(_="*"),_){case"i1":V[d]=0;break;case"i8":V[d]=0;break;case"i16":U[d>>1]=0;break;case"i32":x[d>>2]=0;break;case"i64":P[d>>3]=BigInt(0);break;case"float":Tt[d>>2]=0;break;case"double":J[d>>3]=0;break;case"*":ve[d>>2]=0;break;default:re(`invalid type for setValue: ${_}`)}}var Sa=typeof TextDecoder<"u"?new TextDecoder:void 0,bt=(d,_=0,S=NaN)=>{var N=_+S;for(S=_;d[S]&&!(S>=N);)++S;if(16<S-_&&d.buffer&&Sa)return Sa.decode(d.subarray(_,S));for(N="";_<S;){var M=d[_++];if(M&128){var X=d[_++]&63;if((M&224)==192)N+=String.fromCharCode((M&31)<<6|X);else{var se=d[_++]&63;M=(M&240)==224?(M&15)<<12|X<<6|se:(M&7)<<18|X<<12|se<<6|d[_++]&63,65536>M?N+=String.fromCharCode(M):(M-=65536,N+=String.fromCharCode(55296|M>>10,56320|M&1023))}}else N+=String.fromCharCode(M)}return N},qs=(d,_)=>d?bt(k,d,_):"",wa=(d,_)=>{for(var S=0,N=d.length-1;0<=N;N--){var M=d[N];M==="."?d.splice(N,1):M===".."?(d.splice(N,1),S++):S&&(d.splice(N,1),S--)}if(_)for(;S;S--)d.unshift("..");return d},Pt=d=>{var _=d.charAt(0)==="/",S=d.slice(-1)==="/";return(d=wa(d.split("/").filter(N=>!!N),!_).join("/"))||_||(d="."),d&&S&&(d+="/"),(_?"/":"")+d},Wt=d=>{var _=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(d).slice(1);return d=_[0],_=_[1],!d&&!_?".":(_&&=_.slice(0,-1),d+_)},Ti=d=>d&&d.match(/([^\/]+|\/)\/*$/)[1],wl=()=>{if(I){var d=cv;return _=>d.randomFillSync(_)}return _=>crypto.getRandomValues(_)},pr=d=>{(pr=wl())(d)},Nn=(...d)=>{for(var _="",S=!1,N=d.length-1;-1<=N&&!S;N--){if(S=0<=N?d[N]:"/",typeof S!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!S)return"";_=S+"/"+_,S=S.charAt(0)==="/"}return _=wa(_.split("/").filter(M=>!!M),!S).join("/"),(S?"/":"")+_||"."},ns=[],is=d=>{for(var _=0,S=0;S<d.length;++S){var N=d.charCodeAt(S);127>=N?_++:2047>=N?_+=2:55296<=N&&57343>=N?(_+=4,++S):_+=3}return _},Kn=(d,_,S,N)=>{if(!(0<N))return 0;var M=S;N=S+N-1;for(var X=0;X<d.length;++X){var se=d.charCodeAt(X);if(55296<=se&&57343>=se){var Ne=d.charCodeAt(++X);se=65536+((se&1023)<<10)|Ne&1023}if(127>=se){if(S>=N)break;_[S++]=se}else{if(2047>=se){if(S+1>=N)break;_[S++]=192|se>>6}else{if(65535>=se){if(S+2>=N)break;_[S++]=224|se>>12}else{if(S+3>=N)break;_[S++]=240|se>>18,_[S++]=128|se>>12&63}_[S++]=128|se>>6&63}_[S++]=128|se&63}}return _[S]=0,S-M},ss=(d,_)=>{var S=Array(is(d)+1);return d=Kn(d,S,0,S.length),_&&(S.length=d),S},oo=[];function gr(d,_){oo[d]={input:[],output:[],cb:_},Na(d,lo)}var lo={open(d){var _=oo[d.node.rdev];if(!_)throw new pe(43);d.tty=_,d.seekable=!1},close(d){d.tty.cb.fsync(d.tty)},fsync(d){d.tty.cb.fsync(d.tty)},read(d,_,S,N){if(!d.tty||!d.tty.cb.xb)throw new pe(60);for(var M=0,X=0;X<N;X++){try{var se=d.tty.cb.xb(d.tty)}catch{throw new pe(29)}if(se===void 0&&M===0)throw new pe(6);if(se==null)break;M++,_[S+X]=se}return M&&(d.node.atime=Date.now()),M},write(d,_,S,N){if(!d.tty||!d.tty.cb.qb)throw new pe(60);try{for(var M=0;M<N;M++)d.tty.cb.qb(d.tty,_[S+M])}catch{throw new pe(29)}return N&&(d.node.mtime=d.node.ctime=Date.now()),M}},uo={xb(){e:{if(!ns.length){var d=null;if(I){var _=Buffer.alloc(256),S=0,N=process.stdin.fd;try{S=me.readSync(N,_,0,256)}catch(M){if(M.toString().includes("EOF"))S=0;else throw M}0<S&&(d=_.slice(0,S).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(d=window.prompt("Input: "),d!==null&&(d+=`
`));if(!d){d=null;break e}ns=ss(d,!0)}d=ns.shift()}return d},qb(d,_){_===null||_===10?(he(bt(d.output)),d.output=[]):_!=0&&d.output.push(_)},fsync(d){0<d.output?.length&&(he(bt(d.output)),d.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},bi={qb(d,_){_===null||_===10?(Ae(bt(d.output)),d.output=[]):_!=0&&d.output.push(_)},fsync(d){0<d.output?.length&&(Ae(bt(d.output)),d.output=[])}},Oe={Wa:null,Xa(){return Oe.createNode(null,"/",16895,0)},createNode(d,_,S,N){if((S&61440)===24576||(S&61440)===4096)throw new pe(63);return Oe.Wa||(Oe.Wa={dir:{node:{Ta:Oe.La.Ta,Ua:Oe.La.Ua,lookup:Oe.La.lookup,hb:Oe.La.hb,rename:Oe.La.rename,unlink:Oe.La.unlink,rmdir:Oe.La.rmdir,readdir:Oe.La.readdir,symlink:Oe.La.symlink},stream:{Va:Oe.Ma.Va}},file:{node:{Ta:Oe.La.Ta,Ua:Oe.La.Ua},stream:{Va:Oe.Ma.Va,read:Oe.Ma.read,write:Oe.Ma.write,ib:Oe.Ma.ib,jb:Oe.Ma.jb}},link:{node:{Ta:Oe.La.Ta,Ua:Oe.La.Ua,readlink:Oe.La.readlink},stream:{}},ub:{node:{Ta:Oe.La.Ta,Ua:Oe.La.Ua},stream:Nl}}),S=Aa(d,_,S,N),rn(S.mode)?(S.La=Oe.Wa.dir.node,S.Ma=Oe.Wa.dir.stream,S.Na={}):(S.mode&61440)===32768?(S.La=Oe.Wa.file.node,S.Ma=Oe.Wa.file.stream,S.Ra=0,S.Na=null):(S.mode&61440)===40960?(S.La=Oe.Wa.link.node,S.Ma=Oe.Wa.link.stream):(S.mode&61440)===8192&&(S.La=Oe.Wa.ub.node,S.Ma=Oe.Wa.ub.stream),S.atime=S.mtime=S.ctime=Date.now(),d&&(d.Na[_]=S,d.atime=d.mtime=d.ctime=S.atime),S},Sb(d){return d.Na?d.Na.subarray?d.Na.subarray(0,d.Ra):new Uint8Array(d.Na):new Uint8Array(0)},La:{Ta(d){var _={};return _.dev=(d.mode&61440)===8192?d.id:1,_.ino=d.id,_.mode=d.mode,_.nlink=1,_.uid=0,_.gid=0,_.rdev=d.rdev,rn(d.mode)?_.size=4096:(d.mode&61440)===32768?_.size=d.Ra:(d.mode&61440)===40960?_.size=d.link.length:_.size=0,_.atime=new Date(d.atime),_.mtime=new Date(d.mtime),_.ctime=new Date(d.ctime),_.blksize=4096,_.blocks=Math.ceil(_.size/_.blksize),_},Ua(d,_){for(var S of["mode","atime","mtime","ctime"])_[S]!=null&&(d[S]=_[S]);_.size!==void 0&&(_=_.size,d.Ra!=_&&(_==0?(d.Na=null,d.Ra=0):(S=d.Na,d.Na=new Uint8Array(_),S&&d.Na.set(S.subarray(0,Math.min(_,d.Ra))),d.Ra=_)))},lookup(){throw Oe.vb},hb(d,_,S,N){return Oe.createNode(d,_,S,N)},rename(d,_,S){try{var N=Zn(_,S)}catch{}if(N){if(rn(d.mode))for(var M in N.Na)throw new pe(55);yr(N)}delete d.parent.Na[d.name],_.Na[S]=d,d.name=S,_.ctime=_.mtime=d.parent.ctime=d.parent.mtime=Date.now()},unlink(d,_){delete d.Na[_],d.ctime=d.mtime=Date.now()},rmdir(d,_){var S=Zn(d,_),N;for(N in S.Na)throw new pe(55);delete d.Na[_],d.ctime=d.mtime=Date.now()},readdir(d){return[".","..",...Object.keys(d.Na)]},symlink(d,_,S){return d=Oe.createNode(d,_,41471,0),d.link=S,d},readlink(d){if((d.mode&61440)!==40960)throw new pe(28);return d.link}},Ma:{read(d,_,S,N,M){var X=d.node.Na;if(M>=d.node.Ra)return 0;if(d=Math.min(d.node.Ra-M,N),8<d&&X.subarray)_.set(X.subarray(M,M+d),S);else for(N=0;N<d;N++)_[S+N]=X[M+N];return d},write(d,_,S,N,M,X){if(_.buffer===V.buffer&&(X=!1),!N)return 0;if(d=d.node,d.mtime=d.ctime=Date.now(),_.subarray&&(!d.Na||d.Na.subarray)){if(X)return d.Na=_.subarray(S,S+N),d.Ra=N;if(d.Ra===0&&M===0)return d.Na=_.slice(S,S+N),d.Ra=N;if(M+N<=d.Ra)return d.Na.set(_.subarray(S,S+N),M),N}X=M+N;var se=d.Na?d.Na.length:0;if(se>=X||(X=Math.max(X,se*(1048576>se?2:1.125)>>>0),se!=0&&(X=Math.max(X,256)),se=d.Na,d.Na=new Uint8Array(X),0<d.Ra&&d.Na.set(se.subarray(0,d.Ra),0)),d.Na.subarray&&_.subarray)d.Na.set(_.subarray(S,S+N),M);else for(X=0;X<N;X++)d.Na[M+X]=_[S+X];return d.Ra=Math.max(d.Ra,M+N),N},Va(d,_,S){if(S===1?_+=d.position:S===2&&(d.node.mode&61440)===32768&&(_+=d.node.Ra),0>_)throw new pe(28);return _},ib(d,_,S,N,M){if((d.node.mode&61440)!==32768)throw new pe(43);if(d=d.node.Na,M&2||!d||d.buffer!==V.buffer){M=!0,N=65536*Math.ceil(_/65536);var X=Ss(65536,N);if(X&&k.fill(0,X,X+N),N=X,!N)throw new pe(48);d&&((0<S||S+_<d.length)&&(d.subarray?d=d.subarray(S,S+_):d=Array.prototype.slice.call(d,S,S+_)),V.set(d,N))}else M=!1,N=d.byteOffset;return{Kb:N,Ab:M}},jb(d,_,S,N){return Oe.Ma.write(d,_,0,N,S,!1),0}}},Wn=(d,_)=>{var S=0;return d&&(S|=365),_&&(S|=146),S},Ut=null,_r={},Si=[],co=1,pn=null,_s=!1,Xt=!0,wi={},pe=class{name="ErrnoError";constructor(d){this.Pa=d}},Ai=class{gb={};node=null;get flags(){return this.gb.flags}set flags(d){this.gb.flags=d}get position(){return this.gb.position}set position(d){this.gb.position=d}},Al=class{La={};Ma={};ab=null;constructor(d,_,S,N){d||=this,this.parent=d,this.Xa=d.Xa,this.id=co++,this.name=_,this.mode=S,this.rdev=N,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(d){d?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(d){d?this.mode|=146:this.mode&=-147}};function Rn(d,_={}){if(!d)throw new pe(44);_.nb??(_.nb=!0),d.charAt(0)==="/"||(d="//"+d);var S=0;e:for(;40>S;S++){d=d.split("/").filter(Ne=>!!Ne);for(var N=Ut,M="/",X=0;X<d.length;X++){var se=X===d.length-1;if(se&&_.parent)break;if(d[X]!==".")if(d[X]==="..")M=Wt(M),N=N.parent;else{M=Pt(M+"/"+d[X]);try{N=Zn(N,d[X])}catch(Ne){if(Ne?.Pa===44&&se&&_.Jb)return{path:M};throw Ne}if(!N.ab||se&&!_.nb||(N=N.ab.root),(N.mode&61440)===40960&&(!se||_.$a)){if(!N.La.readlink)throw new pe(52);N=N.La.readlink(N),N.charAt(0)==="/"||(N=Wt(M)+"/"+N),d=N+"/"+d.slice(X+1).join("/");continue e}}}return{path:M,node:N}}throw new pe(32)}function ui(d){for(var _;;){if(d===d.parent)return d=d.Xa.zb,_?d[d.length-1]!=="/"?`${d}/${_}`:d+_:d;_=_?`${d.name}/${_}`:d.name,d=d.parent}}function as(d,_){for(var S=0,N=0;N<_.length;N++)S=(S<<5)-S+_.charCodeAt(N)|0;return(d+S>>>0)%pn.length}function yr(d){var _=as(d.parent.id,d.name);if(pn[_]===d)pn[_]=d.bb;else for(_=pn[_];_;){if(_.bb===d){_.bb=d.bb;break}_=_.bb}}function Zn(d,_){var S=rn(d.mode)?(S=zn(d,"x"))?S:d.La.lookup?0:2:54;if(S)throw new pe(S);for(S=pn[as(d.id,_)];S;S=S.bb){var N=S.name;if(S.parent.id===d.id&&N===_)return S}return d.La.lookup(d,_)}function Aa(d,_,S,N){return d=new Al(d,_,S,N),_=as(d.parent.id,d.name),d.bb=pn[_],pn[_]=d}function rn(d){return(d&61440)===16384}function ys(d){var _=["r","w","rw"][d&3];return d&512&&(_+="w"),_}function zn(d,_){if(Xt)return 0;if(!_.includes("r")||d.mode&292){if(_.includes("w")&&!(d.mode&146)||_.includes("x")&&!(d.mode&73))return 2}else return 2;return 0}function vr(d,_){if(!rn(d.mode))return 54;try{return Zn(d,_),20}catch{}return zn(d,"wx")}function ci(d,_,S){try{var N=Zn(d,_)}catch(M){return M.Pa}if(d=zn(d,"wx"))return d;if(S){if(!rn(N.mode))return 54;if(N===N.parent||ui(N)==="/")return 10}else if(rn(N.mode))return 31;return 0}function Pn(d){if(!d)throw new pe(63);return d}function at(d){if(d=Si[d],!d)throw new pe(8);return d}function en(d,_=-1){if(d=Object.assign(new Ai,d),_==-1)e:{for(_=0;4096>=_;_++)if(!Si[_])break e;throw new pe(33)}return d.fd=_,Si[_]=d}function Mi(d,_=-1){return d=en(d,_),d.Ma?.Rb?.(d),d}function vs(d,_,S){var N=d?.Ma.Ua;d=N?d:_,N??=_.La.Ua,Pn(N),N(d,S)}var Nl={open(d){d.Ma=_r[d.node.rdev].Ma,d.Ma.open?.(d)},Va(){throw new pe(70)}};function Na(d,_){_r[d]={Ma:_}}function Er(d,_){var S=_==="/";if(S&&Ut)throw new pe(10);if(!S&&_){var N=Rn(_,{nb:!1});if(_=N.path,N=N.node,N.ab)throw new pe(10);if(!rn(N.mode))throw new pe(54)}_={type:d,Wb:{},zb:_,Ib:[]},d=d.Xa(_),d.Xa=_,_.root=d,S?Ut=d:N&&(N.ab=_,N.Xa&&N.Xa.Ib.push(_))}function Jn(d,_,S){var N=Rn(d,{parent:!0}).node;if(d=Ti(d),!d)throw new pe(28);if(d==="."||d==="..")throw new pe(20);var M=vr(N,d);if(M)throw new pe(M);if(!N.La.hb)throw new pe(63);return N.La.hb(N,d,_,S)}function Ra(d,_=438){return Jn(d,_&4095|32768,0)}function tn(d,_=511){return Jn(d,_&1023|16384,0)}function Cn(d,_,S){typeof S>"u"&&(S=_,_=438),Jn(d,_|8192,S)}function xn(d,_){if(!Nn(d))throw new pe(44);var S=Rn(_,{parent:!0}).node;if(!S)throw new pe(44);_=Ti(_);var N=vr(S,_);if(N)throw new pe(N);if(!S.La.symlink)throw new pe(63);S.La.symlink(S,_,d)}function Ni(d){var _=Rn(d,{parent:!0}).node;d=Ti(d);var S=Zn(_,d),N=ci(_,d,!0);if(N)throw new pe(N);if(!_.La.rmdir)throw new pe(63);if(S.ab)throw new pe(10);_.La.rmdir(_,d),yr(S)}function Yt(d){var _=Rn(d,{parent:!0}).node;if(!_)throw new pe(44);d=Ti(d);var S=Zn(_,d),N=ci(_,d,!1);if(N)throw new pe(N);if(!_.La.unlink)throw new pe(63);if(S.ab)throw new pe(10);_.La.unlink(_,d),yr(S)}function rs(d,_){return d=Rn(d,{$a:!_}).node,Pn(d.La.Ta)(d)}function Ca(d,_,S,N){vs(d,_,{mode:S&4095|_.mode&-4096,ctime:Date.now(),Fb:N})}function ei(d,_){d=typeof d=="string"?Rn(d,{$a:!0}).node:d,Ca(null,d,_)}function Ri(d,_,S){if(rn(_.mode))throw new pe(31);if((_.mode&61440)!==32768)throw new pe(28);var N=zn(_,"w");if(N)throw new pe(N);vs(d,_,{size:S,timestamp:Date.now()})}function Vi(d,_,S=438){if(d==="")throw new pe(44);if(typeof _=="string"){var N={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[_];if(typeof N>"u")throw Error(`Unknown file open mode: ${_}`);_=N}if(S=_&64?S&4095|32768:0,typeof d=="object")N=d;else{var M=d.endsWith("/");d=Rn(d,{$a:!(_&131072),Jb:!0}),N=d.node,d=d.path}var X=!1;if(_&64)if(N){if(_&128)throw new pe(20)}else{if(M)throw new pe(31);N=Jn(d,S|511,0),X=!0}if(!N)throw new pe(44);if((N.mode&61440)===8192&&(_&=-513),_&65536&&!rn(N.mode))throw new pe(54);if(!X&&(M=N?(N.mode&61440)===40960?32:rn(N.mode)&&(ys(_)!=="r"||_&576)?31:zn(N,ys(_)):44))throw new pe(M);return _&512&&!X&&(M=N,M=typeof M=="string"?Rn(M,{$a:!0}).node:M,Ri(null,M,0)),_&=-131713,M=en({node:N,path:ui(N),flags:_,seekable:!0,position:0,Ma:N.Ma,Lb:[],error:!1}),M.Ma.open&&M.Ma.open(M),X&&ei(N,S&511),!g.logReadFiles||_&1||d in wi||(wi[d]=1),M}function zs(d){if(d.fd===null)throw new pe(8);d.ob&&(d.ob=null);try{d.Ma.close&&d.Ma.close(d)}catch(_){throw _}finally{Si[d.fd]=null}d.fd=null}function xa(d,_,S){if(d.fd===null)throw new pe(8);if(!d.seekable||!d.Ma.Va)throw new pe(70);if(S!=0&&S!=1&&S!=2)throw new pe(28);d.position=d.Ma.Va(d,_,S),d.Lb=[]}function Tr(d,_,S,N,M){if(0>N||0>M)throw new pe(28);if(d.fd===null)throw new pe(8);if((d.flags&2097155)===1)throw new pe(8);if(rn(d.node.mode))throw new pe(31);if(!d.Ma.read)throw new pe(28);var X=typeof M<"u";if(!X)M=d.position;else if(!d.seekable)throw new pe(70);return _=d.Ma.read(d,_,S,N,M),X||(d.position+=_),_}function Ps(d,_,S,N,M){if(0>N||0>M)throw new pe(28);if(d.fd===null)throw new pe(8);if((d.flags&2097155)===0)throw new pe(8);if(rn(d.node.mode))throw new pe(31);if(!d.Ma.write)throw new pe(28);d.seekable&&d.flags&1024&&xa(d,0,2);var X=typeof M<"u";if(!X)M=d.position;else if(!d.seekable)throw new pe(70);return _=d.Ma.write(d,_,S,N,M,void 0),X||(d.position+=_),_}function ti(d){var _,S=Vi(d,S||0);d=rs(d).size;var N=new Uint8Array(d);return Tr(S,N,0,d,0),_=N,zs(S),_}function Nt(d,_,S){d=Pt("/dev/"+d);var N=Wn(!!_,!!S);Nt.yb??(Nt.yb=64);var M=Nt.yb++<<8|0;Na(M,{open(X){X.seekable=!1},close(){S?.buffer?.length&&S(10)},read(X,se,Ne,ke){for(var Ue=0,gt=0;gt<ke;gt++){try{var Qt=_()}catch{throw new pe(29)}if(Qt===void 0&&Ue===0)throw new pe(6);if(Qt==null)break;Ue++,se[Ne+gt]=Qt}return Ue&&(X.node.atime=Date.now()),Ue},write(X,se,Ne,ke){for(var Ue=0;Ue<ke;Ue++)try{S(se[Ne+Ue])}catch{throw new pe(29)}return ke&&(X.node.mtime=X.node.ctime=Date.now()),Ue}}),Cn(d,N,M)}var Ge={};function Hn(d,_,S){if(_.charAt(0)==="/")return _;if(d=d===-100?"/":at(d).path,_.length==0){if(!S)throw new pe(44);return d}return d+"/"+_}function Es(d,_){x[d>>2]=_.dev,x[d+4>>2]=_.mode,ve[d+8>>2]=_.nlink,x[d+12>>2]=_.uid,x[d+16>>2]=_.gid,x[d+20>>2]=_.rdev,P[d+24>>3]=BigInt(_.size),x[d+32>>2]=4096,x[d+36>>2]=_.blocks;var S=_.atime.getTime(),N=_.mtime.getTime(),M=_.ctime.getTime();return P[d+40>>3]=BigInt(Math.floor(S/1e3)),ve[d+48>>2]=S%1e3*1e6,P[d+56>>3]=BigInt(Math.floor(N/1e3)),ve[d+64>>2]=N%1e3*1e6,P[d+72>>3]=BigInt(Math.floor(M/1e3)),ve[d+80>>2]=M%1e3*1e6,P[d+88>>3]=BigInt(_.ino),0}var dt=void 0,Ui=()=>{var d=x[+dt>>2];return dt+=4,d},fi=0,Hs=[0,31,60,91,121,152,182,213,244,274,305,335],Fn=[0,31,59,90,120,151,181,212,243,273,304,334],Bi={},br=d=>{j=d,gs||0<fi||(g.onExit?.(d),D=!0),ne(d,new tt(d))},Sr=d=>{if(!D)try{if(d(),!(gs||0<fi))try{j=d=j,br(d)}catch(_){_ instanceof tt||_=="unwind"||ne(1,_)}}catch(_){_ instanceof tt||_=="unwind"||ne(1,_)}},qi={},wr=()=>{if(!zi){var d={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},_;for(_ in qi)qi[_]===void 0?delete d[_]:d[_]=qi[_];var S=[];for(_ in d)S.push(`${_}=${d[_]}`);zi=S}return zi},zi,vn=d=>{var _=is(d)+1,S=on(_);return Kn(d,k,S,_),S},fo=(d,_,S,N)=>{var M={string:Ue=>{var gt=0;return Ue!=null&&Ue!==0&&(gt=vn(Ue)),gt},array:Ue=>{var gt=on(Ue.length);return V.set(Ue,gt),gt}};d=g["_"+d];var X=[],se=0;if(N)for(var Ne=0;Ne<N.length;Ne++){var ke=M[S[Ne]];ke?(se===0&&(se=Tn()),X[Ne]=ke(N[Ne])):X[Ne]=N[Ne]}return S=d(...X),S=(function(Ue){return se!==0&&hi(se),_==="string"?Ue?bt(k,Ue):"":_==="boolean"?!!Ue:Ue})(S)},Ts=0,bs=(d,_)=>(_=_==1?on(d.length):Pi(d.length),d.subarray||d.slice||(d=new Uint8Array(d)),k.set(d,_),_),di,Da=[],En,ni=d=>{di.delete(En.get(d)),En.set(d,null),Da.push(d)},Dn=(d,_)=>{if(!di){di=new WeakMap;var S=En.length;if(di)for(var N=0;N<0+S;N++){var M=En.get(N);M&&di.set(M,N)}}if(S=di.get(d)||0)return S;if(Da.length)S=Da.pop();else{try{En.grow(1)}catch(ke){throw ke instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ke}S=En.length-1}try{En.set(S,d)}catch(ke){if(!(ke instanceof TypeError))throw ke;if(typeof WebAssembly.Function=="function"){var X=WebAssembly.Function;N={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},M={parameters:[],results:_[0]=="v"?[]:[N[_[0]]]};for(var se=1;se<_.length;++se)M.parameters.push(N[_[se]]);_=new X(M,d)}else{N=[1],M=_.slice(0,1),_=_.slice(1),se={i:127,p:127,j:126,f:125,d:124,e:111},N.push(96);var Ne=_.length;128>Ne?N.push(Ne):N.push(Ne%128|128,Ne>>7);for(X of _)N.push(se[X]);M=="v"?N.push(0):N.push(1,se[M]),_=[0,97,115,109,1,0,0,0,1],X=N.length,128>X?_.push(X):_.push(X%128|128,X>>7),_.push(...N),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),_=new WebAssembly.Module(new Uint8Array(_)),_=new WebAssembly.Instance(_,{e:{f:d}}).exports.f}En.set(S,_)}return di.set(d,S),S};pn=Array(4096),Er(Oe,"/"),tn("/tmp"),tn("/home"),tn("/home/web_user"),(function(){tn("/dev"),Na(259,{read:()=>0,write:(N,M,X,se)=>se,Va:()=>0}),Cn("/dev/null",259),gr(1280,uo),gr(1536,bi),Cn("/dev/tty",1280),Cn("/dev/tty1",1536);var d=new Uint8Array(1024),_=0,S=()=>(_===0&&(pr(d),_=d.byteLength),d[--_]);Nt("random",S),Nt("urandom",S),tn("/dev/shm"),tn("/dev/shm/tmp")})(),(function(){tn("/proc");var d=tn("/proc/self");tn("/proc/self/fd"),Er({Xa(){var _=Aa(d,"fd",16895,73);return _.Ma={Va:Oe.Ma.Va},_.La={lookup(S,N){S=+N;var M=at(S);return S={parent:null,Xa:{zb:"fake"},La:{readlink:()=>M.path},id:S+1},S.parent=S},readdir(){return Array.from(Si.entries()).filter(([,S])=>S).map(([S])=>S.toString())}},_}},"/proc/self/fd")})(),Oe.vb=new pe(44),Oe.vb.stack="<generic error, no stack>";var Ar={a:(d,_,S,N)=>re(`Assertion failed: ${d?bt(k,d):""}, at: `+[_?_?bt(k,_):"":"unknown filename",S,N?N?bt(k,N):"":"unknown function"]),i:function(d,_){try{return d=d?bt(k,d):"",ei(d,_),0}catch(S){if(typeof Ge>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},L:function(d,_,S){try{if(_=_?bt(k,_):"",_=Hn(d,_),S&-8)return-28;var N=Rn(_,{$a:!0}).node;return N?(d="",S&4&&(d+="r"),S&2&&(d+="w"),S&1&&(d+="x"),d&&zn(N,d)?-2:0):-44}catch(M){if(typeof Ge>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},j:function(d,_){try{var S=at(d);return Ca(S,S.node,_,!1),0}catch(N){if(typeof Ge>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},h:function(d){try{var _=at(d);return vs(_,_.node,{timestamp:Date.now(),Fb:!1}),0}catch(S){if(typeof Ge>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},b:function(d,_,S){dt=S;try{var N=at(d);switch(_){case 0:var M=Ui();if(0>M)break;for(;Si[M];)M++;return Mi(N,M).fd;case 1:case 2:return 0;case 3:return N.flags;case 4:return M=Ui(),N.flags|=M,0;case 12:return M=Ui(),U[M+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(X){if(typeof Ge>"u"||X.name!=="ErrnoError")throw X;return-X.Pa}},g:function(d,_){try{var S=at(d),N=S.node,M=S.Ma.Ta;d=M?S:N,M??=N.La.Ta,Pn(M);var X=M(d);return Es(_,X)}catch(se){if(typeof Ge>"u"||se.name!=="ErrnoError")throw se;return-se.Pa}},H:function(d,_){_=-9007199254740992>_||9007199254740992<_?NaN:Number(_);try{if(isNaN(_))return 61;var S=at(d);if(0>_||(S.flags&2097155)===0)throw new pe(28);return Ri(S,S.node,_),0}catch(N){if(typeof Ge>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},G:function(d,_){try{if(_===0)return-28;var S=is("/")+1;return _<S?-68:(Kn("/",k,d,_),S)}catch(N){if(typeof Ge>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},K:function(d,_){try{return d=d?bt(k,d):"",Es(_,rs(d,!0))}catch(S){if(typeof Ge>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},C:function(d,_,S){try{return _=_?bt(k,_):"",_=Hn(d,_),tn(_,S),0}catch(N){if(typeof Ge>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},J:function(d,_,S,N){try{_=_?bt(k,_):"";var M=N&256;return _=Hn(d,_,N&4096),Es(S,M?rs(_,!0):rs(_))}catch(X){if(typeof Ge>"u"||X.name!=="ErrnoError")throw X;return-X.Pa}},x:function(d,_,S,N){dt=N;try{_=_?bt(k,_):"",_=Hn(d,_);var M=N?Ui():0;return Vi(_,S,M).fd}catch(X){if(typeof Ge>"u"||X.name!=="ErrnoError")throw X;return-X.Pa}},v:function(d,_,S,N){try{if(_=_?bt(k,_):"",_=Hn(d,_),0>=N)return-28;var M=Rn(_).node;if(!M)throw new pe(44);if(!M.La.readlink)throw new pe(28);var X=M.La.readlink(M),se=Math.min(N,is(X)),Ne=V[S+se];return Kn(X,k,S,N+1),V[S+se]=Ne,se}catch(ke){if(typeof Ge>"u"||ke.name!=="ErrnoError")throw ke;return-ke.Pa}},u:function(d){try{return d=d?bt(k,d):"",Ni(d),0}catch(_){if(typeof Ge>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},f:function(d,_){try{return d=d?bt(k,d):"",Es(_,rs(d))}catch(S){if(typeof Ge>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},r:function(d,_,S){try{return _=_?bt(k,_):"",_=Hn(d,_),S===0?Yt(_):S===512?Ni(_):re("Invalid flags passed to unlinkat"),0}catch(N){if(typeof Ge>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},q:function(d,_,S){try{_=_?bt(k,_):"",_=Hn(d,_,!0);var N=Date.now(),M,X;if(S){var se=ve[S>>2]+4294967296*x[S+4>>2],Ne=x[S+8>>2];Ne==1073741823?M=N:Ne==1073741822?M=null:M=1e3*se+Ne/1e6,S+=16,se=ve[S>>2]+4294967296*x[S+4>>2],Ne=x[S+8>>2],Ne==1073741823?X=N:Ne==1073741822?X=null:X=1e3*se+Ne/1e6}else X=M=N;if((X??M)!==null){d=M;var ke=Rn(_,{$a:!0}).node;Pn(ke.La.Ua)(ke,{atime:d,mtime:X})}return 0}catch(Ue){if(typeof Ge>"u"||Ue.name!=="ErrnoError")throw Ue;return-Ue.Pa}},m:()=>re(""),l:()=>{gs=!1,fi=0},A:function(d,_){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d),d=new Date(1e3*d),x[_>>2]=d.getSeconds(),x[_+4>>2]=d.getMinutes(),x[_+8>>2]=d.getHours(),x[_+12>>2]=d.getDate(),x[_+16>>2]=d.getMonth(),x[_+20>>2]=d.getFullYear()-1900,x[_+24>>2]=d.getDay();var S=d.getFullYear();x[_+28>>2]=(S%4!==0||S%100===0&&S%400!==0?Fn:Hs)[d.getMonth()]+d.getDate()-1|0,x[_+36>>2]=-(60*d.getTimezoneOffset()),S=new Date(d.getFullYear(),6,1).getTimezoneOffset();var N=new Date(d.getFullYear(),0,1).getTimezoneOffset();x[_+32>>2]=(S!=N&&d.getTimezoneOffset()==Math.min(N,S))|0},y:function(d,_,S,N,M,X,se){M=-9007199254740992>M||9007199254740992<M?NaN:Number(M);try{if(isNaN(M))return 61;var Ne=at(N);if((_&2)!==0&&(S&2)===0&&(Ne.flags&2097155)!==2)throw new pe(2);if((Ne.flags&2097155)===1)throw new pe(2);if(!Ne.Ma.ib)throw new pe(43);if(!d)throw new pe(28);var ke=Ne.Ma.ib(Ne,d,M,_,S),Ue=ke.Kb;return x[X>>2]=ke.Ab,ve[se>>2]=Ue,0}catch(gt){if(typeof Ge>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Pa}},z:function(d,_,S,N,M,X){X=-9007199254740992>X||9007199254740992<X?NaN:Number(X);try{var se=at(M);if(S&2){if(S=X,(se.node.mode&61440)!==32768)throw new pe(43);if(!(N&2)){var Ne=k.slice(d,d+_);se.Ma.jb&&se.Ma.jb(se,Ne,S,_,N)}}}catch(ke){if(typeof Ge>"u"||ke.name!=="ErrnoError")throw ke;return-ke.Pa}},n:(d,_)=>{if(Bi[d]&&(clearTimeout(Bi[d].id),delete Bi[d]),!_)return 0;var S=setTimeout(()=>{delete Bi[d],Sr(()=>Fs(d,performance.now()))},_);return Bi[d]={id:S,Xb:_},0},B:(d,_,S,N)=>{var M=new Date().getFullYear(),X=new Date(M,0,1).getTimezoneOffset();M=new Date(M,6,1).getTimezoneOffset(),ve[d>>2]=60*Math.max(X,M),x[_>>2]=+(X!=M),_=se=>{var Ne=Math.abs(se);return`UTC${0<=se?"-":"+"}${String(Math.floor(Ne/60)).padStart(2,"0")}${String(Ne%60).padStart(2,"0")}`},d=_(X),_=_(M),M<X?(Kn(d,k,S,17),Kn(_,k,N,17)):(Kn(d,k,N,17),Kn(_,k,S,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:d=>{var _=k.length;if(d>>>=0,2147483648<d)return!1;for(var S=1;4>=S;S*=2){var N=_*(1+.2/S);N=Math.min(N,d+100663296);e:{N=(Math.min(2147483648,65536*Math.ceil(Math.max(d,N)/65536))-O.buffer.byteLength+65535)/65536|0;try{O.grow(N),We();var M=1;break e}catch{}M=void 0}if(M)return!0}return!1},E:(d,_)=>{var S=0;return wr().forEach((N,M)=>{var X=_+S;for(M=ve[d+4*M>>2]=X,X=0;X<N.length;++X)V[M++]=N.charCodeAt(X);V[M]=0,S+=N.length+1}),0},F:(d,_)=>{var S=wr();ve[d>>2]=S.length;var N=0;return S.forEach(M=>N+=M.length+1),ve[_>>2]=N,0},e:function(d){try{var _=at(d);return zs(_),0}catch(S){if(typeof Ge>"u"||S.name!=="ErrnoError")throw S;return S.Pa}},p:function(d,_){try{var S=at(d);return V[_]=S.tty?2:rn(S.mode)?3:(S.mode&61440)===40960?7:4,U[_+2>>1]=0,P[_+8>>3]=BigInt(0),P[_+16>>3]=BigInt(0),0}catch(N){if(typeof Ge>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},w:function(d,_,S,N){try{e:{var M=at(d);d=_;for(var X,se=_=0;se<S;se++){var Ne=ve[d>>2],ke=ve[d+4>>2];d+=8;var Ue=Tr(M,V,Ne,ke,X);if(0>Ue){var gt=-1;break e}if(_+=Ue,Ue<ke)break;typeof X<"u"&&(X+=Ue)}gt=_}return ve[N>>2]=gt,0}catch(Qt){if(typeof Ge>"u"||Qt.name!=="ErrnoError")throw Qt;return Qt.Pa}},D:function(d,_,S,N){_=-9007199254740992>_||9007199254740992<_?NaN:Number(_);try{if(isNaN(_))return 61;var M=at(d);return xa(M,_,S),P[N>>3]=BigInt(M.position),M.ob&&_===0&&S===0&&(M.ob=null),0}catch(X){if(typeof Ge>"u"||X.name!=="ErrnoError")throw X;return X.Pa}},I:function(d){try{var _=at(d);return _.Ma?.fsync?_.Ma.fsync(_):0}catch(S){if(typeof Ge>"u"||S.name!=="ErrnoError")throw S;return S.Pa}},t:function(d,_,S,N){try{e:{var M=at(d);d=_;for(var X,se=_=0;se<S;se++){var Ne=ve[d>>2],ke=ve[d+4>>2];d+=8;var Ue=Ps(M,V,Ne,ke,X);if(0>Ue){var gt=-1;break e}if(_+=Ue,Ue<ke)break;typeof X<"u"&&(X+=Ue)}gt=_}return ve[N>>2]=gt,0}catch(Qt){if(typeof Ge>"u"||Qt.name!=="ErrnoError")throw Qt;return Qt.Pa}},k:br},be;(async function(){function d(S){return be=S.exports,O=be.M,We(),En=be.O,$e--,g.monitorRunDependencies?.($e),$e==0&&B&&(S=B,B=null,S()),be}$e++,g.monitorRunDependencies?.($e);var _={a:Ar};return g.instantiateWasm?new Promise(S=>{g.instantiateWasm(_,(N,M)=>{d(N),S(N.exports)})}):(ye??=g.locateFile?g.locateFile("sql-wasm.wasm",G):G+"sql-wasm.wasm",d((await Ke(_)).instance))})(),g._sqlite3_free=d=>(g._sqlite3_free=be.P)(d),g._sqlite3_value_text=d=>(g._sqlite3_value_text=be.Q)(d),g._sqlite3_prepare_v2=(d,_,S,N,M)=>(g._sqlite3_prepare_v2=be.R)(d,_,S,N,M),g._sqlite3_step=d=>(g._sqlite3_step=be.S)(d),g._sqlite3_reset=d=>(g._sqlite3_reset=be.T)(d),g._sqlite3_exec=(d,_,S,N,M)=>(g._sqlite3_exec=be.U)(d,_,S,N,M),g._sqlite3_finalize=d=>(g._sqlite3_finalize=be.V)(d),g._sqlite3_column_name=(d,_)=>(g._sqlite3_column_name=be.W)(d,_),g._sqlite3_column_text=(d,_)=>(g._sqlite3_column_text=be.X)(d,_),g._sqlite3_column_type=(d,_)=>(g._sqlite3_column_type=be.Y)(d,_),g._sqlite3_errmsg=d=>(g._sqlite3_errmsg=be.Z)(d),g._sqlite3_clear_bindings=d=>(g._sqlite3_clear_bindings=be._)(d),g._sqlite3_value_blob=d=>(g._sqlite3_value_blob=be.$)(d),g._sqlite3_value_bytes=d=>(g._sqlite3_value_bytes=be.aa)(d),g._sqlite3_value_double=d=>(g._sqlite3_value_double=be.ba)(d),g._sqlite3_value_int=d=>(g._sqlite3_value_int=be.ca)(d),g._sqlite3_value_type=d=>(g._sqlite3_value_type=be.da)(d),g._sqlite3_result_blob=(d,_,S,N)=>(g._sqlite3_result_blob=be.ea)(d,_,S,N),g._sqlite3_result_double=(d,_)=>(g._sqlite3_result_double=be.fa)(d,_),g._sqlite3_result_error=(d,_,S)=>(g._sqlite3_result_error=be.ga)(d,_,S),g._sqlite3_result_int=(d,_)=>(g._sqlite3_result_int=be.ha)(d,_),g._sqlite3_result_int64=(d,_)=>(g._sqlite3_result_int64=be.ia)(d,_),g._sqlite3_result_null=d=>(g._sqlite3_result_null=be.ja)(d),g._sqlite3_result_text=(d,_,S,N)=>(g._sqlite3_result_text=be.ka)(d,_,S,N),g._sqlite3_aggregate_context=(d,_)=>(g._sqlite3_aggregate_context=be.la)(d,_),g._sqlite3_column_count=d=>(g._sqlite3_column_count=be.ma)(d),g._sqlite3_data_count=d=>(g._sqlite3_data_count=be.na)(d),g._sqlite3_column_blob=(d,_)=>(g._sqlite3_column_blob=be.oa)(d,_),g._sqlite3_column_bytes=(d,_)=>(g._sqlite3_column_bytes=be.pa)(d,_),g._sqlite3_column_double=(d,_)=>(g._sqlite3_column_double=be.qa)(d,_),g._sqlite3_bind_blob=(d,_,S,N,M)=>(g._sqlite3_bind_blob=be.ra)(d,_,S,N,M),g._sqlite3_bind_double=(d,_,S)=>(g._sqlite3_bind_double=be.sa)(d,_,S),g._sqlite3_bind_int=(d,_,S)=>(g._sqlite3_bind_int=be.ta)(d,_,S),g._sqlite3_bind_text=(d,_,S,N,M)=>(g._sqlite3_bind_text=be.ua)(d,_,S,N,M),g._sqlite3_bind_parameter_index=(d,_)=>(g._sqlite3_bind_parameter_index=be.va)(d,_),g._sqlite3_sql=d=>(g._sqlite3_sql=be.wa)(d),g._sqlite3_normalized_sql=d=>(g._sqlite3_normalized_sql=be.xa)(d),g._sqlite3_changes=d=>(g._sqlite3_changes=be.ya)(d),g._sqlite3_close_v2=d=>(g._sqlite3_close_v2=be.za)(d),g._sqlite3_create_function_v2=(d,_,S,N,M,X,se,Ne,ke)=>(g._sqlite3_create_function_v2=be.Aa)(d,_,S,N,M,X,se,Ne,ke),g._sqlite3_update_hook=(d,_,S)=>(g._sqlite3_update_hook=be.Ba)(d,_,S),g._sqlite3_open=(d,_)=>(g._sqlite3_open=be.Ca)(d,_);var Pi=g._malloc=d=>(Pi=g._malloc=be.Da)(d),ii=g._free=d=>(ii=g._free=be.Ea)(d);g._RegisterExtensionFunctions=d=>(g._RegisterExtensionFunctions=be.Fa)(d);var Ss=(d,_)=>(Ss=be.Ga)(d,_),Fs=(d,_)=>(Fs=be.Ha)(d,_),hi=d=>(hi=be.Ia)(d),on=d=>(on=be.Ja)(d),Tn=()=>(Tn=be.Ka)();g.stackSave=()=>Tn(),g.stackRestore=d=>hi(d),g.stackAlloc=d=>on(d),g.cwrap=(d,_,S,N)=>{var M=!S||S.every(X=>X==="number"||X==="boolean");return _!=="string"&&M&&!N?g["_"+d]:(...X)=>fo(d,_,S,X)},g.addFunction=Dn,g.removeFunction=ni,g.UTF8ToString=qs,g.ALLOC_NORMAL=Ts,g.allocate=bs,g.allocateUTF8OnStack=vn;function os(){function d(){if(g.calledRun=!0,!D){if(!g.noFSInit&&!_s){var _,S;_s=!0,N??=g.stdin,_??=g.stdout,S??=g.stderr,N?Nt("stdin",N):xn("/dev/tty","/dev/stdin"),_?Nt("stdout",null,_):xn("/dev/tty","/dev/stdout"),S?Nt("stderr",null,S):xn("/dev/tty1","/dev/stderr"),Vi("/dev/stdin",0),Vi("/dev/stdout",1),Vi("/dev/stderr",1)}if(be.N(),Xt=!1,g.onRuntimeInitialized?.(),g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;){var N=g.postRun.shift();jt.unshift(N)}Kt(jt)}}if(0<$e)B=os;else{if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)ba();Kt(ps),0<$e?B=os:g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),d()},1)):d()}}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return os(),y}),i)};s.exports=a,s.exports.default=a})(Xh)),Xh.exports}var RS=NS();const QE=dS(RS),CS=`
CREATE TABLE IF NOT EXISTS domains (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  color TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS goals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  domain_id INTEGER NOT NULL REFERENCES domains(id),
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS quests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  goal_id INTEGER NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'active',
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS steps (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  quest_id INTEGER NOT NULL REFERENCES quests(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  priority TEXT NOT NULL DEFAULT 'normal',
  status TEXT NOT NULL DEFAULT 'pending',
  sort_order INTEGER NOT NULL DEFAULT 0,
  completed_at TEXT
);

CREATE TABLE IF NOT EXISTS buff_definitions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  type TEXT NOT NULL DEFAULT 'buff',
  icon TEXT NOT NULL DEFAULT '',
  duration_hours INTEGER NOT NULL DEFAULT 24,
  stat_effects TEXT NOT NULL DEFAULT '{}',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS buff_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  definition_id INTEGER NOT NULL REFERENCES buff_definitions(id) ON DELETE CASCADE,
  activated_at TEXT NOT NULL DEFAULT (datetime('now')),
  expires_at TEXT NOT NULL,
  is_active INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS character (
  id INTEGER PRIMARY KEY CHECK (id = 1),
  name TEXT NOT NULL DEFAULT 'Adventurer',
  total_xp INTEGER NOT NULL DEFAULT 0,
  level INTEGER NOT NULL DEFAULT 1,
  title TEXT NOT NULL DEFAULT 'Novice',
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS xp_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  amount INTEGER NOT NULL,
  reason TEXT NOT NULL,
  source_type TEXT NOT NULL,
  source_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS planner_events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL DEFAULT '',
  date TEXT NOT NULL,
  start_time TEXT,
  end_time TEXT,
  quest_id INTEGER REFERENCES quests(id) ON DELETE SET NULL,
  step_id INTEGER REFERENCES steps(id) ON DELETE SET NULL,
  is_completed INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL DEFAULT (datetime('now'))
);
`,xS=`
INSERT OR IGNORE INTO domains (id, name, icon, color) VALUES
  (1, 'Health', '', '#e74c3c'),
  (2, 'Career', '', '#c8a84e'),
  (3, 'Learning', '', '#3498db'),
  (4, 'Social', '', '#e67e22'),
  (5, 'Finance', '', '#2ecc71'),
  (6, 'Creative', '', '#9b59b6'),
  (7, 'Spiritual', '', '#1abc9c'),
  (8, 'Home', '', '#95a5a6');
`,DS=`
INSERT OR IGNORE INTO character (id, name, total_xp, level, title)
VALUES (1, 'Adventurer', 0, 1, 'Novice');
`,IS="goal-game-db",ll="database",$E="main";let oi=null;function KE(){return new Promise((s,e)=>{const i=indexedDB.open(IS,1);i.onupgradeneeded=()=>{const a=i.result;a.objectStoreNames.contains(ll)||a.createObjectStore(ll)},i.onsuccess=()=>s(i.result),i.onerror=()=>e(i.error)})}async function OS(){const s=await KE();return new Promise((e,i)=>{const a=s.transaction(ll,"readonly"),u=a.objectStore(ll).get($E);u.onsuccess=()=>e(u.result??null),u.onerror=()=>i(u.error),a.oncomplete=()=>s.close()})}async function kS(s){const e=await KE();return new Promise((i,a)=>{const l=e.transaction(ll,"readwrite");l.objectStore(ll).put(s,$E),l.oncomplete=()=>{e.close(),i()},l.onerror=()=>a(l.error)})}async function jS(){if(oi)return oi;const s=await QE({locateFile:()=>"/goal-game/sql-wasm.wasm"}),e=await OS();return e?oi=new s.Database(e):oi=new s.Database,oi.run(CS),oi.run(xS),oi.run(DS),await Je(),oi}async function Je(){if(!oi)return;const s=oi.export();await kS(s)}function Ce(){if(!oi)throw new Error("Database not initialized. Call getDatabase() first.");return oi}async function Pm(){return Ce().export()}async function WE(s){const e=await QE({locateFile:()=>"/goal-game/sql-wasm.wasm"});oi&&oi.close(),oi=new e.Database(s),await Je()}const Yh="migration_feb2026_billing_v1";async function LS(){if(localStorage.getItem(Yh))return!1;const s=Ce(),e=s.exec("SELECT id FROM goals WHERE title = 'Bill 190 Hours - February 2026'");if(e.length>0&&e[0].values.length>0)return localStorage.setItem(Yh,"true"),!1;s.run(`
    INSERT INTO goals (domain_id, title, description, status)
    VALUES (2, 'Bill 190 Hours - February 2026', 'Target: 8 hours on weekdays, ~4.5 hours on weekends. Started with 8 hours billed.', 'active')
  `);const a=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0],l=[{title:"Week 1: Feb 3-9",description:"First partial week. Target: ~41 hours (4 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-03",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-04",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-05",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-06",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-07",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-08",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 2: Feb 9-15",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-09",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-10",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-11",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-12",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-13",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-14",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-15",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 3: Feb 16-22",description:"Full week. Target: ~49 hours (5 weekdays  8 + 2 weekend days  4.5)",days:[{date:"2026-02-16",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-17",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-18",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-19",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-20",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-21",day:"Sat",hours:4.5,isWeekend:!0},{date:"2026-02-22",day:"Sun",hours:4.5,isWeekend:!0}]},{title:"Week 4: Feb 23-28",description:"Final partial week. Target: ~44.5 hours (5 weekdays  8 + 1 weekend day  4.5)",days:[{date:"2026-02-23",day:"Mon",hours:8,isWeekend:!1},{date:"2026-02-24",day:"Tue",hours:8,isWeekend:!1},{date:"2026-02-25",day:"Wed",hours:8,isWeekend:!1},{date:"2026-02-26",day:"Thu",hours:8,isWeekend:!1},{date:"2026-02-27",day:"Fri",hours:8,isWeekend:!1},{date:"2026-02-28",day:"Sat",hours:4.5,isWeekend:!0}]}];for(const u of l){s.run(`
      INSERT INTO quests (goal_id, title, description, priority, status)
      VALUES (?, ?, ?, 'high', 'active')
    `,[a,u.title,u.description]);const y=s.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(let E=0;E<u.days.length;E++){const g=u.days[E],w=`${g.day} ${g.date.slice(5)}: Bill ${g.hours} hours`;s.run(`
        INSERT INTO steps (quest_id, title, priority, status, sort_order)
        VALUES (?, ?, ?, 'pending', ?)
      `,[y,w,g.isWeekend?"low":"normal",E])}}return await Je(),localStorage.setItem(Yh,"true"),!0}const dv="notifications_migration_v1";async function MS(){if(localStorage.getItem(dv))return;const s=Ce();try{(s.exec("PRAGMA table_info(planner_events)")[0]?.values.map(a=>a[1])||[]).includes("reminder_minutes")||s.run("ALTER TABLE planner_events ADD COLUMN reminder_minutes INTEGER DEFAULT NULL"),s.run(`
      CREATE TABLE IF NOT EXISTS notification_settings (
        id INTEGER PRIMARY KEY CHECK (id = 1),
        enabled INTEGER NOT NULL DEFAULT 0,
        default_reminder_minutes INTEGER NOT NULL DEFAULT 15,
        fcm_token TEXT,
        device_id TEXT NOT NULL,
        updated_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),await Je(),localStorage.setItem(dv,"true"),console.log("Notifications migration completed successfully")}catch(e){throw console.error("Failed to run notifications migration:",e),e}}const hv="body_fat_goal_seed_v4";async function VS(){if(localStorage.getItem(hv))return;const s=Ce();try{const e=s.exec("SELECT id FROM goals WHERE title = 'Achieve 12% Body Fat'");if(e.length&&e[0].values.length){const g=e[0].values[0][0],w=s.exec("SELECT id FROM quests WHERE goal_id = ?",[g]);if(w.length)for(const C of w[0].values)s.run("DELETE FROM steps WHERE quest_id = ?",[C[0]]);s.run("DELETE FROM quests WHERE goal_id = ?",[g]),s.run("DELETE FROM goals WHERE id = ?",[g])}s.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[1,"Achieve 12% Body Fat","12-week transformation program starting Feb 4, 2026. From 18-19% to 12% body fat through consistent training and nutrition."]);const a=s.exec("SELECT last_insert_rowid()")[0].values[0][0],l=new Date(2026,1,4,12,0,0),u=[{title:"Week 1 - Build Foundation",desc:"Establish daily habits and set your baseline."},{title:"Week 2 - Gain Momentum",desc:"Lock in the routine. Consistency is key."},{title:"Week 3 - Stay Disciplined",desc:"Push through early challenges. Trust the process."},{title:"Week 4 - Complete Month 1",desc:"First month done! Take measurements and assess progress."},{title:"Week 5 - Intensify",desc:"Increase intensity. Your body is adapting."},{title:"Week 6 - Push Through",desc:"Mental toughness week. No excuses."},{title:"Week 7 - Halfway Point",desc:"You're halfway there! Stay focused."},{title:"Week 8 - Stay Strong",desc:"Month 2 complete. Reassess and adjust if needed."},{title:"Week 9 - Final Month Begins",desc:"Last 4 weeks. Time to lock in."},{title:"Week 10 - Home Stretch",desc:"You can see the finish line. Don't let up."},{title:"Week 11 - Almost There",desc:"One more week after this. Give it everything."},{title:"Week 12 - Finish Strong",desc:"Final week! Complete the transformation."}],m=[{dayName:"Wed",workout:"Light Cardio (20-30 min)",isGym:!1},{dayName:"Thu",workout:"Gym - Legs (Quads/Hams/Glutes)",isGym:!0},{dayName:"Fri",workout:"Gym - Upper Body",isGym:!0},{dayName:"Sat",workout:"Gym - Lower Body / Deadlifts",isGym:!0},{dayName:"Sun",workout:"Rest + Weekly Check-in",isGym:!1},{dayName:"Mon",workout:"Gym - Push (Chest/Shoulders/Triceps)",isGym:!0},{dayName:"Tue",workout:"Gym - Pull (Back/Biceps)",isGym:!0}],y=g=>{const w=g.getMonth()+1,C=g.getDate();return`${w}/${C}`};let E=new Date(l);for(let g=0;g<u.length;g++){const w=u[g],C=y(E),I=y(new Date(E.getTime()+8640*60*1e3));s.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[a,`${w.title} (${C} - ${I})`,w.desc,"high"]);const W=s.exec("SELECT last_insert_rowid()")[0].values[0][0];let ne=1;for(let G=0;G<7;G++){const z=m[G],le=y(E);s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[W,`${z.dayName} ${le}: ${z.workout}`,"normal",ne++]),s.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[W,`${z.dayName} ${le}: Hit protein goal`,"normal",ne++]),E.setDate(E.getDate()+1)}}await Je(),localStorage.setItem(hv,"true"),console.log("Body fat goal seeded successfully (v3 - starting Wed 2/4/2026)")}catch(e){throw console.error("Failed to seed body fat goal:",e),e}}const mv="daily_quests_migration_v1";async function US(){if(localStorage.getItem(mv))return;const s=Ce();try{s.run(`
      CREATE TABLE IF NOT EXISTS daily_quests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        quest_type TEXT NOT NULL,
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        target_value INTEGER NOT NULL DEFAULT 1,
        current_value INTEGER NOT NULL DEFAULT 0,
        xp_reward INTEGER NOT NULL DEFAULT 25,
        is_completed INTEGER NOT NULL DEFAULT 0,
        completed_at TEXT
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS daily_quest_bonus (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL UNIQUE,
        claimed_at TEXT NOT NULL
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_daily_quests_date ON daily_quests(date)"),await Je(),localStorage.setItem(mv,"true"),console.log("Daily quests migration completed successfully")}catch(e){throw console.error("Failed to run daily quests migration:",e),e}}const pv="streak_migration_v1";async function BS(){if(localStorage.getItem(pv))return;const s=Ce();try{s.run(`
      CREATE TABLE IF NOT EXISTS streak_shields (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        quantity INTEGER NOT NULL DEFAULT 0,
        earned_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.exec("SELECT COUNT(*) FROM streak_shields")[0].values[0][0]===0&&s.run("INSERT INTO streak_shields (quantity) VALUES (3)"),s.run(`
      CREATE TABLE IF NOT EXISTS streak_freezes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        freeze_date TEXT NOT NULL,
        reason TEXT,
        created_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE,
        UNIQUE(buff_definition_id, freeze_date)
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL UNIQUE,
        longest_streak INTEGER NOT NULL DEFAULT 0,
        last_milestone_claimed INTEGER NOT NULL DEFAULT 0,
        updated_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS streak_shield_uses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        buff_definition_id INTEGER NOT NULL,
        used_date TEXT NOT NULL,
        streak_saved INTEGER NOT NULL,
        used_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (buff_definition_id) REFERENCES buff_definitions(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_date ON streak_freezes(freeze_date)"),s.run("CREATE INDEX IF NOT EXISTS idx_streak_freezes_buff ON streak_freezes(buff_definition_id)"),await Je(),localStorage.setItem(pv,"true"),console.log("Streak migration completed successfully")}catch(e){throw console.error("Failed to run streak migration:",e),e}}const gv="weekly_boss_migration_v1";async function qS(){if(localStorage.getItem(gv))return;const s=Ce();try{s.run(`
      CREATE TABLE IF NOT EXISTS weekly_boss (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        week_start TEXT NOT NULL UNIQUE,
        boss_type TEXT NOT NULL,
        name TEXT NOT NULL,
        description TEXT NOT NULL,
        icon TEXT NOT NULL,
        max_hp INTEGER NOT NULL,
        current_hp INTEGER NOT NULL,
        is_defeated INTEGER NOT NULL DEFAULT 0,
        defeated_at TEXT,
        xp_reward INTEGER NOT NULL,
        bonus_shields INTEGER NOT NULL DEFAULT 0,
        created_at TEXT NOT NULL DEFAULT (datetime('now'))
      )
    `),s.run(`
      CREATE TABLE IF NOT EXISTS boss_damage_log (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        boss_id INTEGER NOT NULL,
        damage_type TEXT NOT NULL,
        damage_amount INTEGER NOT NULL,
        source_description TEXT,
        dealt_at TEXT NOT NULL DEFAULT (datetime('now')),
        FOREIGN KEY (boss_id) REFERENCES weekly_boss(id) ON DELETE CASCADE
      )
    `),s.run("CREATE INDEX IF NOT EXISTS idx_weekly_boss_week ON weekly_boss(week_start)"),s.run("CREATE INDEX IF NOT EXISTS idx_boss_damage_log_boss ON boss_damage_log(boss_id)"),await Je(),localStorage.setItem(gv,"true"),console.log("Weekly boss migration completed successfully")}catch(e){throw console.error("Failed to run weekly boss migration:",e),e}}function zS(){const[s,e]=ee.useState(!1),[i,a]=ee.useState(null);return ee.useEffect(()=>{jS().then(async()=>{await LS(),await MS(),await VS(),await US(),await BS(),await qS(),e(!0)}).catch(l=>a(l.message))},[]),{ready:s,error:i}}function _v(){const e=Ce().exec("SELECT id, name, total_xp, level, title, created_at FROM character WHERE id = 1");if(!e.length)throw new Error("Character not found");const i=e[0].values[0];return{id:i[0],name:i[1],total_xp:i[2],level:i[3],title:i[4],created_at:i[5]}}async function PS(s){Ce().run("UPDATE character SET name = ? WHERE id = 1",[s]),await Je()}function yv(s=50){const i=Ce().exec(`SELECT id, amount, reason, source_type, source_id, created_at
     FROM xp_log ORDER BY created_at DESC LIMIT ?`,[s]);return i.length?i[0].values.map(a=>({id:a[0],amount:a[1],reason:a[2],source_type:a[3],source_id:a[4],created_at:a[5]})):[]}const ZE=["stamina","willpower","health","focus","charisma"],tr=["Novice","Apprentice","Journeyman","Adept","Expert","Master","Legend","Dragonborn"],HS={normal:10,important:15,legendary:20},FS=50,GS=200,XS=5,YS=25,QS=1.8,$S=50;function Hm(s){return Math.floor($S*Math.pow(s,QS))}function KS(s){let e=0;for(let i=1;i<s;i++)e+=Hm(i);return e}function JE(s){let e=1,i=0;for(;;){if(i+=Hm(e),s<i)return e;if(e++,e>100)return 100}}function e0(s){const e=JE(s),i=KS(e),a=s-i,l=Hm(e);return{current:a,needed:l,percentage:Math.min(a/l*100,100)}}function WS(s){return s>=50?tr[7]:s>=40?tr[6]:s>=30?tr[5]:s>=22?tr[4]:s>=15?tr[3]:s>=10?tr[2]:s>=5?tr[1]:tr[0]}async function ZS(s,e,i,a=null){const l=Ce(),u=l.exec("SELECT total_xp, level FROM character WHERE id = 1"),m=u[0].values[0][0],y=u[0].values[0][1],E=m+s,g=JE(E),w=WS(g),C=g>y;return l.run("UPDATE character SET total_xp = ?, level = ?, title = ? WHERE id = 1",[E,g,w]),l.run("INSERT INTO xp_log (amount, reason, source_type, source_id) VALUES (?, ?, ?, ?)",[s,e,i,a]),await Je(),{amount:s,newTotal:E,leveledUp:C,newLevel:g,newTitle:w}}function JS(){const[s,e]=ee.useState(()=>_v()),[i,a]=ee.useState(()=>yv()),[l,u]=ee.useState(null),[m,y]=ee.useState([]),E=ee.useCallback(()=>{e(_v()),a(yv())},[]),g=ee.useCallback(async(I,$,W,ne)=>{const G=await ZS(I,$,W,ne??null);G.leveledUp&&u({level:G.newLevel,title:G.newTitle});const z=Date.now();return y(le=>[...le,{id:z,amount:I}]),setTimeout(()=>y(le=>le.filter(me=>me.id!==z)),1500),E(),G},[E]),w=ee.useCallback(()=>u(null),[]),C=ee.useCallback(async I=>{await PS(I),E()},[E]);return{character:s,xpLog:i,levelUpInfo:l,xpFloats:m,grantXP:g,dismissLevelUp:w,setName:C,refresh:E}}function t0(){const e=Ce().exec("SELECT id, name, icon, color FROM domains ORDER BY id");return e.length?e[0].values.map(i=>({id:i[0],name:i[1],icon:i[2],color:i[3]})):[]}function ew(s,e){const i=Ce();let a="SELECT id, domain_id, title, description, status, created_at, completed_at FROM goals WHERE 1=1";const l=[];s&&(a+=" AND domain_id = ?",l.push(s)),e&&(a+=" AND status = ?",l.push(e)),a+=" ORDER BY created_at DESC";const u=i.exec(a,l);return u.length?u[0].values.map(m=>({id:m[0],domain_id:m[1],title:m[2],description:m[3],status:m[4],created_at:m[5],completed_at:m[6]})):[]}async function tw(s,e,i=""){const a=Ce();a.run("INSERT INTO goals (domain_id, title, description) VALUES (?, ?, ?)",[s,e,i]);const l=a.exec("SELECT last_insert_rowid()");return await Je(),l[0].values[0][0]}async function nw(s,e){const i=Ce(),a=new Date().toISOString();i.run("UPDATE goals SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await Je()}function Fm(s,e){const i=Ce();let a="SELECT id, goal_id, title, description, priority, status, created_at, completed_at FROM quests WHERE 1=1";const l=[];s&&(a+=" AND goal_id = ?",l.push(s)),a+=" ORDER BY created_at DESC";const u=i.exec(a,l);return u.length?u[0].values.map(m=>({id:m[0],goal_id:m[1],title:m[2],description:m[3],priority:m[4],status:m[5],created_at:m[6],completed_at:m[7]})):[]}async function iw(s,e,i="",a="normal"){const l=Ce();l.run("INSERT INTO quests (goal_id, title, description, priority) VALUES (?, ?, ?, ?)",[s,e,i,a]);const u=l.exec("SELECT last_insert_rowid()");return await Je(),u[0].values[0][0]}async function sw(s,e){const i=Ce(),a=new Date().toISOString();i.run("UPDATE quests SET status = ?, completed_at = ? WHERE id = ?",[e,a,s]),await Je()}function Gm(s){const i=Ce().exec("SELECT id, quest_id, title, priority, status, sort_order, completed_at FROM steps WHERE quest_id = ? ORDER BY sort_order, id",[s]);return i.length?i[0].values.map(a=>({id:a[0],quest_id:a[1],title:a[2],priority:a[3],status:a[4],sort_order:a[5],completed_at:a[6]})):[]}async function aw(s,e,i="normal"){const a=Ce(),u=a.exec("SELECT COALESCE(MAX(sort_order), 0) FROM steps WHERE quest_id = ?",[s])[0].values[0][0]+1;a.run("INSERT INTO steps (quest_id, title, priority, sort_order) VALUES (?, ?, ?, ?)",[s,e,i,u]);const m=a.exec("SELECT last_insert_rowid()");return await Je(),m[0].values[0][0]}async function rw(s){Ce().run("UPDATE steps SET status = 'completed', completed_at = datetime('now') WHERE id = ?",[s]),await Je()}async function ow(s){Ce().run("UPDATE steps SET status = 'pending', completed_at = NULL WHERE id = ?",[s]),await Je()}async function lw(s){Ce().run("DELETE FROM steps WHERE id = ?",[s]),await Je()}async function uw(s){const e=Ce();e.run("DELETE FROM steps WHERE quest_id = ?",[s]),e.run("DELETE FROM quests WHERE id = ?",[s]),await Je()}async function cw(s){const e=Ce(),i=Fm(s);for(const a of i)e.run("DELETE FROM steps WHERE quest_id = ?",[a.id]);e.run("DELETE FROM quests WHERE goal_id = ?",[s]),e.run("DELETE FROM goals WHERE id = ?",[s]),await Je()}function fw(s){const i=Ce().exec(`SELECT q.id, q.goal_id, q.title, q.description, q.priority, q.status, q.created_at, q.completed_at,
            d.name as domain_name, d.icon as domain_icon, d.color as domain_color, g.title as goal_title
     FROM quests q
     JOIN goals g ON q.goal_id = g.id
     JOIN domains d ON g.domain_id = d.id
     WHERE q.id = ?`,[s]);if(!i.length)return null;const a=i[0].values[0];return{id:a[0],goal_id:a[1],title:a[2],description:a[3],priority:a[4],status:a[5],created_at:a[6],completed_at:a[7],domain_name:a[8],domain_icon:a[9],domain_color:a[10],goal_title:a[11],steps:Gm(s)}}function dw(s,e){const i=ew(s,e),a=t0(),l=new Map(a.map(u=>[u.id,u]));return i.map(u=>{const m=l.get(u.domain_id),y=Fm(u.id).map(E=>({...E,steps:Gm(E.id),domain_name:m?.name,domain_icon:m?.icon,domain_color:m?.color,goal_title:u.title}));return{...u,quests:y,domain_name:m?.name,domain_icon:m?.icon,domain_color:m?.color}})}function hw({grantXP:s,onStepComplete:e,onQuestComplete:i,onGoalComplete:a}){const[l,u]=ee.useState([]),[m]=ee.useState(()=>t0()),[y,E]=ee.useState(void 0),[g,w]=ee.useState("active"),C=ee.useCallback(()=>{u(dw(y,g))},[y,g]);ee.useEffect(()=>{C()},[C]);const I=ee.useCallback(async(he,Ae,xe)=>{await tw(he,Ae,xe),C()},[C]),$=ee.useCallback(async(he,Ae,xe,O)=>{await iw(he,Ae,xe,O),C()},[C]),W=ee.useCallback(async(he,Ae,xe)=>{await aw(he,Ae,xe),C()},[C]),ne=ee.useCallback(async(he,Ae,xe)=>{await rw(he);const O=HS[xe]||10;await s(O,"Completed step","step",he),e&&e();const D=Gm(Ae);if(D.every(V=>V.status==="completed")&&D.length>0){await sw(Ae,"completed"),await s(FS,"Completed quest","quest",Ae),i&&i();const V=fw(Ae);V&&Fm(V.goal_id).every(x=>x.status==="completed")&&(await nw(V.goal_id,"completed"),await s(GS,"Completed goal","goal",V.goal_id),a&&a())}C()},[C,s,e,i,a]),G=ee.useCallback(async he=>{await ow(he),C()},[C]),z=ee.useCallback(async he=>{await lw(he),C()},[C]),le=ee.useCallback(async he=>{await uw(he),C()},[C]),me=ee.useCallback(async he=>{await cw(he),C()},[C]);return{goals:l,domains:m,filterDomain:y,filterStatus:g,setFilterDomain:E,setFilterStatus:w,refresh:C,createGoal:I,createQuest:$,createStep:W,completeStep:ne,uncompleteStep:G,deleteStep:z,deleteQuest:le,deleteGoal:me}}function mw(s){const e=Ce();let i="SELECT id, name, description, type, icon, duration_hours, stat_effects, created_at FROM buff_definitions";const a=[];i+=" ORDER BY name";const l=e.exec(i,a);return l.length?l[0].values.map(u=>({id:u[0],name:u[1],description:u[2],type:u[3],icon:u[4],duration_hours:u[5],stat_effects:u[6],created_at:u[7]})):[]}async function pw(s,e,i,a,l,u){const m=Ce();m.run("INSERT INTO buff_definitions (name, description, type, icon, duration_hours, stat_effects) VALUES (?, ?, ?, ?, ?, ?)",[s,e,i,a,l,u]);const y=m.exec("SELECT last_insert_rowid()");return await Je(),y[0].values[0][0]}async function gw(s){const e=Ce();e.run("DELETE FROM buff_log WHERE definition_id = ?",[s]),e.run("DELETE FROM buff_definitions WHERE id = ?",[s]),await Je()}async function _w(s){const e=Ce(),i=e.exec("SELECT duration_hours FROM buff_definitions WHERE id = ?",[s]);if(!i.length)throw new Error("Buff definition not found");const a=i[0].values[0][0],l=e.exec(`SELECT id, expires_at FROM buff_log
     WHERE definition_id = ? AND is_active = 1 AND expires_at > datetime('now')
     ORDER BY expires_at DESC LIMIT 1`,[s]);if(l.length&&l[0].values.length){const g=l[0].values[0][0];e.run(`UPDATE buff_log SET expires_at = datetime(expires_at, '+' || ? || ' hours')
       WHERE id = ?`,[a,g]);const C=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[g])[0].values[0][0];return await Je(),{logId:g,isStacked:!0,newExpiresAt:C}}e.run(`INSERT INTO buff_log (definition_id, expires_at)
     VALUES (?, datetime('now', '+' || ? || ' hours'))`,[s,a]);const m=e.exec("SELECT last_insert_rowid()")[0].values[0][0],E=e.exec("SELECT expires_at FROM buff_log WHERE id = ?",[m])[0].values[0][0];return await Je(),{logId:m,isStacked:!1,newExpiresAt:E}}async function yw(s){Ce().run("UPDATE buff_log SET is_active = 0 WHERE id = ?",[s]),await Je()}function vw(s){const i=Ce().exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-30 days')
     ORDER BY d DESC`,[s]);if(!i.length)return 0;let a=0;const l=new Date().toISOString().split("T")[0],u=i[0].values.map(E=>E[0]),m=new Date(Date.now()-864e5).toISOString().split("T")[0];if(!u.includes(l)&&!u.includes(m))return 0;let y=u.includes(l)?l:m;for(const E of u)if(E===y){a++;const g=new Date(y+"T00:00:00");g.setDate(g.getDate()-1),y=g.toISOString().split("T")[0]}return a}function bf(s){try{return JSON.parse(s)}catch{return{}}}async function Ew(){Ce().run("UPDATE buff_log SET is_active = 0 WHERE is_active = 1 AND expires_at <= datetime('now')"),await Je()}function Tw(){const e=Ce().exec(`
    SELECT bl.id, bl.definition_id, bl.activated_at, bl.expires_at, bl.is_active,
           bd.name, bd.description, bd.type, bd.icon, bd.stat_effects
    FROM buff_log bl
    JOIN buff_definitions bd ON bl.definition_id = bd.id
    WHERE bl.is_active = 1 AND bl.expires_at > datetime('now')
    ORDER BY bl.activated_at DESC
  `);return e.length?e[0].values.map(i=>({id:i[0],definition_id:i[1],activated_at:i[2],expires_at:i[3],is_active:!!i[4],name:i[5],description:i[6],type:i[7],icon:i[8],stat_effects:i[9]})):[]}function bw(s){const e={stamina:10,willpower:10,health:10,focus:10,charisma:10};for(const i of s){const a=bf(i.stat_effects);for(const[l,u]of Object.entries(a))l in e&&(e[l]+=u)}return e}function Sw({grantXP:s,scheduleBuffExpiry:e,cancelBuffExpiry:i,onBuffActivated:a}){const[l,u]=ee.useState([]),[m,y]=ee.useState([]),[E,g]=ee.useState({stamina:10,willpower:10,health:10,focus:10,charisma:10}),w=ee.useCallback(async()=>{await Ew(),u(mw());const ne=Tw();y(ne),g(bw(ne))},[]);ee.useEffect(()=>{const ne=setInterval(w,6e4);return()=>clearInterval(ne)},[w]);const C=ee.useCallback(async(ne,G,z,le,me,he)=>{await pw(ne,G,z,le,me,he),w()},[w]),I=ee.useCallback(async ne=>{await gw(ne),w()},[w]),$=ee.useCallback(async ne=>{const G=await _w(ne),z=l.find(me=>me.id===ne),le=z&&z.stat_effects&&z.stat_effects!=="{}"&&(()=>{try{const me=JSON.parse(z.stat_effects);return Object.values(me).some(he=>he!==0)}catch{return!1}})();if(z&&z.type==="buff"&&!G.isStacked&&le){await s(XS,`Activated buff: ${z.name}`,"buff",G.logId);const me=vw(ne);me>0&&me%7===0&&await s(YS,`7-day streak: ${z.name}`,"streak",ne)}z&&a&&le&&a(z.type),z&&e&&(G.isStacked&&i&&await i(G.logId),await e(G.logId,z.name,z.type,G.newExpiresAt)),w()},[w,l,s,e,i,a]),W=ee.useCallback(async ne=>{i&&await i(ne),await yw(ne),w()},[w,i]);return{definitions:l,activeBuffs:m,stats:E,refresh:w,createDefinition:C,deleteDefinition:I,activateBuff:$,deactivateBuff:W}}function Qh(s,e,i){const a=Ce();let l=`SELECT id, title, description, date, start_time, end_time, quest_id, step_id, is_completed, created_at, reminder_minutes
             FROM planner_events WHERE 1=1`;const u=[];s&&(l+=" AND date = ?",u.push(s)),e&&(l+=" AND date >= ?",u.push(e)),i&&(l+=" AND date <= ?",u.push(i)),l+=" ORDER BY date, start_time, id";const m=a.exec(l,u);return m.length?m[0].values.map(y=>({id:y[0],title:y[1],description:y[2],date:y[3],start_time:y[4],end_time:y[5],quest_id:y[6],step_id:y[7],is_completed:!!y[8],created_at:y[9],reminder_minutes:y[10]})):[]}async function ww(s,e,i="",a=null,l=null,u=null,m=null,y=null){const E=Ce();E.run(`INSERT INTO planner_events (title, description, date, start_time, end_time, quest_id, step_id, reminder_minutes)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,[s,i,e,a,l,u,m,y]);const g=E.exec("SELECT last_insert_rowid()");return await Je(),g[0].values[0][0]}async function Aw(s){Ce().run("UPDATE planner_events SET is_completed = 1 WHERE id = ?",[s]),await Je()}async function Nw(s){Ce().run("UPDATE planner_events SET is_completed = 0 WHERE id = ?",[s]),await Je()}async function Rw(s){Ce().run("DELETE FROM planner_events WHERE id = ?",[s]),await Je()}function tf(){return new Date().toISOString().split("T")[0]}function $h(s){return new Date(s+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function vv(s){const[e,i]=s.split(":").map(Number),a=e>=12?"PM":"AM";return`${e%12||12}:${i.toString().padStart(2,"0")} ${a}`}function Xm(s){const e=new Date(s+"T00:00:00"),i=e.getDay(),a=new Date(e);a.setDate(e.getDate()-(i+6)%7);const l=[];for(let u=0;u<7;u++){const m=new Date(a);m.setDate(a.getDate()+u),l.push(m.toISOString().split("T")[0])}return l}function Cw(s,e){const i=new Date(s,e,1),a=new Date(s,e+1,0),l=(i.getDay()+6)%7,u=[];let m=new Array(l).fill(null);for(let y=1;y<=a.getDate();y++){const E=new Date(s,e,y);m.push(E.toISOString().split("T")[0]),m.length===7&&(u.push(m),m=[])}if(m.length>0){for(;m.length<7;)m.push(null);u.push(m)}return u}function Ev(s,e){const i=new Date(s+"T00:00:00");return i.setDate(i.getDate()+e),i.toISOString().split("T")[0]}function xw(s){return new Date(2e3,s).toLocaleDateString("en-US",{month:"long"})}function Dw({grantXP:s,scheduleEventReminder:e,cancelEventReminder:i,onEventComplete:a}){const[l,u]=ee.useState("day"),[m,y]=ee.useState(tf()),[E,g]=ee.useState([]),w=ee.useCallback(()=>{if(l==="day")g(Qh(m));else if(l==="week"){const z=Xm(m);g(Qh(void 0,z[0],z[6]))}else{const z=new Date(m+"T00:00:00"),le=new Date(z.getFullYear(),z.getMonth(),1).toISOString().split("T")[0],me=new Date(z.getFullYear(),z.getMonth()+1,0).toISOString().split("T")[0];g(Qh(void 0,le,me))}},[l,m]);ee.useEffect(()=>{w()},[w]);const C=ee.useCallback(async(z,le,me,he,Ae,xe,O,D)=>{const j=await ww(z,le,me,he,Ae,xe,O,D);D!=null&&he&&e&&await e(j,z,le,he,D),w()},[w,e]),I=ee.useCallback(async z=>{await Aw(z);const le=E.find(me=>me.id===z);le&&(le.quest_id||le.step_id)&&await s(10,`Completed linked event: ${le.title}`,"event",z),a&&a(),i&&await i(z),w()},[w,E,s,i,a]),$=ee.useCallback(async z=>{await Nw(z),w()},[w]),W=ee.useCallback(async z=>{i&&await i(z),await Rw(z),w()},[w,i]),ne=ee.useCallback(z=>{if(l==="day")y(Ev(m,z));else if(l==="week")y(Ev(m,z*7));else{const le=new Date(m+"T00:00:00");le.setMonth(le.getMonth()+z),y(le.toISOString().split("T")[0])}},[l,m]),G=ee.useCallback(()=>y(tf()),[]);return{view:l,setView:u,currentDate:m,setCurrentDate:y,events:E,refresh:w,createEvent:C,completeEvent:I,uncompleteEvent:$,deleteEvent:W,navigateDay:ne,goToToday:G}}const Iw=1440*60*1e3,n0="Goal Game Backup",Du="github_gist_token",ha="github_gist_id",Sf="github_last_backup";function Ow(){return!!localStorage.getItem(Du)}function i0(){return!!localStorage.getItem(Du)}function wf(){return localStorage.getItem(Du)}function kw(s){localStorage.setItem(Du,s)}function jw(){localStorage.removeItem(Du),localStorage.removeItem(ha),localStorage.removeItem(Sf)}function Lw(){const s=localStorage.getItem(Sf);return s?Date.now()-Number(s)>Iw:!0}function s0(){const s=localStorage.getItem(Sf);return s?new Date(Number(s)):null}function Mw(s){let e="";for(let i=0;i<s.length;i++)e+=String.fromCharCode(s[i]);return btoa(e)}function Vw(s){const e=atob(s),i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}async function a0(s){try{const e=await fetch("https://api.github.com/gists?per_page=100",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!e.ok)return null;const i=await e.json();for(const a of i)if(a.description===n0)return a.id;return null}catch{return null}}async function Uw(s){const e=localStorage.getItem(ha);if(e){if((await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok)return e;localStorage.removeItem(ha)}const i=await a0(s);if(i)return localStorage.setItem(ha,i),i;const a=await fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({description:n0,public:!1,files:{"README.md":{content:`# Goal Game Backups

This gist contains automatic backups of your Goal Game data.

Backups are stored as base64-encoded database files.`}}})});if(!a.ok)throw new Error("Failed to create backup gist");const l=await a.json();return localStorage.setItem(ha,l.id),l.id}async function r0(s){const e=wf();if(!e)return{success:!1,error:"Not authenticated"};try{const i=await Uw(e),l=`backup-${new Date().toISOString().replace(/[:.]/g,"-")}.db.b64`,u=Mw(s),m=await fetch(`https://api.github.com/gists/${i}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:{[l]:{content:u}}})});return m.ok?(localStorage.setItem(Sf,String(Date.now())),{success:!0,fileName:l}):{success:!1,error:(await m.json()).message||"Upload failed"}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async function o0(){const s=wf();if(!s)return[];let e=localStorage.getItem(ha);if(!e)if(e=await a0(s),e)localStorage.setItem(ha,e);else return[];try{const i=await fetch(`https://api.github.com/gists/${e}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}});if(!i.ok)return[];const a=await i.json(),l=[];for(const[u,m]of Object.entries(a.files))u.endsWith(".db.b64")&&l.push({fileName:u,size:m.size});return l.sort((u,m)=>m.fileName.localeCompare(u.fileName))}catch{return[]}}async function Bw(s){const e=wf();if(!e)return null;const i=localStorage.getItem(ha);if(!i)return null;try{const a=await fetch(`https://api.github.com/gists/${i}`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json"}});if(!a.ok)return null;const u=(await a.json()).files[s];if(!u)return null;let m;return u.truncated?m=await(await fetch(u.raw_url,{headers:{Authorization:`Bearer ${e}`}})).text():m=u.content,Vw(m)}catch{return null}}async function qw(s){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json"}})).ok}catch{return!1}}async function l0(s=7){const e=wf();if(!e)return;const i=localStorage.getItem(ha);if(i)try{const a=await o0();if(a.length<=s)return;const l=a.slice(s),u={};for(const m of l)u[m.fileName]=null;await fetch(`https://api.github.com/gists/${i}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,Accept:"application/vnd.github+json","Content-Type":"application/json"},body:JSON.stringify({files:u})})}catch{}}function zw(){const[s,e]=ee.useState("idle"),[i,a]=ee.useState(null),[l,u]=ee.useState(""),m=ee.useRef(!1);return ee.useEffect(()=>{if(m.current)return;m.current=!0;const E=setTimeout(async()=>{if(Ow()&&i0()){if(!Lw()){a(s0());return}e("backing-up"),u("Auto-backing up to GitHub...");try{const g=await Pm(),w=await r0(g);w.success?(e("success"),u("Auto-backup complete!"),a(new Date),await l0(7),setTimeout(()=>{e("idle"),u("")},5e3)):(e("error"),u(`Auto-backup failed: ${w.error}`))}catch(g){e("error"),u(`Auto-backup failed: ${g instanceof Error?g.message:"Unknown error"}`)}}},3e3);return()=>clearTimeout(E)},[]),{status:s,lastBackup:i,message:l}}const Pw=()=>{};var Tv={};const u0=function(s){const e=[];let i=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},Hw=function(s){const e=[];let i=0,a=0;for(;i<s.length;){const l=s[i++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];e[a++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],m=s[i++],y=s[i++],E=((l&7)<<18|(u&63)<<12|(m&63)<<6|y&63)-65536;e[a++]=String.fromCharCode(55296+(E>>10)),e[a++]=String.fromCharCode(56320+(E&1023))}else{const u=s[i++],m=s[i++];e[a++]=String.fromCharCode((l&15)<<12|(u&63)<<6|m&63)}}return e.join("")},c0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const u=s[l],m=l+1<s.length,y=m?s[l+1]:0,E=l+2<s.length,g=E?s[l+2]:0,w=u>>2,C=(u&3)<<4|y>>4;let I=(y&15)<<2|g>>6,$=g&63;E||($=64,m||(I=64)),a.push(i[w],i[C],i[I],i[$])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(u0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Hw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],y=l<s.length?i[s.charAt(l)]:0;++l;const g=l<s.length?i[s.charAt(l)]:64;++l;const C=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||y==null||g==null||C==null)throw new Fw;const I=u<<2|y>>4;if(a.push(I),g!==64){const $=y<<4&240|g>>2;if(a.push($),C!==64){const W=g<<6&192|C;a.push(W)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gw=function(s){const e=u0(s);return c0.encodeByteArray(e,!0)},nf=function(s){return Gw(s).replace(/\./g,"")},Xw=function(s){try{return c0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Yw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Qw=()=>Yw().__FIREBASE_DEFAULTS__,$w=()=>{if(typeof process>"u"||typeof Tv>"u")return;const s=Tv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Kw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Xw(s[1]);return e&&JSON.parse(e)},Ym=()=>{try{return Pw()||Qw()||$w()||Kw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ww=s=>Ym()?.emulatorHosts?.[s],Zw=s=>{const e=Ww(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},f0=()=>Ym()?.config;class Jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}function Qm(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eA(s){return(await fetch(s,{credentials:"include"})).ok}function tA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[nf(JSON.stringify(i)),nf(JSON.stringify(m)),""].join(".")}const gu={};function nA(){const s={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?s.emulator.push(e):s.prod.push(e);return s}function iA(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let bv=!1;function sA(s,e){if(typeof window>"u"||typeof document>"u"||!Qm(window.location.host)||gu[s]===e||gu[s]||bv)return;gu[s]=e;function i(I){return`__firebase__banner__${I}`}const a="__firebase__banner",u=nA().prod.length>0;function m(){const I=document.getElementById(a);I&&I.remove()}function y(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function E(I,$){I.setAttribute("width","24"),I.setAttribute("id",$),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function g(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{bv=!0,m()},I}function w(I,$){I.setAttribute("id",$),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function C(){const I=iA(a),$=i("text"),W=document.getElementById($)||document.createElement("span"),ne=i("learnmore"),G=document.getElementById(ne)||document.createElement("a"),z=i("preprendIcon"),le=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const me=I.element;y(me),w(G,ne);const he=g();E(le,z),me.append(le,W,G,he),document.body.appendChild(me)}u?(W.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function aA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rA(){const s=Ym()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function d0(){try{return typeof indexedDB=="object"}catch{return!1}}function h0(){return new Promise((s,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}function lA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const uA="FirebaseError";class eo extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=uA,Object.setPrototypeOf(this,eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Af.prototype.create)}}class Af{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},l=`${this.service}/${e}`,u=this.errors[e],m=u?cA(u,a):"Error",y=`${this.serviceName}: ${m} (${l}).`;return new eo(l,y,a)}}function cA(s,e){return s.replace(fA,(i,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const fA=/\{\$([^}]+)}/g;function sf(s,e){if(s===e)return!0;const i=Object.keys(s),a=Object.keys(e);for(const l of i){if(!a.includes(l))return!1;const u=s[l],m=e[l];if(Sv(u)&&Sv(m)){if(!sf(u,m))return!1}else if(u!==m)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function Sv(s){return s!==null&&typeof s=="object"}function ga(s){return s&&s._delegate?s._delegate:s}class _a{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xr="[DEFAULT]";class dA{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new Jw;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mA(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});a.resolve(u)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[u,m]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);a===y&&m.resolve(l)}return l}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hA(s){return s===Xr?void 0:s}function mA(s){return s.instantiationMode==="EAGER"}class pA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new dA(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}var pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(pt||(pt={}));const gA={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},_A=pt.INFO,yA={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},vA=(s,e,...i)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),l=yA[e];if(l)console[l](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m0{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...e),this._logHandler(this,pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...e),this._logHandler(this,pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...e),this._logHandler(this,pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...e),this._logHandler(this,pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...e),this._logHandler(this,pt.ERROR,...e)}}const EA=(s,e)=>e.some(i=>s instanceof i);let wv,Av;function TA(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p0=new WeakMap,gm=new WeakMap,g0=new WeakMap,Kh=new WeakMap,$m=new WeakMap;function SA(s){const e=new Promise((i,a)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",m)},u=()=>{i(ma(s.result)),l()},m=()=>{a(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",m)});return e.then(i=>{i instanceof IDBCursor&&p0.set(i,s)}).catch(()=>{}),$m.set(e,s),e}function wA(s){if(gm.has(s))return;const e=new Promise((i,a)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",m),s.removeEventListener("abort",m)},u=()=>{i(),l()},m=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",m),s.addEventListener("abort",m)});gm.set(s,e)}let _m={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return gm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||g0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ma(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function AA(s){_m=s(_m)}function NA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=s.call(Wh(this),e,...i);return g0.set(a,e.sort?e.sort():[e]),ma(a)}:bA().includes(s)?function(...e){return s.apply(Wh(this),e),ma(p0.get(this))}:function(...e){return ma(s.apply(Wh(this),e))}}function RA(s){return typeof s=="function"?NA(s):(s instanceof IDBTransaction&&wA(s),EA(s,TA())?new Proxy(s,_m):s)}function ma(s){if(s instanceof IDBRequest)return SA(s);if(Kh.has(s))return Kh.get(s);const e=RA(s);return e!==s&&(Kh.set(s,e),$m.set(e,s)),e}const Wh=s=>$m.get(s);function Nf(s,e,{blocked:i,upgrade:a,blocking:l,terminated:u}={}){const m=indexedDB.open(s,e),y=ma(m);return a&&m.addEventListener("upgradeneeded",E=>{a(ma(m.result),E.oldVersion,E.newVersion,ma(m.transaction),E)}),i&&m.addEventListener("blocked",E=>i(E.oldVersion,E.newVersion,E)),y.then(E=>{u&&E.addEventListener("close",()=>u()),l&&E.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),y}function Zh(s,{blocked:e}={}){const i=indexedDB.deleteDatabase(s);return e&&i.addEventListener("blocked",a=>e(a.oldVersion,a)),ma(i).then(()=>{})}const CA=["get","getKey","getAll","getAllKeys","count"],xA=["put","add","delete","clear"],Jh=new Map;function Nv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,l=xA.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||CA.includes(i)))return;const u=async function(m,...y){const E=this.transaction(m,l?"readwrite":"readonly");let g=E.store;return a&&(g=g.index(y.shift())),(await Promise.all([g[i](...y),l&&E.done]))[0]};return Jh.set(e,u),u}AA(s=>({...s,get:(e,i,a)=>Nv(e,i)||s.get(e,i,a),has:(e,i)=>!!Nv(e,i)||s.has(e,i)}));class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(IA(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function IA(s){return s.getComponent()?.type==="VERSION"}const ym="@firebase/app",Rv="0.14.7";const ya=new m0("@firebase/app"),OA="@firebase/app-compat",kA="@firebase/analytics-compat",jA="@firebase/analytics",LA="@firebase/app-check-compat",MA="@firebase/app-check",VA="@firebase/auth",UA="@firebase/auth-compat",BA="@firebase/database",qA="@firebase/data-connect",zA="@firebase/database-compat",PA="@firebase/functions",HA="@firebase/functions-compat",FA="@firebase/installations",GA="@firebase/installations-compat",XA="@firebase/messaging",YA="@firebase/messaging-compat",QA="@firebase/performance",$A="@firebase/performance-compat",KA="@firebase/remote-config",WA="@firebase/remote-config-compat",ZA="@firebase/storage",JA="@firebase/storage-compat",e2="@firebase/firestore",t2="@firebase/ai",n2="@firebase/firestore-compat",i2="firebase",s2="12.8.0";const vm="[DEFAULT]",a2={[ym]:"fire-core",[OA]:"fire-core-compat",[jA]:"fire-analytics",[kA]:"fire-analytics-compat",[MA]:"fire-app-check",[LA]:"fire-app-check-compat",[VA]:"fire-auth",[UA]:"fire-auth-compat",[BA]:"fire-rtdb",[qA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[PA]:"fire-fn",[HA]:"fire-fn-compat",[FA]:"fire-iid",[GA]:"fire-iid-compat",[XA]:"fire-fcm",[YA]:"fire-fcm-compat",[QA]:"fire-perf",[$A]:"fire-perf-compat",[KA]:"fire-rc",[WA]:"fire-rc-compat",[ZA]:"fire-gcs",[JA]:"fire-gcs-compat",[e2]:"fire-fst",[n2]:"fire-fst-compat",[t2]:"fire-vertex","fire-js":"fire-js",[i2]:"fire-js-all"};const af=new Map,r2=new Map,Em=new Map;function Cv(s,e){try{s.container.addComponent(e)}catch(i){ya.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function lr(s){const e=s.name;if(Em.has(e))return ya.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,s);for(const i of af.values())Cv(i,s);for(const i of r2.values())Cv(i,s);return!0}function Rf(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function o2(s){return s==null?!1:s.settings!==void 0}const l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new Af("app","Firebase",l2);class u2{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const c2=s2;function _0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const a={name:vm,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw sr.create("bad-app-name",{appName:String(l)});if(i||(i=f0()),!i)throw sr.create("no-options");const u=af.get(l);if(u){if(sf(i,u.options)&&sf(a,u.config))return u;throw sr.create("duplicate-app",{appName:l})}const m=new pA(l);for(const E of Em.values())m.addComponent(E);const y=new u2(i,a,m);return af.set(l,y),y}function y0(s=vm){const e=af.get(s);if(!e&&s===vm&&f0())return _0();if(!e)throw sr.create("no-app",{appName:s});return e}function ks(s,e,i){let a=a2[s]??s;i&&(a+=`-${i}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const m=[`Unable to register library "${a}" with version "${e}":`];l&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&m.push("and"),u&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ya.warn(m.join(" "));return}lr(new _a(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const f2="firebase-heartbeat-database",d2=1,Tu="firebase-heartbeat-store";let em=null;function v0(){return em||(em=Nf(f2,d2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Tu)}catch(i){console.warn(i)}}}}).catch(s=>{throw sr.create("idb-open",{originalErrorMessage:s.message})})),em}async function h2(s){try{const i=(await v0()).transaction(Tu),a=await i.objectStore(Tu).get(E0(s));return await i.done,a}catch(e){if(e instanceof eo)ya.warn(e.message);else{const i=sr.create("idb-get",{originalErrorMessage:e?.message});ya.warn(i.message)}}}async function xv(s,e){try{const a=(await v0()).transaction(Tu,"readwrite");await a.objectStore(Tu).put(e,E0(s)),await a.done}catch(i){if(i instanceof eo)ya.warn(i.message);else{const a=sr.create("idb-set",{originalErrorMessage:i?.message});ya.warn(a.message)}}}function E0(s){return`${s.name}!${s.options.appId}`}const m2=1024,p2=30;class g2{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new y2(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Dv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>p2){const l=v2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ya.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Dv(),{heartbeatsToSend:i,unsentEntries:a}=_2(this._heartbeatsCache.heartbeats),l=nf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ya.warn(e),""}}}function Dv(){return new Date().toISOString().substring(0,10)}function _2(s,e=m2){const i=[];let a=s.slice();for(const l of s){const u=i.find(m=>m.agent===l.agent);if(u){if(u.dates.push(l.date),Iv(i)>e){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Iv(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d0()?h0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await h2(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Iv(s){return nf(JSON.stringify({version:2,heartbeats:s})).length}function v2(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,e=a);return e}function E2(s){lr(new _a("platform-logger",e=>new DA(e),"PRIVATE")),lr(new _a("heartbeat",e=>new g2(e),"PRIVATE")),ks(ym,Rv,s),ks(ym,Rv,"esm2020"),ks("fire-js","")}E2("");var T2="firebase",b2="12.8.0";ks(T2,b2,"app");var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ar,T0;(function(){var s;function e(O,D){function j(){}j.prototype=D.prototype,O.F=D.prototype,O.prototype=new j,O.prototype.constructor=O,O.D=function(V,k,U){for(var x=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)x[ve-2]=arguments[ve];return D.prototype[k].apply(V,x)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,D,j){j||(j=0);const V=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)V[k]=D.charCodeAt(j++)|D.charCodeAt(j++)<<8|D.charCodeAt(j++)<<16|D.charCodeAt(j++)<<24;else for(k=0;k<16;++k)V[k]=D[j++]|D[j++]<<8|D[j++]<<16|D[j++]<<24;D=O.g[0],j=O.g[1],k=O.g[2];let U=O.g[3],x;x=D+(U^j&(k^U))+V[0]+3614090360&4294967295,D=j+(x<<7&4294967295|x>>>25),x=U+(k^D&(j^k))+V[1]+3905402710&4294967295,U=D+(x<<12&4294967295|x>>>20),x=k+(j^U&(D^j))+V[2]+606105819&4294967295,k=U+(x<<17&4294967295|x>>>15),x=j+(D^k&(U^D))+V[3]+3250441966&4294967295,j=k+(x<<22&4294967295|x>>>10),x=D+(U^j&(k^U))+V[4]+4118548399&4294967295,D=j+(x<<7&4294967295|x>>>25),x=U+(k^D&(j^k))+V[5]+1200080426&4294967295,U=D+(x<<12&4294967295|x>>>20),x=k+(j^U&(D^j))+V[6]+2821735955&4294967295,k=U+(x<<17&4294967295|x>>>15),x=j+(D^k&(U^D))+V[7]+4249261313&4294967295,j=k+(x<<22&4294967295|x>>>10),x=D+(U^j&(k^U))+V[8]+1770035416&4294967295,D=j+(x<<7&4294967295|x>>>25),x=U+(k^D&(j^k))+V[9]+2336552879&4294967295,U=D+(x<<12&4294967295|x>>>20),x=k+(j^U&(D^j))+V[10]+4294925233&4294967295,k=U+(x<<17&4294967295|x>>>15),x=j+(D^k&(U^D))+V[11]+2304563134&4294967295,j=k+(x<<22&4294967295|x>>>10),x=D+(U^j&(k^U))+V[12]+1804603682&4294967295,D=j+(x<<7&4294967295|x>>>25),x=U+(k^D&(j^k))+V[13]+4254626195&4294967295,U=D+(x<<12&4294967295|x>>>20),x=k+(j^U&(D^j))+V[14]+2792965006&4294967295,k=U+(x<<17&4294967295|x>>>15),x=j+(D^k&(U^D))+V[15]+1236535329&4294967295,j=k+(x<<22&4294967295|x>>>10),x=D+(k^U&(j^k))+V[1]+4129170786&4294967295,D=j+(x<<5&4294967295|x>>>27),x=U+(j^k&(D^j))+V[6]+3225465664&4294967295,U=D+(x<<9&4294967295|x>>>23),x=k+(D^j&(U^D))+V[11]+643717713&4294967295,k=U+(x<<14&4294967295|x>>>18),x=j+(U^D&(k^U))+V[0]+3921069994&4294967295,j=k+(x<<20&4294967295|x>>>12),x=D+(k^U&(j^k))+V[5]+3593408605&4294967295,D=j+(x<<5&4294967295|x>>>27),x=U+(j^k&(D^j))+V[10]+38016083&4294967295,U=D+(x<<9&4294967295|x>>>23),x=k+(D^j&(U^D))+V[15]+3634488961&4294967295,k=U+(x<<14&4294967295|x>>>18),x=j+(U^D&(k^U))+V[4]+3889429448&4294967295,j=k+(x<<20&4294967295|x>>>12),x=D+(k^U&(j^k))+V[9]+568446438&4294967295,D=j+(x<<5&4294967295|x>>>27),x=U+(j^k&(D^j))+V[14]+3275163606&4294967295,U=D+(x<<9&4294967295|x>>>23),x=k+(D^j&(U^D))+V[3]+4107603335&4294967295,k=U+(x<<14&4294967295|x>>>18),x=j+(U^D&(k^U))+V[8]+1163531501&4294967295,j=k+(x<<20&4294967295|x>>>12),x=D+(k^U&(j^k))+V[13]+2850285829&4294967295,D=j+(x<<5&4294967295|x>>>27),x=U+(j^k&(D^j))+V[2]+4243563512&4294967295,U=D+(x<<9&4294967295|x>>>23),x=k+(D^j&(U^D))+V[7]+1735328473&4294967295,k=U+(x<<14&4294967295|x>>>18),x=j+(U^D&(k^U))+V[12]+2368359562&4294967295,j=k+(x<<20&4294967295|x>>>12),x=D+(j^k^U)+V[5]+4294588738&4294967295,D=j+(x<<4&4294967295|x>>>28),x=U+(D^j^k)+V[8]+2272392833&4294967295,U=D+(x<<11&4294967295|x>>>21),x=k+(U^D^j)+V[11]+1839030562&4294967295,k=U+(x<<16&4294967295|x>>>16),x=j+(k^U^D)+V[14]+4259657740&4294967295,j=k+(x<<23&4294967295|x>>>9),x=D+(j^k^U)+V[1]+2763975236&4294967295,D=j+(x<<4&4294967295|x>>>28),x=U+(D^j^k)+V[4]+1272893353&4294967295,U=D+(x<<11&4294967295|x>>>21),x=k+(U^D^j)+V[7]+4139469664&4294967295,k=U+(x<<16&4294967295|x>>>16),x=j+(k^U^D)+V[10]+3200236656&4294967295,j=k+(x<<23&4294967295|x>>>9),x=D+(j^k^U)+V[13]+681279174&4294967295,D=j+(x<<4&4294967295|x>>>28),x=U+(D^j^k)+V[0]+3936430074&4294967295,U=D+(x<<11&4294967295|x>>>21),x=k+(U^D^j)+V[3]+3572445317&4294967295,k=U+(x<<16&4294967295|x>>>16),x=j+(k^U^D)+V[6]+76029189&4294967295,j=k+(x<<23&4294967295|x>>>9),x=D+(j^k^U)+V[9]+3654602809&4294967295,D=j+(x<<4&4294967295|x>>>28),x=U+(D^j^k)+V[12]+3873151461&4294967295,U=D+(x<<11&4294967295|x>>>21),x=k+(U^D^j)+V[15]+530742520&4294967295,k=U+(x<<16&4294967295|x>>>16),x=j+(k^U^D)+V[2]+3299628645&4294967295,j=k+(x<<23&4294967295|x>>>9),x=D+(k^(j|~U))+V[0]+4096336452&4294967295,D=j+(x<<6&4294967295|x>>>26),x=U+(j^(D|~k))+V[7]+1126891415&4294967295,U=D+(x<<10&4294967295|x>>>22),x=k+(D^(U|~j))+V[14]+2878612391&4294967295,k=U+(x<<15&4294967295|x>>>17),x=j+(U^(k|~D))+V[5]+4237533241&4294967295,j=k+(x<<21&4294967295|x>>>11),x=D+(k^(j|~U))+V[12]+1700485571&4294967295,D=j+(x<<6&4294967295|x>>>26),x=U+(j^(D|~k))+V[3]+2399980690&4294967295,U=D+(x<<10&4294967295|x>>>22),x=k+(D^(U|~j))+V[10]+4293915773&4294967295,k=U+(x<<15&4294967295|x>>>17),x=j+(U^(k|~D))+V[1]+2240044497&4294967295,j=k+(x<<21&4294967295|x>>>11),x=D+(k^(j|~U))+V[8]+1873313359&4294967295,D=j+(x<<6&4294967295|x>>>26),x=U+(j^(D|~k))+V[15]+4264355552&4294967295,U=D+(x<<10&4294967295|x>>>22),x=k+(D^(U|~j))+V[6]+2734768916&4294967295,k=U+(x<<15&4294967295|x>>>17),x=j+(U^(k|~D))+V[13]+1309151649&4294967295,j=k+(x<<21&4294967295|x>>>11),x=D+(k^(j|~U))+V[4]+4149444226&4294967295,D=j+(x<<6&4294967295|x>>>26),x=U+(j^(D|~k))+V[11]+3174756917&4294967295,U=D+(x<<10&4294967295|x>>>22),x=k+(D^(U|~j))+V[2]+718787259&4294967295,k=U+(x<<15&4294967295|x>>>17),x=j+(U^(k|~D))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+U&4294967295}a.prototype.v=function(O,D){D===void 0&&(D=O.length);const j=D-this.blockSize,V=this.C;let k=this.h,U=0;for(;U<D;){if(k==0)for(;U<=j;)l(this,O,U),U+=this.blockSize;if(typeof O=="string"){for(;U<D;)if(V[k++]=O.charCodeAt(U++),k==this.blockSize){l(this,V),k=0;break}}else for(;U<D;)if(V[k++]=O[U++],k==this.blockSize){l(this,V),k=0;break}}this.h=k,this.o+=D},a.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;D=this.o*8;for(var j=O.length-8;j<O.length;++j)O[j]=D&255,D/=256;for(this.v(O),O=Array(16),D=0,j=0;j<4;++j)for(let V=0;V<32;V+=8)O[D++]=this.g[j]>>>V&255;return O};function u(O,D){var j=y;return Object.prototype.hasOwnProperty.call(j,O)?j[O]:j[O]=D(O)}function m(O,D){this.h=D;const j=[];let V=!0;for(let k=O.length-1;k>=0;k--){const U=O[k]|0;V&&U==D||(j[k]=U,V=!1)}this.g=j}var y={};function E(O){return-128<=O&&O<128?u(O,function(D){return new m([D|0],D<0?-1:0)}):new m([O|0],O<0?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return C;if(O<0)return G(g(-O));const D=[];let j=1;for(let V=0;O>=j;V++)D[V]=O/j|0,j*=4294967296;return new m(D,0)}function w(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return G(w(O.substring(1),D));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=g(Math.pow(D,8));let V=C;for(let U=0;U<O.length;U+=8){var k=Math.min(8,O.length-U);const x=parseInt(O.substring(U,U+k),D);k<8?(k=g(Math.pow(D,k)),V=V.j(k).add(g(x))):(V=V.j(j),V=V.add(g(x)))}return V}var C=E(0),I=E(1),$=E(16777216);s=m.prototype,s.m=function(){if(ne(this))return-G(this).m();let O=0,D=1;for(let j=0;j<this.g.length;j++){const V=this.i(j);O+=(V>=0?V:4294967296+V)*D,D*=4294967296}return O},s.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(W(this))return"0";if(ne(this))return"-"+G(this).toString(O);const D=g(Math.pow(O,6));var j=this;let V="";for(;;){const k=he(j,D).g;j=z(j,k.j(D));let U=((j.g.length>0?j.g[0]:j.h)>>>0).toString(O);if(j=k,W(j))return U+V;for(;U.length<6;)U="0"+U;V=U+V}},s.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function W(O){if(O.h!=0)return!1;for(let D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function ne(O){return O.h==-1}s.l=function(O){return O=z(this,O),ne(O)?-1:W(O)?0:1};function G(O){const D=O.g.length,j=[];for(let V=0;V<D;V++)j[V]=~O.g[V];return new m(j,~O.h).add(I)}s.abs=function(){return ne(this)?G(this):this},s.add=function(O){const D=Math.max(this.g.length,O.g.length),j=[];let V=0;for(let k=0;k<=D;k++){let U=V+(this.i(k)&65535)+(O.i(k)&65535),x=(U>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);V=x>>>16,U&=65535,x&=65535,j[k]=x<<16|U}return new m(j,j[j.length-1]&-2147483648?-1:0)};function z(O,D){return O.add(G(D))}s.j=function(O){if(W(this)||W(O))return C;if(ne(this))return ne(O)?G(this).j(G(O)):G(G(this).j(O));if(ne(O))return G(this.j(G(O)));if(this.l($)<0&&O.l($)<0)return g(this.m()*O.m());const D=this.g.length+O.g.length,j=[];for(var V=0;V<2*D;V++)j[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<O.g.length;k++){const U=this.i(V)>>>16,x=this.i(V)&65535,ve=O.i(k)>>>16,Tt=O.i(k)&65535;j[2*V+2*k]+=x*Tt,le(j,2*V+2*k),j[2*V+2*k+1]+=U*Tt,le(j,2*V+2*k+1),j[2*V+2*k+1]+=x*ve,le(j,2*V+2*k+1),j[2*V+2*k+2]+=U*ve,le(j,2*V+2*k+2)}for(O=0;O<D;O++)j[O]=j[2*O+1]<<16|j[2*O];for(O=D;O<2*D;O++)j[O]=0;return new m(j,0)};function le(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function me(O,D){this.g=O,this.h=D}function he(O,D){if(W(D))throw Error("division by zero");if(W(O))return new me(C,C);if(ne(O))return D=he(G(O),D),new me(G(D.g),G(D.h));if(ne(D))return D=he(O,G(D)),new me(G(D.g),D.h);if(O.g.length>30){if(ne(O)||ne(D))throw Error("slowDivide_ only works with positive integers.");for(var j=I,V=D;V.l(O)<=0;)j=Ae(j),V=Ae(V);var k=xe(j,1),U=xe(V,1);for(V=xe(V,2),j=xe(j,2);!W(V);){var x=U.add(V);x.l(O)<=0&&(k=k.add(j),U=x),V=xe(V,1),j=xe(j,1)}return D=z(O,k.j(D)),new me(k,D)}for(k=C;O.l(D)>=0;){for(j=Math.max(1,Math.floor(O.m()/D.m())),V=Math.ceil(Math.log(j)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),U=g(j),x=U.j(D);ne(x)||x.l(O)>0;)j-=V,U=g(j),x=U.j(D);W(U)&&(U=I),k=k.add(U),O=z(O,x)}return new me(k,O)}s.B=function(O){return he(this,O).h},s.and=function(O){const D=Math.max(this.g.length,O.g.length),j=[];for(let V=0;V<D;V++)j[V]=this.i(V)&O.i(V);return new m(j,this.h&O.h)},s.or=function(O){const D=Math.max(this.g.length,O.g.length),j=[];for(let V=0;V<D;V++)j[V]=this.i(V)|O.i(V);return new m(j,this.h|O.h)},s.xor=function(O){const D=Math.max(this.g.length,O.g.length),j=[];for(let V=0;V<D;V++)j[V]=this.i(V)^O.i(V);return new m(j,this.h^O.h)};function Ae(O){const D=O.g.length+1,j=[];for(let V=0;V<D;V++)j[V]=O.i(V)<<1|O.i(V-1)>>>31;return new m(j,O.h)}function xe(O,D){const j=D>>5;D%=32;const V=O.g.length-j,k=[];for(let U=0;U<V;U++)k[U]=D>0?O.i(U+j)>>>D|O.i(U+j+1)<<32-D:O.i(U+j);return new m(k,O.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,T0=a,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=g,m.fromString=w,ar=m}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var b0,hu,S0,Qc,Tm,w0,A0,N0;(function(){var s,e=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var v=0;v<c.length;++v){var b=c[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=i(this);function l(c,v){if(v)e:{var b=a;c=c.split(".");for(var R=0;R<c.length-1;R++){var Y=c[R];if(!(Y in b))break e;b=b[Y]}c=c[c.length-1],R=b[c],v=v(R),v!=R&&v!=null&&e(b,c,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(v){var b=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&b.push([R,v[R]]);return b}});var u=u||{},m=this||self;function y(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function E(c,v,b){return c.call.apply(c.bind,arguments)}function g(c,v,b){return g=E,g.apply(null,arguments)}function w(c,v){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function C(c,v){function b(){}b.prototype=v.prototype,c.Z=v.prototype,c.prototype=new b,c.prototype.constructor=c,c.Ob=function(R,Y,te){for(var ge=Array(arguments.length-2),He=2;He<arguments.length;He++)ge[He-2]=arguments[He];return v.prototype[Y].apply(R,ge)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function $(c){const v=c.length;if(v>0){const b=Array(v);for(let R=0;R<v;R++)b[R]=c[R];return b}return[]}function W(c,v){for(let R=1;R<arguments.length;R++){const Y=arguments[R];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=c.length||0;const te=Y.length||0;c.length=b+te;for(let ge=0;ge<te;ge++)c[b+ge]=Y[ge]}else c.push(Y)}}class ne{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function G(c){m.setTimeout(()=>{throw c},0)}function z(){var c=O;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class le{constructor(){this.h=this.g=null}add(v,b){const R=me.get();R.set(v,b),this.h?this.h.next=R:this.g=R,this.h=R}}var me=new ne(()=>new he,c=>c.reset());class he{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,xe=!1,O=new le,D=()=>{const c=Promise.resolve(void 0);Ae=()=>{c.then(j)}};function j(){for(var c;c=z();){try{c.h.call(c.g)}catch(b){G(b)}var v=me;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}xe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const b=()=>{};m.addEventListener("test",b,v),m.removeEventListener("test",b,v)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function ve(c,v){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}C(ve,k),ve.prototype.init=function(c,v){const b=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(b=="mouseover"?v=c.fromElement:b=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tt="closure_listenable_"+(Math.random()*1e6|0),P=0;function J(c,v,b,R,Y){this.listener=c,this.proxy=null,this.src=v,this.type=b,this.capture=!!R,this.ha=Y,this.key=++P,this.da=this.fa=!1}function _e(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c,v,b){for(const R in c)v.call(b,c[R],R,c)}function $e(c,v){for(const b in c)v.call(void 0,c[b],b,c)}function B(c){const v={};for(const b in c)v[b]=c[b];return v}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(c,v){let b,R;for(let Y=1;Y<arguments.length;Y++){R=arguments[Y];for(b in R)c[b]=R[b];for(let te=0;te<re.length;te++)b=re[te],Object.prototype.hasOwnProperty.call(R,b)&&(c[b]=R[b])}}function Te(c){this.src=c,this.g={},this.h=0}Te.prototype.add=function(c,v,b,R,Y){const te=c.toString();c=this.g[te],c||(c=this.g[te]=[],this.h++);const ge=Ke(c,v,R,Y);return ge>-1?(v=c[ge],b||(v.fa=!1)):(v=new J(v,this.src,te,!!R,Y),v.fa=b,c.push(v)),v};function Pe(c,v){const b=v.type;if(b in c.g){var R=c.g[b],Y=Array.prototype.indexOf.call(R,v,void 0),te;(te=Y>=0)&&Array.prototype.splice.call(R,Y,1),te&&(_e(v),c.g[b].length==0&&(delete c.g[b],c.h--))}}function Ke(c,v,b,R){for(let Y=0;Y<c.length;++Y){const te=c[Y];if(!te.da&&te.listener==v&&te.capture==!!b&&te.ha==R)return Y}return-1}var tt="closure_lm_"+(Math.random()*1e6|0),Kt={};function jt(c,v,b,R,Y){if(Array.isArray(v)){for(let te=0;te<v.length;te++)jt(c,v[te],b,R,Y);return null}return b=wa(b),c&&c[Tt]?c.J(v,b,y(R)?!!R.capture:!1,Y):ps(c,v,b,!1,R,Y)}function ps(c,v,b,R,Y,te){if(!v)throw Error("Invalid event type");const ge=y(Y)?!!Y.capture:!!Y;let He=bt(c);if(He||(c[tt]=He=new Te(c)),b=He.add(v,b,R,ge,te),b.proxy)return b;if(R=ba(),b.proxy=R,R.src=c,R.listener=b,c.addEventListener)U||(Y=ge),Y===void 0&&(Y=!1),c.addEventListener(v.toString(),R,Y);else if(c.attachEvent)c.attachEvent(qn(v.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ba(){function c(b){return v.call(c.src,c.listener,b)}const v=Sa;return c}function Bn(c,v,b,R,Y){if(Array.isArray(v))for(var te=0;te<v.length;te++)Bn(c,v[te],b,R,Y);else R=y(R)?!!R.capture:!!R,b=wa(b),c&&c[Tt]?(c=c.i,te=String(v).toString(),te in c.g&&(v=c.g[te],b=Ke(v,b,R,Y),b>-1&&(_e(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete c.g[te],c.h--)))):c&&(c=bt(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ke(v,b,R,Y)),(b=c>-1?v[c]:null)&&gs(b))}function gs(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Tt])Pe(v.i,c);else{var b=c.type,R=c.proxy;v.removeEventListener?v.removeEventListener(b,R,c.capture):v.detachEvent?v.detachEvent(qn(b),R):v.addListener&&v.removeListener&&v.removeListener(R),(b=bt(v))?(Pe(b,c),b.h==0&&(b.src=null,v[tt]=null)):_e(c)}}}function qn(c){return c in Kt?Kt[c]:Kt[c]="on"+c}function Sa(c,v){if(c.da)c=!0;else{v=new ve(v,this);const b=c.listener,R=c.ha||c.src;c.fa&&gs(c),c=b.call(R,v)}return c}function bt(c){return c=c[tt],c instanceof Te?c:null}var qs="__closure_events_fn_"+(Math.random()*1e9>>>0);function wa(c){return typeof c=="function"?c:(c[qs]||(c[qs]=function(v){return c.handleEvent(v)}),c[qs])}function Pt(){V.call(this),this.i=new Te(this),this.M=this,this.G=null}C(Pt,V),Pt.prototype[Tt]=!0,Pt.prototype.removeEventListener=function(c,v,b,R){Bn(this,c,v,b,R)};function Wt(c,v){var b,R=c.G;if(R)for(b=[];R;R=R.G)b.push(R);if(c=c.M,R=v.type||v,typeof v=="string")v=new k(v,c);else if(v instanceof k)v.target=v.target||c;else{var Y=v;v=new k(R,c),ye(v,Y)}Y=!0;let te,ge;if(b)for(ge=b.length-1;ge>=0;ge--)te=v.g=b[ge],Y=Ti(te,R,!0,v)&&Y;if(te=v.g=c,Y=Ti(te,R,!0,v)&&Y,Y=Ti(te,R,!1,v)&&Y,b)for(ge=0;ge<b.length;ge++)te=v.g=b[ge],Y=Ti(te,R,!1,v)&&Y}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const b=c.g[v];for(let R=0;R<b.length;R++)_e(b[R]);delete c.g[v],c.h--}}this.G=null},Pt.prototype.J=function(c,v,b,R){return this.i.add(String(c),v,!1,b,R)},Pt.prototype.K=function(c,v,b,R){return this.i.add(String(c),v,!0,b,R)};function Ti(c,v,b,R){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let Y=!0;for(let te=0;te<v.length;++te){const ge=v[te];if(ge&&!ge.da&&ge.capture==b){const He=ge.listener,Ht=ge.ha||ge.src;ge.fa&&Pe(c.i,ge),Y=He.call(Ht,R)!==!1&&Y}}return Y&&!R.defaultPrevented}function wl(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:m.setTimeout(c,v||0)}function pr(c){c.g=wl(()=>{c.g=null,c.i&&(c.i=!1,pr(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Nn extends V{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:pr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(c){V.call(this),this.h=c,this.g={}}C(ns,V);var is=[];function Kn(c){We(c.g,function(v,b){this.g.hasOwnProperty(b)&&gs(v)},c),c.g={}}ns.prototype.N=function(){ns.Z.N.call(this),Kn(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=m.JSON.stringify,oo=m.JSON.parse,gr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function lo(){}function uo(){}var bi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oe(){k.call(this,"d")}C(Oe,k);function Wn(){k.call(this,"c")}C(Wn,k);var Ut={},_r=null;function Si(){return _r=_r||new Pt}Ut.Ia="serverreachability";function co(c){k.call(this,Ut.Ia,c)}C(co,k);function pn(c){const v=Si();Wt(v,new co(v))}Ut.STAT_EVENT="statevent";function _s(c,v){k.call(this,Ut.STAT_EVENT,c),this.stat=v}C(_s,k);function Xt(c){const v=Si();Wt(v,new _s(v,c))}Ut.Ja="timingevent";function wi(c,v){k.call(this,Ut.Ja,c),this.size=v}C(wi,k);function pe(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},v)}function Ai(){this.g=!0}Ai.prototype.ua=function(){this.g=!1};function Al(c,v,b,R,Y,te){c.info(function(){if(c.g)if(te){var ge="",He=te.split("&");for(let ht=0;ht<He.length;ht++){var Ht=He[ht].split("=");if(Ht.length>1){const Lt=Ht[0];Ht=Ht[1];const F=Lt.split("_");ge=F.length>=2&&F[1]=="type"?ge+(Lt+"="+Ht+"&"):ge+(Lt+"=redacted&")}}}else ge=null;else ge=te;return"XMLHTTP REQ ("+R+") [attempt "+Y+"]: "+v+`
`+b+`
`+ge})}function Rn(c,v,b,R,Y,te,ge){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Y+"]: "+v+`
`+b+`
`+te+" "+ge})}function ui(c,v,b,R){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+yr(c,b)+(R?" "+R:"")})}function as(c,v){c.info(function(){return"TIMEOUT: "+v})}Ai.prototype.info=function(){};function yr(c,v){if(!c.g)return v;if(!v)return null;try{const te=JSON.parse(v);if(te){for(c=0;c<te.length;c++)if(Array.isArray(te[c])){var b=te[c];if(!(b.length<2)){var R=b[1];if(Array.isArray(R)&&!(R.length<1)){var Y=R[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ge=1;ge<R.length;ge++)R[ge]=""}}}}return ss(te)}catch{return v}}var Zn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Aa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rn;function ys(){}C(ys,lo),ys.prototype.g=function(){return new XMLHttpRequest},rn=new ys;function zn(c){return encodeURIComponent(String(c))}function vr(c){var v=1;c=c.split(":");const b=[];for(;v>0&&c.length;)b.push(c.shift()),v--;return c.length&&b.push(c.join(":")),b}function ci(c,v,b,R){this.j=c,this.i=v,this.l=b,this.S=R||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var at={},en={};function Mi(c,v,b){c.M=1,c.A=Ui(Nt(v)),c.u=b,c.R=!0,vs(c,null)}function vs(c,v){c.F=Date.now(),Jn(c),c.B=Nt(c.A);var b=c.B,R=c.S;Array.isArray(R)||(R=[String(R)]),di(b.i,"t",R),c.C=0,b=c.j.L,c.h=new Pn,c.g=vo(c.j,b?v:null,!c.u),c.P>0&&(c.O=new Nn(g(c.Y,c,c.g),c.P)),v=c.V,b=c.g,R=c.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(is[0]=Y.toString()),Y=is);for(let te=0;te<Y.length;te++){const ge=jt(b,Y[te],R||v.handleEvent,!1,v.h||v);if(!ge)break;v.g[ge.key]=ge}v=c.J?B(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),pn(),Al(c.i,c.v,c.B,c.l,c.S,c.u)}ci.prototype.ba=function(c){c=c.target;const v=this.O;v&&Ne(c)==3?v.j():this.Y(c)},ci.prototype.Y=function(c){try{if(c==this.g)e:{const He=Ne(this.g),Ht=this.g.ya(),ht=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||ke(this.g)))){this.K||He!=4||Ht==7||(Ht==8||ht<=0?pn(3):pn(2)),tn(this);var v=this.g.ca();this.X=v;var b=Nl(this);if(this.o=v==200,Rn(this.i,this.v,this.B,this.l,this.S,He,v),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Y=this.g;if((R=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(R)){var te=R;break t}}te=null}if(c=te)ui(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ni(this,c);else{this.o=!1,this.m=3,Xt(12),xn(this),Cn(this);break e}}if(this.R){c=!0;let Lt;for(;!this.K&&this.C<b.length;)if(Lt=Er(this,b),Lt==en){He==4&&(this.m=4,Xt(14),c=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==at){this.m=4,Xt(15),ui(this.i,this.l,b,"[Invalid Chunk]"),c=!1;break}else ui(this.i,this.l,Lt,null),Ni(this,Lt);if(Na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||b.length!=0||this.h.h||(this.m=1,Xt(16),c=!1),this.o=this.o&&c,!c)ui(this.i,this.l,b,"[Invalid Chunked Response]"),xn(this),Cn(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Rr(ge),ge.P=!0,Xt(11))}}else ui(this.i,this.l,b,null),Ni(this,b);He==4&&xn(this),this.o&&!this.K&&(He==4?Cr(this.j,this):(this.o=!1,Jn(this)))}else Ue(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),xn(this),Cn(this)}}}catch{}};function Nl(c){if(!Na(c))return c.g.la();const v=ke(c.g);if(v==="")return"";let b="";const R=v.length,Y=Ne(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return xn(c),Cn(c),"";c.h.i=new m.TextDecoder}for(let te=0;te<R;te++)c.h.h=!0,b+=c.h.i.decode(v[te],{stream:!(Y&&te==R-1)});return v.length=0,c.h.g+=b,c.C=0,c.h.g}function Na(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Er(c,v){var b=c.C,R=v.indexOf(`
`,b);return R==-1?en:(b=Number(v.substring(b,R)),isNaN(b)?at:(R+=1,R+b>v.length?en:(v=v.slice(R,R+b),c.C=R+b,v)))}ci.prototype.cancel=function(){this.K=!0,xn(this)};function Jn(c){c.T=Date.now()+c.H,Ra(c,c.H)}function Ra(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=pe(g(c.aa,c),v)}function tn(c){c.D&&(m.clearTimeout(c.D),c.D=null)}ci.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(as(this.i,this.B),this.M!=2&&(pn(),Xt(17)),xn(this),this.m=2,Cn(this)):Ra(this,this.T-c)};function Cn(c){c.j.I==0||c.K||Cr(c.j,c)}function xn(c){tn(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Kn(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Ni(c,v){try{var b=c.j;if(b.I!=0&&(b.g==c||Ri(b.h,c))){if(!c.L&&Ri(b.h,c)&&b.I==3){try{var R=b.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Y=R;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<c.F)Oa(b),ws(b);else break e;Qs(b),Xt(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=pe(g(b.Va,b),6e3));ei(b.h)<=1&&b.ta&&(b.ta=void 0)}else Fi(b,11)}else if((c.L||b.g==c)&&Oa(b),!x(v))for(Y=b.Ba.g.parse(v),v=0;v<Y.length;v++){let ht=Y[v];const Lt=ht[0];if(!(Lt<=b.K))if(b.K=Lt,ht=ht[1],b.I==2)if(ht[0]=="c"){b.M=ht[1],b.ba=ht[2];const F=ht[3];F!=null&&(b.ka=F,b.j.info("VER="+b.ka));const ue=ht[4];ue!=null&&(b.za=ue,b.j.info("SVER="+b.za));const Ee=ht[5];Ee!=null&&typeof Ee=="number"&&Ee>0&&(R=1.5*Ee,b.O=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const De=c.g;if(De){const Me=De.g?De.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Me){var te=R.h;te.g||Me.indexOf("spdy")==-1&&Me.indexOf("quic")==-1&&Me.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Vi(te,te.h),te.h=null))}if(R.G){const rt=De.g?De.g.getResponseHeader("X-HTTP-Session-Id"):null;rt&&(R.wa=rt,dt(R.J,R.G,rt))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-c.F,b.j.info("Handshake RTT: "+b.T+"ms")),R=b;var ge=c;if(R.na=yo(R,R.L?R.ba:null,R.W),ge.L){zs(R.h,ge);var He=ge,Ht=R.O;Ht&&(He.H=Ht),He.D&&(tn(He),Jn(He)),R.g=ge}else mo(R);b.i.length>0&&Hi(b)}else ht[0]!="stop"&&ht[0]!="close"||Fi(b,7);else b.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Fi(b,7):Ia(b):ht[0]!="noop"&&b.l&&b.l.qa(ht),b.A=0)}}pn(4)}catch{}}var Yt=class{constructor(c,v){this.g=c,this.map=v}};function rs(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ca(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ei(c){return c.h?1:c.g?c.g.size:0}function Ri(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Vi(c,v){c.g?c.g.add(v):c.h=v}function zs(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}rs.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xa(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const b of c.g.values())v=v.concat(b.G);return v}return $(c.i)}var Tr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ps(c,v){if(c){c=c.split("&");for(let b=0;b<c.length;b++){const R=c[b].indexOf("=");let Y,te=null;R>=0?(Y=c[b].substring(0,R),te=c[b].substring(R+1)):Y=c[b],v(Y,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ti(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof ti?(this.l=c.l,Ge(this,c.j),this.o=c.o,this.g=c.g,Hn(this,c.u),this.h=c.h,Es(this,Da(c.i)),this.m=c.m):c&&(v=String(c).match(Tr))?(this.l=!1,Ge(this,v[1]||"",!0),this.o=fi(v[2]||""),this.g=fi(v[3]||"",!0),Hn(this,v[4]),this.h=fi(v[5]||"",!0),Es(this,v[6]||"",!0),this.m=fi(v[7]||"")):(this.l=!1,this.i=new zi(null,this.l))}ti.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(Hs(v,Bi,!0),":");var b=this.g;return(b||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Hs(v,Bi,!0),"@"),c.push(zn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&c.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(Hs(b,b.charAt(0)=="/"?Sr:br,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",Hs(b,wr)),c.join("")},ti.prototype.resolve=function(c){const v=Nt(this);let b=!!c.j;b?Ge(v,c.j):b=!!c.o,b?v.o=c.o:b=!!c.g,b?v.g=c.g:b=c.u!=null;var R=c.h;if(b)Hn(v,c.u);else if(b=!!c.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Y=v.h.lastIndexOf("/");Y!=-1&&(R=v.h.slice(0,Y+1)+R)}if(Y=R,Y==".."||Y==".")R="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){R=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const te=[];for(let ge=0;ge<Y.length;){const He=Y[ge++];He=="."?R&&ge==Y.length&&te.push(""):He==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),R&&ge==Y.length&&te.push("")):(te.push(He),R=!0)}R=te.join("/")}else R=Y}return b?v.h=R:b=c.i.toString()!=="",b?Es(v,Da(c.i)):b=!!c.m,b&&(v.m=c.m),v};function Nt(c){return new ti(c)}function Ge(c,v,b){c.j=b?fi(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Hn(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function Es(c,v,b){v instanceof zi?(c.i=v,ni(c.i,c.l)):(b||(v=Hs(v,qi)),c.i=new zi(v,c.l))}function dt(c,v,b){c.i.set(v,b)}function Ui(c){return dt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function fi(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Hs(c,v,b){return typeof c=="string"?(c=encodeURI(c).replace(v,Fn),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Fn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Bi=/[#\/\?@]/g,br=/[#\?:]/g,Sr=/[#\?]/g,qi=/[#\?@]/g,wr=/#/g;function zi(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function vn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ps(c.i,function(v,b){c.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=zi.prototype,s.add=function(c,v){vn(this),this.i=null,c=En(this,c);let b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(v),this.h+=1,this};function fo(c,v){vn(c),v=En(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Ts(c,v){return vn(c),v=En(c,v),c.g.has(v)}s.forEach=function(c,v){vn(this),this.g.forEach(function(b,R){b.forEach(function(Y){c.call(v,Y,R,this)},this)},this)};function bs(c,v){vn(c);let b=[];if(typeof v=="string")Ts(c,v)&&(b=b.concat(c.g.get(En(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)b=b.concat(c[v]);return b}s.set=function(c,v){return vn(this),this.i=null,c=En(this,c),Ts(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},s.get=function(c,v){return c?(c=bs(this,c),c.length>0?String(c[0]):v):v};function di(c,v,b){fo(c,v),b.length>0&&(c.i=null,c.g.set(En(c,v),$(b)),c.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var b=v[R];const Y=zn(b);b=bs(this,b);for(let te=0;te<b.length;te++){let ge=Y;b[te]!==""&&(ge+="="+zn(b[te])),c.push(ge)}}return this.i=c.join("&")};function Da(c){const v=new zi;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function En(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function ni(c,v){v&&!c.j&&(vn(c),c.i=null,c.g.forEach(function(b,R){const Y=R.toLowerCase();R!=Y&&(fo(this,R),di(this,Y,b))},c)),c.j=v}function Dn(c,v){const b=new Ai;if(m.Image){const R=new Image;R.onload=w(be,b,"TestLoadImage: loaded",!0,v,R),R.onerror=w(be,b,"TestLoadImage: error",!1,v,R),R.onabort=w(be,b,"TestLoadImage: abort",!1,v,R),R.ontimeout=w(be,b,"TestLoadImage: timeout",!1,v,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else v(!1)}function Ar(c,v){const b=new Ai,R=new AbortController,Y=setTimeout(()=>{R.abort(),be(b,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:R.signal}).then(te=>{clearTimeout(Y),te.ok?be(b,"TestPingServer: ok",!0,v):be(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Y),be(b,"TestPingServer: error",!1,v)})}function be(c,v,b,R,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),R(b)}catch{}}function Pi(){this.g=new gr}function ii(c){this.i=c.Sb||null,this.h=c.ab||!1}C(ii,lo),ii.prototype.g=function(){return new Ss(this.i,this.h)};function Ss(c,v){Pt.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(Ss,Pt),s=Ss.prototype,s.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,on(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||m).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,on(this)),this.g&&(this.readyState=3,on(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fs(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fs(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?hi(this):on(this),this.readyState==3&&Fs(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,hi(this))},s.Na=function(c){this.g&&(this.response=c,hi(this))},s.ga=function(){this.g&&hi(this)};function hi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,on(c)}s.setRequestHeader=function(c,v){this.A.append(c,v)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=v.next();return c.join(`\r
`)};function on(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Tn(c){let v="";return We(c,function(b,R){v+=R,v+=":",v+=b,v+=`\r
`}),v}function os(c,v,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=Tn(b),typeof c=="string"?b!=null&&zn(b):dt(c,v,b))}function d(c){Pt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(d,Pt);var _=/^https?$/i,S=["POST","PUT"];s=d.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,v,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rn.g(),this.g.onreadystatechange=I(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(te){N(this,te);return}if(c=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Y in R)b.set(Y,R[Y]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const te of R.keys())b.set(te,R.get(te));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(te=>te.toLowerCase()=="content-type"),Y=m.FormData&&c instanceof m.FormData,!(Array.prototype.indexOf.call(S,v,void 0)>=0)||R||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ge]of b)this.g.setRequestHeader(te,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(te){N(this,te)}};function N(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,M(c),se(c)}function M(c){c.A||(c.A=!0,Wt(c,"complete"),Wt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Wt(this,"complete"),Wt(this,"abort"),se(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),se(this,!0)),d.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?X(this):this.Xa())},s.Xa=function(){X(this)};function X(c){if(c.h&&typeof u<"u"){if(c.v&&Ne(c)==4)setTimeout(c.Ca.bind(c),0);else if(Wt(c,"readystatechange"),Ne(c)==4){c.h=!1;try{const te=c.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var R;if(R=te===0){let ge=String(c.D).match(Tr)[1]||null;!ge&&m.self&&m.self.location&&(ge=m.self.location.protocol.slice(0,-1)),R=!_.test(ge?ge.toLowerCase():"")}b=R}if(b)Wt(c,"complete"),Wt(c,"success");else{c.o=6;try{var Y=Ne(c)>2?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.ca()+"]",M(c)}}finally{se(c)}}}}function se(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const b=c.g;c.g=null,v||Wt(c,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ne(c){return c.g?c.g.readyState:0}s.ca=function(){try{return Ne(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),oo(v)}};function ke(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ue(c){const v={};c=(c.g&&Ne(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(x(c[R]))continue;var b=vr(c[R]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const te=v[Y]||[];v[Y]=te,te.push(b)}$e(v,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gt(c,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||v}function Qt(c){this.za=0,this.i=[],this.j=new Ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gt("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gt("baseRetryDelayMs",5e3,c),this.Za=gt("retryDelaySeedMs",1e4,c),this.Ta=gt("forwardChannelMaxRetries",2,c),this.va=gt("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new rs(c&&c.concurrentRequestLimit),this.Ba=new Pi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Qt.prototype,s.ka=8,s.I=1,s.connect=function(c,v,b,R){Xt(0),this.W=c,this.H=v||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.J=yo(this,null,this.W),Hi(this)};function Ia(c){if(Gs(c),c.I==3){var v=c.V++,b=Nt(c.J);if(dt(b,"SID",c.M),dt(b,"RID",v),dt(b,"TYPE","terminate"),Ys(c,b),v=new ci(c,c.j,v),v.M=2,v.A=Ui(Nt(b)),b=!1,m.navigator&&m.navigator.sendBeacon)try{b=m.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&m.Image&&(new Image().src=v.A,b=!0),b||(v.g=vo(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Jn(v)}_o(c)}function ws(c){c.g&&(Rr(c),c.g.cancel(),c.g=null)}function Gs(c){ws(c),c.v&&(m.clearTimeout(c.v),c.v=null),Oa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&m.clearTimeout(c.m),c.m=null)}function Hi(c){if(!Ca(c.h)&&!c.m){c.m=!0;var v=c.Ea;Ae||D(),xe||(Ae(),xe=!0),O.add(v,c),c.D=0}}function Xs(c,v){return ei(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=pe(g(c.Ea,c,v),go(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const Y=new ci(this,this.j,c);let te=this.o;if(this.U&&(te?(te=B(te),ye(te,this.U)):te=this.U),this.u!==null||this.R||(Y.J=te,te=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=ho(this,Y,v),b=Nt(this.J),dt(b,"RID",c),dt(b,"CVER",22),this.G&&dt(b,"X-HTTP-Session-Id",this.G),Ys(this,b),te&&(this.R?v="headers="+zn(Tn(te))+"&"+v:this.u&&os(b,this.u,te)),Vi(this.h,Y),this.Ra&&dt(b,"TYPE","init"),this.S?(dt(b,"$req",v),dt(b,"SID","null"),Y.U=!0,Mi(Y,b,null)):Mi(Y,b,v),this.I=2}}else this.I==3&&(c?Nr(this,c):this.i.length==0||Ca(this.h)||Nr(this))};function Nr(c,v){var b;v?b=v.l:b=c.V++;const R=Nt(c.J);dt(R,"SID",c.M),dt(R,"RID",b),dt(R,"AID",c.K),Ys(c,R),c.u&&c.o&&os(R,c.u,c.o),b=new ci(c,c.j,b,c.D+1),c.u===null&&(b.J=c.o),v&&(c.i=v.G.concat(c.i)),v=ho(c,b,1e3),b.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Vi(c.h,b),Mi(b,R,v)}function Ys(c,v){c.H&&We(c.H,function(b,R){dt(v,R,b)}),c.l&&We({},function(b,R){dt(v,R,b)})}function ho(c,v,b){b=Math.min(c.i.length,b);const R=c.l?g(c.l.Ka,c.l,c):null;e:{var Y=c.i;let He=-1;for(;;){const Ht=["count="+b];He==-1?b>0?(He=Y[0].g,Ht.push("ofs="+He)):He=0:Ht.push("ofs="+He);let ht=!0;for(let Lt=0;Lt<b;Lt++){var te=Y[Lt].g;const F=Y[Lt].map;if(te-=He,te<0)He=Math.max(0,Y[Lt].g-100),ht=!1;else try{te="req"+te+"_"||"";try{var ge=F instanceof Map?F:Object.entries(F);for(const[ue,Ee]of ge){let De=Ee;y(Ee)&&(De=ss(Ee)),Ht.push(te+ue+"="+encodeURIComponent(De))}}catch(ue){throw Ht.push(te+"type="+encodeURIComponent("_badmap")),ue}}catch{R&&R(F)}}if(ht){ge=Ht.join("&");break e}}ge=void 0}return c=c.i.splice(0,b),v.G=c,ge}function mo(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;Ae||D(),xe||(Ae(),xe=!0),O.add(v,c),c.A=0}}function Qs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=pe(g(c.Da,c),go(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,po(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=pe(g(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),ws(this),po(this))};function Rr(c){c.B!=null&&(m.clearTimeout(c.B),c.B=null)}function po(c){c.g=new ci(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=Nt(c.na);dt(v,"RID","rpc"),dt(v,"SID",c.M),dt(v,"AID",c.K),dt(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&dt(v,"TO",c.ia),dt(v,"TYPE","xmlhttp"),Ys(c,v),c.u&&c.o&&os(v,c.u,c.o),c.O&&(c.g.H=c.O);var b=c.g;c=c.ba,b.M=1,b.A=Ui(Nt(v)),b.u=null,b.R=!0,vs(b,c)}s.Va=function(){this.C!=null&&(this.C=null,ws(this),Qs(this),Xt(19))};function Oa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Cr(c,v){var b=null;if(c.g==v){Oa(c),Rr(c),c.g=null;var R=2}else if(Ri(c.h,v))b=v.G,zs(c.h,v),R=1;else return;if(c.I!=0){if(v.o)if(R==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var Y=c.D;R=Si(),Wt(R,new wi(R,b)),Hi(c)}else mo(c);else if(Y=v.m,Y==3||Y==0&&v.X>0||!(R==1&&Xs(c,v)||R==2&&Qs(c)))switch(b&&b.length>0&&(v=c.h,v.i=v.i.concat(b)),Y){case 1:Fi(c,5);break;case 4:Fi(c,10);break;case 3:Fi(c,6);break;default:Fi(c,2)}}}function go(c,v){let b=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(b*=2),b*v}function Fi(c,v){if(c.j.info("Error code "+v),v==2){var b=g(c.bb,c),R=c.Ua;const Y=!R;R=new ti(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ge(R,"https"),Ui(R),Y?Dn(R.toString(),b):Ar(R.toString(),b)}else Xt(2);c.I=0,c.l&&c.l.pa(v),_o(c),Gs(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function _o(c){if(c.I=0,c.ja=[],c.l){const v=xa(c.h);(v.length!=0||c.i.length!=0)&&(W(c.ja,v),W(c.ja,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.oa()}}function yo(c,v,b){var R=b instanceof ti?Nt(b):new ti(b);if(R.g!="")v&&(R.g=v+"."+R.g),Hn(R,R.u);else{var Y=m.location;R=Y.protocol,v=v?v+"."+Y.hostname:Y.hostname,Y=+Y.port;const te=new ti(null);R&&Ge(te,R),v&&(te.g=v),Y&&Hn(te,Y),b&&(te.h=b),R=te}return b=c.G,v=c.wa,b&&v&&dt(R,b,v),dt(R,"VER",c.ka),Ys(c,R),R}function vo(c,v,b){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new d(new ii({ab:b})):new d(c.ma),v.Fa(c.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eo(){}s=Eo.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function As(){}As.prototype.g=function(c,v){return new bn(c,v)};function bn(c,v){Pt.call(this),this.g=new Qt(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!x(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!x(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new ls(this)}C(bn,Pt),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Ia(this.g)},bn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.v&&(b={},b.__data__=ss(c),c=b);v.i.push(new Yt(v.Ya++,c)),v.I==3&&Hi(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,bn.Z.N.call(this)};function To(c){Oe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const b in v){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}C(To,Oe);function bo(){Wn.call(this),this.status=1}C(bo,Wn);function ls(c){this.g=c}C(ls,Eo),ls.prototype.ra=function(){Wt(this.g,"a")},ls.prototype.qa=function(c){Wt(this.g,new To(c))},ls.prototype.pa=function(c){Wt(this.g,new bo)},ls.prototype.oa=function(){Wt(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,N0=function(){return new As},A0=function(){return Si()},w0=Ut,Tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zn.NO_ERROR=0,Zn.TIMEOUT=8,Zn.HTTP_ERROR=6,Qc=Zn,Aa.COMPLETE="complete",S0=Aa,uo.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,hu=uo,d.prototype.listenOnce=d.prototype.K,d.prototype.getLastError=d.prototype.Ha,d.prototype.getLastErrorCode=d.prototype.ya,d.prototype.getStatus=d.prototype.ca,d.prototype.getResponseJson=d.prototype.La,d.prototype.getResponseText=d.prototype.la,d.prototype.send=d.prototype.ea,d.prototype.setWithCredentials=d.prototype.Fa,b0=d}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");let yl="12.8.0";function S2(s){yl=s}const Kr=new m0("@firebase/firestore");function el(){return Kr.logLevel}function Se(s,...e){if(Kr.logLevel<=pt.DEBUG){const i=e.map(Km);Kr.debug(`Firestore (${yl}): ${s}`,...i)}}function va(s,...e){if(Kr.logLevel<=pt.ERROR){const i=e.map(Km);Kr.error(`Firestore (${yl}): ${s}`,...i)}}function ul(s,...e){if(Kr.logLevel<=pt.WARN){const i=e.map(Km);Kr.warn(`Firestore (${yl}): ${s}`,...i)}}function Km(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function ze(s,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,R0(s,a,i)}function R0(s,e,i){let a=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw va(a),new Error(a)}function At(s,e,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,s||R0(e,l,a)}function Qe(s,e){return s}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends eo{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rr{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}class C0{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Yn.UNAUTHENTICATED)))}shutdown(){}}class A2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class N2{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){At(this.o===void 0,42304);let a=this.i;const l=E=>this.i!==a?(a=this.i,i(E)):Promise.resolve();let u=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new rr,e.enqueueRetryable((()=>l(this.currentUser)))};const m=()=>{const E=u;e.enqueueRetryable((async()=>{await E.promise,await l(this.currentUser)}))},y=E=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>y(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new rr)}}),0),m()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(At(typeof a.accessToken=="string",31837,{l:a}),new C0(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class R2{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class C2{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new R2(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x2{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,o2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){At(this.o===void 0,3512);const a=u=>{u.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const m=u.token!==this.m;return this.m=u.token,Se("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?i(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const l=u=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(At(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new kv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function D2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}class Wm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=D2(40);for(let u=0;u<l.length;++u)a.length<20&&l[u]<i&&(a+=e.charAt(l[u]%62))}return a}}function ut(s,e){return s<e?-1:s>e?1:0}function bm(s,e){const i=Math.min(s.length,e.length);for(let a=0;a<i;a++){const l=s.charAt(a),u=e.charAt(a);if(l!==u)return tm(l)===tm(u)?ut(l,u):tm(l)?1:-1}return ut(s.length,e.length)}const I2=55296,O2=57343;function tm(s){const e=s.charCodeAt(0);return e>=I2&&e<=O2}function cl(s,e,i){return s.length===e.length&&s.every(((a,l)=>i(a,e[l])))}const jv="__name__";class Is{constructor(e,i,a){i===void 0?i=0:i>e.length&&ze(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&ze(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let l=0;l<a;l++){const u=Is.compareSegments(e.get(l),i.get(l));if(u!==0)return u}return ut(e.length,i.length)}static compareSegments(e,i){const a=Is.isNumericId(e),l=Is.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Is.extractNumericId(e).compare(Is.extractNumericId(i)):bm(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ar.fromString(e.substring(4,e.length-2))}}class Vt extends Is{construct(e,i,a){return new Vt(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new we(fe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new Vt(i)}static emptyPath(){return new Vt([])}}const k2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Is{construct(e,i,a){return new Vn(e,i,a)}static isValidIdentifier(e){return k2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jv}static keyField(){return new Vn([jv])}static fromServerFormat(e){const i=[];let a="",l=0;const u=()=>{if(a.length===0)throw new we(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let m=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new we(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[l+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new we(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=E,l+=2}else y==="`"?(m=!m,l++):y!=="."||m?(a+=y,l++):(u(),l++)}if(u(),m)throw new we(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(i)}static emptyPath(){return new Vn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Vt.fromString(e))}static fromName(e){return new Le(Vt.fromString(e).popFirst(5))}static empty(){return new Le(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Vt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Vt(e.slice()))}}function x0(s,e,i){if(!i)throw new we(fe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function j2(s,e,i,a){if(e===!0&&a===!0)throw new we(fe.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Lv(s){if(!Le.isDocumentKey(s))throw new we(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Mv(s){if(Le.isDocumentKey(s))throw new we(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function D0(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Cf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ze(12329,{type:typeof s})}function fl(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new we(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Cf(s);throw new we(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}function mn(s,e){const i={typeString:s};return e&&(i.value=e),i}function Iu(s,e){if(!D0(s))throw new we(fe.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const l=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){i=`JSON missing required field: '${a}'`;break}const m=s[a];if(l&&typeof m!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(u!==void 0&&m!==u.value){i=`Expected '${a}' field to equal '${u.value}'`;break}}if(i)throw new we(fe.INVALID_ARGUMENT,i);return!0}const Vv=-62135596800,Uv=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Uv);return new zt(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new we(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new we(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Vv)throw new we(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uv}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:mn("string",zt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new zt(0,0))}static max(){return new Fe(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const bu=-1;function L2(s,e){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=Fe.fromTimestamp(a===1e9?new zt(i+1,0):new zt(i,a));return new ur(l,Le.empty(),e)}function M2(s){return new ur(s.readTime,s.key,bu)}class ur{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new ur(Fe.min(),Le.empty(),bu)}static max(){return new ur(Fe.max(),Le.empty(),bu)}}function V2(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=Le.comparator(s.documentKey,e.documentKey),i!==0?i:ut(s.largestBatchId,e.largestBatchId))}const U2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vl(s){if(s.code!==fe.FAILED_PRECONDITION||s.message!==U2)throw s;Se("LocalStore","Unexpectedly lost primary lease")}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new de(((a,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(a,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof de?i:de.resolve(i)}catch(i){return de.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):de.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):de.reject(i)}static resolve(e){return new de(((i,a)=>{i(e)}))}static reject(e){return new de(((i,a)=>{a(e)}))}static waitFor(e){return new de(((i,a)=>{let l=0,u=0,m=!1;e.forEach((y=>{++l,y.next((()=>{++u,m&&u===l&&i()}),(E=>a(E)))})),m=!0,u===l&&i()}))}static or(e){let i=de.resolve(!1);for(const a of e)i=i.next((l=>l?de.resolve(l):a()));return i}static forEach(e,i){const a=[];return e.forEach(((l,u)=>{a.push(i.call(this,l,u))})),this.waitFor(a)}static mapArray(e,i){return new de(((a,l)=>{const u=e.length,m=new Array(u);let y=0;for(let E=0;E<u;E++){const g=E;i(e[g]).next((w=>{m[g]=w,++y,y===u&&a(m)}),(w=>l(w)))}}))}static doWhile(e,i){return new de(((a,l)=>{const u=()=>{e()===!0?i().next((()=>{u()}),l):a()};u()}))}}function q2(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function El(s){return s.name==="IndexedDbTransactionError"}class xf{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;const Zm=-1;function Df(s){return s==null}function rf(s){return s===0&&1/s==-1/0}function z2(s){return typeof s=="number"&&Number.isInteger(s)&&!rf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const I0="";function P2(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Bv(e)),e=H2(s.get(i),e);return Bv(e)}function H2(s,e){let i=e;const a=s.length;for(let l=0;l<a;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case I0:i+="";break;default:i+=u}}return i}function Bv(s){return s+I0+""}function qv(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function to(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function O0(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class $t{constructor(e,i){this.comparator=e,this.root=i||Ln.EMPTY}insert(e,i){return new $t(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,i,a,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=i?a(e.key,i):1,i&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,i,a,l,u){this.key=e,this.value=i,this.color=a??Ln.RED,this.left=l??Ln.EMPTY,this.right=u??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,l,u){return new Ln(e??this.key,i??this.value,a??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let l=this;const u=a(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,i,a),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return Ln.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,i,a,l,u){return this}insert(e,i,a){return new Ln(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new zv(this.data.getIterator())}getIteratorFrom(e){return new zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=a.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new yn(this.comparator);return i.data=e,i}}class zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ds{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new ds([])}unionWith(e){let i=new yn(Vn.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new ds(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}class k0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Un{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new k0("Invalid base64 string: "+u):u}})(e);return new Un(i)}static fromUint8Array(e){const i=(function(l){let u="";for(let m=0;m<l.length;++m)u+=String.fromCharCode(l[m]);return u})(e);return new Un(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const F2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(s){if(At(!!s,39018),typeof s=="string"){let e=0;const i=F2.exec(s);if(At(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:an(s.seconds),nanos:an(s.nanos)}}function an(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function fr(s){return typeof s=="string"?Un.fromBase64String(s):Un.fromUint8Array(s)}const j0="server_timestamp",L0="__type__",M0="__previous_value__",V0="__local_write_time__";function Jm(s){return(s?.mapValue?.fields||{})[L0]?.stringValue===j0}function If(s){const e=s.mapValue.fields[M0];return Jm(e)?If(e):e}function Su(s){const e=cr(s.mapValue.fields[V0].timestampValue);return new zt(e.seconds,e.nanos)}class G2{constructor(e,i,a,l,u,m,y,E,g,w,C){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=u,this.forceLongPolling=m,this.autoDetectLongPolling=y,this.longPollingOptions=E,this.useFetchStreams=g,this.isUsingEmulator=w,this.apiKey=C}}const of="(default)";class wu{constructor(e,i){this.projectId=e,this.database=i||of}static empty(){return new wu("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}function X2(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new we(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(s.options.projectId,e)}const U0="__type__",Y2="__max__",Pc={mapValue:{}},B0="__vector__",lf="value";function dr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Jm(s)?4:$2(s)?9007199254740991:Q2(s)?10:11:ze(28295,{value:s})}function Us(s,e){if(s===e)return!0;const i=dr(s);if(i!==dr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Su(s).isEqual(Su(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const m=cr(l.timestampValue),y=cr(u.timestampValue);return m.seconds===y.seconds&&m.nanos===y.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return fr(l.bytesValue).isEqual(fr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return an(l.geoPointValue.latitude)===an(u.geoPointValue.latitude)&&an(l.geoPointValue.longitude)===an(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return an(l.integerValue)===an(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const m=an(l.doubleValue),y=an(u.doubleValue);return m===y?rf(m)===rf(y):isNaN(m)&&isNaN(y)}return!1})(s,e);case 9:return cl(s.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(l,u){const m=l.mapValue.fields||{},y=u.mapValue.fields||{};if(qv(m)!==qv(y))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(y[E]===void 0||!Us(m[E],y[E])))return!1;return!0})(s,e);default:return ze(52216,{left:s})}}function Au(s,e){return(s.values||[]).find((i=>Us(i,e)))!==void 0}function dl(s,e){if(s===e)return 0;const i=dr(s),a=dr(e);if(i!==a)return ut(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return ut(s.booleanValue,e.booleanValue);case 2:return(function(u,m){const y=an(u.integerValue||u.doubleValue),E=an(m.integerValue||m.doubleValue);return y<E?-1:y>E?1:y===E?0:isNaN(y)?isNaN(E)?0:-1:1})(s,e);case 3:return Pv(s.timestampValue,e.timestampValue);case 4:return Pv(Su(s),Su(e));case 5:return bm(s.stringValue,e.stringValue);case 6:return(function(u,m){const y=fr(u),E=fr(m);return y.compareTo(E)})(s.bytesValue,e.bytesValue);case 7:return(function(u,m){const y=u.split("/"),E=m.split("/");for(let g=0;g<y.length&&g<E.length;g++){const w=ut(y[g],E[g]);if(w!==0)return w}return ut(y.length,E.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,m){const y=ut(an(u.latitude),an(m.latitude));return y!==0?y:ut(an(u.longitude),an(m.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Hv(s.arrayValue,e.arrayValue);case 10:return(function(u,m){const y=u.fields||{},E=m.fields||{},g=y[lf]?.arrayValue,w=E[lf]?.arrayValue,C=ut(g?.values?.length||0,w?.values?.length||0);return C!==0?C:Hv(g,w)})(s.mapValue,e.mapValue);case 11:return(function(u,m){if(u===Pc.mapValue&&m===Pc.mapValue)return 0;if(u===Pc.mapValue)return 1;if(m===Pc.mapValue)return-1;const y=u.fields||{},E=Object.keys(y),g=m.fields||{},w=Object.keys(g);E.sort(),w.sort();for(let C=0;C<E.length&&C<w.length;++C){const I=bm(E[C],w[C]);if(I!==0)return I;const $=dl(y[E[C]],g[w[C]]);if($!==0)return $}return ut(E.length,w.length)})(s.mapValue,e.mapValue);default:throw ze(23264,{he:i})}}function Pv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ut(s,e);const i=cr(s),a=cr(e),l=ut(i.seconds,a.seconds);return l!==0?l:ut(i.nanos,a.nanos)}function Hv(s,e){const i=s.values||[],a=e.values||[];for(let l=0;l<i.length&&l<a.length;++l){const u=dl(i[l],a[l]);if(u)return u}return ut(i.length,a.length)}function hl(s){return Sm(s)}function Sm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const a=cr(i);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return fr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Le.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let a="[",l=!0;for(const u of i.values||[])l?l=!1:a+=",",a+=Sm(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const m of a)u?u=!1:l+=",",l+=`${m}:${Sm(i.fields[m])}`;return l+"}"})(s.mapValue):ze(61005,{value:s})}function $c(s){switch(dr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(s);return e?16+$c(e):16;case 5:return 2*s.stringValue.length;case 6:return fr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,u)=>l+$c(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let l=0;return to(a.fields,((u,m)=>{l+=u.length+$c(m)})),l})(s.mapValue);default:throw ze(13486,{value:s})}}function Fv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function wm(s){return!!s&&"integerValue"in s}function ep(s){return!!s&&"arrayValue"in s}function Gv(s){return!!s&&"nullValue"in s}function Xv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kc(s){return!!s&&"mapValue"in s}function Q2(s){return(s?.mapValue?.fields||{})[U0]?.stringValue===B0}function _u(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return to(s.mapValue.fields,((i,a)=>e.mapValue.fields[i]=_u(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=_u(s.arrayValue.values[i]);return e}return{...s}}function $2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Kc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(i)}setAll(e){let i=Vn.emptyPath(),a={},l=[];e.forEach(((m,y)=>{if(!i.isImmediateParentOf(y)){const E=this.getFieldsMap(i);this.applyChanges(E,a,l),a={},l=[],i=y.popLast()}m?a[y.lastSegment()]=_u(m):l.push(y.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,a,l)}delete(e){const i=this.field(e.popLast());Kc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=i.mapValue.fields[e.get(a)];Kc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,a){to(i,((l,u)=>e[l]=u));for(const l of a)delete e[l]}clone(){return new es(_u(this.value))}}function q0(s){const e=[];return to(s.fields,((i,a)=>{const l=new Vn([i]);if(Kc(a)){const u=q0(a.mapValue).fields;if(u.length===0)e.push(l);else for(const m of u)e.push(l.child(m))}else e.push(l)})),new ds(e)}class Qn{constructor(e,i,a,l,u,m,y){this.key=e,this.documentType=i,this.version=a,this.readTime=l,this.createTime=u,this.data=m,this.documentState=y}static newInvalidDocument(e){return new Qn(e,0,Fe.min(),Fe.min(),Fe.min(),es.empty(),0)}static newFoundDocument(e,i,a,l){return new Qn(e,1,i,Fe.min(),a,l,0)}static newNoDocument(e,i){return new Qn(e,2,i,Fe.min(),Fe.min(),es.empty(),0)}static newUnknownDocument(e,i){return new Qn(e,3,i,Fe.min(),Fe.min(),es.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uf{constructor(e,i){this.position=e,this.inclusive=i}}function Yv(s,e,i){let a=0;for(let l=0;l<s.position.length;l++){const u=e[l],m=s.position[l];if(u.field.isKeyField()?a=Le.comparator(Le.fromName(m.referenceValue),i.key):a=dl(m,i.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Qv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Us(s.position[i],e.position[i]))return!1;return!0}class cf{constructor(e,i="asc"){this.field=e,this.dir=i}}function K2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class z0{}class hn extends z0{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new Z2(e,i,a):i==="array-contains"?new tN(e,a):i==="in"?new nN(e,a):i==="not-in"?new iN(e,a):i==="array-contains-any"?new sN(e,a):new hn(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new J2(e,a):new eN(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(dl(i,this.value)):i!==null&&dr(this.value)===dr(i)&&this.matchesComparison(dl(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends z0{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new ms(e,i)}matches(e){return P0(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function P0(s){return s.op==="and"}function H0(s){return W2(s)&&P0(s)}function W2(s){for(const e of s.filters)if(e instanceof ms)return!1;return!0}function Am(s){if(s instanceof hn)return s.field.canonicalString()+s.op.toString()+hl(s.value);if(H0(s))return s.filters.map((e=>Am(e))).join(",");{const e=s.filters.map((i=>Am(i))).join(",");return`${s.op}(${e})`}}function F0(s,e){return s instanceof hn?(function(a,l){return l instanceof hn&&a.op===l.op&&a.field.isEqual(l.field)&&Us(a.value,l.value)})(s,e):s instanceof ms?(function(a,l){return l instanceof ms&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((u,m,y)=>u&&F0(m,l.filters[y])),!0):!1})(s,e):void ze(19439)}function G0(s){return s instanceof hn?(function(i){return`${i.field.canonicalString()} ${i.op} ${hl(i.value)}`})(s):s instanceof ms?(function(i){return i.op.toString()+" {"+i.getFilters().map(G0).join(" ,")+"}"})(s):"Filter"}class Z2 extends hn{constructor(e,i,a){super(e,i,a),this.key=Le.fromName(a.referenceValue)}matches(e){const i=Le.comparator(e.key,this.key);return this.matchesComparison(i)}}class J2 extends hn{constructor(e,i){super(e,"in",i),this.keys=X0("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class eN extends hn{constructor(e,i){super(e,"not-in",i),this.keys=X0("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function X0(s,e){return(e.arrayValue?.values||[]).map((i=>Le.fromName(i.referenceValue)))}class tN extends hn{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return ep(i)&&Au(i.arrayValue,this.value)}}class nN extends hn{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Au(this.value.arrayValue,i)}}class iN extends hn{constructor(e,i){super(e,"not-in",i)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Au(this.value.arrayValue,i)}}class sN extends hn{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!ep(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>Au(this.value.arrayValue,a)))}}class aN{constructor(e,i=null,a=[],l=[],u=null,m=null,y=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=u,this.startAt=m,this.endAt=y,this.Te=null}}function $v(s,e=null,i=[],a=[],l=null,u=null,m=null){return new aN(s,e,i,a,l,u,m)}function tp(s){const e=Qe(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>Am(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Df(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>hl(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>hl(a))).join(",")),e.Te=i}return e.Te}function np(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!K2(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!F0(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Qv(s.startAt,e.startAt)&&Qv(s.endAt,e.endAt)}function Nm(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Ou{constructor(e,i=null,a=[],l=[],u=null,m="F",y=null,E=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=u,this.limitType=m,this.startAt=y,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function rN(s,e,i,a,l,u,m,y){return new Ou(s,e,i,a,l,u,m,y)}function Y0(s){return new Ou(s)}function Kv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function oN(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Q0(s){return s.collectionGroup!==null}function yu(s){const e=Qe(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),i.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let y=new yn(Vn.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((g=>{g.isInequality()&&(y=y.add(g.field))}))})),y})(e).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new cf(u,a))})),i.has(Vn.keyField().canonicalString())||e.Ie.push(new cf(Vn.keyField(),a))}return e.Ie}function js(s){const e=Qe(s);return e.Ee||(e.Ee=lN(e,yu(s))),e.Ee}function lN(s,e){if(s.limitType==="F")return $v(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new cf(l.field,u)}));const i=s.endAt?new uf(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new uf(s.startAt.position,s.startAt.inclusive):null;return $v(s.path,s.collectionGroup,e,s.filters,s.limit,i,a)}}function Rm(s,e){const i=s.filters.concat([e]);return new Ou(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function Cm(s,e,i){return new Ou(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Of(s,e){return np(js(s),js(e))&&s.limitType===e.limitType}function $0(s){return`${tp(js(s))}|lt:${s.limitType}`}function tl(s){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>G0(l))).join(", ")}]`),Df(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>hl(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>hl(l))).join(",")),`Target(${a})`})(js(s))}; limitType=${s.limitType})`}function kf(s,e){return e.isFoundDocument()&&(function(a,l){const u=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Le.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,l){for(const u of yu(a))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,l){for(const u of a.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(a,l){return!(a.startAt&&!(function(m,y,E){const g=Yv(m,y,E);return m.inclusive?g<=0:g<0})(a.startAt,yu(a),l)||a.endAt&&!(function(m,y,E){const g=Yv(m,y,E);return m.inclusive?g>=0:g>0})(a.endAt,yu(a),l))})(s,e)}function uN(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function K0(s){return(e,i)=>{let a=!1;for(const l of yu(s)){const u=cN(l,e,i);if(u!==0)return u;a=a||l.field.isKeyField()}return 0}}function cN(s,e,i){const a=s.field.isKeyField()?Le.comparator(e.key,i.key):(function(u,m,y){const E=m.data.field(u),g=y.data.field(u);return E!==null&&g!==null?dl(E,g):ze(42886)})(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ze(19790,{direction:s.dir})}}class no{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[l,u]of a)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,((i,a)=>{for(const[l,u]of a)e(l,u)}))}isEmpty(){return O0(this.inner)}size(){return this.innerSize}}const fN=new $t(Le.comparator);function Ea(){return fN}const W0=new $t(Le.comparator);function mu(...s){let e=W0;for(const i of s)e=e.insert(i.key,i);return e}function Z0(s){let e=W0;return s.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Qr(){return vu()}function J0(){return vu()}function vu(){return new no((s=>s.toString()),((s,e)=>s.isEqual(e)))}const dN=new $t(Le.comparator),hN=new yn(Le.comparator);function ct(...s){let e=hN;for(const i of s)e=e.add(i);return e}const mN=new yn(ut);function pN(){return mN}function ip(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(e)?"-0":e}}function eT(s){return{integerValue:""+s}}function gN(s,e){return z2(e)?eT(e):ip(s,e)}class jf{constructor(){this._=void 0}}function _N(s,e,i){return s instanceof ff?(function(l,u){const m={fields:{[L0]:{stringValue:j0},[V0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Jm(u)&&(u=If(u)),u&&(m.fields[M0]=u),{mapValue:m}})(i,e):s instanceof Nu?nT(s,e):s instanceof Ru?iT(s,e):(function(l,u){const m=tT(l,u),y=Wv(m)+Wv(l.Ae);return wm(m)&&wm(l.Ae)?eT(y):ip(l.serializer,y)})(s,e)}function yN(s,e,i){return s instanceof Nu?nT(s,e):s instanceof Ru?iT(s,e):i}function tT(s,e){return s instanceof df?(function(a){return wm(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class ff extends jf{}class Nu extends jf{constructor(e){super(),this.elements=e}}function nT(s,e){const i=sT(e);for(const a of s.elements)i.some((l=>Us(l,a)))||i.push(a);return{arrayValue:{values:i}}}class Ru extends jf{constructor(e){super(),this.elements=e}}function iT(s,e){let i=sT(e);for(const a of s.elements)i=i.filter((l=>!Us(l,a)));return{arrayValue:{values:i}}}class df extends jf{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function Wv(s){return an(s.integerValue||s.doubleValue)}function sT(s){return ep(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function vN(s,e){return s.field.isEqual(e.field)&&(function(a,l){return a instanceof Nu&&l instanceof Nu||a instanceof Ru&&l instanceof Ru?cl(a.elements,l.elements,Us):a instanceof df&&l instanceof df?Us(a.Ae,l.Ae):a instanceof ff&&l instanceof ff})(s.transform,e.transform)}class EN{constructor(e,i){this.version=e,this.transformResults=i}}class Ls{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Ls}static exists(e){return new Ls(void 0,e)}static updateTime(e){return new Ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Lf{}function aT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new sp(s.key,Ls.none()):new ku(s.key,s.data,Ls.none());{const i=s.data,a=es.empty();let l=new yn(Vn.comparator);for(let u of e.fields)if(!l.has(u)){let m=i.field(u);m===null&&u.length>1&&(u=u.popLast(),m=i.field(u)),m===null?a.delete(u):a.set(u,m),l=l.add(u)}return new io(s.key,a,new ds(l.toArray()),Ls.none())}}function TN(s,e,i){s instanceof ku?(function(l,u,m){const y=l.value.clone(),E=Jv(l.fieldTransforms,u,m.transformResults);y.setAll(E),u.convertToFoundDocument(m.version,y).setHasCommittedMutations()})(s,e,i):s instanceof io?(function(l,u,m){if(!Wc(l.precondition,u))return void u.convertToUnknownDocument(m.version);const y=Jv(l.fieldTransforms,u,m.transformResults),E=u.data;E.setAll(rT(l)),E.setAll(y),u.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(s,e,i):(function(l,u,m){u.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,i)}function Eu(s,e,i,a){return s instanceof ku?(function(u,m,y,E){if(!Wc(u.precondition,m))return y;const g=u.value.clone(),w=eE(u.fieldTransforms,E,m);return g.setAll(w),m.convertToFoundDocument(m.version,g).setHasLocalMutations(),null})(s,e,i,a):s instanceof io?(function(u,m,y,E){if(!Wc(u.precondition,m))return y;const g=eE(u.fieldTransforms,E,m),w=m.data;return w.setAll(rT(u)),w.setAll(g),m.convertToFoundDocument(m.version,w).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((C=>C.field)))})(s,e,i,a):(function(u,m,y){return Wc(u.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):y})(s,e,i)}function bN(s,e){let i=null;for(const a of s.fieldTransforms){const l=e.data.field(a.field),u=tT(a.transform,l||null);u!=null&&(i===null&&(i=es.empty()),i.set(a.field,u))}return i||null}function Zv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&cl(a,l,((u,m)=>vN(u,m)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ku extends Lf{constructor(e,i,a,l=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class io extends Lf{constructor(e,i,a,l,u=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function rT(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}})),e}function Jv(s,e,i){const a=new Map;At(s.length===i.length,32656,{Ve:i.length,de:s.length});for(let l=0;l<i.length;l++){const u=s[l],m=u.transform,y=e.data.field(u.field);a.set(u.field,yN(m,y,i[l]))}return a}function eE(s,e,i){const a=new Map;for(const l of s){const u=l.transform,m=i.data.field(l.field);a.set(l.field,_N(u,m,e))}return a}class sp extends Lf{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SN extends Lf{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wN{constructor(e,i,a,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&TN(u,e,a[l])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=Eu(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=Eu(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=J0();return this.mutations.forEach((l=>{const u=e.get(l.key),m=u.overlayedDocument;let y=this.applyToLocalView(m,u.mutatedFields);y=i.has(l.key)?null:y;const E=aT(m,y);E!==null&&a.set(l.key,E),m.isValidDocument()||m.convertToNoDocument(Fe.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),ct())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,((i,a)=>Zv(i,a)))&&cl(this.baseMutations,e.baseMutations,((i,a)=>Zv(i,a)))}}class ap{constructor(e,i,a,l){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(e,i,a){At(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return dN})();const u=e.mutations;for(let m=0;m<u.length;m++)l=l.insert(u[m].key,a[m].version);return new ap(e,i,a,l)}}class AN{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NN{constructor(e,i){this.count=e,this.unchangedNames=i}}var dn,mt;function RN(s){switch(s){case fe.OK:return ze(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return ze(15467,{code:s})}}function oT(s){if(s===void 0)return va("GRPC error has no .code"),fe.UNKNOWN;switch(s){case dn.OK:return fe.OK;case dn.CANCELLED:return fe.CANCELLED;case dn.UNKNOWN:return fe.UNKNOWN;case dn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case dn.INTERNAL:return fe.INTERNAL;case dn.UNAVAILABLE:return fe.UNAVAILABLE;case dn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case dn.NOT_FOUND:return fe.NOT_FOUND;case dn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case dn.ABORTED:return fe.ABORTED;case dn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case dn.DATA_LOSS:return fe.DATA_LOSS;default:return ze(39323,{code:s})}}(mt=dn||(dn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";function CN(){return new TextEncoder}const xN=new ar([4294967295,4294967295],0);function tE(s){const e=CN().encode(s),i=new T0;return i.update(e),new Uint8Array(i.digest())}function nE(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ar([i,a],0),new ar([l,u],0)]}class rp{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new pu(`Invalid padding: ${i}`);if(a<0)throw new pu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new pu(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=ar.fromNumber(this.ge)}ye(e,i,a){let l=e.add(i.multiply(ar.fromNumber(a)));return l.compare(xN)===1&&(l=new ar([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=tE(e),[a,l]=nE(i);for(let u=0;u<this.hashCount;u++){const m=this.ye(a,l,u);if(!this.we(m))return!1}return!0}static create(e,i,a){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),m=new rp(u,l,i);return a.forEach((y=>m.insert(y))),m}insert(e){if(this.ge===0)return;const i=tE(e),[a,l]=nE(i);for(let u=0;u<this.hashCount;u++){const m=this.ye(a,l,u);this.be(m)}}be(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mf{constructor(e,i,a,l,u){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const l=new Map;return l.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Mf(Fe.min(),l,new $t(ut),Ea(),ct())}}class ju{constructor(e,i,a,l,u){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new ju(a,i,ct(),ct(),ct())}}class Zc{constructor(e,i,a,l){this.Se=e,this.removedTargetIds=i,this.key=a,this.De=l}}class lT{constructor(e,i){this.targetId=e,this.Ce=i}}class uT{constructor(e,i,a=Un.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=l}}class iE{constructor(){this.ve=0,this.Fe=sE(),this.Me=Un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),i=ct(),a=ct();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:ze(38017,{changeType:u})}})),new ju(this.Me,this.xe,e,i,a)}Ke(){this.Oe=!1,this.Fe=sE()}qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ea(),this.He=Hc(),this.Je=Hc(),this.Ze=new $t(ut)}Xe(e){for(const i of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,a=e.Ce.count,l=this.ot(i);if(l){const u=l.target;if(Nm(u))if(a===0){const m=new Le(u.path);this.et(i,m,Qn.newNoDocument(m,Fe.min()))}else At(a===1,20013,{expectedCount:a});else{const m=this._t(i);if(m!==a){const y=this.ut(e),E=y?this.ct(y,e,m):1;if(E!==0){this.it(i);const g=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,g)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:u=0}=i;let m,y;try{m=fr(a).toUint8Array()}catch(E){if(E instanceof k0)return ul("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{y=new rp(m,l,u)}catch(E){return ul(E instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return y.ge===0?null:y}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((u=>{const m=this.Ge.ht(),y=`projects/${m.projectId}/databases/${m.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(i,u,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((u,m)=>{const y=this.ot(m);if(y){if(u.current&&Nm(y.target)){const E=new Le(y.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,Qn.newNoDocument(E,e))}u.Be&&(i.set(m,u.ke()),u.Ke())}}));let a=ct();this.Je.forEach(((u,m)=>{let y=!0;m.forEachWhile((E=>{const g=this.ot(E);return!g||g.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(a=a.add(u))})),this.je.forEach(((u,m)=>m.setReadTime(e)));const l=new Mf(e,i,this.Ze,this.je,a);return this.je=Ea(),this.He=Hc(),this.Je=Hc(),this.Ze=new $t(ut),l}Ye(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).qe(i.key,a),this.je=this.je.insert(i.key,i),this.He=this.He.insert(i.key,this.It(i.key).add(e)),this.Je=this.Je.insert(i.key,this.Rt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.qe(i,1):l.Ue(i),this.Je=this.Je.insert(i,this.Rt(i).delete(e)),this.Je=this.Je.insert(i,this.Rt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let i=this.ze.get(e);return i||(i=new iE,this.ze.set(e,i)),i}Rt(e){let i=this.Je.get(e);return i||(i=new yn(ut),this.Je=this.Je.insert(e,i)),i}It(e){let i=this.He.get(e);return i||(i=new yn(ut),this.He=this.He.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||Se("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iE),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Hc(){return new $t(Le.comparator)}function sE(){return new $t(Le.comparator)}const IN={asc:"ASCENDING",desc:"DESCENDING"},ON={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kN={and:"AND",or:"OR"};class jN{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function xm(s,e){return s.useProto3Json||Df(e)?e:{value:e}}function hf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function LN(s,e){return hf(s,e.toTimestamp())}function Ms(s){return At(!!s,49232),Fe.fromTimestamp((function(i){const a=cr(i);return new zt(a.seconds,a.nanos)})(s))}function op(s,e){return Dm(s,e).canonicalString()}function Dm(s,e){const i=(function(l){return new Vt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function fT(s){const e=Vt.fromString(s);return At(gT(e),10190,{key:e.toString()}),e}function Im(s,e){return op(s.databaseId,e.path)}function nm(s,e){const i=fT(e);if(i.get(1)!==s.databaseId.projectId)throw new we(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new we(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Le(hT(i))}function dT(s,e){return op(s.databaseId,e)}function MN(s){const e=fT(s);return e.length===4?Vt.emptyPath():hT(e)}function Om(s){return new Vt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hT(s){return At(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function aE(s,e,i){return{name:Im(s,e),fields:i.value.mapValue.fields}}function VN(s,e){let i;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ze(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(g,w){return g.useProto3Json?(At(w===void 0||typeof w=="string",58123),Un.fromBase64String(w||"")):(At(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Un.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),m=e.targetChange.cause,y=m&&(function(g){const w=g.code===void 0?fe.UNKNOWN:oT(g.code);return new we(w,g.message||"")})(m);i=new uT(a,l,u,y||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=nm(s,a.document.name),u=Ms(a.document.updateTime),m=a.document.createTime?Ms(a.document.createTime):Fe.min(),y=new es({mapValue:{fields:a.document.fields}}),E=Qn.newFoundDocument(l,u,m,y),g=a.targetIds||[],w=a.removedTargetIds||[];i=new Zc(g,w,E.key,E)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=nm(s,a.document),u=a.readTime?Ms(a.readTime):Fe.min(),m=Qn.newNoDocument(l,u),y=a.removedTargetIds||[];i=new Zc([],y,m.key,m)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=nm(s,a.document),u=a.removedTargetIds||[];i=new Zc([],u,l,null)}else{if(!("filter"in e))return ze(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:u}=a,m=new NN(l,u),y=a.targetId;i=new lT(y,m)}}return i}function UN(s,e){let i;if(e instanceof ku)i={update:aE(s,e.key,e.value)};else if(e instanceof sp)i={delete:Im(s,e.key)};else if(e instanceof io)i={update:aE(s,e.key,e.data),updateMask:YN(e.fieldMask)};else{if(!(e instanceof SN))return ze(16599,{dt:e.type});i={verify:Im(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(u,m){const y=m.transform;if(y instanceof ff)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Nu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Ru)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof df)return{fieldPath:m.field.canonicalString(),increment:y.Ae};throw ze(20930,{transform:m.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:LN(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ze(27497)})(s,e.precondition)),i}function BN(s,e){return s&&s.length>0?(At(e!==void 0,14353),s.map((i=>(function(l,u){let m=l.updateTime?Ms(l.updateTime):Ms(u);return m.isEqual(Fe.min())&&(m=Ms(u)),new EN(m,l.transformResults||[])})(i,e)))):[]}function qN(s,e){return{documents:[dT(s,e.path)]}}function zN(s,e){const i={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=dT(s,l);const u=(function(g){if(g.length!==0)return pT(ms.create(g,"and"))})(e.filters);u&&(i.structuredQuery.where=u);const m=(function(g){if(g.length!==0)return g.map((w=>(function(I){return{field:nl(I.field),direction:FN(I.dir)}})(w)))})(e.orderBy);m&&(i.structuredQuery.orderBy=m);const y=xm(s,e.limit);return y!==null&&(i.structuredQuery.limit=y),e.startAt&&(i.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:i,parent:l}}function PN(s){let e=MN(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){At(a===1,65062);const w=i.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];i.where&&(u=(function(C){const I=mT(C);return I instanceof ms&&H0(I)?I.getFilters():[I]})(i.where));let m=[];i.orderBy&&(m=(function(C){return C.map((I=>(function(W){return new cf(il(W.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(I)))})(i.orderBy));let y=null;i.limit&&(y=(function(C){let I;return I=typeof C=="object"?C.value:C,Df(I)?null:I})(i.limit));let E=null;i.startAt&&(E=(function(C){const I=!!C.before,$=C.values||[];return new uf($,I)})(i.startAt));let g=null;return i.endAt&&(g=(function(C){const I=!C.before,$=C.values||[];return new uf($,I)})(i.endAt)),rN(e,l,m,u,y,"F",E,g)}function HN(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function mT(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=il(i.unaryFilter.field);return hn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=il(i.unaryFilter.field);return hn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=il(i.unaryFilter.field);return hn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=il(i.unaryFilter.field);return hn.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(s):s.fieldFilter!==void 0?(function(i){return hn.create(il(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return ms.create(i.compositeFilter.filters.map((a=>mT(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(i.compositeFilter.op))})(s):ze(30097,{filter:s})}function FN(s){return IN[s]}function GN(s){return ON[s]}function XN(s){return kN[s]}function nl(s){return{fieldPath:s.canonicalString()}}function il(s){return Vn.fromServerFormat(s.fieldPath)}function pT(s){return s instanceof hn?(function(i){if(i.op==="=="){if(Xv(i.value))return{unaryFilter:{field:nl(i.field),op:"IS_NAN"}};if(Gv(i.value))return{unaryFilter:{field:nl(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Xv(i.value))return{unaryFilter:{field:nl(i.field),op:"IS_NOT_NAN"}};if(Gv(i.value))return{unaryFilter:{field:nl(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(i.field),op:GN(i.op),value:i.value}}})(s):s instanceof ms?(function(i){const a=i.getFilters().map((l=>pT(l)));return a.length===1?a[0]:{compositeFilter:{op:XN(i.op),filters:a}}})(s):ze(54877,{filter:s})}function YN(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function gT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function _T(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class nr{constructor(e,i,a,l,u=Fe.min(),m=Fe.min(),y=Un.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=y,this.expectedCount=E}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QN{constructor(e){this.yt=e}}function $N(s){const e=PN({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Cm(e,e.limit,"L"):e}class KN{constructor(){this.Sn=new WN}addToCollectionParentIndex(e,i){return this.Sn.add(i),de.resolve()}getCollectionParents(e,i){return de.resolve(this.Sn.getEntries(i))}addFieldIndex(e,i){return de.resolve()}deleteFieldIndex(e,i){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,i){return de.resolve()}getDocumentsMatchingTarget(e,i){return de.resolve(null)}getIndexType(e,i){return de.resolve(0)}getFieldIndexes(e,i){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,i){return de.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,i){return de.resolve(ur.min())}updateCollectionGroup(e,i,a){return de.resolve()}updateIndexEntries(e,i){return de.resolve()}}class WN{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i]||new yn(Vt.comparator),u=!l.has(a);return this.index[i]=l.add(a),u}has(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(e){return(this.index[e]||new yn(Vt.comparator)).toArray()}}const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class Ei{static withCacheSize(e){return new Ei(e,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(yT,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);class ml{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ml(0)}static ar(){return new ml(-1)}}const oE="LruGarbageCollector",ZN=1048576;function lE([s,e],[i,a]){const l=ut(s,i);return l===0?ut(e,a):l}class JN{constructor(e){this.Pr=e,this.buffer=new yn(lE),this.Tr=0}Ir(){return++this.Tr}Er(e){const i=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();lE(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class eR{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Se(oE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){El(i)?Se(oE,"Ignoring IndexedDB error during garbage collection: ",i):await vl(i)}await this.Ar(3e5)}))}}class tR{constructor(e,i){this.Vr=e,this.params=i}calculateTargetCount(e,i){return this.Vr.dr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return de.resolve(xf.ce);const a=new JN(i);return this.Vr.forEachTarget(e,(l=>a.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>a.Er(l))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.Vr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.Vr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(rE)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.gr(e,i)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,i){let a,l,u,m,y,E,g;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,m=Date.now(),this.nthSequenceNumber(e,l)))).next((C=>(a=C,y=Date.now(),this.removeTargets(e,a,i)))).next((C=>(u=C,E=Date.now(),this.removeOrphanedDocuments(e,a)))).next((C=>(g=Date.now(),el()<=pt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-w}ms
	Determined least recently used ${l} in `+(y-m)+`ms
	Removed ${u} targets in `+(E-y)+`ms
	Removed ${C} documents in `+(g-E)+`ms
Total Duration: ${g-w}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:C}))))}}function nR(s,e){return new tR(s,e)}class iR{constructor(){this.changes=new no((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?de.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sR{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class aR{constructor(e,i,a,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(a!==null&&Eu(a.mutation,l,ds.empty(),zt.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,ct()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=ct()){const l=Qr();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,a).next((u=>{let m=mu();return u.forEach(((y,E)=>{m=m.insert(y,E.overlayedDocument)})),m}))))}getOverlayedDocuments(e,i){const a=Qr();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,ct())))}populateOverlays(e,i,a){const l=[];return a.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((m,y)=>{i.set(m,y)}))}))}computeViews(e,i,a,l){let u=Ea();const m=vu(),y=(function(){return vu()})();return i.forEach(((E,g)=>{const w=a.get(g.key);l.has(g.key)&&(w===void 0||w.mutation instanceof io)?u=u.insert(g.key,g):w!==void 0?(m.set(g.key,w.mutation.getFieldMask()),Eu(w.mutation,g,w.mutation.getFieldMask(),zt.now())):m.set(g.key,ds.empty())})),this.recalculateAndSaveOverlays(e,u).next((E=>(E.forEach(((g,w)=>m.set(g,w))),i.forEach(((g,w)=>y.set(g,new sR(w,m.get(g)??null)))),y)))}recalculateAndSaveOverlays(e,i){const a=vu();let l=new $t(((m,y)=>m-y)),u=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((m=>{for(const y of m)y.keys().forEach((E=>{const g=i.get(E);if(g===null)return;let w=a.get(E)||ds.empty();w=y.applyToLocalView(g,w),a.set(E,w);const C=(l.get(y.batchId)||ct()).add(E);l=l.insert(y.batchId,C)}))})).next((()=>{const m=[],y=l.getReverseIterator();for(;y.hasNext();){const E=y.getNext(),g=E.key,w=E.value,C=J0();w.forEach((I=>{if(!u.has(I)){const $=aT(i.get(I),a.get(I));$!==null&&C.set(I,$),u=u.add(I)}})),m.push(this.documentOverlayCache.saveOverlays(e,g,C))}return de.waitFor(m)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,l){return oN(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):Q0(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,l):this.getDocumentsMatchingCollectionQuery(e,i,a,l)}getNextDocuments(e,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,l).next((u=>{const m=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,l-u.size):de.resolve(Qr());let y=bu,E=u;return m.next((g=>de.forEach(g,((w,C)=>(y<C.largestBatchId&&(y=C.largestBatchId),u.get(w)?de.resolve():this.remoteDocumentCache.getEntry(e,w).next((I=>{E=E.insert(w,I)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,E,g,ct()))).next((w=>({batchId:y,changes:Z0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Le(i)).next((a=>{let l=mu();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,l){const u=i.collectionGroup;let m=mu();return this.indexManager.getCollectionParents(e,u).next((y=>de.forEach(y,(E=>{const g=(function(C,I){return new Ou(I,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(i,E.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,a,l).next((w=>{w.forEach(((C,I)=>{m=m.insert(C,I)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,i,a,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((m=>(u=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,u,l)))).next((m=>{u.forEach(((E,g)=>{const w=g.getKey();m.get(w)===null&&(m=m.insert(w,Qn.newInvalidDocument(w)))}));let y=mu();return m.forEach(((E,g)=>{const w=u.get(E);w!==void 0&&Eu(w.mutation,g,ds.empty(),zt.now()),kf(i,g)&&(y=y.insert(E,g))})),y}))}}class rR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,i){return de.resolve(this.Nr.get(i))}saveBundleMetadata(e,i){return this.Nr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ms(l.createTime)}})(i)),de.resolve()}getNamedQuery(e,i){return de.resolve(this.Br.get(i))}saveNamedQuery(e,i){return this.Br.set(i.name,(function(l){return{name:l.name,query:$N(l.bundledQuery),readTime:Ms(l.readTime)}})(i)),de.resolve()}}class oR{constructor(){this.overlays=new $t(Le.comparator),this.Lr=new Map}getOverlay(e,i){return de.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Qr();return de.forEach(i,(l=>this.getOverlay(e,l).next((u=>{u!==null&&a.set(l,u)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((l,u)=>{this.bt(e,i,u)})),de.resolve()}removeOverlaysForBatchId(e,i,a){const l=this.Lr.get(a);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),de.resolve()}getOverlaysForCollection(e,i,a){const l=Qr(),u=i.length+1,m=new Le(i.child("")),y=this.overlays.getIteratorFrom(m);for(;y.hasNext();){const E=y.getNext().value,g=E.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&E.largestBatchId>a&&l.set(E.getKey(),E)}return de.resolve(l)}getOverlaysForCollectionGroup(e,i,a,l){let u=new $t(((g,w)=>g-w));const m=this.overlays.getIterator();for(;m.hasNext();){const g=m.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>a){let w=u.get(g.largestBatchId);w===null&&(w=Qr(),u=u.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const y=Qr(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((g,w)=>y.set(g,w))),!(y.size()>=l)););return de.resolve(y)}bt(e,i,a){const l=this.overlays.get(a.key);if(l!==null){const m=this.Lr.get(l.largestBatchId).delete(a.key);this.Lr.set(l.largestBatchId,m)}this.overlays=this.overlays.insert(a.key,new AN(i,a));let u=this.Lr.get(i);u===void 0&&(u=ct(),this.Lr.set(i,u)),this.Lr.set(i,u.add(a.key))}}class lR{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,de.resolve()}}class lp{constructor(){this.kr=new yn(An.Kr),this.qr=new yn(An.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,i){const a=new An(e,i);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Wr(new An(e,i))}Qr(e,i){e.forEach((a=>this.removeReference(a,i)))}Gr(e){const i=new Le(new Vt([])),a=new An(i,e),l=new An(i,e+1),u=[];return this.qr.forEachInRange([a,l],(m=>{this.Wr(m),u.push(m.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const i=new Le(new Vt([])),a=new An(i,e),l=new An(i,e+1);let u=ct();return this.qr.forEachInRange([a,l],(m=>{u=u.add(m.key)})),u}containsKey(e){const i=new An(e,0),a=this.kr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class An{constructor(e,i){this.key=e,this.Hr=i}static Kr(e,i){return Le.comparator(e.key,i.key)||ut(e.Hr,i.Hr)}static Ur(e,i){return ut(e.Hr,i.Hr)||Le.comparator(e.key,i.key)}}class uR{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.Yn=1,this.Jr=new yn(An.Kr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new wN(u,i,a,l);this.mutationQueue.push(m);for(const y of l)this.Jr=this.Jr.add(new An(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return de.resolve(m)}lookupMutationBatch(e,i){return de.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,l=this.Xr(a),u=l<0?0:l;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Zm:this.Yn-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new An(i,0),l=new An(i,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,l],(m=>{const y=this.Zr(m.Hr);u.push(y)})),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new yn(ut);return i.forEach((l=>{const u=new An(l,0),m=new An(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,m],(y=>{a=a.add(y.Hr)}))})),de.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,l=a.length+1;let u=a;Le.isDocumentKey(u)||(u=u.child(""));const m=new An(new Le(u),0);let y=new yn(ut);return this.Jr.forEachWhile((E=>{const g=E.key.path;return!!a.isPrefixOf(g)&&(g.length===l&&(y=y.add(E.Hr)),!0)}),m),de.resolve(this.Yr(y))}Yr(e){const i=[];return e.forEach((a=>{const l=this.Zr(a);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){At(this.ei(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return de.forEach(i.mutations,(l=>{const u=new An(l.key,i.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,i){const a=new An(i,0),l=this.Jr.firstAfterOrEqual(a);return de.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ei(e,i){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const i=this.Xr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class cR{constructor(e){this.ti=e,this.docs=(function(){return new $t(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,l=this.docs.get(a),u=l?l.size:0,m=this.ti(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:m}),this.size+=m-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return de.resolve(a?a.document.mutableCopy():Qn.newInvalidDocument(i))}getEntries(e,i){let a=Ea();return i.forEach((l=>{const u=this.docs.get(l);a=a.insert(l,u?u.document.mutableCopy():Qn.newInvalidDocument(l))})),de.resolve(a)}getDocumentsMatchingQuery(e,i,a,l){let u=Ea();const m=i.path,y=new Le(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(y);for(;E.hasNext();){const{key:g,value:{document:w}}=E.getNext();if(!m.isPrefixOf(g.path))break;g.path.length>m.length+1||V2(M2(w),a)<=0||(l.has(w.key)||kf(i,w))&&(u=u.insert(w.key,w.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,i,a,l){ze(9500)}ni(e,i){return de.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new fR(this)}getSize(e){return de.resolve(this.size)}}class fR extends iR{constructor(e){super(),this.Mr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(a)})),de.waitFor(i)}getFromCache(e,i){return this.Mr.getEntry(e,i)}getAllFromCache(e,i){return this.Mr.getEntries(e,i)}}class dR{constructor(e){this.persistence=e,this.ri=new no((i=>tp(i)),np),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.ii=0,this.si=new lp,this.targetCount=0,this.oi=ml._r()}forEachTarget(e,i){return this.ri.forEach(((a,l)=>i(l))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.ii&&(this.ii=i),de.resolve()}lr(e){this.ri.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.oi=new ml(i),this.highestTargetId=i),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,i){return this.lr(i),this.targetCount+=1,de.resolve()}updateTargetData(e,i){return this.lr(i),de.resolve()}removeTargetData(e,i){return this.ri.delete(i.target),this.si.Gr(i.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,i,a){let l=0;const u=[];return this.ri.forEach(((m,y)=>{y.sequenceNumber<=i&&a.get(y.targetId)===null&&(this.ri.delete(m),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),de.waitFor(u).next((()=>l))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,i){const a=this.ri.get(i)||null;return de.resolve(a)}addMatchingKeys(e,i,a){return this.si.$r(i,a),de.resolve()}removeMatchingKeys(e,i,a){this.si.Qr(i,a);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((m=>{u.push(l.markPotentiallyOrphaned(e,m))})),de.waitFor(u)}removeMatchingKeysForTargetId(e,i){return this.si.Gr(i),de.resolve()}getMatchingKeysForTargetId(e,i){const a=this.si.jr(i);return de.resolve(a)}containsKey(e,i){return de.resolve(this.si.containsKey(i))}}class vT{constructor(e,i){this._i={},this.overlays={},this.ai=new xf(0),this.ui=!1,this.ui=!0,this.ci=new lR,this.referenceDelegate=e(this),this.li=new dR(this),this.indexManager=new KN,this.remoteDocumentCache=(function(l){return new cR(l)})((a=>this.referenceDelegate.hi(a))),this.serializer=new QN(i),this.Pi=new rR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new oR,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this._i[e.toKey()];return a||(a=new uR(i,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,i,a){Se("MemoryPersistence","Starting transaction:",e);const l=new hR(this.ai.next());return this.referenceDelegate.Ti(),a(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,i){return de.or(Object.values(this._i).map((a=>()=>a.containsKey(e,i))))}}class hR extends B2{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new lp,this.Ai=null}static Vi(e){return new up(e)}get di(){if(this.Ai)return this.Ai;throw ze(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.di.delete(a.toString()),de.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.di.add(a.toString()),de.resolve()}markPotentiallyOrphaned(e,i){return this.di.add(i.toString()),de.resolve()}removeTarget(e,i){this.Ri.Gr(i.targetId).forEach((l=>this.di.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,i)))}Ti(){this.Ai=new Set}Ii(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.di,(a=>{const l=Le.fromPath(a);return this.mi(e,l).next((u=>{u||i.removeEntry(l,Fe.min())}))})).next((()=>(this.Ai=null,i.apply(e))))}updateLimboDocument(e,i){return this.mi(e,i).next((a=>{a?this.di.delete(i.toString()):this.di.add(i.toString())}))}hi(e){return 0}mi(e,i){return de.or([()=>de.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ei(e,i)])}}class mf{constructor(e,i){this.persistence=e,this.fi=new no((a=>P2(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=nR(this,i)}static Vi(e,i){return new mf(e,i)}Ti(){}Ii(e){return de.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}dr(e){const i=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((l=>a+l))))}pr(e){let i=0;return this.mr(e,(a=>{i++})).next((()=>i))}mr(e,i){return de.forEach(this.fi,((a,l)=>this.wr(e,a,l).next((u=>u?de.resolve():i(l)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(m=>this.wr(e,m,i).next((y=>{y||(a++,u.removeEntry(m,Fe.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.fi.set(i,e.currentSequenceNumber),de.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.fi.set(a,e.currentSequenceNumber),de.resolve()}removeReference(e,i,a){return this.fi.set(a,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,i){return this.fi.set(i,e.currentSequenceNumber),de.resolve()}hi(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=$c(e.data.value)),i}wr(e,i,a){return de.or([()=>this.persistence.Ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.fi.get(i);return de.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cp{constructor(e,i,a,l){this.targetId=e,this.fromCache=i,this.Ts=a,this.Is=l}static Es(e,i){let a=ct(),l=ct();for(const u of i.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new cp(e,i.fromCache,a,l)}}class mR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return oA()?8:q2(aA())>0?6:4})()}initialize(e,i){this.fs=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,l){const u={result:null};return this.gs(e,i).next((m=>{u.result=m})).next((()=>{if(!u.result)return this.ps(e,i,l,a).next((m=>{u.result=m}))})).next((()=>{if(u.result)return;const m=new mR;return this.ys(e,i,m).next((y=>{if(u.result=y,this.As)return this.ws(e,i,m,y.size)}))})).next((()=>u.result))}ws(e,i,a,l){return a.documentReadCount<this.Vs?(el()<=pt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",tl(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(el()<=pt.DEBUG&&Se("QueryEngine","Query:",tl(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.ds*l?(el()<=pt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",tl(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(i))):de.resolve())}gs(e,i){if(Kv(i))return de.resolve(null);let a=js(i);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Cm(i,null,"F"),a=js(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const m=ct(...u);return this.fs.getDocuments(e,m).next((y=>this.indexManager.getMinOffset(e,a).next((E=>{const g=this.bs(i,y);return this.Ss(i,g,m,E.readTime)?this.gs(e,Cm(i,null,"F")):this.Ds(e,g,i,E)}))))})))))}ps(e,i,a,l){return Kv(i)||l.isEqual(Fe.min())?de.resolve(null):this.fs.getDocuments(e,a).next((u=>{const m=this.bs(i,u);return this.Ss(i,m,a,l)?de.resolve(null):(el()<=pt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),tl(i)),this.Ds(e,m,i,L2(l,bu)).next((y=>y)))}))}bs(e,i){let a=new yn(K0(e));return i.forEach(((l,u)=>{kf(e,u)&&(a=a.add(u))})),a}Ss(e,i,a,l){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const u=e.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,i,a){return el()<=pt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",tl(i)),this.fs.getDocumentsMatchingQuery(e,i,ur.min(),a)}Ds(e,i,a,l){return this.fs.getDocumentsMatchingQuery(e,a,l).next((u=>(i.forEach((m=>{u=u.insert(m.key,m)})),u)))}}const fp="LocalStore",gR=3e8;class _R{constructor(e,i,a,l){this.persistence=e,this.Cs=i,this.serializer=l,this.vs=new $t(ut),this.Fs=new no((u=>tp(u)),np),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.vs)))}}function yR(s,e,i,a){return new _R(s,e,i,a)}async function ET(s,e){const i=Qe(s);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((u=>(l=u,i.Os(e),i.mutationQueue.getAllMutationBatches(a)))).next((u=>{const m=[],y=[];let E=ct();for(const g of l){m.push(g.batchId);for(const w of g.mutations)E=E.add(w.key)}for(const g of u){y.push(g.batchId);for(const w of g.mutations)E=E.add(w.key)}return i.localDocuments.getDocuments(a,E).next((g=>({Ns:g,removedBatchIds:m,addedBatchIds:y})))}))}))}function vR(s,e){const i=Qe(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),u=i.xs.newChangeBuffer({trackRemovals:!0});return(function(y,E,g,w){const C=g.batch,I=C.keys();let $=de.resolve();return I.forEach((W=>{$=$.next((()=>w.getEntry(E,W))).next((ne=>{const G=g.docVersions.get(W);At(G!==null,48541),ne.version.compareTo(G)<0&&(C.applyToRemoteDocument(ne,g),ne.isValidDocument()&&(ne.setReadTime(g.commitVersion),w.addEntry(ne)))}))})),$.next((()=>y.mutationQueue.removeMutationBatch(E,C)))})(i,a,e,u).next((()=>u.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(y){let E=ct();for(let g=0;g<y.mutationResults.length;++g)y.mutationResults[g].transformResults.length>0&&(E=E.add(y.batch.mutations[g].key));return E})(e)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function TT(s){const e=Qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.li.getLastRemoteSnapshotVersion(i)))}function ER(s,e){const i=Qe(s),a=e.snapshotVersion;let l=i.vs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const m=i.xs.newChangeBuffer({trackRemovals:!0});l=i.vs;const y=[];e.targetChanges.forEach(((w,C)=>{const I=l.get(C);if(!I)return;y.push(i.li.removeMatchingKeys(u,w.removedDocuments,C).next((()=>i.li.addMatchingKeys(u,w.addedDocuments,C))));let $=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(C)!==null?$=$.withResumeToken(Un.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):w.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(w.resumeToken,a)),l=l.insert(C,$),(function(ne,G,z){return ne.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=gR?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(I,$,w)&&y.push(i.li.updateTargetData(u,$))}));let E=Ea(),g=ct();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&y.push(i.persistence.referenceDelegate.updateLimboDocument(u,w))})),y.push(TR(u,m,e.documentUpdates).next((w=>{E=w.Bs,g=w.Ls}))),!a.isEqual(Fe.min())){const w=i.li.getLastRemoteSnapshotVersion(u).next((C=>i.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));y.push(w)}return de.waitFor(y).next((()=>m.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,E,g))).next((()=>E))})).then((u=>(i.vs=l,u)))}function TR(s,e,i){let a=ct(),l=ct();return i.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let m=Ea();return i.forEach(((y,E)=>{const g=u.get(y);E.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(y)),E.isNoDocument()&&E.version.isEqual(Fe.min())?(e.removeEntry(y,E.readTime),m=m.insert(y,E)):!g.isValidDocument()||E.version.compareTo(g.version)>0||E.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(E),m=m.insert(y,E)):Se(fp,"Ignoring outdated watch update for ",y,". Current version:",g.version," Watch version:",E.version)})),{Bs:m,Ls:l}}))}function bR(s,e){const i=Qe(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Zm),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function SR(s,e){const i=Qe(s);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.li.getTargetData(a,e).next((u=>u?(l=u,de.resolve(l)):i.li.allocateTargetId(a).next((m=>(l=new nr(e,m,"TargetPurposeListen",a.currentSequenceNumber),i.li.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.vs.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.vs=i.vs.insert(a.targetId,a),i.Fs.set(e,a.targetId)),a}))}async function km(s,e,i){const a=Qe(s),l=a.vs.get(e),u=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",u,(m=>a.persistence.referenceDelegate.removeTarget(m,l)))}catch(m){if(!El(m))throw m;Se(fp,`Failed to update sequence numbers for target ${e}: ${m}`)}a.vs=a.vs.remove(e),a.Fs.delete(l.target)}function uE(s,e,i){const a=Qe(s);let l=Fe.min(),u=ct();return a.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,g,w){const C=Qe(E),I=C.Fs.get(w);return I!==void 0?de.resolve(C.vs.get(I)):C.li.getTargetData(g,w)})(a,m,js(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(m,y.targetId).next((E=>{u=E}))})).next((()=>a.Cs.getDocumentsMatchingQuery(m,e,i?l:Fe.min(),i?u:ct()))).next((y=>(wR(a,uN(e),y),{documents:y,ks:u})))))}function wR(s,e,i){let a=s.Ms.get(e)||Fe.min();i.forEach(((l,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class cE{constructor(){this.activeTargetIds=pN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AR{constructor(){this.vo=new cE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,i,a){this.Fo[e]=i}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new cE,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NR{Mo(e){}shutdown(){}}const fE="ConnectivityMonitor";class dE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Se(fE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Se(fE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fc=null;function jm(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}const im="RestConnection",RR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class CR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=i+"://"+e.host,this.Uo=`projects/${a}/databases/${l}`,this.$o=this.databaseId.database===of?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Wo(e,i,a,l,u){const m=jm(),y=this.Qo(e,i.toUriEncodedString());Se(im,`Sending RPC '${e}' ${m}:`,y,a);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,l,u);const{host:g}=new URL(y),w=Qm(g);return this.zo(e,y,E,a,w).then((C=>(Se(im,`Received RPC '${e}' ${m}: `,C),C)),(C=>{throw ul(im,`RPC '${e}' ${m} failed with error: `,C,"url: ",y,"request:",a),C}))}jo(e,i,a,l,u,m){return this.Wo(e,i,a,l,u)}Go(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>e[u]=l)),a&&a.headers.forEach(((l,u)=>e[u]=l))}Qo(e,i){const a=RR[e];let l=`${this.qo}/v1/${i}:${a}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class xR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Xn="WebChannelConnection",cu=(s,e,i)=>{s.listen(e,(a=>{try{i(a)}catch(l){setTimeout((()=>{throw l}),0)}}))};class sl extends CR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!sl.c_){const e=A0();cu(e,w0.STAT_EVENT,(i=>{i.stat===Tm.PROXY?Se(Xn,"STAT_EVENT: detected buffering proxy"):i.stat===Tm.NOPROXY&&Se(Xn,"STAT_EVENT: detected no buffering proxy")})),sl.c_=!0}}zo(e,i,a,l,u){const m=jm();return new Promise(((y,E)=>{const g=new b0;g.setWithCredentials(!0),g.listenOnce(S0.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Qc.NO_ERROR:const C=g.getResponseJson();Se(Xn,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(C)),y(C);break;case Qc.TIMEOUT:Se(Xn,`RPC '${e}' ${m} timed out`),E(new we(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const I=g.getStatus();if(Se(Xn,`RPC '${e}' ${m} failed with status:`,I,"response text:",g.getResponseText()),I>0){let $=g.getResponseJson();Array.isArray($)&&($=$[0]);const W=$?.error;if(W&&W.status&&W.message){const ne=(function(z){const le=z.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(le)>=0?le:fe.UNKNOWN})(W.status);E(new we(ne,W.message))}else E(new we(fe.UNKNOWN,"Server responded with status "+g.getStatus()))}else E(new we(fe.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:m,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Se(Xn,`RPC '${e}' ${m} completed.`)}}));const w=JSON.stringify(l);Se(Xn,`RPC '${e}' ${m} sending request:`,l),g.send(i,"POST",w,a,15)}))}T_(e,i,a){const l=jm(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,i,a),y.encodeInitMessageHeaders=!0;const g=u.join("");Se(Xn,`Creating RPC '${e}' stream ${l}: ${g}`,y);const w=m.createWebChannel(g,y);this.I_(w);let C=!1,I=!1;const $=new xR({Ho:W=>{I?Se(Xn,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(C||(Se(Xn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),C=!0),Se(Xn,`RPC '${e}' stream ${l} sending:`,W),w.send(W))},Jo:()=>w.close()});return cu(w,hu.EventType.OPEN,(()=>{I||(Se(Xn,`RPC '${e}' stream ${l} transport opened.`),$.i_())})),cu(w,hu.EventType.CLOSE,(()=>{I||(I=!0,Se(Xn,`RPC '${e}' stream ${l} transport closed`),$.o_(),this.E_(w))})),cu(w,hu.EventType.ERROR,(W=>{I||(I=!0,ul(Xn,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),$.o_(new we(fe.UNAVAILABLE,"The operation could not be completed")))})),cu(w,hu.EventType.MESSAGE,(W=>{if(!I){const ne=W.data[0];At(!!ne,16349);const G=ne,z=G?.error||G[0]?.error;if(z){Se(Xn,`RPC '${e}' stream ${l} received error:`,z);const le=z.status;let me=(function(xe){const O=dn[xe];if(O!==void 0)return oT(O)})(le),he=z.message;me===void 0&&(me=fe.INTERNAL,he="Unknown error status: "+le+" with message "+z.message),I=!0,$.o_(new we(me,he)),w.close()}else Se(Xn,`RPC '${e}' stream ${l} received:`,ne),$.__(ne)}})),sl.u_(),setTimeout((()=>{$.s_()}),0),$}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((i=>i===e))}Go(e,i,a){super.Go(e,i,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return N0()}}function DR(s){return new sl(s)}function sm(){return typeof document<"u"?document:null}function Vf(s){return new jN(s,!0)}sl.c_=!1;class bT{constructor(e,i,a=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=i,this.R_=a,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const i=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&Se("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const hE="PersistentStream";class ST{constructor(e,i,a,l,u,m,y,E){this.Ci=e,this.b_=a,this.S_=l,this.connection=u,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===fe.RESOURCE_EXHAUSTED?(va(i.toString()),va("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(i)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{e((()=>{const l=new we(fe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,i){const a=this.Q_(this.D_);this.stream=this.j_(e,i),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(hE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return i=>{this.Ci.enqueueAndForget((()=>this.D_===e?i():(Se(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IR extends ST{constructor(e,i,a,l,u,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,m),this.serializer=u}j_(e,i){return this.connection.T_("Listen",e,i)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=VN(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Fe.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?Fe.min():m.readTime?Ms(m.readTime):Fe.min()})(e);return this.listener.J_(i,a)}Z_(e){const i={};i.database=Om(this.serializer),i.addTarget=(function(u,m){let y;const E=m.target;if(y=Nm(E)?{documents:qN(u,E)}:{query:zN(u,E).ft},y.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){y.resumeToken=cT(u,m.resumeToken);const g=xm(u,m.expectedCount);g!==null&&(y.expectedCount=g)}else if(m.snapshotVersion.compareTo(Fe.min())>0){y.readTime=hf(u,m.snapshotVersion.toTimestamp());const g=xm(u,m.expectedCount);g!==null&&(y.expectedCount=g)}return y})(this.serializer,e);const a=HN(this.serializer,e);a&&(i.labels=a),this.K_(i)}X_(e){const i={};i.database=Om(this.serializer),i.removeTarget=e,this.K_(i)}}class OR extends ST{constructor(e,i,a,l,u,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,m),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}H_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=BN(e.writeResults,e.commitTime),a=Ms(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=Om(this.serializer),this.K_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>UN(this.serializer,a)))};this.K_(i)}}class kR{}class jR extends kR{constructor(e,i,a,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new we(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Wo(e,Dm(i,a),l,u,m))).catch((u=>{throw u.name==="FirebaseError"?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(fe.UNKNOWN,u.toString())}))}jo(e,i,a,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,y])=>this.connection.jo(e,Dm(i,a),l,m,y,u))).catch((m=>{throw m.name==="FirebaseError"?(m.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new we(fe.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function LR(s,e,i,a){return new jR(s,e,i,a)}class MR{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(va(i),this.aa=!1):Se("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Wr="RemoteStore";class VR{constructor(e,i,a,l,u){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((m=>{a.enqueueAndForget((async()=>{so(this)&&(Se(Wr,"Restarting streams for network reachability change."),await(async function(E){const g=Qe(E);g.Ea.add(4),await Lu(g),g.Va.set("Unknown"),g.Ea.delete(4),await Uf(g)})(this))}))})),this.Va=new MR(a,l)}}async function Uf(s){if(so(s))for(const e of s.Ra)await e(!0)}async function Lu(s){for(const e of s.Ra)await e(!1)}function wT(s,e){const i=Qe(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),pp(i)?mp(i):Tl(i).O_()&&hp(i,e))}function dp(s,e){const i=Qe(s),a=Tl(i);i.Ia.delete(e),a.O_()&&AT(i,e),i.Ia.size===0&&(a.O_()?a.L_():so(i)&&i.Va.set("Unknown"))}function hp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Tl(s).Z_(e)}function AT(s,e){s.da.$e(e),Tl(s).X_(e)}function mp(s){s.da=new DN({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Tl(s).start(),s.Va.ua()}function pp(s){return so(s)&&!Tl(s).x_()&&s.Ia.size>0}function so(s){return Qe(s).Ea.size===0}function NT(s){s.da=void 0}async function UR(s){s.Va.set("Online")}async function BR(s){s.Ia.forEach(((e,i)=>{hp(s,e)}))}async function qR(s,e){NT(s),pp(s)?(s.Va.ha(e),mp(s)):s.Va.set("Unknown")}async function zR(s,e,i){if(s.Va.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await(async function(l,u){const m=u.cause;for(const y of u.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,m),l.Ia.delete(y),l.da.removeTarget(y))})(s,e)}catch(a){Se(Wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await pf(s,a)}else if(e instanceof Zc?s.da.Xe(e):e instanceof lT?s.da.st(e):s.da.tt(e),!i.isEqual(Fe.min()))try{const a=await TT(s.localStore);i.compareTo(a)>=0&&await(function(u,m){const y=u.da.Tt(m);return y.targetChanges.forEach(((E,g)=>{if(E.resumeToken.approximateByteSize()>0){const w=u.Ia.get(g);w&&u.Ia.set(g,w.withResumeToken(E.resumeToken,m))}})),y.targetMismatches.forEach(((E,g)=>{const w=u.Ia.get(E);if(!w)return;u.Ia.set(E,w.withResumeToken(Un.EMPTY_BYTE_STRING,w.snapshotVersion)),AT(u,E);const C=new nr(w.target,E,g,w.sequenceNumber);hp(u,C)})),u.remoteSyncer.applyRemoteEvent(y)})(s,i)}catch(a){Se(Wr,"Failed to raise snapshot:",a),await pf(s,a)}}async function pf(s,e,i){if(!El(e))throw e;s.Ea.add(1),await Lu(s),s.Va.set("Offline"),i||(i=()=>TT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Se(Wr,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Uf(s)}))}function RT(s,e){return e().catch((i=>pf(s,i,e)))}async function Bf(s){const e=Qe(s),i=hr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;PR(e);)try{const l=await bR(e.localStore,a);if(l===null){e.Ta.length===0&&i.L_();break}a=l.batchId,HR(e,l)}catch(l){await pf(e,l)}CT(e)&&xT(e)}function PR(s){return so(s)&&s.Ta.length<10}function HR(s,e){s.Ta.push(e);const i=hr(s);i.O_()&&i.Y_&&i.ea(e.mutations)}function CT(s){return so(s)&&!hr(s).x_()&&s.Ta.length>0}function xT(s){hr(s).start()}async function FR(s){hr(s).ra()}async function GR(s){const e=hr(s);for(const i of s.Ta)e.ea(i.mutations)}async function XR(s,e,i){const a=s.Ta.shift(),l=ap.from(a,e,i);await RT(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Bf(s)}async function YR(s,e){e&&hr(s).Y_&&await(async function(a,l){if((function(m){return RN(m)&&m!==fe.ABORTED})(l.code)){const u=a.Ta.shift();hr(a).B_(),await RT(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Bf(a)}})(s,e),CT(s)&&xT(s)}async function mE(s,e){const i=Qe(s);i.asyncQueue.verifyOperationInProgress(),Se(Wr,"RemoteStore received new credentials");const a=so(i);i.Ea.add(3),await Lu(i),a&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Uf(i)}async function QR(s,e){const i=Qe(s);e?(i.Ea.delete(2),await Uf(i)):e||(i.Ea.add(2),await Lu(i),i.Va.set("Unknown"))}function Tl(s){return s.ma||(s.ma=(function(i,a,l){const u=Qe(i);return u.sa(),new IR(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:UR.bind(null,s),Yo:BR.bind(null,s),t_:qR.bind(null,s),J_:zR.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),pp(s)?mp(s):s.Va.set("Unknown")):(await s.ma.stop(),NT(s))}))),s.ma}function hr(s){return s.fa||(s.fa=(function(i,a,l){const u=Qe(i);return u.sa(),new OR(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:FR.bind(null,s),t_:YR.bind(null,s),ta:GR.bind(null,s),na:XR.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Bf(s)):(await s.fa.stop(),s.Ta.length>0&&(Se(Wr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class gp{constructor(e,i,a,l,u){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=u,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,l,u){const m=Date.now()+a,y=new gp(e,i,m,l,u);return y.start(a),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(s,e){if(va("AsyncQueue",`${e}: ${s}`),El(s))return new we(fe.UNAVAILABLE,`${e}: ${s}`);throw s}class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Le.comparator(i.key,a.key):(i,a)=>Le.comparator(i.key,a.key),this.keyedMap=mu(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=a.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new al;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}class pE{constructor(){this.ga=new $t(Le.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):ze(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class pl{constructor(e,i,a,l,u,m,y,E,g){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=u,this.fromCache=m,this.syncStateChanged=y,this.excludesMetadataChanges=E,this.hasCachedResults=g}static fromInitialDocuments(e,i,a,l,u){const m=[];return i.forEach((y=>{m.push({type:0,doc:y})})),new pl(e,i,al.emptySet(i),m,a,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}class $R{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class KR{constructor(){this.queries=gE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=Qe(i),u=l.queries;l.queries=gE(),u.forEach(((m,y)=>{for(const E of y.ba)E.onError(a)}))})(this,new we(fe.ABORTED,"Firestore shutting down"))}}function gE(){return new no((s=>$0(s)),Of)}async function WR(s,e){const i=Qe(s);let a=3;const l=e.query;let u=i.queries.get(l);u?!u.Sa()&&e.Da()&&(a=2):(u=new $R,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(m){const y=_p(m,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(y)}i.queries.set(l,u),u.ba.push(e),e.va(i.onlineState),u.wa&&e.Fa(u.wa)&&yp(i)}async function ZR(s,e){const i=Qe(s),a=e.query;let l=3;const u=i.queries.get(a);if(u){const m=u.ba.indexOf(e);m>=0&&(u.ba.splice(m,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function JR(s,e){const i=Qe(s);let a=!1;for(const l of e){const u=l.query,m=i.queries.get(u);if(m){for(const y of m.ba)y.Fa(l)&&(a=!0);m.wa=l}}a&&yp(i)}function eC(s,e,i){const a=Qe(s),l=a.queries.get(e);if(l)for(const u of l.ba)u.onError(i);a.queries.delete(e)}function yp(s){s.Ca.forEach((e=>{e.next()}))}var Lm,_E;(_E=Lm||(Lm={})).Ma="default",_E.Cache="cache";class tC{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new pl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}class DT{constructor(e){this.key=e}}class IT{constructor(e){this.key=e}}class nC{constructor(e,i){this.query=e,this.Za=i,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ct(),this.mutatedKeys=ct(),this.eu=K0(e),this.tu=new al(this.eu)}get nu(){return this.Za}ru(e,i){const a=i?i.iu:new pE,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,m=l,y=!1;const E=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,C)=>{const I=l.get(w),$=kf(this.query,C)?C:null,W=!!I&&this.mutatedKeys.has(I.key),ne=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let G=!1;I&&$?I.data.isEqual($.data)?W!==ne&&(a.track({type:3,doc:$}),G=!0):this.su(I,$)||(a.track({type:2,doc:$}),G=!0,(E&&this.eu($,E)>0||g&&this.eu($,g)<0)&&(y=!0)):!I&&$?(a.track({type:0,doc:$}),G=!0):I&&!$&&(a.track({type:1,doc:I}),G=!0,(E||g)&&(y=!0)),G&&($?(m=m.add($),u=ne?u.add(w):u.delete(w)):(m=m.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const w=this.query.limitType==="F"?m.last():m.first();m=m.delete(w.key),u=u.delete(w.key),a.track({type:1,doc:w})}return{tu:m,iu:a,Ss:y,mutatedKeys:u}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((w,C)=>(function($,W){const ne=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Vt:G})}};return ne($)-ne(W)})(w.type,C.type)||this.eu(w.doc,C.doc))),this.ou(a),l=l??!1;const y=i&&!l?this._u():[],E=this.Ya.size===0&&this.current&&!l?1:0,g=E!==this.Xa;return this.Xa=E,m.length!==0||g?{snapshot:new pl(this.query,e.tu,u,m,e.mutatedKeys,E===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Za=this.Za.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Za=this.Za.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ct(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const i=[];return e.forEach((a=>{this.Ya.has(a)||i.push(new IT(a))})),this.Ya.forEach((a=>{e.has(a)||i.push(new DT(a))})),i}cu(e){this.Za=e.ks,this.Ya=ct();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const vp="SyncEngine";class iC{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class sC{constructor(e){this.key=e,this.hu=!1}}class aC{constructor(e,i,a,l,u,m){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new no((y=>$0(y)),Of),this.Iu=new Map,this.Eu=new Set,this.Ru=new $t(Le.comparator),this.Au=new Map,this.Vu=new lp,this.du={},this.mu=new Map,this.fu=ml.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rC(s,e,i=!0){const a=VT(s);let l;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await OT(a,e,i,!0),l}async function oC(s,e){const i=VT(s);await OT(i,e,!0,!1)}async function OT(s,e,i,a){const l=await SR(s.localStore,js(e)),u=l.targetId,m=s.sharedClientState.addLocalQueryTarget(u,i);let y;return a&&(y=await lC(s,e,u,m==="current",l.resumeToken)),s.isPrimaryClient&&i&&wT(s.remoteStore,l),y}async function lC(s,e,i,a,l){s.pu=(C,I,$)=>(async function(ne,G,z,le){let me=G.view.ru(z);me.Ss&&(me=await uE(ne.localStore,G.query,!1).then((({documents:O})=>G.view.ru(O,me))));const he=le&&le.targetChanges.get(G.targetId),Ae=le&&le.targetMismatches.get(G.targetId)!=null,xe=G.view.applyChanges(me,ne.isPrimaryClient,he,Ae);return vE(ne,G.targetId,xe.au),xe.snapshot})(s,C,I,$);const u=await uE(s.localStore,e,!0),m=new nC(e,u.ks),y=m.ru(u.documents),E=ju.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",l),g=m.applyChanges(y,s.isPrimaryClient,E);vE(s,i,g.au);const w=new iC(e,i,m);return s.Tu.set(e,w),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),g.snapshot}async function uC(s,e,i){const a=Qe(s),l=a.Tu.get(e),u=a.Iu.get(l.targetId);if(u.length>1)return a.Iu.set(l.targetId,u.filter((m=>!Of(m,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await km(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&dp(a.remoteStore,l.targetId),Mm(a,l.targetId)})).catch(vl)):(Mm(a,l.targetId),await km(a.localStore,l.targetId,!0))}async function cC(s,e){const i=Qe(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),dp(i.remoteStore,a.targetId))}async function fC(s,e,i){const a=yC(s);try{const l=await(function(m,y){const E=Qe(m),g=zt.now(),w=y.reduce((($,W)=>$.add(W.key)),ct());let C,I;return E.persistence.runTransaction("Locally write mutations","readwrite",($=>{let W=Ea(),ne=ct();return E.xs.getEntries($,w).next((G=>{W=G,W.forEach(((z,le)=>{le.isValidDocument()||(ne=ne.add(z))}))})).next((()=>E.localDocuments.getOverlayedDocuments($,W))).next((G=>{C=G;const z=[];for(const le of y){const me=bN(le,C.get(le.key).overlayedDocument);me!=null&&z.push(new io(le.key,me,q0(me.value.mapValue),Ls.exists(!0)))}return E.mutationQueue.addMutationBatch($,g,z,y)})).next((G=>{I=G;const z=G.applyToLocalDocumentSet(C,ne);return E.documentOverlayCache.saveOverlays($,G.batchId,z)}))})).then((()=>({batchId:I.batchId,changes:Z0(C)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(m,y,E){let g=m.du[m.currentUser.toKey()];g||(g=new $t(ut)),g=g.insert(y,E),m.du[m.currentUser.toKey()]=g})(a,l.batchId,i),await Mu(a,l.changes),await Bf(a.remoteStore)}catch(l){const u=_p(l,"Failed to persist write");i.reject(u)}}async function kT(s,e){const i=Qe(s);try{const a=await ER(i.localStore,e);e.targetChanges.forEach(((l,u)=>{const m=i.Au.get(u);m&&(At(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?m.hu=!0:l.modifiedDocuments.size>0?At(m.hu,14607):l.removedDocuments.size>0&&(At(m.hu,42227),m.hu=!1))})),await Mu(i,a,e)}catch(a){await vl(a)}}function yE(s,e,i){const a=Qe(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((u,m)=>{const y=m.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(m,y){const E=Qe(m);E.onlineState=y;let g=!1;E.queries.forEach(((w,C)=>{for(const I of C.ba)I.va(y)&&(g=!0)})),g&&yp(E)})(a.eventManager,e),l.length&&a.Pu.J_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function dC(s,e,i){const a=Qe(s);a.sharedClientState.updateQueryState(e,"rejected",i);const l=a.Au.get(e),u=l&&l.key;if(u){let m=new $t(Le.comparator);m=m.insert(u,Qn.newNoDocument(u,Fe.min()));const y=ct().add(u),E=new Mf(Fe.min(),new Map,new $t(ut),m,y);await kT(a,E),a.Ru=a.Ru.remove(u),a.Au.delete(e),Ep(a)}else await km(a.localStore,e,!1).then((()=>Mm(a,e,i))).catch(vl)}async function hC(s,e){const i=Qe(s),a=e.batch.batchId;try{const l=await vR(i.localStore,e);LT(i,a,null),jT(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Mu(i,l)}catch(l){await vl(l)}}async function mC(s,e,i){const a=Qe(s);try{const l=await(function(m,y){const E=Qe(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let w;return E.mutationQueue.lookupMutationBatch(g,y).next((C=>(At(C!==null,37113),w=C.keys(),E.mutationQueue.removeMutationBatch(g,C)))).next((()=>E.mutationQueue.performConsistencyCheck(g))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(g,w,y))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w))).next((()=>E.localDocuments.getDocuments(g,w)))}))})(a.localStore,e);LT(a,e,i),jT(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await Mu(a,l)}catch(l){await vl(l)}}function jT(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function LT(s,e,i){const a=Qe(s);let l=a.du[a.currentUser.toKey()];if(l){const u=l.get(e);u&&(i?u.reject(i):u.resolve(),l=l.remove(e)),a.du[a.currentUser.toKey()]=l}}function Mm(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),i&&s.Pu.yu(a,i);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||MT(s,a)}))}function MT(s,e){s.Eu.delete(e.path.canonicalString());const i=s.Ru.get(e);i!==null&&(dp(s.remoteStore,i),s.Ru=s.Ru.remove(e),s.Au.delete(i),Ep(s))}function vE(s,e,i){for(const a of i)a instanceof DT?(s.Vu.addReference(a.key,e),pC(s,a)):a instanceof IT?(Se(vp,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||MT(s,a.key)):ze(19791,{wu:a})}function pC(s,e){const i=e.key,a=i.path.canonicalString();s.Ru.get(i)||s.Eu.has(a)||(Se(vp,"New document in limbo: "+i),s.Eu.add(a),Ep(s))}function Ep(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new Le(Vt.fromString(e)),a=s.fu.next();s.Au.set(a,new sC(i)),s.Ru=s.Ru.insert(i,a),wT(s.remoteStore,new nr(js(Y0(i.path)),a,"TargetPurposeLimboResolution",xf.ce))}}async function Mu(s,e,i){const a=Qe(s),l=[],u=[],m=[];a.Tu.isEmpty()||(a.Tu.forEach(((y,E)=>{m.push(a.pu(E,e,i).then((g=>{if((g||i)&&a.isPrimaryClient){const w=g?!g.fromCache:i?.targetChanges.get(E.targetId)?.current;a.sharedClientState.updateQueryState(E.targetId,w?"current":"not-current")}if(g){l.push(g);const w=cp.Es(E.targetId,g);u.push(w)}})))})),await Promise.all(m),a.Pu.J_(l),await(async function(E,g){const w=Qe(E);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>de.forEach(g,(I=>de.forEach(I.Ts,($=>w.persistence.referenceDelegate.addReference(C,I.targetId,$))).next((()=>de.forEach(I.Is,($=>w.persistence.referenceDelegate.removeReference(C,I.targetId,$)))))))))}catch(C){if(!El(C))throw C;Se(fp,"Failed to update sequence numbers: "+C)}for(const C of g){const I=C.targetId;if(!C.fromCache){const $=w.vs.get(I),W=$.snapshotVersion,ne=$.withLastLimboFreeSnapshotVersion(W);w.vs=w.vs.insert(I,ne)}}})(a.localStore,u))}async function gC(s,e){const i=Qe(s);if(!i.currentUser.isEqual(e)){Se(vp,"User change. New user:",e.toKey());const a=await ET(i.localStore,e);i.currentUser=e,(function(u,m){u.mu.forEach((y=>{y.forEach((E=>{E.reject(new we(fe.CANCELLED,m))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Mu(i,a.Ns)}}function _C(s,e){const i=Qe(s),a=i.Au.get(e);if(a&&a.hu)return ct().add(a.key);{let l=ct();const u=i.Iu.get(e);if(!u)return l;for(const m of u){const y=i.Tu.get(m);l=l.unionWith(y.view.nu)}return l}}function VT(s){const e=Qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_C.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dC.bind(null,e),e.Pu.J_=JR.bind(null,e.eventManager),e.Pu.yu=eC.bind(null,e.eventManager),e}function yC(s){const e=Qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mC.bind(null,e),e}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return yR(this.persistence,new pR,e.initialUser,this.serializer)}Cu(e){return new vT(up.Vi,this.serializer)}Du(e){return new AR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class vC extends gf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){At(this.persistence.referenceDelegate instanceof mf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new eR(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?Ei.withCacheSize(this.cacheSizeBytes):Ei.DEFAULT;return new vT((a=>mf.Vi(a,i)),this.serializer)}}class Vm{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>yE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=gC.bind(null,this.syncEngine),await QR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KR})()}createDatastore(e){const i=Vf(e.databaseInfo.databaseId),a=DR(e.databaseInfo);return LR(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,l,u,m,y){return new VR(a,l,u,m,y)})(this.localStore,this.datastore,e.asyncQueue,(i=>yE(this.syncEngine,i,0)),(function(){return dE.v()?new dE:new NR})())}createSyncEngine(e,i){return(function(l,u,m,y,E,g,w){const C=new aC(l,u,m,y,E,g);return w&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Qe(i);Se(Wr,"RemoteStore shutting down."),a.Ea.add(5),await Lu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vm.provider={build:()=>new Vm};class EC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):va("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}const mr="FirestoreClient";class TC{constructor(e,i,a,l,u){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this._databaseInfo=l,this.user=Yn.UNAUTHENTICATED,this.clientId=Wm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async m=>{Se(mr,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(a,(m=>(Se(mr,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=_p(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function am(s,e){s.asyncQueue.verifyOperationInProgress(),Se(mr,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener((async l=>{a.isEqual(l)||(await ET(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function EE(s,e){s.asyncQueue.verifyOperationInProgress();const i=await bC(s);Se(mr,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((a=>mE(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,l)=>mE(e.remoteStore,l))),s._onlineComponents=e}async function bC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Se(mr,"Using user provided OfflineComponentProvider");try{await am(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===fe.FAILED_PRECONDITION||l.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;ul("Error using user provided cache. Falling back to memory cache: "+i),await am(s,new gf)}}else Se(mr,"Using default OfflineComponentProvider"),await am(s,new vC(void 0));return s._offlineComponents}async function UT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Se(mr,"Using user provided OnlineComponentProvider"),await EE(s,s._uninitializedComponentsProvider._online)):(Se(mr,"Using default OnlineComponentProvider"),await EE(s,new Vm))),s._onlineComponents}function SC(s){return UT(s).then((e=>e.syncEngine))}async function wC(s){const e=await UT(s),i=e.eventManager;return i.onListen=rC.bind(null,e.syncEngine),i.onUnlisten=uC.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=oC.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=cC.bind(null,e.syncEngine),i}function AC(s,e,i={}){const a=new rr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,m,y,E,g){const w=new EC({next:I=>{w.Nu(),m.enqueueAndForget((()=>ZR(u,C))),I.fromCache&&E.source==="server"?g.reject(new we(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),C=new tC(y,w,{includeMetadataChanges:!0,Ka:!0});return WR(u,C)})(await wC(s),s.asyncQueue,e,i,a))),a.promise}function NC(s,e){const i=new rr;return s.asyncQueue.enqueueAndForget((async()=>fC(await SC(s),e,i))),i.promise}function BT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const RC="ComponentProvider",TE=new Map;function CC(s,e,i,a,l){return new G2(s,e,i,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,BT(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,a)}const qT="firestore.googleapis.com",bE=!0;class SE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=bE}else this.host=e.host,this.ssl=e.ssl??bE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZN)throw new we(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,i,a,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new w2;switch(a.type){case"firstParty":return new C2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new we(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=TE.get(i);a&&(Se(RC,"Removing Datastore"),TE.delete(i),a.terminate())})(this),Promise.resolve()}}function xC(s,e,i,a={}){s=fl(s,qf);const l=Qm(e),u=s._getSettings(),m={...u,emulatorOptions:s._getEmulatorOptions()},y=`${e}:${i}`;l&&(eA(`https://${y}`),sA("Firestore",!0)),u.host!==qT&&u.host!==y&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:y,ssl:l,emulatorOptions:a};if(!sf(E,m)&&(s._setSettings(E),a.mockUserToken)){let g,w;if(typeof a.mockUserToken=="string")g=a.mockUserToken,w=Yn.MOCK_USER;else{g=tA(a.mockUserToken,s._app?.options.projectId);const C=a.mockUserToken.sub||a.mockUserToken.user_id;if(!C)throw new we(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Yn(C)}s._authCredentials=new A2(new C0(g,w))}}class bl{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new bl(this.firestore,e,this._query)}}class _n{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}toJSON(){return{type:_n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(Iu(i,_n._jsonSchema))return new _n(e,a||null,new Le(Vt.fromString(i.referencePath)))}}_n._jsonSchemaVersion="firestore/documentReference/1.0",_n._jsonSchema={type:mn("string",_n._jsonSchemaVersion),referencePath:mn("string")};class or extends bl{constructor(e,i,a){super(e,i,Y0(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new Le(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function DC(s,e,...i){if(s=ga(s),x0("collection","path",e),s instanceof qf){const a=Vt.fromString(e,...i);return Mv(a),new or(s,null,a)}{if(!(s instanceof _n||s instanceof or))throw new we(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Vt.fromString(e,...i));return Mv(a),new or(s.firestore,null,a)}}function ao(s,e,...i){if(s=ga(s),arguments.length===1&&(e=Wm.newId()),x0("doc","path",e),s instanceof qf){const a=Vt.fromString(e,...i);return Lv(a),new _n(s,null,new Le(a))}{if(!(s instanceof _n||s instanceof or))throw new we(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Vt.fromString(e,...i));return Lv(a),new _n(s.firestore,s instanceof or?s.converter:null,new Le(a))}}const wE="AsyncQueue";class AE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const a=sm();a&&Se(wE,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=sm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=sm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new rr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!El(e))throw e;Se(wE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,va("INTERNAL UNHANDLED ERROR: ",NE(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=gp.createAndSchedule(this,e,i,a,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&ze(47125,{Pc:NE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function NE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class zf extends qf{constructor(e,i,a,l){super(e,i,a,l),this.type="firestore",this._queue=new AE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AE(e),this._firestoreClient=void 0,await e}}}function IC(s,e){const i=typeof s=="object"?s:y0(),a=typeof s=="string"?s:of,l=Rf(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const u=Zw("firestore");u&&xC(l,...u)}return l}function zT(s){if(s._terminated)throw new we(fe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||OC(s),s._firestoreClient}function OC(s){const e=s._freezeSettings(),i=CC(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new TC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(Un.fromBase64String(e))}catch(i){throw new we(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new ts(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:mn("string",ts._jsonSchemaVersion),bytes:mn("string")};class PT{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new we(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class HT{constructor(e){this._methodName=e}}class Vs{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new we(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new we(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vs._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,Vs._jsonSchema))return new Vs(e.latitude,e.longitude)}}Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:mn("string",Vs._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};class hs{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new hs(e.vectorValues);throw new we(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hs._jsonSchemaVersion="firestore/vectorValue/1.0",hs._jsonSchema={type:mn("string",hs._jsonSchemaVersion),vectorValues:mn("object")};const kC=/^__.*__$/;class jC{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,i,this.fieldTransforms):new ku(e,this.data,i,this.fieldTransforms)}}function FT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{dataSource:s})}}class Tp{constructor(e,i,a,l,u,m){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const i=this.path?.child(e),a=this.contextWith({path:i,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const i=this.path?.child(e),a=this.contextWith({path:i,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return _f(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(FT(this.dataSource)&&kC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class LC{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Vf(e)}createContext(e,i,a,l=!1){return new Tp({dataSource:e,methodName:i,targetDoc:a,path:Vn.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GT(s){const e=s._freezeSettings(),i=Vf(s._databaseId);return new LC(s._databaseId,!!e.ignoreUndefinedProperties,i)}function MC(s,e,i,a,l,u={}){const m=s.createContext(u.merge||u.mergeFields?2:0,e,i,l);QT("Data must be an object, but it was:",m,a);const y=XT(a,m);let E,g;if(u.merge)E=new ds(m.fieldMask),g=m.fieldTransforms;else if(u.mergeFields){const w=[];for(const C of u.mergeFields){const I=Pf(e,C,i);if(!m.contains(I))throw new we(fe.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);qC(w,I)||w.push(I)}E=new ds(w),g=m.fieldTransforms.filter((C=>E.covers(C.field)))}else E=null,g=m.fieldTransforms;return new jC(new es(y),E,g)}function VC(s,e,i,a=!1){return bp(i,s.createContext(a?4:3,e))}function bp(s,e){if(YT(s=ga(s)))return QT("Unsupported field value:",e,s),XT(s,e);if(s instanceof HT)return(function(a,l){if(!FT(l.dataSource))throw l.createError(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,l){const u=[];let m=0;for(const y of a){let E=bp(y,l.childContextForArray(m));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),m++}return{arrayValue:{values:u}}})(s,e)}return(function(a,l){if((a=ga(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return gN(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=zt.fromDate(a);return{timestampValue:hf(l.serializer,u)}}if(a instanceof zt){const u=new zt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:hf(l.serializer,u)}}if(a instanceof Vs)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ts)return{bytesValue:cT(l.serializer,a._byteString)};if(a instanceof _n){const u=l.databaseId,m=a.firestore._databaseId;if(!m.isEqual(u))throw l.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:op(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof hs)return(function(m,y){const E=m instanceof hs?m.toArray():m;return{mapValue:{fields:{[U0]:{stringValue:B0},[lf]:{arrayValue:{values:E.map((w=>{if(typeof w!="number")throw y.createError("VectorValues must only contain numeric values.");return ip(y.serializer,w)}))}}}}}})(a,l);if(_T(a))return a._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Cf(a)}`)})(s,e)}function XT(s,e){const i={};return O0(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(s,((a,l)=>{const u=bp(l,e.childContextForField(a));u!=null&&(i[a]=u)})),{mapValue:{fields:i}}}function YT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof zt||s instanceof Vs||s instanceof ts||s instanceof _n||s instanceof HT||s instanceof hs||_T(s))}function QT(s,e,i){if(!YT(i)||!D0(i)){const a=Cf(i);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function Pf(s,e,i){if((e=ga(e))instanceof PT)return e._internalPath;if(typeof e=="string")return BC(s,e);throw _f("Field path arguments must be of type string or ",s,!1,void 0,i)}const UC=new RegExp("[~\\*/\\[\\]]");function BC(s,e,i){if(e.search(UC)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new PT(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function _f(s,e,i,a,l){const u=a&&!a.isEmpty(),m=l!==void 0;let y=`Function ${e}() called with invalid data`;i&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(u||m)&&(E+=" (found",u&&(E+=` in field ${a}`),m&&(E+=` in document ${l}`),E+=")"),new we(fe.INVALID_ARGUMENT,y+s+E)}function qC(s,e){return s.some((i=>i.isEqual(e)))}class zC{convertValue(e,i="none"){switch(dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return to(e,((l,u)=>{a[l]=this.convertValue(u,i)})),a}convertVectorValue(e){const i=e.fields?.[lf].arrayValue?.values?.map((a=>an(a.doubleValue)));return new hs(i)}convertGeoPoint(e){return new Vs(an(e.latitude),an(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=If(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const i=cr(e);return new zt(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=Vt.fromString(e);At(gT(a),9688,{name:e});const l=new wu(a.get(1),a.get(3)),u=new Le(a.popFirst(5));return l.isEqual(i)||va(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}class PC extends zC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,i)}}const RE="@firebase/firestore",CE="4.10.0";class $T{constructor(e,i,a,l,u){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const i=this._document.data.field(Pf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class HC extends $T{data(){return super.data()}}function FC(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new we(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class GC extends Sp{}function XC(s,e,...i){let a=[];e instanceof Sp&&a.push(e),a=a.concat(i),(function(u){const m=u.filter((E=>E instanceof wp)).length,y=u.filter((E=>E instanceof Hf)).length;if(m>1||m>0&&y>0)throw new we(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)s=l._apply(s);return s}class Hf extends GC{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new Hf(e,i,a)}_apply(e){const i=this._parse(e);return KT(e._query,i),new bl(e.firestore,e.converter,Rm(e._query,i))}_parse(e){const i=GT(e.firestore);return(function(u,m,y,E,g,w,C){let I;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new we(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){IE(C,w);const W=[];for(const ne of C)W.push(DE(E,u,ne));I={arrayValue:{values:W}}}else I=DE(E,u,C)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||IE(C,w),I=VC(y,m,C,w==="in"||w==="not-in");return hn.create(g,w,I)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function xE(s,e,i){const a=e,l=Pf("where",s);return Hf._create(l,a,i)}class wp extends Sp{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new wp(e,i)}_parse(e){const i=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return i.length===1?i[0]:ms.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(l,u){let m=l;const y=u.getFlattenedFilters();for(const E of y)KT(m,E),m=Rm(m,E)})(e._query,i),new bl(e.firestore,e.converter,Rm(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function DE(s,e,i){if(typeof(i=ga(i))=="string"){if(i==="")throw new we(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q0(e)&&i.indexOf("/")!==-1)throw new we(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(Vt.fromString(i));if(!Le.isDocumentKey(a))throw new we(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Fv(s,new Le(a))}if(i instanceof _n)return Fv(s,i._key);throw new we(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(i)}.`)}function IE(s,e){if(!Array.isArray(s)||s.length===0)throw new we(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KT(s,e){const i=(function(l,u){for(const m of l)for(const y of m.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new we(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}function YC(s,e,i){let a;return a=s?s.toFirestore(e):e,a}class Gc{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rl extends $T{constructor(e,i,a,l,u,m){super(e,i,a,l,m),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(Pf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=rl._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",rl._jsonSchema={type:mn("string",rl._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class Jc extends rl{data(e={}){return super.data(e)}}class ol{constructor(e,i,a,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new Gc(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new Jc(this._firestore,this._userDataWriter,a.key,a,new Gc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new we(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let m=0;return l._snapshot.docChanges.map((y=>{const E=new Jc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Gc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const E=new Jc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Gc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,w=-1;return y.type!==0&&(g=m.indexOf(y.doc.key),m=m.delete(y.doc.key)),y.type!==1&&(m=m.add(y.doc),w=m.indexOf(y.doc.key)),{type:QC(y.type),doc:E,oldIndex:g,newIndex:w}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ol._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:s})}}ol._jsonSchemaVersion="firestore/querySnapshot/1.0",ol._jsonSchema={type:mn("string",ol._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};function $C(s){s=fl(s,bl);const e=fl(s.firestore,zf),i=zT(e),a=new PC(e);return FC(s._query),AC(i,s._query).then((l=>new ol(e,a,s,l)))}function Ap(s,e,i){s=fl(s,_n);const a=fl(s.firestore,zf),l=YC(s.converter,e),u=GT(a);return WT(a,[MC(u,"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,Ls.none())])}function Ff(s){return WT(fl(s.firestore,zf),[new sp(s._key,Ls.none())])}function WT(s,e){const i=zT(s);return NC(i,e)}(function(e,i=!0){S2(c2),lr(new _a("firestore",((a,{instanceIdentifier:l,options:u})=>{const m=a.getProvider("app").getImmediate(),y=new zf(new N2(a.getProvider("auth-internal")),new x2(m,a.getProvider("app-check-internal")),X2(m,l),m);return u={useFetchStreams:i,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),ks(RE,CE,e),ks(RE,CE,"esm2020")})();const ZT="@firebase/installations",Np="0.6.19";const JT=1e4,eb=`w:${Np}`,tb="FIS_v2",KC="https://firebaseinstallations.googleapis.com/v1",WC=3600*1e3,ZC="installations",JC="Installations";const ex={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zr=new Af(ZC,JC,ex);function nb(s){return s instanceof eo&&s.code.includes("request-failed")}function ib({projectId:s}){return`${KC}/projects/${s}/installations`}function sb(s){return{token:s.token,requestStatus:2,expiresIn:nx(s.expiresIn),creationTime:Date.now()}}async function ab(s,e){const a=(await e.json()).error;return Zr.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function rb({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function tx(s,{refreshToken:e}){const i=rb(s);return i.append("Authorization",ix(e)),i}async function ob(s){const e=await s();return e.status>=500&&e.status<600?s():e}function nx(s){return Number(s.replace("s","000"))}function ix(s){return`${tb} ${s}`}async function sx({appConfig:s,heartbeatServiceProvider:e},{fid:i}){const a=ib(s),l=rb(s),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&l.append("x-firebase-client",g)}const m={fid:i,authVersion:tb,appId:s.appId,sdkVersion:eb},y={method:"POST",headers:l,body:JSON.stringify(m)},E=await ob(()=>fetch(a,y));if(E.ok){const g=await E.json();return{fid:g.fid||i,registrationStatus:2,refreshToken:g.refreshToken,authToken:sb(g.authToken)}}else throw await ab("Create Installation",E)}function lb(s){return new Promise(e=>{setTimeout(e,s)})}function ax(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const rx=/^[cdef][\w-]{21}$/,Um="";function ox(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const i=lx(s);return rx.test(i)?i:Um}catch{return Um}}function lx(s){return ax(s).substr(0,22)}function Gf(s){return`${s.appName}!${s.appId}`}const ub=new Map;function cb(s,e){const i=Gf(s);fb(i,e),ux(i,e)}function fb(s,e){const i=ub.get(s);if(i)for(const a of i)a(e)}function ux(s,e){const i=cx();i&&i.postMessage({key:s,fid:e}),fx()}let $r=null;function cx(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=s=>{fb(s.data.key,s.data.fid)}),$r}function fx(){ub.size===0&&$r&&($r.close(),$r=null)}const dx="firebase-installations-database",hx=1,Jr="firebase-installations-store";let rm=null;function Rp(){return rm||(rm=Nf(dx,hx,{upgrade:(s,e)=>{e===0&&s.createObjectStore(Jr)}})),rm}async function yf(s,e){const i=Gf(s),l=(await Rp()).transaction(Jr,"readwrite"),u=l.objectStore(Jr),m=await u.get(i);return await u.put(e,i),await l.done,(!m||m.fid!==e.fid)&&cb(s,e.fid),e}async function db(s){const e=Gf(s),a=(await Rp()).transaction(Jr,"readwrite");await a.objectStore(Jr).delete(e),await a.done}async function Xf(s,e){const i=Gf(s),l=(await Rp()).transaction(Jr,"readwrite"),u=l.objectStore(Jr),m=await u.get(i),y=e(m);return y===void 0?await u.delete(i):await u.put(y,i),await l.done,y&&(!m||m.fid!==y.fid)&&cb(s,y.fid),y}async function Cp(s){let e;const i=await Xf(s.appConfig,a=>{const l=mx(a),u=px(s,l);return e=u.registrationPromise,u.installationEntry});return i.fid===Um?{installationEntry:await e}:{installationEntry:i,registrationPromise:e}}function mx(s){const e=s||{fid:ox(),registrationStatus:0};return hb(e)}function px(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Zr.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=gx(s,i);return{installationEntry:i,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_x(s)}:{installationEntry:e}}async function gx(s,e){try{const i=await sx(s,e);return yf(s.appConfig,i)}catch(i){throw nb(i)&&i.customData.serverCode===409?await db(s.appConfig):await yf(s.appConfig,{fid:e.fid,registrationStatus:0}),i}}async function _x(s){let e=await OE(s.appConfig);for(;e.registrationStatus===1;)await lb(100),e=await OE(s.appConfig);if(e.registrationStatus===0){const{installationEntry:i,registrationPromise:a}=await Cp(s);return a||i}return e}function OE(s){return Xf(s,e=>{if(!e)throw Zr.create("installation-not-found");return hb(e)})}function hb(s){return yx(s)?{fid:s.fid,registrationStatus:0}:s}function yx(s){return s.registrationStatus===1&&s.registrationTime+JT<Date.now()}async function vx({appConfig:s,heartbeatServiceProvider:e},i){const a=Ex(s,i),l=tx(s,i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&l.append("x-firebase-client",g)}const m={installation:{sdkVersion:eb,appId:s.appId}},y={method:"POST",headers:l,body:JSON.stringify(m)},E=await ob(()=>fetch(a,y));if(E.ok){const g=await E.json();return sb(g)}else throw await ab("Generate Auth Token",E)}function Ex(s,{fid:e}){return`${ib(s)}/${e}/authTokens:generate`}async function xp(s,e=!1){let i;const a=await Xf(s.appConfig,u=>{if(!mb(u))throw Zr.create("not-registered");const m=u.authToken;if(!e&&Sx(m))return u;if(m.requestStatus===1)return i=Tx(s,e),u;{if(!navigator.onLine)throw Zr.create("app-offline");const y=Ax(u);return i=bx(s,y),y}});return i?await i:a.authToken}async function Tx(s,e){let i=await kE(s.appConfig);for(;i.authToken.requestStatus===1;)await lb(100),i=await kE(s.appConfig);const a=i.authToken;return a.requestStatus===0?xp(s,e):a}function kE(s){return Xf(s,e=>{if(!mb(e))throw Zr.create("not-registered");const i=e.authToken;return Nx(i)?{...e,authToken:{requestStatus:0}}:e})}async function bx(s,e){try{const i=await vx(s,e),a={...e,authToken:i};return await yf(s.appConfig,a),i}catch(i){if(nb(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await db(s.appConfig);else{const a={...e,authToken:{requestStatus:0}};await yf(s.appConfig,a)}throw i}}function mb(s){return s!==void 0&&s.registrationStatus===2}function Sx(s){return s.requestStatus===2&&!wx(s)}function wx(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+WC}function Ax(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function Nx(s){return s.requestStatus===1&&s.requestTime+JT<Date.now()}async function Rx(s){const e=s,{installationEntry:i,registrationPromise:a}=await Cp(e);return a?a.catch(console.error):xp(e).catch(console.error),i.fid}async function Cx(s,e=!1){const i=s;return await xx(i),(await xp(i,e)).token}async function xx(s){const{registrationPromise:e}=await Cp(s);e&&await e}function Dx(s){if(!s||!s.options)throw om("App Configuration");if(!s.name)throw om("App Name");const e=["projectId","apiKey","appId"];for(const i of e)if(!s.options[i])throw om(i);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function om(s){return Zr.create("missing-app-config-values",{valueName:s})}const pb="installations",Ix="installations-internal",Ox=s=>{const e=s.getProvider("app").getImmediate(),i=Dx(e),a=Rf(e,"heartbeat");return{app:e,appConfig:i,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},kx=s=>{const e=s.getProvider("app").getImmediate(),i=Rf(e,pb).getImmediate();return{getId:()=>Rx(i),getToken:l=>Cx(i,l)}};function jx(){lr(new _a(pb,Ox,"PUBLIC")),lr(new _a(Ix,kx,"PRIVATE"))}jx();ks(ZT,Np);ks(ZT,Np,"esm2020");const Lx="/firebase-messaging-sw.js",Mx="/firebase-cloud-messaging-push-scope",gb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vx="https://fcmregistrations.googleapis.com/v1",_b="google.c.a.c_id",Ux="google.c.a.c_l",Bx="google.c.a.ts",qx="google.c.a.e",jE=1e4;var LE;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(LE||(LE={}));var Cu;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Cu||(Cu={}));function fa(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zx(s){const e="=".repeat((4-s.length%4)%4),i=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(i),l=new Uint8Array(a.length);for(let u=0;u<a.length;++u)l[u]=a.charCodeAt(u);return l}const lm="fcm_token_details_db",Px=5,ME="fcm_token_object_Store";async function Hx(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(lm))return null;let e=null;return(await Nf(lm,Px,{upgrade:async(a,l,u,m)=>{if(l<2||!a.objectStoreNames.contains(ME))return;const y=m.objectStore(ME),E=await y.index("fcmSenderId").get(s);if(await y.clear(),!!E){if(l===2){const g=E;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:fa(g.vapidKey)}}}else if(l===3){const g=E;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:fa(g.auth),p256dh:fa(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:fa(g.vapidKey)}}}else if(l===4){const g=E;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:fa(g.auth),p256dh:fa(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:fa(g.vapidKey)}}}}}})).close(),await Zh(lm),await Zh("fcm_vapid_details_db"),await Zh("undefined"),Fx(e)?e:null}function Fx(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const Gx="firebase-messaging-database",Xx=1,xu="firebase-messaging-store";let um=null;function yb(){return um||(um=Nf(Gx,Xx,{upgrade:(s,e)=>{e===0&&s.createObjectStore(xu)}})),um}async function Yx(s){const e=vb(s),a=await(await yb()).transaction(xu).objectStore(xu).get(e);if(a)return a;{const l=await Hx(s.appConfig.senderId);if(l)return await Dp(s,l),l}}async function Dp(s,e){const i=vb(s),l=(await yb()).transaction(xu,"readwrite");return await l.objectStore(xu).put(e,i),await l.done,e}function vb({appConfig:s}){return s.appId}const Qx={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},$n=new Af("messaging","Messaging",Qx);async function $x(s,e){const i=await Op(s),a=Eb(e),l={method:"POST",headers:i,body:JSON.stringify(a)};let u;try{u=await(await fetch(Ip(s.appConfig),l)).json()}catch(m){throw $n.create("token-subscribe-failed",{errorInfo:m?.toString()})}if(u.error){const m=u.error.message;throw $n.create("token-subscribe-failed",{errorInfo:m})}if(!u.token)throw $n.create("token-subscribe-no-token");return u.token}async function Kx(s,e){const i=await Op(s),a=Eb(e.subscriptionOptions),l={method:"PATCH",headers:i,body:JSON.stringify(a)};let u;try{u=await(await fetch(`${Ip(s.appConfig)}/${e.token}`,l)).json()}catch(m){throw $n.create("token-update-failed",{errorInfo:m?.toString()})}if(u.error){const m=u.error.message;throw $n.create("token-update-failed",{errorInfo:m})}if(!u.token)throw $n.create("token-update-no-token");return u.token}async function Wx(s,e){const a={method:"DELETE",headers:await Op(s)};try{const u=await(await fetch(`${Ip(s.appConfig)}/${e}`,a)).json();if(u.error){const m=u.error.message;throw $n.create("token-unsubscribe-failed",{errorInfo:m})}}catch(l){throw $n.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function Ip({projectId:s}){return`${Vx}/projects/${s}/registrations`}async function Op({appConfig:s,installations:e}){const i=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})}function Eb({p256dh:s,auth:e,endpoint:i,vapidKey:a}){const l={web:{endpoint:i,auth:e,p256dh:s}};return a!==gb&&(l.web.applicationPubKey=a),l}const Zx=10080*60*1e3;async function Jx(s){const e=await tD(s.swRegistration,s.vapidKey),i={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:fa(e.getKey("auth")),p256dh:fa(e.getKey("p256dh"))},a=await Yx(s.firebaseDependencies);if(a){if(nD(a.subscriptionOptions,i))return Date.now()>=a.createTime+Zx?eD(s,{token:a.token,createTime:Date.now(),subscriptionOptions:i}):a.token;try{await Wx(s.firebaseDependencies,a.token)}catch(l){console.warn(l)}return VE(s.firebaseDependencies,i)}else return VE(s.firebaseDependencies,i)}async function eD(s,e){try{const i=await Kx(s.firebaseDependencies,e),a={...e,token:i,createTime:Date.now()};return await Dp(s.firebaseDependencies,a),i}catch(i){throw i}}async function VE(s,e){const a={token:await $x(s,e),createTime:Date.now(),subscriptionOptions:e};return await Dp(s,a),a.token}async function tD(s,e){const i=await s.pushManager.getSubscription();return i||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zx(e)})}function nD(s,e){const i=e.vapidKey===s.vapidKey,a=e.endpoint===s.endpoint,l=e.auth===s.auth,u=e.p256dh===s.p256dh;return i&&a&&l&&u}function UE(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return iD(e,s),sD(e,s),aD(e,s),e}function iD(s,e){if(!e.notification)return;s.notification={};const i=e.notification.title;i&&(s.notification.title=i);const a=e.notification.body;a&&(s.notification.body=a);const l=e.notification.image;l&&(s.notification.image=l);const u=e.notification.icon;u&&(s.notification.icon=u)}function sD(s,e){e.data&&(s.data=e.data)}function aD(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const i=e.fcmOptions?.link??e.notification?.click_action;i&&(s.fcmOptions.link=i);const a=e.fcmOptions?.analytics_label;a&&(s.fcmOptions.analyticsLabel=a)}function rD(s){return typeof s=="object"&&!!s&&_b in s}function oD(s){if(!s||!s.options)throw cm("App Configuration Object");if(!s.name)throw cm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:i}=s;for(const a of e)if(!i[a])throw cm(a);return{appName:s.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function cm(s){return $n.create("missing-app-config-values",{valueName:s})}class lD{constructor(e,i,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=oD(e);this.firebaseDependencies={app:e,appConfig:l,installations:i,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function uD(s){try{s.swRegistration=await navigator.serviceWorker.register(Lx,{scope:Mx}),s.swRegistration.update().catch(()=>{}),await cD(s.swRegistration)}catch(e){throw $n.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function cD(s){return new Promise((e,i)=>{const a=setTimeout(()=>i(new Error(`Service worker not registered after ${jE} ms`)),jE),l=s.installing||s.waiting;s.active?(clearTimeout(a),e()):l?l.onstatechange=u=>{u.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),i(new Error("No incoming service worker found.")))})}async function fD(s,e){if(!e&&!s.swRegistration&&await uD(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw $n.create("invalid-sw-registration");s.swRegistration=e}}async function dD(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=gb)}async function Tb(s,e){if(!navigator)throw $n.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw $n.create("permission-blocked");return await dD(s,e?.vapidKey),await fD(s,e?.serviceWorkerRegistration),Jx(s)}async function hD(s,e,i){const a=mD(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:i[_b],message_name:i[Ux],message_time:i[Bx],message_device_time:Math.floor(Date.now()/1e3)})}function mD(s){switch(s){case Cu.NOTIFICATION_CLICKED:return"notification_open";case Cu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function pD(s,e){const i=e.data;if(!i.isFirebaseMessaging)return;s.onMessageHandler&&i.messageType===Cu.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(UE(i)):s.onMessageHandler.next(UE(i)));const a=i.data;rD(a)&&a[qx]==="1"&&await hD(s,i.messageType,a)}const BE="@firebase/messaging",qE="0.12.23";const gD=s=>{const e=new lD(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",i=>pD(e,i)),e},_D=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:a=>Tb(e,a)}};function yD(){lr(new _a("messaging",gD,"PUBLIC")),lr(new _a("messaging-internal",_D,"PRIVATE")),ks(BE,qE),ks(BE,qE,"esm2020")}async function bb(){try{await h0()}catch{return!1}return typeof window<"u"&&d0()&&lA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function vD(s,e){if(!navigator)throw $n.create("only-available-in-window");return s.onMessageHandler=e,()=>{s.onMessageHandler=null}}function ED(s=y0()){return bb().then(e=>{if(!e)throw $n.create("unsupported-browser")},e=>{throw $n.create("indexed-db-unsupported")}),Rf(ga(s),"messaging").getImmediate()}async function TD(s,e){return s=ga(s),Tb(s,e)}function bD(s,e){return s=ga(s),vD(s,e)}yD();const ef={apiKey:"AIzaSyA3dJLU8Xw6vcqXtOhVbuI5aO_ImdT8upg",authDomain:"goal-game-7ad53.firebaseapp.com",projectId:"goal-game-7ad53",storageBucket:"goal-game-7ad53.firebasestorage.app",messagingSenderId:"86507800050",appId:"1:86507800050:web:f7674a55bc2291686f976b"},Sb="BLD2XB0Bh-Y2EwwHU1YimB6-tzKQNrGh-bzoZHXbSWlvQt1mg6K5c7EJWfBIDrGY0cQJXO4LNrKD9MjlZhMsb3c";let fm=null,dm=null,Xc=null;function Bs(){return!!(ef.apiKey&&ef.projectId&&ef.messagingSenderId&&Sb)}function wb(){if(!fm){if(!Bs())throw new Error("Firebase is not configured. Please add your Firebase config to .env file.");fm=_0(ef)}return fm}function ro(){return dm||(dm=IC(wb())),dm}async function Ab(){return Xc||(await bb()?(Xc=ED(wb()),Xc):(console.warn("Firebase Messaging is not supported in this browser"),null))}function Ta(){let s=localStorage.getItem("goal-game-device-id");return s||(s=crypto.randomUUID(),localStorage.setItem("goal-game-device-id",s)),s}const gl="scheduled_notifications",Nb="fcm_tokens";async function SD(s,e,i,a,l,u){if(!Bs())return console.warn("Firebase not configured, skipping notification scheduling"),null;const m=ro(),y=Ta(),E=new Date(`${i}T${a}`),g=new Date(E.getTime()-l*60*1e3);if(g<=new Date)return console.warn("Notification trigger time is in the past, skipping"),null;const w=`${y}_event_${s}`,C={id:w,eventId:s,eventTitle:e,eventDate:i,eventTime:a,triggerAt:g.toISOString(),fcmToken:u,deviceId:y,status:"pending",createdAt:new Date().toISOString(),notificationType:"event"};try{return await Ap(ao(m,gl,w),C),w}catch(I){return console.error("Failed to schedule notification:",I),null}}async function wD(s,e,i,a,l){if(!Bs())return console.warn("Firebase not configured, skipping notification scheduling"),null;const u=ro(),m=Ta(),y=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z",E=new Date(y);if(E<=new Date)return console.warn("Buff expiry time is in the past, skipping notification"),null;const g=`${m}_buff_${s}`,w={id:g,buffLogId:s,buffName:e,buffType:i,triggerAt:E.toISOString(),fcmToken:l,deviceId:m,status:"pending",createdAt:new Date().toISOString(),notificationType:"buff_expiry"};try{return await Ap(ao(u,gl,g),w),g}catch(C){return console.error("Failed to schedule buff expiry notification:",C),null}}async function AD(s){if(!Bs())return;const e=ro(),a=`${Ta()}_buff_${s}`;try{await Ff(ao(e,gl,a))}catch(l){console.error("Failed to cancel buff expiry notification:",l)}}async function ND(s){if(!Bs())return;const e=ro(),a=`${Ta()}_event_${s}`;try{await Ff(ao(e,gl,a))}catch(l){console.error("Failed to cancel notification:",l)}}async function RD(){if(!Bs())return;const s=ro(),e=Ta();try{const i=XC(DC(s,gl),xE("deviceId","==",e),xE("status","==","pending")),l=(await $C(i)).docs.map(u=>Ff(ao(s,gl,u.id)));await Promise.all(l)}catch(i){console.error("Failed to cancel all notifications:",i)}}async function CD(s){if(!Bs())return;const e=ro(),i=Ta();try{await Ap(ao(e,Nb,i),{token:s,deviceId:i,updatedAt:new Date().toISOString(),platform:navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?"ios":navigator.userAgent.includes("Android")?"android":"web"})}catch(a){console.error("Failed to save FCM token:",a)}}async function xD(){if(!Bs())return;const s=ro(),e=Ta();try{await Ff(ao(s,Nb,e))}catch(i){console.error("Failed to delete FCM token:",i)}}function DD(){return"Notification"in window?Notification.permission:"unsupported"}function kp(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function jp(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}function Lp(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function ID(){return jp()&&!Lp()?!1:kp()}async function OD(){if(!Bs())return{success:!1,token:null,error:"Firebase is not configured"};if(!kp())return{success:!1,token:null,error:"Notifications are not supported in this browser"};if(jp()&&!Lp())return{success:!1,token:null,error:"On iOS, you must add this app to your home screen first, then enable notifications"};try{if(await Notification.requestPermission()!=="granted")return{success:!1,token:null,error:"Notification permission was denied"};const e=await Ab();if(!e)return{success:!1,token:null,error:"Failed to initialize Firebase Messaging"};const i=await navigator.serviceWorker.ready,a=await TD(e,{vapidKey:Sb,serviceWorkerRegistration:i});return a?(await CD(a),{success:!0,token:a}):{success:!1,token:null,error:"Failed to get FCM token"}}catch(s){return console.error("Error requesting notification permission:",s),{success:!1,token:null,error:s instanceof Error?s.message:"Unknown error occurred"}}}async function kD(){try{await xD(),await RD()}catch(s){console.error("Error disabling notifications:",s)}}function jD(s){let e=null;return Ab().then(i=>{i&&(e=bD(i,a=>{if(console.log("Foreground message received:",a),s(a),a.notification){const{title:l,body:u}=a.notification;l&&new Notification(l,{body:u||"",icon:"/goal-game/icons/icon-192.png",badge:"/goal-game/icons/icon-192.png",tag:a.data?.eventId||"goal-game-notification"})}}))}),()=>{e&&e()}}function Rb(){const s=Ce(),e=Ta(),i=s.exec("SELECT enabled, default_reminder_minutes, fcm_token, device_id FROM notification_settings WHERE id = 1");if(i.length===0||i[0].values.length===0)return s.run("INSERT OR REPLACE INTO notification_settings (id, enabled, default_reminder_minutes, fcm_token, device_id) VALUES (1, 0, 15, NULL, ?)",[e]),{enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:e};const a=i[0].values[0];return{enabled:!!a[0],defaultReminderMinutes:a[1],fcmToken:a[2],deviceId:a[3]}}async function hm(s){const e=Ce(),i=Ta(),l={...Rb(),...s};e.run(`UPDATE notification_settings SET
      enabled = ?,
      default_reminder_minutes = ?,
      fcm_token = ?,
      device_id = ?,
      updated_at = datetime('now')
    WHERE id = 1`,[l.enabled?1:0,l.defaultReminderMinutes,l.fcmToken,i]),await Je()}function Cb(){const[s,e]=ee.useState({enabled:!1,defaultReminderMinutes:15,fcmToken:null,deviceId:""}),[i,a]=ee.useState("default"),[l,u]=ee.useState(!1),[m,y]=ee.useState(null),E=kp(),g=Bs(),w=ID(),C=jp(),I=Lp();ee.useEffect(()=>{try{const he=Rb();e(he),a(DD())}catch(he){console.error("Failed to load notification settings:",he)}},[]),ee.useEffect(()=>!s.enabled||!s.fcmToken?void 0:jD(Ae=>{console.log("Notification received in foreground:",Ae)}),[s.enabled,s.fcmToken]);const $=ee.useCallback(async()=>{u(!0),y(null);try{const he=await OD();return he.success?(await hm({enabled:!0,fcmToken:he.token}),e(Ae=>({...Ae,enabled:!0,fcmToken:he.token})),a("granted"),!0):(y(he.error||"Failed to enable notifications"),!1)}catch(he){const Ae=he instanceof Error?he.message:"Unknown error";return y(Ae),!1}finally{u(!1)}},[]),W=ee.useCallback(async()=>{u(!0),y(null);try{await kD(),await hm({enabled:!1,fcmToken:null}),e(he=>({...he,enabled:!1,fcmToken:null}))}catch(he){const Ae=he instanceof Error?he.message:"Unknown error";y(Ae)}finally{u(!1)}},[]),ne=ee.useCallback(async he=>{await hm({defaultReminderMinutes:he}),e(Ae=>({...Ae,defaultReminderMinutes:he}))},[]),G=ee.useCallback(async(he,Ae,xe,O,D)=>{!s.enabled||!s.fcmToken||await SD(he,Ae,xe,O,D,s.fcmToken)},[s.enabled,s.fcmToken]),z=ee.useCallback(async he=>{await ND(he)},[]),le=ee.useCallback(async(he,Ae,xe,O)=>{!s.enabled||!s.fcmToken||await wD(he,Ae,xe,O,s.fcmToken)},[s.enabled,s.fcmToken]),me=ee.useCallback(async he=>{await AD(he)},[]);return{settings:s,permissionState:i,isSupported:E,isConfigured:g,canEnable:w,isIOS:C,isStandalone:I,loading:l,error:m,enableNotifications:$,disableNotificationsHandler:W,setDefaultReminderMinutes:ne,scheduleEventReminder:G,cancelEventReminder:z,scheduleBuffExpiry:le,cancelBuffExpiry:me}}const LD=[{type:"activate_buffs",title:"Habit Builder",description:"Activate {target} buff(s) today",targetRange:[2,4],xpReward:25},{type:"complete_steps",title:"Step by Step",description:"Complete {target} quest step(s) today",targetRange:[3,7],xpReward:30},{type:"no_debuffs",title:"Clean Slate",description:"Avoid activating any debuffs today",targetRange:[1,1],xpReward:40},{type:"gym_session",title:"Iron Warrior",description:"Complete a gym workout today",targetRange:[1,1],xpReward:35},{type:"early_start",title:"Early Bird",description:"Complete a habit before 8 AM",targetRange:[1,1],xpReward:30},{type:"planner_event",title:"Planned Execution",description:"Complete {target} planner event(s)",targetRange:[1,3],xpReward:25},{type:"activate_specific",title:"Wellness Warrior",description:"Activate a health-related buff",targetRange:[1,1],xpReward:20}],zE=50;function Sl(){return new Date().toISOString().split("T")[0]}function PE(s){const e=Ce(),i=s||Sl(),a=e.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE date = ? ORDER BY id`,[i]);return a.length?a[0].values.map(l=>({id:l[0],date:l[1],quest_type:l[2],title:l[3],description:l[4],target_value:l[5],current_value:l[6],xp_reward:l[7],is_completed:!!l[8],completed_at:l[9]})):[]}function MD(s){const e=Ce(),i=Sl(),a=e.exec("SELECT id FROM daily_quest_bonus WHERE date = ?",[i]);return a.length>0&&a[0].values.length>0}async function VD(s){const e=Ce(),i=Sl();e.run("INSERT OR IGNORE INTO daily_quest_bonus (date, claimed_at) VALUES (?, datetime('now'))",[i]),await Je()}async function UD(){const s=Ce(),e=Sl(),i=PE(e);if(i.length>0)return i;const l=[...LD].sort(()=>Math.random()-.5).slice(0,3);for(const u of l){const m=u.targetRange[0]===u.targetRange[1]?u.targetRange[0]:Math.floor(Math.random()*(u.targetRange[1]-u.targetRange[0]+1))+u.targetRange[0],y=u.description.replace("{target}",m.toString());s.run(`INSERT INTO daily_quests (date, quest_type, title, description, target_value, xp_reward)
       VALUES (?, ?, ?, ?, ?, ?)`,[e,u.type,u.title,y,m,u.xpReward])}return await Je(),PE(e)}async function xb(s,e=1,i){const a=Ce(),l=i||Sl(),u=a.exec(`SELECT id, current_value, target_value, is_completed FROM daily_quests
     WHERE date = ? AND quest_type = ? AND is_completed = 0`,[l,s]);if(!u.length||!u[0].values.length)return null;const m=u[0].values[0][0],y=u[0].values[0][1],E=u[0].values[0][2],g=y+e,w=g>=E;a.run(`UPDATE daily_quests SET current_value = ?, is_completed = ?, completed_at = ?
     WHERE id = ?`,[g,w?1:0,w?new Date().toISOString():null,m]),await Je();const C=a.exec(`SELECT id, date, quest_type, title, description, target_value, current_value, xp_reward, is_completed, completed_at
     FROM daily_quests WHERE id = ?`,[m]);if(!C.length)return null;const I=C[0].values[0];return{id:I[0],date:I[1],quest_type:I[2],title:I[3],description:I[4],target_value:I[5],current_value:I[6],xp_reward:I[7],is_completed:!!I[8],completed_at:I[9]}}async function BD(s){const e=Ce(),i=Sl();(e.exec(`SELECT COUNT(*) FROM buff_log bl
     JOIN buff_definitions bd ON bl.definition_id = bd.id
     WHERE bd.type = 'debuff' AND date(bl.activated_at) = ?`,[i])[0]?.values[0]?.[0]||0)===0&&await xb("no_debuffs",1,i)}function qD({grantXP:s}){const[e,i]=ee.useState([]),[a,l]=ee.useState(!1),[u,m]=ee.useState(!0),y=ee.useCallback(async()=>{const W=await UD();i(W),l(MD()),m(!1)},[]);ee.useEffect(()=>{y()},[y]),ee.useEffect(()=>{const ne=setInterval(()=>{const G=new Date().toISOString().split("T")[0];e.length>0&&e[0].date!==G&&y()},6e4);return()=>clearInterval(ne)},[e,y]);const E=ee.useCallback(async(W,ne=1)=>{const G=await xb(W,ne);return G?.is_completed&&await s(G.xp_reward,`Daily Quest: ${G.title}`,"daily_quest",G.id),await y(),G},[s,y]),g=ee.useCallback(async()=>!e.every(ne=>ne.is_completed)||a?!1:(await VD(),await s(zE,"Daily Quest Bonus: All quests completed!","daily_quest_bonus"),l(!0),!0),[e,a,s]),w=ee.useCallback(async()=>{await BD(),await y()},[y]),C=e.every(W=>W.is_completed),I=e.filter(W=>W.is_completed).length,$=e.filter(W=>W.is_completed).reduce((W,ne)=>W+ne.xp_reward,0);return{quests:e,loading:u,allCompleted:C,completedCount:I,bonusClaimed:a,bonusXp:zE,totalXpEarned:$,refresh:y,updateProgress:E,claimBonus:g,checkNoDebuffs:w}}const Db=[{days:3,title:"Getting Started",bonusXp:15,icon:""},{days:7,title:"One Week Strong",bonusXp:50,icon:""},{days:14,title:"Two Week Warrior",bonusXp:75,icon:""},{days:21,title:"Habit Forming",bonusXp:100,icon:""},{days:30,title:"Monthly Master",bonusXp:150,icon:""},{days:60,title:"Two Month Champion",bonusXp:250,icon:""},{days:90,title:"Quarterly Legend",bonusXp:400,icon:""},{days:180,title:"Half Year Hero",bonusXp:750,icon:""},{days:365,title:"Annual Achiever",bonusXp:1500,icon:""}];function zD(s){return Db.filter(e=>e.days<=s)}function PD(s){const e=zD(s);return e.length>0?e[e.length-1]:null}function Ib(){return new Date().toISOString().split("T")[0]}function HD(){const s=new Date;return s.setDate(s.getDate()-1),s.toISOString().split("T")[0]}function Ob(s){const e=Ce(),i=Ib(),a=HD(),l=e.exec(`SELECT DISTINCT date(activated_at) as d FROM buff_log
     WHERE definition_id = ? AND activated_at >= date('now', '-400 days')
     ORDER BY d DESC`,[s]),u=l.length?l[0].values.map(G=>G[0]):[],m=e.exec(`SELECT freeze_date FROM streak_freezes
     WHERE buff_definition_id = ? AND freeze_date >= date('now', '-400 days')`,[s]),y=m.length?m[0].values.map(G=>G[0]):[],E=e.exec(`SELECT used_date FROM streak_shield_uses
     WHERE buff_definition_id = ? AND used_date >= date('now', '-400 days')`,[s]),g=E.length?E[0].values.map(G=>G[0]):[];let w=0;const C=new Set([...u,...y,...g]);let I=i;if(!C.has(i))if(C.has(a))I=a;else if(y.includes(i))I=i;else return{buffDefinitionId:s,currentStreak:0,longestStreak:HE(s),lastActivatedDate:u[0]||null,isAtRisk:u.length>0&&u[0]===a,shieldActive:!1};for(;C.has(I);){w++;const G=new Date(I+"T12:00:00");G.setDate(G.getDate()-1),I=G.toISOString().split("T")[0]}const $=!u.includes(i)&&!y.includes(i)&&u.includes(a),W=g.includes(i),ne=HE(s);return w>ne&&FD(s,w),{buffDefinitionId:s,currentStreak:w,longestStreak:Math.max(w,ne),lastActivatedDate:u[0]||null,isAtRisk:$,shieldActive:W}}function HE(s){const i=Ce().exec("SELECT longest_streak FROM streak_records WHERE buff_definition_id = ?",[s]);return i.length&&i[0].values.length?i[0].values[0][0]:0}async function FD(s,e){Ce().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, updated_at)
     VALUES (?, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       longest_streak = MAX(longest_streak, excluded.longest_streak),
       updated_at = datetime('now')`,[s,e]),await Je()}function kb(){const e=Ce().exec("SELECT SUM(quantity) FROM streak_shields");return e.length&&e[0].values.length&&e[0].values[0][0]||0}async function GD(s){Ce().run("INSERT INTO streak_shields (quantity) VALUES (?)",[s]),await Je()}async function XD(s){const e=Ce(),i=Ib();if(kb()<=0)return!1;const l=e.exec("SELECT id FROM streak_shield_uses WHERE buff_definition_id = ? AND used_date = ?",[s,i]);if(l.length&&l[0].values.length)return!1;const u=Ob(s);return e.run(`UPDATE streak_shields SET quantity = quantity - 1
     WHERE id = (SELECT id FROM streak_shields WHERE quantity > 0 ORDER BY earned_at LIMIT 1)`),e.run(`INSERT INTO streak_shield_uses (buff_definition_id, used_date, streak_saved)
     VALUES (?, ?, ?)`,[s,i,u.currentStreak]),e.run("DELETE FROM streak_shields WHERE quantity <= 0"),await Je(),!0}function YD(s){const i=Ce().exec(`SELECT id, buff_definition_id, freeze_date, reason, created_at
     FROM streak_freezes WHERE buff_definition_id = ? AND freeze_date >= date('now')
     ORDER BY freeze_date`,[s]);return i.length?i[0].values.map(a=>({id:a[0],buff_definition_id:a[1],freeze_date:a[2],reason:a[3],created_at:a[4]})):[]}async function QD(s,e,i){Ce().run(`INSERT OR IGNORE INTO streak_freezes (buff_definition_id, freeze_date, reason)
     VALUES (?, ?, ?)`,[s,e,i||null]),await Je()}async function $D(s){Ce().run("DELETE FROM streak_freezes WHERE id = ?",[s]),await Je()}function KD(s){const i=Ce().exec("SELECT last_milestone_claimed FROM streak_records WHERE buff_definition_id = ?",[s]);return i.length&&i[0].values.length?i[0].values[0][0]:0}async function WD(s,e){Ce().run(`INSERT INTO streak_records (buff_definition_id, longest_streak, last_milestone_claimed, updated_at)
     VALUES (?, 0, ?, datetime('now'))
     ON CONFLICT(buff_definition_id) DO UPDATE SET
       last_milestone_claimed = ?,
       updated_at = datetime('now')`,[s,e,e]),await Je()}function FE(s,e){const i=KD(s);return Db.filter(a=>a.days<=e&&a.days>i)}function ZD(){const e=Ce().exec("SELECT DISTINCT definition_id FROM buff_log WHERE definition_id IN (SELECT id FROM buff_definitions WHERE type = ?)",["buff"]),i=new Map;if(!e.length)return i;for(const a of e[0].values){const l=a[0];i.set(l,Ob(l))}return i}function JD({grantXP:s}){const[e,i]=ee.useState(new Map),[a,l]=ee.useState(0),[u,m]=ee.useState(!0),y=ee.useCallback(()=>{i(ZD()),l(kb()),m(!1)},[]);ee.useEffect(()=>{y()},[y]);const E=ee.useCallback(G=>e.get(G)||{buffDefinitionId:G,currentStreak:0,longestStreak:0,lastActivatedDate:null,isAtRisk:!1,shieldActive:!1},[e]),g=ee.useCallback(async G=>{const z=await XD(G);return z&&y(),z},[y]),w=ee.useCallback(async(G,z,le)=>{await QD(G,z,le),y()},[y]),C=ee.useCallback(async G=>{await $D(G),y()},[y]),I=ee.useCallback(G=>YD(G),[]),$=ee.useCallback(async G=>{const z=E(G),le=FE(G,z.currentStreak);for(const me of le)await s(me.bonusXp,`Streak Milestone: ${me.title} (${me.days} days)`,"streak_milestone",G),await WD(G,me.days);return y(),le},[E,s,y]),W=ee.useCallback(G=>{const z=E(G);return FE(G,z.currentStreak)},[E]),ne=ee.useCallback(async G=>{await GD(G),y()},[y]);return{streakInfos:e,shieldCount:a,loading:u,refresh:y,getStreakForBuff:E,useShield:g,addFreeze:w,removeFreeze:C,getFreezes:I,claimMilestones:$,getUnclaimedMilestones:W,addShields:ne}}const GE=[{type:"procrastination_dragon",name:"Procrastination Dragon",description:"A lazy beast that feeds on delayed tasks and broken promises.",icon:"",hpRange:[400,500],xpReward:200,bonusShields:1,difficulty:"medium"},{type:"distraction_demon",name:"Distraction Demon",description:"A cunning fiend that lures you away from your goals with endless diversions.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"},{type:"sloth_specter",name:"Sloth Specter",description:"A ghostly presence that drains your energy and willpower.",icon:"",hpRange:[300,400],xpReward:150,bonusShields:0,difficulty:"easy"},{type:"chaos_chimera",name:"Chaos Chimera",description:"A multi-headed monster representing disorganization and scattered focus.",icon:"",hpRange:[500,600],xpReward:250,bonusShields:2,difficulty:"hard"},{type:"anxiety_wyrm",name:"Anxiety Wyrm",description:"A serpentine creature that coils around your mind with worry and doubt.",icon:"",hpRange:[450,550],xpReward:225,bonusShields:1,difficulty:"hard"},{type:"comfort_zone_golem",name:"Comfort Zone Golem",description:"A stubborn construct that blocks the path to growth and change.",icon:"",hpRange:[350,450],xpReward:175,bonusShields:1,difficulty:"medium"}],Yr={step_completed:10,buff_activated:25,quest_completed:50,goal_completed:100,daily_quest_completed:15,planner_event_completed:10};function vf(s=new Date){const e=new Date(s),i=e.getDay(),a=e.getDate()-i+(i===0?-6:1);return e.setDate(a),e.toISOString().split("T")[0]}function eI(s){const e=new Date(s+"T12:00:00");return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}function XE(){const s=Ce(),e=vf(),i=s.exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE week_start = ?`,[e]);if(!i.length||!i[0].values.length)return null;const a=i[0].values[0];return jb(a)}function tI(s){const i=Ce().exec(`SELECT id, week_start, boss_type, name, description, icon, max_hp, current_hp,
            is_defeated, defeated_at, xp_reward, bonus_shields, created_at
     FROM weekly_boss WHERE id = ?`,[s]);return!i.length||!i[0].values.length?null:jb(i[0].values[0])}async function nI(){const s=Ce(),e=vf(),i=XE();if(i)return i;const a=GE[Math.floor(Math.random()*GE.length)],l=Math.floor(Math.random()*(a.hpRange[1]-a.hpRange[0]+1))+a.hpRange[0];return s.run(`INSERT INTO weekly_boss (week_start, boss_type, name, description, icon, max_hp, current_hp, xp_reward, bonus_shields)
     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,a.type,a.name,a.description,a.icon,l,l,a.xpReward,a.bonusShields]),await Je(),XE()}async function iI(s,e,i,a){const l=Ce(),u=tI(s);if(!u||u.is_defeated)return{newHp:u?.current_hp||0,isDefeated:u?.is_defeated||!1};const m=Math.max(0,u.current_hp-i),y=m===0;return l.run(`UPDATE weekly_boss SET current_hp = ?, is_defeated = ?, defeated_at = ?
     WHERE id = ?`,[m,y?1:0,y?new Date().toISOString():null,s]),l.run(`INSERT INTO boss_damage_log (boss_id, damage_type, damage_amount, source_description)
     VALUES (?, ?, ?, ?)`,[s,e,i,a||null]),await Je(),{newHp:m,isDefeated:y}}function sI(){const e=Ce().exec("SELECT COUNT(*) FROM weekly_boss WHERE is_defeated = 1");return e.length&&e[0].values.length?e[0].values[0][0]:0}function jb(s){return{id:s[0],week_start:s[1],boss_type:s[2],name:s[3],description:s[4],icon:s[5],max_hp:s[6],current_hp:s[7],is_defeated:!!s[8],defeated_at:s[9],xp_reward:s[10],bonus_shields:s[11],created_at:s[12]}}function aI({grantXP:s,addShields:e}){const[i,a]=ee.useState(null),[l,u]=ee.useState(!0),[m,y]=ee.useState(!1),E=ee.useCallback(async()=>{const G=await nI();a(G),u(!1)},[]);ee.useEffect(()=>{E()},[E]),ee.useEffect(()=>{const z=setInterval(()=>{const le=vf();i&&i.week_start!==le&&E()},6e4);return()=>clearInterval(z)},[i,E]);const g=ee.useCallback(async(G,z)=>{if(!i||i.is_defeated)return;const le=Yr[G],me=await iI(i.id,G,le,z);return a(he=>he?{...he,current_hp:me.newHp,is_defeated:me.isDefeated}:null),me.isDefeated&&!i.is_defeated&&(y(!0),await s(i.xp_reward,`Defeated ${i.name}!`,"boss",i.id),i.bonus_shields>0&&e&&await e(i.bonus_shields)),me},[i,s,e]),w=ee.useCallback(()=>{y(!1)},[]),C=i?.week_start||vf(),I=eI(C),$=i?Math.round(i.current_hp/i.max_hp*100):100,W=i?i.max_hp-i.current_hp:0,ne=sI();return{boss:i,loading:l,justDefeated:m,weekStart:C,weekEnd:I,hpPercentage:$,damageDealt:W,totalDefeated:ne,refresh:E,dealDamage:g,dismissDefeatNotification:w}}const rI="_appShell_1hrux_1",oI="_sidebar_1hrux_13",lI="_sidebarLogo_1hrux_41",uI="_logoTitle_1hrux_51",cI="_logoSubtitle_1hrux_67",fI="_sidebarNav_1hrux_81",dI="_navItem_1hrux_97",hI="_navItemActive_1hrux_147",mI="_navIcon_1hrux_179",pI="_header_1hrux_193",gI="_headerLeft_1hrux_227",_I="_characterName_1hrux_239",yI="_levelBadge_1hrux_253",vI="_headerXP_1hrux_283",EI="_headerRight_1hrux_291",TI="_main_1hrux_305",bI="_xpFloat_1hrux_323",Mn={appShell:rI,sidebar:oI,sidebarLogo:lI,logoTitle:uI,logoSubtitle:cI,sidebarNav:fI,navItem:dI,navItemActive:hI,navIcon:mI,header:pI,headerLeft:gI,characterName:_I,levelBadge:yI,headerXP:vI,headerRight:EI,main:TI,xpFloat:bI},SI=[{id:"character",label:"Character",icon:""},{id:"quests",label:"Quest Log",icon:""},{id:"buffs",label:"Buffs",icon:""},{id:"planner",label:"Planner",icon:""}];function wI({activeTab:s,onTabChange:e}){return p.jsxs("aside",{className:Mn.sidebar,children:[p.jsxs("div",{className:Mn.sidebarLogo,children:[p.jsx("div",{className:Mn.logoTitle,children:"GOAL GAME"}),p.jsx("div",{className:Mn.logoSubtitle,children:"Life Management RPG"})]}),p.jsx("nav",{className:Mn.sidebarNav,children:SI.map(i=>p.jsxs("button",{className:`${Mn.navItem} ${s===i.id?Mn.navItemActive:""}`,onClick:()=>e(i.id),children:[p.jsx("span",{className:Mn.navIcon,children:i.icon}),i.label]},i.id))})]})}const AI="_progressContainer_1jr5p_1",NI="_progressLabel_1jr5p_9",RI="_track_1jr5p_33",CI="_fill_1jr5p_53",xI="_fillGold_1jr5p_67",DI="_fillGreen_1jr5p_77",II="_fillBlue_1jr5p_85",OI="_shimmer_1jr5p_93",kI="_trackLarge_1jr5p_117",ca={progressContainer:AI,progressLabel:NI,track:RI,fill:CI,fillGold:xI,fillGreen:DI,fillBlue:II,shimmer:OI,trackLarge:kI};function Bm({value:s,max:e,label:i,showValue:a=!0,color:l="gold",size:u="normal",shimmer:m=!1,className:y}){const E=e>0?Math.min(s/e*100,100):0,g=l==="gold"?ca.fillGold:l==="green"?ca.fillGreen:ca.fillBlue,w=[ca.track,u==="large"&&ca.trackLarge].filter(Boolean).join(" ");return p.jsxs("div",{className:`${ca.progressContainer} ${y||""}`,children:[(i||a)&&p.jsxs("div",{className:ca.progressLabel,children:[i&&p.jsx("span",{children:i}),a&&p.jsxs("span",{children:[s," / ",e]})]}),p.jsx("div",{className:w,children:p.jsx("div",{className:[g,ca.fill,m&&ca.shimmer].filter(Boolean).join(" "),style:{width:`${E}%`}})})]})}function jI({character:s}){const e=e0(s.total_xp);return p.jsxs("header",{className:Mn.header,children:[p.jsxs("div",{className:Mn.headerLeft,children:[p.jsx("span",{className:Mn.characterName,children:s.name}),p.jsxs("span",{className:Mn.levelBadge,children:["Lv. ",s.level,"  ",s.title]})]}),p.jsx("div",{className:Mn.headerRight,children:p.jsx("div",{className:Mn.headerXP,children:p.jsx(Bm,{value:e.current,max:e.needed,label:"XP",shimmer:!0})})})]})}const LI="_levelUpOverlay_dig0a_1",MI="_levelUpContent_dig0a_23",VI="_levelUpIcon_dig0a_33",UI="_levelUpTitle_dig0a_47",BI="_levelUpLevel_dig0a_65",qI="_levelUpTitleName_dig0a_79",zI="_dismissText_dig0a_95",Gr={levelUpOverlay:LI,levelUpContent:MI,levelUpIcon:VI,levelUpTitle:UI,levelUpLevel:BI,levelUpTitleName:qI,dismissText:zI};function PI({level:s,title:e,onDismiss:i}){return ee.useEffect(()=>{const a=setTimeout(i,5e3),l=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&i()};return window.addEventListener("keydown",l),()=>{clearTimeout(a),window.removeEventListener("keydown",l)}},[i]),p.jsx("div",{className:Gr.levelUpOverlay,onClick:i,children:p.jsxs("div",{className:Gr.levelUpContent,children:[p.jsx("span",{className:Gr.levelUpIcon,children:""}),p.jsx("div",{className:Gr.levelUpTitle,children:"LEVEL UP"}),p.jsxs("div",{className:Gr.levelUpLevel,children:["Level ",s]}),p.jsx("div",{className:Gr.levelUpTitleName,children:e}),p.jsx("div",{className:Gr.dismissText,children:"Click or press any key to continue"})]})})}const HI="_panel_zw35t_1",FI="_panelHeader_zw35t_69",GI="_panelGlow_zw35t_93",mm={panel:HI,panelHeader:FI,panelGlow:GI};function li({children:s,header:e,glow:i,className:a,style:l}){const u=[mm.panel,i&&mm.panelGlow,a].filter(Boolean).join(" ");return p.jsxs("div",{className:u,style:l,children:[e&&p.jsx("div",{className:mm.panelHeader,children:e}),s]})}const XI="_button_vi3e3_1",YI="_primary_vi3e3_61",QI="_danger_vi3e3_83",$I="_small_vi3e3_103",KI="_ghost_vi3e3_113",WI="_fullWidth_vi3e3_133",Yc={button:XI,primary:YI,danger:QI,small:$I,ghost:KI,fullWidth:WI};function st({variant:s="default",size:e="normal",fullWidth:i,children:a,className:l,...u}){const m=[Yc.button,s!=="default"&&Yc[s],e==="small"&&Yc.small,i&&Yc.fullWidth,l].filter(Boolean).join(" ");return p.jsx("button",{className:m,...u,children:a})}const ZI="_inputGroup_1helv_1",JI="_label_1helv_13",e3="_input_1helv_1",t3="_select_1helv_31",n3="_textarea_1helv_31",pa={inputGroup:ZI,label:JI,input:e3,select:t3,textarea:n3};function Os({label:s,className:e,...i}){return p.jsxs("div",{className:pa.inputGroup,children:[s&&p.jsx("label",{className:pa.label,children:s}),p.jsx("input",{className:`${pa.input} ${e||""}`,...i})]})}function ir({label:s,children:e,className:i,...a}){return p.jsxs("div",{className:pa.inputGroup,children:[s&&p.jsx("label",{className:pa.label,children:s}),p.jsx("select",{className:`${pa.select} ${i||""}`,...a,children:e})]})}function Ef({label:s,className:e,...i}){return p.jsxs("div",{className:pa.inputGroup,children:[s&&p.jsx("label",{className:pa.label,children:s}),p.jsx("textarea",{className:`${pa.textarea} ${e||""}`,...i})]})}const i3=[{minLevel:50,tier:7},{minLevel:40,tier:6},{minLevel:30,tier:5},{minLevel:22,tier:4},{minLevel:15,tier:3},{minLevel:10,tier:2},{minLevel:5,tier:1},{minLevel:1,tier:0}];function s3(s){for(const{minLevel:e,tier:i}of i3)if(s>=e)return i;return 0}function fu(s){if(s<5)return 0;const a=(s-5)/25;return Math.min(Math.pow(a,.7),1)}const du={stamina:"#2ecc71",willpower:"#9b59b6",health:"#e74c3c",focus:"#3498db",charisma:"#e67e22"},Lb={0:{primary:"#8b7355",secondary:"#6b5344",accent:"#a08060",skin:"#e8c4a0",hair:"#4a3728"},1:{primary:"#8b4513",secondary:"#654321",accent:"#cd853f",skin:"#e8c4a0",hair:"#4a3728"},2:{primary:"#708090",secondary:"#4a5568",accent:"#a0aec0",skin:"#e8c4a0",hair:"#4a3728"},3:{primary:"#5a6672",secondary:"#3d4852",accent:"#8892a0",skin:"#e8c4a0",hair:"#4a3728"},4:{primary:"#b8860b",secondary:"#8b6914",accent:"#daa520",skin:"#e8c4a0",hair:"#4a3728"},5:{primary:"#ffd700",secondary:"#b8860b",accent:"#ffed4a",skin:"#e8c4a0",hair:"#4a3728",glow:"#ffd700"},6:{primary:"#e6e6fa",secondary:"#9370db",accent:"#dda0dd",skin:"#e8c4a0",hair:"#4a3728",glow:"#9370db"},7:{primary:"#8b0000",secondary:"#4a0000",accent:"#ff4500",skin:"#e8c4a0",hair:"#ffd700",glow:"#ff4500",crown:"#ffd700"}},_l=64;function da(s,e,i,a,l=1){s.fillStyle=a,s.fillRect(e,i,l,l)}function Dt(s,e,i,a,l,u){s.fillStyle=u,s.fillRect(e,i,a,l)}function a3({ctx:s,palette:e}){Dt(s,27,7,10,4,e.hair),Dt(s,28,8,8,8,e.skin),Dt(s,28,7,8,2,e.hair),da(s,30,11,"#2c3e50"),da(s,33,11,"#2c3e50")}function r3({ctx:s,palette:e,tier:i}){Dt(s,26,16,12,16,e.primary),Dt(s,31,18,2,12,e.secondary),i>=2&&(Dt(s,24,16,3,4,e.accent),Dt(s,37,16,3,4,e.accent)),i>=1&&(Dt(s,26,28,12,2,e.secondary),da(s,31,28,e.accent,2)),i>=3&&(Dt(s,28,18,8,6,e.accent),Dt(s,30,19,4,4,e.secondary))}function o3({ctx:s,palette:e,tier:i}){Dt(s,22,18,4,12,e.primary),Dt(s,22,30,4,3,e.skin),Dt(s,38,18,4,12,e.primary),Dt(s,38,30,4,3,e.skin),i>=2&&(Dt(s,22,18,4,3,e.accent),Dt(s,38,18,4,3,e.accent)),i>=4&&(Dt(s,21,28,5,5,e.accent),Dt(s,38,28,5,5,e.accent))}function l3({ctx:s,palette:e,tier:i}){Dt(s,27,32,5,14,i>=3?e.secondary:e.primary),Dt(s,26,46,6,4,e.secondary),Dt(s,32,32,5,14,i>=3?e.secondary:e.primary),Dt(s,32,46,6,4,e.secondary),i>=2&&(Dt(s,26,46,6,2,e.accent),Dt(s,32,46,6,2,e.accent))}function u3({ctx:s,palette:e,tier:i}){if(i<3)return;const l={3:"#8b0000",4:"#4a0082",5:"#1a1a2e",6:"#4a0082",7:"#8b0000"}[i]||e.secondary;s.fillStyle=l,s.beginPath(),s.moveTo(24,16),s.lineTo(40,16),s.lineTo(42,48),s.lineTo(22,48),s.closePath(),s.fill(),s.fillStyle=e.accent,s.fillRect(22,16,2,32),s.fillRect(40,16,2,32)}function c3({ctx:s,palette:e,tier:i}){if(i<2)return;const a=28,l=8;i===2?Dt(s,a-1,l-2,10,3,e.secondary):i>=3&&i<7&&(Dt(s,a-2,l-3,12,5,e.accent),Dt(s,a,l+2,8,2,"#1a1a2e"),i>=4&&Dt(s,a+3,l-6,2,4,"#e74c3c"))}function f3({ctx:s,palette:e}){const i="crown"in e?e.crown:"#ffd700",a=28,l=8;Dt(s,a-2,l-4,12,3,i),da(s,a-1,l-6,i,2),da(s,a+3,l-7,i,2),da(s,a+7,l-6,i,2),da(s,a,l-5,"#e74c3c"),da(s,a+4,l-6,"#3498db"),da(s,a+8,l-5,"#2ecc71")}function d3({ctx:s}){const e="#8b0000",i="#ff4500";s.fillStyle=e,s.beginPath(),s.moveTo(22,20),s.lineTo(8,10),s.lineTo(6,16),s.lineTo(10,24),s.lineTo(14,32),s.lineTo(20,36),s.lineTo(22,28),s.closePath(),s.fill(),s.fillStyle=i,s.beginPath(),s.moveTo(20,22),s.lineTo(12,14),s.lineTo(12,20),s.lineTo(16,28),s.closePath(),s.fill(),s.fillStyle=e,s.beginPath(),s.moveTo(42,20),s.lineTo(56,10),s.lineTo(58,16),s.lineTo(54,24),s.lineTo(50,32),s.lineTo(44,36),s.lineTo(42,28),s.closePath(),s.fill(),s.fillStyle=i,s.beginPath(),s.moveTo(44,22),s.lineTo(52,14),s.lineTo(52,20),s.lineTo(48,28),s.closePath(),s.fill()}function h3(s,e){if(e<5)return;const i=Lb[e],a="glow"in i?i.glow:"#ffd700",l=s.createRadialGradient(32,32,10,32,32,40);l.addColorStop(0,`${a}40`),l.addColorStop(.5,`${a}20`),l.addColorStop(1,`${a}00`),s.fillStyle=l,s.fillRect(0,0,_l,_l)}function m3(s,e){const i=Math.max(0,Math.min(7,e)),a=Lb[i];s.clearRect(0,0,_l,_l),s.imageSmoothingEnabled=!1;const l={ctx:s,palette:a,tier:i};h3(s,i),i>=7&&d3(l),i>=3&&u3(l),l3(l),r3(l),o3(l),a3(l),i>=7?f3(l):i>=2&&c3(l)}const p3="_spriteContainer_1vkdq_3",g3="_spriteCanvas_1vkdq_25",_3="_auraStamina_1vkdq_79",y3="_auraWillpower_1vkdq_81",v3="_auraHealth_1vkdq_83",E3="_auraFocus_1vkdq_85",T3="_auraCharisma_1vkdq_87",b3="_auraLayer_1vkdq_99",Ji={spriteContainer:p3,spriteCanvas:g3,auraStamina:_3,auraWillpower:y3,auraHealth:v3,auraFocus:E3,auraCharisma:T3,auraLayer:b3};function S3({level:s,stats:e}){const i=ee.useRef(null),a=s3(s);ee.useEffect(()=>{const m=i.current;if(!m)return;const y=m.getContext("2d");y&&m3(y,a)},[a]);const l={stamina:fu(e.stamina),willpower:fu(e.willpower),health:fu(e.health),focus:fu(e.focus),charisma:fu(e.charisma)},u={"--aura-stamina-intensity":l.stamina,"--aura-stamina-color":du.stamina,"--aura-willpower-intensity":l.willpower,"--aura-willpower-color":du.willpower,"--aura-health-intensity":l.health,"--aura-health-color":du.health,"--aura-focus-intensity":l.focus,"--aura-focus-color":du.focus,"--aura-charisma-intensity":l.charisma,"--aura-charisma-color":du.charisma};return p.jsxs("div",{className:Ji.spriteContainer,style:u,children:[l.stamina>0&&p.jsx("div",{className:`${Ji.auraLayer} ${Ji.auraStamina}`}),l.willpower>0&&p.jsx("div",{className:`${Ji.auraLayer} ${Ji.auraWillpower}`}),l.health>0&&p.jsx("div",{className:`${Ji.auraLayer} ${Ji.auraHealth}`}),l.focus>0&&p.jsx("div",{className:`${Ji.auraLayer} ${Ji.auraFocus}`}),l.charisma>0&&p.jsx("div",{className:`${Ji.auraLayer} ${Ji.auraCharisma}`}),p.jsx("canvas",{ref:i,width:_l,height:_l,className:Ji.spriteCanvas})]})}const w3="_characterGrid_1vnpd_1",A3="_characterMain_1vnpd_13",N3="_characterSide_1vnpd_25",R3="_profileSection_1vnpd_37",C3="_characterNameDisplay_1vnpd_61",x3="_characterTitleDisplay_1vnpd_75",D3="_xpSection_1vnpd_89",I3="_totalXP_1vnpd_97",O3="_statsGrid_1vnpd_113",k3="_statRow_1vnpd_125",j3="_statName_1vnpd_137",L3="_statBar_1vnpd_157",M3="_statValue_1vnpd_165",V3="_buffsList_1vnpd_185",U3="_activeBuff_1vnpd_197",B3="_buffType_1vnpd_219",q3="_debuffType_1vnpd_229",z3="_buffIcon_1vnpd_239",P3="_buffInfo_1vnpd_247",H3="_buffName_1vnpd_255",F3="_buffTimer_1vnpd_265",G3="_emptyState_1vnpd_275",X3="_nameEditRow_1vnpd_291",Y3="_xpLogList_1vnpd_307",Q3="_xpLogEntry_1vnpd_323",$3="_xpLogReason_1vnpd_343",K3="_xpLogAmount_1vnpd_351",W3="_negative_1vnpd_363",xt={characterGrid:w3,characterMain:A3,characterSide:N3,profileSection:R3,characterNameDisplay:C3,characterTitleDisplay:x3,xpSection:D3,totalXP:I3,statsGrid:O3,statRow:k3,statName:j3,statBar:L3,statValue:M3,buffsList:V3,activeBuff:U3,buffType:B3,debuffType:q3,buffIcon:z3,buffInfo:P3,buffName:H3,buffTimer:F3,emptyState:G3,nameEditRow:X3,xpLogList:Y3,xpLogEntry:Q3,xpLogReason:$3,xpLogAmount:K3,negative:W3},Z3={stamina:"green",willpower:"blue",health:"gold",focus:"blue",charisma:"gold"};function J3({character:s,stats:e,activeBuffs:i,xpLog:a,onNameChange:l}){const u=e0(s.total_xp),[m,y]=ee.useState(!1),[E,g]=ee.useState(s.name),[w,C]=ee.useState(!1),I=()=>{E.trim()&&(l(E.trim()),y(!1))};function $(W){const ne=new Date,z=new Date(W+"Z").getTime()-ne.getTime();if(z<=0)return"Expired";const le=Math.floor(z/36e5),me=Math.floor(z%36e5/6e4);return le>0?`${le}h ${me}m remaining`:`${me}m remaining`}return p.jsxs("div",{className:xt.characterGrid,children:[p.jsxs("div",{className:xt.characterMain,children:[p.jsx(li,{children:p.jsxs("div",{className:xt.profileSection,children:[p.jsx(S3,{level:s.level,stats:e}),m?p.jsxs("div",{className:xt.nameEditRow,children:[p.jsx(Os,{value:E,onChange:W=>g(W.target.value),onKeyDown:W=>W.key==="Enter"&&I(),autoFocus:!0}),p.jsx(st,{size:"small",variant:"primary",onClick:I,children:"Save"}),p.jsx(st,{size:"small",onClick:()=>y(!1),children:"Cancel"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:xt.characterNameDisplay,children:s.name}),p.jsx(st,{size:"small",variant:"ghost",onClick:()=>y(!0),children:"Rename"})]}),p.jsxs("div",{className:xt.characterTitleDisplay,children:["Level ",s.level,"  ",s.title]}),p.jsxs("div",{className:xt.xpSection,children:[p.jsx(Bm,{value:u.current,max:u.needed,label:"Experience",size:"large",shimmer:!0}),p.jsxs("div",{className:xt.totalXP,children:[s.total_xp," Total XP"]})]})]})}),p.jsx(li,{header:"Stats",children:p.jsx("div",{className:xt.statsGrid,children:ZE.map(W=>p.jsxs("div",{className:xt.statRow,children:[p.jsx("span",{className:xt.statName,children:W}),p.jsx("div",{className:xt.statBar,children:p.jsx(Bm,{value:e[W],max:30,showValue:!1,color:Z3[W]||"gold"})}),p.jsx("span",{className:xt.statValue,children:e[W]})]},W))})})]}),p.jsxs("div",{className:xt.characterSide,children:[p.jsx(li,{header:"Active Effects",children:i.length===0?p.jsx("div",{className:xt.emptyState,children:"No active buffs or debuffs"}):p.jsx("div",{className:xt.buffsList,children:i.map(W=>{const ne=bf(W.stat_effects),G=Object.entries(ne).map(([z,le])=>`${le>0?"+":""}${le} ${z}`).join(", ");return p.jsxs("div",{className:`${xt.activeBuff} ${W.type==="buff"?xt.buffType:xt.debuffType}`,children:[p.jsx("span",{className:xt.buffIcon,children:W.icon}),p.jsxs("div",{className:xt.buffInfo,children:[p.jsx("div",{className:xt.buffName,children:W.name}),p.jsxs("div",{className:xt.buffTimer,children:[$(W.expires_at),G&&`  ${G}`]})]})]},W.id)})})}),p.jsx(st,{size:"small",variant:"ghost",onClick:()=>C(!w),style:{width:"100%",marginTop:8},children:w?"Hide XP History":"Show XP History"}),w&&p.jsx(li,{header:"XP History",style:{marginTop:8},children:a.length===0?p.jsx("div",{className:xt.emptyState,children:"No XP earned yet. Complete steps to earn XP!"}):p.jsx("div",{className:xt.xpLogList,children:a.slice(0,20).map(W=>p.jsxs("div",{className:xt.xpLogEntry,children:[p.jsx("span",{className:xt.xpLogReason,children:W.reason}),p.jsxs("span",{className:`${xt.xpLogAmount} ${W.amount<0?xt.negative:""}`,children:[W.amount>0?"+":"",W.amount," XP"]})]},W.id))})})]})]})}const e4="_overlay_15bjw_1",t4="_modal_15bjw_25",n4="_modalHeader_15bjw_97",i4="_modalTitle_15bjw_111",s4="_closeButton_15bjw_123",a4="_modalActions_15bjw_153",Zo={overlay:e4,modal:t4,modalHeader:n4,modalTitle:i4,closeButton:s4,modalActions:a4};function Tf({open:s,onClose:e,title:i,children:a,actions:l}){return ee.useEffect(()=>{if(!s)return;const u=m=>{m.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[s,e]),s?p.jsx("div",{className:Zo.overlay,onClick:e,children:p.jsxs("div",{className:Zo.modal,onClick:u=>u.stopPropagation(),children:[i&&p.jsxs("div",{className:Zo.modalHeader,children:[p.jsx("h3",{className:Zo.modalTitle,children:i}),p.jsx("button",{className:Zo.closeButton,onClick:e,children:""})]}),a,l&&p.jsx("div",{className:Zo.modalActions,children:l})]})}):null}const r4="_checkbox_543u2_1",o4="_box_543u2_17",l4="_checked_543u2_53",u4="_checkmark_543u2_63",c4="_checkboxLabel_543u2_75",f4="_hidden_543u2_99",Jo={checkbox:r4,box:o4,checked:l4,checkmark:u4,checkboxLabel:c4,hidden:f4};function Mb({checked:s,onChange:e,label:i,className:a}){const l=[Jo.checkbox,s&&Jo.checked,a].filter(Boolean).join(" ");return p.jsxs("label",{className:l,onClick:u=>u.stopPropagation(),children:[p.jsx("input",{type:"checkbox",className:Jo.hidden,checked:s,onChange:u=>e(u.target.checked)}),p.jsx("span",{className:Jo.box,children:s&&p.jsx("span",{className:Jo.checkmark,children:""})}),i&&p.jsx("span",{className:Jo.checkboxLabel,children:i})]})}const d4="_questLog_1dd70_1",h4="_questToolbar_1dd70_13",m4="_questFilters_1dd70_27",p4="_goalSection_1dd70_39",g4="_goalHeader_1dd70_47",_4="_goalDomainIcon_1dd70_61",y4="_goalTitle_1dd70_69",v4="_goalDomain_1dd70_61",E4="_questsList_1dd70_99",T4="_questCard_1dd70_115",b4="_questCardHeader_1dd70_139",S4="_questPriority_1dd70_157",w4="_normal_1dd70_171",A4="_important_1dd70_173",N4="_legendary_1dd70_175",R4="_questTitle_1dd70_179",C4="_questCompleted_1dd70_191",x4="_questMeta_1dd70_201",D4="_questStepCount_1dd70_217",I4="_expandIcon_1dd70_233",O4="_expanded_1dd70_245",k4="_stepsSection_1dd70_255",j4="_stepsList_1dd70_265",L4="_stepItem_1dd70_279",M4="_stepPriorityDot_1dd70_305",V4="_stepTitle_1dd70_319",U4="_stepActions_1dd70_329",B4="_addStepRow_1dd70_347",q4="_addStepInput_1dd70_359",z4="_formGrid_1dd70_369",P4="_formRow_1dd70_381",H4="_emptyState_1dd70_399",wt={questLog:d4,questToolbar:h4,questFilters:m4,goalSection:p4,goalHeader:g4,goalDomainIcon:_4,goalTitle:y4,goalDomain:v4,questsList:E4,questCard:T4,questCardHeader:b4,questPriority:S4,normal:w4,important:A4,legendary:N4,questTitle:R4,questCompleted:C4,questMeta:x4,questStepCount:D4,expandIcon:I4,expanded:O4,stepsSection:k4,stepsList:j4,stepItem:L4,stepPriorityDot:M4,stepTitle:V4,stepActions:U4,addStepRow:B4,addStepInput:q4,formGrid:z4,formRow:P4,emptyState:H4};function F4({quest:s,onCreateStep:e,onCompleteStep:i,onUncompleteStep:a,onDeleteStep:l,onDeleteQuest:u}){const[m,y]=ee.useState(!1),[E,g]=ee.useState(""),[w,C]=ee.useState("normal"),I=s.steps.filter(z=>z.status==="completed").length,$=s.steps.length,W=s.status==="completed",ne=()=>{E.trim()&&(e(s.id,E.trim(),w),g(""),C("normal"))},G=z=>z==="legendary"?"var(--priority-legendary)":z==="important"?"var(--priority-important)":"var(--priority-normal)";return p.jsxs("div",{className:`${wt.questCard} ${W?wt.questCompleted:""}`,children:[p.jsxs("div",{className:wt.questCardHeader,onClick:()=>y(!m),children:[p.jsx("div",{className:`${wt.questPriority} ${wt[s.priority]}`}),p.jsx("span",{className:wt.questTitle,children:s.title}),p.jsxs("span",{className:wt.questMeta,children:[p.jsxs("span",{className:wt.questStepCount,children:[I,"/",$]}),p.jsx(st,{size:"small",variant:"danger",onClick:z=>{z.stopPropagation(),u(s.id)},children:""})]}),p.jsx("span",{className:`${wt.expandIcon} ${m?wt.expanded:""}`,children:""})]}),m&&p.jsxs("div",{className:wt.stepsSection,children:[p.jsx("div",{className:wt.stepsList,children:s.steps.map(z=>p.jsxs("div",{className:wt.stepItem,children:[p.jsx("div",{className:wt.stepPriorityDot,style:{background:G(z.priority)}}),p.jsx(Mb,{checked:z.status==="completed",onChange:le=>{le?i(z.id,s.id,z.priority):a(z.id)},label:z.title}),p.jsx("div",{className:wt.stepActions,children:p.jsx(st,{size:"small",variant:"danger",onClick:()=>l(z.id),children:""})})]},z.id))}),!W&&p.jsxs("div",{className:wt.addStepRow,children:[p.jsx("div",{className:wt.addStepInput,children:p.jsx(Os,{value:E,onChange:z=>g(z.target.value),placeholder:"Add a step...",onKeyDown:z=>z.key==="Enter"&&ne()})}),p.jsxs(ir,{value:w,onChange:z=>C(z.target.value),children:[p.jsx("option",{value:"normal",children:"Normal"}),p.jsx("option",{value:"important",children:"Important"}),p.jsx("option",{value:"legendary",children:"Legendary"})]}),p.jsx(st,{variant:"primary",onClick:ne,children:"Add"})]})]})]})}function G4({goals:s,domains:e,filterDomain:i,filterStatus:a,onFilterDomain:l,onFilterStatus:u,onCreateGoal:m,onCreateQuest:y,onCreateStep:E,onCompleteStep:g,onUncompleteStep:w,onDeleteStep:C,onDeleteQuest:I,onDeleteGoal:$}){const[W,ne]=ee.useState(!1),[G,z]=ee.useState(null),[le,me]=ee.useState(""),[he,Ae]=ee.useState(""),[xe,O]=ee.useState(1),[D,j]=ee.useState(""),[V,k]=ee.useState(""),[U,x]=ee.useState("normal"),ve=()=>{le.trim()&&(m(xe,le.trim(),he.trim()),me(""),Ae(""),ne(!1))},Tt=()=>{!D.trim()||G===null||(y(G,D.trim(),V.trim(),U),j(""),k(""),x("normal"),z(null))};return p.jsxs("div",{className:wt.questLog,children:[p.jsxs("div",{className:wt.questToolbar,children:[p.jsxs("div",{className:wt.questFilters,children:[p.jsxs(ir,{value:i??"",onChange:P=>l(P.target.value?Number(P.target.value):void 0),children:[p.jsx("option",{value:"",children:"All Domains"}),e.map(P=>p.jsxs("option",{value:P.id,children:[P.icon," ",P.name]},P.id))]}),p.jsxs(ir,{value:a??"",onChange:P=>u(P.target.value||void 0),children:[p.jsx("option",{value:"",children:"All Status"}),p.jsx("option",{value:"active",children:"Active"}),p.jsx("option",{value:"completed",children:"Completed"})]})]}),p.jsx(st,{variant:"primary",onClick:()=>ne(!0),children:"+ New Goal"})]}),s.length===0?p.jsx(li,{children:p.jsx("div",{className:wt.emptyState,children:"No goals yet. Create your first goal to begin your adventure!"})}):s.map(P=>p.jsx(li,{children:p.jsxs("div",{className:wt.goalSection,children:[p.jsxs("div",{className:wt.goalHeader,children:[p.jsx("span",{className:wt.goalDomainIcon,children:P.domain_icon}),p.jsx("span",{className:wt.goalTitle,children:P.title}),p.jsx("span",{className:wt.goalDomain,children:P.domain_name}),p.jsx(st,{size:"small",variant:"primary",onClick:()=>z(P.id),children:"+ Quest"}),p.jsx(st,{size:"small",variant:"danger",onClick:()=>$(P.id),children:""})]}),P.quests.length===0?p.jsx("div",{className:wt.emptyState,children:"No quests yet. Add a quest to this goal."}):p.jsx("div",{className:wt.questsList,children:P.quests.map(J=>p.jsx(F4,{quest:J,onCreateStep:E,onCompleteStep:g,onUncompleteStep:w,onDeleteStep:C,onDeleteQuest:I},J.id))})]})},P.id)),p.jsx(Tf,{open:W,onClose:()=>ne(!1),title:"New Goal",actions:p.jsxs(p.Fragment,{children:[p.jsx(st,{onClick:()=>ne(!1),children:"Cancel"}),p.jsx(st,{variant:"primary",onClick:ve,children:"Create Goal"})]}),children:p.jsxs("div",{className:wt.formGrid,children:[p.jsx(ir,{label:"Domain",value:xe,onChange:P=>O(Number(P.target.value)),children:e.map(P=>p.jsxs("option",{value:P.id,children:[P.icon," ",P.name]},P.id))}),p.jsx(Os,{label:"Goal Title",value:le,onChange:P=>me(P.target.value),placeholder:"e.g., Get in shape",onKeyDown:P=>P.key==="Enter"&&ve()}),p.jsx(Ef,{label:"Description (optional)",value:he,onChange:P=>Ae(P.target.value),placeholder:"Describe your goal..."})]})}),p.jsx(Tf,{open:G!==null,onClose:()=>z(null),title:"New Quest",actions:p.jsxs(p.Fragment,{children:[p.jsx(st,{onClick:()=>z(null),children:"Cancel"}),p.jsx(st,{variant:"primary",onClick:Tt,children:"Create Quest"})]}),children:p.jsxs("div",{className:wt.formGrid,children:[p.jsx(Os,{label:"Quest Title",value:D,onChange:P=>j(P.target.value),placeholder:"e.g., Run 5K",onKeyDown:P=>P.key==="Enter"&&Tt()}),p.jsx(Ef,{label:"Description (optional)",value:V,onChange:P=>k(P.target.value),placeholder:"Describe this quest..."}),p.jsxs(ir,{label:"Priority",value:U,onChange:P=>x(P.target.value),children:[p.jsx("option",{value:"normal",children:"Normal"}),p.jsx("option",{value:"important",children:"Important (1.5x XP)"}),p.jsx("option",{value:"legendary",children:"Legendary (2x XP)"})]})]})})]})}const X4="_buffTracker_10dzk_1",Y4="_buffToolbar_10dzk_13",Q4="_buffGrid_10dzk_33",$4="_buffSection_10dzk_45",K4="_buffCard_10dzk_59",W4="_buffCardIcon_10dzk_89",Z4="_buffCardInfo_10dzk_99",J4="_buffCardName_10dzk_107",eO="_buffCardDesc_10dzk_119",tO="_buffCardMeta_10dzk_131",nO="_buffCardActions_10dzk_141",iO="_buffTypeBadge_10dzk_155",sO="_buffTypeBuff_10dzk_175",aO="_buffTypeDebuff_10dzk_187",rO="_activeSection_10dzk_201",oO="_activeBuffItem_10dzk_213",lO="_isBuff_10dzk_229",uO="_isDebuff_10dzk_241",cO="_activeBuffIcon_10dzk_253",fO="_activeBuffInfo_10dzk_261",dO="_activeBuffName_10dzk_269",hO="_activeBuffTimer_10dzk_277",mO="_activeBuffEffects_10dzk_287",pO="_formGrid_10dzk_299",gO="_formRow_10dzk_311",_O="_statEffectRow_10dzk_329",yO="_statEffectLabel_10dzk_341",vO="_statEffectInput_10dzk_355",EO="_divider_10dzk_363",TO="_emptyState_10dzk_375",bO="_streakBadge_10dzk_391",SO="_atRisk_10dzk_421",wO="_shieldActive_10dzk_435",AO="_streakIcon_10dzk_447",NO="_streakCount_10dzk_455",RO="_streakLabel_10dzk_463",CO="_shieldInventory_10dzk_483",xO="_shieldIcon_10dzk_505",DO="_shieldInfo_10dzk_513",IO="_shieldTitle_10dzk_521",OO="_shieldDesc_10dzk_533",kO="_shieldCount_10dzk_543",jO="_milestoneBadge_10dzk_563",LO="_milestoneIcon_10dzk_589",MO="_claimMilestone_10dzk_619",qe={buffTracker:X4,buffToolbar:Y4,buffGrid:Q4,buffSection:$4,buffCard:K4,buffCardIcon:W4,buffCardInfo:Z4,buffCardName:J4,buffCardDesc:eO,buffCardMeta:tO,buffCardActions:nO,buffTypeBadge:iO,buffTypeBuff:sO,buffTypeDebuff:aO,activeSection:rO,activeBuffItem:oO,isBuff:lO,isDebuff:uO,activeBuffIcon:cO,activeBuffInfo:fO,activeBuffName:dO,activeBuffTimer:hO,activeBuffEffects:mO,formGrid:pO,formRow:gO,statEffectRow:_O,statEffectLabel:yO,statEffectInput:vO,divider:EO,emptyState:TO,streakBadge:bO,atRisk:SO,shieldActive:wO,streakIcon:AO,streakCount:NO,streakLabel:RO,shieldInventory:CO,shieldIcon:xO,shieldInfo:DO,shieldTitle:IO,shieldDesc:OO,shieldCount:kO,milestoneBadge:jO,milestoneIcon:LO,claimMilestone:MO},pm=[{name:"Morning Exercise",description:"Worked out in the morning",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2,willpower:1}},{name:"Cardio / Running",description:"Ran, cycled, swam, or did sustained cardio",type:"buff",icon:"",duration:24,stats:{stamina:3,health:2}},{name:"Strength Training",description:"Lifted weights or did resistance training",type:"buff",icon:"",duration:24,stats:{stamina:2,health:1,willpower:2}},{name:"Yoga / Stretching",description:"Did yoga, stretching, or mobility work",type:"buff",icon:"",duration:24,stats:{health:2,focus:1,willpower:1}},{name:"8 Hours Sleep",description:"Got a full night of quality sleep",type:"buff",icon:"",duration:24,stats:{health:2,focus:2,stamina:1,willpower:1}},{name:"Meditation",description:"Practiced mindfulness or meditation",type:"buff",icon:"",duration:24,stats:{willpower:3,focus:2}},{name:"Healthy Meal",description:"Ate a balanced, nutritious meal",type:"buff",icon:"",duration:24,stats:{health:3,stamina:1}},{name:"Drank Enough Water",description:"Hit daily water intake goal",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Read 30+ Minutes",description:"Read a book, article, or educational material",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:1}},{name:"Studied / Learned",description:"Studied a course, skill, or new subject",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2}},{name:"Deep Work Session",description:"Focused work with no distractions for 90+ min",type:"buff",icon:"",duration:24,stats:{focus:3,willpower:2,stamina:1}},{name:"Journaling",description:"Wrote in journal or reflected on the day",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Cold Shower",description:"Took a cold shower or ice bath",type:"buff",icon:"",duration:24,stats:{willpower:3,stamina:1}},{name:"No Phone First Hour",description:"Avoided phone for first hour after waking",type:"buff",icon:"",duration:24,stats:{focus:2,willpower:2}},{name:"Socialised",description:"Had meaningful social interaction",type:"buff",icon:"",duration:24,stats:{charisma:3,willpower:1}},{name:"Helped Someone",description:"Did something kind or helpful for another person",type:"buff",icon:"",duration:24,stats:{charisma:2,willpower:1}},{name:"Creative Time",description:"Spent time on a creative pursuit",type:"buff",icon:"",duration:24,stats:{focus:2,charisma:1,willpower:1}},{name:"Sunlight / Nature",description:"Spent 20+ minutes outdoors in natural light",type:"buff",icon:"",duration:24,stats:{health:2,stamina:1,focus:1}},{name:"Gratitude Practice",description:"Practiced gratitude  wrote or reflected on 3+",type:"buff",icon:"",duration:24,stats:{willpower:2,charisma:1}},{name:"Meal Prep",description:"Prepared healthy meals in advance",type:"buff",icon:"",duration:48,stats:{health:2,willpower:1,stamina:1}},{name:"Cleaned / Organised",description:"Cleaned home, desk, or organised belongings",type:"buff",icon:"",duration:24,stats:{focus:1,willpower:2}},{name:"Financial Check-In",description:"Reviewed budget, tracked expenses, or saved",type:"buff",icon:"",duration:24,stats:{willpower:2,focus:1}},{name:"Junk Food",description:"Ate fast food, excessive sugar, or processed food",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-1}},{name:"Skipped Exercise",description:"Had planned to exercise but didn't",type:"debuff",icon:"",duration:24,stats:{stamina:-2,willpower:-2}},{name:"Poor Sleep",description:"Got less than 6 hours or very poor quality",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,stamina:-1,willpower:-1}},{name:"Doomscrolling",description:"Mindlessly scrolled social media for 30+ min",type:"debuff",icon:"",duration:24,stats:{focus:-3,willpower:-2}},{name:"Excessive Gaming",description:"Played video games for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-2,stamina:-1}},{name:"Binge Watching",description:"Watched TV/streaming for 3+ hours unplanned",type:"debuff",icon:"",duration:24,stats:{focus:-2,willpower:-1,stamina:-1}},{name:"Alcohol",description:"Drank alcohol",type:"debuff",icon:"",duration:24,stats:{health:-2,focus:-2,willpower:-1}},{name:"Smoking / Vaping",description:"Smoked cigarettes or vaped",type:"debuff",icon:"",duration:24,stats:{health:-3,stamina:-2}},{name:"Excessive Caffeine",description:"Had too much coffee or energy drinks",type:"debuff",icon:"",duration:24,stats:{health:-1,focus:-1,stamina:-1}},{name:"Procrastinated",description:"Avoided important tasks most of the day",type:"debuff",icon:"",duration:24,stats:{willpower:-3,focus:-2}},{name:"Skipped Meals",description:"Skipped a meal or barely ate",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-2,focus:-1}},{name:"Stayed Up Too Late",description:"Went to bed much later than planned",type:"debuff",icon:"",duration:24,stats:{health:-1,willpower:-2,stamina:-1}},{name:"Impulse Spending",description:"Made unnecessary or impulse purchases",type:"debuff",icon:"",duration:24,stats:{willpower:-2}},{name:"Negative Self-Talk",description:"Caught in self-criticism or negative thought loops",type:"debuff",icon:"",duration:24,stats:{willpower:-2,charisma:-2}},{name:"Social Isolation",description:"Avoided people or cancelled social plans",type:"debuff",icon:"",duration:24,stats:{charisma:-3,willpower:-1}},{name:"Sugary Drinks",description:"Had soda, energy drinks, or sugary beverages",type:"debuff",icon:"",duration:24,stats:{health:-2,stamina:-1}},{name:"Lost Temper",description:"Got angry or had an emotional outburst",type:"debuff",icon:"",duration:24,stats:{charisma:-2,willpower:-2}}],VO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function UO(s){const e=Math.round(s*60);if(e<60)return`${e}m`;const i=Math.floor(e/60),a=e%60;return a===0?`${i}h`:`${i}h ${a}m`}function BO({definitions:s,activeBuffs:e,onCreateDefinition:i,onDeleteDefinition:a,onActivateBuff:l,onDeactivateBuff:u,streakInfos:m,shieldCount:y=0,onUseShield:E,getUnclaimedMilestones:g,onClaimMilestones:w}){const[C,I]=ee.useState(!1),[$,W]=ee.useState(""),[ne,G]=ee.useState(""),[z,le]=ee.useState("buff"),[me,he]=ee.useState(""),[Ae,xe]=ee.useState(1440),[O,D]=ee.useState({}),j=J=>{if(J==="")return;const _e=pm[Number(J)];_e&&(W(_e.name),G(_e.description),le(_e.type),he(_e.icon),xe(_e.duration*60),D({..._e.stats}))},V=()=>{W(""),G(""),le("buff"),he(""),xe(1440),D({})},k=()=>{if(!$.trim())return;const J=Object.fromEntries(Object.entries(O).filter(([,We])=>We!==0)),_e=Ae/60;i($.trim(),ne.trim(),z,me,_e,JSON.stringify(J)),V(),I(!1)};function U(J){const _e=new Date,$e=new Date(J+"Z").getTime()-_e.getTime();if($e<=0)return"Expired";const B=Math.floor($e/36e5),re=Math.floor($e%36e5/6e4);return B>0?`${B}h ${re}m`:`${re}m`}const x=s.filter(J=>J.type==="buff"),ve=s.filter(J=>J.type==="debuff"),Tt=pm.map((J,_e)=>({...J,index:_e})).filter(J=>J.type==="buff"),P=pm.map((J,_e)=>({...J,index:_e})).filter(J=>J.type==="debuff");return p.jsxs("div",{className:qe.buffTracker,children:[p.jsxs("div",{className:qe.buffToolbar,children:[p.jsx("div",{}),p.jsx(st,{variant:"primary",onClick:()=>{V(),I(!0)},children:"+ New Buff/Debuff"})]}),p.jsxs("div",{className:qe.shieldInventory,children:[p.jsx("span",{className:qe.shieldIcon,children:""}),p.jsxs("div",{className:qe.shieldInfo,children:[p.jsx("div",{className:qe.shieldTitle,children:"Streak Shields"}),p.jsx("div",{className:qe.shieldDesc,children:"Protects a streak if you miss a day"})]}),p.jsx("span",{className:qe.shieldCount,children:y})]}),e.length>0&&p.jsx(li,{header:"Active Effects",glow:!0,children:p.jsx("div",{className:qe.activeSection,children:e.map(J=>{const _e=bf(J.stat_effects),We=Object.entries(_e).map(([$e,B])=>`${B>0?"+":""}${B} ${$e}`).join(", ");return p.jsxs("div",{className:`${qe.activeBuffItem} ${J.type==="buff"?qe.isBuff:qe.isDebuff}`,children:[p.jsx("span",{className:qe.activeBuffIcon,children:J.icon}),p.jsxs("div",{className:qe.activeBuffInfo,children:[p.jsx("div",{className:qe.activeBuffName,children:J.name}),p.jsxs("div",{className:qe.activeBuffTimer,children:[U(J.expires_at)," remaining"]}),We&&p.jsx("div",{className:qe.activeBuffEffects,children:We})]}),p.jsx(st,{size:"small",variant:"danger",onClick:()=>u(J.id),children:"Remove"})]},J.id)})})}),p.jsxs("div",{className:qe.buffGrid,children:[p.jsx(li,{header:"Buffs (Positive Habits)",children:x.length===0?p.jsx("div",{className:qe.emptyState,children:"No buffs defined yet"}):p.jsx("div",{className:qe.buffSection,children:x.map(J=>p.jsx(YE,{definition:J,onActivate:l,onDelete:a,streakInfo:m?.get(J.id),shieldCount:y,onUseShield:E,unclaimedMilestones:g?.(J.id)||[],onClaimMilestones:w},J.id))})}),p.jsx(li,{header:"Debuffs (Negative Habits)",children:ve.length===0?p.jsx("div",{className:qe.emptyState,children:"No debuffs defined yet"}):p.jsx("div",{className:qe.buffSection,children:ve.map(J=>p.jsx(YE,{definition:J,onActivate:l,onDelete:a},J.id))})})]}),p.jsx(Tf,{open:C,onClose:()=>I(!1),title:"New Buff / Debuff",actions:p.jsxs(p.Fragment,{children:[p.jsx(st,{onClick:()=>I(!1),children:"Cancel"}),p.jsx(st,{variant:"primary",onClick:k,children:"Create"})]}),children:p.jsxs("div",{className:qe.formGrid,children:[p.jsxs(ir,{label:"Quick Select  Common Habits",value:"",onChange:J=>j(J.target.value),children:[p.jsx("option",{value:"",children:" Choose a preset to auto-fill "}),p.jsx("optgroup",{label:"Buffs (Positive Habits)",children:Tt.map(J=>p.jsxs("option",{value:J.index,children:[J.icon," ",J.name]},J.index))}),p.jsx("optgroup",{label:"Debuffs (Negative Habits)",children:P.map(J=>p.jsxs("option",{value:J.index,children:[J.icon," ",J.name]},J.index))})]}),p.jsx("div",{className:qe.divider}),p.jsxs("div",{className:qe.formRow,children:[p.jsx(Os,{label:"Name",value:$,onChange:J=>W(J.target.value),placeholder:"e.g., Morning Exercise"}),p.jsxs(ir,{label:"Type",value:z,onChange:J=>le(J.target.value),children:[p.jsx("option",{value:"buff",children:"Buff (Positive)"}),p.jsx("option",{value:"debuff",children:"Debuff (Negative)"})]})]}),p.jsx(Ef,{label:"Description",value:ne,onChange:J=>G(J.target.value),placeholder:"Describe this habit..."}),p.jsxs("div",{className:qe.formRow,children:[p.jsx(ir,{label:"Icon",value:me,onChange:J=>he(J.target.value),children:VO.map(J=>p.jsx("option",{value:J,children:J},J))}),p.jsx(Os,{label:"Duration (minutes)",type:"number",value:Ae,onChange:J=>xe(Number(J.target.value)),min:1,max:10080})]}),p.jsxs("div",{children:[p.jsx("label",{className:qe.statEffectLabel,style:{display:"block",marginBottom:8,fontFamily:"var(--font-heading)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--text-secondary)"},children:"Stat Effects"}),ZE.map(J=>p.jsxs("div",{className:qe.statEffectRow,children:[p.jsx("span",{className:qe.statEffectLabel,children:J}),p.jsx("input",{type:"number",className:qe.statEffectInput,value:O[J]||0,onChange:_e=>D({...O,[J]:Number(_e.target.value)}),style:{padding:"4px 8px",background:"var(--bg-dark)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontFamily:"var(--font-body)"}})]},J))]})]})})]})}function YE({definition:s,onActivate:e,onDelete:i,streakInfo:a,shieldCount:l=0,onUseShield:u,unclaimedMilestones:m=[],onClaimMilestones:y}){const E=bf(s.stat_effects),g=Object.entries(E).map(([G,z])=>`${z>0?"+":""}${z} ${G}`).join(", "),w=a?PD(a.currentStreak):null,C=a&&a.currentStreak>0,I=a?.isAtRisk&&!a?.shieldActive,$=a?.shieldActive,W=async()=>{u&&a&&await u(s.id)},ne=async()=>{y&&await y(s.id)};return p.jsxs("div",{className:qe.buffCard,children:[p.jsx("span",{className:qe.buffCardIcon,children:s.icon}),p.jsxs("div",{className:qe.buffCardInfo,children:[p.jsxs("div",{className:qe.buffCardName,children:[s.name,w&&p.jsxs("span",{className:qe.milestoneBadge,children:[p.jsx("span",{className:qe.milestoneIcon,children:w.icon}),w.title]})]}),s.description&&p.jsx("div",{className:qe.buffCardDesc,children:s.description}),p.jsxs("div",{className:qe.buffCardMeta,children:[p.jsx("span",{className:`${qe.buffTypeBadge} ${s.type==="buff"?qe.buffTypeBuff:qe.buffTypeDebuff}`,children:s.type})," ",UO(s.duration_hours),g&&`  ${g}`]}),s.type==="buff"&&C&&p.jsxs("div",{className:`${qe.streakBadge} ${I?qe.atRisk:""} ${$?qe.shieldActive:""}`,children:[p.jsx("span",{className:qe.streakIcon,children:$?"":""}),p.jsx("span",{className:qe.streakCount,children:a.currentStreak}),p.jsxs("span",{className:qe.streakLabel,children:["day streak",I&&" (at risk!)",$&&" (protected)"]})]}),I&&l>0&&u&&p.jsx(st,{size:"small",variant:"ghost",onClick:W,style:{marginTop:6},children:" Use Shield"}),m.length>0&&y&&p.jsxs(st,{size:"small",variant:"primary",onClick:ne,className:qe.claimMilestone,children:[" Claim ",m.length," Milestone",m.length>1?"s":"","!"]})]}),p.jsxs("div",{className:qe.buffCardActions,children:[p.jsx(st,{size:"small",variant:"primary",onClick:()=>e(s.id),children:"Activate"}),p.jsx(st,{size:"small",variant:"danger",onClick:()=>i(s.id),children:"Delete"})]})]})}const Vb=[{value:null,label:"No reminder"},{value:0,label:"At event time"},{value:5,label:"5 minutes before"},{value:10,label:"10 minutes before"},{value:15,label:"15 minutes before"},{value:30,label:"30 minutes before"},{value:60,label:"1 hour before"}],qO="_settingsPanel_zjhn0_1",zO="_settingsTitle_zjhn0_9",PO="_settingsDescription_zjhn0_23",HO="_settingRow_zjhn0_35",FO="_settingLabel_zjhn0_59",GO="_iosInstructions_zjhn0_71",XO="_iosTitle_zjhn0_87",YO="_iosText_zjhn0_99",QO="_iosList_zjhn0_111",$O="_deniedMessage_zjhn0_135",KO="_errorMessage_zjhn0_137",WO="_statusIndicator_zjhn0_169",ZO="_statusDot_zjhn0_187",JO="_reminderPicker_zjhn0_223",ek="_reminderLabel_zjhn0_235",tk="_reminderSelect_zjhn0_251",nk="_debugInfo_zjhn0_317",ik="_debugLabel_zjhn0_335",sk="_debugToken_zjhn0_349",ak="_debugError_zjhn0_363",St={settingsPanel:qO,settingsTitle:zO,settingsDescription:PO,settingRow:HO,settingLabel:FO,iosInstructions:GO,iosTitle:XO,iosText:YO,iosList:QO,deniedMessage:$O,errorMessage:KO,statusIndicator:WO,statusDot:ZO,reminderPicker:JO,reminderLabel:ek,reminderSelect:tk,debugInfo:nk,debugLabel:ik,debugToken:sk,debugError:ak};function rk({value:s,onChange:e,disabled:i}){return p.jsxs("div",{className:St.reminderPicker,children:[p.jsx("label",{className:St.reminderLabel,children:"Reminder"}),p.jsx("select",{className:St.reminderSelect,value:s===null?"null":s.toString(),onChange:a=>{const l=a.target.value;e(l==="null"?null:Number(l))},disabled:i,children:Vb.map(a=>p.jsx("option",{value:a.value===null?"null":a.value,children:a.label},a.value===null?"null":a.value))})]})}const ok="_planner_17b5r_1",lk="_plannerToolbar_17b5r_13",uk="_viewTabs_17b5r_25",ck="_viewTab_17b5r_25",fk="_viewTabActive_17b5r_81",dk="_dateNav_17b5r_91",hk="_dateLabel_17b5r_107",mk="_navArrow_17b5r_123",pk="_dayView_17b5r_157",gk="_timeSlot_17b5r_169",_k="_timeLabel_17b5r_185",yk="_timeEvents_17b5r_205",vk="_weekGrid_17b5r_221",Ek="_weekDay_17b5r_233",Tk="_weekDayHeader_17b5r_245",bk="_weekDayHeaderToday_17b5r_267",Sk="_weekDayDate_17b5r_277",wk="_weekDayEvents_17b5r_291",Ak="_monthGrid_17b5r_307",Nk="_monthDayHeader_17b5r_319",Rk="_monthDay_17b5r_319",Ck="_monthDayEmpty_17b5r_367",xk="_monthDayToday_17b5r_387",Dk="_monthDayNumber_17b5r_395",Ik="_monthDayEvents_17b5r_419",Ok="_eventItem_17b5r_433",kk="_eventItemCompleted_17b5r_465",jk="_eventTitle_17b5r_475",Lk="_eventTime_17b5r_489",Mk="_eventLinked_17b5r_501",Vk="_eventItemSmall_17b5r_511",Uk="_eventActions_17b5r_523",Bk="_formGrid_17b5r_547",qk="_formRow_17b5r_559",zk="_emptyState_17b5r_577",Pk="_unscheduledSection_17b5r_691",Hk="_unscheduledLabel_17b5r_703",Ye={planner:ok,plannerToolbar:lk,viewTabs:uk,viewTab:ck,viewTabActive:fk,dateNav:dk,dateLabel:hk,navArrow:mk,dayView:pk,timeSlot:gk,timeLabel:_k,timeEvents:yk,weekGrid:vk,weekDay:Ek,weekDayHeader:Tk,weekDayHeaderToday:bk,weekDayDate:Sk,weekDayEvents:wk,monthGrid:Ak,monthDayHeader:Nk,monthDay:Rk,monthDayEmpty:Ck,monthDayToday:xk,monthDayNumber:Dk,monthDayEvents:Ik,eventItem:Ok,eventItemCompleted:kk,eventTitle:jk,eventTime:Lk,eventLinked:Mk,eventItemSmall:Vk,eventActions:Uk,formGrid:Bk,formRow:qk,emptyState:zk,unscheduledSection:Pk,unscheduledLabel:Hk},Ub=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Fk=Array.from({length:16},(s,e)=>e+6);function Gk({view:s,setView:e,currentDate:i,events:a,onNavigate:l,onGoToToday:u,onCreate:m,onComplete:y,onUncomplete:E,onDelete:g,notificationsEnabled:w=!1,defaultReminderMinutes:C=15}){const[I,$]=ee.useState(!1),[W,ne]=ee.useState(i),[G,z]=ee.useState(""),[le,me]=ee.useState(""),[he,Ae]=ee.useState(""),[xe,O]=ee.useState(""),[D,j]=ee.useState(w?C:null),V=()=>{G.trim()&&(m(G.trim(),W,le.trim(),he||null,xe||null,null,null,he?D:null),z(""),me(""),Ae(""),O(""),j(w?C:null),$(!1))},k=ve=>{ne(ve),$(!0)},U=new Date(i+"T00:00:00");let x="";if(s==="day")x=$h(i);else if(s==="week"){const ve=Xm(i);x=`${$h(ve[0])}  ${$h(ve[6])}`}else x=`${xw(U.getMonth())} ${U.getFullYear()}`;return p.jsxs("div",{className:Ye.planner,children:[p.jsxs("div",{className:Ye.plannerToolbar,children:[p.jsx("div",{className:Ye.viewTabs,children:["day","week","month"].map(ve=>p.jsx("button",{className:`${Ye.viewTab} ${s===ve?Ye.viewTabActive:""}`,onClick:()=>e(ve),children:ve},ve))}),p.jsxs("div",{className:Ye.dateNav,children:[p.jsx("button",{className:Ye.navArrow,onClick:()=>l(-1),children:""}),p.jsx("span",{className:Ye.dateLabel,children:x}),p.jsx("button",{className:Ye.navArrow,onClick:()=>l(1),children:""})]}),p.jsx(st,{size:"small",variant:"ghost",onClick:u,children:"Today"}),p.jsx(st,{variant:"primary",onClick:()=>k(i),children:"+ Event"})]}),p.jsxs(li,{children:[s==="day"&&p.jsx(Xk,{date:i,events:a,onComplete:y,onUncomplete:E,onDelete:g}),s==="week"&&p.jsx(Yk,{currentDate:i,events:a,onComplete:y,onUncomplete:E,onDelete:g,onAddEvent:k}),s==="month"&&p.jsx(Qk,{currentDate:i,events:a,onAddEvent:k})]}),p.jsx(Tf,{open:I,onClose:()=>$(!1),title:"New Event",actions:p.jsxs(p.Fragment,{children:[p.jsx(st,{onClick:()=>$(!1),children:"Cancel"}),p.jsx(st,{variant:"primary",onClick:V,children:"Create"})]}),children:p.jsxs("div",{className:Ye.formGrid,children:[p.jsx(Os,{label:"Title",value:G,onChange:ve=>z(ve.target.value),placeholder:"Event title...",onKeyDown:ve=>ve.key==="Enter"&&V()}),p.jsx(Os,{label:"Date",type:"date",value:W,onChange:ve=>ne(ve.target.value)}),p.jsxs("div",{className:Ye.formRow,children:[p.jsx(Os,{label:"Start Time",type:"time",value:he,onChange:ve=>Ae(ve.target.value)}),p.jsx(Os,{label:"End Time",type:"time",value:xe,onChange:ve=>O(ve.target.value)})]}),p.jsx(Ef,{label:"Description (optional)",value:le,onChange:ve=>me(ve.target.value),placeholder:"Event details..."}),he&&w&&p.jsx(rk,{value:D,onChange:j})]})})]})}function Xk({date:s,events:e,onComplete:i,onUncomplete:a,onDelete:l}){const u=e.filter(E=>E.start_time),m=e.filter(E=>!E.start_time),y=E=>u.filter(g=>g.start_time?parseInt(g.start_time.split(":")[0],10)===E:!1);return p.jsxs("div",{className:Ye.dayView,children:[Fk.map(E=>{const g=y(E);return p.jsxs("div",{className:Ye.timeSlot,children:[p.jsxs("span",{className:Ye.timeLabel,children:[E%12||12," ",E<12?"AM":"PM"]}),p.jsx("div",{className:Ye.timeEvents,children:g.map(w=>p.jsx(qm,{event:w,onComplete:i,onUncomplete:a,onDelete:l},w.id))})]},E)}),m.length>0&&p.jsxs("div",{className:Ye.unscheduledSection,children:[p.jsx("div",{className:Ye.unscheduledLabel,children:"Unscheduled"}),m.map(E=>p.jsx(qm,{event:E,onComplete:i,onUncomplete:a,onDelete:l},E.id))]}),e.length===0&&p.jsx("div",{className:Ye.emptyState,children:"No events for this day"})]})}function Yk({currentDate:s,events:e,onComplete:i,onUncomplete:a,onDelete:l,onAddEvent:u}){const m=Xm(s),y=tf();return p.jsx("div",{className:Ye.weekGrid,children:m.map((E,g)=>{const w=e.filter($=>$.date===E),C=E===y,I=new Date(E+"T00:00:00").getDate();return p.jsxs("div",{className:Ye.weekDay,children:[p.jsxs("div",{className:`${Ye.weekDayHeader} ${C?Ye.weekDayHeaderToday:""}`,children:[Ub[g],p.jsx("span",{className:Ye.weekDayDate,children:I})]}),p.jsxs("div",{className:Ye.weekDayEvents,children:[w.map($=>p.jsx(qm,{event:$,small:!0,onComplete:i,onUncomplete:a,onDelete:l},$.id)),p.jsx(st,{size:"small",variant:"ghost",onClick:()=>u(E),style:{fontSize:"0.7rem",padding:"2px 6px"},children:"+"})]})]},E)})})}function Qk({currentDate:s,events:e,onAddEvent:i}){const a=new Date(s+"T00:00:00"),l=Cw(a.getFullYear(),a.getMonth()),u=tf();return p.jsx("div",{children:p.jsxs("div",{className:Ye.monthGrid,children:[Ub.map(m=>p.jsx("div",{className:Ye.monthDayHeader,children:m},m)),l.flat().map((m,y)=>{if(!m)return p.jsx("div",{className:`${Ye.monthDay} ${Ye.monthDayEmpty}`},`empty-${y}`);const E=e.filter(C=>C.date===m),g=m===u,w=new Date(m+"T00:00:00").getDate();return p.jsxs("div",{className:`${Ye.monthDay} ${g?Ye.monthDayToday:""}`,onClick:()=>i(m),children:[p.jsx("div",{className:Ye.monthDayNumber,children:w}),p.jsxs("div",{className:Ye.monthDayEvents,children:[E.slice(0,3).map(C=>p.jsx("div",{className:`${Ye.eventItem} ${Ye.eventItemSmall} ${C.is_completed?Ye.eventItemCompleted:""}`,children:p.jsx("span",{className:Ye.eventTitle,children:C.title})},C.id)),E.length>3&&p.jsxs("div",{className:Ye.emptyState,style:{padding:"2px",fontSize:"0.7rem"},children:["+",E.length-3," more"]})]})]},m)})]})})}function qm({event:s,small:e,onComplete:i,onUncomplete:a,onDelete:l}){return p.jsxs("div",{className:`${Ye.eventItem} ${e?Ye.eventItemSmall:""} ${s.is_completed?Ye.eventItemCompleted:""}`,children:[p.jsx(Mb,{checked:s.is_completed,onChange:u=>u?i(s.id):a(s.id)}),p.jsx("span",{className:Ye.eventTitle,children:s.title}),s.start_time&&!e&&p.jsxs("span",{className:Ye.eventTime,children:[vv(s.start_time),s.end_time&&` - ${vv(s.end_time)}`]}),(s.quest_id||s.step_id)&&p.jsx("span",{className:Ye.eventLinked,children:""}),!e&&p.jsx("div",{className:Ye.eventActions,children:p.jsx(st,{size:"small",variant:"danger",onClick:()=>l(s.id),children:""})})]})}const $k="_container_e9q7r_1",Kk="_title_e9q7r_17",Wk="_status_e9q7r_33",Zk="_indicator_e9q7r_49",Jk="_connected_e9q7r_61",e6="_disconnected_e9q7r_71",t6="_lastBackup_e9q7r_79",n6="_statusMessage_e9q7r_91",i6="_actions_e9q7r_121",s6="_button_e9q7r_135",a6="_buttonSecondary_e9q7r_167 _button_e9q7r_135",r6="_buttonDanger_e9q7r_187 _button_e9q7r_135",o6="_backupList_e9q7r_209",l6="_backupItem_e9q7r_233",u6="_backupName_e9q7r_255",c6="_backupDate_e9q7r_269",f6="_restoreButton_e9q7r_279",d6="_noBackups_e9q7r_307",h6="_tokenInputContainer_e9q7r_321",m6="_tokenHelp_e9q7r_329",p6="_tokenInput_e9q7r_321",g6="_tokenActions_e9q7r_393",Et={container:$k,title:Kk,status:Wk,indicator:Zk,connected:Jk,disconnected:e6,lastBackup:t6,statusMessage:n6,actions:i6,button:s6,buttonSecondary:a6,buttonDanger:r6,backupList:o6,backupItem:l6,backupName:u6,backupDate:c6,restoreButton:f6,noBackups:d6,tokenInputContainer:h6,tokenHelp:m6,tokenInput:p6,tokenActions:g6};function _6(){const[s,e]=ee.useState(!1),[i,a]=ee.useState(!0),[l,u]=ee.useState(null),[m,y]=ee.useState(""),[E,g]=ee.useState([]),[w,C]=ee.useState(!1),[I,$]=ee.useState(""),[W,ne]=ee.useState(!1),[G,z]=ee.useState(!1),[le,me]=ee.useState(""),he=ee.useCallback(()=>{e(i0()),u(s0())},[]);ee.useEffect(()=>{he(),a(!1)},[he]);const Ae=async()=>{if(!I.trim()){y("Please enter a GitHub token");return}y("Verifying token..."),await qw(I.trim())?(kw(I.trim()),e(!0),ne(!1),$(""),y("Connected to GitHub!")):y("Invalid token. Please check and try again.")},xe=()=>{jw(),e(!1),u(null),y("Disconnected"),g([])},O=async()=>{y("Backing up...");try{const U=await Pm(),x=await r0(U);x.success?(y(`Backup saved: ${x.fileName}`),u(new Date),await l0(7)):y(`Backup failed: ${x.error}`)}catch(U){y(`Backup failed: ${U instanceof Error?U.message:"Unknown error"}`)}},D=async()=>{if(C(!w),!w){y("Loading backups...");const U=await o0();g(U),y("")}},j=()=>{const U=le.trim();if(!U){y("Please enter a gist ID");return}const x=U.match(/([a-f0-9]{32})/i);x?(localStorage.setItem("github_gist_id",x[1]),y('Gist ID set! Click "Restore from Backup" to see backups.'),z(!1),me("")):y("Invalid gist ID. Paste the gist URL or ID.")},V=async U=>{if(confirm(`Restore from "${U}"? This will replace all current data.`)){y("Restoring...");try{const x=await Bw(U);x?(await WE(x),y("Restored successfully! Refreshing..."),setTimeout(()=>window.location.reload(),1500)):y("Failed to download backup")}catch(x){y(`Restore failed: ${x instanceof Error?x.message:"Unknown error"}`)}}},k=U=>{const x=U.match(/backup-(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})/);if(x){const[,ve,Tt,P,J,_e]=x;return`${ve}-${Tt}-${P} ${J}:${_e}`}return U};return i?p.jsx("div",{className:Et.container,children:"Loading..."}):p.jsxs("div",{className:Et.container,children:[p.jsx("h3",{className:Et.title,children:"Cloud Backup (GitHub)"}),p.jsxs("div",{className:Et.status,children:[p.jsx("span",{className:`${Et.indicator} ${s?Et.connected:Et.disconnected}`}),p.jsx("span",{children:s?"Connected to GitHub":"Not connected"})]}),l&&p.jsxs("p",{className:Et.lastBackup,children:["Last backup: ",l.toLocaleString()]}),m&&p.jsx("p",{className:Et.statusMessage,children:m}),p.jsx("div",{className:Et.actions,children:s?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:O,className:Et.button,children:"Backup Now"}),p.jsx("button",{onClick:D,className:Et.buttonSecondary,children:w?"Hide Backups":"Restore from Backup"}),p.jsx("button",{onClick:()=>z(!G),className:Et.buttonSecondary,children:G?"Cancel":"Link Existing Gist"}),p.jsx("button",{onClick:xe,className:Et.buttonDanger,children:"Disconnect"}),G&&p.jsxs("div",{className:Et.tokenInputContainer,children:[p.jsx("p",{className:Et.tokenHelp,children:"Paste your gist URL or ID to restore from an existing backup:"}),p.jsx("input",{type:"text",value:le,onChange:U=>me(U.target.value),placeholder:"https://gist.github.com/user/abc123... or just abc123...",className:Et.tokenInput}),p.jsx("button",{onClick:j,className:Et.button,children:"Link Gist"})]})]}):p.jsx(p.Fragment,{children:W?p.jsxs("div",{className:Et.tokenInputContainer,children:[p.jsxs("p",{className:Et.tokenHelp,children:["Create a token at ",p.jsx("a",{href:"https://github.com/settings/tokens/new?description=Goal%20Game%20Backup&scopes=gist",target:"_blank",rel:"noopener noreferrer",children:"GitHub Settings"})," with ",p.jsx("strong",{children:"gist"})," scope."]}),p.jsx("input",{type:"password",value:I,onChange:U=>$(U.target.value),placeholder:"Paste your GitHub token",className:Et.tokenInput}),p.jsxs("div",{className:Et.tokenActions,children:[p.jsx("button",{onClick:Ae,className:Et.button,children:"Save Token"}),p.jsx("button",{onClick:()=>{ne(!1),$("")},className:Et.buttonSecondary,children:"Cancel"})]})]}):p.jsx("button",{onClick:()=>ne(!0),className:Et.button,children:"Connect GitHub"})})}),w&&E.length>0&&p.jsxs("div",{className:Et.backupList,children:[p.jsx("h4",{children:"Available Backups (Last 7 kept)"}),E.map(U=>p.jsxs("div",{className:Et.backupItem,children:[p.jsx("span",{className:Et.backupName,children:k(U.fileName)}),p.jsxs("span",{className:Et.backupDate,children:[Math.round(U.size/1024)," KB"]}),p.jsx("button",{onClick:()=>V(U.fileName),className:Et.restoreButton,children:"Restore"})]},U.fileName))]}),w&&E.length===0&&p.jsx("p",{className:Et.noBackups,children:"No backups found"})]})}function y6(){const{settings:s,permissionState:e,isSupported:i,isConfigured:a,canEnable:l,isIOS:u,isStandalone:m,loading:y,error:E,enableNotifications:g,disableNotificationsHandler:w,setDefaultReminderMinutes:C}=Cb();return a?i?p.jsxs(li,{className:St.settingsPanel,children:[p.jsx("h3",{className:St.settingsTitle,children:"Push Notifications"}),u&&!m&&p.jsxs("div",{className:St.iosInstructions,children:[p.jsx("p",{className:St.iosTitle,children:"iOS Setup Required"}),p.jsx("p",{className:St.iosText,children:"To receive push notifications on iOS, you need to add this app to your home screen first:"}),p.jsxs("ol",{className:St.iosList,children:[p.jsx("li",{children:"Tap the Share button in Safari"}),p.jsx("li",{children:'Select "Add to Home Screen"'}),p.jsx("li",{children:"Open the app from your home screen"}),p.jsx("li",{children:"Then enable notifications here"})]})]}),e==="denied"&&p.jsx("div",{className:St.deniedMessage,children:p.jsx("p",{children:"Notifications are blocked. Please enable them in your browser settings."})}),E&&p.jsx("div",{className:St.errorMessage,children:p.jsx("p",{children:E})}),p.jsxs("div",{className:St.settingRow,children:[p.jsx("span",{className:St.settingLabel,children:"Event Reminders"}),s.enabled?p.jsx(st,{variant:"danger",size:"small",onClick:w,disabled:y,children:y?"Disabling...":"Disable"}):p.jsx(st,{variant:"primary",size:"small",onClick:g,disabled:y||!l||e==="denied",children:y?"Enabling...":"Enable"})]}),s.enabled&&p.jsxs("div",{className:St.settingRow,children:[p.jsx("span",{className:St.settingLabel,children:"Default Reminder"}),p.jsx("select",{className:St.reminderSelect,value:s.defaultReminderMinutes,onChange:I=>C(Number(I.target.value)),children:Vb.filter(I=>I.value!==null).map(I=>p.jsx("option",{value:I.value,children:I.label},I.value))})]}),s.enabled&&p.jsxs("div",{className:St.statusIndicator,children:[p.jsx("span",{className:St.statusDot}),"Notifications enabled"]}),s.enabled&&p.jsxs("div",{className:St.debugInfo,children:[p.jsx("p",{className:St.debugLabel,children:"Token Status:"}),s.fcmToken?p.jsxs("p",{className:St.debugToken,children:[s.fcmToken.substring(0,20),"...",s.fcmToken.substring(s.fcmToken.length-10)]}):p.jsx("p",{className:St.debugError,children:"No token - notifications will not work!"}),p.jsxs("p",{className:St.debugLabel,children:["Device ID: ",s.deviceId.substring(0,8),"..."]})]}),s.enabled&&!s.fcmToken&&p.jsx("div",{className:St.errorMessage,children:p.jsx("p",{children:"Token missing! Try: Disable  Wait 5 sec  Re-enable"})})]}):p.jsxs(li,{className:St.settingsPanel,children:[p.jsx("h3",{className:St.settingsTitle,children:"Push Notifications"}),p.jsx("p",{className:St.settingsDescription,children:"Push notifications are not supported in this browser."})]}):p.jsxs(li,{className:St.settingsPanel,children:[p.jsx("h3",{className:St.settingsTitle,children:"Push Notifications"}),p.jsx("p",{className:St.settingsDescription,children:"Push notifications are not configured. To enable them, add your Firebase configuration to the .env file."})]})}const v6="_dailyQuestsPanel_rygmp_1",E6="_questsList_rygmp_55",T6="_questItem_rygmp_67",b6="_completed_rygmp_89",S6="_questItemHeader_rygmp_99",w6="_questCheckbox_rygmp_111",A6="_questInfo_rygmp_149",N6="_questTitleRow_rygmp_159",R6="_questName_rygmp_173",C6="_questXp_rygmp_193",x6="_questDescription_rygmp_223",D6="_progressContainer_rygmp_235",I6="_progressBar_rygmp_247",O6="_progressFill_rygmp_263",k6="_progressText_rygmp_285",j6="_bonusSection_rygmp_303",L6="_available_rygmp_321",M6="_claimed_rygmp_329",V6="_bonusTitle_rygmp_349",U6="_bonusDescription_rygmp_371",B6="_bonusXp_rygmp_383",q6="_claimButton_rygmp_403",z6="_loading_rygmp_413",P6="_emptyState_rygmp_429",Gt={dailyQuestsPanel:v6,questsList:E6,questItem:T6,completed:b6,questItemHeader:S6,questCheckbox:w6,questInfo:A6,questTitleRow:N6,questName:R6,questXp:C6,questDescription:x6,progressContainer:D6,progressBar:I6,progressFill:O6,progressText:k6,bonusSection:j6,available:L6,claimed:M6,bonusTitle:V6,bonusDescription:U6,bonusXp:B6,claimButton:q6,loading:z6,emptyState:P6};function H6({quests:s,loading:e,allCompleted:i,completedCount:a,bonusClaimed:l,bonusXp:u,onClaimBonus:m}){const[y,E]=ee.useState(!1),g=e?"Daily Quests (Loading...)":`Daily Quests (${a}/${s.length})${i&&!l?" - Bonus Ready!":""}`;return p.jsxs("div",{className:Gt.dailyQuestsPanel,children:[p.jsx(st,{size:"small",variant:i&&!l?"primary":void 0,onClick:()=>E(!y),style:{width:"100%",marginBottom:y?8:0},children:y?"Hide Daily Quests":g}),y&&p.jsx(li,{glow:i&&!l,children:e?p.jsx("div",{className:Gt.loading,children:"Loading daily quests..."}):s.length===0?p.jsx("div",{className:Gt.emptyState,children:"No daily quests available"}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:Gt.questsList,children:s.map(w=>p.jsx(F6,{quest:w},w.id))}),p.jsxs("div",{className:`${Gt.bonusSection} ${i&&!l?Gt.available:l?Gt.claimed:""}`,children:[p.jsx("div",{className:Gt.bonusTitle,children:l?"Bonus Claimed!":"Complete All Quests"}),p.jsx("div",{className:Gt.bonusDescription,children:l?"Great work! See you tomorrow.":"Finish all 3 quests to earn a bonus"}),p.jsxs("div",{className:Gt.bonusXp,children:["+",u," XP"]}),i&&!l&&p.jsx(st,{className:Gt.claimButton,size:"small",onClick:m,children:"Claim Bonus"})]})]})})]})}function F6({quest:s}){const e=Math.min(s.current_value/s.target_value*100,100);return p.jsxs("div",{className:`${Gt.questItem} ${s.is_completed?Gt.completed:""}`,children:[p.jsxs("div",{className:Gt.questItemHeader,children:[p.jsx("div",{className:Gt.questCheckbox,children:s.is_completed&&p.jsx("span",{children:""})}),p.jsxs("div",{className:Gt.questInfo,children:[p.jsxs("div",{className:Gt.questTitleRow,children:[p.jsx("span",{className:Gt.questName,children:s.title}),p.jsxs("span",{className:Gt.questXp,children:["+",s.xp_reward," XP"]})]}),p.jsx("div",{className:Gt.questDescription,children:s.description})]})]}),p.jsxs("div",{className:Gt.progressContainer,children:[p.jsx("div",{className:Gt.progressBar,children:p.jsx("div",{className:Gt.progressFill,style:{width:`${e}%`}})}),p.jsxs("span",{className:Gt.progressText,children:[s.current_value,"/",s.target_value]})]})]})}const G6="_bossPanel_la2se_1",X6="_bossButton_la2se_9",Y6="_bossContent_la2se_17",Q6="_bossHeader_la2se_25",$6="_bossIcon_la2se_39",K6="_defeated_la2se_49",W6="_bossInfo_la2se_57",Z6="_bossName_la2se_65",J6="_bossDescription_la2se_89",ej="_bossStatus_la2se_101",tj="_bossReward_la2se_109",nj="_hpSection_la2se_135",ij="_hpLabel_la2se_143",sj="_hpTitle_la2se_157",aj="_hpValue_la2se_171",rj="_hpBar_la2se_181",oj="_hpFill_la2se_199",lj="_low_la2se_237",uj="_damageStats_la2se_255",cj="_damageStat_la2se_255",fj="_damageStatValue_la2se_283",dj="_damageStatLabel_la2se_295",hj="_damageGuide_la2se_309",mj="_damageGuideTitle_la2se_323",pj="_damageGuideList_la2se_339",gj="_damageGuideItem_la2se_353",_j="_damageGuideAmount_la2se_365",yj="_defeatedBanner_la2se_377",vj="_defeatedTitle_la2se_395",Ej="_defeatedText_la2se_409",Tj="_defeatedRewards_la2se_419",bj="_weekInfo_la2se_433",Sj="_loading_la2se_449",Be={bossPanel:G6,bossButton:X6,bossContent:Y6,bossHeader:Q6,bossIcon:$6,defeated:K6,bossInfo:W6,bossName:Z6,bossDescription:J6,bossStatus:ej,bossReward:tj,hpSection:nj,hpLabel:ij,hpTitle:sj,hpValue:aj,hpBar:rj,hpFill:oj,low:lj,damageStats:uj,damageStat:cj,damageStatValue:fj,damageStatLabel:dj,damageGuide:hj,damageGuideTitle:mj,damageGuideList:pj,damageGuideItem:gj,damageGuideAmount:_j,defeatedBanner:yj,defeatedTitle:vj,defeatedText:Ej,defeatedRewards:Tj,weekInfo:bj,loading:Sj};function wj({boss:s,loading:e,weekStart:i,weekEnd:a,hpPercentage:l,damageDealt:u,totalDefeated:m}){const[y,E]=ee.useState(!1),g=C=>new Date(C+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}),w=e?"Weekly Boss (Loading...)":s?.is_defeated?`Weekly Boss - ${s.name} DEFEATED!`:`Weekly Boss - ${s?.name} (${s?.current_hp}/${s?.max_hp} HP)`;return p.jsxs("div",{className:Be.bossPanel,children:[p.jsx(st,{size:"small",variant:s?.is_defeated?"primary":void 0,onClick:()=>E(!y),className:Be.bossButton,children:y?"Hide Weekly Boss":w}),y&&p.jsx(li,{className:Be.bossContent,glow:s?.is_defeated,children:e?p.jsx("div",{className:Be.loading,children:"Summoning this week's boss..."}):s?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:Be.bossHeader,children:[p.jsx("span",{className:`${Be.bossIcon} ${s.is_defeated?Be.defeated:""}`,children:s.icon}),p.jsxs("div",{className:Be.bossInfo,children:[p.jsx("div",{className:`${Be.bossName} ${s.is_defeated?Be.defeated:""}`,children:s.name}),p.jsx("div",{className:Be.bossDescription,children:s.description})]}),p.jsxs("div",{className:Be.bossStatus,children:[p.jsxs("div",{className:Be.bossReward,children:["+",s.xp_reward," XP"]}),s.bonus_shields>0&&p.jsxs("div",{className:Be.bossReward,children:["+",s.bonus_shields," Shield",s.bonus_shields>1?"s":""]})]})]}),s.is_defeated&&p.jsxs("div",{className:Be.defeatedBanner,children:[p.jsx("div",{className:Be.defeatedTitle,children:"Victory!"}),p.jsxs("div",{className:Be.defeatedText,children:["You defeated ",s.name," this week!"]}),p.jsxs("div",{className:Be.defeatedRewards,children:["Rewards: +",s.xp_reward," XP",s.bonus_shields>0&&`, +${s.bonus_shields} Streak Shield${s.bonus_shields>1?"s":""}`]})]}),!s.is_defeated&&p.jsxs("div",{className:Be.hpSection,children:[p.jsxs("div",{className:Be.hpLabel,children:[p.jsx("span",{className:Be.hpTitle,children:"Boss HP"}),p.jsxs("span",{className:Be.hpValue,children:[s.current_hp," / ",s.max_hp]})]}),p.jsx("div",{className:Be.hpBar,children:p.jsx("div",{className:`${Be.hpFill} ${l<30?Be.low:""}`,style:{width:`${l}%`}})})]}),p.jsxs("div",{className:Be.damageStats,children:[p.jsxs("div",{className:Be.damageStat,children:[p.jsx("div",{className:Be.damageStatValue,children:u}),p.jsx("div",{className:Be.damageStatLabel,children:"Damage Dealt"})]}),p.jsxs("div",{className:Be.damageStat,children:[p.jsx("div",{className:Be.damageStatValue,children:m}),p.jsx("div",{className:Be.damageStatLabel,children:"Bosses Defeated"})]})]}),!s.is_defeated&&p.jsxs("div",{className:Be.damageGuide,children:[p.jsx("div",{className:Be.damageGuideTitle,children:"How to Deal Damage"}),p.jsxs("div",{className:Be.damageGuideList,children:[p.jsxs("div",{className:Be.damageGuideItem,children:[p.jsx("span",{children:"Complete Step"}),p.jsxs("span",{className:Be.damageGuideAmount,children:["-",Yr.step_completed," HP"]})]}),p.jsxs("div",{className:Be.damageGuideItem,children:[p.jsx("span",{children:"Activate Buff"}),p.jsxs("span",{className:Be.damageGuideAmount,children:["-",Yr.buff_activated," HP"]})]}),p.jsxs("div",{className:Be.damageGuideItem,children:[p.jsx("span",{children:"Complete Quest"}),p.jsxs("span",{className:Be.damageGuideAmount,children:["-",Yr.quest_completed," HP"]})]}),p.jsxs("div",{className:Be.damageGuideItem,children:[p.jsx("span",{children:"Complete Goal"}),p.jsxs("span",{className:Be.damageGuideAmount,children:["-",Yr.goal_completed," HP"]})]}),p.jsxs("div",{className:Be.damageGuideItem,children:[p.jsx("span",{children:"Daily Quest"}),p.jsxs("span",{className:Be.damageGuideAmount,children:["-",Yr.daily_quest_completed," HP"]})]}),p.jsxs("div",{className:Be.damageGuideItem,children:[p.jsx("span",{children:"Planner Event"}),p.jsxs("span",{className:Be.damageGuideAmount,children:["-",Yr.planner_event_completed," HP"]})]})]})]}),p.jsxs("div",{className:Be.weekInfo,children:["Week of ",g(i)," - ",g(a)]})]}):p.jsx("div",{className:Be.loading,children:"No boss found"})})]})}const Aj="_guideButton_1u1py_1",Nj="_guideOverlay_1u1py_71",Rj="_guideContainer_1u1py_95",Cj="_guideHeader_1u1py_159",xj="_guideTitle_1u1py_177",Dj="_closeButton_1u1py_191",Ij="_guideContent_1u1py_229",Oj="_table_1u1py_335",kj="_tocList_1u1py_393",jj="_tocItem_1u1py_411",ri={guideButton:Aj,guideOverlay:Nj,guideContainer:Rj,guideHeader:Cj,guideTitle:xj,closeButton:Dj,guideContent:Ij,table:Oj,tocList:kj,tocItem:jj};function Lj(){const[s,e]=ee.useState(!1);return p.jsxs(p.Fragment,{children:[p.jsx("button",{className:ri.guideButton,onClick:()=>e(!0),title:"Open Guide",children:"?"}),s&&p.jsx(Mj,{onClose:()=>e(!1)})]})}function Mj({onClose:s}){const e=ee.useRef(null);ee.useEffect(()=>{const a=l=>{l.key==="Escape"&&s()};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=""}},[s]);const i=a=>{e.current?.querySelector(`#${a}`)?.scrollIntoView({behavior:"smooth"})};return p.jsx("div",{className:ri.guideOverlay,onClick:s,children:p.jsxs("div",{className:ri.guideContainer,onClick:a=>a.stopPropagation(),ref:e,children:[p.jsxs("div",{className:ri.guideHeader,children:[p.jsx("span",{className:ri.guideTitle,children:"Adventurer's Guide"}),p.jsx("button",{className:ri.closeButton,onClick:s,children:"Close"})]}),p.jsx("ul",{className:ri.tocList,children:["overview","character","quests","buffs","planner","xp","levels","stats","tips","data"].map(a=>p.jsx("li",{className:ri.tocItem,onClick:()=>i(`guide-${a}`),children:a==="xp"?"XP System":a==="data"?"Save Data":a.charAt(0).toUpperCase()+a.slice(1)},a))}),p.jsxs("div",{className:ri.guideContent,children:[p.jsx("h2",{id:"guide-overview",children:"Overview"}),p.jsxs("p",{children:["Goal Game turns your real-life goals into an RPG adventure. You create ",p.jsx("strong",{children:"Goals"})," (big-picture ambitions), break them into ",p.jsx("strong",{children:"Quests"})," (projects), and then into ",p.jsx("strong",{children:"Steps"})," (individual tasks). Completing steps earns ",p.jsx("strong",{children:"XP"}),", which levels up your character."]}),p.jsxs("p",{children:["Track daily habits as ",p.jsx("strong",{children:"Buffs"})," (positive) and ",p.jsx("strong",{children:"Debuffs"})," (negative) that affect your character's stats. Plan your schedule with the ",p.jsx("strong",{children:"Planner"}),"."]}),p.jsx("h2",{id:"guide-character",children:"Character Screen"}),p.jsx("p",{children:"Your character screen shows your current progress at a glance."}),p.jsx("h3",{children:"What you'll see"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Name"}),`  Tap "Rename" to change your character's name.`]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Level & Title"}),'  Your current level and rank title (e.g., "Novice", "Adept"). Titles change automatically as you level up.']}),p.jsxs("li",{children:[p.jsx("strong",{children:"XP Bar"}),"  Shows progress toward your next level. The numbers show current XP in this level / XP needed for next level."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Total XP"}),"  Your lifetime XP earned across all activities."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Stats"}),"  Five attributes (Stamina, Willpower, Health, Focus, Charisma) that start at 10 and change based on your active buffs/debuffs."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Active Effects"}),"  Currently active buffs (green pulse) and debuffs (red throb) with time remaining."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"XP History"}),"  A log of your most recent XP gains showing what you earned and why."]})]}),p.jsx("h2",{id:"guide-quests",children:"Quest Log"}),p.jsx("p",{children:"This is where you organize everything you want to accomplish."}),p.jsx("h3",{children:"Hierarchy"}),p.jsx("p",{children:"Life is organized in three layers:"}),p.jsxs("ol",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Goals"}),'  Big-picture ambitions tied to a life domain. Example: "Get fit" in the Health domain.']}),p.jsxs("li",{children:[p.jsx("strong",{children:"Quests"}),'  Specific projects within a goal. Example: "Run a 5K" under "Get fit".']}),p.jsxs("li",{children:[p.jsx("strong",{children:"Steps"}),'  Individual actionable tasks within a quest. Example: "Run 1 mile without stopping" inside "Run a 5K".']})]}),p.jsx("h3",{children:"Domains"}),p.jsx("p",{children:"Every goal belongs to one of eight life domains:"}),p.jsxs("table",{className:ri.table,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Icon"}),p.jsx("th",{children:"Domain"}),p.jsx("th",{children:"Examples"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Health"}),p.jsx("td",{children:"Fitness, diet, sleep"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Career"}),p.jsx("td",{children:"Work projects, promotions, skills"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Learning"}),p.jsx("td",{children:"Courses, reading, certifications"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Social"}),p.jsx("td",{children:"Relationships, networking, community"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Finance"}),p.jsx("td",{children:"Saving, investing, budgeting"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Creative"}),p.jsx("td",{children:"Art, music, writing, hobbies"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Spiritual"}),p.jsx("td",{children:"Meditation, mindfulness, gratitude"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsx("td",{children:"Home"}),p.jsx("td",{children:"Cleaning, organizing, repairs"})]})]})]}),p.jsx("h3",{children:"Priority Levels"}),p.jsx("p",{children:"Quests and steps can have a priority that affects XP rewards:"}),p.jsxs("table",{className:ri.table,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Priority"}),p.jsx("th",{children:"Color"}),p.jsx("th",{children:"Step XP"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"Normal"}),p.jsx("td",{children:"Gray"}),p.jsx("td",{children:"10 XP"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Important"}),p.jsx("td",{children:"Gold"}),p.jsx("td",{children:"15 XP (1.5x)"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Legendary"}),p.jsx("td",{children:"Orange"}),p.jsx("td",{children:"20 XP (2x)"})]})]})]}),p.jsx("h3",{children:"How to use"}),p.jsxs("ol",{children:[p.jsxs("li",{children:["Tap ",p.jsx("strong",{children:"+ New Goal"}),"  pick a domain, give it a title."]}),p.jsxs("li",{children:["Inside a goal, tap ",p.jsx("strong",{children:"+ Quest"}),"  name the project, choose priority."]}),p.jsx("li",{children:'Tap a quest to expand it, then type steps in the "Add a step" field at the bottom.'}),p.jsx("li",{children:"Check off steps to earn XP. When all steps are done, the quest auto-completes for bonus XP. When all quests in a goal are done, the goal auto-completes for even more bonus XP."})]}),p.jsx("h3",{children:"Filters"}),p.jsx("p",{children:"Use the dropdowns at the top to filter by domain or status (Active / Completed / All)."}),p.jsx("h2",{id:"guide-buffs",children:"Buffs & Debuffs"}),p.jsx("p",{children:"Buffs and debuffs represent daily habits that affect your character."}),p.jsx("h3",{children:"Buffs (Positive Habits)"}),p.jsxs("p",{children:["Things you ",p.jsx("em",{children:"want"})," to do every day. Examples:"]}),p.jsxs("ul",{children:[p.jsx("li",{children:" Morning Exercise  +2 Stamina, +1 Health"}),p.jsx("li",{children:" Meditation  +2 Willpower, +1 Focus"}),p.jsx("li",{children:" 8 Hours Sleep  +1 Health, +1 Focus, +1 Stamina"}),p.jsx("li",{children:" Read 30 Minutes  +2 Focus"})]}),p.jsxs("p",{children:["Activating a buff earns ",p.jsx("strong",{children:"5 XP"})," and applies its stat effects for the duration you set (e.g., 24 hours). After that, the buff expires and you need to activate it again the next day."]}),p.jsx("h3",{children:"Debuffs (Negative Habits)"}),p.jsxs("p",{children:["Things you want to be ",p.jsx("em",{children:"honest about tracking"}),". There is no XP penalty  this is for self-awareness. Examples:"]}),p.jsxs("ul",{children:[p.jsx("li",{children:" Junk Food  -1 Health, -1 Stamina"}),p.jsx("li",{children:" Doomscrolling  -2 Focus, -1 Willpower"}),p.jsx("li",{children:" Alcohol  -1 Health, -1 Focus"})]}),p.jsx("p",{children:"Debuffs still affect your stats while active, shown as red on your character screen."}),p.jsx("h3",{children:"Streaks"}),p.jsxs("p",{children:["Activate the same buff on consecutive days to build a streak. Every ",p.jsx("strong",{children:"7-day streak"})," earns a bonus ",p.jsx("strong",{children:"25 XP"}),"."]}),p.jsx("h3",{children:"How to use"}),p.jsxs("ol",{children:[p.jsxs("li",{children:["Tap ",p.jsx("strong",{children:"+ New Buff/Debuff"})," to define a habit template."]}),p.jsx("li",{children:"Choose a name, type (buff or debuff), icon, duration in hours, and stat effects (positive numbers for buffs, negative for debuffs)."}),p.jsxs("li",{children:["Once created, it appears in the Buffs or Debuffs column. Tap ",p.jsx("strong",{children:"Activate"})," each day you do the habit."]}),p.jsx("li",{children:"Active effects appear at the top with a countdown timer and are reflected on your Character screen stats."})]}),p.jsx("h3",{children:"Expiry"}),p.jsxs("p",{children:["Buffs and debuffs expire automatically after their duration. The app checks every 60 seconds. You can also manually remove an active effect by tapping ",p.jsx("strong",{children:"Remove"}),"."]}),p.jsx("h2",{id:"guide-planner",children:"Planner"}),p.jsx("p",{children:"A calendar to schedule your time and link events to your quests."}),p.jsx("h3",{children:"Views"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Day"}),"  Shows time slots from 6 AM to 9 PM. Scheduled events appear in their time slot. Unscheduled events appear at the bottom."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Week"}),"  7-column grid (MonSun). Each day shows its events. Tap ",p.jsx("strong",{children:"+"})," on any day to add an event."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Month"}),'  Calendar grid. Tap any day to add an event. Shows up to 3 events per day with a "+X more" indicator.']})]}),p.jsx("h3",{children:"Navigation"}),p.jsxs("p",{children:["Use the ",p.jsx("strong",{children:" "})," arrows to move between days/weeks/months. Tap ",p.jsx("strong",{children:"Today"})," to jump back to the current date."]}),p.jsx("h3",{children:"Events"}),p.jsxs("p",{children:["Tap ",p.jsx("strong",{children:"+ Event"})," to create one. Each event has:"]}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Title"}),"  What you're doing."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Date"}),"  When."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Start/End Time"}),"  Optional. If set, it appears in the correct time slot in Day view."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Description"}),"  Optional notes."]})]}),p.jsxs("p",{children:["Check off events when completed. Linked events (connected to a quest or step) earn ",p.jsx("strong",{children:"10 XP"})," when completed."]}),p.jsx("h2",{id:"guide-xp",children:"XP System"}),p.jsx("p",{children:"Everything you do earns experience points:"}),p.jsxs("table",{className:ri.table,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Action"}),p.jsx("th",{children:"XP"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"Complete a normal step"}),p.jsx("td",{children:"+10"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Complete an important step"}),p.jsx("td",{children:"+15"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Complete a legendary step"}),p.jsx("td",{children:"+20"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Complete a quest (all steps done)"}),p.jsx("td",{children:"+50 bonus"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Complete a goal (all quests done)"}),p.jsx("td",{children:"+200 bonus"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Activate a buff (daily habit)"}),p.jsx("td",{children:"+5"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"7-day streak on any buff"}),p.jsx("td",{children:"+25 bonus"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Complete a linked planner event"}),p.jsx("td",{children:"+10"})]})]})]}),p.jsx("h2",{id:"guide-levels",children:"Levels & Titles"}),p.jsxs("p",{children:["XP needed per level increases as you grow. The formula is ",p.jsx("code",{children:"50  level^1.8"}),"."]}),p.jsxs("table",{className:ri.table,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Level"}),p.jsx("th",{children:"Title"}),p.jsx("th",{children:"Approx. Timeline"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"14"}),p.jsx("td",{children:"Novice"}),p.jsx("td",{children:"Starting out"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"59"}),p.jsx("td",{children:"Apprentice"}),p.jsx("td",{children:"~12 weeks"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"1014"}),p.jsx("td",{children:"Journeyman"}),p.jsx("td",{children:"~34 weeks"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"1521"}),p.jsx("td",{children:"Adept"}),p.jsx("td",{children:"~12 months"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"2229"}),p.jsx("td",{children:"Expert"}),p.jsx("td",{children:"~24 months"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"3039"}),p.jsx("td",{children:"Master"}),p.jsx("td",{children:"~48 months"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"4049"}),p.jsx("td",{children:"Legend"}),p.jsx("td",{children:"~812 months"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"50+"}),p.jsx("td",{children:"Dragonborn"}),p.jsx("td",{children:"~1 year+"})]})]})]}),p.jsx("p",{children:"When you level up, a golden overlay appears announcing your new level and title."}),p.jsx("h2",{id:"guide-stats",children:"Stats"}),p.jsxs("p",{children:["Your character has five stats, all starting at ",p.jsx("strong",{children:"10"}),":"]}),p.jsxs("table",{className:ri.table,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Stat"}),p.jsx("th",{children:"Represents"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"Stamina"}),p.jsx("td",{children:"Physical energy, endurance, exercise habits"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Willpower"}),p.jsx("td",{children:"Discipline, self-control, mental toughness"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Health"}),p.jsx("td",{children:"Physical wellbeing, nutrition, sleep"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Focus"}),p.jsx("td",{children:"Concentration, productivity, mental clarity"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Charisma"}),p.jsx("td",{children:"Social skills, confidence, communication"})]})]})]}),p.jsx("p",{children:"Stats are modified by active buffs and debuffs. They serve as a mirror of your current lifestyle  high Focus means you've been studying and avoiding distractions; low Health means you've been eating junk food or skipping sleep."}),p.jsx("h2",{id:"guide-tips",children:"Tips"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Start small."})," Create one goal with one quest and a few steps. Don't overload yourself on day one."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Be honest with debuffs."})," There's no punishment  tracking negative habits helps you see patterns."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Use priorities wisely."}),' Reserve "Legendary" for truly difficult or impactful tasks.']}),p.jsxs("li",{children:[p.jsx("strong",{children:"Build streaks."})," The 7-day streak bonus compounds  maintaining 3 daily buffs earns 75 bonus XP per week on top of the daily 5 XP each."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Use the planner."})," Scheduling time for quests makes you far more likely to complete them."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Check your character screen daily."})," Your stats tell you how balanced your life is."]})]}),p.jsx("h2",{id:"guide-data",children:"Saving & Data"}),p.jsx("p",{children:"All your data is stored locally on this device in the browser's database. It persists across sessions  closing and reopening the app keeps everything."}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Export Save"}),"  Downloads your entire database as a .db file. Use this for backups."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Import Save"}),"  Loads a previously exported .db file, replacing all current data. Use this to restore a backup or transfer data between devices."]})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Important:"})," Clearing your browser/app data will erase your progress. Export a backup regularly."]}),p.jsx("h3",{children:"Keyboard Shortcuts (Desktop)"}),p.jsxs("table",{className:ri.table,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Key"}),p.jsx("th",{children:"Action"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"1"}),p.jsx("td",{children:"Character screen"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"2"}),p.jsx("td",{children:"Quest Log"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"3"}),p.jsx("td",{children:"Buffs"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"4"}),p.jsx("td",{children:"Planner"})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"Esc"}),p.jsx("td",{children:"Close any open modal/popup"})]})]})]})]})]})})}function Vj(){const{ready:s,error:e}=zS(),[i,a]=ee.useState("character");return s?p.jsx(Uj,{activeTab:i,setActiveTab:a}):p.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a0f",color:"#c8a84e",fontFamily:"Cinzel, serif",fontSize:"1.2rem"},children:e?`Error: ${e}`:"Loading database..."})}function Uj({activeTab:s,setActiveTab:e}){const i=JS(),a=JD({grantXP:i.grantXP}),l=aI({grantXP:i.grantXP,addShields:a.addShields}),u=qD({grantXP:i.grantXP}),m=hw({grantXP:i.grantXP,onStepComplete:()=>{u.updateProgress("complete_steps",1),l.dealDamage("step_completed","Completed a step")},onQuestComplete:()=>{l.dealDamage("quest_completed","Completed a quest")},onGoalComplete:()=>{l.dealDamage("goal_completed","Completed a goal")}}),y=Cb(),E=Sw({grantXP:i.grantXP,scheduleBuffExpiry:y.scheduleBuffExpiry,cancelBuffExpiry:y.cancelBuffExpiry,onBuffActivated:z=>{u.updateProgress("activate_buffs",1),new Date().getHours()<8&&u.updateProgress("early_start",1),z==="buff"&&(u.updateProgress("activate_specific",1),l.dealDamage("buff_activated","Activated a buff")),a.refresh()}}),g=Dw({grantXP:i.grantXP,scheduleEventReminder:y.scheduleEventReminder,cancelEventReminder:y.cancelEventReminder,onEventComplete:()=>{u.updateProgress("planner_event",1),l.dealDamage("planner_event_completed","Completed a planner event")}}),w=zw(),[C,I]=ee.useState(!1),[$,W]=ee.useState(!1);ee.useEffect(()=>{i.refresh(),s==="quests"&&m.refresh(),s==="buffs"&&(E.refresh(),a.refresh()),s==="planner"&&g.refresh()},[s]),ee.useEffect(()=>{m.refresh(),E.refresh(),g.refresh(),a.refresh(),u.checkNoDebuffs()},[]),ee.useEffect(()=>{const z=le=>{le.target instanceof HTMLInputElement||le.target instanceof HTMLTextAreaElement||le.target instanceof HTMLSelectElement||(le.key==="1"&&e("character"),le.key==="2"&&e("quests"),le.key==="3"&&e("buffs"),le.key==="4"&&e("planner"))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[e]);const ne=ee.useCallback(async()=>{const z=await Pm(),le=new Blob([new Uint8Array(z)],{type:"application/octet-stream"}),me=URL.createObjectURL(le),he=document.createElement("a");he.href=me,he.download=`goal-game-backup-${new Date().toISOString().split("T")[0]}.db`,he.click(),URL.revokeObjectURL(me)},[]),G=ee.useCallback(async()=>{const z=document.createElement("input");z.type="file",z.accept=".db",z.onchange=async()=>{const le=z.files?.[0];if(!le)return;const me=await le.arrayBuffer();await WE(new Uint8Array(me)),window.location.reload()},z.click()},[]);return p.jsxs("div",{className:Mn.appShell,children:[p.jsx(wI,{activeTab:s,onTabChange:e}),p.jsx(jI,{character:i.character}),p.jsxs("main",{className:Mn.main,children:[s==="character"&&p.jsxs(p.Fragment,{children:[p.jsx(H6,{quests:u.quests,loading:u.loading,allCompleted:u.allCompleted,completedCount:u.completedCount,bonusClaimed:u.bonusClaimed,bonusXp:u.bonusXp,totalXpEarned:u.totalXpEarned,onClaimBonus:async()=>{await u.claimBonus();for(const z of u.quests)z.is_completed&&l.dealDamage("daily_quest_completed",`Daily Quest: ${z.title}`)}}),p.jsx(wj,{boss:l.boss,loading:l.loading,weekStart:l.weekStart,weekEnd:l.weekEnd,hpPercentage:l.hpPercentage,damageDealt:l.damageDealt,totalDefeated:l.totalDefeated}),p.jsx(J3,{character:i.character,stats:E.stats,activeBuffs:E.activeBuffs,xpLog:i.xpLog,onNameChange:i.setName})]}),s==="quests"&&p.jsx(G4,{goals:m.goals,domains:m.domains,filterDomain:m.filterDomain,filterStatus:m.filterStatus,onFilterDomain:z=>{m.setFilterDomain(z)},onFilterStatus:z=>{m.setFilterStatus(z)},onCreateGoal:m.createGoal,onCreateQuest:m.createQuest,onCreateStep:m.createStep,onCompleteStep:m.completeStep,onUncompleteStep:m.uncompleteStep,onDeleteStep:m.deleteStep,onDeleteQuest:m.deleteQuest,onDeleteGoal:m.deleteGoal}),s==="buffs"&&p.jsx(BO,{definitions:E.definitions,activeBuffs:E.activeBuffs,onCreateDefinition:E.createDefinition,onDeleteDefinition:E.deleteDefinition,onActivateBuff:E.activateBuff,onDeactivateBuff:E.deactivateBuff,streakInfos:a.streakInfos,shieldCount:a.shieldCount,onUseShield:a.useShield,getUnclaimedMilestones:a.getUnclaimedMilestones,onClaimMilestones:a.claimMilestones}),s==="planner"&&p.jsx(Gk,{view:g.view,setView:g.setView,currentDate:g.currentDate,events:g.events,onNavigate:g.navigateDay,onGoToToday:g.goToToday,onCreate:g.createEvent,onComplete:g.completeEvent,onUncomplete:g.uncompleteEvent,onDelete:g.deleteEvent,notificationsEnabled:y.settings.enabled,defaultReminderMinutes:y.settings.defaultReminderMinutes}),p.jsxs("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:[$&&p.jsx(y6,{}),C&&p.jsx(_6,{}),p.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"},children:[p.jsx(st,{size:"small",variant:"ghost",onClick:()=>W(!$),children:$?"Hide Notifications":"Notifications"}),p.jsx(st,{size:"small",variant:"ghost",onClick:()=>I(!C),children:C?"Hide Cloud Backup":"Cloud Backup"}),p.jsx(st,{size:"small",variant:"ghost",onClick:ne,children:"Export Save"}),p.jsx(st,{size:"small",variant:"ghost",onClick:G,children:"Import Save"})]})]})]}),i.xpFloats.map(z=>p.jsxs("div",{className:Mn.xpFloat,children:["+",z.amount," XP"]},z.id)),i.levelUpInfo&&p.jsx(PI,{level:i.levelUpInfo.level,title:i.levelUpInfo.title,onDismiss:i.dismissLevelUp}),p.jsx(Lj,{}),w.message&&p.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 20px",background:w.status==="error"?"rgba(231, 76, 60, 0.9)":"rgba(46, 204, 113, 0.9)",color:"#fff",borderRadius:8,fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:w.message})]})}SS.createRoot(document.getElementById("root")).render(p.jsx(ee.StrictMode,{children:p.jsx(Vj,{})}));
